open supabase\.temp\profile: The system cannot find the file specified.
Loading project ref from file: supabase\.temp\project-ref
Using connection pooler: postgresql://postgres.xpmbnznsmsujjuwumfiw@aws-1-eu-north-1.pooler.supabase.com:5432/postgres
Using database password from env var...
Supabase CLI 2.76.9
Using profile: supabase (supabase.co)
Creating shadow database...
2026/02/25 16:12:47 PG Send: {"Type":"StartupMessage","ProtocolVersion":196608,"Parameters":{"database":"postgres","user":"postgres"}}
2026/02/25 16:12:47 PG Recv: {"Type":"AuthenticationSASL","AuthMechanisms":["SCRAM-SHA-256"]}
2026/02/25 16:12:47 PG Send: {"Type":"SASLInitialResponse","AuthMechanism":"SCRAM-SHA-256","Data":"n,,n=,r=WZELy7Of80JKVe6ckBGNssvU"}
2026/02/25 16:12:47 PG Recv: {"Type":"AuthenticationSASLContinue","Data":"r=WZELy7Of80JKVe6ckBGNssvUoDfdW2I/YQ+smOCIDPDh2hKj,s=Ii6Xd682iG82VgrQU3BDSQ==,i=4096"}
2026/02/25 16:12:47 PG Send: {"Type":"SASLResponse","Data":"c=biws,r=WZELy7Of80JKVe6ckBGNssvUoDfdW2I/YQ+smOCIDPDh2hKj,p=UU/jXiXhwrknf+fQZEweBsAQuO4KHvYtTNKzlt61MiU="}
2026/02/25 16:12:47 PG Recv: {"Type":"AuthenticationSASLFinal","Data":"v=szyWWcRo1QJWUYd8e2HQAiuRTpSN+gjhUtraRx7R+ZY="}
2026/02/25 16:12:47 PG Recv: {"Type":"AuthenticationOK"}
2026/02/25 16:12:47 PG Recv: {"Type":"ParameterStatus","Name":"in_hot_standby","Value":"off"}
2026/02/25 16:12:47 PG Recv: {"Type":"ParameterStatus","Name":"integer_datetimes","Value":"on"}
2026/02/25 16:12:47 PG Recv: {"Type":"ParameterStatus","Name":"TimeZone","Value":"UTC"}
2026/02/25 16:12:47 PG Recv: {"Type":"ParameterStatus","Name":"IntervalStyle","Value":"postgres"}
2026/02/25 16:12:47 PG Recv: {"Type":"ParameterStatus","Name":"is_superuser","Value":"off"}
2026/02/25 16:12:47 PG Recv: {"Type":"ParameterStatus","Name":"application_name","Value":""}
2026/02/25 16:12:47 PG Recv: {"Type":"ParameterStatus","Name":"default_transaction_read_only","Value":"off"}
2026/02/25 16:12:47 PG Recv: {"Type":"ParameterStatus","Name":"scram_iterations","Value":"4096"}
2026/02/25 16:12:47 PG Recv: {"Type":"ParameterStatus","Name":"DateStyle","Value":"ISO, MDY"}
2026/02/25 16:12:47 PG Recv: {"Type":"ParameterStatus","Name":"standard_conforming_strings","Value":"on"}
2026/02/25 16:12:47 PG Recv: {"Type":"ParameterStatus","Name":"session_authorization","Value":"postgres"}
2026/02/25 16:12:47 PG Recv: {"Type":"ParameterStatus","Name":"client_encoding","Value":"UTF8"}
2026/02/25 16:12:47 PG Recv: {"Type":"ParameterStatus","Name":"server_version","Value":"17.6"}
2026/02/25 16:12:47 PG Recv: {"Type":"ParameterStatus","Name":"server_encoding","Value":"UTF8"}
2026/02/25 16:12:47 PG Recv: {"Type":"BackendKeyData","ProcessID":213,"SecretKey":200687642}
2026/02/25 16:12:47 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Initialising schema...
+ ulimit -n
+ '[' '!' -z '' ']'
+ export ERL_CRASH_DUMP=/tmp/erl_crash.dump
+ ERL_CRASH_DUMP=/tmp/erl_crash.dump
+ '[' false = true ']'
+ [[ -n '' ]]
+ echo 'Running migrations'
+ sudo -E -u nobody /app/bin/migrate
+ '[' true = true ']'
+ echo 'Seeding selfhosted Realtime'
+ sudo -E -u nobody /app/bin/realtime eval 'Realtime.Release.seeds(Realtime.Repo)'
[os_mon] cpu supervisor port (cpu_sup): Erlang has closed
[os_mon] memory supervisor port (memsup): Erlang has closed
+ echo 'Starting Realtime'
+ ulimit -n
+ exec /app/bin/realtime eval '{:ok, _} = Application.ensure_all_started(:realtime)
{:ok, _} = Realtime.Tenants.health_check("realtime-dev")'
[os_mon] memory supervisor port (memsup): Erlang has closed
[os_mon] cpu supervisor port (cpu_sup): Erlang has closed
Seeding globals from roles.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"CREATE DATABASE contrib_regression TEMPLATE postgres"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE DATABASE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"SET lock_timeout = '4s'","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE SCHEMA IF NOT EXISTS supabase_migrations","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TABLE IF NOT EXISTS supabase_migrations.schema_migrations (version text NOT NULL PRIMARY KEY)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE supabase_migrations.schema_migrations ADD COLUMN IF NOT EXISTS statements text[]","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE supabase_migrations.schema_migrations ADD COLUMN IF NOT EXISTS name text","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"SET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE SCHEMA"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260201000000_initial_schema.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Initial Schema for Bravita\r\n-- Created: 2026-02-01\r\n\r\n-- Enable necessary extensions\r\nCREATE EXTENSION IF NOT EXISTS \"uuid-ossp\"","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 1. Profiles Table\r\nCREATE TABLE IF NOT EXISTS public.profiles (\r\n    id uuid REFERENCES auth.users(id) PRIMARY KEY,\r\n    email character varying(255) UNIQUE NOT NULL,\r\n    full_name character varying(255),\r\n    phone character varying(20),\r\n    user_type character varying(50) DEFAULT 'individual'::character varying,\r\n    profile_complete boolean DEFAULT false,\r\n    created_at timestamp with time zone DEFAULT now(),\r\n    updated_at timestamp with time zone DEFAULT now()\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Addresses Table\r\nCREATE TABLE IF NOT EXISTS public.addresses (\r\n    id uuid DEFAULT gen_random_uuid() PRIMARY KEY,\r\n    user_id uuid REFERENCES public.profiles(id) ON DELETE CASCADE NOT NULL,\r\n    street character varying NOT NULL,\r\n    city character varying NOT NULL,\r\n    postal_code character varying NOT NULL,\r\n    is_default boolean DEFAULT false,\r\n    created_at timestamp with time zone DEFAULT now()\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. Products Table\r\nCREATE TABLE IF NOT EXISTS public.products (\r\n    id uuid DEFAULT gen_random_uuid() PRIMARY KEY,\r\n    name text NOT NULL,\r\n    slug text UNIQUE NOT NULL,\r\n    description text,\r\n    price numeric NOT NULL,\r\n    image_url text,\r\n    stock integer DEFAULT 0,\r\n    is_active boolean DEFAULT true,\r\n    created_at timestamp with time zone DEFAULT now(),\r\n    updated_at timestamp with time zone DEFAULT now()\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 4. Orders Table\r\nCREATE TABLE IF NOT EXISTS public.orders (\r\n    id uuid DEFAULT gen_random_uuid() PRIMARY KEY,\r\n    user_id uuid REFERENCES public.profiles(id) NOT NULL,\r\n    shipping_address_id uuid REFERENCES public.addresses(id),\r\n    status character varying(50) DEFAULT 'pending'::character varying,\r\n    payment_method character varying(50) DEFAULT 'credit_card'::character varying,\r\n    payment_status character varying(50) DEFAULT 'pending'::character varying,\r\n    currency text DEFAULT 'TL'::text,\r\n    order_details jsonb,\r\n    created_at timestamp with time zone DEFAULT now(),\r\n    updated_at timestamp with time zone DEFAULT now()\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 5. Order Status History Table\r\nCREATE TABLE IF NOT EXISTS public.order_status_history (\r\n    id uuid DEFAULT gen_random_uuid() PRIMARY KEY,\r\n    order_id uuid REFERENCES public.orders(id) ON DELETE CASCADE,\r\n    status character varying NOT NULL,\r\n    note text,\r\n    created_by uuid REFERENCES auth.users(id),\r\n    created_at timestamp with time zone DEFAULT now()\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42710","Message":"extension \"uuid-ossp\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"extension.c","Line":1791,"Routine":"CreateExtension","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Enable RLS on core tables\r\nALTER TABLE public.profiles ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
NOTICE (42710): extension "uuid-ossp" already exists, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.addresses ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.products ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.orders ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.order_status_history ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260201000000"},{"text":"initial_schema"},{"binary":"0000000100000000000000190000000b00000001000000832d2d20496e697469616c20536368656d6120666f7220427261766974610d0a2d2d20437265617465643a20323032362d30322d30310d0a0d0a2d2d20456e61626c65206e656365737361727920657874656e73696f6e730d0a43524541544520455854454e53494f4e204946204e4f54204558495354532022757569642d6f73737022000001df2d2d20312e2050726f66696c6573205461626c650d0a435245415445205441424c45204946204e4f5420455849535453207075626c69632e70726f66696c657320280d0a2020202069642075756964205245464552454e43455320617574682e757365727328696429205052494d415259204b45592c0d0a20202020656d61696c206368617261637465722076617279696e67283235352920554e49515545204e4f54204e554c4c2c0d0a2020202066756c6c5f6e616d65206368617261637465722076617279696e6728323535292c0d0a2020202070686f6e65206368617261637465722076617279696e67283230292c0d0a20202020757365725f74797065206368617261637465722076617279696e67283530292044454641554c542027696e646976696475616c273a3a6368617261637465722076617279696e672c0d0a2020202070726f66696c655f636f6d706c65746520626f6f6c65616e2044454641554c542066616c73652c0d0a20202020637265617465645f61742074696d657374616d7020776974682074696d65207a6f6e652044454641554c54206e6f7728292c0d0a20202020757064617465645f61742074696d657374616d7020776974682074696d65207a6f6e652044454641554c54206e6f7728290d0a29000001a12d2d20322e20416464726573736573205461626c650d0a435245415445205441424c45204946204e4f5420455849535453207075626c69632e61646472657373657320280d0a20202020696420757569642044454641554c542067656e5f72616e646f6d5f757569642829205052494d415259204b45592c0d0a20202020757365725f69642075756964205245464552454e434553207075626c69632e70726f66696c657328696429204f4e2044454c4554452043415343414445204e4f54204e554c4c2c0d0a20202020737472656574206368617261637465722076617279696e67204e4f54204e554c4c2c0d0a2020202063697479206368617261637465722076617279696e67204e4f54204e554c4c2c0d0a20202020706f7374616c5f636f6465206368617261637465722076617279696e67204e4f54204e554c4c2c0d0a2020202069735f64656661756c7420626f6f6c65616e2044454641554c542066616c73652c0d0a20202020637265617465645f61742074696d657374616d7020776974682074696d65207a6f6e652044454641554c54206e6f7728290d0a29000001ad2d2d20332e2050726f6475637473205461626c650d0a435245415445205441424c45204946204e4f5420455849535453207075626c69632e70726f647563747320280d0a20202020696420757569642044454641554c542067656e5f72616e646f6d5f757569642829205052494d415259204b45592c0d0a202020206e616d652074657874204e4f54204e554c4c2c0d0a20202020736c7567207465787420554e49515545204e4f54204e554c4c2c0d0a202020206465736372697074696f6e20746578742c0d0a202020207072696365206e756d65726963204e4f54204e554c4c2c0d0a20202020696d6167655f75726c20746578742c0d0a2020202073746f636b20696e74656765722044454641554c5420302c0d0a2020202069735f61637469766520626f6f6c65616e2044454641554c5420747275652c0d0a20202020637265617465645f61742074696d657374616d7020776974682074696d65207a6f6e652044454641554c54206e6f7728292c0d0a20202020757064617465645f61742074696d657374616d7020776974682074696d65207a6f6e652044454641554c54206e6f7728290d0a290000028b2d2d20342e204f7264657273205461626c650d0a435245415445205441424c45204946204e4f5420455849535453207075626c69632e6f726465727320280d0a20202020696420757569642044454641554c542067656e5f72616e646f6d5f757569642829205052494d415259204b45592c0d0a20202020757365725f69642075756964205245464552454e434553207075626c69632e70726f66696c657328696429204e4f54204e554c4c2c0d0a202020207368697070696e675f616464726573735f69642075756964205245464552454e434553207075626c69632e616464726573736573286964292c0d0a20202020737461747573206368617261637465722076617279696e67283530292044454641554c54202770656e64696e67273a3a6368617261637465722076617279696e672c0d0a202020207061796d656e745f6d6574686f64206368617261637465722076617279696e67283530292044454641554c5420276372656469745f63617264273a3a6368617261637465722076617279696e672c0d0a202020207061796d656e745f737461747573206368617261637465722076617279696e67283530292044454641554c54202770656e64696e67273a3a6368617261637465722076617279696e672c0d0a2020202063757272656e637920746578742044454641554c542027544c273a3a746578742c0d0a202020206f726465725f64657461696c73206a736f6e622c0d0a20202020637265617465645f61742074696d657374616d7020776974682074696d65207a6f6e652044454641554c54206e6f7728292c0d0a20202020757064617465645f61742074696d657374616d7020776974682074696d65207a6f6e652044454641554c54206e6f7728290d0a29000001732d2d20352e204f726465722053746174757320486973746f7279205461626c650d0a435245415445205441424c45204946204e4f5420455849535453207075626c69632e6f726465725f7374617475735f686973746f727920280d0a20202020696420757569642044454641554c542067656e5f72616e646f6d5f757569642829205052494d415259204b45592c0d0a202020206f726465725f69642075756964205245464552454e434553207075626c69632e6f726465727328696429204f4e2044454c45544520434153434144452c0d0a20202020737461747573206368617261637465722076617279696e67204e4f54204e554c4c2c0d0a202020206e6f746520746578742c0d0a20202020637265617465645f62792075756964205245464552454e43455320617574682e7573657273286964292c0d0a20202020637265617465645f61742074696d657374616d7020776974682074696d65207a6f6e652044454641554c54206e6f7728290d0a29000000532d2d20456e61626c6520524c53206f6e20636f7265207461626c65730d0a414c544552205441424c45207075626c69632e70726f66696c657320454e41424c4520524f57204c4556454c20534543555249545900000036414c544552205441424c45207075626c69632e61646472657373657320454e41424c4520524f57204c4556454c20534543555249545900000035414c544552205441424c45207075626c69632e70726f647563747320454e41424c4520524f57204c4556454c20534543555249545900000033414c544552205441424c45207075626c69632e6f726465727320454e41424c4520524f57204c4556454c20534543555249545900000041414c544552205441424c45207075626c69632e6f726465725f7374617475735f686973746f727920454e41424c4520524f57204c4556454c205345435552495459"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE EXTENSION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260203075529_add_address_type_column.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Add address_type column to addresses table\nALTER TABLE public.addresses \nADD COLUMN address_type VARCHAR(20) NOT NULL DEFAULT 'home' \nCHECK (address_type IN ('home', 'work'))","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260203075529"},{"text":"add_address_type_column"},{"binary":"0000000100000000000000190000000100000001000000b12d2d2041646420616464726573735f7479706520636f6c756d6e20746f20616464726573736573207461626c650a414c544552205441424c45207075626c69632e616464726573736573200a41444420434f4c554d4e20616464726573735f74797065205641524348415228323029204e4f54204e554c4c2044454641554c542027686f6d6527200a434845434b2028616464726573735f7479706520494e202827686f6d65272c2027776f726b272929"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260203105814_add_is_admin_to_profiles.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Add is_admin column to profiles table\nALTER TABLE public.profiles \nADD COLUMN IF NOT EXISTS is_admin BOOLEAN NOT NULL DEFAULT false","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Admin policy: Admins can view all orders\nDROP POLICY IF EXISTS \"Admins can view all orders\" ON public.orders","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins can view all orders\" ON public.orders\nFOR SELECT USING (\n  user_id = auth.uid() OR\n  EXISTS (\n    SELECT 1 FROM public.profiles \n    WHERE profiles.id = auth.uid() AND profiles.is_admin = true\n  )\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Admin policy: Admins can update orders\nDROP POLICY IF EXISTS \"Admins can update orders\" ON public.orders","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins can update orders\" ON public.orders\nFOR UPDATE USING (\n  EXISTS (\n    SELECT 1 FROM public.profiles \n    WHERE profiles.id = auth.uid() AND profiles.is_admin = true\n  )\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Admin policy: Admins can insert order status history\nDROP POLICY IF EXISTS \"Admins can insert status history\" ON public.order_status_history","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can view all orders\" for relation \"public.orders\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins can insert status history\" ON public.order_status_history\nFOR INSERT WITH CHECK (\n  EXISTS (\n    SELECT 1 FROM public.profiles \n    WHERE profiles.id = auth.uid() AND profiles.is_admin = true\n  )\n)","ParameterOIDs":null}
NOTICE (00000): policy "Admins can view all orders" for relation "public.orders" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Admin policy: Anyone can read status history for their orders\nDROP POLICY IF EXISTS \"Users can view order status history\" ON public.order_status_history","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can update orders\" for relation \"public.orders\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
NOTICE (00000): policy "Admins can update orders" for relation "public.orders" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users can view order status history\" ON public.order_status_history\nFOR SELECT USING (\n  EXISTS (\n    SELECT 1 FROM public.orders \n    WHERE orders.id = order_status_history.order_id \n    AND (orders.user_id = auth.uid() OR EXISTS (\n      SELECT 1 FROM public.profiles WHERE profiles.id = auth.uid() AND profiles.is_admin = true\n    ))\n  )\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can insert status history\" for relation \"public.order_status_history\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
NOTICE (00000): policy "Admins can insert status history" for relation "public.order_status_history" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260203105814"},{"text":"add_is_admin_to_profiles"},{"binary":"0000000100000000000000190000000900000001000000862d2d204164642069735f61646d696e20636f6c756d6e20746f2070726f66696c6573207461626c650a414c544552205441424c45207075626c69632e70726f66696c6573200a41444420434f4c554d4e204946204e4f54204558495354532069735f61646d696e20424f4f4c45414e204e4f54204e554c4c2044454641554c542066616c73650000006f2d2d2041646d696e20706f6c6963793a2041646d696e732063616e207669657720616c6c206f72646572730a44524f5020504f4c49435920494620455849535453202241646d696e732063616e207669657720616c6c206f726465727322204f4e207075626c69632e6f7264657273000000dc43524541544520504f4c494359202241646d696e732063616e207669657720616c6c206f726465727322204f4e207075626c69632e6f72646572730a464f522053454c454354205553494e4720280a2020757365725f6964203d20617574682e7569642829204f520a202045584953545320280a2020202053454c45435420312046524f4d207075626c69632e70726f66696c6573200a2020202057484552452070726f66696c65732e6964203d20617574682e756964282920414e442070726f66696c65732e69735f61646d696e203d20747275650a2020290a290000006b2d2d2041646d696e20706f6c6963793a2041646d696e732063616e20757064617465206f72646572730a44524f5020504f4c49435920494620455849535453202241646d696e732063616e20757064617465206f726465727322204f4e207075626c69632e6f7264657273000000c043524541544520504f4c494359202241646d696e732063616e20757064617465206f726465727322204f4e207075626c69632e6f72646572730a464f5220555044415445205553494e4720280a202045584953545320280a2020202053454c45435420312046524f4d207075626c69632e70726f66696c6573200a2020202057484552452070726f66696c65732e6964203d20617574682e756964282920414e442070726f66696c65732e69735f61646d696e203d20747275650a2020290a290000008f2d2d2041646d696e20706f6c6963793a2041646d696e732063616e20696e73657274206f726465722073746174757320686973746f72790a44524f5020504f4c49435920494620455849535453202241646d696e732063616e20696e736572742073746174757320686973746f727922204f4e207075626c69632e6f726465725f7374617475735f686973746f7279000000db43524541544520504f4c494359202241646d696e732063616e20696e736572742073746174757320686973746f727922204f4e207075626c69632e6f726465725f7374617475735f686973746f72790a464f5220494e53455254205749544820434845434b20280a202045584953545320280a2020202053454c45435420312046524f4d207075626c69632e70726f66696c6573200a2020202057484552452070726f66696c65732e6964203d20617574682e756964282920414e442070726f66696c65732e69735f61646d696e203d20747275650a2020290a290000009b2d2d2041646d696e20706f6c6963793a20416e796f6e652063616e20726561642073746174757320686973746f727920666f72207468656972206f72646572730a44524f5020504f4c49435920494620455849535453202255736572732063616e2076696577206f726465722073746174757320686973746f727922204f4e207075626c69632e6f726465725f7374617475735f686973746f72790000016443524541544520504f4c494359202255736572732063616e2076696577206f726465722073746174757320686973746f727922204f4e207075626c69632e6f726465725f7374617475735f686973746f72790a464f522053454c454354205553494e4720280a202045584953545320280a2020202053454c45435420312046524f4d207075626c69632e6f7264657273200a202020205748455245206f72646572732e6964203d206f726465725f7374617475735f686973746f72792e6f726465725f6964200a20202020414e4420286f72646572732e757365725f6964203d20617574682e7569642829204f522045584953545320280a20202020202053454c45435420312046524f4d207075626c69632e70726f66696c65732057484552452070726f66696c65732e6964203d20617574682e756964282920414e442070726f66696c65732e69735f61646d696e203d20747275650a2020202029290a2020290a29"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users can view order status history\" for relation \"public.order_status_history\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Users can view order status history" for relation "public.order_status_history" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260203114546_fix_shipping_address_cascade.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Fix shipping_address_id to SET NULL when address is deleted\n-- (address will be deleted due to CASCADE from profiles)\n\n-- First drop the existing constraint\nALTER TABLE public.orders \nDROP CONSTRAINT IF EXISTS orders_shipping_address_id_fkey","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Re-add with SET NULL (so order is preserved even if address is deleted)\nALTER TABLE public.orders \nADD CONSTRAINT orders_shipping_address_id_fkey \nFOREIGN KEY (shipping_address_id) \nREFERENCES public.addresses(id) \nON DELETE SET NULL","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260203114546"},{"text":"fix_shipping_address_cascade"},{"binary":"0000000100000000000000190000000200000001000000f42d2d20466978207368697070696e675f616464726573735f696420746f20534554204e554c4c207768656e20616464726573732069732064656c657465640a2d2d2028616464726573732077696c6c2062652064656c657465642064756520746f20434153434144452066726f6d2070726f66696c6573290a0a2d2d2046697273742064726f7020746865206578697374696e6720636f6e73747261696e740a414c544552205441424c45207075626c69632e6f7264657273200a44524f5020434f4e53545241494e5420494620455849535453206f72646572735f7368697070696e675f616464726573735f69645f666b6579000000ec2d2d2052652d616464207769746820534554204e554c4c2028736f206f7264657220697320707265736572766564206576656e20696620616464726573732069732064656c65746564290a414c544552205441424c45207075626c69632e6f7264657273200a41444420434f4e53545241494e54206f72646572735f7368697070696e675f616464726573735f69645f666b6579200a464f524549474e204b455920287368697070696e675f616464726573735f696429200a5245464552454e434553207075626c69632e61646472657373657328696429200a4f4e2044454c45544520534554204e554c4c"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260204080352_001_inventory_triggers.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Function to deduct stock based on order items\nCREATE OR REPLACE FUNCTION deduct_stock_on_order()\nRETURNS TRIGGER AS $$\nDECLARE\n    item jsonb;\n    product_id uuid;\n    quantity int;\n    current_stock int;\n    product_name text;\nBEGIN\n    -- Loop through items in the order_details-\u003e'items' array\n    FOR item IN SELECT * FROM jsonb_array_elements(NEW.order_details-\u003e'items')\n    LOOP\n        product_id := (item-\u003e\u003e'product_id')::uuid;\n        quantity := (item-\u003e\u003e'quantity')::int;\n\n        -- Get current stock and name for locking and checking\n        SELECT stock, name INTO current_stock, product_name \n        FROM products \n        WHERE id = product_id\n        FOR UPDATE; -- Lock the row to prevent race conditions\n\n        IF current_stock \u003c quantity THEN\n            RAISE EXCEPTION 'Insufficient stock for product: % (Available: %, Requested: %)', product_name, current_stock, quantity;\n        END IF;\n\n        -- Deduct stock\n        UPDATE products\n        SET stock = stock - quantity\n        WHERE id = product_id;\n    END LOOP;\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Drop trigger if exists to ensure clean slate\nDROP TRIGGER IF EXISTS trigger_deduct_stock ON orders","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Create Trigger\nCREATE TRIGGER trigger_deduct_stock\nAFTER INSERT ON orders\nFOR EACH ROW\nEXECUTE FUNCTION deduct_stock_on_order()","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Secure Dashboard Stats RPC\nCREATE OR REPLACE FUNCTION get_dashboard_stats(start_date timestamptz, end_date timestamptz)\nRETURNS json\nLANGUAGE plpgsql\nSECURITY DEFINER\nAS $$\nDECLARE\n    total_revenue numeric;\n    order_count int;\n    daily_sales json;\n    is_admin_user boolean;\nBEGIN\n    -- Check if user is admin\n    SELECT is_admin INTO is_admin_user FROM profiles WHERE id = auth.uid();\n    \n    IF is_admin_user IS NOT TRUE THEN\n        RAISE EXCEPTION 'Unauthorized access';\n    END IF;\n\n    -- Calculate aggregate stats\n    SELECT \n        COALESCE(SUM((order_details-\u003e\u003e'total')::numeric), 0),\n        COUNT(*)\n    INTO total_revenue, order_count\n    FROM orders\n    WHERE created_at \u003e= start_date AND created_at \u003c= end_date\n    AND status != 'cancelled';\n\n    -- Calculate daily sales breakdown\n    SELECT json_agg(t) INTO daily_sales\n    FROM (\n        SELECT \n            date_trunc('day', created_at) as date,\n            COUNT(*) as count,\n            SUM((order_details-\u003e\u003e'total')::numeric) as revenue\n        FROM orders\n        WHERE created_at \u003e= start_date AND created_at \u003c= end_date\n        AND status != 'cancelled'\n        GROUP BY 1\n        ORDER BY 1\n    ) t;\n\n    RETURN json_build_object(\n        'total_revenue', total_revenue,\n        'order_count', order_count,\n        'daily_sales', COALESCE(daily_sales, '[]'::json)\n    );\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260204080352"},{"text":"001_inventory_triggers"},{"binary":"0000000100000000000000190000000400000001000004502d2d2046756e6374696f6e20746f206465647563742073746f636b206261736564206f6e206f72646572206974656d730a435245415445204f52205245504c4143452046554e4354494f4e206465647563745f73746f636b5f6f6e5f6f7264657228290a52455455524e5320545249474745522041532024240a4445434c4152450a202020206974656d206a736f6e623b0a2020202070726f647563745f696420757569643b0a202020207175616e7469747920696e743b0a2020202063757272656e745f73746f636b20696e743b0a2020202070726f647563745f6e616d6520746578743b0a424547494e0a202020202d2d204c6f6f70207468726f756768206974656d7320696e20746865206f726465725f64657461696c732d3e276974656d73272061727261790a20202020464f52206974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e7473284e45572e6f726465725f64657461696c732d3e276974656d7327290a202020204c4f4f500a202020202020202070726f647563745f6964203a3d20286974656d2d3e3e2770726f647563745f696427293a3a757569643b0a20202020202020207175616e74697479203a3d20286974656d2d3e3e277175616e7469747927293a3a696e743b0a0a20202020202020202d2d204765742063757272656e742073746f636b20616e64206e616d6520666f72206c6f636b696e6720616e6420636865636b696e670a202020202020202053454c4543542073746f636b2c206e616d6520494e544f2063757272656e745f73746f636b2c2070726f647563745f6e616d65200a202020202020202046524f4d2070726f6475637473200a20202020202020205748455245206964203d2070726f647563745f69640a2020202020202020464f52205550444154453b202d2d204c6f636b2074686520726f7720746f2070726576656e74207261636520636f6e646974696f6e730a0a202020202020202049462063757272656e745f73746f636b203c207175616e74697479205448454e0a202020202020202020202020524149534520455843455054494f4e2027496e73756666696369656e742073746f636b20666f722070726f647563743a20252028417661696c61626c653a20252c205265717565737465643a202529272c2070726f647563745f6e616d652c2063757272656e745f73746f636b2c207175616e746974793b0a2020202020202020454e442049463b0a0a20202020202020202d2d204465647563742073746f636b0a20202020202020205550444154452070726f64756374730a20202020202020205345542073746f636b203d2073746f636b202d207175616e746974790a20202020202020205748455245206964203d2070726f647563745f69643b0a20202020454e44204c4f4f503b0a2020202052455455524e204e45573b0a454e443b0a2424204c414e475541474520706c706773716c20534543555249545920444546494e4552000000652d2d2044726f7020747269676765722069662065786973747320746f20656e7375726520636c65616e20736c6174650a44524f5020545249474745522049462045584953545320747269676765725f6465647563745f73746f636b204f4e206f7264657273000000822d2d2043726561746520547269676765720a435245415445205452494747455220747269676765725f6465647563745f73746f636b0a414654455220494e53455254204f4e206f72646572730a464f52204541434820524f570a455845435554452046554e4354494f4e206465647563745f73746f636b5f6f6e5f6f726465722829000005522d2d205365637572652044617368626f617264205374617473205250430a435245415445204f52205245504c4143452046554e4354494f4e206765745f64617368626f6172645f73746174732873746172745f646174652074696d657374616d70747a2c20656e645f646174652074696d657374616d70747a290a52455455524e53206a736f6e0a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a41532024240a4445434c4152450a20202020746f74616c5f726576656e7565206e756d657269633b0a202020206f726465725f636f756e7420696e743b0a202020206461696c795f73616c6573206a736f6e3b0a2020202069735f61646d696e5f7573657220626f6f6c65616e3b0a424547494e0a202020202d2d20436865636b20696620757365722069732061646d696e0a2020202053454c4543542069735f61646d696e20494e544f2069735f61646d696e5f757365722046524f4d2070726f66696c6573205748455245206964203d20617574682e75696428293b0a202020200a2020202049462069735f61646d696e5f75736572204953204e4f542054525545205448454e0a2020202020202020524149534520455843455054494f4e2027556e617574686f72697a656420616363657373273b0a20202020454e442049463b0a0a202020202d2d2043616c63756c617465206167677265676174652073746174730a2020202053454c454354200a2020202020202020434f414c455343452853554d28286f726465725f64657461696c732d3e3e27746f74616c27293a3a6e756d65726963292c2030292c0a2020202020202020434f554e54282a290a20202020494e544f20746f74616c5f726576656e75652c206f726465725f636f756e740a2020202046524f4d206f72646572730a20202020574845524520637265617465645f6174203e3d2073746172745f6461746520414e4420637265617465645f6174203c3d20656e645f646174650a20202020414e442073746174757320213d202763616e63656c6c6564273b0a0a202020202d2d2043616c63756c617465206461696c792073616c657320627265616b646f776e0a2020202053454c454354206a736f6e5f61676728742920494e544f206461696c795f73616c65730a2020202046524f4d20280a202020202020202053454c454354200a202020202020202020202020646174655f7472756e632827646179272c20637265617465645f61742920617320646174652c0a202020202020202020202020434f554e54282a2920617320636f756e742c0a20202020202020202020202053554d28286f726465725f64657461696c732d3e3e27746f74616c27293a3a6e756d657269632920617320726576656e75650a202020202020202046524f4d206f72646572730a2020202020202020574845524520637265617465645f6174203e3d2073746172745f6461746520414e4420637265617465645f6174203c3d20656e645f646174650a2020202020202020414e442073746174757320213d202763616e63656c6c6564270a202020202020202047524f555020425920310a20202020202020204f5244455220425920310a202020202920743b0a0a2020202052455455524e206a736f6e5f6275696c645f6f626a656374280a202020202020202027746f74616c5f726576656e7565272c20746f74616c5f726576656e75652c0a2020202020202020276f726465725f636f756e74272c206f726465725f636f756e742c0a2020202020202020276461696c795f73616c6573272c20434f414c45534345286461696c795f73616c65732c20275b5d273a3a6a736f6e290a20202020293b0a454e443b0a2424"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"trigger \"trigger_deduct_stock\" for relation \"orders\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): trigger "trigger_deduct_stock" for relation "orders" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260204080354_002_products_rls.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Enable RLS on products table if not already\nALTER TABLE products ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Drop existing policies to avoid conflicts\nDROP POLICY IF EXISTS \"Allow public read access\" ON products","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Allow admin update access\" ON products","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Allow admin insert access\" ON products","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Enable read access for all users\" ON products","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Enable insert for authenticated users only\" ON products","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Enable update for users based on email\" ON products","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Create Read Policy (Public)\nCREATE POLICY \"Allow public read access\"\nON products FOR SELECT\nTO public\nUSING (true)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Create Update Policy (Admin Only)\nCREATE POLICY \"Allow admin update access\"\nON products FOR UPDATE\nTO authenticated\nUSING (\n    (SELECT is_admin FROM profiles WHERE id = auth.uid()) = true\n)\nWITH CHECK (\n    (SELECT is_admin FROM profiles WHERE id = auth.uid()) = true\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Allow public read access\" for relation \"products\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
NOTICE (00000): policy "Allow public read access" for relation "products" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Allow admin update access\" for relation \"products\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Allow admin insert access\" for relation \"products\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Enable read access for all users\" for relation \"products\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
NOTICE (00000): policy "Allow admin update access" for relation "products" does not exist, skipping
NOTICE (00000): policy "Allow admin insert access" for relation "products" does not exist, skipping
NOTICE (00000): policy "Enable read access for all users" for relation "products" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Create Insert Policy (Admin Only)\nCREATE POLICY \"Allow admin insert access\"\nON products FOR INSERT\nTO authenticated\nWITH CHECK (\n    (SELECT is_admin FROM profiles WHERE id = auth.uid()) = true\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Enable insert for authenticated users only\" for relation \"products\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
NOTICE (00000): policy "Enable insert for authenticated users only" for relation "products" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Enable update for users based on email\" for relation \"products\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Enable update for users based on email" for relation "products" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260204080354"},{"text":"002_products_rls"},{"binary":"0000000100000000000000190000000a000000010000005d2d2d20456e61626c6520524c53206f6e2070726f6475637473207461626c65206966206e6f7420616c72656164790a414c544552205441424c452070726f647563747320454e41424c4520524f57204c4556454c205345435552495459000000692d2d2044726f70206578697374696e6720706f6c696369657320746f2061766f696420636f6e666c696374730a44524f5020504f4c494359204946204558495354532022416c6c6f77207075626c696320726561642061636365737322204f4e2070726f64756374730000003d44524f5020504f4c494359204946204558495354532022416c6c6f772061646d696e207570646174652061636365737322204f4e2070726f64756374730000003d44524f5020504f4c494359204946204558495354532022416c6c6f772061646d696e20696e736572742061636365737322204f4e2070726f64756374730000004444524f5020504f4c494359204946204558495354532022456e61626c6520726561642061636365737320666f7220616c6c20757365727322204f4e2070726f64756374730000004e44524f5020504f4c494359204946204558495354532022456e61626c6520696e7365727420666f722061757468656e74696361746564207573657273206f6e6c7922204f4e2070726f64756374730000004a44524f5020504f4c494359204946204558495354532022456e61626c652075706461746520666f72207573657273206261736564206f6e20656d61696c22204f4e2070726f6475637473000000752d2d20437265617465205265616420506f6c69637920285075626c6963290a43524541544520504f4c4943592022416c6c6f77207075626c6963207265616420616363657373220a4f4e2070726f647563747320464f522053454c4543540a544f207075626c69630a5553494e4720287472756529000001112d2d204372656174652055706461746520506f6c696379202841646d696e204f6e6c79290a43524541544520504f4c4943592022416c6c6f772061646d696e2075706461746520616363657373220a4f4e2070726f647563747320464f52205550444154450a544f2061757468656e746963617465640a5553494e4720280a202020202853454c4543542069735f61646d696e2046524f4d2070726f66696c6573205748455245206964203d20617574682e756964282929203d20747275650a290a5749544820434845434b20280a202020202853454c4543542069735f61646d696e2046524f4d2070726f66696c6573205748455245206964203d20617574682e756964282929203d20747275650a29000000c62d2d2043726561746520496e7365727420506f6c696379202841646d696e204f6e6c79290a43524541544520504f4c4943592022416c6c6f772061646d696e20696e7365727420616363657373220a4f4e2070726f647563747320464f5220494e534552540a544f2061757468656e746963617465640a5749544820434845434b20280a202020202853454c4543542069735f61646d696e2046524f4d2070726f66696c6573205748455245206964203d20617574682e756964282929203d20747275650a29"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260204081957_003_advanced_inventory.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 1. Add reserved_stock column\nALTER TABLE products \nADD COLUMN IF NOT EXISTS reserved_stock INTEGER DEFAULT 0","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Update the Insert Trigger (New Order -\u003e Reserve Stock)\nCREATE OR REPLACE FUNCTION deduct_stock_on_order()\nRETURNS TRIGGER AS $$\nDECLARE\n    item jsonb;\n    product_id uuid;\n    quantity int;\n    current_stock int;\n    product_name text;\nBEGIN\n    FOR item IN SELECT * FROM jsonb_array_elements(NEW.order_details-\u003e'items')\n    LOOP\n        product_id := (item-\u003e\u003e'product_id')::uuid;\n        quantity := (item-\u003e\u003e'quantity')::int;\n\n        SELECT stock, name INTO current_stock, product_name \n        FROM products \n        WHERE id = product_id\n        FOR UPDATE;\n\n        IF current_stock \u003c quantity THEN\n            RAISE EXCEPTION 'Insufficient stock for product: % (Available: %, Requested: %)', product_name, current_stock, quantity;\n        END IF;\n\n        -- Decrease Available, Increase Reserved\n        UPDATE products\n        SET \n            stock = stock - quantity,\n            reserved_stock = reserved_stock + quantity\n        WHERE id = product_id;\n    END LOOP;\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. Create Status Change Trigger (Delivery/Cancel logic)\nCREATE OR REPLACE FUNCTION manage_stock_on_status_change()\nRETURNS TRIGGER AS $$\nDECLARE\n    item jsonb;\n    product_id uuid;\n    quantity int;\nBEGIN\n    -- Only run if status changed\n    IF OLD.status = NEW.status THEN\n        RETURN NEW;\n    END IF;\n\n    -- CASE: Delivered (Item leaves warehouse)\n    IF NEW.status = 'delivered' AND OLD.status != 'delivered' THEN\n        FOR item IN SELECT * FROM jsonb_array_elements(NEW.order_details-\u003e'items')\n        LOOP\n            product_id := (item-\u003e\u003e'product_id')::uuid;\n            quantity := (item-\u003e\u003e'quantity')::int;\n\n            -- Decrease Reserved (Physical deduction happened)\n            UPDATE products\n            SET reserved_stock = reserved_stock - quantity\n            WHERE id = product_id;\n        END LOOP;\n    END IF;\n\n    -- CASE: Cancelled (Item returns to stock)\n    IF NEW.status = 'cancelled' AND OLD.status != 'cancelled' THEN\n        FOR item IN SELECT * FROM jsonb_array_elements(NEW.order_details-\u003e'items')\n        LOOP\n            product_id := (item-\u003e\u003e'product_id')::uuid;\n            quantity := (item-\u003e\u003e'quantity')::int;\n\n            -- Increase Available, Decrease Reserved\n            -- Note: If it was already delivered, we might need different logic (Return). \n            -- But usually Cancel happens before Delivery. \n            -- If Cancelled AFTER Delivery (Return), we should probably Increase Stock but NOT decrease reserved (since reserved was already 0).\n            -- Validating via OLD status:\n            \n            IF OLD.status = 'delivered' THEN\n                -- Return from customer\n                UPDATE products SET stock = stock + quantity WHERE id = product_id;\n            ELSE\n                -- Cancelled before delivery (was reserved)\n                UPDATE products \n                SET \n                    stock = stock + quantity,\n                    reserved_stock = reserved_stock - quantity\n                WHERE id = product_id;\n            END IF;\n        END LOOP;\n    END IF;\n\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Create Trigger for Status Change\nDROP TRIGGER IF EXISTS trigger_manage_stock_status ON orders","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TRIGGER trigger_manage_stock_status\nAFTER UPDATE OF status ON orders\nFOR EACH ROW\nEXECUTE FUNCTION manage_stock_on_status_change()","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260204081957"},{"text":"003_advanced_inventory"},{"binary":"00000001000000000000001900000005000000010000006f2d2d20312e204164642072657365727665645f73746f636b20636f6c756d6e0a414c544552205441424c452070726f6475637473200a41444420434f4c554d4e204946204e4f54204558495354532072657365727665645f73746f636b20494e54454745522044454641554c542030000004122d2d20322e205570646174652074686520496e73657274205472696767657220284e6577204f72646572202d3e20526573657276652053746f636b290a435245415445204f52205245504c4143452046554e4354494f4e206465647563745f73746f636b5f6f6e5f6f7264657228290a52455455524e5320545249474745522041532024240a4445434c4152450a202020206974656d206a736f6e623b0a2020202070726f647563745f696420757569643b0a202020207175616e7469747920696e743b0a2020202063757272656e745f73746f636b20696e743b0a2020202070726f647563745f6e616d6520746578743b0a424547494e0a20202020464f52206974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e7473284e45572e6f726465725f64657461696c732d3e276974656d7327290a202020204c4f4f500a202020202020202070726f647563745f6964203a3d20286974656d2d3e3e2770726f647563745f696427293a3a757569643b0a20202020202020207175616e74697479203a3d20286974656d2d3e3e277175616e7469747927293a3a696e743b0a0a202020202020202053454c4543542073746f636b2c206e616d6520494e544f2063757272656e745f73746f636b2c2070726f647563745f6e616d65200a202020202020202046524f4d2070726f6475637473200a20202020202020205748455245206964203d2070726f647563745f69640a2020202020202020464f52205550444154453b0a0a202020202020202049462063757272656e745f73746f636b203c207175616e74697479205448454e0a202020202020202020202020524149534520455843455054494f4e2027496e73756666696369656e742073746f636b20666f722070726f647563743a20252028417661696c61626c653a20252c205265717565737465643a202529272c2070726f647563745f6e616d652c2063757272656e745f73746f636b2c207175616e746974793b0a2020202020202020454e442049463b0a0a20202020202020202d2d20446563726561736520417661696c61626c652c20496e6372656173652052657365727665640a20202020202020205550444154452070726f64756374730a2020202020202020534554200a20202020202020202020202073746f636b203d2073746f636b202d207175616e746974792c0a20202020202020202020202072657365727665645f73746f636b203d2072657365727665645f73746f636b202b207175616e746974790a20202020202020205748455245206964203d2070726f647563745f69643b0a20202020454e44204c4f4f503b0a2020202052455455524e204e45573b0a454e443b0a2424204c414e475541474520706c706773716c20534543555249545920444546494e4552000008482d2d20332e2043726561746520537461747573204368616e67652054726967676572202844656c69766572792f43616e63656c206c6f676963290a435245415445204f52205245504c4143452046554e4354494f4e206d616e6167655f73746f636b5f6f6e5f7374617475735f6368616e676528290a52455455524e5320545249474745522041532024240a4445434c4152450a202020206974656d206a736f6e623b0a2020202070726f647563745f696420757569643b0a202020207175616e7469747920696e743b0a424547494e0a202020202d2d204f6e6c792072756e20696620737461747573206368616e6765640a202020204946204f4c442e737461747573203d204e45572e737461747573205448454e0a202020202020202052455455524e204e45573b0a20202020454e442049463b0a0a202020202d2d20434153453a2044656c69766572656420284974656d206c65617665732077617265686f757365290a202020204946204e45572e737461747573203d202764656c6976657265642720414e44204f4c442e73746174757320213d202764656c69766572656427205448454e0a2020202020202020464f52206974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e7473284e45572e6f726465725f64657461696c732d3e276974656d7327290a20202020202020204c4f4f500a20202020202020202020202070726f647563745f6964203a3d20286974656d2d3e3e2770726f647563745f696427293a3a757569643b0a2020202020202020202020207175616e74697479203a3d20286974656d2d3e3e277175616e7469747927293a3a696e743b0a0a2020202020202020202020202d2d2044656372656173652052657365727665642028506879736963616c20646564756374696f6e2068617070656e6564290a2020202020202020202020205550444154452070726f64756374730a2020202020202020202020205345542072657365727665645f73746f636b203d2072657365727665645f73746f636b202d207175616e746974790a2020202020202020202020205748455245206964203d2070726f647563745f69643b0a2020202020202020454e44204c4f4f503b0a20202020454e442049463b0a0a202020202d2d20434153453a2043616e63656c6c656420284974656d2072657475726e7320746f2073746f636b290a202020204946204e45572e737461747573203d202763616e63656c6c65642720414e44204f4c442e73746174757320213d202763616e63656c6c656427205448454e0a2020202020202020464f52206974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e7473284e45572e6f726465725f64657461696c732d3e276974656d7327290a20202020202020204c4f4f500a20202020202020202020202070726f647563745f6964203a3d20286974656d2d3e3e2770726f647563745f696427293a3a757569643b0a2020202020202020202020207175616e74697479203a3d20286974656d2d3e3e277175616e7469747927293a3a696e743b0a0a2020202020202020202020202d2d20496e63726561736520417661696c61626c652c2044656372656173652052657365727665640a2020202020202020202020202d2d204e6f74653a2049662069742077617320616c72656164792064656c6976657265642c207765206d69676874206e65656420646966666572656e74206c6f676963202852657475726e292e200a2020202020202020202020202d2d2042757420757375616c6c792043616e63656c2068617070656e73206265666f72652044656c69766572792e200a2020202020202020202020202d2d2049662043616e63656c6c65642041465445522044656c6976657279202852657475726e292c2077652073686f756c642070726f6261626c7920496e6372656173652053746f636b20627574204e4f54206465637265617365207265736572766564202873696e63652072657365727665642077617320616c72656164792030292e0a2020202020202020202020202d2d2056616c69646174696e6720766961204f4c44207374617475733a0a2020202020202020202020200a2020202020202020202020204946204f4c442e737461747573203d202764656c69766572656427205448454e0a202020202020202020202020202020202d2d2052657475726e2066726f6d20637573746f6d65720a202020202020202020202020202020205550444154452070726f6475637473205345542073746f636b203d2073746f636b202b207175616e74697479205748455245206964203d2070726f647563745f69643b0a202020202020202020202020454c53450a202020202020202020202020202020202d2d2043616e63656c6c6564206265666f72652064656c69766572792028776173207265736572766564290a202020202020202020202020202020205550444154452070726f6475637473200a20202020202020202020202020202020534554200a202020202020202020202020202020202020202073746f636b203d2073746f636b202b207175616e746974792c0a202020202020202020202020202020202020202072657365727665645f73746f636b203d2072657365727665645f73746f636b202d207175616e746974790a202020202020202020202020202020205748455245206964203d2070726f647563745f69643b0a202020202020202020202020454e442049463b0a2020202020202020454e44204c4f4f503b0a20202020454e442049463b0a0a2020202052455455524e204e45573b0a454e443b0a2424204c414e475541474520706c706773716c20534543555249545920444546494e4552000000602d2d20437265617465205472696767657220666f7220537461747573204368616e67650a44524f5020545249474745522049462045584953545320747269676765725f6d616e6167655f73746f636b5f737461747573204f4e206f726465727300000089435245415445205452494747455220747269676765725f6d616e6167655f73746f636b5f7374617475730a414654455220555044415445204f4620737461747573204f4e206f72646572730a464f52204541434820524f570a455845435554452046554e4354494f4e206d616e6167655f73746f636b5f6f6e5f7374617475735f6368616e67652829"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"trigger \"trigger_manage_stock_status\" for relation \"orders\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): trigger "trigger_manage_stock_status" for relation "orders" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260204123026_add_product_details_schema.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE products \nADD COLUMN IF NOT EXISTS description TEXT,\nADD COLUMN IF NOT EXISTS image_url TEXT,\nADD COLUMN IF NOT EXISTS original_price DECIMAL(10,2)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260204123026"},{"text":"add_product_details_schema"},{"binary":"00000001000000000000001900000001000000010000009f414c544552205441424c452070726f6475637473200a41444420434f4c554d4e204946204e4f5420455849535453206465736372697074696f6e20544558542c0a41444420434f4c554d4e204946204e4f542045584953545320696d6167655f75726c20544558542c0a41444420434f4c554d4e204946204e4f5420455849535453206f726967696e616c5f707269636520444543494d414c2831302c3229"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"description\" of relation \"products\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"image_url\" of relation \"products\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
NOTICE (42701): column "description" of relation "products" already exists, skipping
NOTICE (42701): column "image_url" of relation "products" already exists, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260204123641_create_promo_codes_table.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TABLE IF NOT EXISTS promo_codes (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    code TEXT UNIQUE NOT NULL,\n    discount_type TEXT NOT NULL CHECK (discount_type IN ('percentage', 'fixed_amount')),\n    discount_value DECIMAL(10,2) NOT NULL,\n    min_order_amount DECIMAL(10,2) DEFAULT 0,\n    max_discount_amount DECIMAL(10,2),\n    start_date TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    end_date TIMESTAMP WITH TIME ZONE,\n    usage_limit INTEGER,\n    usage_count INTEGER DEFAULT 0,\n    is_active BOOLEAN DEFAULT TRUE,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_promo_codes_code ON promo_codes(code)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260204123641"},{"text":"create_promo_codes_table"},{"binary":"000000010000000000000019000000020000000100000280435245415445205441424c45204946204e4f54204558495354532070726f6d6f5f636f64657320280a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0a20202020636f6465205445585420554e49515545204e4f54204e554c4c2c0a20202020646973636f756e745f747970652054455854204e4f54204e554c4c20434845434b2028646973636f756e745f7479706520494e20282770657263656e74616765272c202766697865645f616d6f756e742729292c0a20202020646973636f756e745f76616c756520444543494d414c2831302c3229204e4f54204e554c4c2c0a202020206d696e5f6f726465725f616d6f756e7420444543494d414c2831302c32292044454641554c5420302c0a202020206d61785f646973636f756e745f616d6f756e7420444543494d414c2831302c32292c0a2020202073746172745f646174652054494d455354414d5020574954482054494d45205a4f4e452044454641554c54204e4f5728292c0a20202020656e645f646174652054494d455354414d5020574954482054494d45205a4f4e452c0a2020202075736167655f6c696d697420494e54454745522c0a2020202075736167655f636f756e7420494e54454745522044454641554c5420302c0a2020202069735f61637469766520424f4f4c45414e2044454641554c5420545255452c0a20202020637265617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c54204e4f5728292c0a20202020757064617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c54204e4f5728290a290000004443524541544520494e444558204946204e4f5420455849535453206964785f70726f6d6f5f636f6465735f636f6465204f4e2070726f6d6f5f636f64657328636f646529"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260206103958_add_notification_preferences.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE profiles \nADD COLUMN IF NOT EXISTS email_notifications BOOLEAN DEFAULT TRUE,\nADD COLUMN IF NOT EXISTS order_notifications BOOLEAN DEFAULT TRUE","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260206103958"},{"text":"add_notification_preferences"},{"binary":"00000001000000000000001900000001000000010000009a414c544552205441424c452070726f66696c6573200a41444420434f4c554d4e204946204e4f542045584953545320656d61696c5f6e6f74696669636174696f6e7320424f4f4c45414e2044454641554c5420545255452c0a41444420434f4c554d4e204946204e4f5420455849535453206f726465725f6e6f74696669636174696f6e7320424f4f4c45414e2044454641554c542054525545"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260206111216_create_promo_logs_table_v3.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"create table if not exists promo_logs (\n  id uuid default gen_random_uuid() primary key,\n  promo_code_id uuid references promo_codes(id) on delete cascade not null,\n  order_id uuid references orders(id) on delete cascade not null,\n  user_id uuid references auth.users(id) on delete set null,\n  created_at timestamp with time zone default timezone('utc'::text, now()) not null,\n  discount_amount numeric\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"alter table promo_logs enable row level security","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"create policy \"Admins can view promo logs\" on promo_logs\n  for select using (\n    exists (\n      select 1 from profiles\n      where id = auth.uid() and is_admin = true\n    )\n  )","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"create policy \"System can insert logs\" on promo_logs\n  for insert with check (true)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260206111216"},{"text":"create_promo_logs_table_v3"},{"binary":"000000010000000000000019000000040000000100000194637265617465207461626c65206966206e6f74206578697374732070726f6d6f5f6c6f677320280a2020696420757569642064656661756c742067656e5f72616e646f6d5f757569642829207072696d617279206b65792c0a202070726f6d6f5f636f64655f69642075756964207265666572656e6365732070726f6d6f5f636f64657328696429206f6e2064656c6574652063617363616465206e6f74206e756c6c2c0a20206f726465725f69642075756964207265666572656e636573206f726465727328696429206f6e2064656c6574652063617363616465206e6f74206e756c6c2c0a2020757365725f69642075756964207265666572656e63657320617574682e757365727328696429206f6e2064656c65746520736574206e756c6c2c0a2020637265617465645f61742074696d657374616d7020776974682074696d65207a6f6e652064656661756c742074696d657a6f6e652827757463273a3a746578742c206e6f77282929206e6f74206e756c6c2c0a2020646973636f756e745f616d6f756e74206e756d657269630a2900000030616c746572207461626c652070726f6d6f5f6c6f677320656e61626c6520726f77206c6576656c207365637572697479000000b163726561746520706f6c696379202241646d696e732063616e20766965772070726f6d6f206c6f677322206f6e2070726f6d6f5f6c6f67730a2020666f722073656c656374207573696e6720280a2020202065786973747320280a20202020202073656c65637420312066726f6d2070726f66696c65730a2020202020207768657265206964203d20617574682e756964282920616e642069735f61646d696e203d20747275650a20202020290a2020290000005363726561746520706f6c696379202253797374656d2063616e20696e73657274206c6f677322206f6e2070726f6d6f5f6c6f67730a2020666f7220696e73657274207769746820636865636b20287472756529"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260206122335_security_fixes.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Fix security issues: Mutable search path and permissive RLS\r\n\r\n-- 0. Ensure functions exist before altering (Missing in previous migrations)\r\nCREATE OR REPLACE FUNCTION public.verify_promo_code(p_code text)\r\nRETURNS jsonb\r\nLANGUAGE plpgsql\r\nAS $function$\r\nBEGIN\r\n    -- Placeholder to allow migration to pass. Updated in later migrations.\r\n    RETURN jsonb_build_object('valid', false, 'message', 'Function not yet implemented');\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.manage_inventory()\r\nRETURNS TRIGGER\r\nLANGUAGE plpgsql\r\nAS $function$\r\nBEGIN\r\n    -- Placeholder to allow migration to pass. Updated in later migrations.\r\n    RETURN NEW;\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.handle_new_order_promo()\r\nRETURNS TRIGGER\r\nLANGUAGE plpgsql\r\nAS $function$\r\nDECLARE\r\n    v_promo_code text;\r\nBEGIN\r\n    -- Simple implementation to increment usage count\r\n    v_promo_code := NEW.order_details-\u003e\u003e'promo_code';\r\n    IF v_promo_code IS NOT NULL AND length(v_promo_code) \u003e 0 THEN\r\n        UPDATE promo_codes \r\n        SET usage_count = COALESCE(usage_count, 0) + 1 \r\n        WHERE code ILIKE v_promo_code;\r\n    END IF;\r\n    RETURN NEW;\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 1. Secure Functions with Fixed Search Path\r\n-- Signatures verified from pg_proc\r\nALTER FUNCTION public.verify_promo_code(p_code text) SET search_path = public, pg_catalog","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER FUNCTION public.manage_inventory() SET search_path = public, pg_catalog","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER FUNCTION public.handle_new_order_promo() SET search_path = public, pg_catalog","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Restrict \"System can insert logs\" RLS Policy\r\n-- Original: WITH CHECK (true) for all roles (implied by lack of TO clause or TO PUBLIC)\r\n-- New: Only service_role can insert.\r\n\r\nDROP POLICY IF EXISTS \"System can insert logs\" ON public.promo_logs","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"System can insert logs\"\r\nON public.promo_logs\r\nFOR INSERT\r\nTO service_role\r\nWITH CHECK (true)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260206122335"},{"text":"security_fixes"},{"binary":"0000000100000000000000190000000800000001000001c22d2d20466978207365637572697479206973737565733a204d757461626c6520736561726368207061746820616e64207065726d69737369766520524c530d0a0d0a2d2d20302e20456e737572652066756e6374696f6e73206578697374206265666f726520616c746572696e6720284d697373696e6720696e2070726576696f7573206d6967726174696f6e73290d0a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e7665726966795f70726f6d6f5f636f646528705f636f64652074657874290d0a52455455524e53206a736f6e620d0a4c414e475541474520706c706773716c0d0a4153202466756e6374696f6e240d0a424547494e0d0a202020202d2d20506c616365686f6c64657220746f20616c6c6f77206d6967726174696f6e20746f20706173732e205570646174656420696e206c61746572206d6967726174696f6e732e0d0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374282776616c6964272c2066616c73652c20276d657373616765272c202746756e6374696f6e206e6f742079657420696d706c656d656e74656427293b0d0a454e443b0d0a2466756e6374696f6e24000000dd435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e6d616e6167655f696e76656e746f727928290d0a52455455524e5320545249474745520d0a4c414e475541474520706c706773716c0d0a4153202466756e6374696f6e240d0a424547494e0d0a202020202d2d20506c616365686f6c64657220746f20616c6c6f77206d6967726174696f6e20746f20706173732e205570646174656420696e206c61746572206d6967726174696f6e732e0d0a2020202052455455524e204e45573b0d0a454e443b0d0a2466756e6374696f6e24000001f3435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e68616e646c655f6e65775f6f726465725f70726f6d6f28290d0a52455455524e5320545249474745520d0a4c414e475541474520706c706773716c0d0a4153202466756e6374696f6e240d0a4445434c4152450d0a20202020765f70726f6d6f5f636f646520746578743b0d0a424547494e0d0a202020202d2d2053696d706c6520696d706c656d656e746174696f6e20746f20696e6372656d656e7420757361676520636f756e740d0a20202020765f70726f6d6f5f636f6465203a3d204e45572e6f726465725f64657461696c732d3e3e2770726f6d6f5f636f6465273b0d0a20202020494620765f70726f6d6f5f636f6465204953204e4f54204e554c4c20414e44206c656e67746828765f70726f6d6f5f636f646529203e2030205448454e0d0a20202020202020205550444154452070726f6d6f5f636f646573200d0a20202020202020205345542075736167655f636f756e74203d20434f414c455343452875736167655f636f756e742c203029202b2031200d0a2020202020202020574845524520636f646520494c494b4520765f70726f6d6f5f636f64653b0d0a20202020454e442049463b0d0a2020202052455455524e204e45573b0d0a454e443b0d0a2466756e6374696f6e24000000ad2d2d20312e205365637572652046756e6374696f6e7320776974682046697865642053656172636820506174680d0a2d2d205369676e6174757265732076657269666965642066726f6d2070675f70726f630d0a414c5445522046554e4354494f4e207075626c69632e7665726966795f70726f6d6f5f636f646528705f636f646520746578742920534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670000004d414c5445522046554e4354494f4e207075626c69632e6d616e6167655f696e76656e746f7279282920534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f6700000053414c5445522046554e4354494f4e207075626c69632e68616e646c655f6e65775f6f726465725f70726f6d6f282920534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f67000000fa2d2d20322e205265737472696374202253797374656d2063616e20696e73657274206c6f67732220524c5320506f6c6963790d0a2d2d204f726967696e616c3a205749544820434845434b2028747275652920666f7220616c6c20726f6c65732028696d706c696564206279206c61636b206f6620544f20636c61757365206f7220544f205055424c4943290d0a2d2d204e65773a204f6e6c7920736572766963655f726f6c652063616e20696e736572742e0d0a0d0a44524f5020504f4c49435920494620455849535453202253797374656d2063616e20696e73657274206c6f677322204f4e207075626c69632e70726f6d6f5f6c6f67730000006c43524541544520504f4c494359202253797374656d2063616e20696e73657274206c6f6773220d0a4f4e207075626c69632e70726f6d6f5f6c6f67730d0a464f5220494e534552540d0a544f20736572766963655f726f6c650d0a5749544820434845434b20287472756529"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260206123504_performance_indexes.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Fix performance issues: Add missing indexes for foreign keys\n-- Addresses \"Unindexed foreign keys\" warnings for table promo_logs\n\nCREATE INDEX IF NOT EXISTS idx_promo_logs_order_id ON public.promo_logs(order_id)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_promo_logs_promo_code_id ON public.promo_logs(promo_code_id)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_promo_logs_user_id ON public.promo_logs(user_id)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260206123504"},{"text":"performance_indexes"},{"binary":"0000000100000000000000190000000300000001000000d62d2d2046697820706572666f726d616e6365206973737565733a20416464206d697373696e6720696e646578657320666f7220666f726569676e206b6579730a2d2d204164647265737365732022556e696e646578656420666f726569676e206b65797322207761726e696e677320666f72207461626c652070726f6d6f5f6c6f67730a0a43524541544520494e444558204946204e4f5420455849535453206964785f70726f6d6f5f6c6f67735f6f726465725f6964204f4e207075626c69632e70726f6d6f5f6c6f6773286f726465725f6964290000005b43524541544520494e444558204946204e4f5420455849535453206964785f70726f6d6f5f6c6f67735f70726f6d6f5f636f64655f6964204f4e207075626c69632e70726f6d6f5f6c6f67732870726f6d6f5f636f64655f6964290000004f43524541544520494e444558204946204e4f5420455849535453206964785f70726f6d6f5f6c6f67735f757365725f6964204f4e207075626c69632e70726f6d6f5f6c6f677328757365725f696429"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260206193345_critical_security_fix.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- ============================================\n-- CRITICAL SECURITY FIX\n-- ============================================\n\n-- 1. ADD is_admin COLUMN TO PROFILES\nDO $$ \nBEGIN\n    IF NOT EXISTS (\n        SELECT 1 FROM information_schema.columns \n        WHERE table_name = 'profiles' AND column_name = 'is_admin'\n    ) THEN\n        ALTER TABLE public.profiles ADD COLUMN is_admin BOOLEAN DEFAULT FALSE;\n        COMMENT ON COLUMN public.profiles.is_admin IS 'Admin kullanc flag - SADECE backend tarafndan set edilebilir';\n    END IF;\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. ADMIN BYPASS RLS POLICIES - PROFILES\nDROP POLICY IF EXISTS \"Admins can view all profiles\" ON public.profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins can view all profiles\" ON public.profiles\n    FOR SELECT \n    USING (\n        EXISTS (\n            SELECT 1 FROM public.profiles \n            WHERE id = auth.uid() AND is_admin = true\n        )\n    )","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can update any profile\" ON public.profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins can update any profile\" ON public.profiles\n    FOR UPDATE \n    USING (\n        EXISTS (\n            SELECT 1 FROM public.profiles \n            WHERE id = auth.uid() AND is_admin = true\n        )\n    )","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. ADMIN BYPASS RLS POLICIES - ADDRESSES\nDROP POLICY IF EXISTS \"Admins can view all addresses\" ON public.addresses","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins can view all addresses\" ON public.addresses\n    FOR SELECT \n    USING (\n        EXISTS (\n            SELECT 1 FROM public.profiles \n            WHERE id = auth.uid() AND is_admin = true\n        )\n    )","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can update any address\" ON public.addresses","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins can update any address\" ON public.addresses\n    FOR UPDATE \n    USING (\n        EXISTS (\n            SELECT 1 FROM public.profiles \n            WHERE id = auth.uid() AND is_admin = true\n        )\n    )","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can delete any address\" ON public.addresses","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins can delete any address\" ON public.addresses\n    FOR DELETE \n    USING (\n        EXISTS (\n            SELECT 1 FROM public.profiles \n            WHERE id = auth.uid() AND is_admin = true\n        )\n    )","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 4. ADMIN BYPASS RLS POLICIES - ORDERS\nDROP POLICY IF EXISTS \"Admins can view all orders\" ON public.orders","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins can view all orders\" ON public.orders\n    FOR SELECT \n    USING (\n        auth.uid() = user_id OR\n        EXISTS (\n            SELECT 1 FROM public.profiles \n            WHERE id = auth.uid() AND is_admin = true\n        )\n    )","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can update any order\" ON public.orders","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can view all profiles\" for relation \"public.profiles\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
NOTICE (00000): policy "Admins can view all profiles" for relation "public.profiles" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins can update any order\" ON public.orders\n    FOR UPDATE \n    USING (\n        EXISTS (\n            SELECT 1 FROM public.profiles \n            WHERE id = auth.uid() AND is_admin = true\n        )\n    )","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can update any profile\" for relation \"public.profiles\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
NOTICE (00000): policy "Admins can update any profile" for relation "public.profiles" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can view all addresses\" for relation \"public.addresses\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can update any address\" for relation \"public.addresses\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
NOTICE (00000): policy "Admins can view all addresses" for relation "public.addresses" does not exist, skipping
NOTICE (00000): policy "Admins can update any address" for relation "public.addresses" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can delete any address\" for relation \"public.addresses\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 5. BACKEND ADMIN VERIFICATION FUNCTION\nCREATE OR REPLACE FUNCTION public.is_admin_user()\nRETURNS BOOLEAN AS $$\nBEGIN\n    RETURN EXISTS (\n        SELECT 1 FROM public.profiles \n        WHERE id = auth.uid() AND is_admin = true\n    );\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
NOTICE (00000): policy "Admins can delete any address" for relation "public.addresses" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"COMMENT ON FUNCTION public.is_admin_user() IS 'Backend admin kontrol iin helper function'","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 6. ADMIN-ONLY RPC FUNCTIONS\nCREATE OR REPLACE FUNCTION public.admin_get_all_orders(\n    p_status TEXT DEFAULT NULL,\n    p_limit INT DEFAULT 100,\n    p_offset INT DEFAULT 0\n)\nRETURNS TABLE (\n    id UUID,\n    user_id UUID,\n    total DECIMAL,\n    status TEXT,\n    created_at TIMESTAMPTZ,\n    user_email TEXT,\n    user_name TEXT\n) AS $$\nBEGIN\n    IF NOT public.is_admin_user() THEN\n        RAISE EXCEPTION 'Unauthorized: Admin permission required';\n    END IF;\n\n    RETURN QUERY\n    SELECT \n        o.id,\n        o.user_id,\n        o.total,\n        o.status,\n        o.created_at,\n        p.email as user_email,\n        p.full_name as user_name\n    FROM public.orders o\n    LEFT JOIN public.profiles p ON o.user_id = p.id\n    WHERE \n        (p_status IS NULL OR o.status = p_status)\n    ORDER BY o.created_at DESC\n    LIMIT p_limit\n    OFFSET p_offset;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can update any order\" for relation \"public.orders\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
NOTICE (00000): policy "Admins can update any order" for relation "public.orders" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"COMMENT ON FUNCTION public.admin_get_all_orders IS 'Admin-only: Tm siparileri getirir'","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.admin_update_order_status(\n    p_order_id UUID,\n    p_new_status TEXT\n)\nRETURNS BOOLEAN AS $$\nBEGIN\n    IF NOT public.is_admin_user() THEN\n        RAISE EXCEPTION 'Unauthorized: Admin permission required';\n    END IF;\n\n    IF p_new_status NOT IN ('pending', 'processing', 'shipped', 'delivered', 'cancelled') THEN\n        RAISE EXCEPTION 'Invalid status: %', p_new_status;\n    END IF;\n\n    UPDATE public.orders\n    SET status = p_new_status, updated_at = NOW()\n    WHERE id = p_order_id;\n\n    RETURN FOUND;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"COMMENT ON FUNCTION public.admin_update_order_status IS 'Admin-only: Sipari durumunu gnceller'","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.admin_set_user_admin(\n    p_user_id UUID,\n    p_is_admin BOOLEAN\n)\nRETURNS BOOLEAN AS $$\nBEGIN\n    IF NOT public.is_admin_user() THEN\n        RAISE EXCEPTION 'Unauthorized: Admin permission required';\n    END IF;\n\n    IF p_user_id = auth.uid() AND p_is_admin = FALSE THEN\n        RAISE EXCEPTION 'Cannot remove your own admin privileges';\n    END IF;\n\n    UPDATE public.profiles\n    SET is_admin = p_is_admin, updated_at = NOW()\n    WHERE id = p_user_id;\n\n    RETURN FOUND;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"COMMENT ON FUNCTION public.admin_set_user_admin IS 'Admin-only: Kullancya admin yetkisi verir/kaldrr'","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 7. AUDIT LOG TABLE\nCREATE TABLE IF NOT EXISTS public.admin_audit_log (\n    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,\n    admin_user_id UUID REFERENCES auth.users(id) NOT NULL,\n    action TEXT NOT NULL,\n    target_table TEXT,\n    target_id UUID,\n    details JSONB,\n    created_at TIMESTAMPTZ DEFAULT NOW()\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"COMMENT ON TABLE public.admin_audit_log IS 'Admin ilem loglar - GDPR compliance'","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.admin_audit_log ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can view audit logs\" ON public.admin_audit_log","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins can view audit logs\" ON public.admin_audit_log\n    FOR SELECT \n    USING (\n        EXISTS (\n            SELECT 1 FROM public.profiles \n            WHERE id = auth.uid() AND is_admin = true\n        )\n    )","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 8. SECURITY FUNCTIONS\nCREATE OR REPLACE FUNCTION public.sanitize_search_input(input_text TEXT)\nRETURNS TEXT AS $$\nBEGIN\n    RETURN REPLACE(input_text, '''', '''''');\nEND;\n$$ LANGUAGE plpgsql IMMUTABLE","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"COMMENT ON FUNCTION public.sanitize_search_input IS 'SQL Injection korumas iin input temizleme'","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260206193345"},{"text":"critical_security_fix"},{"binary":"0000000100000000000000190000001e000000010000021e2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0a2d2d20435249544943414c205345435552495459204649580a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0a0a2d2d20312e204144442069735f61646d696e20434f4c554d4e20544f2050524f46494c45530a444f202424200a424547494e0a202020204946204e4f542045584953545320280a202020202020202053454c45435420312046524f4d20696e666f726d6174696f6e5f736368656d612e636f6c756d6e73200a20202020202020205748455245207461626c655f6e616d65203d202770726f66696c65732720414e4420636f6c756d6e5f6e616d65203d202769735f61646d696e270a2020202029205448454e0a2020202020202020414c544552205441424c45207075626c69632e70726f66696c65732041444420434f4c554d4e2069735f61646d696e20424f4f4c45414e2044454641554c542046414c53453b0a2020202020202020434f4d4d454e54204f4e20434f4c554d4e207075626c69632e70726f66696c65732e69735f61646d696e204953202741646d696e206b756c6c616ec4b163c4b120666c6167202d20534144454345206261636b656e64207461726166c4b16e64616e20736574206564696c6562696c6972273b0a20202020454e442049463b0a454e44202424000000722d2d20322e2041444d494e2042595041535320524c5320504f4c4943494553202d2050524f46494c45530a44524f5020504f4c49435920494620455849535453202241646d696e732063616e207669657720616c6c2070726f66696c657322204f4e207075626c69632e70726f66696c6573000000dd43524541544520504f4c494359202241646d696e732063616e207669657720616c6c2070726f66696c657322204f4e207075626c69632e70726f66696c65730a20202020464f522053454c454354200a202020205553494e4720280a202020202020202045584953545320280a20202020202020202020202053454c45435420312046524f4d207075626c69632e70726f66696c6573200a2020202020202020202020205748455245206964203d20617574682e756964282920414e442069735f61646d696e203d20747275650a2020202020202020290a20202020290000004844524f5020504f4c49435920494620455849535453202241646d696e732063616e2075706461746520616e792070726f66696c6522204f4e207075626c69632e70726f66696c6573000000de43524541544520504f4c494359202241646d696e732063616e2075706461746520616e792070726f66696c6522204f4e207075626c69632e70726f66696c65730a20202020464f5220555044415445200a202020205553494e4720280a202020202020202045584953545320280a20202020202020202020202053454c45435420312046524f4d207075626c69632e70726f66696c6573200a2020202020202020202020205748455245206964203d20617574682e756964282920414e442069735f61646d696e203d20747275650a2020202020202020290a2020202029000000752d2d20332e2041444d494e2042595041535320524c5320504f4c4943494553202d204144445245535345530a44524f5020504f4c49435920494620455849535453202241646d696e732063616e207669657720616c6c2061646472657373657322204f4e207075626c69632e616464726573736573000000df43524541544520504f4c494359202241646d696e732063616e207669657720616c6c2061646472657373657322204f4e207075626c69632e6164647265737365730a20202020464f522053454c454354200a202020205553494e4720280a202020202020202045584953545320280a20202020202020202020202053454c45435420312046524f4d207075626c69632e70726f66696c6573200a2020202020202020202020205748455245206964203d20617574682e756964282920414e442069735f61646d696e203d20747275650a2020202020202020290a20202020290000004944524f5020504f4c49435920494620455849535453202241646d696e732063616e2075706461746520616e79206164647265737322204f4e207075626c69632e616464726573736573000000df43524541544520504f4c494359202241646d696e732063616e2075706461746520616e79206164647265737322204f4e207075626c69632e6164647265737365730a20202020464f5220555044415445200a202020205553494e4720280a202020202020202045584953545320280a20202020202020202020202053454c45435420312046524f4d207075626c69632e70726f66696c6573200a2020202020202020202020205748455245206964203d20617574682e756964282920414e442069735f61646d696e203d20747275650a2020202020202020290a20202020290000004944524f5020504f4c49435920494620455849535453202241646d696e732063616e2064656c65746520616e79206164647265737322204f4e207075626c69632e616464726573736573000000df43524541544520504f4c494359202241646d696e732063616e2064656c65746520616e79206164647265737322204f4e207075626c69632e6164647265737365730a20202020464f522044454c455445200a202020205553494e4720280a202020202020202045584953545320280a20202020202020202020202053454c45435420312046524f4d207075626c69632e70726f66696c6573200a2020202020202020202020205748455245206964203d20617574682e756964282920414e442069735f61646d696e203d20747275650a2020202020202020290a20202020290000006c2d2d20342e2041444d494e2042595041535320524c5320504f4c4943494553202d204f52444552530a44524f5020504f4c49435920494620455849535453202241646d696e732063616e207669657720616c6c206f726465727322204f4e207075626c69632e6f7264657273000000f943524541544520504f4c494359202241646d696e732063616e207669657720616c6c206f726465727322204f4e207075626c69632e6f72646572730a20202020464f522053454c454354200a202020205553494e4720280a2020202020202020617574682e7569642829203d20757365725f6964204f520a202020202020202045584953545320280a20202020202020202020202053454c45435420312046524f4d207075626c69632e70726f66696c6573200a2020202020202020202020205748455245206964203d20617574682e756964282920414e442069735f61646d696e203d20747275650a2020202020202020290a20202020290000004444524f5020504f4c49435920494620455849535453202241646d696e732063616e2075706461746520616e79206f7264657222204f4e207075626c69632e6f7264657273000000da43524541544520504f4c494359202241646d696e732063616e2075706461746520616e79206f7264657222204f4e207075626c69632e6f72646572730a20202020464f5220555044415445200a202020205553494e4720280a202020202020202045584953545320280a20202020202020202020202053454c45435420312046524f4d207075626c69632e70726f66696c6573200a2020202020202020202020205748455245206964203d20617574682e756964282920414e442069735f61646d696e203d20747275650a2020202020202020290a2020202029000001152d2d20352e204241434b454e442041444d494e20564552494649434154494f4e2046554e4354494f4e0a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e69735f61646d696e5f7573657228290a52455455524e5320424f4f4c45414e2041532024240a424547494e0a2020202052455455524e2045584953545320280a202020202020202053454c45435420312046524f4d207075626c69632e70726f66696c6573200a20202020202020205748455245206964203d20617574682e756964282920414e442069735f61646d696e203d20747275650a20202020293b0a454e443b0a2424204c414e475541474520706c706773716c20534543555249545920444546494e45520000005d434f4d4d454e54204f4e2046554e4354494f4e207075626c69632e69735f61646d696e5f75736572282920495320274261636b656e642061646d696e206b6f6e74726f6cc3bc2069c3a7696e2068656c7065722066756e6374696f6e270000037d2d2d20362e2041444d494e2d4f4e4c59205250432046554e4354494f4e530a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e61646d696e5f6765745f616c6c5f6f7264657273280a20202020705f73746174757320544558542044454641554c54204e554c4c2c0a20202020705f6c696d697420494e542044454641554c54203130302c0a20202020705f6f666673657420494e542044454641554c5420300a290a52455455524e53205441424c4520280a20202020696420555549442c0a20202020757365725f696420555549442c0a20202020746f74616c20444543494d414c2c0a2020202073746174757320544558542c0a20202020637265617465645f61742054494d455354414d50545a2c0a20202020757365725f656d61696c20544558542c0a20202020757365725f6e616d6520544558540a292041532024240a424547494e0a202020204946204e4f54207075626c69632e69735f61646d696e5f757365722829205448454e0a2020202020202020524149534520455843455054494f4e2027556e617574686f72697a65643a2041646d696e207065726d697373696f6e207265717569726564273b0a20202020454e442049463b0a0a2020202052455455524e2051554552590a2020202053454c454354200a20202020202020206f2e69642c0a20202020202020206f2e757365725f69642c0a20202020202020206f2e746f74616c2c0a20202020202020206f2e7374617475732c0a20202020202020206f2e637265617465645f61742c0a2020202020202020702e656d61696c20617320757365725f656d61696c2c0a2020202020202020702e66756c6c5f6e616d6520617320757365725f6e616d650a2020202046524f4d207075626c69632e6f7264657273206f0a202020204c454654204a4f494e207075626c69632e70726f66696c65732070204f4e206f2e757365725f6964203d20702e69640a202020205748455245200a202020202020202028705f737461747573204953204e554c4c204f52206f2e737461747573203d20705f737461747573290a202020204f52444552204259206f2e637265617465645f617420444553430a202020204c494d495420705f6c696d69740a202020204f464653455420705f6f66667365743b0a454e443b0a2424204c414e475541474520706c706773716c20534543555249545920444546494e45520000005a434f4d4d454e54204f4e2046554e4354494f4e207075626c69632e61646d696e5f6765745f616c6c5f6f7264657273204953202741646d696e2d6f6e6c793a2054c3bc6d20736970617269c59f6c65726920676574697269722700000246435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e61646d696e5f7570646174655f6f726465725f737461747573280a20202020705f6f726465725f696420555549442c0a20202020705f6e65775f73746174757320544558540a290a52455455524e5320424f4f4c45414e2041532024240a424547494e0a202020204946204e4f54207075626c69632e69735f61646d696e5f757365722829205448454e0a2020202020202020524149534520455843455054494f4e2027556e617574686f72697a65643a2041646d696e207065726d697373696f6e207265717569726564273b0a20202020454e442049463b0a0a20202020494620705f6e65775f737461747573204e4f5420494e20282770656e64696e67272c202770726f63657373696e67272c202773686970706564272c202764656c697665726564272c202763616e63656c6c65642729205448454e0a2020202020202020524149534520455843455054494f4e2027496e76616c6964207374617475733a2025272c20705f6e65775f7374617475733b0a20202020454e442049463b0a0a20202020555044415445207075626c69632e6f72646572730a2020202053455420737461747573203d20705f6e65775f7374617475732c20757064617465645f6174203d204e4f5728290a202020205748455245206964203d20705f6f726465725f69643b0a0a2020202052455455524e20464f554e443b0a454e443b0a2424204c414e475541474520706c706773716c20534543555249545920444546494e455200000062434f4d4d454e54204f4e2046554e4354494f4e207075626c69632e61646d696e5f7570646174655f6f726465725f737461747573204953202741646d696e2d6f6e6c793a20536970617269c59f20647572756d756e752067c3bc6e63656c6c65722700000225435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e61646d696e5f7365745f757365725f61646d696e280a20202020705f757365725f696420555549442c0a20202020705f69735f61646d696e20424f4f4c45414e0a290a52455455524e5320424f4f4c45414e2041532024240a424547494e0a202020204946204e4f54207075626c69632e69735f61646d696e5f757365722829205448454e0a2020202020202020524149534520455843455054494f4e2027556e617574686f72697a65643a2041646d696e207065726d697373696f6e207265717569726564273b0a20202020454e442049463b0a0a20202020494620705f757365725f6964203d20617574682e756964282920414e4420705f69735f61646d696e203d2046414c5345205448454e0a2020202020202020524149534520455843455054494f4e202743616e6e6f742072656d6f766520796f7572206f776e2061646d696e2070726976696c65676573273b0a20202020454e442049463b0a0a20202020555044415445207075626c69632e70726f66696c65730a202020205345542069735f61646d696e203d20705f69735f61646d696e2c20757064617465645f6174203d204e4f5728290a202020205748455245206964203d20705f757365725f69643b0a0a2020202052455455524e20464f554e443b0a454e443b0a2424204c414e475541474520706c706773716c20534543555249545920444546494e45520000006d434f4d4d454e54204f4e2046554e4354494f4e207075626c69632e61646d696e5f7365745f757365725f61646d696e204953202741646d696e2d6f6e6c793a204b756c6c616ec4b163c4b179612061646d696e207965746b6973692076657269722f6b616c64c4b172c4b172270000013b2d2d20372e204155444954204c4f47205441424c450a435245415445205441424c45204946204e4f5420455849535453207075626c69632e61646d696e5f61756469745f6c6f6720280a20202020696420555549442044454641554c5420757569645f67656e65726174655f76342829205052494d415259204b45592c0a2020202061646d696e5f757365725f69642055554944205245464552454e43455320617574682e757365727328696429204e4f54204e554c4c2c0a20202020616374696f6e2054455854204e4f54204e554c4c2c0a202020207461726765745f7461626c6520544558542c0a202020207461726765745f696420555549442c0a2020202064657461696c73204a534f4e422c0a20202020637265617465645f61742054494d455354414d50545a2044454641554c54204e4f5728290a2900000054434f4d4d454e54204f4e205441424c45207075626c69632e61646d696e5f61756469745f6c6f67204953202741646d696e2069c59f6c656d206c6f676c6172c4b1202d204744505220636f6d706c69616e6365270000003c414c544552205441424c45207075626c69632e61646d696e5f61756469745f6c6f6720454e41424c4520524f57204c4556454c2053454355524954590000004c44524f5020504f4c49435920494620455849535453202241646d696e732063616e2076696577206175646974206c6f677322204f4e207075626c69632e61646d696e5f61756469745f6c6f67000000e243524541544520504f4c494359202241646d696e732063616e2076696577206175646974206c6f677322204f4e207075626c69632e61646d696e5f61756469745f6c6f670a20202020464f522053454c454354200a202020205553494e4720280a202020202020202045584953545320280a20202020202020202020202053454c45435420312046524f4d207075626c69632e70726f66696c6573200a2020202020202020202020205748455245206964203d20617574682e756964282920414e442069735f61646d696e203d20747275650a2020202020202020290a2020202029000000cb2d2d20382e2053454355524954592046554e4354494f4e530a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e73616e6974697a655f7365617263685f696e70757428696e7075745f746578742054455854290a52455455524e5320544558542041532024240a424547494e0a2020202052455455524e205245504c41434528696e7075745f746578742c20272727272c20272727272727293b0a454e443b0a2424204c414e475541474520706c706773716c20494d4d555441424c4500000063434f4d4d454e54204f4e2046554e4354494f4e207075626c69632e73616e6974697a655f7365617263685f696e707574204953202753514c20496e6a656374696f6e206b6f72756d6173c4b12069c3a7696e20696e7075742074656d697a6c656d6527"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can view audit logs\" for relation \"public.admin_audit_log\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Admins can view audit logs" for relation "public.admin_audit_log" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260206193654_critical_security_fix_1_is_admin_column.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- ============================================\n-- 1. ADD is_admin COLUMN TO PROFILES\n-- ============================================\nDO $$ \nBEGIN\n    IF NOT EXISTS (\n        SELECT 1 FROM information_schema.columns \n        WHERE table_name = 'profiles' AND column_name = 'is_admin'\n    ) THEN\n        ALTER TABLE public.profiles ADD COLUMN is_admin BOOLEAN DEFAULT FALSE;\n        COMMENT ON COLUMN public.profiles.is_admin IS 'Admin kullanc flag - SADECE backend tarafndan set edilebilir';\n    END IF;\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260206193654"},{"text":"critical_security_fix_1_is_admin_column"},{"binary":"0000000100000000000000190000000100000001000002042d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0a2d2d20312e204144442069735f61646d696e20434f4c554d4e20544f2050524f46494c45530a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0a444f202424200a424547494e0a202020204946204e4f542045584953545320280a202020202020202053454c45435420312046524f4d20696e666f726d6174696f6e5f736368656d612e636f6c756d6e73200a20202020202020205748455245207461626c655f6e616d65203d202770726f66696c65732720414e4420636f6c756d6e5f6e616d65203d202769735f61646d696e270a2020202029205448454e0a2020202020202020414c544552205441424c45207075626c69632e70726f66696c65732041444420434f4c554d4e2069735f61646d696e20424f4f4c45414e2044454641554c542046414c53453b0a2020202020202020434f4d4d454e54204f4e20434f4c554d4e207075626c69632e70726f66696c65732e69735f61646d696e204953202741646d696e206b756c6c616ec4b163c4b120666c6167202d20534144454345206261636b656e64207461726166c4b16e64616e20736574206564696c6562696c6972273b0a20202020454e442049463b0a454e44202424"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260206194827_fix_infinite_recursion_and_recreate_admin_policies.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Drop all problematic policies that cause infinite recursion\nDROP POLICY IF EXISTS \"Admins can view all profiles\" ON public.profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can update any profile\" ON public.profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can view all addresses\" ON public.addresses","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can update any address\" ON public.addresses","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can delete any address\" ON public.addresses","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can view all orders\" ON public.orders","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can update any order\" ON public.orders","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Drop function if it exists\nDROP FUNCTION IF EXISTS public.is_admin_user(uuid)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Create the is_admin_user function first (without checking policies)\nCREATE OR REPLACE FUNCTION public.is_admin_user(user_id uuid)\nRETURNS boolean AS $$\nDECLARE\n  admin_status boolean;\nBEGIN\n  -- Direct column access without triggering policy checks\n  SELECT is_admin INTO admin_status\n  FROM public.profiles\n  WHERE id = user_id\n  LIMIT 1;\n  \n  RETURN COALESCE(admin_status, false);\nEND;\n$$ LANGUAGE plpgsql STABLE SECURITY DEFINER","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Grant execute to authenticated users\nGRANT EXECUTE ON FUNCTION public.is_admin_user(uuid) TO authenticated, anon","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Now recreate admin policies using the function at the beginning\n-- IMPORTANT: Policy evaluation should happen BEFORE join to avoid recursion\n\n-- Admins can view all profiles\nCREATE POLICY \"Admins can view all profiles\"\nON public.profiles FOR SELECT\nUSING (\n  is_admin_user(auth.uid()) = true\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Admins can update any profile\nCREATE POLICY \"Admins can update any profile\"\nON public.profiles FOR UPDATE\nUSING (\n  is_admin_user(auth.uid()) = true\n)\nWITH CHECK (\n  is_admin_user(auth.uid()) = true\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Admins can view all addresses\nCREATE POLICY \"Admins can view all addresses\"\nON public.addresses FOR SELECT\nUSING (\n  is_admin_user(auth.uid()) = true\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"function public.is_admin_user(uuid) does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
NOTICE (00000): function public.is_admin_user(uuid) does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Admins can update any address\nCREATE POLICY \"Admins can update any address\"\nON public.addresses FOR UPDATE\nUSING (\n  is_admin_user(auth.uid()) = true\n)\nWITH CHECK (\n  is_admin_user(auth.uid()) = true\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Admins can delete any address\nCREATE POLICY \"Admins can delete any address\"\nON public.addresses FOR DELETE\nUSING (\n  is_admin_user(auth.uid()) = true\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Admins can view all orders\nCREATE POLICY \"Admins can view all orders\"\nON public.orders FOR SELECT\nUSING (\n  is_admin_user(auth.uid()) = true\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Admins can update any order\nCREATE POLICY \"Admins can update any order\"\nON public.orders FOR UPDATE\nUSING (\n  is_admin_user(auth.uid()) = true\n)\nWITH CHECK (\n  is_admin_user(auth.uid()) = true\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260206194827"},{"text":"fix_infinite_recursion_and_recreate_admin_policies"},{"binary":"0000000100000000000000190000001100000001000000862d2d2044726f7020616c6c2070726f626c656d6174696320706f6c6963696573207468617420636175736520696e66696e69746520726563757273696f6e0a44524f5020504f4c49435920494620455849535453202241646d696e732063616e207669657720616c6c2070726f66696c657322204f4e207075626c69632e70726f66696c65730000004844524f5020504f4c49435920494620455849535453202241646d696e732063616e2075706461746520616e792070726f66696c6522204f4e207075626c69632e70726f66696c65730000004944524f5020504f4c49435920494620455849535453202241646d696e732063616e207669657720616c6c2061646472657373657322204f4e207075626c69632e6164647265737365730000004944524f5020504f4c49435920494620455849535453202241646d696e732063616e2075706461746520616e79206164647265737322204f4e207075626c69632e6164647265737365730000004944524f5020504f4c49435920494620455849535453202241646d696e732063616e2064656c65746520616e79206164647265737322204f4e207075626c69632e6164647265737365730000004344524f5020504f4c49435920494620455849535453202241646d696e732063616e207669657720616c6c206f726465727322204f4e207075626c69632e6f72646572730000004444524f5020504f4c49435920494620455849535453202241646d696e732063616e2075706461746520616e79206f7264657222204f4e207075626c69632e6f7264657273000000502d2d2044726f702066756e6374696f6e206966206974206578697374730a44524f502046554e4354494f4e20494620455849535453207075626c69632e69735f61646d696e5f75736572287575696429000001b22d2d20437265617465207468652069735f61646d696e5f757365722066756e6374696f6e2066697273742028776974686f757420636865636b696e6720706f6c6963696573290a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e69735f61646d696e5f7573657228757365725f69642075756964290a52455455524e5320626f6f6c65616e2041532024240a4445434c4152450a202061646d696e5f73746174757320626f6f6c65616e3b0a424547494e0a20202d2d2044697265637420636f6c756d6e2061636365737320776974686f75742074726967676572696e6720706f6c69637920636865636b730a202053454c4543542069735f61646d696e20494e544f2061646d696e5f7374617475730a202046524f4d207075626c69632e70726f66696c65730a20205748455245206964203d20757365725f69640a20204c494d495420313b0a20200a202052455455524e20434f414c455343452861646d696e5f7374617475732c2066616c7365293b0a454e443b0a2424204c414e475541474520706c706773716c20535441424c4520534543555249545920444546494e4552000000732d2d204772616e74206578656375746520746f2061757468656e746963617465642075736572730a4752414e542045584543555445204f4e2046554e4354494f4e207075626c69632e69735f61646d696e5f7573657228757569642920544f2061757468656e746963617465642c20616e6f6e000001282d2d204e6f772072656372656174652061646d696e20706f6c6963696573207573696e67207468652066756e6374696f6e2061742074686520626567696e6e696e670a2d2d20494d504f5254414e543a20506f6c696379206576616c756174696f6e2073686f756c642068617070656e204245464f5245206a6f696e20746f2061766f696420726563757273696f6e0a0a2d2d2041646d696e732063616e207669657720616c6c2070726f66696c65730a43524541544520504f4c494359202241646d696e732063616e207669657720616c6c2070726f66696c6573220a4f4e207075626c69632e70726f66696c657320464f522053454c4543540a5553494e4720280a202069735f61646d696e5f7573657228617574682e756964282929203d20747275650a29000000cb2d2d2041646d696e732063616e2075706461746520616e792070726f66696c650a43524541544520504f4c494359202241646d696e732063616e2075706461746520616e792070726f66696c65220a4f4e207075626c69632e70726f66696c657320464f52205550444154450a5553494e4720280a202069735f61646d696e5f7573657228617574682e756964282929203d20747275650a290a5749544820434845434b20280a202069735f61646d696e5f7573657228617574682e756964282929203d20747275650a290000009a2d2d2041646d696e732063616e207669657720616c6c206164647265737365730a43524541544520504f4c494359202241646d696e732063616e207669657720616c6c20616464726573736573220a4f4e207075626c69632e61646472657373657320464f522053454c4543540a5553494e4720280a202069735f61646d696e5f7573657228617574682e756964282929203d20747275650a29000000cc2d2d2041646d696e732063616e2075706461746520616e7920616464726573730a43524541544520504f4c494359202241646d696e732063616e2075706461746520616e792061646472657373220a4f4e207075626c69632e61646472657373657320464f52205550444154450a5553494e4720280a202069735f61646d696e5f7573657228617574682e756964282929203d20747275650a290a5749544820434845434b20280a202069735f61646d696e5f7573657228617574682e756964282929203d20747275650a290000009a2d2d2041646d696e732063616e2064656c65746520616e7920616464726573730a43524541544520504f4c494359202241646d696e732063616e2064656c65746520616e792061646472657373220a4f4e207075626c69632e61646472657373657320464f522044454c4554450a5553494e4720280a202069735f61646d696e5f7573657228617574682e756964282929203d20747275650a29000000912d2d2041646d696e732063616e207669657720616c6c206f72646572730a43524541544520504f4c494359202241646d696e732063616e207669657720616c6c206f7264657273220a4f4e207075626c69632e6f726465727320464f522053454c4543540a5553494e4720280a202069735f61646d696e5f7573657228617574682e756964282929203d20747275650a29000000c52d2d2041646d696e732063616e2075706461746520616e79206f726465720a43524541544520504f4c494359202241646d696e732063616e2075706461746520616e79206f72646572220a4f4e207075626c69632e6f726465727320464f52205550444154450a5553494e4720280a202069735f61646d696e5f7573657228617574682e756964282929203d20747275650a290a5749544820434845434b20280a202069735f61646d696e5f7573657228617574682e756964282929203d20747275650a29"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260206195616_fix_profiles_policy_function_call.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Drop the incorrect policy\nDROP POLICY IF EXISTS \"Users and admins can view profiles\" ON public.profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Recreate with correct function call\nCREATE POLICY \"Users and admins can view profiles\"\nON public.profiles FOR SELECT\nUSING (\n  id = auth.uid() OR is_admin_user(auth.uid()) = true\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260206195616"},{"text":"fix_profiles_policy_function_call"},{"binary":"00000001000000000000001900000002000000010000006a2d2d2044726f702074686520696e636f727265637420706f6c6963790a44524f5020504f4c494359204946204558495354532022557365727320616e642061646d696e732063616e20766965772070726f66696c657322204f4e207075626c69632e70726f66696c6573000000b72d2d205265637265617465207769746820636f72726563742066756e6374696f6e2063616c6c0a43524541544520504f4c4943592022557365727320616e642061646d696e732063616e20766965772070726f66696c6573220a4f4e207075626c69632e70726f66696c657320464f522053454c4543540a5553494e4720280a20206964203d20617574682e7569642829204f522069735f61646d696e5f7573657228617574682e756964282929203d20747275650a29"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users and admins can view profiles\" for relation \"public.profiles\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Users and admins can view profiles" for relation "public.profiles" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260206210252_sync_user_admin_status_function.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Function to sync admin status across profiles and auth metadata\nCREATE OR REPLACE FUNCTION public.sync_user_admin_status(\n    p_user_id UUID,\n    p_is_admin BOOLEAN\n)\nRETURNS VOID\nLANGUAGE plpgsql\nSECURITY DEFINER -- Runs with service_role permissions to update auth.users\nSET search_path = public, auth\nAS $$\nBEGIN\n    -- 1. Update public.profiles\n    UPDATE public.profiles\n    SET is_admin = p_is_admin\n    WHERE id = p_user_id;\n\n    -- 2. Update auth.users metadata\n    -- We update both raw_app_meta_data and raw_user_meta_data for maximum compatibility\n    UPDATE auth.users\n    SET \n        raw_app_meta_data = raw_app_meta_data || jsonb_build_object('is_admin', p_is_admin),\n        raw_user_meta_data = raw_user_meta_data || jsonb_build_object('is_admin', p_is_admin)\n    WHERE id = p_user_id;\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Grant execution to authenticated users (admins will call this)\nGRANT EXECUTE ON FUNCTION public.sync_user_admin_status(UUID, BOOLEAN) TO authenticated","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"GRANT EXECUTE ON FUNCTION public.sync_user_admin_status(UUID, BOOLEAN) TO service_role","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260206210252"},{"text":"sync_user_admin_status_function"},{"binary":"00000001000000000000001900000003000000010000032d2d2d2046756e6374696f6e20746f2073796e632061646d696e20737461747573206163726f73732070726f66696c657320616e642061757468206d657461646174610a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e73796e635f757365725f61646d696e5f737461747573280a20202020705f757365725f696420555549442c0a20202020705f69735f61646d696e20424f4f4c45414e0a290a52455455524e5320564f49440a4c414e475541474520706c706773716c0a534543555249545920444546494e4552202d2d2052756e73207769746820736572766963655f726f6c65207065726d697373696f6e7320746f2075706461746520617574682e75736572730a534554207365617263685f70617468203d207075626c69632c20617574680a41532024240a424547494e0a202020202d2d20312e20557064617465207075626c69632e70726f66696c65730a20202020555044415445207075626c69632e70726f66696c65730a202020205345542069735f61646d696e203d20705f69735f61646d696e0a202020205748455245206964203d20705f757365725f69643b0a0a202020202d2d20322e2055706461746520617574682e7573657273206d657461646174610a202020202d2d2057652075706461746520626f7468207261775f6170705f6d6574615f6461746120616e64207261775f757365725f6d6574615f6461746120666f72206d6178696d756d20636f6d7061746962696c6974790a2020202055504441544520617574682e75736572730a20202020534554200a20202020202020207261775f6170705f6d6574615f64617461203d207261775f6170705f6d6574615f64617461207c7c206a736f6e625f6275696c645f6f626a656374282769735f61646d696e272c20705f69735f61646d696e292c0a20202020202020207261775f757365725f6d6574615f64617461203d207261775f757365725f6d6574615f64617461207c7c206a736f6e625f6275696c645f6f626a656374282769735f61646d696e272c20705f69735f61646d696e290a202020205748455245206964203d20705f757365725f69643b0a454e443b0a2424000000992d2d204772616e7420657865637574696f6e20746f2061757468656e74696361746564207573657273202861646d696e732077696c6c2063616c6c2074686973290a4752414e542045584543555445204f4e2046554e4354494f4e207075626c69632e73796e635f757365725f61646d696e5f73746174757328555549442c20424f4f4c45414e2920544f2061757468656e74696361746564000000564752414e542045584543555445204f4e2046554e4354494f4e207075626c69632e73796e635f757365725f61646d696e5f73746174757328555549442c20424f4f4c45414e2920544f20736572766963655f726f6c65"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260206210434_secure_admin_and_superadmin_protection.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Enhanced Function to sync admin status with Super Admin protection\nCREATE OR REPLACE FUNCTION public.sync_user_admin_status(\n    p_user_id UUID,\n    p_is_admin BOOLEAN\n)\nRETURNS VOID\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path = public, auth\nAS $$\nDECLARE\n    v_user_email TEXT;\n    v_super_admin_email CONSTANT TEXT := 'umut.dog91@gmail.com';\nBEGIN\n    -- Get user email to check for Super Admin status\n    SELECT email INTO v_user_email FROM auth.users WHERE id = p_user_id;\n\n    -- Prevent revoking admin status from Super Admin\n    IF v_user_email = v_super_admin_email AND p_is_admin = FALSE THEN\n        RAISE EXCEPTION 'Sper admin yetkisi kaldrlamaz.';\n    END IF;\n\n    -- 1. Update public.profiles\n    UPDATE public.profiles\n    SET is_admin = p_is_admin\n    WHERE id = p_user_id;\n\n    -- 2. Update auth.users metadata\n    UPDATE auth.users\n    SET \n        raw_app_meta_data = raw_app_meta_data || jsonb_build_object('is_admin', p_is_admin),\n        raw_user_meta_data = raw_user_meta_data || jsonb_build_object('is_admin', p_is_admin)\n    WHERE id = p_user_id;\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260206210434"},{"text":"secure_admin_and_superadmin_protection"},{"binary":"0000000100000000000000190000000100000001000004452d2d20456e68616e6365642046756e6374696f6e20746f2073796e632061646d696e2073746174757320776974682053757065722041646d696e2070726f74656374696f6e0a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e73796e635f757365725f61646d696e5f737461747573280a20202020705f757365725f696420555549442c0a20202020705f69735f61646d696e20424f4f4c45414e0a290a52455455524e5320564f49440a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f70617468203d207075626c69632c20617574680a41532024240a4445434c4152450a20202020765f757365725f656d61696c20544558543b0a20202020765f73757065725f61646d696e5f656d61696c20434f4e5354414e542054455854203a3d2027756d75742e646f67393140676d61696c2e636f6d273b0a424547494e0a202020202d2d20476574207573657220656d61696c20746f20636865636b20666f722053757065722041646d696e207374617475730a2020202053454c45435420656d61696c20494e544f20765f757365725f656d61696c2046524f4d20617574682e7573657273205748455245206964203d20705f757365725f69643b0a0a202020202d2d2050726576656e74207265766f6b696e672061646d696e207374617475732066726f6d2053757065722041646d696e0a20202020494620765f757365725f656d61696c203d20765f73757065725f61646d696e5f656d61696c20414e4420705f69735f61646d696e203d2046414c5345205448454e0a2020202020202020524149534520455843455054494f4e202753c3bc7065722061646d696e207965746b697369206b616c64c4b172c4b16c616d617a2e273b0a20202020454e442049463b0a0a202020202d2d20312e20557064617465207075626c69632e70726f66696c65730a20202020555044415445207075626c69632e70726f66696c65730a202020205345542069735f61646d696e203d20705f69735f61646d696e0a202020205748455245206964203d20705f757365725f69643b0a0a202020202d2d20322e2055706461746520617574682e7573657273206d657461646174610a2020202055504441544520617574682e75736572730a20202020534554200a20202020202020207261775f6170705f6d6574615f64617461203d207261775f6170705f6d6574615f64617461207c7c206a736f6e625f6275696c645f6f626a656374282769735f61646d696e272c20705f69735f61646d696e292c0a20202020202020207261775f757365725f6d6574615f64617461203d207261775f757365725f6d6574615f64617461207c7c206a736f6e625f6275696c645f6f626a656374282769735f61646d696e272c20705f69735f61646d696e290a202020205748455245206964203d20705f757365725f69643b0a454e443b0a2424"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260206220340_harden_profiles_rls_protection.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 1. Harden profiles RLS to prevent self-promotion to admin\nDROP POLICY IF EXISTS \"Users can update own profile\" ON public.profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users can update own profile\" ON public.profiles\n    FOR UPDATE \n    USING (id = auth.uid())\n    WITH CHECK (\n        id = auth.uid() \n        AND (\n            -- Sadece Mevcut is_admin deerini koruyabilir (deitiremez)\n            -- VEYA admin ise her eyi deitirebilir\n            (is_admin = (SELECT is_admin FROM public.profiles WHERE id = auth.uid()))\n            OR \n            (SELECT is_admin FROM public.profiles WHERE id = auth.uid()) = true\n        )\n    )","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users can insert own profile\" ON public.profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users can insert own profile\" ON public.profiles\n    FOR INSERT \n    WITH CHECK (\n        id = auth.uid() \n        AND is_admin = false -- Yeni kullanclar asla admin olarak balayamaz\n    )","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users can update own profile\" for relation \"public.profiles\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Users can update own profile" for relation "public.profiles" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Audit Trail for Admin Actions (Ensure logging is active)\n-- sync_user_admin_status function'na logging ekleyelim\nCREATE OR REPLACE FUNCTION public.sync_user_admin_status(\n    p_user_id UUID,\n    p_is_admin BOOLEAN\n)\nRETURNS VOID\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path = public, auth\nAS $$\nDECLARE\n    v_user_email TEXT;\n    v_super_admin_email CONSTANT TEXT := 'umut.dog91@gmail.com';\n    v_admin_id UUID;\nBEGIN\n    v_admin_id := auth.uid();\n    \n    -- Get user email\n    SELECT email INTO v_user_email FROM auth.users WHERE id = p_user_id;\n\n    -- Super Admin protection\n    IF v_user_email = v_super_admin_email AND p_is_admin = FALSE THEN\n        RAISE EXCEPTION 'Sper admin yetkisi kaldrlamaz.';\n    END IF;\n\n    -- 1. Update public.profiles\n    UPDATE public.profiles\n    SET is_admin = p_is_admin\n    WHERE id = p_user_id;\n\n    -- 2. Update auth.users metadata\n    UPDATE auth.users\n    SET \n        raw_app_meta_data = raw_app_meta_data || jsonb_build_object('is_admin', p_is_admin),\n        raw_user_meta_data = raw_user_meta_data || jsonb_build_object('is_admin', p_is_admin)\n    WHERE id = p_user_id;\n\n    -- 3. Log the action\n    INSERT INTO public.admin_audit_log (admin_user_id, action, target_table, target_id, details)\n    VALUES (\n        v_admin_id, \n        CASE WHEN p_is_admin THEN 'PROMOTED_TO_ADMIN' ELSE 'DEMOTED_FROM_ADMIN' END,\n        'profiles',\n        p_user_id,\n        jsonb_build_object('email', v_user_email)\n    );\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260206220340"},{"text":"harden_profiles_rls_protection"},{"binary":"0000000100000000000000190000000500000001000000842d2d20312e2048617264656e2070726f66696c657320524c5320746f2070726576656e742073656c662d70726f6d6f74696f6e20746f2061646d696e0a44524f5020504f4c49435920494620455849535453202255736572732063616e20757064617465206f776e2070726f66696c6522204f4e207075626c69632e70726f66696c6573000001ef43524541544520504f4c494359202255736572732063616e20757064617465206f776e2070726f66696c6522204f4e207075626c69632e70726f66696c65730a20202020464f5220555044415445200a202020205553494e4720286964203d20617574682e7569642829290a202020205749544820434845434b20280a20202020202020206964203d20617574682e7569642829200a2020202020202020414e4420280a2020202020202020202020202d2d20536164656365204d65766375742069735f61646d696e206465c49f6572696e69206b6f7275796162696c697220286465c49f69c59f746972656d657a290a2020202020202020202020202d2d20564559412061646d696e206973652068657220c59f657969206465c49f69c59f7469726562696c69720a2020202020202020202020202869735f61646d696e203d202853454c4543542069735f61646d696e2046524f4d207075626c69632e70726f66696c6573205748455245206964203d20617574682e756964282929290a2020202020202020202020204f52200a2020202020202020202020202853454c4543542069735f61646d696e2046524f4d207075626c69632e70726f66696c6573205748455245206964203d20617574682e756964282929203d20747275650a2020202020202020290a20202020290000004744524f5020504f4c49435920494620455849535453202255736572732063616e20696e73657274206f776e2070726f66696c6522204f4e207075626c69632e70726f66696c6573000000d143524541544520504f4c494359202255736572732063616e20696e73657274206f776e2070726f66696c6522204f4e207075626c69632e70726f66696c65730a20202020464f5220494e53455254200a202020205749544820434845434b20280a20202020202020206964203d20617574682e7569642829200a2020202020202020414e442069735f61646d696e203d2066616c7365202d2d2059656e69206b756c6c616ec4b163c4b16c61722061736c612061646d696e206f6c6172616b206261c59f6c6179616d617a0a2020202029000005ca2d2d20322e20417564697420547261696c20666f722041646d696e20416374696f6e732028456e73757265206c6f6767696e6720697320616374697665290a2d2d2073796e635f757365725f61646d696e5f7374617475732066756e6374696f6e27c4b16e61206c6f6767696e6720656b6c6579656c696d0a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e73796e635f757365725f61646d696e5f737461747573280a20202020705f757365725f696420555549442c0a20202020705f69735f61646d696e20424f4f4c45414e0a290a52455455524e5320564f49440a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f70617468203d207075626c69632c20617574680a41532024240a4445434c4152450a20202020765f757365725f656d61696c20544558543b0a20202020765f73757065725f61646d696e5f656d61696c20434f4e5354414e542054455854203a3d2027756d75742e646f67393140676d61696c2e636f6d273b0a20202020765f61646d696e5f696420555549443b0a424547494e0a20202020765f61646d696e5f6964203a3d20617574682e75696428293b0a202020200a202020202d2d20476574207573657220656d61696c0a2020202053454c45435420656d61696c20494e544f20765f757365725f656d61696c2046524f4d20617574682e7573657273205748455245206964203d20705f757365725f69643b0a0a202020202d2d2053757065722041646d696e2070726f74656374696f6e0a20202020494620765f757365725f656d61696c203d20765f73757065725f61646d696e5f656d61696c20414e4420705f69735f61646d696e203d2046414c5345205448454e0a2020202020202020524149534520455843455054494f4e202753c3bc7065722061646d696e207965746b697369206b616c64c4b172c4b16c616d617a2e273b0a20202020454e442049463b0a0a202020202d2d20312e20557064617465207075626c69632e70726f66696c65730a20202020555044415445207075626c69632e70726f66696c65730a202020205345542069735f61646d696e203d20705f69735f61646d696e0a202020205748455245206964203d20705f757365725f69643b0a0a202020202d2d20322e2055706461746520617574682e7573657273206d657461646174610a2020202055504441544520617574682e75736572730a20202020534554200a20202020202020207261775f6170705f6d6574615f64617461203d207261775f6170705f6d6574615f64617461207c7c206a736f6e625f6275696c645f6f626a656374282769735f61646d696e272c20705f69735f61646d696e292c0a20202020202020207261775f757365725f6d6574615f64617461203d207261775f757365725f6d6574615f64617461207c7c206a736f6e625f6275696c645f6f626a656374282769735f61646d696e272c20705f69735f61646d696e290a202020205748455245206964203d20705f757365725f69643b0a0a202020202d2d20332e204c6f672074686520616374696f6e0a20202020494e5345525420494e544f207075626c69632e61646d696e5f61756469745f6c6f67202861646d696e5f757365725f69642c20616374696f6e2c207461726765745f7461626c652c207461726765745f69642c2064657461696c73290a2020202056414c55455320280a2020202020202020765f61646d696e5f69642c200a202020202020202043415345205748454e20705f69735f61646d696e205448454e202750524f4d4f5445445f544f5f41444d494e2720454c5345202744454d4f5445445f46524f4d5f41444d494e2720454e442c0a20202020202020202770726f66696c6573272c0a2020202020202020705f757365725f69642c0a20202020202020206a736f6e625f6275696c645f6f626a6563742827656d61696c272c20765f757365725f656d61696c290a20202020293b0a454e443b0a2424"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users can insert own profile\" for relation \"public.profiles\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Users can insert own profile" for relation "public.profiles" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260207165342_performance_and_logging_optimization.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Performance Optimization: Adding Indexes\nCREATE INDEX IF NOT EXISTS idx_orders_user_id ON public.orders(user_id)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_orders_status ON public.orders(status)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_addresses_user_id ON public.addresses(user_id)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Logging Optimization: Enhanced admin function with audit trails\nCREATE OR REPLACE FUNCTION public.admin_update_order_status(\n    p_order_id UUID,\n    p_new_status TEXT\n)\nRETURNS BOOLEAN AS $$\nDECLARE\n    v_old_status TEXT;\nBEGIN\n    -- Admin check\n    IF NOT public.is_admin_user() THEN\n        RAISE EXCEPTION 'Unauthorized: Admin permission required';\n    END IF;\n\n    -- Get old status for logging\n    SELECT status INTO v_old_status FROM public.orders WHERE id = p_order_id;\n\n    -- Validate status\n    IF p_new_status NOT IN ('pending', 'processing', 'shipped', 'delivered', 'cancelled') THEN\n        RAISE EXCEPTION 'Invalid status: %', p_new_status;\n    END IF;\n\n    -- Update order\n    UPDATE public.orders\n    SET status = p_new_status, updated_at = NOW()\n    WHERE id = p_order_id;\n\n    -- Insert into audit log if update was successful\n    IF FOUND THEN\n        INSERT INTO public.admin_audit_log (admin_user_id, action, target_table, target_id, details)\n        VALUES (\n            auth.uid(), \n            'update_order_status', \n            'orders', \n            p_order_id, \n            jsonb_build_object('old_status', v_old_status, 'new_status', p_new_status)\n        );\n    END IF;\n\n    RETURN FOUND;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"COMMENT ON FUNCTION public.admin_update_order_status IS 'Admin-only: Updates order status and logs the action for auditing.'","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260207165342"},{"text":"performance_and_logging_optimization"},{"binary":"0000000100000000000000190000000500000001000000732d2d20506572666f726d616e6365204f7074696d697a6174696f6e3a20416464696e6720496e64657865730a43524541544520494e444558204946204e4f5420455849535453206964785f6f72646572735f757365725f6964204f4e207075626c69632e6f726465727328757365725f6964290000004543524541544520494e444558204946204e4f5420455849535453206964785f6f72646572735f737461747573204f4e207075626c69632e6f726465727328737461747573290000004d43524541544520494e444558204946204e4f5420455849535453206964785f6164647265737365735f757365725f6964204f4e207075626c69632e61646472657373657328757365725f696429000004f12d2d204c6f6767696e67204f7074696d697a6174696f6e3a20456e68616e6365642061646d696e2066756e6374696f6e207769746820617564697420747261696c730a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e61646d696e5f7570646174655f6f726465725f737461747573280a20202020705f6f726465725f696420555549442c0a20202020705f6e65775f73746174757320544558540a290a52455455524e5320424f4f4c45414e2041532024240a4445434c4152450a20202020765f6f6c645f73746174757320544558543b0a424547494e0a202020202d2d2041646d696e20636865636b0a202020204946204e4f54207075626c69632e69735f61646d696e5f757365722829205448454e0a2020202020202020524149534520455843455054494f4e2027556e617574686f72697a65643a2041646d696e207065726d697373696f6e207265717569726564273b0a20202020454e442049463b0a0a202020202d2d20476574206f6c642073746174757320666f72206c6f6767696e670a2020202053454c4543542073746174757320494e544f20765f6f6c645f7374617475732046524f4d207075626c69632e6f7264657273205748455245206964203d20705f6f726465725f69643b0a0a202020202d2d2056616c6964617465207374617475730a20202020494620705f6e65775f737461747573204e4f5420494e20282770656e64696e67272c202770726f63657373696e67272c202773686970706564272c202764656c697665726564272c202763616e63656c6c65642729205448454e0a2020202020202020524149534520455843455054494f4e2027496e76616c6964207374617475733a2025272c20705f6e65775f7374617475733b0a20202020454e442049463b0a0a202020202d2d20557064617465206f726465720a20202020555044415445207075626c69632e6f72646572730a2020202053455420737461747573203d20705f6e65775f7374617475732c20757064617465645f6174203d204e4f5728290a202020205748455245206964203d20705f6f726465725f69643b0a0a202020202d2d20496e7365727420696e746f206175646974206c6f672069662075706461746520776173207375636365737366756c0a20202020494620464f554e44205448454e0a2020202020202020494e5345525420494e544f207075626c69632e61646d696e5f61756469745f6c6f67202861646d696e5f757365725f69642c20616374696f6e2c207461726765745f7461626c652c207461726765745f69642c2064657461696c73290a202020202020202056414c55455320280a202020202020202020202020617574682e75696428292c200a202020202020202020202020277570646174655f6f726465725f737461747573272c200a202020202020202020202020276f7264657273272c200a202020202020202020202020705f6f726465725f69642c200a2020202020202020202020206a736f6e625f6275696c645f6f626a65637428276f6c645f737461747573272c20765f6f6c645f7374617475732c20276e65775f737461747573272c20705f6e65775f737461747573290a2020202020202020293b0a20202020454e442049463b0a0a2020202052455455524e20464f554e443b0a454e443b0a2424204c414e475541474520706c706773716c20534543555249545920444546494e45520000007c434f4d4d454e54204f4e2046554e4354494f4e207075626c69632e61646d696e5f7570646174655f6f726465725f737461747573204953202741646d696e2d6f6e6c793a2055706461746573206f726465722073746174757320616e64206c6f67732074686520616374696f6e20666f72206175646974696e672e27"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260207165420_drop_old_admin_functions.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP FUNCTION IF EXISTS public.admin_update_order_status(UUID, TEXT)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP FUNCTION IF EXISTS public.admin_update_order_status(UUID, TEXT, TEXT)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260207165420"},{"text":"drop_old_admin_functions"},{"binary":"00000001000000000000001900000002000000010000004444524f502046554e4354494f4e20494620455849535453207075626c69632e61646d696e5f7570646174655f6f726465725f73746174757328555549442c2054455854290000004a44524f502046554e4354494f4e20494620455849535453207075626c69632e61646d696e5f7570646174655f6f726465725f73746174757328555549442c20544558542c205445585429"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"function public.admin_update_order_status(uuid,text,text) does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): function public.admin_update_order_status(uuid,text,text) does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260207165431_comprehensive_admin_order_management_v2.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Comprehensive Admin Order Update Function\nCREATE OR REPLACE FUNCTION public.admin_update_order_status(\n    p_order_id UUID,\n    p_new_status TEXT,\n    p_note TEXT DEFAULT NULL\n)\nRETURNS BOOLEAN AS $$\nDECLARE\n    v_old_status TEXT;\n    v_order_details JSONB;\n    v_payment_status TEXT;\n    v_item RECORD;\nBEGIN\n    -- 1. Admin check\n    IF NOT public.is_admin_user() THEN\n        RAISE EXCEPTION 'Unauthorized: Admin permission required';\n    END IF;\n\n    -- 2. Fetch current order data\n    SELECT status, order_details, payment_status INTO v_old_status, v_order_details, v_payment_status \n    FROM public.orders WHERE id = p_order_id;\n\n    IF NOT FOUND THEN\n        RAISE EXCEPTION 'Order not found';\n    END IF;\n\n    -- 3. Transition validation\n    IF v_old_status = 'cancelled' THEN\n        RAISE EXCEPTION 'Cancelled orders cannot be updated';\n    END IF;\n\n    IF p_new_status NOT IN ('pending', 'processing', 'preparing', 'shipped', 'delivered', 'cancelled') THEN\n        RAISE EXCEPTION 'Invalid status: %', p_new_status;\n    END IF;\n\n    -- 4. Cancellation Logic (Stock Restore)\n    IF p_new_status = 'cancelled' THEN\n        -- Refund if paid\n        IF v_payment_status = 'paid' THEN\n            UPDATE public.orders SET payment_status = 'refunded' WHERE id = p_order_id;\n        END IF;\n\n        -- Restore stock for items\n        FOR v_item IN SELECT * FROM jsonb_to_recordset(v_order_details-\u003e'items') AS x(product_id UUID, quantity INTEGER) LOOP\n            IF v_item.product_id IS NOT NULL THEN\n                BEGIN\n                    PERFORM public.restore_stock(v_item.product_id, v_item.quantity);\n                EXCEPTION WHEN OTHERS THEN\n                    UPDATE public.products \n                    SET stock = stock + v_item.quantity, \n                        updated_at = NOW() \n                    WHERE id = v_item.product_id;\n                END;\n            END IF;\n        END LOOP;\n        \n        -- Update reason\n        UPDATE public.orders SET cancellation_reason = p_note WHERE id = p_order_id;\n    END IF;\n\n    -- 5. Delivery Logic\n    IF p_new_status = 'delivered' AND v_old_status != 'delivered' THEN\n        FOR v_item IN SELECT * FROM jsonb_to_recordset(v_order_details-\u003e'items') AS x(product_id UUID, quantity INTEGER) LOOP\n            IF v_item.product_id IS NOT NULL THEN\n                BEGIN\n                    PERFORM public.finalize_reservation(v_item.product_id, v_item.quantity);\n                EXCEPTION WHEN OTHERS THEN\n                    NULL;\n                END;\n            END IF;\n        END LOOP;\n    END IF;\n\n    -- 6. Update Order\n    UPDATE public.orders\n    SET status = p_new_status, updated_at = NOW()\n    WHERE id = p_order_id;\n\n    -- 7. Insert into Order Status History\n    IF EXISTS (SELECT FROM information_schema.tables WHERE table_name = 'order_status_history') THEN\n        INSERT INTO public.order_status_history (order_id, status, note, created_by)\n        VALUES (p_order_id, p_new_status, p_note, auth.uid());\n    END IF;\n\n    -- 8. Insert into Admin Audit Log\n    INSERT INTO public.admin_audit_log (admin_user_id, action, target_table, target_id, details)\n    VALUES (\n        auth.uid(), \n        'update_order_status', \n        'orders', \n        p_order_id, \n        jsonb_build_object('old_status', v_old_status, 'new_status', p_new_status, 'note', p_note)\n    );\n\n    RETURN FOUND;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260207165431"},{"text":"comprehensive_admin_order_management_v2"},{"binary":"000000010000000000000019000000010000000100000d572d2d20436f6d70726568656e736976652041646d696e204f72646572205570646174652046756e6374696f6e0a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e61646d696e5f7570646174655f6f726465725f737461747573280a20202020705f6f726465725f696420555549442c0a20202020705f6e65775f73746174757320544558542c0a20202020705f6e6f746520544558542044454641554c54204e554c4c0a290a52455455524e5320424f4f4c45414e2041532024240a4445434c4152450a20202020765f6f6c645f73746174757320544558543b0a20202020765f6f726465725f64657461696c73204a534f4e423b0a20202020765f7061796d656e745f73746174757320544558543b0a20202020765f6974656d205245434f52443b0a424547494e0a202020202d2d20312e2041646d696e20636865636b0a202020204946204e4f54207075626c69632e69735f61646d696e5f757365722829205448454e0a2020202020202020524149534520455843455054494f4e2027556e617574686f72697a65643a2041646d696e207065726d697373696f6e207265717569726564273b0a20202020454e442049463b0a0a202020202d2d20322e2046657463682063757272656e74206f7264657220646174610a2020202053454c454354207374617475732c206f726465725f64657461696c732c207061796d656e745f73746174757320494e544f20765f6f6c645f7374617475732c20765f6f726465725f64657461696c732c20765f7061796d656e745f737461747573200a2020202046524f4d207075626c69632e6f7264657273205748455245206964203d20705f6f726465725f69643b0a0a202020204946204e4f5420464f554e44205448454e0a2020202020202020524149534520455843455054494f4e20274f72646572206e6f7420666f756e64273b0a20202020454e442049463b0a0a202020202d2d20332e205472616e736974696f6e2076616c69646174696f6e0a20202020494620765f6f6c645f737461747573203d202763616e63656c6c656427205448454e0a2020202020202020524149534520455843455054494f4e202743616e63656c6c6564206f72646572732063616e6e6f742062652075706461746564273b0a20202020454e442049463b0a0a20202020494620705f6e65775f737461747573204e4f5420494e20282770656e64696e67272c202770726f63657373696e67272c2027707265706172696e67272c202773686970706564272c202764656c697665726564272c202763616e63656c6c65642729205448454e0a2020202020202020524149534520455843455054494f4e2027496e76616c6964207374617475733a2025272c20705f6e65775f7374617475733b0a20202020454e442049463b0a0a202020202d2d20342e2043616e63656c6c6174696f6e204c6f676963202853746f636b20526573746f7265290a20202020494620705f6e65775f737461747573203d202763616e63656c6c656427205448454e0a20202020202020202d2d20526566756e6420696620706169640a2020202020202020494620765f7061796d656e745f737461747573203d20277061696427205448454e0a202020202020202020202020555044415445207075626c69632e6f726465727320534554207061796d656e745f737461747573203d2027726566756e64656427205748455245206964203d20705f6f726465725f69643b0a2020202020202020454e442049463b0a0a20202020202020202d2d20526573746f72652073746f636b20666f72206974656d730a2020202020202020464f5220765f6974656d20494e2053454c454354202a2046524f4d206a736f6e625f746f5f7265636f726473657428765f6f726465725f64657461696c732d3e276974656d73272920415320782870726f647563745f696420555549442c207175616e7469747920494e544547455229204c4f4f500a202020202020202020202020494620765f6974656d2e70726f647563745f6964204953204e4f54204e554c4c205448454e0a20202020202020202020202020202020424547494e0a2020202020202020202020202020202020202020504552464f524d207075626c69632e726573746f72655f73746f636b28765f6974656d2e70726f647563745f69642c20765f6974656d2e7175616e74697479293b0a20202020202020202020202020202020455843455054494f4e205748454e204f5448455253205448454e0a2020202020202020202020202020202020202020555044415445207075626c69632e70726f6475637473200a20202020202020202020202020202020202020205345542073746f636b203d2073746f636b202b20765f6974656d2e7175616e746974792c200a202020202020202020202020202020202020202020202020757064617465645f6174203d204e4f572829200a20202020202020202020202020202020202020205748455245206964203d20765f6974656d2e70726f647563745f69643b0a20202020202020202020202020202020454e443b0a202020202020202020202020454e442049463b0a2020202020202020454e44204c4f4f503b0a20202020202020200a20202020202020202d2d2055706461746520726561736f6e0a2020202020202020555044415445207075626c69632e6f7264657273205345542063616e63656c6c6174696f6e5f726561736f6e203d20705f6e6f7465205748455245206964203d20705f6f726465725f69643b0a20202020454e442049463b0a0a202020202d2d20352e2044656c6976657279204c6f6769630a20202020494620705f6e65775f737461747573203d202764656c6976657265642720414e4420765f6f6c645f73746174757320213d202764656c69766572656427205448454e0a2020202020202020464f5220765f6974656d20494e2053454c454354202a2046524f4d206a736f6e625f746f5f7265636f726473657428765f6f726465725f64657461696c732d3e276974656d73272920415320782870726f647563745f696420555549442c207175616e7469747920494e544547455229204c4f4f500a202020202020202020202020494620765f6974656d2e70726f647563745f6964204953204e4f54204e554c4c205448454e0a20202020202020202020202020202020424547494e0a2020202020202020202020202020202020202020504552464f524d207075626c69632e66696e616c697a655f7265736572766174696f6e28765f6974656d2e70726f647563745f69642c20765f6974656d2e7175616e74697479293b0a20202020202020202020202020202020455843455054494f4e205748454e204f5448455253205448454e0a20202020202020202020202020202020202020204e554c4c3b0a20202020202020202020202020202020454e443b0a202020202020202020202020454e442049463b0a2020202020202020454e44204c4f4f503b0a20202020454e442049463b0a0a202020202d2d20362e20557064617465204f726465720a20202020555044415445207075626c69632e6f72646572730a2020202053455420737461747573203d20705f6e65775f7374617475732c20757064617465645f6174203d204e4f5728290a202020205748455245206964203d20705f6f726465725f69643b0a0a202020202d2d20372e20496e7365727420696e746f204f726465722053746174757320486973746f72790a20202020494620455849535453202853454c4543542046524f4d20696e666f726d6174696f6e5f736368656d612e7461626c6573205748455245207461626c655f6e616d65203d20276f726465725f7374617475735f686973746f72792729205448454e0a2020202020202020494e5345525420494e544f207075626c69632e6f726465725f7374617475735f686973746f727920286f726465725f69642c207374617475732c206e6f74652c20637265617465645f6279290a202020202020202056414c5545532028705f6f726465725f69642c20705f6e65775f7374617475732c20705f6e6f74652c20617574682e7569642829293b0a20202020454e442049463b0a0a202020202d2d20382e20496e7365727420696e746f2041646d696e204175646974204c6f670a20202020494e5345525420494e544f207075626c69632e61646d696e5f61756469745f6c6f67202861646d696e5f757365725f69642c20616374696f6e2c207461726765745f7461626c652c207461726765745f69642c2064657461696c73290a2020202056414c55455320280a2020202020202020617574682e75696428292c200a2020202020202020277570646174655f6f726465725f737461747573272c200a2020202020202020276f7264657273272c200a2020202020202020705f6f726465725f69642c200a20202020202020206a736f6e625f6275696c645f6f626a65637428276f6c645f737461747573272c20765f6f6c645f7374617475732c20276e65775f737461747573272c20705f6e65775f7374617475732c20276e6f7465272c20705f6e6f7465290a20202020293b0a0a2020202052455455524e20464f554e443b0a454e443b0a2424204c414e475541474520706c706773716c20534543555249545920444546494e4552"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260207165508_universal_admin_auditing.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Universal Admin Auditing Function\nCREATE OR REPLACE FUNCTION public.log_admin_action()\nRETURNS TRIGGER AS $$\nDECLARE\n    v_is_admin BOOLEAN;\nBEGIN\n    -- Check if the user is an admin\n    IF auth.uid() IS NOT NULL THEN\n        SELECT is_admin INTO v_is_admin FROM public.profiles WHERE id = auth.uid();\n\n        IF v_is_admin = TRUE THEN\n            INSERT INTO public.admin_audit_log (admin_user_id, action, target_table, target_id, details)\n            VALUES (\n                auth.uid(), \n                TG_OP, \n                TG_TABLE_NAME, \n                COALESCE(NEW.id, OLD.id), \n                jsonb_build_object(\n                    'old_data', (CASE WHEN TG_OP = 'INSERT' THEN NULL ELSE to_jsonb(OLD) END),\n                    'new_data', (CASE WHEN TG_OP = 'DELETE' THEN NULL ELSE to_jsonb(NEW) END)\n                )\n            );\n        END IF;\n    END IF;\n    \n    IF TG_OP = 'DELETE' THEN\n        RETURN OLD;\n    END IF;\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Apply triggers to products\nDROP TRIGGER IF EXISTS tr_audit_products ON public.products","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TRIGGER tr_audit_products\n    AFTER INSERT OR UPDATE OR DELETE ON public.products\n    FOR EACH ROW EXECUTE FUNCTION public.log_admin_action()","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Apply triggers to orders (for direct updates like tracking number)\nDROP TRIGGER IF EXISTS tr_audit_orders_direct ON public.orders","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TRIGGER tr_audit_orders_direct\n    AFTER UPDATE OR DELETE ON public.orders\n    FOR EACH ROW \n    WHEN (pg_trigger_depth() = 0) -- Avoid double logging during RPC calls that already log\n    EXECUTE FUNCTION public.log_admin_action()","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"trigger \"tr_audit_products\" for relation \"public.products\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
NOTICE (00000): trigger "tr_audit_products" for relation "public.products" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Apply triggers to promo_codes\nDROP TRIGGER IF EXISTS tr_audit_promo_codes ON public.promo_codes","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TRIGGER tr_audit_promo_codes\n    AFTER INSERT OR UPDATE OR DELETE ON public.promo_codes\n    FOR EACH ROW EXECUTE FUNCTION public.log_admin_action()","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"trigger \"tr_audit_orders_direct\" for relation \"public.orders\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"trigger \"tr_audit_promo_codes\" for relation \"public.promo_codes\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): trigger "tr_audit_orders_direct" for relation "public.orders" does not exist, skipping
NOTICE (00000): trigger "tr_audit_promo_codes" for relation "public.promo_codes" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260207165508"},{"text":"universal_admin_auditing"},{"binary":"0000000100000000000000190000000700000001000003ec2d2d20556e6976657273616c2041646d696e204175646974696e672046756e6374696f6e0a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e6c6f675f61646d696e5f616374696f6e28290a52455455524e5320545249474745522041532024240a4445434c4152450a20202020765f69735f61646d696e20424f4f4c45414e3b0a424547494e0a202020202d2d20436865636b20696620746865207573657220697320616e2061646d696e0a20202020494620617574682e7569642829204953204e4f54204e554c4c205448454e0a202020202020202053454c4543542069735f61646d696e20494e544f20765f69735f61646d696e2046524f4d207075626c69632e70726f66696c6573205748455245206964203d20617574682e75696428293b0a0a2020202020202020494620765f69735f61646d696e203d2054525545205448454e0a202020202020202020202020494e5345525420494e544f207075626c69632e61646d696e5f61756469745f6c6f67202861646d696e5f757365725f69642c20616374696f6e2c207461726765745f7461626c652c207461726765745f69642c2064657461696c73290a20202020202020202020202056414c55455320280a20202020202020202020202020202020617574682e75696428292c200a2020202020202020202020202020202054475f4f502c200a2020202020202020202020202020202054475f5441424c455f4e414d452c200a20202020202020202020202020202020434f414c45534345284e45572e69642c204f4c442e6964292c200a202020202020202020202020202020206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202020202020202020276f6c645f64617461272c202843415345205748454e2054475f4f50203d2027494e5345525427205448454e204e554c4c20454c534520746f5f6a736f6e62284f4c442920454e44292c0a2020202020202020202020202020202020202020276e65775f64617461272c202843415345205748454e2054475f4f50203d202744454c45544527205448454e204e554c4c20454c534520746f5f6a736f6e62284e45572920454e44290a20202020202020202020202020202020290a202020202020202020202020293b0a2020202020202020454e442049463b0a20202020454e442049463b0a202020200a2020202049462054475f4f50203d202744454c45544527205448454e0a202020202020202052455455524e204f4c443b0a20202020454e442049463b0a2020202052455455524e204e45573b0a454e443b0a2424204c414e475541474520706c706773716c20534543555249545920444546494e4552000000592d2d204170706c7920747269676765727320746f2070726f64756374730a44524f502054524947474552204946204558495354532074725f61756469745f70726f6475637473204f4e207075626c69632e70726f64756374730000009443524541544520545249474745522074725f61756469745f70726f64756374730a20202020414654455220494e53455254204f5220555044415445204f522044454c455445204f4e207075626c69632e70726f64756374730a20202020464f52204541434820524f5720455845435554452046554e4354494f4e207075626c69632e6c6f675f61646d696e5f616374696f6e2829000000842d2d204170706c7920747269676765727320746f206f72646572732028666f72206469726563742075706461746573206c696b6520747261636b696e67206e756d626572290a44524f502054524947474552204946204558495354532074725f61756469745f6f72646572735f646972656374204f4e207075626c69632e6f7264657273000000ee43524541544520545249474745522074725f61756469745f6f72646572735f6469726563740a20202020414654455220555044415445204f522044454c455445204f4e207075626c69632e6f72646572730a20202020464f52204541434820524f57200a202020205748454e202870675f747269676765725f64657074682829203d203029202d2d2041766f696420646f75626c65206c6f6767696e6720647572696e67205250432063616c6c73207468617420616c7265616479206c6f670a20202020455845435554452046554e4354494f4e207075626c69632e6c6f675f61646d696e5f616374696f6e2829000000622d2d204170706c7920747269676765727320746f2070726f6d6f5f636f6465730a44524f502054524947474552204946204558495354532074725f61756469745f70726f6d6f5f636f646573204f4e207075626c69632e70726f6d6f5f636f6465730000009a43524541544520545249474745522074725f61756469745f70726f6d6f5f636f6465730a20202020414654455220494e53455254204f5220555044415445204f522044454c455445204f4e207075626c69632e70726f6d6f5f636f6465730a20202020464f52204541434820524f5720455845435554452046554e4354494f4e207075626c69632e6c6f675f61646d696e5f616374696f6e2829"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260207165535_jsonb_optimization.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Performance Optimization: Indexing JSONB Fields\n-- This allows fast filtering and sorting by order total in the admin panel\nCREATE INDEX IF NOT EXISTS idx_orders_total_decimal ON public.orders USING btree (((order_details-\u003e\u003e'total')::decimal))","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- GIN index for general JSONB search capability\nCREATE INDEX IF NOT EXISTS idx_orders_details_gin ON public.orders USING gin (order_details)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260207165535"},{"text":"jsonb_optimization"},{"binary":"0000000100000000000000190000000200000001000000f62d2d20506572666f726d616e6365204f7074696d697a6174696f6e3a20496e646578696e67204a534f4e42204669656c64730a2d2d205468697320616c6c6f777320666173742066696c746572696e6720616e6420736f7274696e67206279206f7264657220746f74616c20696e207468652061646d696e2070616e656c0a43524541544520494e444558204946204e4f5420455849535453206964785f6f72646572735f746f74616c5f646563696d616c204f4e207075626c69632e6f7264657273205553494e47206274726565202828286f726465725f64657461696c732d3e3e27746f74616c27293a3a646563696d616c29290000008d2d2d2047494e20696e64657820666f722067656e6572616c204a534f4e4220736561726368206361706162696c6974790a43524541544520494e444558204946204e4f5420455849535453206964785f6f72646572735f64657461696c735f67696e204f4e207075626c69632e6f7264657273205553494e472067696e20286f726465725f64657461696c7329"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260207192906_add_promo_code_rate_limiting.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Create a table to track failed promo code attempts\nCREATE TABLE IF NOT EXISTS public.promo_code_attempts (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    user_id UUID REFERENCES auth.users(id),\n    ip_address TEXT,\n    attempt_timestamp TIMESTAMPTZ DEFAULT now()\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Index for faster cleanup and checking\nCREATE INDEX IF NOT EXISTS idx_promo_attempts_timestamp ON public.promo_code_attempts (attempt_timestamp)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_promo_attempts_user ON public.promo_code_attempts (user_id)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Updated verify_promo_code with rate limiting\nCREATE OR REPLACE FUNCTION public.verify_promo_code(p_code text)\n RETURNS jsonb\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public', 'pg_catalog'\nAS $function$\nDECLARE\n    v_promo RECORD;\n    v_now timestamptz := now();\n    v_user_id UUID := auth.uid();\n    v_failed_count integer;\n    v_lockout_minutes integer := 10;\n    v_max_attempts integer := 5;\nBEGIN\n    -- 1. Check rate limit (brute force protection)\n    -- We check attempts in the last 10 minutes\n    SELECT count(*) INTO v_failed_count\n    FROM promo_code_attempts\n    WHERE user_id = v_user_id\n    AND attempt_timestamp \u003e v_now - (v_lockout_minutes || ' minutes')::interval;\n\n    IF v_failed_count \u003e= v_max_attempts THEN\n        RETURN jsonb_build_object(\n            'valid', false, \n            'message', 'ok fazla hatal deneme. Ltfen ' || v_lockout_minutes || ' dakika sonra tekrar deneyin.'\n        );\n    END IF;\n\n    -- 2. Lookup promo code\n    SELECT * INTO v_promo\n    FROM promo_codes\n    WHERE code ILIKE p_code\n    AND is_active = true;\n\n    -- 3. Handle failure\n    IF v_promo IS NULL THEN\n        -- Log failed attempt\n        INSERT INTO promo_code_attempts (user_id) VALUES (v_user_id);\n        \n        RETURN jsonb_build_object('valid', false, 'message', 'Promosyon kodu geerli deil');\n    END IF;\n\n    -- 4. Check dates\n    IF v_promo.start_date IS NOT NULL AND v_promo.start_date \u003e v_now THEN\n        RETURN jsonb_build_object('valid', false, 'message', 'Promosyon kodu henz balamad');\n    END IF;\n\n    IF v_promo.end_date IS NOT NULL AND v_promo.end_date \u003c v_now THEN\n        RETURN jsonb_build_object('valid', false, 'message', 'Promosyon kodu sresi doldu');\n    END IF;\n\n    -- 5. Check usage limits\n    IF v_promo.usage_limit \u003e 0 AND v_promo.usage_count \u003e= v_promo.usage_limit THEN\n        RETURN jsonb_build_object('valid', false, 'message', 'Promosyon kodu kullanm limiti doldu');\n    END IF;\n\n    -- 6. Clean up old attempts for this user upon success (optional, but keeps table small)\n    DELETE FROM promo_code_attempts WHERE user_id = v_user_id;\n\n    -- 7. Success\n    RETURN jsonb_build_object(\n        'valid', true,\n        'message', 'Promosyon kodu geerli',\n        'discount_type', v_promo.discount_type,\n        'discount_value', v_promo.discount_value,\n        'min_order_amount', v_promo.min_order_amount,\n        'max_discount_amount', v_promo.max_discount_amount\n    );\nEND;\n$function$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Cleanup cron-like task (to be run periodically or handled by Supabase)\n-- DELETE FROM public.promo_code_attempts WHERE attempt_timestamp \u003c now() - interval '24 hours';","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260207192906"},{"text":"add_promo_code_rate_limiting"},{"binary":"0000000100000000000000190000000500000001000001132d2d204372656174652061207461626c6520746f20747261636b206661696c65642070726f6d6f20636f646520617474656d7074730a435245415445205441424c45204946204e4f5420455849535453207075626c69632e70726f6d6f5f636f64655f617474656d70747320280a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0a20202020757365725f69642055554944205245464552454e43455320617574682e7573657273286964292c0a2020202069705f6164647265737320544558542c0a20202020617474656d70745f74696d657374616d702054494d455354414d50545a2044454641554c54206e6f7728290a29000000922d2d20496e64657820666f722066617374657220636c65616e757020616e6420636865636b696e670a43524541544520494e444558204946204e4f5420455849535453206964785f70726f6d6f5f617474656d7074735f74696d657374616d70204f4e207075626c69632e70726f6d6f5f636f64655f617474656d7074732028617474656d70745f74696d657374616d70290000005a43524541544520494e444558204946204e4f5420455849535453206964785f70726f6d6f5f617474656d7074735f75736572204f4e207075626c69632e70726f6d6f5f636f64655f617474656d7074732028757365725f696429000009a82d2d2055706461746564207665726966795f70726f6d6f5f636f646520776974682072617465206c696d6974696e670a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e7665726966795f70726f6d6f5f636f646528705f636f64652074657874290a2052455455524e53206a736f6e620a204c414e475541474520706c706773716c0a20534543555249545920444546494e45520a20534554207365617263685f7061746820544f20277075626c6963272c202770675f636174616c6f67270a4153202466756e6374696f6e240a4445434c4152450a20202020765f70726f6d6f205245434f52443b0a20202020765f6e6f772074696d657374616d70747a203a3d206e6f7728293b0a20202020765f757365725f69642055554944203a3d20617574682e75696428293b0a20202020765f6661696c65645f636f756e7420696e74656765723b0a20202020765f6c6f636b6f75745f6d696e7574657320696e7465676572203a3d2031303b0a20202020765f6d61785f617474656d70747320696e7465676572203a3d20353b0a424547494e0a202020202d2d20312e20436865636b2072617465206c696d69742028627275746520666f7263652070726f74656374696f6e290a202020202d2d20576520636865636b20617474656d70747320696e20746865206c617374203130206d696e757465730a2020202053454c45435420636f756e74282a2920494e544f20765f6661696c65645f636f756e740a2020202046524f4d2070726f6d6f5f636f64655f617474656d7074730a20202020574845524520757365725f6964203d20765f757365725f69640a20202020414e4420617474656d70745f74696d657374616d70203e20765f6e6f77202d2028765f6c6f636b6f75745f6d696e75746573207c7c2027206d696e7574657327293a3a696e74657276616c3b0a0a20202020494620765f6661696c65645f636f756e74203e3d20765f6d61785f617474656d707473205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202776616c6964272c2066616c73652c200a202020202020202020202020276d657373616765272c2027c3876f6b2066617a6c6120686174616cc4b12064656e656d652e204cc3bc7466656e2027207c7c20765f6c6f636b6f75745f6d696e75746573207c7c20272064616b696b6120736f6e72612074656b7261722064656e6579696e2e270a2020202020202020293b0a20202020454e442049463b0a0a202020202d2d20322e204c6f6f6b75702070726f6d6f20636f64650a2020202053454c454354202a20494e544f20765f70726f6d6f0a2020202046524f4d2070726f6d6f5f636f6465730a20202020574845524520636f646520494c494b4520705f636f64650a20202020414e442069735f616374697665203d20747275653b0a0a202020202d2d20332e2048616e646c65206661696c7572650a20202020494620765f70726f6d6f204953204e554c4c205448454e0a20202020202020202d2d204c6f67206661696c656420617474656d70740a2020202020202020494e5345525420494e544f2070726f6d6f5f636f64655f617474656d7074732028757365725f6964292056414c5545532028765f757365725f6964293b0a20202020202020200a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282776616c6964272c2066616c73652c20276d657373616765272c202750726f6d6f73796f6e206b6f6475206765c3a765726c69206465c49f696c27293b0a20202020454e442049463b0a0a202020202d2d20342e20436865636b2064617465730a20202020494620765f70726f6d6f2e73746172745f64617465204953204e4f54204e554c4c20414e4420765f70726f6d6f2e73746172745f64617465203e20765f6e6f77205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282776616c6964272c2066616c73652c20276d657373616765272c202750726f6d6f73796f6e206b6f64752068656ec3bc7a206261c59f6c616d6164c4b127293b0a20202020454e442049463b0a0a20202020494620765f70726f6d6f2e656e645f64617465204953204e4f54204e554c4c20414e4420765f70726f6d6f2e656e645f64617465203c20765f6e6f77205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282776616c6964272c2066616c73652c20276d657373616765272c202750726f6d6f73796f6e206b6f64752073c3bc7265736920646f6c647527293b0a20202020454e442049463b0a0a202020202d2d20352e20436865636b207573616765206c696d6974730a20202020494620765f70726f6d6f2e75736167655f6c696d6974203e203020414e4420765f70726f6d6f2e75736167655f636f756e74203e3d20765f70726f6d6f2e75736167655f6c696d6974205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282776616c6964272c2066616c73652c20276d657373616765272c202750726f6d6f73796f6e206b6f6475206b756c6c616ec4b16d206c696d69746920646f6c647527293b0a20202020454e442049463b0a0a202020202d2d20362e20436c65616e207570206f6c6420617474656d70747320666f72207468697320757365722075706f6e207375636365737320286f7074696f6e616c2c20627574206b65657073207461626c6520736d616c6c290a2020202044454c4554452046524f4d2070726f6d6f5f636f64655f617474656d70747320574845524520757365725f6964203d20765f757365725f69643b0a0a202020202d2d20372e20537563636573730a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202776616c6964272c20747275652c0a2020202020202020276d657373616765272c202750726f6d6f73796f6e206b6f6475206765c3a765726c69272c0a202020202020202027646973636f756e745f74797065272c20765f70726f6d6f2e646973636f756e745f747970652c0a202020202020202027646973636f756e745f76616c7565272c20765f70726f6d6f2e646973636f756e745f76616c75652c0a2020202020202020276d696e5f6f726465725f616d6f756e74272c20765f70726f6d6f2e6d696e5f6f726465725f616d6f756e742c0a2020202020202020276d61785f646973636f756e745f616d6f756e74272c20765f70726f6d6f2e6d61785f646973636f756e745f616d6f756e740a20202020293b0a454e443b0a2466756e6374696f6e24000000aa2d2d20436c65616e75702063726f6e2d6c696b65207461736b2028746f2062652072756e20706572696f646963616c6c79206f722068616e646c6564206279205375706162617365290a2d2d2044454c4554452046524f4d207075626c69632e70726f6d6f5f636f64655f617474656d70747320574845524520617474656d70745f74696d657374616d70203c206e6f772829202d20696e74657276616c2027323420686f757273273b"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"EmptyQueryResponse"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260207212515_security_audit_fixes.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Security Audit Fixes - 2026-02-08\n\n-- 1. Fix create_order for Race Conditions, IDOR, and Negative Quantity\nCREATE OR REPLACE FUNCTION create_order(\n    p_items JSONB,\n    p_shipping_address_id UUID,\n    p_payment_method TEXT,\n    p_promo_code TEXT DEFAULT NULL\n)\nRETURNS JSONB\nLANGUAGE plpgsql\nSECURITY DEFINER\nAS $$\nDECLARE\n    v_user_id UUID;\n    v_item JSONB;\n    v_product_id UUID;\n    v_product_name TEXT;\n    v_product_price DECIMAL(10,2);\n    v_product_stock INT;\n    v_qty INT;\n    v_item_subtotal DECIMAL(10,2);\n    v_total_subtotal DECIMAL(10,2) := 0;\n    v_total_vat DECIMAL(10,2) := 0;\n    v_shipping_cost DECIMAL(10,2);\n    v_final_total DECIMAL(10,2);\n    v_discount DECIMAL(10,2) := 0;\n    v_order_id UUID;\n    v_valid_items JSONB := '[]'::JSONB;\n    v_item_detail JSONB;\n    v_order_details JSONB;\n    v_bank_ref TEXT := NULL;\n    v_address_owner UUID;\n    v_promo_result JSON;\nBEGIN\n    -- 1. Get User ID\n    v_user_id := auth.uid();\n    IF v_user_id IS NULL THEN\n        RETURN jsonb_build_object('success', false, 'message', 'Oturum amanz gerekiyor');\n    END IF;\n\n    -- 2. Address Ownership Check (IDOR Security Fix)\n    SELECT user_id INTO v_address_owner FROM addresses WHERE id = p_shipping_address_id;\n    IF v_address_owner IS NULL OR v_address_owner != v_user_id THEN\n         RETURN jsonb_build_object('success', false, 'message', 'Geersiz adres seimi: Adres size ait deil.');\n    END IF;\n\n    -- 3. Iterate input items\n    FOR v_item IN SELECT * FROM jsonb_array_elements(p_items)\n    LOOP\n        v_product_id := (v_item-\u003e\u003e'product_id')::UUID;\n        v_qty := (v_item-\u003e\u003e'quantity')::INT;\n\n        -- Negative Quantity Check (Logic Security Fix)\n        IF v_qty \u003c= 0 THEN\n             RETURN jsonb_build_object('success', false, 'message', 'Geersiz rn miktar: 0 veya negatif olamaz.');\n        END IF;\n\n        -- Get product from DB WITH LOCK (Race Condition Fix)\n        SELECT id, name, price, stock \n        INTO v_product_id, v_product_name, v_product_price, v_product_stock\n        FROM products \n        WHERE id = v_product_id\n        FOR UPDATE; -- Critical: Locks the row\n        \n        IF NOT FOUND THEN\n             RETURN jsonb_build_object('success', false, 'message', 'rn bulunamad: ID ' || v_product_id);\n        END IF;\n\n        -- Check stock validity\n        IF v_product_stock \u003c v_qty THEN\n             RETURN jsonb_build_object('success', false, 'message', 'Yetersiz stok: ' || v_product_name);\n        END IF;\n\n        -- Calculate item totals using DB price\n        v_item_subtotal := v_product_price * v_qty;\n        v_total_subtotal := v_total_subtotal + v_item_subtotal;\n        \n        -- Build item detail\n        v_item_detail := jsonb_build_object(\n            'product_id', v_product_id,\n            'product_name', v_product_name,\n            'quantity', v_qty,\n            'unit_price', v_product_price,\n            'subtotal', v_item_subtotal\n        );\n        \n        v_valid_items := v_valid_items || v_item_detail;\n        \n    END LOOP;\n\n    -- 4. VAT (20%)\n    v_total_vat := v_total_subtotal * 0.20;\n\n    -- 5. Shipping\n    IF v_total_subtotal \u003e= 1500 THEN\n        v_shipping_cost := 0;\n    ELSE\n        v_shipping_cost := 49.90;\n    END IF;\n\n    -- 6. Promo Code (Backend Logic using verify_promo_code)\n    v_discount := 0; \n    IF p_promo_code IS NOT NULL AND length(p_promo_code) \u003e 0 THEN\n        BEGIN\n            -- Attempt to call verify_promo_code\n            SELECT verify_promo_code(p_promo_code) INTO v_promo_result;\n            \n            IF (v_promo_result-\u003e\u003e'valid')::boolean = true THEN\n                -- Check min order amount logic if applicable\n                 IF (v_promo_result-\u003e\u003e'discount_type') = 'percentage' THEN\n                     v_discount := (v_total_subtotal + v_total_vat) * ((v_promo_result-\u003e\u003e'discount_value')::decimal / 100);\n                     -- Max discount check\n                     IF (v_promo_result-\u003e\u003e'max_discount_amount') IS NOT NULL AND v_discount \u003e (v_promo_result-\u003e\u003e'max_discount_amount')::decimal THEN\n                         v_discount := (v_promo_result-\u003e\u003e'max_discount_amount')::decimal;\n                     END IF;\n                 ELSE\n                     v_discount := (v_promo_result-\u003e\u003e'discount_value')::decimal;\n                 END IF;\n            END IF;\n        EXCEPTION WHEN OTHERS THEN\n            v_discount := 0;\n        END;\n    END IF;\n\n    -- 7. Final Total\n    v_final_total := v_total_subtotal + v_total_vat + v_shipping_cost - v_discount;\n    IF v_final_total \u003c 0 THEN v_final_total := 0; END IF;\n\n    -- Bank Reference\n    IF p_payment_method = 'bank_transfer' THEN\n        v_bank_ref := 'BRV-' || to_char(NOW(), 'YYMMDD') || '-' || upper(substring(md5(random()::text) from 1 for 4));\n    END IF;\n\n    -- 8. Construct final order_details\n    v_order_details := jsonb_build_object(\n        'items', v_valid_items,\n        'subtotal', v_total_subtotal,\n        'vat_rate', 0.20,\n        'vat_amount', v_total_vat,\n        'shipping_cost', v_shipping_cost,\n        'total', v_final_total,\n        'promo_code', p_promo_code,\n        'discount', v_discount,\n        'bank_reference', v_bank_ref\n    );\n\n    -- 9. Insert Order\n    INSERT INTO orders (\n        user_id,\n        shipping_address_id,\n        payment_method,\n        status,\n        payment_status,\n        order_details\n    ) VALUES (\n        v_user_id,\n        p_shipping_address_id,\n        p_payment_method,\n        'pending', \n        CASE WHEN p_payment_method = 'credit_card' THEN 'paid' ELSE 'pending' END,\n        v_order_details\n    ) RETURNING id INTO v_order_id;\n    \n    -- 10. Insert Status History\n    BEGIN\n        INSERT INTO order_status_history (order_id, status, note, created_at)\n        VALUES (\n            v_order_id,\n            'pending',\n            CASE WHEN p_payment_method = 'credit_card' THEN 'Sipari alnd (Kredi Kart)' ELSE 'Sipari alnd (Havale/EFT Bekleniyor)' END,\n            NOW()\n        );\n    EXCEPTION WHEN OTHERS THEN NULL; END;\n\n    RETURN jsonb_build_object(\n        'success', true, \n        'order_id', v_order_id,\n        'total', v_final_total,\n        'shipping_cost', v_shipping_cost,\n        'bank_reference', v_bank_ref,\n        'message', 'Sipari baaryla oluturuldu'\n    );\n\nEXCEPTION WHEN OTHERS THEN\n    RETURN jsonb_build_object(\n        'success', false, \n        'message', 'Bir hata olutu: ' || SQLERRM\n    );\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Fix manage_inventory for Overflow/Underflow\nCREATE OR REPLACE FUNCTION manage_inventory() RETURNS TRIGGER AS $$\nDECLARE\n    item jsonb;\n    qty int;\n    prod_id uuid;\n    prod_name text;\n    target_pid uuid;\n    old_status text;\n    new_status text;\n    is_new_active boolean;\n    is_old_active boolean;\n    is_new_delivered boolean;\n    is_old_delivered boolean;\n    is_new_neutral boolean;\n    is_old_neutral boolean;\nBEGIN\n    IF (TG_OP = 'INSERT') THEN\n        old_status := NULL;\n        new_status := NEW.status;\n    ELSE\n        old_status := OLD.status;\n        new_status := NEW.status;\n    END IF;\n\n    -- Logic Groups\n    is_new_active := lower(new_status) IN ('pending', 'processing', 'preparing', 'shipped', 'beklemede', 'ileniyor', 'hazrlanyor', 'kargoda');\n    is_old_active := lower(old_status) IN ('pending', 'processing', 'preparing', 'shipped', 'beklemede', 'ileniyor', 'hazrlanyor', 'kargoda');\n    is_new_delivered := lower(new_status) IN ('delivered', 'teslim edildi');\n    is_old_delivered := lower(old_status) IN ('delivered', 'teslim edildi');\n    is_new_neutral := NOT is_new_active AND NOT is_new_delivered;\n    is_old_neutral := NOT is_old_active AND NOT is_old_delivered;\n\n    IF NEW.order_details-\u003e'items' IS NOT NULL THEN\n        FOR item IN SELECT * FROM jsonb_array_elements(NEW.order_details-\u003e'items')\n        LOOP\n            qty := (item-\u003e\u003e'quantity')::int;\n            prod_id := (item-\u003e\u003e'product_id')::uuid;\n            prod_name := item-\u003e\u003e'product_name';\n\n            -- Find Product\n            target_pid := NULL;\n            IF prod_id IS NOT NULL THEN\n                SELECT id FROM products WHERE id = prod_id INTO target_pid;\n            END IF; \n            IF target_pid IS NULL AND prod_name IS NOT NULL THEN\n                SELECT id FROM products WHERE name = prod_name LIMIT 1 INTO target_pid;\n            END IF;\n\n            IF target_pid IS NOT NULL THEN\n                \n                IF (TG_OP = 'INSERT') THEN\n                    -- Insert (Active)\n                    IF is_new_active THEN\n                        -- Check stock before update to prevent negative stock\n                        UPDATE products \n                        SET reserved_stock = COALESCE(reserved_stock, 0) + qty,\n                            stock = stock - qty\n                        WHERE id = target_pid AND stock \u003e= qty;\n                        \n                        -- If update failed (row not found due to stock \u003c qty), raise error\n                        IF NOT FOUND THEN\n                            RAISE EXCEPTION 'Stok yetersiz: %', prod_name;\n                        END IF;\n                    \n                    ELSIF is_new_delivered THEN\n                        UPDATE products SET stock = stock - qty WHERE id = target_pid AND stock \u003e= qty;\n                        IF NOT FOUND THEN RAISE EXCEPTION 'Stok yetersiz: %', prod_name; END IF;\n                    END IF;\n\n                ELSIF (TG_OP = 'UPDATE') THEN\n                    IF new_status IS DISTINCT FROM old_status THEN\n                        -- Active -\u003e Delivered\n                        IF is_old_active AND is_new_delivered THEN\n                            UPDATE products SET reserved_stock = GREATEST(0, COALESCE(reserved_stock, 0) - qty) WHERE id = target_pid;\n                        -- Active -\u003e Cancelled\n                        ELSIF is_old_active AND is_new_neutral THEN\n                            UPDATE products SET reserved_stock = GREATEST(0, COALESCE(reserved_stock, 0) - qty), stock = stock + qty WHERE id = target_pid;\n                        -- Delivered -\u003e Cancelled\n                        ELSIF is_old_delivered AND is_new_neutral THEN\n                            UPDATE products SET stock = stock + qty WHERE id = target_pid;\n                        -- Cancelled -\u003e Active\n                        ELSIF is_old_neutral AND is_new_active THEN\n                             UPDATE products SET reserved_stock = COALESCE(reserved_stock, 0) + qty, stock = stock - qty WHERE id = target_pid AND stock \u003e= qty;\n                             IF NOT FOUND THEN RAISE EXCEPTION 'Stok yetersiz: %', prod_name; END IF;\n                        -- Cancelled -\u003e Delivered\n                        ELSIF is_old_neutral AND is_new_delivered THEN\n                             UPDATE products SET stock = stock - qty WHERE id = target_pid AND stock \u003e= qty;\n                             IF NOT FOUND THEN RAISE EXCEPTION 'Stok yetersiz: %', prod_name; END IF;\n                        -- Delivered -\u003e Active\n                        ELSIF is_old_delivered AND is_new_active THEN\n                             UPDATE products SET reserved_stock = COALESCE(reserved_stock, 0) + qty WHERE id = target_pid;\n                        END IF;\n                    END IF;\n                END IF;\n            END IF;\n        END LOOP;\n    END IF;\n\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260207212515"},{"text":"security_audit_fixes"},{"binary":"00000001000000000000001900000002000000010000192a2d2d205365637572697479204175646974204669786573202d20323032362d30322d30380a0a2d2d20312e20466978206372656174655f6f7264657220666f72205261636520436f6e646974696f6e732c2049444f522c20616e64204e65676174697665205175616e746974790a435245415445204f52205245504c4143452046554e4354494f4e206372656174655f6f72646572280a20202020705f6974656d73204a534f4e422c0a20202020705f7368697070696e675f616464726573735f696420555549442c0a20202020705f7061796d656e745f6d6574686f6420544558542c0a20202020705f70726f6d6f5f636f646520544558542044454641554c54204e554c4c0a290a52455455524e53204a534f4e420a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a41532024240a4445434c4152450a20202020765f757365725f696420555549443b0a20202020765f6974656d204a534f4e423b0a20202020765f70726f647563745f696420555549443b0a20202020765f70726f647563745f6e616d6520544558543b0a20202020765f70726f647563745f707269636520444543494d414c2831302c32293b0a20202020765f70726f647563745f73746f636b20494e543b0a20202020765f71747920494e543b0a20202020765f6974656d5f737562746f74616c20444543494d414c2831302c32293b0a20202020765f746f74616c5f737562746f74616c20444543494d414c2831302c3229203a3d20303b0a20202020765f746f74616c5f76617420444543494d414c2831302c3229203a3d20303b0a20202020765f7368697070696e675f636f737420444543494d414c2831302c32293b0a20202020765f66696e616c5f746f74616c20444543494d414c2831302c32293b0a20202020765f646973636f756e7420444543494d414c2831302c3229203a3d20303b0a20202020765f6f726465725f696420555549443b0a20202020765f76616c69645f6974656d73204a534f4e42203a3d20275b5d273a3a4a534f4e423b0a20202020765f6974656d5f64657461696c204a534f4e423b0a20202020765f6f726465725f64657461696c73204a534f4e423b0a20202020765f62616e6b5f7265662054455854203a3d204e554c4c3b0a20202020765f616464726573735f6f776e657220555549443b0a20202020765f70726f6d6f5f726573756c74204a534f4e3b0a424547494e0a202020202d2d20312e2047657420557365722049440a20202020765f757365725f6964203a3d20617574682e75696428293b0a20202020494620765f757365725f6964204953204e554c4c205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274f747572756d2061c3a76d616ec4b17a20676572656b69796f7227293b0a20202020454e442049463b0a0a202020202d2d20322e2041646472657373204f776e65727368697020436865636b202849444f5220536563757269747920466978290a2020202053454c45435420757365725f696420494e544f20765f616464726573735f6f776e65722046524f4d20616464726573736573205748455245206964203d20705f7368697070696e675f616464726573735f69643b0a20202020494620765f616464726573735f6f776e6572204953204e554c4c204f5220765f616464726573735f6f776e657220213d20765f757365725f6964205448454e0a20202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274765c3a7657273697a206164726573207365c3a7696d693a2041647265732073697a6520616974206465c49f696c2e27293b0a20202020454e442049463b0a0a202020202d2d20332e204974657261746520696e707574206974656d730a20202020464f5220765f6974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e747328705f6974656d73290a202020204c4f4f500a2020202020202020765f70726f647563745f6964203a3d2028765f6974656d2d3e3e2770726f647563745f696427293a3a555549443b0a2020202020202020765f717479203a3d2028765f6974656d2d3e3e277175616e7469747927293a3a494e543b0a0a20202020202020202d2d204e65676174697665205175616e7469747920436865636b20284c6f67696320536563757269747920466978290a2020202020202020494620765f717479203c3d2030205448454e0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274765c3a7657273697a20c3bc72c3bc6e206d696b746172c4b13a20302076657961206e656761746966206f6c616d617a2e27293b0a2020202020202020454e442049463b0a0a20202020202020202d2d204765742070726f647563742066726f6d2044422057495448204c4f434b20285261636520436f6e646974696f6e20466978290a202020202020202053454c4543542069642c206e616d652c2070726963652c2073746f636b200a2020202020202020494e544f20765f70726f647563745f69642c20765f70726f647563745f6e616d652c20765f70726f647563745f70726963652c20765f70726f647563745f73746f636b0a202020202020202046524f4d2070726f6475637473200a20202020202020205748455245206964203d20765f70726f647563745f69640a2020202020202020464f52205550444154453b202d2d20437269746963616c3a204c6f636b732074686520726f770a20202020202020200a20202020202020204946204e4f5420464f554e44205448454e0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c2027c39c72c3bc6e2062756c756e616d6164c4b13a2049442027207c7c20765f70726f647563745f6964293b0a2020202020202020454e442049463b0a0a20202020202020202d2d20436865636b2073746f636b2076616c69646974790a2020202020202020494620765f70726f647563745f73746f636b203c20765f717479205448454e0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c2027596574657273697a2073746f6b3a2027207c7c20765f70726f647563745f6e616d65293b0a2020202020202020454e442049463b0a0a20202020202020202d2d2043616c63756c617465206974656d20746f74616c73207573696e672044422070726963650a2020202020202020765f6974656d5f737562746f74616c203a3d20765f70726f647563745f7072696365202a20765f7174793b0a2020202020202020765f746f74616c5f737562746f74616c203a3d20765f746f74616c5f737562746f74616c202b20765f6974656d5f737562746f74616c3b0a20202020202020200a20202020202020202d2d204275696c64206974656d2064657461696c0a2020202020202020765f6974656d5f64657461696c203a3d206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202770726f647563745f6964272c20765f70726f647563745f69642c0a2020202020202020202020202770726f647563745f6e616d65272c20765f70726f647563745f6e616d652c0a202020202020202020202020277175616e74697479272c20765f7174792c0a20202020202020202020202027756e69745f7072696365272c20765f70726f647563745f70726963652c0a20202020202020202020202027737562746f74616c272c20765f6974656d5f737562746f74616c0a2020202020202020293b0a20202020202020200a2020202020202020765f76616c69645f6974656d73203a3d20765f76616c69645f6974656d73207c7c20765f6974656d5f64657461696c3b0a20202020202020200a20202020454e44204c4f4f503b0a0a202020202d2d20342e205641542028323025290a20202020765f746f74616c5f766174203a3d20765f746f74616c5f737562746f74616c202a20302e32303b0a0a202020202d2d20352e205368697070696e670a20202020494620765f746f74616c5f737562746f74616c203e3d2031353030205448454e0a2020202020202020765f7368697070696e675f636f7374203a3d20303b0a20202020454c53450a2020202020202020765f7368697070696e675f636f7374203a3d2034392e39303b0a20202020454e442049463b0a0a202020202d2d20362e2050726f6d6f20436f646520284261636b656e64204c6f676963207573696e67207665726966795f70726f6d6f5f636f6465290a20202020765f646973636f756e74203a3d20303b200a20202020494620705f70726f6d6f5f636f6465204953204e4f54204e554c4c20414e44206c656e67746828705f70726f6d6f5f636f646529203e2030205448454e0a2020202020202020424547494e0a2020202020202020202020202d2d20417474656d707420746f2063616c6c207665726966795f70726f6d6f5f636f64650a20202020202020202020202053454c454354207665726966795f70726f6d6f5f636f646528705f70726f6d6f5f636f64652920494e544f20765f70726f6d6f5f726573756c743b0a2020202020202020202020200a20202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e2776616c696427293a3a626f6f6c65616e203d2074727565205448454e0a202020202020202020202020202020202d2d20436865636b206d696e206f7264657220616d6f756e74206c6f676963206966206170706c696361626c650a202020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f747970652729203d202770657263656e7461676527205448454e0a202020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f746f74616c5f737562746f74616c202b20765f746f74616c5f76617429202a202828765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a646563696d616c202f20313030293b0a2020202020202020202020202020202020202020202d2d204d617820646973636f756e7420636865636b0a20202020202020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e742729204953204e4f54204e554c4c20414e4420765f646973636f756e74203e2028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e7427293a3a646563696d616c205448454e0a20202020202020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e7427293a3a646563696d616c3b0a202020202020202020202020202020202020202020454e442049463b0a2020202020202020202020202020202020454c53450a202020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a646563696d616c3b0a2020202020202020202020202020202020454e442049463b0a202020202020202020202020454e442049463b0a2020202020202020455843455054494f4e205748454e204f5448455253205448454e0a202020202020202020202020765f646973636f756e74203a3d20303b0a2020202020202020454e443b0a20202020454e442049463b0a0a202020202d2d20372e2046696e616c20546f74616c0a20202020765f66696e616c5f746f74616c203a3d20765f746f74616c5f737562746f74616c202b20765f746f74616c5f766174202b20765f7368697070696e675f636f7374202d20765f646973636f756e743b0a20202020494620765f66696e616c5f746f74616c203c2030205448454e20765f66696e616c5f746f74616c203a3d20303b20454e442049463b0a0a202020202d2d2042616e6b205265666572656e63650a20202020494620705f7061796d656e745f6d6574686f64203d202762616e6b5f7472616e7366657227205448454e0a2020202020202020765f62616e6b5f726566203a3d20274252562d27207c7c20746f5f63686172284e4f5728292c202759594d4d44442729207c7c20272d27207c7c20757070657228737562737472696e67286d64352872616e646f6d28293a3a74657874292066726f6d203120666f72203429293b0a20202020454e442049463b0a0a202020202d2d20382e20436f6e7374727563742066696e616c206f726465725f64657461696c730a20202020765f6f726465725f64657461696c73203a3d206a736f6e625f6275696c645f6f626a656374280a2020202020202020276974656d73272c20765f76616c69645f6974656d732c0a202020202020202027737562746f74616c272c20765f746f74616c5f737562746f74616c2c0a2020202020202020277661745f72617465272c20302e32302c0a2020202020202020277661745f616d6f756e74272c20765f746f74616c5f7661742c0a2020202020202020277368697070696e675f636f7374272c20765f7368697070696e675f636f73742c0a202020202020202027746f74616c272c20765f66696e616c5f746f74616c2c0a20202020202020202770726f6d6f5f636f6465272c20705f70726f6d6f5f636f64652c0a202020202020202027646973636f756e74272c20765f646973636f756e742c0a20202020202020202762616e6b5f7265666572656e6365272c20765f62616e6b5f7265660a20202020293b0a0a202020202d2d20392e20496e73657274204f726465720a20202020494e5345525420494e544f206f726465727320280a2020202020202020757365725f69642c0a20202020202020207368697070696e675f616464726573735f69642c0a20202020202020207061796d656e745f6d6574686f642c0a20202020202020207374617475732c0a20202020202020207061796d656e745f7374617475732c0a20202020202020206f726465725f64657461696c730a20202020292056414c55455320280a2020202020202020765f757365725f69642c0a2020202020202020705f7368697070696e675f616464726573735f69642c0a2020202020202020705f7061796d656e745f6d6574686f642c0a20202020202020202770656e64696e67272c200a202020202020202043415345205748454e20705f7061796d656e745f6d6574686f64203d20276372656469745f6361726427205448454e2027706169642720454c5345202770656e64696e672720454e442c0a2020202020202020765f6f726465725f64657461696c730a20202020292052455455524e494e4720696420494e544f20765f6f726465725f69643b0a202020200a202020202d2d2031302e20496e736572742053746174757320486973746f72790a20202020424547494e0a2020202020202020494e5345525420494e544f206f726465725f7374617475735f686973746f727920286f726465725f69642c207374617475732c206e6f74652c20637265617465645f6174290a202020202020202056414c55455320280a202020202020202020202020765f6f726465725f69642c0a2020202020202020202020202770656e64696e67272c0a20202020202020202020202043415345205748454e20705f7061796d656e745f6d6574686f64203d20276372656469745f6361726427205448454e2027536970617269c59f20616cc4b16e64c4b120284b72656469204b617274c4b1292720454c53452027536970617269c59f20616cc4b16e64c4b12028486176616c652f4546542042656b6c656e69796f72292720454e442c0a2020202020202020202020204e4f5728290a2020202020202020293b0a20202020455843455054494f4e205748454e204f5448455253205448454e204e554c4c3b20454e443b0a0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20747275652c200a2020202020202020276f726465725f6964272c20765f6f726465725f69642c0a202020202020202027746f74616c272c20765f66696e616c5f746f74616c2c0a2020202020202020277368697070696e675f636f7374272c20765f7368697070696e675f636f73742c0a20202020202020202762616e6b5f7265666572656e6365272c20765f62616e6b5f7265662c0a2020202020202020276d657373616765272c2027536970617269c59f206261c59f6172c4b1796c61206f6c75c59f747572756c6475270a20202020293b0a0a455843455054494f4e205748454e204f5448455253205448454e0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c2066616c73652c200a2020202020202020276d657373616765272c20274269722068617461206f6c75c59f74753a2027207c7c2053514c4552524d0a20202020293b0a454e443b0a2424000013332d2d20322e20466978206d616e6167655f696e76656e746f727920666f72204f766572666c6f772f556e646572666c6f770a435245415445204f52205245504c4143452046554e4354494f4e206d616e6167655f696e76656e746f727928292052455455524e5320545249474745522041532024240a4445434c4152450a202020206974656d206a736f6e623b0a2020202071747920696e743b0a2020202070726f645f696420757569643b0a2020202070726f645f6e616d6520746578743b0a202020207461726765745f70696420757569643b0a202020206f6c645f73746174757320746578743b0a202020206e65775f73746174757320746578743b0a2020202069735f6e65775f61637469766520626f6f6c65616e3b0a2020202069735f6f6c645f61637469766520626f6f6c65616e3b0a2020202069735f6e65775f64656c69766572656420626f6f6c65616e3b0a2020202069735f6f6c645f64656c69766572656420626f6f6c65616e3b0a2020202069735f6e65775f6e65757472616c20626f6f6c65616e3b0a2020202069735f6f6c645f6e65757472616c20626f6f6c65616e3b0a424547494e0a202020204946202854475f4f50203d2027494e534552542729205448454e0a20202020202020206f6c645f737461747573203a3d204e554c4c3b0a20202020202020206e65775f737461747573203a3d204e45572e7374617475733b0a20202020454c53450a20202020202020206f6c645f737461747573203a3d204f4c442e7374617475733b0a20202020202020206e65775f737461747573203a3d204e45572e7374617475733b0a20202020454e442049463b0a0a202020202d2d204c6f6769632047726f7570730a2020202069735f6e65775f616374697665203a3d206c6f776572286e65775f7374617475732920494e20282770656e64696e67272c202770726f63657373696e67272c2027707265706172696e67272c202773686970706564272c202762656b6c656d656465272c202769c59f6c656e69796f72272c202768617ac4b1726c616ec4b1796f72272c20276b6172676f646127293b0a2020202069735f6f6c645f616374697665203a3d206c6f776572286f6c645f7374617475732920494e20282770656e64696e67272c202770726f63657373696e67272c2027707265706172696e67272c202773686970706564272c202762656b6c656d656465272c202769c59f6c656e69796f72272c202768617ac4b1726c616ec4b1796f72272c20276b6172676f646127293b0a2020202069735f6e65775f64656c697665726564203a3d206c6f776572286e65775f7374617475732920494e20282764656c697665726564272c20277465736c696d206564696c646927293b0a2020202069735f6f6c645f64656c697665726564203a3d206c6f776572286f6c645f7374617475732920494e20282764656c697665726564272c20277465736c696d206564696c646927293b0a2020202069735f6e65775f6e65757472616c203a3d204e4f542069735f6e65775f61637469766520414e44204e4f542069735f6e65775f64656c6976657265643b0a2020202069735f6f6c645f6e65757472616c203a3d204e4f542069735f6f6c645f61637469766520414e44204e4f542069735f6f6c645f64656c6976657265643b0a0a202020204946204e45572e6f726465725f64657461696c732d3e276974656d7327204953204e4f54204e554c4c205448454e0a2020202020202020464f52206974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e7473284e45572e6f726465725f64657461696c732d3e276974656d7327290a20202020202020204c4f4f500a202020202020202020202020717479203a3d20286974656d2d3e3e277175616e7469747927293a3a696e743b0a20202020202020202020202070726f645f6964203a3d20286974656d2d3e3e2770726f647563745f696427293a3a757569643b0a20202020202020202020202070726f645f6e616d65203a3d206974656d2d3e3e2770726f647563745f6e616d65273b0a0a2020202020202020202020202d2d2046696e642050726f647563740a2020202020202020202020207461726765745f706964203a3d204e554c4c3b0a20202020202020202020202049462070726f645f6964204953204e4f54204e554c4c205448454e0a2020202020202020202020202020202053454c4543542069642046524f4d2070726f6475637473205748455245206964203d2070726f645f696420494e544f207461726765745f7069643b0a202020202020202020202020454e442049463b200a2020202020202020202020204946207461726765745f706964204953204e554c4c20414e442070726f645f6e616d65204953204e4f54204e554c4c205448454e0a2020202020202020202020202020202053454c4543542069642046524f4d2070726f6475637473205748455245206e616d65203d2070726f645f6e616d65204c494d4954203120494e544f207461726765745f7069643b0a202020202020202020202020454e442049463b0a0a2020202020202020202020204946207461726765745f706964204953204e4f54204e554c4c205448454e0a202020202020202020202020202020200a202020202020202020202020202020204946202854475f4f50203d2027494e534552542729205448454e0a20202020202020202020202020202020202020202d2d20496e736572742028416374697665290a202020202020202020202020202020202020202049462069735f6e65775f616374697665205448454e0a2020202020202020202020202020202020202020202020202d2d20436865636b2073746f636b206265666f72652075706461746520746f2070726576656e74206e656761746976652073746f636b0a2020202020202020202020202020202020202020202020205550444154452070726f6475637473200a2020202020202020202020202020202020202020202020205345542072657365727665645f73746f636b203d20434f414c455343452872657365727665645f73746f636b2c203029202b207174792c0a2020202020202020202020202020202020202020202020202020202073746f636b203d2073746f636b202d207174790a2020202020202020202020202020202020202020202020205748455245206964203d207461726765745f70696420414e442073746f636b203e3d207174793b0a2020202020202020202020202020202020202020202020200a2020202020202020202020202020202020202020202020202d2d20496620757064617465206661696c65642028726f77206e6f7420666f756e642064756520746f2073746f636b203c20717479292c207261697365206572726f720a2020202020202020202020202020202020202020202020204946204e4f5420464f554e44205448454e0a20202020202020202020202020202020202020202020202020202020524149534520455843455054494f4e202753746f6b20796574657273697a3a2025272c2070726f645f6e616d653b0a202020202020202020202020202020202020202020202020454e442049463b0a20202020202020202020202020202020202020200a2020202020202020202020202020202020202020454c5349462069735f6e65775f64656c697665726564205448454e0a2020202020202020202020202020202020202020202020205550444154452070726f6475637473205345542073746f636b203d2073746f636b202d20717479205748455245206964203d207461726765745f70696420414e442073746f636b203e3d207174793b0a2020202020202020202020202020202020202020202020204946204e4f5420464f554e44205448454e20524149534520455843455054494f4e202753746f6b20796574657273697a3a2025272c2070726f645f6e616d653b20454e442049463b0a2020202020202020202020202020202020202020454e442049463b0a0a20202020202020202020202020202020454c534946202854475f4f50203d20275550444154452729205448454e0a20202020202020202020202020202020202020204946206e65775f7374617475732049532044495354494e43542046524f4d206f6c645f737461747573205448454e0a2020202020202020202020202020202020202020202020202d2d20416374697665202d3e2044656c6976657265640a20202020202020202020202020202020202020202020202049462069735f6f6c645f61637469766520414e442069735f6e65775f64656c697665726564205448454e0a202020202020202020202020202020202020202020202020202020205550444154452070726f6475637473205345542072657365727665645f73746f636b203d20475245415445535428302c20434f414c455343452872657365727665645f73746f636b2c203029202d2071747929205748455245206964203d207461726765745f7069643b0a2020202020202020202020202020202020202020202020202d2d20416374697665202d3e2043616e63656c6c65640a202020202020202020202020202020202020202020202020454c5349462069735f6f6c645f61637469766520414e442069735f6e65775f6e65757472616c205448454e0a202020202020202020202020202020202020202020202020202020205550444154452070726f6475637473205345542072657365727665645f73746f636b203d20475245415445535428302c20434f414c455343452872657365727665645f73746f636b2c203029202d20717479292c2073746f636b203d2073746f636b202b20717479205748455245206964203d207461726765745f7069643b0a2020202020202020202020202020202020202020202020202d2d2044656c697665726564202d3e2043616e63656c6c65640a202020202020202020202020202020202020202020202020454c5349462069735f6f6c645f64656c69766572656420414e442069735f6e65775f6e65757472616c205448454e0a202020202020202020202020202020202020202020202020202020205550444154452070726f6475637473205345542073746f636b203d2073746f636b202b20717479205748455245206964203d207461726765745f7069643b0a2020202020202020202020202020202020202020202020202d2d2043616e63656c6c6564202d3e204163746976650a202020202020202020202020202020202020202020202020454c5349462069735f6f6c645f6e65757472616c20414e442069735f6e65775f616374697665205448454e0a20202020202020202020202020202020202020202020202020202020205550444154452070726f6475637473205345542072657365727665645f73746f636b203d20434f414c455343452872657365727665645f73746f636b2c203029202b207174792c2073746f636b203d2073746f636b202d20717479205748455245206964203d207461726765745f70696420414e442073746f636b203e3d207174793b0a20202020202020202020202020202020202020202020202020202020204946204e4f5420464f554e44205448454e20524149534520455843455054494f4e202753746f6b20796574657273697a3a2025272c2070726f645f6e616d653b20454e442049463b0a2020202020202020202020202020202020202020202020202d2d2043616e63656c6c6564202d3e2044656c6976657265640a202020202020202020202020202020202020202020202020454c5349462069735f6f6c645f6e65757472616c20414e442069735f6e65775f64656c697665726564205448454e0a20202020202020202020202020202020202020202020202020202020205550444154452070726f6475637473205345542073746f636b203d2073746f636b202d20717479205748455245206964203d207461726765745f70696420414e442073746f636b203e3d207174793b0a20202020202020202020202020202020202020202020202020202020204946204e4f5420464f554e44205448454e20524149534520455843455054494f4e202753746f6b20796574657273697a3a2025272c2070726f645f6e616d653b20454e442049463b0a2020202020202020202020202020202020202020202020202d2d2044656c697665726564202d3e204163746976650a202020202020202020202020202020202020202020202020454c5349462069735f6f6c645f64656c69766572656420414e442069735f6e65775f616374697665205448454e0a20202020202020202020202020202020202020202020202020202020205550444154452070726f6475637473205345542072657365727665645f73746f636b203d20434f414c455343452872657365727665645f73746f636b2c203029202b20717479205748455245206964203d207461726765745f7069643b0a202020202020202020202020202020202020202020202020454e442049463b0a2020202020202020202020202020202020202020454e442049463b0a20202020202020202020202020202020454e442049463b0a202020202020202020202020454e442049463b0a2020202020202020454e44204c4f4f503b0a20202020454e442049463b0a0a2020202052455455524e204e45573b0a454e443b0a2424204c414e475541474520706c706773716c"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260207212532_rate_limiting.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TABLE IF NOT EXISTS public.email_logs (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    order_id UUID REFERENCES public.orders(id) ON DELETE CASCADE,\n    email_type TEXT NOT NULL, -- e.g. 'order_confirmation'\n    sent_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    recipient TEXT\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_email_logs_order_id ON public.email_logs(order_id)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_email_logs_sent_at ON public.email_logs(sent_at)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_logs ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"System can insert email logs\" ON public.email_logs","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"System can insert email logs\" ON public.email_logs\nFOR INSERT TO service_role WITH CHECK (true)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"System can read email logs\" ON public.email_logs","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"System can read email logs\" ON public.email_logs\nFOR SELECT TO service_role USING (true)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260207212532"},{"text":"rate_limiting"},{"binary":"000000010000000000000019000000080000000100000127435245415445205441424c45204946204e4f5420455849535453207075626c69632e656d61696c5f6c6f677320280a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0a202020206f726465725f69642055554944205245464552454e434553207075626c69632e6f726465727328696429204f4e2044454c45544520434153434144452c0a20202020656d61696c5f747970652054455854204e4f54204e554c4c2c202d2d20652e672e20276f726465725f636f6e6669726d6174696f6e270a2020202073656e745f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c54204e4f5728292c0a20202020726563697069656e7420544558540a290000005143524541544520494e444558204946204e4f5420455849535453206964785f656d61696c5f6c6f67735f6f726465725f6964204f4e207075626c69632e656d61696c5f6c6f6773286f726465725f6964290000004f43524541544520494e444558204946204e4f5420455849535453206964785f656d61696c5f6c6f67735f73656e745f6174204f4e207075626c69632e656d61696c5f6c6f67732873656e745f61742900000037414c544552205441424c45207075626c69632e656d61696c5f6c6f677320454e41424c4520524f57204c4556454c2053454355524954590000004944524f5020504f4c49435920494620455849535453202253797374656d2063616e20696e7365727420656d61696c206c6f677322204f4e207075626c69632e656d61696c5f6c6f67730000006e43524541544520504f4c494359202253797374656d2063616e20696e7365727420656d61696c206c6f677322204f4e207075626c69632e656d61696c5f6c6f67730a464f5220494e5345525420544f20736572766963655f726f6c65205749544820434845434b202874727565290000004744524f5020504f4c49435920494620455849535453202253797374656d2063616e207265616420656d61696c206c6f677322204f4e207075626c69632e656d61696c5f6c6f67730000006743524541544520504f4c494359202253797374656d2063616e207265616420656d61696c206c6f677322204f4e207075626c69632e656d61696c5f6c6f67730a464f522053454c45435420544f20736572766963655f726f6c65205553494e4720287472756529"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"System can insert email logs\" for relation \"public.email_logs\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "System can insert email logs" for relation "public.email_logs" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"System can read email logs\" for relation \"public.email_logs\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "System can read email logs" for relation "public.email_logs" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260208174305_security_and_performance_fixes.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- ============================================\r\n-- 1. FIX: RLS DISABLED IN PUBLIC\r\n-- ============================================\r\nALTER TABLE public.promo_code_attempts ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DO $$ \r\nBEGIN\r\n    IF NOT EXISTS (SELECT 1 FROM pg_policies WHERE policyname = 'Admins can view promo code attempts') THEN\r\n        CREATE POLICY \"Admins can view promo code attempts\" ON public.promo_code_attempts\r\n        FOR SELECT TO authenticated\r\n        USING ((SELECT (is_admin_user((SELECT auth.uid())))));\r\n    END IF;\r\n    \r\n    IF NOT EXISTS (SELECT 1 FROM pg_policies WHERE policyname = 'Authenticated users can insert promo code attempts') THEN\r\n        CREATE POLICY \"Authenticated users can insert promo code attempts\" ON public.promo_code_attempts\r\n        FOR INSERT TO authenticated\r\n        WITH CHECK ((SELECT auth.uid()) IS NOT NULL);\r\n    END IF;\r\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- ============================================\r\n-- 2. FIX: FUNCTION SEARCH PATH MUTABLE\r\n-- ============================================\r\nALTER FUNCTION public.create_order(jsonb, uuid, text, text) SET search_path = public","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER FUNCTION public.admin_set_user_admin(uuid, boolean) SET search_path = public","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER FUNCTION public.sanitize_search_input(text) SET search_path = public","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER FUNCTION public.is_admin_user() SET search_path = public","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER FUNCTION public.is_admin_user(uuid) SET search_path = public","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER FUNCTION public.admin_update_order_status(uuid, text, text) SET search_path = public","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER FUNCTION public.admin_get_all_orders(text, integer, integer) SET search_path = public","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER FUNCTION public.manage_inventory() SET search_path = public","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER FUNCTION public.log_admin_action() SET search_path = public","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- ============================================\r\n-- 3. FIX: AUTH RLS INITIALIZATION PLAN (PERFORMANCE)\r\n--    AND 4. FIX: MULTIPLE PERMISSIVE POLICIES (CLEANUP)\r\n-- ============================================\r\n\r\n-- PROFILES\r\nDROP POLICY IF EXISTS \"Admins can view all profiles\" ON public.profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users and admins can view profiles\" ON public.profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users and admins can view profiles\" ON public.profiles\r\nFOR SELECT TO authenticated\r\nUSING (id = (SELECT auth.uid()) OR (SELECT is_admin_user((SELECT auth.uid()))))","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can update any profile\" ON public.profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users can update own profile\" ON public.profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users can update own profile\" ON public.profiles\r\nFOR UPDATE TO authenticated\r\nUSING (id = (SELECT auth.uid()) OR (SELECT is_admin_user((SELECT auth.uid()))))\r\nWITH CHECK (id = (SELECT auth.uid()) OR (SELECT is_admin_user((SELECT auth.uid()))))","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users can insert own profile\" ON public.profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users can insert own profile\" ON public.profiles\r\nFOR INSERT TO authenticated\r\nWITH CHECK (id = (SELECT auth.uid()))","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- ADDRESSES\r\nDROP POLICY IF EXISTS \"Admins can view all addresses\" ON public.addresses","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users and admins can view addresses\" ON public.addresses","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users and admins can view addresses\" ON public.addresses\r\nFOR SELECT TO authenticated\r\nUSING (user_id = (SELECT auth.uid()) OR (SELECT is_admin_user((SELECT auth.uid()))))","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can update any address\" ON public.addresses","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users can update own addresses\" ON public.addresses","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users can update own addresses\" ON public.addresses\r\nFOR UPDATE TO authenticated\r\nUSING (user_id = (SELECT auth.uid()) OR (SELECT is_admin_user((SELECT auth.uid()))))\r\nWITH CHECK (user_id = (SELECT auth.uid()) OR (SELECT is_admin_user((SELECT auth.uid()))))","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can delete any address\" ON public.addresses","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users can delete own addresses\" ON public.addresses","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users and admins can view addresses\" for relation \"public.addresses\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users can update own addresses\" for relation \"public.addresses\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users can delete own addresses\" ON public.addresses\r\nFOR DELETE TO authenticated\r\nUSING (user_id = (SELECT auth.uid()) OR (SELECT is_admin_user((SELECT auth.uid()))))","ParameterOIDs":null}
NOTICE (00000): policy "Users and admins can view addresses" for relation "public.addresses" does not exist, skipping
NOTICE (00000): policy "Users can update own addresses" for relation "public.addresses" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users can insert own addresses\" ON public.addresses","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users can insert own addresses\" ON public.addresses\r\nFOR INSERT TO authenticated\r\nWITH CHECK (user_id = (SELECT auth.uid()))","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- ORDERS\r\nDROP POLICY IF EXISTS \"Admins can view all orders\" ON public.orders","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users and admins can view orders\" ON public.orders","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users and admins can view orders\" ON public.orders\r\nFOR SELECT TO authenticated\r\nUSING (user_id = (SELECT auth.uid()) OR (SELECT is_admin_user((SELECT auth.uid()))))","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users can delete own addresses\" for relation \"public.addresses\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
NOTICE (00000): policy "Users can delete own addresses" for relation "public.addresses" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can update any order\" ON public.orders","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users can insert own addresses\" for relation \"public.addresses\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
NOTICE (00000): policy "Users can insert own addresses" for relation "public.addresses" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users and admins can update orders\" ON public.orders","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users and admins can view orders\" for relation \"public.orders\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
NOTICE (00000): policy "Users and admins can view orders" for relation "public.orders" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users and admins can update orders\" ON public.orders\r\nFOR UPDATE TO authenticated\r\nUSING (\r\n    (user_id = (SELECT auth.uid()) AND status = 'pending') \r\n    OR (SELECT is_admin_user((SELECT auth.uid())))\r\n)\r\nWITH CHECK (\r\n    (user_id = (SELECT auth.uid()) AND status = 'pending') \r\n    OR (SELECT is_admin_user((SELECT auth.uid())))\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users can insert own orders\" ON public.orders","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users can insert own orders\" ON public.orders\r\nFOR INSERT TO authenticated\r\nWITH CHECK (user_id = (SELECT auth.uid()))","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users and admins can update orders\" for relation \"public.orders\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
NOTICE (00000): policy "Users and admins can update orders" for relation "public.orders" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- ADMIN LOGS\r\nDROP POLICY IF EXISTS \"Admins can view audit logs\" ON public.admin_audit_log","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users can insert own orders\" for relation \"public.orders\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
NOTICE (00000): policy "Users can insert own orders" for relation "public.orders" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins can view audit logs\" ON public.admin_audit_log\r\nFOR SELECT TO authenticated\r\nUSING ((SELECT is_admin_user((SELECT auth.uid()))))","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can view promo logs\" ON public.promo_logs","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins can view promo logs\" ON public.promo_logs\r\nFOR SELECT TO authenticated\r\nUSING ((SELECT is_admin_user((SELECT auth.uid()))))","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260208174305"},{"text":"security_and_performance_fixes"},{"binary":"0000000100000000000000190000002a00000001000000c52d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20312e204649583a20524c532044495341424c454420494e205055424c49430d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a414c544552205441424c45207075626c69632e70726f6d6f5f636f64655f617474656d70747320454e41424c4520524f57204c4556454c205345435552495459000002a4444f202424200d0a424547494e0d0a202020204946204e4f5420455849535453202853454c45435420312046524f4d2070675f706f6c696369657320574845524520706f6c6963796e616d65203d202741646d696e732063616e20766965772070726f6d6f20636f646520617474656d7074732729205448454e0d0a202020202020202043524541544520504f4c494359202241646d696e732063616e20766965772070726f6d6f20636f646520617474656d70747322204f4e207075626c69632e70726f6d6f5f636f64655f617474656d7074730d0a2020202020202020464f522053454c45435420544f2061757468656e746963617465640d0a20202020202020205553494e4720282853454c454354202869735f61646d696e5f75736572282853454c45435420617574682e756964282929292929293b0d0a20202020454e442049463b0d0a202020200d0a202020204946204e4f5420455849535453202853454c45435420312046524f4d2070675f706f6c696369657320574845524520706f6c6963796e616d65203d202741757468656e746963617465642075736572732063616e20696e736572742070726f6d6f20636f646520617474656d7074732729205448454e0d0a202020202020202043524541544520504f4c494359202241757468656e746963617465642075736572732063616e20696e736572742070726f6d6f20636f646520617474656d70747322204f4e207075626c69632e70726f6d6f5f636f64655f617474656d7074730d0a2020202020202020464f5220494e5345525420544f2061757468656e746963617465640d0a20202020202020205749544820434845434b20282853454c45435420617574682e756964282929204953204e4f54204e554c4c293b0d0a20202020454e442049463b0d0a454e44202424000000df2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20322e204649583a2046554e4354494f4e205345415243482050415448204d555441424c450d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a414c5445522046554e4354494f4e207075626c69632e6372656174655f6f72646572286a736f6e622c20757569642c20746578742c20746578742920534554207365617263685f70617468203d207075626c696300000052414c5445522046554e4354494f4e207075626c69632e61646d696e5f7365745f757365725f61646d696e28757569642c20626f6f6c65616e2920534554207365617263685f70617468203d207075626c69630000004a414c5445522046554e4354494f4e207075626c69632e73616e6974697a655f7365617263685f696e70757428746578742920534554207365617263685f70617468203d207075626c69630000003e414c5445522046554e4354494f4e207075626c69632e69735f61646d696e5f75736572282920534554207365617263685f70617468203d207075626c696300000042414c5445522046554e4354494f4e207075626c69632e69735f61646d696e5f7573657228757569642920534554207365617263685f70617468203d207075626c69630000005a414c5445522046554e4354494f4e207075626c69632e61646d696e5f7570646174655f6f726465725f73746174757328757569642c20746578742c20746578742920534554207365617263685f70617468203d207075626c69630000005b414c5445522046554e4354494f4e207075626c69632e61646d696e5f6765745f616c6c5f6f726465727328746578742c20696e74656765722c20696e74656765722920534554207365617263685f70617468203d207075626c696300000041414c5445522046554e4354494f4e207075626c69632e6d616e6167655f696e76656e746f7279282920534554207365617263685f70617468203d207075626c696300000041414c5445522046554e4354494f4e207075626c69632e6c6f675f61646d696e5f616374696f6e282920534554207365617263685f70617468203d207075626c6963000001292d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20332e204649583a204155544820524c5320494e495449414c495a4154494f4e20504c414e2028504552464f524d414e4345290d0a2d2d20202020414e4420342e204649583a204d554c5449504c45205045524d49535349564520504f4c49434945532028434c45414e5550290d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d2050524f46494c45530d0a44524f5020504f4c49435920494620455849535453202241646d696e732063616e207669657720616c6c2070726f66696c657322204f4e207075626c69632e70726f66696c65730000004d44524f5020504f4c494359204946204558495354532022557365727320616e642061646d696e732063616e20766965772070726f66696c657322204f4e207075626c69632e70726f66696c6573000000b343524541544520504f4c4943592022557365727320616e642061646d696e732063616e20766965772070726f66696c657322204f4e207075626c69632e70726f66696c65730d0a464f522053454c45435420544f2061757468656e746963617465640d0a5553494e4720286964203d202853454c45435420617574682e756964282929204f52202853454c4543542069735f61646d696e5f75736572282853454c45435420617574682e7569642829292929290000004844524f5020504f4c49435920494620455849535453202241646d696e732063616e2075706461746520616e792070726f66696c6522204f4e207075626c69632e70726f66696c65730000004744524f5020504f4c49435920494620455849535453202255736572732063616e20757064617465206f776e2070726f66696c6522204f4e207075626c69632e70726f66696c65730000010343524541544520504f4c494359202255736572732063616e20757064617465206f776e2070726f66696c6522204f4e207075626c69632e70726f66696c65730d0a464f522055504441544520544f2061757468656e746963617465640d0a5553494e4720286964203d202853454c45435420617574682e756964282929204f52202853454c4543542069735f61646d696e5f75736572282853454c45435420617574682e7569642829292929290d0a5749544820434845434b20286964203d202853454c45435420617574682e756964282929204f52202853454c4543542069735f61646d696e5f75736572282853454c45435420617574682e7569642829292929290000004744524f5020504f4c49435920494620455849535453202255736572732063616e20696e73657274206f776e2070726f66696c6522204f4e207075626c69632e70726f66696c65730000008343524541544520504f4c494359202255736572732063616e20696e73657274206f776e2070726f66696c6522204f4e207075626c69632e70726f66696c65730d0a464f5220494e5345525420544f2061757468656e746963617465640d0a5749544820434845434b20286964203d202853454c45435420617574682e75696428292929000000572d2d204144445245535345530d0a44524f5020504f4c49435920494620455849535453202241646d696e732063616e207669657720616c6c2061646472657373657322204f4e207075626c69632e6164647265737365730000004f44524f5020504f4c494359204946204558495354532022557365727320616e642061646d696e732063616e20766965772061646472657373657322204f4e207075626c69632e616464726573736573000000ba43524541544520504f4c4943592022557365727320616e642061646d696e732063616e20766965772061646472657373657322204f4e207075626c69632e6164647265737365730d0a464f522053454c45435420544f2061757468656e746963617465640d0a5553494e472028757365725f6964203d202853454c45435420617574682e756964282929204f52202853454c4543542069735f61646d696e5f75736572282853454c45435420617574682e7569642829292929290000004944524f5020504f4c49435920494620455849535453202241646d696e732063616e2075706461746520616e79206164647265737322204f4e207075626c69632e6164647265737365730000004a44524f5020504f4c49435920494620455849535453202255736572732063616e20757064617465206f776e2061646472657373657322204f4e207075626c69632e6164647265737365730000011043524541544520504f4c494359202255736572732063616e20757064617465206f776e2061646472657373657322204f4e207075626c69632e6164647265737365730d0a464f522055504441544520544f2061757468656e746963617465640d0a5553494e472028757365725f6964203d202853454c45435420617574682e756964282929204f52202853454c4543542069735f61646d696e5f75736572282853454c45435420617574682e7569642829292929290d0a5749544820434845434b2028757365725f6964203d202853454c45435420617574682e756964282929204f52202853454c4543542069735f61646d696e5f75736572282853454c45435420617574682e7569642829292929290000004944524f5020504f4c49435920494620455849535453202241646d696e732063616e2064656c65746520616e79206164647265737322204f4e207075626c69632e6164647265737365730000004a44524f5020504f4c49435920494620455849535453202255736572732063616e2064656c657465206f776e2061646472657373657322204f4e207075626c69632e616464726573736573000000b543524541544520504f4c494359202255736572732063616e2064656c657465206f776e2061646472657373657322204f4e207075626c69632e6164647265737365730d0a464f522044454c45544520544f2061757468656e746963617465640d0a5553494e472028757365725f6964203d202853454c45435420617574682e756964282929204f52202853454c4543542069735f61646d696e5f75736572282853454c45435420617574682e7569642829292929290000004a44524f5020504f4c49435920494620455849535453202255736572732063616e20696e73657274206f776e2061646472657373657322204f4e207075626c69632e6164647265737365730000008b43524541544520504f4c494359202255736572732063616e20696e73657274206f776e2061646472657373657322204f4e207075626c69632e6164647265737365730d0a464f5220494e5345525420544f2061757468656e746963617465640d0a5749544820434845434b2028757365725f6964203d202853454c45435420617574682e756964282929290000004e2d2d204f52444552530d0a44524f5020504f4c49435920494620455849535453202241646d696e732063616e207669657720616c6c206f726465727322204f4e207075626c69632e6f72646572730000004944524f5020504f4c494359204946204558495354532022557365727320616e642061646d696e732063616e2076696577206f726465727322204f4e207075626c69632e6f7264657273000000b443524541544520504f4c4943592022557365727320616e642061646d696e732063616e2076696577206f726465727322204f4e207075626c69632e6f72646572730d0a464f522053454c45435420544f2061757468656e746963617465640d0a5553494e472028757365725f6964203d202853454c45435420617574682e756964282929204f52202853454c4543542069735f61646d696e5f75736572282853454c45435420617574682e7569642829292929290000004444524f5020504f4c49435920494620455849535453202241646d696e732063616e2075706461746520616e79206f7264657222204f4e207075626c69632e6f72646572730000004b44524f5020504f4c494359204946204558495354532022557365727320616e642061646d696e732063616e20757064617465206f726465727322204f4e207075626c69632e6f72646572730000015f43524541544520504f4c4943592022557365727320616e642061646d696e732063616e20757064617465206f726465727322204f4e207075626c69632e6f72646572730d0a464f522055504441544520544f2061757468656e746963617465640d0a5553494e4720280d0a2020202028757365725f6964203d202853454c45435420617574682e75696428292920414e4420737461747573203d202770656e64696e672729200d0a202020204f52202853454c4543542069735f61646d696e5f75736572282853454c45435420617574682e75696428292929290d0a290d0a5749544820434845434b20280d0a2020202028757365725f6964203d202853454c45435420617574682e75696428292920414e4420737461747573203d202770656e64696e672729200d0a202020204f52202853454c4543542069735f61646d696e5f75736572282853454c45435420617574682e75696428292929290d0a290000004444524f5020504f4c49435920494620455849535453202255736572732063616e20696e73657274206f776e206f726465727322204f4e207075626c69632e6f72646572730000008543524541544520504f4c494359202255736572732063616e20696e73657274206f776e206f726465727322204f4e207075626c69632e6f72646572730d0a464f5220494e5345525420544f2061757468656e746963617465640d0a5749544820434845434b2028757365725f6964203d202853454c45435420617574682e756964282929290000005b2d2d2041444d494e204c4f47530d0a44524f5020504f4c49435920494620455849535453202241646d696e732063616e2076696577206175646974206c6f677322204f4e207075626c69632e61646d696e5f61756469745f6c6f670000009643524541544520504f4c494359202241646d696e732063616e2076696577206175646974206c6f677322204f4e207075626c69632e61646d696e5f61756469745f6c6f670d0a464f522053454c45435420544f2061757468656e746963617465640d0a5553494e4720282853454c4543542069735f61646d696e5f75736572282853454c45435420617574682e7569642829292929290000004744524f5020504f4c49435920494620455849535453202241646d696e732063616e20766965772070726f6d6f206c6f677322204f4e207075626c69632e70726f6d6f5f6c6f67730000009143524541544520504f4c494359202241646d696e732063616e20766965772070726f6d6f206c6f677322204f4e207075626c69632e70726f6d6f5f6c6f67730d0a464f522053454c45435420544f2061757468656e746963617465640d0a5553494e4720282853454c4543542069735f61646d696e5f75736572282853454c45435420617574682e756964282929292929"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260209173412_welcome_email_trigger.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 1. Enable pg_net if not enabled\nDO $$ \nBEGIN\n    IF NOT EXISTS (SELECT 1 FROM pg_extension WHERE extname = 'pg_net') THEN\n        CREATE EXTENSION IF NOT EXISTS pg_net;\n    END IF;\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Create the trigger function in public schema (safer)\nCREATE OR REPLACE FUNCTION public.handle_user_confirmation_email()\nRETURNS TRIGGER AS $$\nBEGIN\n    -- Only trigger when email_confirmed_at transitions from NULL to NOT NULL\n    IF (OLD.email_confirmed_at IS NULL AND NEW.email_confirmed_at IS NOT NULL) THEN\n        PERFORM net.http_post(\n            url := 'https://xpmbnznsmsujjuwumfiw.supabase.co/functions/v1/send-welcome-email',\n            headers := '{\"Content-Type\": \"application/json\", \"x-bravita-secret\": \"bravita-welcome-secret-2026\"}'::jsonb,\n            body := jsonb_build_object('user_id', NEW.id)\n        );\n    END IF;\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. Create it on auth.users\nDROP TRIGGER IF EXISTS on_auth_user_confirmed_email ON auth.users","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TRIGGER on_auth_user_confirmed_email\n    AFTER UPDATE ON auth.users\n    FOR EACH ROW\n    EXECUTE FUNCTION public.handle_user_confirmation_email()","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260209173412"},{"text":"welcome_email_trigger"},{"binary":"0000000100000000000000190000000400000001000000be2d2d20312e20456e61626c652070675f6e6574206966206e6f7420656e61626c65640a444f202424200a424547494e0a202020204946204e4f5420455849535453202853454c45435420312046524f4d2070675f657874656e73696f6e205748455245206578746e616d65203d202770675f6e65742729205448454e0a202020202020202043524541544520455854454e53494f4e204946204e4f54204558495354532070675f6e65743b0a20202020454e442049463b0a454e44202424000002bd2d2d20322e204372656174652074686520747269676765722066756e6374696f6e20696e207075626c696320736368656d6120287361666572290a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e68616e646c655f757365725f636f6e6669726d6174696f6e5f656d61696c28290a52455455524e5320545249474745522041532024240a424547494e0a202020202d2d204f6e6c792074726967676572207768656e20656d61696c5f636f6e6669726d65645f6174207472616e736974696f6e732066726f6d204e554c4c20746f204e4f54204e554c4c0a20202020494620284f4c442e656d61696c5f636f6e6669726d65645f6174204953204e554c4c20414e44204e45572e656d61696c5f636f6e6669726d65645f6174204953204e4f54204e554c4c29205448454e0a2020202020202020504552464f524d206e65742e687474705f706f7374280a20202020202020202020202075726c203a3d202768747470733a2f2f78706d626e7a6e736d73756a6a7577756d6669772e73757061626173652e636f2f66756e6374696f6e732f76312f73656e642d77656c636f6d652d656d61696c272c0a20202020202020202020202068656164657273203a3d20277b22436f6e74656e742d54797065223a20226170706c69636174696f6e2f6a736f6e222c2022782d627261766974612d736563726574223a2022627261766974612d77656c636f6d652d7365637265742d32303236227d273a3a6a736f6e622c0a202020202020202020202020626f6479203a3d206a736f6e625f6275696c645f6f626a6563742827757365725f6964272c204e45572e6964290a2020202020202020293b0a20202020454e442049463b0a2020202052455455524e204e45573b0a454e443b0a2424204c414e475541474520706c706773716c20534543555249545920444546494e45520000005f2d2d20332e20437265617465206974206f6e20617574682e75736572730a44524f50205452494747455220494620455849535453206f6e5f617574685f757365725f636f6e6669726d65645f656d61696c204f4e20617574682e7573657273000000984352454154452054524947474552206f6e5f617574685f757365725f636f6e6669726d65645f656d61696c0a20202020414654455220555044415445204f4e20617574682e75736572730a20202020464f52204541434820524f570a20202020455845435554452046554e4354494f4e207075626c69632e68616e646c655f757365725f636f6e6669726d6174696f6e5f656d61696c2829"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"trigger \"on_auth_user_confirmed_email\" for relation \"auth.users\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): trigger "on_auth_user_confirmed_email" for relation "auth.users" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260209173424_welcome_email_trigger_v2.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.handle_user_confirmation_email()\nRETURNS TRIGGER AS $$\nBEGIN\n    -- Case 1: UPDATE (Email confirmed after signup)\n    IF (TG_OP = 'UPDATE') THEN\n        IF (OLD.email_confirmed_at IS NULL AND NEW.email_confirmed_at IS NOT NULL) THEN\n            PERFORM net.http_post(\n                url := 'https://xpmbnznsmsujjuwumfiw.supabase.co/functions/v1/send-welcome-email',\n                headers := '{\"Content-Type\": \"application/json\", \"x-bravita-secret\": \"bravita-welcome-secret-2026\"}'::jsonb,\n                body := jsonb_build_object('user_id', NEW.id)\n            );\n        END IF;\n    -- Case 2: INSERT (New user signed up with auto-confirmed email)\n    ELSIF (TG_OP = 'INSERT') THEN\n        IF (NEW.email_confirmed_at IS NOT NULL) THEN\n            PERFORM net.http_post(\n                url := 'https://xpmbnznsmsujjuwumfiw.supabase.co/functions/v1/send-welcome-email',\n                headers := '{\"Content-Type\": \"application/json\", \"x-bravita-secret\": \"bravita-welcome-secret-2026\"}'::jsonb,\n                body := jsonb_build_object('user_id', NEW.id)\n            );\n        END IF;\n    END IF;\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Re-create the trigger to include INSERT\nDROP TRIGGER IF EXISTS on_auth_user_confirmed_email ON auth.users","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TRIGGER on_auth_user_confirmed_email\n    AFTER INSERT OR UPDATE ON auth.users\n    FOR EACH ROW\n    EXECUTE FUNCTION public.handle_user_confirmation_email()","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260209173424"},{"text":"welcome_email_trigger_v2"},{"binary":"0000000100000000000000190000000300000001000004ac435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e68616e646c655f757365725f636f6e6669726d6174696f6e5f656d61696c28290a52455455524e5320545249474745522041532024240a424547494e0a202020202d2d204361736520313a205550444154452028456d61696c20636f6e6669726d6564206166746572207369676e7570290a202020204946202854475f4f50203d20275550444154452729205448454e0a2020202020202020494620284f4c442e656d61696c5f636f6e6669726d65645f6174204953204e554c4c20414e44204e45572e656d61696c5f636f6e6669726d65645f6174204953204e4f54204e554c4c29205448454e0a202020202020202020202020504552464f524d206e65742e687474705f706f7374280a2020202020202020202020202020202075726c203a3d202768747470733a2f2f78706d626e7a6e736d73756a6a7577756d6669772e73757061626173652e636f2f66756e6374696f6e732f76312f73656e642d77656c636f6d652d656d61696c272c0a2020202020202020202020202020202068656164657273203a3d20277b22436f6e74656e742d54797065223a20226170706c69636174696f6e2f6a736f6e222c2022782d627261766974612d736563726574223a2022627261766974612d77656c636f6d652d7365637265742d32303236227d273a3a6a736f6e622c0a20202020202020202020202020202020626f6479203a3d206a736f6e625f6275696c645f6f626a6563742827757365725f6964272c204e45572e6964290a202020202020202020202020293b0a2020202020202020454e442049463b0a202020202d2d204361736520323a20494e5345525420284e65772075736572207369676e65642075702077697468206175746f2d636f6e6669726d656420656d61696c290a20202020454c534946202854475f4f50203d2027494e534552542729205448454e0a2020202020202020494620284e45572e656d61696c5f636f6e6669726d65645f6174204953204e4f54204e554c4c29205448454e0a202020202020202020202020504552464f524d206e65742e687474705f706f7374280a2020202020202020202020202020202075726c203a3d202768747470733a2f2f78706d626e7a6e736d73756a6a7577756d6669772e73757061626173652e636f2f66756e6374696f6e732f76312f73656e642d77656c636f6d652d656d61696c272c0a2020202020202020202020202020202068656164657273203a3d20277b22436f6e74656e742d54797065223a20226170706c69636174696f6e2f6a736f6e222c2022782d627261766974612d736563726574223a2022627261766974612d77656c636f6d652d7365637265742d32303236227d273a3a6a736f6e622c0a20202020202020202020202020202020626f6479203a3d206a736f6e625f6275696c645f6f626a6563742827757365725f6964272c204e45572e6964290a202020202020202020202020293b0a2020202020202020454e442049463b0a20202020454e442049463b0a2020202052455455524e204e45573b0a454e443b0a2424204c414e475541474520706c706773716c20534543555249545920444546494e45520000006c2d2d2052652d63726561746520746865207472696767657220746f20696e636c75646520494e534552540a44524f50205452494747455220494620455849535453206f6e5f617574685f757365725f636f6e6669726d65645f656d61696c204f4e20617574682e7573657273000000a24352454154452054524947474552206f6e5f617574685f757365725f636f6e6669726d65645f656d61696c0a20202020414654455220494e53455254204f5220555044415445204f4e20617574682e75736572730a20202020464f52204541434820524f570a20202020455845435554452046554e4354494f4e207075626c69632e68616e646c655f757365725f636f6e6669726d6174696f6e5f656d61696c2829"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260209181039_fix_handle_new_user_to_include_signup_data.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Update handle_new_user to read phone, full_name, user_type, company_name from user_metadata\nCREATE OR REPLACE FUNCTION public.handle_new_user()\n RETURNS trigger\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\nBEGIN\n  INSERT INTO public.profiles (\n    id, \n    email, \n    phone, \n    full_name, \n    user_type, \n    company_name,\n    profile_complete\n  )\n  VALUES (\n    new.id, \n    new.email,\n    COALESCE(new.raw_user_meta_data-\u003e\u003e'phone', null),\n    COALESCE(new.raw_user_meta_data-\u003e\u003e'full_name', null),\n    COALESCE(new.raw_user_meta_data-\u003e\u003e'user_type', 'individual'),\n    COALESCE(new.raw_user_meta_data-\u003e\u003e'company_name', null),\n    -- Profile is complete if full_name and phone are provided\n    CASE \n      WHEN (new.raw_user_meta_data-\u003e\u003e'full_name') IS NOT NULL \n       AND (new.raw_user_meta_data-\u003e\u003e'phone') IS NOT NULL \n      THEN true \n      ELSE false \n    END\n  );\n  RETURN new;\nEND;\n$function$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260209181039"},{"text":"fix_handle_new_user_to_include_signup_data"},{"binary":"0000000100000000000000190000000100000001000003ab2d2d205570646174652068616e646c655f6e65775f7573657220746f20726561642070686f6e652c2066756c6c5f6e616d652c20757365725f747970652c20636f6d70616e795f6e616d652066726f6d20757365725f6d657461646174610a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e68616e646c655f6e65775f7573657228290a2052455455524e5320747269676765720a204c414e475541474520706c706773716c0a20534543555249545920444546494e45520a20534554207365617263685f7061746820544f20277075626c6963270a4153202466756e6374696f6e240a424547494e0a2020494e5345525420494e544f207075626c69632e70726f66696c657320280a2020202069642c200a20202020656d61696c2c200a2020202070686f6e652c200a2020202066756c6c5f6e616d652c200a20202020757365725f747970652c200a20202020636f6d70616e795f6e616d652c0a2020202070726f66696c655f636f6d706c6574650a2020290a202056414c55455320280a202020206e65772e69642c200a202020206e65772e656d61696c2c0a20202020434f414c45534345286e65772e7261775f757365725f6d6574615f646174612d3e3e2770686f6e65272c206e756c6c292c0a20202020434f414c45534345286e65772e7261775f757365725f6d6574615f646174612d3e3e2766756c6c5f6e616d65272c206e756c6c292c0a20202020434f414c45534345286e65772e7261775f757365725f6d6574615f646174612d3e3e27757365725f74797065272c2027696e646976696475616c27292c0a20202020434f414c45534345286e65772e7261775f757365725f6d6574615f646174612d3e3e27636f6d70616e795f6e616d65272c206e756c6c292c0a202020202d2d2050726f66696c6520697320636f6d706c6574652069662066756c6c5f6e616d6520616e642070686f6e65206172652070726f76696465640a2020202043415345200a2020202020205748454e20286e65772e7261775f757365725f6d6574615f646174612d3e3e2766756c6c5f6e616d652729204953204e4f54204e554c4c200a20202020202020414e4420286e65772e7261775f757365725f6d6574615f646174612d3e3e2770686f6e652729204953204e4f54204e554c4c200a2020202020205448454e2074727565200a202020202020454c53452066616c7365200a20202020454e440a2020293b0a202052455455524e206e65773b0a454e443b0a2466756e6374696f6e24"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260209181249_update_profile_on_email_confirmation.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 1. Revert handle_new_user to create minimal profile (id + email only)\nCREATE OR REPLACE FUNCTION public.handle_new_user()\n RETURNS trigger\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\nBEGIN\n  -- Create minimal profile on signup (before email confirmation)\n  INSERT INTO public.profiles (id, email, user_type, profile_complete)\n  VALUES (\n    new.id, \n    new.email,\n    'individual',\n    false -- Profile is not complete until email is confirmed\n  );\n  RETURN new;\nEND;\n$function$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Update handle_user_confirmation_email to also populate profile data\nCREATE OR REPLACE FUNCTION public.handle_user_confirmation_email()\n RETURNS trigger\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\nBEGIN\n    -- Case 1: UPDATE (Email confirmed after signup)\n    IF (TG_OP = 'UPDATE') THEN\n        IF (OLD.email_confirmed_at IS NULL AND NEW.email_confirmed_at IS NOT NULL) THEN\n            -- Update profile with user metadata now that email is confirmed\n            UPDATE public.profiles\n            SET \n                phone = COALESCE(NEW.raw_user_meta_data-\u003e\u003e'phone', phone),\n                full_name = COALESCE(NEW.raw_user_meta_data-\u003e\u003e'full_name', full_name),\n                user_type = COALESCE(NEW.raw_user_meta_data-\u003e\u003e'user_type', user_type, 'individual'),\n                company_name = COALESCE(NEW.raw_user_meta_data-\u003e\u003e'company_name', company_name),\n                profile_complete = CASE \n                    WHEN (NEW.raw_user_meta_data-\u003e\u003e'full_name') IS NOT NULL \n                     AND (NEW.raw_user_meta_data-\u003e\u003e'phone') IS NOT NULL \n                    THEN true \n                    ELSE false \n                END,\n                updated_at = NOW()\n            WHERE id = NEW.id;\n            \n            -- Send welcome email\n            PERFORM net.http_post(\n                url := 'https://xpmbnznsmsujjuwumfiw.supabase.co/functions/v1/send-welcome-email',\n                headers := '{\"Content-Type\": \"application/json\", \"x-bravita-secret\": \"bravita-welcome-secret-2026\"}'::jsonb,\n                body := jsonb_build_object('user_id', NEW.id)\n            );\n        END IF;\n    -- Case 2: INSERT (New user signed up with auto-confirmed email, e.g. OAuth)\n    ELSIF (TG_OP = 'INSERT') THEN\n        IF (NEW.email_confirmed_at IS NOT NULL) THEN\n            -- Update profile with user metadata\n            UPDATE public.profiles\n            SET \n                phone = COALESCE(NEW.raw_user_meta_data-\u003e\u003e'phone', phone),\n                full_name = COALESCE(NEW.raw_user_meta_data-\u003e\u003e'full_name', full_name),\n                user_type = COALESCE(NEW.raw_user_meta_data-\u003e\u003e'user_type', user_type, 'individual'),\n                company_name = COALESCE(NEW.raw_user_meta_data-\u003e\u003e'company_name', company_name),\n                profile_complete = CASE \n                    WHEN (NEW.raw_user_meta_data-\u003e\u003e'full_name') IS NOT NULL \n                     AND (NEW.raw_user_meta_data-\u003e\u003e'phone') IS NOT NULL \n                    THEN true \n                    ELSE false \n                END,\n                updated_at = NOW()\n            WHERE id = NEW.id;\n            \n            -- Send welcome email\n            PERFORM net.http_post(\n                url := 'https://xpmbnznsmsujjuwumfiw.supabase.co/functions/v1/send-welcome-email',\n                headers := '{\"Content-Type\": \"application/json\", \"x-bravita-secret\": \"bravita-welcome-secret-2026\"}'::jsonb,\n                body := jsonb_build_object('user_id', NEW.id)\n            );\n        END IF;\n    END IF;\n    RETURN NEW;\nEND;\n$function$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260209181249"},{"text":"update_profile_on_email_confirmation"},{"binary":"0000000100000000000000190000000200000001000002052d2d20312e205265766572742068616e646c655f6e65775f7573657220746f20637265617465206d696e696d616c2070726f66696c6520286964202b20656d61696c206f6e6c79290a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e68616e646c655f6e65775f7573657228290a2052455455524e5320747269676765720a204c414e475541474520706c706773716c0a20534543555249545920444546494e45520a20534554207365617263685f7061746820544f20277075626c6963270a4153202466756e6374696f6e240a424547494e0a20202d2d20437265617465206d696e696d616c2070726f66696c65206f6e207369676e757020286265666f726520656d61696c20636f6e6669726d6174696f6e290a2020494e5345525420494e544f207075626c69632e70726f66696c6573202869642c20656d61696c2c20757365725f747970652c2070726f66696c655f636f6d706c657465290a202056414c55455320280a202020206e65772e69642c200a202020206e65772e656d61696c2c0a2020202027696e646976696475616c272c0a2020202066616c7365202d2d2050726f66696c65206973206e6f7420636f6d706c65746520756e74696c20656d61696c20697320636f6e6669726d65640a2020293b0a202052455455524e206e65773b0a454e443b0a2466756e6374696f6e2400000bd12d2d20322e205570646174652068616e646c655f757365725f636f6e6669726d6174696f6e5f656d61696c20746f20616c736f20706f70756c6174652070726f66696c6520646174610a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e68616e646c655f757365725f636f6e6669726d6174696f6e5f656d61696c28290a2052455455524e5320747269676765720a204c414e475541474520706c706773716c0a20534543555249545920444546494e45520a4153202466756e6374696f6e240a424547494e0a202020202d2d204361736520313a205550444154452028456d61696c20636f6e6669726d6564206166746572207369676e7570290a202020204946202854475f4f50203d20275550444154452729205448454e0a2020202020202020494620284f4c442e656d61696c5f636f6e6669726d65645f6174204953204e554c4c20414e44204e45572e656d61696c5f636f6e6669726d65645f6174204953204e4f54204e554c4c29205448454e0a2020202020202020202020202d2d205570646174652070726f66696c6520776974682075736572206d65746164617461206e6f77207468617420656d61696c20697320636f6e6669726d65640a202020202020202020202020555044415445207075626c69632e70726f66696c65730a202020202020202020202020534554200a2020202020202020202020202020202070686f6e65203d20434f414c45534345284e45572e7261775f757365725f6d6574615f646174612d3e3e2770686f6e65272c2070686f6e65292c0a2020202020202020202020202020202066756c6c5f6e616d65203d20434f414c45534345284e45572e7261775f757365725f6d6574615f646174612d3e3e2766756c6c5f6e616d65272c2066756c6c5f6e616d65292c0a20202020202020202020202020202020757365725f74797065203d20434f414c45534345284e45572e7261775f757365725f6d6574615f646174612d3e3e27757365725f74797065272c20757365725f747970652c2027696e646976696475616c27292c0a20202020202020202020202020202020636f6d70616e795f6e616d65203d20434f414c45534345284e45572e7261775f757365725f6d6574615f646174612d3e3e27636f6d70616e795f6e616d65272c20636f6d70616e795f6e616d65292c0a2020202020202020202020202020202070726f66696c655f636f6d706c657465203d2043415345200a20202020202020202020202020202020202020205748454e20284e45572e7261775f757365725f6d6574615f646174612d3e3e2766756c6c5f6e616d652729204953204e4f54204e554c4c200a202020202020202020202020202020202020202020414e4420284e45572e7261775f757365725f6d6574615f646174612d3e3e2770686f6e652729204953204e4f54204e554c4c200a20202020202020202020202020202020202020205448454e2074727565200a2020202020202020202020202020202020202020454c53452066616c7365200a20202020202020202020202020202020454e442c0a20202020202020202020202020202020757064617465645f6174203d204e4f5728290a2020202020202020202020205748455245206964203d204e45572e69643b0a2020202020202020202020200a2020202020202020202020202d2d2053656e642077656c636f6d6520656d61696c0a202020202020202020202020504552464f524d206e65742e687474705f706f7374280a2020202020202020202020202020202075726c203a3d202768747470733a2f2f78706d626e7a6e736d73756a6a7577756d6669772e73757061626173652e636f2f66756e6374696f6e732f76312f73656e642d77656c636f6d652d656d61696c272c0a2020202020202020202020202020202068656164657273203a3d20277b22436f6e74656e742d54797065223a20226170706c69636174696f6e2f6a736f6e222c2022782d627261766974612d736563726574223a2022627261766974612d77656c636f6d652d7365637265742d32303236227d273a3a6a736f6e622c0a20202020202020202020202020202020626f6479203a3d206a736f6e625f6275696c645f6f626a6563742827757365725f6964272c204e45572e6964290a202020202020202020202020293b0a2020202020202020454e442049463b0a202020202d2d204361736520323a20494e5345525420284e65772075736572207369676e65642075702077697468206175746f2d636f6e6669726d656420656d61696c2c20652e672e204f41757468290a20202020454c534946202854475f4f50203d2027494e534552542729205448454e0a2020202020202020494620284e45572e656d61696c5f636f6e6669726d65645f6174204953204e4f54204e554c4c29205448454e0a2020202020202020202020202d2d205570646174652070726f66696c6520776974682075736572206d657461646174610a202020202020202020202020555044415445207075626c69632e70726f66696c65730a202020202020202020202020534554200a2020202020202020202020202020202070686f6e65203d20434f414c45534345284e45572e7261775f757365725f6d6574615f646174612d3e3e2770686f6e65272c2070686f6e65292c0a2020202020202020202020202020202066756c6c5f6e616d65203d20434f414c45534345284e45572e7261775f757365725f6d6574615f646174612d3e3e2766756c6c5f6e616d65272c2066756c6c5f6e616d65292c0a20202020202020202020202020202020757365725f74797065203d20434f414c45534345284e45572e7261775f757365725f6d6574615f646174612d3e3e27757365725f74797065272c20757365725f747970652c2027696e646976696475616c27292c0a20202020202020202020202020202020636f6d70616e795f6e616d65203d20434f414c45534345284e45572e7261775f757365725f6d6574615f646174612d3e3e27636f6d70616e795f6e616d65272c20636f6d70616e795f6e616d65292c0a2020202020202020202020202020202070726f66696c655f636f6d706c657465203d2043415345200a20202020202020202020202020202020202020205748454e20284e45572e7261775f757365725f6d6574615f646174612d3e3e2766756c6c5f6e616d652729204953204e4f54204e554c4c200a202020202020202020202020202020202020202020414e4420284e45572e7261775f757365725f6d6574615f646174612d3e3e2770686f6e652729204953204e4f54204e554c4c200a20202020202020202020202020202020202020205448454e2074727565200a2020202020202020202020202020202020202020454c53452066616c7365200a20202020202020202020202020202020454e442c0a20202020202020202020202020202020757064617465645f6174203d204e4f5728290a2020202020202020202020205748455245206964203d204e45572e69643b0a2020202020202020202020200a2020202020202020202020202d2d2053656e642077656c636f6d6520656d61696c0a202020202020202020202020504552464f524d206e65742e687474705f706f7374280a2020202020202020202020202020202075726c203a3d202768747470733a2f2f78706d626e7a6e736d73756a6a7577756d6669772e73757061626173652e636f2f66756e6374696f6e732f76312f73656e642d77656c636f6d652d656d61696c272c0a2020202020202020202020202020202068656164657273203a3d20277b22436f6e74656e742d54797065223a20226170706c69636174696f6e2f6a736f6e222c2022782d627261766974612d736563726574223a2022627261766974612d77656c636f6d652d7365637265742d32303236227d273a3a6a736f6e622c0a20202020202020202020202020202020626f6479203a3d206a736f6e625f6275696c645f6f626a6563742827757365725f6964272c204e45572e6964290a202020202020202020202020293b0a2020202020202020454e442049463b0a20202020454e442049463b0a2020202052455455524e204e45573b0a454e443b0a2466756e6374696f6e24"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260209181433_keep_profile_incomplete_after_email_confirmation.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Update handle_user_confirmation_email to NOT set profile_complete = true\n-- Profile completion happens on the complete_profile page, not automatically\nCREATE OR REPLACE FUNCTION public.handle_user_confirmation_email()\n RETURNS trigger\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\nBEGIN\n    -- Case 1: UPDATE (Email confirmed after signup)\n    IF (TG_OP = 'UPDATE') THEN\n        IF (OLD.email_confirmed_at IS NULL AND NEW.email_confirmed_at IS NOT NULL) THEN\n            -- Update profile with user metadata now that email is confirmed\n            -- BUT keep profile_complete = false - user must complete profile manually\n            UPDATE public.profiles\n            SET \n                phone = COALESCE(NEW.raw_user_meta_data-\u003e\u003e'phone', phone),\n                full_name = COALESCE(NEW.raw_user_meta_data-\u003e\u003e'full_name', full_name),\n                user_type = COALESCE(NEW.raw_user_meta_data-\u003e\u003e'user_type', user_type, 'individual'),\n                company_name = COALESCE(NEW.raw_user_meta_data-\u003e\u003e'company_name', company_name),\n                -- profile_complete stays false - controlled by complete_profile page\n                updated_at = NOW()\n            WHERE id = NEW.id;\n            \n            -- Send welcome email\n            PERFORM net.http_post(\n                url := 'https://xpmbnznsmsujjuwumfiw.supabase.co/functions/v1/send-welcome-email',\n                headers := '{\"Content-Type\": \"application/json\", \"x-bravita-secret\": \"bravita-welcome-secret-2026\"}'::jsonb,\n                body := jsonb_build_object('user_id', NEW.id)\n            );\n        END IF;\n    -- Case 2: INSERT (New user signed up with auto-confirmed email, e.g. OAuth)\n    ELSIF (TG_OP = 'INSERT') THEN\n        IF (NEW.email_confirmed_at IS NOT NULL) THEN\n            -- Update profile with user metadata\n            -- BUT keep profile_complete = false - user must complete profile manually\n            UPDATE public.profiles\n            SET \n                phone = COALESCE(NEW.raw_user_meta_data-\u003e\u003e'phone', phone),\n                full_name = COALESCE(NEW.raw_user_meta_data-\u003e\u003e'full_name', full_name),\n                user_type = COALESCE(NEW.raw_user_meta_data-\u003e\u003e'user_type', user_type, 'individual'),\n                company_name = COALESCE(NEW.raw_user_meta_data-\u003e\u003e'company_name', company_name),\n                -- profile_complete stays false - controlled by complete_profile page\n                updated_at = NOW()\n            WHERE id = NEW.id;\n            \n            -- Send welcome email\n            PERFORM net.http_post(\n                url := 'https://xpmbnznsmsujjuwumfiw.supabase.co/functions/v1/send-welcome-email',\n                headers := '{\"Content-Type\": \"application/json\", \"x-bravita-secret\": \"bravita-welcome-secret-2026\"}'::jsonb,\n                body := jsonb_build_object('user_id', NEW.id)\n            );\n        END IF;\n    END IF;\n    RETURN NEW;\nEND;\n$function$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260209181433"},{"text":"keep_profile_incomplete_after_email_confirmation"},{"binary":"000000010000000000000019000000010000000100000b552d2d205570646174652068616e646c655f757365725f636f6e6669726d6174696f6e5f656d61696c20746f204e4f54207365742070726f66696c655f636f6d706c657465203d20747275650a2d2d2050726f66696c6520636f6d706c6574696f6e2068617070656e73206f6e2074686520636f6d706c6574655f70726f66696c6520706167652c206e6f74206175746f6d61746963616c6c790a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e68616e646c655f757365725f636f6e6669726d6174696f6e5f656d61696c28290a2052455455524e5320747269676765720a204c414e475541474520706c706773716c0a20534543555249545920444546494e45520a4153202466756e6374696f6e240a424547494e0a202020202d2d204361736520313a205550444154452028456d61696c20636f6e6669726d6564206166746572207369676e7570290a202020204946202854475f4f50203d20275550444154452729205448454e0a2020202020202020494620284f4c442e656d61696c5f636f6e6669726d65645f6174204953204e554c4c20414e44204e45572e656d61696c5f636f6e6669726d65645f6174204953204e4f54204e554c4c29205448454e0a2020202020202020202020202d2d205570646174652070726f66696c6520776974682075736572206d65746164617461206e6f77207468617420656d61696c20697320636f6e6669726d65640a2020202020202020202020202d2d20425554206b6565702070726f66696c655f636f6d706c657465203d2066616c7365202d2075736572206d75737420636f6d706c6574652070726f66696c65206d616e75616c6c790a202020202020202020202020555044415445207075626c69632e70726f66696c65730a202020202020202020202020534554200a2020202020202020202020202020202070686f6e65203d20434f414c45534345284e45572e7261775f757365725f6d6574615f646174612d3e3e2770686f6e65272c2070686f6e65292c0a2020202020202020202020202020202066756c6c5f6e616d65203d20434f414c45534345284e45572e7261775f757365725f6d6574615f646174612d3e3e2766756c6c5f6e616d65272c2066756c6c5f6e616d65292c0a20202020202020202020202020202020757365725f74797065203d20434f414c45534345284e45572e7261775f757365725f6d6574615f646174612d3e3e27757365725f74797065272c20757365725f747970652c2027696e646976696475616c27292c0a20202020202020202020202020202020636f6d70616e795f6e616d65203d20434f414c45534345284e45572e7261775f757365725f6d6574615f646174612d3e3e27636f6d70616e795f6e616d65272c20636f6d70616e795f6e616d65292c0a202020202020202020202020202020202d2d2070726f66696c655f636f6d706c6574652073746179732066616c7365202d20636f6e74726f6c6c656420627920636f6d706c6574655f70726f66696c6520706167650a20202020202020202020202020202020757064617465645f6174203d204e4f5728290a2020202020202020202020205748455245206964203d204e45572e69643b0a2020202020202020202020200a2020202020202020202020202d2d2053656e642077656c636f6d6520656d61696c0a202020202020202020202020504552464f524d206e65742e687474705f706f7374280a2020202020202020202020202020202075726c203a3d202768747470733a2f2f78706d626e7a6e736d73756a6a7577756d6669772e73757061626173652e636f2f66756e6374696f6e732f76312f73656e642d77656c636f6d652d656d61696c272c0a2020202020202020202020202020202068656164657273203a3d20277b22436f6e74656e742d54797065223a20226170706c69636174696f6e2f6a736f6e222c2022782d627261766974612d736563726574223a2022627261766974612d77656c636f6d652d7365637265742d32303236227d273a3a6a736f6e622c0a20202020202020202020202020202020626f6479203a3d206a736f6e625f6275696c645f6f626a6563742827757365725f6964272c204e45572e6964290a202020202020202020202020293b0a2020202020202020454e442049463b0a202020202d2d204361736520323a20494e5345525420284e65772075736572207369676e65642075702077697468206175746f2d636f6e6669726d656420656d61696c2c20652e672e204f41757468290a20202020454c534946202854475f4f50203d2027494e534552542729205448454e0a2020202020202020494620284e45572e656d61696c5f636f6e6669726d65645f6174204953204e4f54204e554c4c29205448454e0a2020202020202020202020202d2d205570646174652070726f66696c6520776974682075736572206d657461646174610a2020202020202020202020202d2d20425554206b6565702070726f66696c655f636f6d706c657465203d2066616c7365202d2075736572206d75737420636f6d706c6574652070726f66696c65206d616e75616c6c790a202020202020202020202020555044415445207075626c69632e70726f66696c65730a202020202020202020202020534554200a2020202020202020202020202020202070686f6e65203d20434f414c45534345284e45572e7261775f757365725f6d6574615f646174612d3e3e2770686f6e65272c2070686f6e65292c0a2020202020202020202020202020202066756c6c5f6e616d65203d20434f414c45534345284e45572e7261775f757365725f6d6574615f646174612d3e3e2766756c6c5f6e616d65272c2066756c6c5f6e616d65292c0a20202020202020202020202020202020757365725f74797065203d20434f414c45534345284e45572e7261775f757365725f6d6574615f646174612d3e3e27757365725f74797065272c20757365725f747970652c2027696e646976696475616c27292c0a20202020202020202020202020202020636f6d70616e795f6e616d65203d20434f414c45534345284e45572e7261775f757365725f6d6574615f646174612d3e3e27636f6d70616e795f6e616d65272c20636f6d70616e795f6e616d65292c0a202020202020202020202020202020202d2d2070726f66696c655f636f6d706c6574652073746179732066616c7365202d20636f6e74726f6c6c656420627920636f6d706c6574655f70726f66696c6520706167650a20202020202020202020202020202020757064617465645f6174203d204e4f5728290a2020202020202020202020205748455245206964203d204e45572e69643b0a2020202020202020202020200a2020202020202020202020202d2d2053656e642077656c636f6d6520656d61696c0a202020202020202020202020504552464f524d206e65742e687474705f706f7374280a2020202020202020202020202020202075726c203a3d202768747470733a2f2f78706d626e7a6e736d73756a6a7577756d6669772e73757061626173652e636f2f66756e6374696f6e732f76312f73656e642d77656c636f6d652d656d61696c272c0a2020202020202020202020202020202068656164657273203a3d20277b22436f6e74656e742d54797065223a20226170706c69636174696f6e2f6a736f6e222c2022782d627261766974612d736563726574223a2022627261766974612d77656c636f6d652d7365637265742d32303236227d273a3a6a736f6e622c0a20202020202020202020202020202020626f6479203a3d206a736f6e625f6275696c645f6f626a6563742827757365725f6964272c204e45572e6964290a202020202020202020202020293b0a2020202020202020454e442049463b0a20202020454e442049463b0a2020202052455455524e204e45573b0a454e443b0a2466756e6374696f6e24"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260209183143_add_public_read_policy_for_promo_codes.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Allow everyone to read active promo codes (for the marquee)\nCREATE POLICY \"Public can view active promo codes\"\nON public.promo_codes\nFOR SELECT\nTO public\nUSING (is_active = true)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260209183143"},{"text":"add_public_read_policy_for_promo_codes"},{"binary":"0000000100000000000000190000000100000001000000b52d2d20416c6c6f772065766572796f6e6520746f2072656164206163746976652070726f6d6f20636f6465732028666f7220746865206d617271756565290a43524541544520504f4c49435920225075626c69632063616e2076696577206163746976652070726f6d6f20636f646573220a4f4e207075626c69632e70726f6d6f5f636f6465730a464f522053454c4543540a544f207075626c69630a5553494e47202869735f616374697665203d207472756529"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260209184843_fix_phone_data_and_add_validation.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Fix existing phone numbers that don't start with +\r\nUPDATE public.profiles \r\nSET phone = '+90' || phone \r\nWHERE phone IS NOT NULL \r\n  AND phone != '' \r\n  AND phone NOT LIKE '+%'\r\n  AND length(phone) \u003e= 10","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Clear invalid short phone numbers (less than 10 digits after +)\r\nUPDATE public.profiles \r\nSET phone = NULL \r\nWHERE phone IS NOT NULL \r\n  AND phone != '' \r\n  AND (\r\n    length(regexp_replace(phone, '[^0-9]', '', 'g')) \u003c 10\r\n    OR NOT phone ~ '^\\+[0-9]'\r\n  )","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Now add the constraints\r\n\r\n-- Phone number format validation (international format, minimum 10 digits)\r\nALTER TABLE public.profiles\r\nADD CONSTRAINT profiles_phone_format_check \r\nCHECK (\r\n    phone IS NULL OR \r\n    phone = '' OR \r\n    (phone ~ '^\\+[0-9]{10,15}$')\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Full name minimum length validation\r\nALTER TABLE public.profiles\r\nADD CONSTRAINT profiles_full_name_min_length_check \r\nCHECK (\r\n    full_name IS NULL OR \r\n    full_name = '' OR \r\n    length(trim(full_name)) \u003e= 2\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- User type validation\r\nALTER TABLE public.profiles\r\nADD CONSTRAINT profiles_user_type_check \r\nCHECK (\r\n    user_type IN ('individual', 'company')\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Company name required for company users\r\nALTER TABLE public.profiles ADD COLUMN IF NOT EXISTS company_name TEXT","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.profiles\r\nADD CONSTRAINT profiles_company_name_required_check \r\nCHECK (\r\n    user_type != 'company' OR \r\n    (company_name IS NOT NULL AND length(trim(company_name)) \u003e= 1)\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260209184843"},{"text":"fix_phone_data_and_add_validation"},{"binary":"0000000100000000000000190000000700000001000000cf2d2d20466978206578697374696e672070686f6e65206e756d62657273207468617420646f6e27742073746172742077697468202b0d0a555044415445207075626c69632e70726f66696c6573200d0a5345542070686f6e65203d20272b393027207c7c2070686f6e65200d0a57484552452070686f6e65204953204e4f54204e554c4c200d0a2020414e442070686f6e6520213d202727200d0a2020414e442070686f6e65204e4f54204c494b4520272b25270d0a2020414e44206c656e6774682870686f6e6529203e3d203130000001042d2d20436c65617220696e76616c69642073686f72742070686f6e65206e756d6265727320286c657373207468616e20313020646967697473206166746572202b290d0a555044415445207075626c69632e70726f66696c6573200d0a5345542070686f6e65203d204e554c4c200d0a57484552452070686f6e65204953204e4f54204e554c4c200d0a2020414e442070686f6e6520213d202727200d0a2020414e4420280d0a202020206c656e677468287265676578705f7265706c6163652870686f6e652c20275b5e302d395d272c2027272c202767272929203c2031300d0a202020204f52204e4f542070686f6e65207e20275e5c2b5b302d395d270d0a2020290000010c2d2d204e6f77206164642074686520636f6e73747261696e74730d0a0d0a2d2d2050686f6e65206e756d62657220666f726d61742076616c69646174696f6e2028696e7465726e6174696f6e616c20666f726d61742c206d696e696d756d20313020646967697473290d0a414c544552205441424c45207075626c69632e70726f66696c65730d0a41444420434f4e53545241494e542070726f66696c65735f70686f6e655f666f726d61745f636865636b200d0a434845434b20280d0a2020202070686f6e65204953204e554c4c204f52200d0a2020202070686f6e65203d202727204f52200d0a202020202870686f6e65207e20275e5c2b5b302d395d7b31302c31357d2427290d0a29000000d92d2d2046756c6c206e616d65206d696e696d756d206c656e6774682076616c69646174696f6e0d0a414c544552205441424c45207075626c69632e70726f66696c65730d0a41444420434f4e53545241494e542070726f66696c65735f66756c6c5f6e616d655f6d696e5f6c656e6774685f636865636b200d0a434845434b20280d0a2020202066756c6c5f6e616d65204953204e554c4c204f52200d0a2020202066756c6c5f6e616d65203d202727204f52200d0a202020206c656e677468287472696d2866756c6c5f6e616d652929203e3d20320d0a29000000962d2d205573657220747970652076616c69646174696f6e0d0a414c544552205441424c45207075626c69632e70726f66696c65730d0a41444420434f4e53545241494e542070726f66696c65735f757365725f747970655f636865636b200d0a434845434b20280d0a20202020757365725f7479706520494e202827696e646976696475616c272c2027636f6d70616e7927290d0a29000000722d2d20436f6d70616e79206e616d6520726571756972656420666f7220636f6d70616e792075736572730d0a414c544552205441424c45207075626c69632e70726f66696c65732041444420434f4c554d4e204946204e4f542045584953545320636f6d70616e795f6e616d652054455854000000c1414c544552205441424c45207075626c69632e70726f66696c65730d0a41444420434f4e53545241494e542070726f66696c65735f636f6d70616e795f6e616d655f72657175697265645f636865636b200d0a434845434b20280d0a20202020757365725f7479706520213d2027636f6d70616e7927204f52200d0a2020202028636f6d70616e795f6e616d65204953204e4f54204e554c4c20414e44206c656e677468287472696d28636f6d70616e795f6e616d652929203e3d2031290d0a29"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"UPDATE 0"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"UPDATE 0"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260209185658_fix_is_admin_privilege_escalation.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- CRITICAL SECURITY FIX: Prevent privilege escalation via is_admin column\n-- Users should NOT be able to set is_admin=true on their own profile\n\n-- Drop existing policy\nDROP POLICY IF EXISTS \"Users can update own profile\" ON public.profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Create new policy that excludes is_admin column for regular users\n-- Users can update their own profile, but cannot change is_admin\nCREATE POLICY \"Users can update own profile (non-admin fields)\"\nON public.profiles\nFOR UPDATE\nTO authenticated\nUSING (id = auth.uid())\nWITH CHECK (\n    id = auth.uid() \n    AND (\n        -- If user is not admin, they cannot change is_admin to true\n        is_admin = false \n        OR \n        -- Only existing admins can have is_admin = true\n        (SELECT is_admin FROM public.profiles WHERE id = auth.uid()) = true\n    )\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Separate policy for admins to update any profile including is_admin\nCREATE POLICY \"Admins can update any profile\"\nON public.profiles\nFOR UPDATE\nTO authenticated\nUSING (is_admin_user(auth.uid()))\nWITH CHECK (is_admin_user(auth.uid()))","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260209185658"},{"text":"fix_is_admin_privilege_escalation"},{"binary":"0000000100000000000000190000000300000001000000f12d2d20435249544943414c205345435552495459204649583a2050726576656e742070726976696c65676520657363616c6174696f6e207669612069735f61646d696e20636f6c756d6e0a2d2d2055736572732073686f756c64204e4f542062652061626c6520746f207365742069735f61646d696e3d74727565206f6e207468656972206f776e2070726f66696c650a0a2d2d2044726f70206578697374696e6720706f6c6963790a44524f5020504f4c49435920494620455849535453202255736572732063616e20757064617465206f776e2070726f66696c6522204f4e207075626c69632e70726f66696c6573000002312d2d20437265617465206e657720706f6c6963792074686174206578636c756465732069735f61646d696e20636f6c756d6e20666f7220726567756c61722075736572730a2d2d2055736572732063616e20757064617465207468656972206f776e2070726f66696c652c206275742063616e6e6f74206368616e67652069735f61646d696e0a43524541544520504f4c494359202255736572732063616e20757064617465206f776e2070726f66696c6520286e6f6e2d61646d696e206669656c647329220a4f4e207075626c69632e70726f66696c65730a464f52205550444154450a544f2061757468656e746963617465640a5553494e4720286964203d20617574682e7569642829290a5749544820434845434b20280a202020206964203d20617574682e7569642829200a20202020414e4420280a20202020202020202d2d2049662075736572206973206e6f742061646d696e2c20746865792063616e6e6f74206368616e67652069735f61646d696e20746f20747275650a202020202020202069735f61646d696e203d2066616c7365200a20202020202020204f52200a20202020202020202d2d204f6e6c79206578697374696e672061646d696e732063616e20686176652069735f61646d696e203d20747275650a20202020202020202853454c4543542069735f61646d696e2046524f4d207075626c69632e70726f66696c6573205748455245206964203d20617574682e756964282929203d20747275650a20202020290a29000000ec2d2d20536570617261746520706f6c69637920666f722061646d696e7320746f2075706461746520616e792070726f66696c6520696e636c7564696e672069735f61646d696e0a43524541544520504f4c494359202241646d696e732063616e2075706461746520616e792070726f66696c65220a4f4e207075626c69632e70726f66696c65730a464f52205550444154450a544f2061757468656e746963617465640a5553494e47202869735f61646d696e5f7573657228617574682e756964282929290a5749544820434845434b202869735f61646d696e5f7573657228617574682e75696428292929"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260209185825_fix_function_search_path.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Fix function search_path security issue\nALTER FUNCTION public.handle_user_confirmation_email() \nSET search_path = public, pg_temp","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260209185825"},{"text":"fix_function_search_path"},{"binary":"0000000100000000000000190000000100000001000000842d2d204669782066756e6374696f6e207365617263685f706174682073656375726974792069737375650a414c5445522046554e4354494f4e207075626c69632e68616e646c655f757365725f636f6e6669726d6174696f6e5f656d61696c2829200a534554207365617263685f70617468203d207075626c69632c2070675f74656d70"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260209195516_fix_profiles_rls_recursion.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"BEGIN","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Drop old policies with exact names found in pg_policies\nDROP POLICY IF EXISTS \"Admins can update any profile\" ON public.profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users and admins can view profiles\" ON public.profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users can insert own profile\" ON public.profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users can update own profile (non-admin fields)\" ON public.profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 1. SELECT: Users can see themselves, admins can see everyone\nCREATE POLICY \"Profiles are viewable by owners and admins\" ON public.profiles\nFOR SELECT TO authenticated\nUSING (id = auth.uid() OR is_admin_user(auth.uid()))","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. INSERT: Users can create their own profile\nCREATE POLICY \"Users can insert their own profile\" ON public.profiles\nFOR INSERT TO authenticated\nWITH CHECK (id = auth.uid())","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. UPDATE: Users can update their own profile (with admin protection), admins can update any\nCREATE POLICY \"Profiles are updatable by owners and admins\" ON public.profiles\nFOR UPDATE TO authenticated\nUSING (id = auth.uid() OR is_admin_user(auth.uid()))\nWITH CHECK (\n  (id = auth.uid() AND (is_admin = false OR is_admin_user(auth.uid())))\n  OR \n  is_admin_user(auth.uid())\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260209195516"},{"text":"fix_profiles_rls_recursion"},{"binary":"000000010000000000000019000000090000000100000005424547494e000000832d2d2044726f70206f6c6420706f6c69636965732077697468206578616374206e616d657320666f756e6420696e2070675f706f6c69636965730a44524f5020504f4c49435920494620455849535453202241646d696e732063616e2075706461746520616e792070726f66696c6522204f4e207075626c69632e70726f66696c65730000004d44524f5020504f4c494359204946204558495354532022557365727320616e642061646d696e732063616e20766965772070726f66696c657322204f4e207075626c69632e70726f66696c65730000004744524f5020504f4c49435920494620455849535453202255736572732063616e20696e73657274206f776e2070726f66696c6522204f4e207075626c69632e70726f66696c65730000005a44524f5020504f4c49435920494620455849535453202255736572732063616e20757064617465206f776e2070726f66696c6520286e6f6e2d61646d696e206669656c64732922204f4e207075626c69632e70726f66696c6573000000de2d2d20312e2053454c4543543a2055736572732063616e20736565207468656d73656c7665732c2061646d696e732063616e207365652065766572796f6e650a43524541544520504f4c494359202250726f66696c657320617265207669657761626c65206279206f776e65727320616e642061646d696e7322204f4e207075626c69632e70726f66696c65730a464f522053454c45435420544f2061757468656e746963617465640a5553494e4720286964203d20617574682e7569642829204f522069735f61646d696e5f7573657228617574682e75696428292929000000af2d2d20322e20494e534552543a2055736572732063616e20637265617465207468656972206f776e2070726f66696c650a43524541544520504f4c494359202255736572732063616e20696e73657274207468656972206f776e2070726f66696c6522204f4e207075626c69632e70726f66696c65730a464f5220494e5345525420544f2061757468656e746963617465640a5749544820434845434b20286964203d20617574682e756964282929000001782d2d20332e205550444154453a2055736572732063616e20757064617465207468656972206f776e2070726f66696c652028776974682061646d696e2070726f74656374696f6e292c2061646d696e732063616e2075706461746520616e790a43524541544520504f4c494359202250726f66696c65732061726520757064617461626c65206279206f776e65727320616e642061646d696e7322204f4e207075626c69632e70726f66696c65730a464f522055504441544520544f2061757468656e746963617465640a5553494e4720286964203d20617574682e7569642829204f522069735f61646d696e5f7573657228617574682e756964282929290a5749544820434845434b20280a2020286964203d20617574682e756964282920414e44202869735f61646d696e203d2066616c7365204f522069735f61646d696e5f7573657228617574682e75696428292929290a20204f52200a202069735f61646d696e5f7573657228617574682e7569642829290a2900000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260209200156_enforce_default_address_deletion_rule.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.check_default_address_deletion()\nRETURNS TRIGGER AS $$\nBEGIN\n    -- Eer silinen adres varsaylan ise VE kullancnn baka adresleri de varsa ilemi engelle\n    IF OLD.is_default = true AND EXISTS (\n        SELECT 1 FROM public.addresses \n        WHERE user_id = OLD.user_id AND id != OLD.id\n    ) THEN\n        RAISE EXCEPTION 'Birden fazla adresiniz varken varsaylan adresinizi silemezsiniz. Ltfen nce baka bir adresi varsaylan yapn.'\n        USING ERRCODE = 'P0001'; -- Custom exception code\n    END IF;\n    RETURN OLD;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Trigger' olutur (Eer varsa nce sil)\nDROP TRIGGER IF EXISTS tr_check_default_address_deletion ON public.addresses","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TRIGGER tr_check_default_address_deletion\nBEFORE DELETE ON public.addresses\nFOR EACH ROW\nEXECUTE FUNCTION public.check_default_address_deletion()","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260209200156"},{"text":"enforce_default_address_deletion_rule"},{"binary":"000000010000000000000019000000030000000100000269435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e636865636b5f64656661756c745f616464726573735f64656c6574696f6e28290a52455455524e5320545249474745522041532024240a424547494e0a202020202d2d2045c49f65722073696c696e656e20616472657320766172736179c4b16c616e20697365205645206b756c6c616ec4b163c4b16ec4b16e206261c59f6b612061647265736c6572692064652076617273612069c59f6c656d6920656e67656c6c650a202020204946204f4c442e69735f64656661756c74203d207472756520414e442045584953545320280a202020202020202053454c45435420312046524f4d207075626c69632e616464726573736573200a2020202020202020574845524520757365725f6964203d204f4c442e757365725f696420414e4420696420213d204f4c442e69640a2020202029205448454e0a2020202020202020524149534520455843455054494f4e202742697264656e2066617a6c61206164726573696e697a207661726b656e20766172736179c4b16c616e206164726573696e697a692073696c656d657a73696e697a2e204cc3bc7466656e20c3b66e6365206261c59f6b61206269722061647265736920766172736179c4b16c616e20796170c4b16e2e270a20202020202020205553494e4720455252434f4445203d20275030303031273b202d2d20437573746f6d20657863657074696f6e20636f64650a20202020454e442049463b0a2020202052455455524e204f4c443b0a454e443b0a2424204c414e475541474520706c706773716c20534543555249545920444546494e45520000007b2d2d205472696767657227c4b1206f6c75c59f747572202845c49f657220766172736120c3b66e63652073696c290a44524f502054524947474552204946204558495354532074725f636865636b5f64656661756c745f616464726573735f64656c6574696f6e204f4e207075626c69632e6164647265737365730000009843524541544520545249474745522074725f636865636b5f64656661756c745f616464726573735f64656c6574696f6e0a4245464f52452044454c455445204f4e207075626c69632e6164647265737365730a464f52204541434820524f570a455845435554452046554e4354494f4e207075626c69632e636865636b5f64656661756c745f616464726573735f64656c6574696f6e2829"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"trigger \"tr_check_default_address_deletion\" for relation \"public.addresses\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): trigger "tr_check_default_address_deletion" for relation "public.addresses" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260209200348_neutral_default_address_deletion_rule.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.check_default_address_deletion()\nRETURNS TRIGGER AS $$\nBEGIN\n    IF OLD.is_default = true AND EXISTS (\n        SELECT 1 FROM public.addresses \n        WHERE user_id = OLD.user_id AND id != OLD.id\n    ) THEN\n        RAISE EXCEPTION 'ERR_ADDRESS_DELETE_DEFAULT_FORBIDDEN';\n    END IF;\n    RETURN OLD;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260209200348"},{"text":"neutral_default_address_deletion_rule"},{"binary":"000000010000000000000019000000010000000100000176435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e636865636b5f64656661756c745f616464726573735f64656c6574696f6e28290a52455455524e5320545249474745522041532024240a424547494e0a202020204946204f4c442e69735f64656661756c74203d207472756520414e442045584953545320280a202020202020202053454c45435420312046524f4d207075626c69632e616464726573736573200a2020202020202020574845524520757365725f6964203d204f4c442e757365725f696420414e4420696420213d204f4c442e69640a2020202029205448454e0a2020202020202020524149534520455843455054494f4e20274552525f414444524553535f44454c4554455f44454641554c545f464f5242494444454e273b0a20202020454e442049463b0a2020202052455455524e204f4c443b0a454e443b0a2424204c414e475541474520706c706773716c20534543555249545920444546494e4552"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260209201319_fix_function_search_path_security.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Fix for function_search_path_mutable\r\nALTER FUNCTION public.check_default_address_deletion() SET search_path = ''","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Fix for auth_rls_initplan in profiles table\r\n-- We need to drop and recreate or alter the policies\r\n\r\n-- 1. Profiles are viewable by owners and admins\r\nDROP POLICY IF EXISTS \"Profiles are viewable by owners and admins\" ON public.profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Profiles are viewable by owners and admins\" ON public.profiles\r\nFOR SELECT USING (\r\n    id = (select auth.uid()) \r\n    OR \r\n    (select public.is_admin_user())\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Users can insert their own profile\r\nDROP POLICY IF EXISTS \"Users can insert their own profile\" ON public.profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users can insert their own profile\" ON public.profiles\r\nFOR INSERT WITH CHECK (id = (select auth.uid()))","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. Profiles are updatable by owners and admins\r\nDROP POLICY IF EXISTS \"Profiles are updatable by owners and admins\" ON public.profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Profiles are updatable by owners and admins\" ON public.profiles\r\nFOR UPDATE USING (\r\n    id = (select auth.uid()) \r\n    OR \r\n    (select public.is_admin_user())\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Fix for multiple_permissive_policies on promo_codes\r\n-- Combine \"Admin full access\" and \"Public can view active\" for SELECT\r\nDROP POLICY IF EXISTS \"Admin full access for promo codes\" ON public.promo_codes","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Public can view active promo codes\" ON public.promo_codes","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Viewable by admins or public if active\" ON public.promo_codes\r\nFOR SELECT USING (\r\n    (select public.is_admin_user())\r\n    OR \r\n    (is_active = true)\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admin full access for promo codes\" for relation \"public.promo_codes\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Fix for unindexed_foreign_keys\r\nCREATE INDEX IF NOT EXISTS idx_admin_audit_log_admin_user_id ON public.admin_audit_log(admin_user_id)","ParameterOIDs":null}
NOTICE (00000): policy "Admin full access for promo codes" for relation "public.promo_codes" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260209201319"},{"text":"fix_function_search_path_security"},{"binary":"0000000100000000000000190000000b00000001000000742d2d2046697820666f722066756e6374696f6e5f7365617263685f706174685f6d757461626c650d0a414c5445522046554e4354494f4e207075626c69632e636865636b5f64656661756c745f616464726573735f64656c6574696f6e282920534554207365617263685f70617468203d202727000000f02d2d2046697820666f7220617574685f726c735f696e6974706c616e20696e2070726f66696c6573207461626c650d0a2d2d205765206e65656420746f2064726f7020616e64207265637265617465206f7220616c7465722074686520706f6c69636965730d0a0d0a2d2d20312e2050726f66696c657320617265207669657761626c65206279206f776e65727320616e642061646d696e730d0a44524f5020504f4c49435920494620455849535453202250726f66696c657320617265207669657761626c65206279206f776e65727320616e642061646d696e7322204f4e207075626c69632e70726f66696c6573000000b143524541544520504f4c494359202250726f66696c657320617265207669657761626c65206279206f776e65727320616e642061646d696e7322204f4e207075626c69632e70726f66696c65730d0a464f522053454c454354205553494e4720280d0a202020206964203d202873656c65637420617574682e756964282929200d0a202020204f52200d0a202020202873656c656374207075626c69632e69735f61646d696e5f757365722829290d0a29000000772d2d20322e2055736572732063616e20696e73657274207468656972206f776e2070726f66696c650d0a44524f5020504f4c49435920494620455849535453202255736572732063616e20696e73657274207468656972206f776e2070726f66696c6522204f4e207075626c69632e70726f66696c65730000007743524541544520504f4c494359202255736572732063616e20696e73657274207468656972206f776e2070726f66696c6522204f4e207075626c69632e70726f66696c65730d0a464f5220494e53455254205749544820434845434b20286964203d202873656c65637420617574682e75696428292929000000892d2d20332e2050726f66696c65732061726520757064617461626c65206279206f776e65727320616e642061646d696e730d0a44524f5020504f4c49435920494620455849535453202250726f66696c65732061726520757064617461626c65206279206f776e65727320616e642061646d696e7322204f4e207075626c69632e70726f66696c6573000000b243524541544520504f4c494359202250726f66696c65732061726520757064617461626c65206279206f776e65727320616e642061646d696e7322204f4e207075626c69632e70726f66696c65730d0a464f5220555044415445205553494e4720280d0a202020206964203d202873656c65637420617574682e756964282929200d0a202020204f52200d0a202020202873656c656374207075626c69632e69735f61646d696e5f757365722829290d0a29000000cf2d2d2046697820666f72206d756c7469706c655f7065726d6973736976655f706f6c6963696573206f6e2070726f6d6f5f636f6465730d0a2d2d20436f6d62696e65202241646d696e2066756c6c206163636573732220616e6420225075626c69632063616e2076696577206163746976652220666f722053454c4543540d0a44524f5020504f4c49435920494620455849535453202241646d696e2066756c6c2061636365737320666f722070726f6d6f20636f64657322204f4e207075626c69632e70726f6d6f5f636f6465730000005044524f5020504f4c4943592049462045584953545320225075626c69632063616e2076696577206163746976652070726f6d6f20636f64657322204f4e207075626c69632e70726f6d6f5f636f646573000000a943524541544520504f4c49435920225669657761626c652062792061646d696e73206f72207075626c69632069662061637469766522204f4e207075626c69632e70726f6d6f5f636f6465730d0a464f522053454c454354205553494e4720280d0a202020202873656c656374207075626c69632e69735f61646d696e5f757365722829290d0a202020204f52200d0a202020202869735f616374697665203d2074727565290d0a29000000882d2d2046697820666f7220756e696e64657865645f666f726569676e5f6b6579730d0a43524541544520494e444558204946204e4f5420455849535453206964785f61646d696e5f61756469745f6c6f675f61646d696e5f757365725f6964204f4e207075626c69632e61646d696e5f61756469745f6c6f672861646d696e5f757365725f696429"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260209201923_fix_function_search_path_security.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER FUNCTION public.check_default_address_deletion() SET search_path = public, pg_temp","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260209201923"},{"text":"fix_function_search_path_security"},{"binary":"000000010000000000000019000000010000000100000058414c5445522046554e4354494f4e207075626c69632e636865636b5f64656661756c745f616464726573735f64656c6574696f6e282920534554207365617263685f70617468203d207075626c69632c2070675f74656d70"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260209202559_add_superadmin_role.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 1. Add is_superadmin column to profiles\nALTER TABLE public.profiles ADD COLUMN IF NOT EXISTS is_superadmin BOOLEAN DEFAULT FALSE","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Set umut.dog91@gmail.com as superadmin\nUPDATE public.profiles \nSET is_superadmin = TRUE, is_admin = TRUE \nWHERE email = 'umut.dog91@gmail.com'","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. Update auth metadata for the superadmin\nUPDATE auth.users\nSET \n    raw_app_meta_data = raw_app_meta_data || jsonb_build_object('is_superadmin', TRUE, 'is_admin', TRUE),\n    raw_user_meta_data = raw_user_meta_data || jsonb_build_object('is_superadmin', TRUE, 'is_admin', TRUE)\nWHERE email = 'umut.dog91@gmail.com'","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 4. Update the sync_user_admin_status RPC to enforce superadmin check\nCREATE OR REPLACE FUNCTION public.sync_user_admin_status(p_user_id UUID, p_is_admin BOOLEAN)\nRETURNS VOID AS $$\nDECLARE\n    v_target_email TEXT;\n    v_caller_id UUID;\n    v_caller_is_superadmin BOOLEAN;\nBEGIN\n    v_caller_id := auth.uid();\n    \n    -- Check if caller is superadmin\n    SELECT is_superadmin INTO v_caller_is_superadmin \n    FROM public.profiles \n    WHERE id = v_caller_id;\n\n    IF v_caller_is_superadmin IS NOT TRUE THEN\n        RAISE EXCEPTION 'Sadece sper adminler ynetici yetkilerini deitirebilir.';\n    END IF;\n\n    -- Get target user email\n    SELECT email INTO v_target_email FROM auth.users WHERE id = p_user_id;\n\n    -- Protect superadmins from being demoted (even by other superadmins for safety, or at least self)\n    IF v_target_email = 'umut.dog91@gmail.com' AND p_is_admin = FALSE THEN\n        RAISE EXCEPTION 'Sper admin yetkisi kaldrlamaz.';\n    END IF;\n\n    -- 1. Update public.profiles\n    UPDATE public.profiles\n    SET is_admin = p_is_admin\n    WHERE id = p_user_id;\n\n    -- 2. Update auth.users metadata\n    UPDATE auth.users\n    SET \n        raw_app_meta_data = raw_app_meta_data || jsonb_build_object('is_admin', p_is_admin),\n        raw_user_meta_data = raw_user_meta_data || jsonb_build_object('is_admin', p_is_admin)\n    WHERE id = p_user_id;\n\n    -- 3. Log the action\n    INSERT INTO public.admin_audit_log (admin_user_id, action, target_table, target_id, details)\n    VALUES (\n        v_caller_id, \n        CASE WHEN p_is_admin THEN 'PROMOTED_TO_ADMIN' ELSE 'DEMOTED_FROM_ADMIN' END,\n        'profiles',\n        p_user_id,\n        jsonb_build_object('email', v_target_email)\n    );\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260209202559"},{"text":"add_superadmin_role"},{"binary":"0000000100000000000000190000000400000001000000832d2d20312e204164642069735f737570657261646d696e20636f6c756d6e20746f2070726f66696c65730a414c544552205441424c45207075626c69632e70726f66696c65732041444420434f4c554d4e204946204e4f54204558495354532069735f737570657261646d696e20424f4f4c45414e2044454641554c542046414c5345000000942d2d20322e2053657420756d75742e646f67393140676d61696c2e636f6d20617320737570657261646d696e0a555044415445207075626c69632e70726f66696c6573200a5345542069735f737570657261646d696e203d20545255452c2069735f61646d696e203d2054525545200a574845524520656d61696c203d2027756d75742e646f67393140676d61696c2e636f6d270000013e2d2d20332e205570646174652061757468206d6574616461746120666f722074686520737570657261646d696e0a55504441544520617574682e75736572730a534554200a202020207261775f6170705f6d6574615f64617461203d207261775f6170705f6d6574615f64617461207c7c206a736f6e625f6275696c645f6f626a656374282769735f737570657261646d696e272c20545255452c202769735f61646d696e272c2054525545292c0a202020207261775f757365725f6d6574615f64617461203d207261775f757365725f6d6574615f64617461207c7c206a736f6e625f6275696c645f6f626a656374282769735f737570657261646d696e272c20545255452c202769735f61646d696e272c2054525545290a574845524520656d61696c203d2027756d75742e646f67393140676d61696c2e636f6d27000006fb2d2d20342e20557064617465207468652073796e635f757365725f61646d696e5f7374617475732052504320746f20656e666f72636520737570657261646d696e20636865636b0a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e73796e635f757365725f61646d696e5f73746174757328705f757365725f696420555549442c20705f69735f61646d696e20424f4f4c45414e290a52455455524e5320564f49442041532024240a4445434c4152450a20202020765f7461726765745f656d61696c20544558543b0a20202020765f63616c6c65725f696420555549443b0a20202020765f63616c6c65725f69735f737570657261646d696e20424f4f4c45414e3b0a424547494e0a20202020765f63616c6c65725f6964203a3d20617574682e75696428293b0a202020200a202020202d2d20436865636b2069662063616c6c657220697320737570657261646d696e0a2020202053454c4543542069735f737570657261646d696e20494e544f20765f63616c6c65725f69735f737570657261646d696e200a2020202046524f4d207075626c69632e70726f66696c6573200a202020205748455245206964203d20765f63616c6c65725f69643b0a0a20202020494620765f63616c6c65725f69735f737570657261646d696e204953204e4f542054525545205448454e0a2020202020202020524149534520455843455054494f4e20275361646563652073c3bc7065722061646d696e6c65722079c3b66e6574696369207965746b696c6572696e69206465c49f69c59f7469726562696c69722e273b0a20202020454e442049463b0a0a202020202d2d2047657420746172676574207573657220656d61696c0a2020202053454c45435420656d61696c20494e544f20765f7461726765745f656d61696c2046524f4d20617574682e7573657273205748455245206964203d20705f757365725f69643b0a0a202020202d2d2050726f7465637420737570657261646d696e732066726f6d206265696e672064656d6f74656420286576656e206279206f7468657220737570657261646d696e7320666f72207361666574792c206f72206174206c656173742073656c66290a20202020494620765f7461726765745f656d61696c203d2027756d75742e646f67393140676d61696c2e636f6d2720414e4420705f69735f61646d696e203d2046414c5345205448454e0a2020202020202020524149534520455843455054494f4e202753c3bc7065722061646d696e207965746b697369206b616c64c4b172c4b16c616d617a2e273b0a20202020454e442049463b0a0a202020202d2d20312e20557064617465207075626c69632e70726f66696c65730a20202020555044415445207075626c69632e70726f66696c65730a202020205345542069735f61646d696e203d20705f69735f61646d696e0a202020205748455245206964203d20705f757365725f69643b0a0a202020202d2d20322e2055706461746520617574682e7573657273206d657461646174610a2020202055504441544520617574682e75736572730a20202020534554200a20202020202020207261775f6170705f6d6574615f64617461203d207261775f6170705f6d6574615f64617461207c7c206a736f6e625f6275696c645f6f626a656374282769735f61646d696e272c20705f69735f61646d696e292c0a20202020202020207261775f757365725f6d6574615f64617461203d207261775f757365725f6d6574615f64617461207c7c206a736f6e625f6275696c645f6f626a656374282769735f61646d696e272c20705f69735f61646d696e290a202020205748455245206964203d20705f757365725f69643b0a0a202020202d2d20332e204c6f672074686520616374696f6e0a20202020494e5345525420494e544f207075626c69632e61646d696e5f61756469745f6c6f67202861646d696e5f757365725f69642c20616374696f6e2c207461726765745f7461626c652c207461726765745f69642c2064657461696c73290a2020202056414c55455320280a2020202020202020765f63616c6c65725f69642c200a202020202020202043415345205748454e20705f69735f61646d696e205448454e202750524f4d4f5445445f544f5f41444d494e2720454c5345202744454d4f5445445f46524f4d5f41444d494e2720454e442c0a20202020202020202770726f66696c6573272c0a2020202020202020705f757365725f69642c0a20202020202020206a736f6e625f6275696c645f6f626a6563742827656d61696c272c20765f7461726765745f656d61696c290a20202020293b0a454e443b0a2424204c414e475541474520706c706773716c20534543555249545920444546494e455220534554207365617263685f70617468203d207075626c69632c2070675f74656d70"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"UPDATE 0"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"UPDATE 0"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260209203327_strictly_prevent_default_address_deletion.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Update the function to strictly forbid deleting default addresses\nCREATE OR REPLACE FUNCTION public.check_default_address_deletion()\nRETURNS TRIGGER AS $$\nBEGIN\n    IF OLD.is_default = true THEN\n       RAISE EXCEPTION 'ERR_ADDRESS_DELETE_DEFAULT_FORBIDDEN';\n    END IF;\n    RETURN OLD;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260209203327"},{"text":"strictly_prevent_default_address_deletion"},{"binary":"00000001000000000000001900000001000000010000016c2d2d20557064617465207468652066756e6374696f6e20746f207374726963746c7920666f726269642064656c6574696e672064656661756c74206164647265737365730a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e636865636b5f64656661756c745f616464726573735f64656c6574696f6e28290a52455455524e5320545249474745522041532024240a424547494e0a202020204946204f4c442e69735f64656661756c74203d2074727565205448454e0a20202020202020524149534520455843455054494f4e20274552525f414444524553535f44454c4554455f44454641554c545f464f5242494444454e273b0a20202020454e442049463b0a2020202052455455524e204f4c443b0a454e443b0a2424204c414e475541474520706c706773716c20534543555249545920444546494e455220534554207365617263685f70617468203d207075626c69632c2070675f74656d70"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260209203642_harden_profile_validations.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 1. Full name constraint update: strictly 2+ characters, no empty strings allowed for individual users\nALTER TABLE public.profiles \nDROP CONSTRAINT IF EXISTS profiles_full_name_min_length_check","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.profiles \nADD CONSTRAINT profiles_full_name_min_length_check \nCHECK (\n    (user_type = 'company') OR -- Skip for company type if needed, or customize\n    (full_name IS NULL) OR \n    (length(TRIM(BOTH FROM full_name)) \u003e= 2)\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Phone format constraint update: strictly international format, no empty strings\nALTER TABLE public.profiles \nDROP CONSTRAINT IF EXISTS profiles_phone_format_check","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.profiles \nADD CONSTRAINT profiles_phone_format_check \nCHECK (\n    (phone IS NULL) OR \n    (phone ~ '^\\+[0-9]{10,15}$')\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260209203642"},{"text":"harden_profile_validations"},{"binary":"0000000100000000000000190000000400000001000000c32d2d20312e2046756c6c206e616d6520636f6e73747261696e74207570646174653a207374726963746c7920322b20636861726163746572732c206e6f20656d70747920737472696e677320616c6c6f77656420666f7220696e646976696475616c2075736572730a414c544552205441424c45207075626c69632e70726f66696c6573200a44524f5020434f4e53545241494e54204946204558495354532070726f66696c65735f66756c6c5f6e616d655f6d696e5f6c656e6774685f636865636b000000f3414c544552205441424c45207075626c69632e70726f66696c6573200a41444420434f4e53545241494e542070726f66696c65735f66756c6c5f6e616d655f6d696e5f6c656e6774685f636865636b200a434845434b20280a2020202028757365725f74797065203d2027636f6d70616e792729204f52202d2d20536b697020666f7220636f6d70616e792074797065206966206e65656465642c206f7220637573746f6d697a650a202020202866756c6c5f6e616d65204953204e554c4c29204f52200a20202020286c656e677468285452494d28424f54482046524f4d2066756c6c5f6e616d652929203e3d2032290a29000000a82d2d20322e2050686f6e6520666f726d617420636f6e73747261696e74207570646174653a207374726963746c7920696e7465726e6174696f6e616c20666f726d61742c206e6f20656d70747920737472696e67730a414c544552205441424c45207075626c69632e70726f66696c6573200a44524f5020434f4e53545241494e54204946204558495354532070726f66696c65735f70686f6e655f666f726d61745f636865636b0000008b414c544552205441424c45207075626c69632e70726f66696c6573200a41444420434f4e53545241494e542070726f66696c65735f70686f6e655f666f726d61745f636865636b200a434845434b20280a202020202870686f6e65204953204e554c4c29204f52200a202020202870686f6e65207e20275e5c2b5b302d395d7b31302c31357d2427290a29"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260210115413_fix_audit_logs_permissions_and_is_superadmin_column.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 1. profiles tablosuna is_superadmin kolonu ekle (eer yoksa)\nDO $$ \nBEGIN\n    IF NOT EXISTS (\n        SELECT 1 FROM information_schema.columns \n        WHERE table_name = 'profiles' AND column_name = 'is_superadmin'\n    ) THEN\n        ALTER TABLE public.profiles ADD COLUMN is_superadmin BOOLEAN DEFAULT FALSE;\n        COMMENT ON COLUMN public.profiles.is_superadmin IS 'SuperAdmin yetkisi - Sadece audit trail izleme yetkisine sahiptir';\n    END IF;\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Audit log tablosunun RLS ayarlarn gncelle\nALTER TABLE public.admin_audit_log ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Mevcut view policesini kaldr (Adminlere akt, artk sadece Superadmin)\nDROP POLICY IF EXISTS \"Admins can view audit logs\" ON public.admin_audit_log","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Yeni Policy: Sadece SuperAdminler grebilir\nCREATE POLICY \"Superadmins can view audit logs\" ON public.admin_audit_log\n    FOR SELECT \n    USING (\n        EXISTS (\n            SELECT 1 FROM public.profiles \n            WHERE id = auth.uid() AND is_superadmin = true\n        )\n    )","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Yeni Policy: Service role (backend) her zaman log yazabilir\nDROP POLICY IF EXISTS \"Service role can insert audit logs\" ON public.admin_audit_log","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Service role can insert audit logs\" ON public.admin_audit_log\n    FOR INSERT\n    TO service_role\n    WITH CHECK (true)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260210115413"},{"text":"fix_audit_logs_permissions_and_is_superadmin_column"},{"binary":"0000000100000000000000190000000600000001000001cd2d2d20312e2070726f66696c6573207461626c6f73756e612069735f737570657261646d696e206b6f6c6f6e7520656b6c65202865c49f657220796f6b7361290a444f202424200a424547494e0a202020204946204e4f542045584953545320280a202020202020202053454c45435420312046524f4d20696e666f726d6174696f6e5f736368656d612e636f6c756d6e73200a20202020202020205748455245207461626c655f6e616d65203d202770726f66696c65732720414e4420636f6c756d6e5f6e616d65203d202769735f737570657261646d696e270a2020202029205448454e0a2020202020202020414c544552205441424c45207075626c69632e70726f66696c65732041444420434f4c554d4e2069735f737570657261646d696e20424f4f4c45414e2044454641554c542046414c53453b0a2020202020202020434f4d4d454e54204f4e20434f4c554d4e207075626c69632e70726f66696c65732e69735f737570657261646d696e2049532027537570657241646d696e207965746b697369202d2053616465636520617564697420747261696c20697a6c656d65207965746b6973696e65207361686970746972273b0a20202020454e442049463b0a454e44202424000000722d2d20322e204175646974206c6f67207461626c6f73756e756e20524c5320617961726c6172c4b16ec4b12067c3bc6e63656c6c650a414c544552205441424c45207075626c69632e61646d696e5f61756469745f6c6f6720454e41424c4520524f57204c4556454c2053454355524954590000009e2d2d204d6576637574207669657720706f6c69636573696e69206b616c64c4b172202841646d696e6c6572652061c3a7c4b16b74c4b12c20617274c4b16b2073616465636520537570657261646d696e290a44524f5020504f4c49435920494620455849535453202241646d696e732063616e2076696577206175646974206c6f677322204f4e207075626c69632e61646d696e5f61756469745f6c6f670000011c2d2d2059656e6920506f6c6963793a2053616465636520537570657241646d696e6c65722067c3b6726562696c69720a43524541544520504f4c4943592022537570657261646d696e732063616e2076696577206175646974206c6f677322204f4e207075626c69632e61646d696e5f61756469745f6c6f670a20202020464f522053454c454354200a202020205553494e4720280a202020202020202045584953545320280a20202020202020202020202053454c45435420312046524f4d207075626c69632e70726f66696c6573200a2020202020202020202020205748455245206964203d20617574682e756964282920414e442069735f737570657261646d696e203d20747275650a2020202020202020290a2020202029000000932d2d2059656e6920506f6c6963793a205365727669636520726f6c6520286261636b656e642920686572207a616d616e206c6f672079617a6162696c69720a44524f5020504f4c4943592049462045584953545320225365727669636520726f6c652063616e20696e73657274206175646974206c6f677322204f4e207075626c69632e61646d696e5f61756469745f6c6f670000008543524541544520504f4c49435920225365727669636520726f6c652063616e20696e73657274206175646974206c6f677322204f4e207075626c69632e61646d696e5f61756469745f6c6f670a20202020464f5220494e534552540a20202020544f20736572766963655f726f6c650a202020205749544820434845434b20287472756529"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Service role can insert audit logs\" for relation \"public.admin_audit_log\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Service role can insert audit logs" for relation "public.admin_audit_log" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260210121836_add_bank_details_to_site_settings_v2.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Create the table if it doesn't exist\r\nCREATE TABLE IF NOT EXISTS public.site_settings (\r\n    id INTEGER PRIMARY KEY DEFAULT 1 CHECK (id = 1), -- Enforce single row\r\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\r\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Enable RLS\r\nALTER TABLE public.site_settings ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Insert the singleton row if it doesn't exist\r\nINSERT INTO public.site_settings (id) VALUES (1) ON CONFLICT (id) DO NOTHING","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Add RLS policies\r\nDO $$ \r\nBEGIN\r\n    IF NOT EXISTS (SELECT 1 FROM pg_policies WHERE tablename = 'site_settings' AND policyname = 'Public read access') THEN\r\n        CREATE POLICY \"Public read access\" ON public.site_settings FOR SELECT USING (true);\r\n    END IF;\r\n    \r\n    IF NOT EXISTS (SELECT 1 FROM pg_policies WHERE tablename = 'site_settings' AND policyname = 'Admin update access') THEN\r\n       -- Using a safe check that doesn't rely on is_admin_user() if it's not ready, \r\n       -- but based on timeline it should be. \r\n       -- To be safe against function signature changes, we'll just check specific user ID or simple rule if possible, \r\n       -- OR just trust is_admin_user() exists since we fixed it in 20260209...\r\n        CREATE POLICY \"Admin update access\" ON public.site_settings FOR UPDATE USING (\r\n            (SELECT is_admin FROM public.profiles WHERE id = auth.uid())\r\n        ) WITH CHECK (\r\n            (SELECT is_admin FROM public.profiles WHERE id = auth.uid())\r\n        );\r\n    END IF;\r\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Now add the columns\r\nALTER TABLE public.site_settings \r\nADD COLUMN IF NOT EXISTS bank_name TEXT DEFAULT 'Ziraat Bankas',\r\nADD COLUMN IF NOT EXISTS bank_iban TEXT DEFAULT 'TR00 0000 0000 0000 0000 0000 00',\r\nADD COLUMN IF NOT EXISTS bank_account_holder TEXT DEFAULT 'Bravita Salk A..'","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"COMMENT ON COLUMN public.site_settings.bank_name IS 'Bank name for wire transfers'","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"COMMENT ON COLUMN public.site_settings.bank_iban IS 'IBAN for wire transfers'","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"COMMENT ON COLUMN public.site_settings.bank_account_holder IS 'Account holder name for wire transfers'","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260210121836"},{"text":"add_bank_details_to_site_settings_v2"},{"binary":"0000000100000000000000190000000800000001000001182d2d2043726561746520746865207461626c6520696620697420646f65736e27742065786973740d0a435245415445205441424c45204946204e4f5420455849535453207075626c69632e736974655f73657474696e677320280d0a20202020696420494e5445474552205052494d415259204b45592044454641554c54203120434845434b20286964203d2031292c202d2d20456e666f7263652073696e676c6520726f770d0a20202020637265617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c54204e4f5728292c0d0a20202020757064617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c54204e4f5728290d0a29000000492d2d20456e61626c6520524c530d0a414c544552205441424c45207075626c69632e736974655f73657474696e677320454e41424c4520524f57204c4556454c2053454355524954590000007d2d2d20496e73657274207468652073696e676c65746f6e20726f7720696620697420646f65736e27742065786973740d0a494e5345525420494e544f207075626c69632e736974655f73657474696e677320286964292056414c55455320283129204f4e20434f4e464c494354202869642920444f204e4f5448494e47000004012d2d2041646420524c5320706f6c69636965730d0a444f202424200d0a424547494e0d0a202020204946204e4f5420455849535453202853454c45435420312046524f4d2070675f706f6c6963696573205748455245207461626c656e616d65203d2027736974655f73657474696e67732720414e4420706f6c6963796e616d65203d20275075626c69632072656164206163636573732729205448454e0d0a202020202020202043524541544520504f4c49435920225075626c696320726561642061636365737322204f4e207075626c69632e736974655f73657474696e677320464f522053454c454354205553494e47202874727565293b0d0a20202020454e442049463b0d0a202020200d0a202020204946204e4f5420455849535453202853454c45435420312046524f4d2070675f706f6c6963696573205748455245207461626c656e616d65203d2027736974655f73657474696e67732720414e4420706f6c6963796e616d65203d202741646d696e20757064617465206163636573732729205448454e0d0a202020202020202d2d205573696e672061207361666520636865636b207468617420646f65736e27742072656c79206f6e2069735f61646d696e5f7573657228292069662069742773206e6f742072656164792c200d0a202020202020202d2d20627574206261736564206f6e2074696d656c696e652069742073686f756c642062652e200d0a202020202020202d2d20546f206265207361666520616761696e73742066756e6374696f6e207369676e6174757265206368616e6765732c207765276c6c206a75737420636865636b2073706563696669632075736572204944206f722073696d706c652072756c6520696620706f737369626c652c200d0a202020202020202d2d204f52206a7573742074727573742069735f61646d696e5f757365722829206578697374732073696e636520776520666978656420697420696e2032303236303230392e2e2e0d0a202020202020202043524541544520504f4c494359202241646d696e207570646174652061636365737322204f4e207075626c69632e736974655f73657474696e677320464f5220555044415445205553494e4720280d0a2020202020202020202020202853454c4543542069735f61646d696e2046524f4d207075626c69632e70726f66696c6573205748455245206964203d20617574682e7569642829290d0a202020202020202029205749544820434845434b20280d0a2020202020202020202020202853454c4543542069735f61646d696e2046524f4d207075626c69632e70726f66696c6573205748455245206964203d20617574682e7569642829290d0a2020202020202020293b0d0a20202020454e442049463b0d0a454e44202424000001262d2d204e6f77206164642074686520636f6c756d6e730d0a414c544552205441424c45207075626c69632e736974655f73657474696e6773200d0a41444420434f4c554d4e204946204e4f54204558495354532062616e6b5f6e616d6520544558542044454641554c5420275a69726161742042616e6b6173c4b1272c0d0a41444420434f4c554d4e204946204e4f54204558495354532062616e6b5f6962616e20544558542044454641554c5420275452303020303030302030303030203030303020303030302030303030203030272c0d0a41444420434f4c554d4e204946204e4f54204558495354532062616e6b5f6163636f756e745f686f6c64657220544558542044454641554c54202742726176697461205361c49f6cc4b16b20412ec59e2e2700000052434f4d4d454e54204f4e20434f4c554d4e207075626c69632e736974655f73657474696e67732e62616e6b5f6e616d65204953202742616e6b206e616d6520666f722077697265207472616e7366657273270000004d434f4d4d454e54204f4e20434f4c554d4e207075626c69632e736974655f73657474696e67732e62616e6b5f6962616e20495320274942414e20666f722077697265207472616e73666572732700000066434f4d4d454e54204f4e20434f4c554d4e207075626c69632e736974655f73657474696e67732e62616e6b5f6163636f756e745f686f6c64657220495320274163636f756e7420686f6c646572206e616d6520666f722077697265207472616e736665727327"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260210122713_fix_create_order_full_implementation.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION create_order(\n    p_items JSONB,\n    p_shipping_address_id UUID,\n    p_payment_method TEXT,\n    p_promo_code TEXT DEFAULT NULL\n)\nRETURNS JSONB\nLANGUAGE plpgsql\nSECURITY DEFINER\nAS $$\nDECLARE\n    v_user_id UUID;\n    v_item JSONB;\n    v_product_id UUID;\n    v_product_name TEXT;\n    v_product_price DECIMAL(10,2);\n    v_product_stock INT;\n    v_qty INT;\n    v_item_subtotal DECIMAL(10,2);\n    v_total_subtotal DECIMAL(10,2) := 0;\n    v_total_vat DECIMAL(10,2) := 0;\n    v_shipping_cost DECIMAL(10,2);\n    v_final_total DECIMAL(10,2);\n    v_discount DECIMAL(10,2) := 0;\n    v_order_id UUID;\n    v_valid_items JSONB := '[]'::JSONB;\n    v_item_detail JSONB;\n    v_order_details JSONB;\n    v_bank_ref TEXT := NULL;\n    v_address_owner UUID;\n    v_promo_result JSON;\n    v_settings_vat DECIMAL(10,2);\n    v_settings_shipping DECIMAL(10,2);\n    v_settings_threshold DECIMAL(10,2);\nBEGIN\n    -- 0. Get Settings\n    SELECT vat_rate, shipping_cost, free_shipping_threshold \n    INTO v_settings_vat, v_settings_shipping, v_settings_threshold\n    FROM public.site_settings WHERE id = 1;\n\n    -- 1. Get User ID\n    v_user_id := auth.uid();\n    IF v_user_id IS NULL THEN\n        RETURN jsonb_build_object('success', false, 'message', 'Oturum amanz gerekiyor');\n    END IF;\n\n    -- 2. Address Ownership Check (IDOR Security Fix)\n    SELECT user_id INTO v_address_owner FROM addresses WHERE id = p_shipping_address_id;\n    IF v_address_owner IS NULL OR v_address_owner != v_user_id THEN\n         RETURN jsonb_build_object('success', false, 'message', 'Geersiz adres seimi: Adres size ait deil.');\n    END IF;\n\n    -- 3. Iterate input items\n    FOR v_item IN SELECT * FROM jsonb_array_elements(p_items)\n    LOOP\n        v_product_id := (v_item-\u003e\u003e'product_id')::UUID;\n        v_qty := (v_item-\u003e\u003e'quantity')::INT;\n\n        -- Negative Quantity Check (Logic Security Fix)\n        IF v_qty \u003c= 0 THEN\n             RETURN jsonb_build_object('success', false, 'message', 'Geersiz rn miktar: 0 veya negatif olamaz.');\n        END IF;\n\n        -- Get product from DB WITH LOCK (Race Condition Fix)\n        SELECT id, name, price, stock \n        INTO v_product_id, v_product_name, v_product_price, v_product_stock\n        FROM products \n        WHERE id = v_product_id\n        FOR UPDATE; -- Critical: Locks the row\n        \n        IF NOT FOUND THEN\n             RETURN jsonb_build_object('success', false, 'message', 'rn bulunamad: ID ' || v_product_id);\n        END IF;\n\n        -- Check stock validity\n        IF v_product_stock \u003c v_qty THEN\n             RETURN jsonb_build_object('success', false, 'message', 'Yetersiz stok: ' || v_product_name);\n        END IF;\n\n        -- Calculate item totals using DB price\n        v_item_subtotal := v_product_price * v_qty;\n        v_total_subtotal := v_total_subtotal + v_item_subtotal;\n        \n        -- Build item detail\n        v_item_detail := jsonb_build_object(\n            'product_id', v_product_id,\n            'product_name', v_product_name,\n            'quantity', v_qty,\n            'unit_price', v_product_price,\n            'subtotal', v_item_subtotal\n        );\n        \n        v_valid_items := v_valid_items || v_item_detail;\n        \n        -- Update stock\n        UPDATE products SET stock = stock - v_qty WHERE id = v_product_id;\n        \n    END LOOP;\n\n    -- 4. VAT \n    v_total_vat := v_total_subtotal * v_settings_vat;\n\n    -- 5. Shipping\n    IF (v_total_subtotal + v_total_vat) \u003e= v_settings_threshold THEN\n        v_shipping_cost := 0;\n    ELSE\n        v_shipping_cost := v_settings_shipping;\n    END IF;\n\n    -- 6. Promo Code\n    IF p_promo_code IS NOT NULL THEN\n        -- Placeholder for promo logic\n    END IF;\n\n    -- 7. Calculate Final Total\n    v_final_total := v_total_subtotal + v_total_vat + v_shipping_cost;\n\n    -- 8. Create Order\n    v_order_details := jsonb_build_object(\n        'items', v_valid_items,\n        'subtotal', v_total_subtotal,\n        'vat_amount', v_total_vat,\n        'total', v_final_total,\n        'shipping_cost', v_shipping_cost\n    );\n\n    INSERT INTO orders (\n        user_id,\n        order_details,\n        status,\n        payment_method,\n        shipping_address_id,\n        payment_status\n    ) VALUES (\n        v_user_id,\n        v_order_details,\n        'pending',\n        p_payment_method,\n        p_shipping_address_id,\n        'pending'\n    ) RETURNING id INTO v_order_id;\n\n    RETURN jsonb_build_object(\n        'success', true, \n        'orderId', v_order_id,\n        'subtotal', v_total_subtotal,\n        'vat', v_total_vat,\n        'total', v_final_total,\n        'shipping_cost', v_shipping_cost,\n        'message', 'Sipari baaryla oluturuldu'\n    );\n\nEXCEPTION WHEN OTHERS THEN\n    RETURN jsonb_build_object(\n        'success', false, \n        'message', 'Bir hata olutu: ' || SQLERRM\n    );\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260210122713"},{"text":"fix_create_order_full_implementation"},{"binary":"0000000100000000000000190000000100000001000012fa435245415445204f52205245504c4143452046554e4354494f4e206372656174655f6f72646572280a20202020705f6974656d73204a534f4e422c0a20202020705f7368697070696e675f616464726573735f696420555549442c0a20202020705f7061796d656e745f6d6574686f6420544558542c0a20202020705f70726f6d6f5f636f646520544558542044454641554c54204e554c4c0a290a52455455524e53204a534f4e420a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a41532024240a4445434c4152450a20202020765f757365725f696420555549443b0a20202020765f6974656d204a534f4e423b0a20202020765f70726f647563745f696420555549443b0a20202020765f70726f647563745f6e616d6520544558543b0a20202020765f70726f647563745f707269636520444543494d414c2831302c32293b0a20202020765f70726f647563745f73746f636b20494e543b0a20202020765f71747920494e543b0a20202020765f6974656d5f737562746f74616c20444543494d414c2831302c32293b0a20202020765f746f74616c5f737562746f74616c20444543494d414c2831302c3229203a3d20303b0a20202020765f746f74616c5f76617420444543494d414c2831302c3229203a3d20303b0a20202020765f7368697070696e675f636f737420444543494d414c2831302c32293b0a20202020765f66696e616c5f746f74616c20444543494d414c2831302c32293b0a20202020765f646973636f756e7420444543494d414c2831302c3229203a3d20303b0a20202020765f6f726465725f696420555549443b0a20202020765f76616c69645f6974656d73204a534f4e42203a3d20275b5d273a3a4a534f4e423b0a20202020765f6974656d5f64657461696c204a534f4e423b0a20202020765f6f726465725f64657461696c73204a534f4e423b0a20202020765f62616e6b5f7265662054455854203a3d204e554c4c3b0a20202020765f616464726573735f6f776e657220555549443b0a20202020765f70726f6d6f5f726573756c74204a534f4e3b0a20202020765f73657474696e67735f76617420444543494d414c2831302c32293b0a20202020765f73657474696e67735f7368697070696e6720444543494d414c2831302c32293b0a20202020765f73657474696e67735f7468726573686f6c6420444543494d414c2831302c32293b0a424547494e0a202020202d2d20302e204765742053657474696e67730a2020202053454c454354207661745f726174652c207368697070696e675f636f73742c20667265655f7368697070696e675f7468726573686f6c64200a20202020494e544f20765f73657474696e67735f7661742c20765f73657474696e67735f7368697070696e672c20765f73657474696e67735f7468726573686f6c640a2020202046524f4d207075626c69632e736974655f73657474696e6773205748455245206964203d20313b0a0a202020202d2d20312e2047657420557365722049440a20202020765f757365725f6964203a3d20617574682e75696428293b0a20202020494620765f757365725f6964204953204e554c4c205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274f747572756d2061c3a76d616ec4b17a20676572656b69796f7227293b0a20202020454e442049463b0a0a202020202d2d20322e2041646472657373204f776e65727368697020436865636b202849444f5220536563757269747920466978290a2020202053454c45435420757365725f696420494e544f20765f616464726573735f6f776e65722046524f4d20616464726573736573205748455245206964203d20705f7368697070696e675f616464726573735f69643b0a20202020494620765f616464726573735f6f776e6572204953204e554c4c204f5220765f616464726573735f6f776e657220213d20765f757365725f6964205448454e0a20202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274765c3a7657273697a206164726573207365c3a7696d693a2041647265732073697a6520616974206465c49f696c2e27293b0a20202020454e442049463b0a0a202020202d2d20332e204974657261746520696e707574206974656d730a20202020464f5220765f6974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e747328705f6974656d73290a202020204c4f4f500a2020202020202020765f70726f647563745f6964203a3d2028765f6974656d2d3e3e2770726f647563745f696427293a3a555549443b0a2020202020202020765f717479203a3d2028765f6974656d2d3e3e277175616e7469747927293a3a494e543b0a0a20202020202020202d2d204e65676174697665205175616e7469747920436865636b20284c6f67696320536563757269747920466978290a2020202020202020494620765f717479203c3d2030205448454e0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274765c3a7657273697a20c3bc72c3bc6e206d696b746172c4b13a20302076657961206e656761746966206f6c616d617a2e27293b0a2020202020202020454e442049463b0a0a20202020202020202d2d204765742070726f647563742066726f6d2044422057495448204c4f434b20285261636520436f6e646974696f6e20466978290a202020202020202053454c4543542069642c206e616d652c2070726963652c2073746f636b200a2020202020202020494e544f20765f70726f647563745f69642c20765f70726f647563745f6e616d652c20765f70726f647563745f70726963652c20765f70726f647563745f73746f636b0a202020202020202046524f4d2070726f6475637473200a20202020202020205748455245206964203d20765f70726f647563745f69640a2020202020202020464f52205550444154453b202d2d20437269746963616c3a204c6f636b732074686520726f770a20202020202020200a20202020202020204946204e4f5420464f554e44205448454e0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c2027c39c72c3bc6e2062756c756e616d6164c4b13a2049442027207c7c20765f70726f647563745f6964293b0a2020202020202020454e442049463b0a0a20202020202020202d2d20436865636b2073746f636b2076616c69646974790a2020202020202020494620765f70726f647563745f73746f636b203c20765f717479205448454e0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c2027596574657273697a2073746f6b3a2027207c7c20765f70726f647563745f6e616d65293b0a2020202020202020454e442049463b0a0a20202020202020202d2d2043616c63756c617465206974656d20746f74616c73207573696e672044422070726963650a2020202020202020765f6974656d5f737562746f74616c203a3d20765f70726f647563745f7072696365202a20765f7174793b0a2020202020202020765f746f74616c5f737562746f74616c203a3d20765f746f74616c5f737562746f74616c202b20765f6974656d5f737562746f74616c3b0a20202020202020200a20202020202020202d2d204275696c64206974656d2064657461696c0a2020202020202020765f6974656d5f64657461696c203a3d206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202770726f647563745f6964272c20765f70726f647563745f69642c0a2020202020202020202020202770726f647563745f6e616d65272c20765f70726f647563745f6e616d652c0a202020202020202020202020277175616e74697479272c20765f7174792c0a20202020202020202020202027756e69745f7072696365272c20765f70726f647563745f70726963652c0a20202020202020202020202027737562746f74616c272c20765f6974656d5f737562746f74616c0a2020202020202020293b0a20202020202020200a2020202020202020765f76616c69645f6974656d73203a3d20765f76616c69645f6974656d73207c7c20765f6974656d5f64657461696c3b0a20202020202020200a20202020202020202d2d205570646174652073746f636b0a20202020202020205550444154452070726f6475637473205345542073746f636b203d2073746f636b202d20765f717479205748455245206964203d20765f70726f647563745f69643b0a20202020202020200a20202020454e44204c4f4f503b0a0a202020202d2d20342e20564154200a20202020765f746f74616c5f766174203a3d20765f746f74616c5f737562746f74616c202a20765f73657474696e67735f7661743b0a0a202020202d2d20352e205368697070696e670a2020202049462028765f746f74616c5f737562746f74616c202b20765f746f74616c5f76617429203e3d20765f73657474696e67735f7468726573686f6c64205448454e0a2020202020202020765f7368697070696e675f636f7374203a3d20303b0a20202020454c53450a2020202020202020765f7368697070696e675f636f7374203a3d20765f73657474696e67735f7368697070696e673b0a20202020454e442049463b0a0a202020202d2d20362e2050726f6d6f20436f64650a20202020494620705f70726f6d6f5f636f6465204953204e4f54204e554c4c205448454e0a20202020202020202d2d20506c616365686f6c64657220666f722070726f6d6f206c6f6769630a20202020454e442049463b0a0a202020202d2d20372e2043616c63756c6174652046696e616c20546f74616c0a20202020765f66696e616c5f746f74616c203a3d20765f746f74616c5f737562746f74616c202b20765f746f74616c5f766174202b20765f7368697070696e675f636f73743b0a0a202020202d2d20382e20437265617465204f726465720a20202020765f6f726465725f64657461696c73203a3d206a736f6e625f6275696c645f6f626a656374280a2020202020202020276974656d73272c20765f76616c69645f6974656d732c0a202020202020202027737562746f74616c272c20765f746f74616c5f737562746f74616c2c0a2020202020202020277661745f616d6f756e74272c20765f746f74616c5f7661742c0a202020202020202027746f74616c272c20765f66696e616c5f746f74616c2c0a2020202020202020277368697070696e675f636f7374272c20765f7368697070696e675f636f73740a20202020293b0a0a20202020494e5345525420494e544f206f726465727320280a2020202020202020757365725f69642c0a20202020202020206f726465725f64657461696c732c0a20202020202020207374617475732c0a20202020202020207061796d656e745f6d6574686f642c0a20202020202020207368697070696e675f616464726573735f69642c0a20202020202020207061796d656e745f7374617475730a20202020292056414c55455320280a2020202020202020765f757365725f69642c0a2020202020202020765f6f726465725f64657461696c732c0a20202020202020202770656e64696e67272c0a2020202020202020705f7061796d656e745f6d6574686f642c0a2020202020202020705f7368697070696e675f616464726573735f69642c0a20202020202020202770656e64696e67270a20202020292052455455524e494e4720696420494e544f20765f6f726465725f69643b0a0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20747275652c200a2020202020202020276f726465724964272c20765f6f726465725f69642c0a202020202020202027737562746f74616c272c20765f746f74616c5f737562746f74616c2c0a202020202020202027766174272c20765f746f74616c5f7661742c0a202020202020202027746f74616c272c20765f66696e616c5f746f74616c2c0a2020202020202020277368697070696e675f636f7374272c20765f7368697070696e675f636f73742c0a2020202020202020276d657373616765272c2027536970617269c59f206261c59f6172c4b1796c61206f6c75c59f747572756c6475270a20202020293b0a0a455843455054494f4e205748454e204f5448455253205448454e0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c2066616c73652c200a2020202020202020276d657373616765272c20274269722068617461206f6c75c59f74753a2027207c7c2053514c4552524d0a20202020293b0a454e443b0a2424"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260210123005_fix_create_order_snake_case_return.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION create_order(\n    p_items JSONB,\n    p_shipping_address_id UUID,\n    p_payment_method TEXT,\n    p_promo_code TEXT DEFAULT NULL\n)\nRETURNS JSONB\nLANGUAGE plpgsql\nSECURITY DEFINER\nAS $$\nDECLARE\n    v_user_id UUID;\n    v_item JSONB;\n    v_product_id UUID;\n    v_product_name TEXT;\n    v_product_price DECIMAL(10,2);\n    v_product_stock INT;\n    v_qty INT;\n    v_item_subtotal DECIMAL(10,2);\n    v_total_subtotal DECIMAL(10,2) := 0;\n    v_total_vat DECIMAL(10,2) := 0;\n    v_shipping_cost DECIMAL(10,2);\n    v_final_total DECIMAL(10,2);\n    v_discount DECIMAL(10,2) := 0;\n    v_order_id UUID;\n    v_valid_items JSONB := '[]'::JSONB;\n    v_item_detail JSONB;\n    v_order_details JSONB;\n    v_bank_ref TEXT := NULL;\n    v_address_owner UUID;\n    v_promo_result JSON;\n    v_settings_vat DECIMAL(10,2);\n    v_settings_shipping DECIMAL(10,2);\n    v_settings_threshold DECIMAL(10,2);\nBEGIN\n    -- 0. Get Settings\n    SELECT vat_rate, shipping_cost, free_shipping_threshold \n    INTO v_settings_vat, v_settings_shipping, v_settings_threshold\n    FROM public.site_settings WHERE id = 1;\n\n    -- 1. Get User ID\n    v_user_id := auth.uid();\n    IF v_user_id IS NULL THEN\n        RETURN jsonb_build_object('success', false, 'message', 'Oturum amanz gerekiyor');\n    END IF;\n\n    -- 2. Address Ownership Check (IDOR Security Fix)\n    SELECT user_id INTO v_address_owner FROM addresses WHERE id = p_shipping_address_id;\n    IF v_address_owner IS NULL OR v_address_owner != v_user_id THEN\n         RETURN jsonb_build_object('success', false, 'message', 'Geersiz adres seimi: Adres size ait deil.');\n    END IF;\n\n    -- 3. Iterate input items\n    FOR v_item IN SELECT * FROM jsonb_array_elements(p_items)\n    LOOP\n        v_product_id := (v_item-\u003e\u003e'product_id')::UUID;\n        v_qty := (v_item-\u003e\u003e'quantity')::INT;\n\n        -- Negative Quantity Check (Logic Security Fix)\n        IF v_qty \u003c= 0 THEN\n             RETURN jsonb_build_object('success', false, 'message', 'Geersiz rn miktar: 0 veya negatif olamaz.');\n        END IF;\n\n        -- Get product from DB WITH LOCK (Race Condition Fix)\n        SELECT id, name, price, stock \n        INTO v_product_id, v_product_name, v_product_price, v_product_stock\n        FROM products \n        WHERE id = v_product_id\n        FOR UPDATE; -- Critical: Locks the row\n        \n        IF NOT FOUND THEN\n             RETURN jsonb_build_object('success', false, 'message', 'rn bulunamad: ID ' || v_product_id);\n        END IF;\n\n        -- Check stock validity\n        IF v_product_stock \u003c v_qty THEN\n             RETURN jsonb_build_object('success', false, 'message', 'Yetersiz stok: ' || v_product_name);\n        END IF;\n\n        -- Calculate item totals using DB price\n        v_item_subtotal := v_product_price * v_qty;\n        v_total_subtotal := v_total_subtotal + v_item_subtotal;\n        \n        -- Build item detail\n        v_item_detail := jsonb_build_object(\n            'product_id', v_product_id,\n            'product_name', v_product_name,\n            'quantity', v_qty,\n            'unit_price', v_product_price,\n            'subtotal', v_item_subtotal\n        );\n        \n        v_valid_items := v_valid_items || v_item_detail;\n        \n        -- Update stock\n        UPDATE products SET stock = stock - v_qty WHERE id = v_product_id;\n        \n    END LOOP;\n\n    -- 4. VAT \n    v_total_vat := v_total_subtotal * v_settings_vat;\n\n    -- 5. Shipping\n    IF (v_total_subtotal + v_total_vat) \u003e= v_settings_threshold THEN\n        v_shipping_cost := 0;\n    ELSE\n        v_shipping_cost := v_settings_shipping;\n    END IF;\n\n    -- 7. Calculate Final Total\n    v_final_total := v_total_subtotal + v_total_vat + v_shipping_cost;\n\n    -- 8. Create Order\n    v_order_details := jsonb_build_object(\n        'items', v_valid_items,\n        'subtotal', v_total_subtotal,\n        'vat_amount', v_total_vat,\n        'total', v_final_total,\n        'shipping_cost', v_shipping_cost\n    );\n\n    INSERT INTO orders (\n        user_id,\n        order_details,\n        status,\n        payment_method,\n        shipping_address_id,\n        payment_status\n    ) VALUES (\n        v_user_id,\n        v_order_details,\n        'pending',\n        p_payment_method,\n        p_shipping_address_id,\n        'pending'\n    ) RETURNING id INTO v_order_id;\n\n    RETURN jsonb_build_object(\n        'success', true, \n        'order_id', v_order_id,\n        'message', 'Sipari baaryla oluturuldu'\n    );\n\nEXCEPTION WHEN OTHERS THEN\n    RETURN jsonb_build_object(\n        'success', false, \n        'message', 'Bir hata olutu: ' || SQLERRM\n    );\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260210123005"},{"text":"fix_create_order_snake_case_return"},{"binary":"000000010000000000000019000000010000000100001201435245415445204f52205245504c4143452046554e4354494f4e206372656174655f6f72646572280a20202020705f6974656d73204a534f4e422c0a20202020705f7368697070696e675f616464726573735f696420555549442c0a20202020705f7061796d656e745f6d6574686f6420544558542c0a20202020705f70726f6d6f5f636f646520544558542044454641554c54204e554c4c0a290a52455455524e53204a534f4e420a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a41532024240a4445434c4152450a20202020765f757365725f696420555549443b0a20202020765f6974656d204a534f4e423b0a20202020765f70726f647563745f696420555549443b0a20202020765f70726f647563745f6e616d6520544558543b0a20202020765f70726f647563745f707269636520444543494d414c2831302c32293b0a20202020765f70726f647563745f73746f636b20494e543b0a20202020765f71747920494e543b0a20202020765f6974656d5f737562746f74616c20444543494d414c2831302c32293b0a20202020765f746f74616c5f737562746f74616c20444543494d414c2831302c3229203a3d20303b0a20202020765f746f74616c5f76617420444543494d414c2831302c3229203a3d20303b0a20202020765f7368697070696e675f636f737420444543494d414c2831302c32293b0a20202020765f66696e616c5f746f74616c20444543494d414c2831302c32293b0a20202020765f646973636f756e7420444543494d414c2831302c3229203a3d20303b0a20202020765f6f726465725f696420555549443b0a20202020765f76616c69645f6974656d73204a534f4e42203a3d20275b5d273a3a4a534f4e423b0a20202020765f6974656d5f64657461696c204a534f4e423b0a20202020765f6f726465725f64657461696c73204a534f4e423b0a20202020765f62616e6b5f7265662054455854203a3d204e554c4c3b0a20202020765f616464726573735f6f776e657220555549443b0a20202020765f70726f6d6f5f726573756c74204a534f4e3b0a20202020765f73657474696e67735f76617420444543494d414c2831302c32293b0a20202020765f73657474696e67735f7368697070696e6720444543494d414c2831302c32293b0a20202020765f73657474696e67735f7468726573686f6c6420444543494d414c2831302c32293b0a424547494e0a202020202d2d20302e204765742053657474696e67730a2020202053454c454354207661745f726174652c207368697070696e675f636f73742c20667265655f7368697070696e675f7468726573686f6c64200a20202020494e544f20765f73657474696e67735f7661742c20765f73657474696e67735f7368697070696e672c20765f73657474696e67735f7468726573686f6c640a2020202046524f4d207075626c69632e736974655f73657474696e6773205748455245206964203d20313b0a0a202020202d2d20312e2047657420557365722049440a20202020765f757365725f6964203a3d20617574682e75696428293b0a20202020494620765f757365725f6964204953204e554c4c205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274f747572756d2061c3a76d616ec4b17a20676572656b69796f7227293b0a20202020454e442049463b0a0a202020202d2d20322e2041646472657373204f776e65727368697020436865636b202849444f5220536563757269747920466978290a2020202053454c45435420757365725f696420494e544f20765f616464726573735f6f776e65722046524f4d20616464726573736573205748455245206964203d20705f7368697070696e675f616464726573735f69643b0a20202020494620765f616464726573735f6f776e6572204953204e554c4c204f5220765f616464726573735f6f776e657220213d20765f757365725f6964205448454e0a20202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274765c3a7657273697a206164726573207365c3a7696d693a2041647265732073697a6520616974206465c49f696c2e27293b0a20202020454e442049463b0a0a202020202d2d20332e204974657261746520696e707574206974656d730a20202020464f5220765f6974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e747328705f6974656d73290a202020204c4f4f500a2020202020202020765f70726f647563745f6964203a3d2028765f6974656d2d3e3e2770726f647563745f696427293a3a555549443b0a2020202020202020765f717479203a3d2028765f6974656d2d3e3e277175616e7469747927293a3a494e543b0a0a20202020202020202d2d204e65676174697665205175616e7469747920436865636b20284c6f67696320536563757269747920466978290a2020202020202020494620765f717479203c3d2030205448454e0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274765c3a7657273697a20c3bc72c3bc6e206d696b746172c4b13a20302076657961206e656761746966206f6c616d617a2e27293b0a2020202020202020454e442049463b0a0a20202020202020202d2d204765742070726f647563742066726f6d2044422057495448204c4f434b20285261636520436f6e646974696f6e20466978290a202020202020202053454c4543542069642c206e616d652c2070726963652c2073746f636b200a2020202020202020494e544f20765f70726f647563745f69642c20765f70726f647563745f6e616d652c20765f70726f647563745f70726963652c20765f70726f647563745f73746f636b0a202020202020202046524f4d2070726f6475637473200a20202020202020205748455245206964203d20765f70726f647563745f69640a2020202020202020464f52205550444154453b202d2d20437269746963616c3a204c6f636b732074686520726f770a20202020202020200a20202020202020204946204e4f5420464f554e44205448454e0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c2027c39c72c3bc6e2062756c756e616d6164c4b13a2049442027207c7c20765f70726f647563745f6964293b0a2020202020202020454e442049463b0a0a20202020202020202d2d20436865636b2073746f636b2076616c69646974790a2020202020202020494620765f70726f647563745f73746f636b203c20765f717479205448454e0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c2027596574657273697a2073746f6b3a2027207c7c20765f70726f647563745f6e616d65293b0a2020202020202020454e442049463b0a0a20202020202020202d2d2043616c63756c617465206974656d20746f74616c73207573696e672044422070726963650a2020202020202020765f6974656d5f737562746f74616c203a3d20765f70726f647563745f7072696365202a20765f7174793b0a2020202020202020765f746f74616c5f737562746f74616c203a3d20765f746f74616c5f737562746f74616c202b20765f6974656d5f737562746f74616c3b0a20202020202020200a20202020202020202d2d204275696c64206974656d2064657461696c0a2020202020202020765f6974656d5f64657461696c203a3d206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202770726f647563745f6964272c20765f70726f647563745f69642c0a2020202020202020202020202770726f647563745f6e616d65272c20765f70726f647563745f6e616d652c0a202020202020202020202020277175616e74697479272c20765f7174792c0a20202020202020202020202027756e69745f7072696365272c20765f70726f647563745f70726963652c0a20202020202020202020202027737562746f74616c272c20765f6974656d5f737562746f74616c0a2020202020202020293b0a20202020202020200a2020202020202020765f76616c69645f6974656d73203a3d20765f76616c69645f6974656d73207c7c20765f6974656d5f64657461696c3b0a20202020202020200a20202020202020202d2d205570646174652073746f636b0a20202020202020205550444154452070726f6475637473205345542073746f636b203d2073746f636b202d20765f717479205748455245206964203d20765f70726f647563745f69643b0a20202020202020200a20202020454e44204c4f4f503b0a0a202020202d2d20342e20564154200a20202020765f746f74616c5f766174203a3d20765f746f74616c5f737562746f74616c202a20765f73657474696e67735f7661743b0a0a202020202d2d20352e205368697070696e670a2020202049462028765f746f74616c5f737562746f74616c202b20765f746f74616c5f76617429203e3d20765f73657474696e67735f7468726573686f6c64205448454e0a2020202020202020765f7368697070696e675f636f7374203a3d20303b0a20202020454c53450a2020202020202020765f7368697070696e675f636f7374203a3d20765f73657474696e67735f7368697070696e673b0a20202020454e442049463b0a0a202020202d2d20372e2043616c63756c6174652046696e616c20546f74616c0a20202020765f66696e616c5f746f74616c203a3d20765f746f74616c5f737562746f74616c202b20765f746f74616c5f766174202b20765f7368697070696e675f636f73743b0a0a202020202d2d20382e20437265617465204f726465720a20202020765f6f726465725f64657461696c73203a3d206a736f6e625f6275696c645f6f626a656374280a2020202020202020276974656d73272c20765f76616c69645f6974656d732c0a202020202020202027737562746f74616c272c20765f746f74616c5f737562746f74616c2c0a2020202020202020277661745f616d6f756e74272c20765f746f74616c5f7661742c0a202020202020202027746f74616c272c20765f66696e616c5f746f74616c2c0a2020202020202020277368697070696e675f636f7374272c20765f7368697070696e675f636f73740a20202020293b0a0a20202020494e5345525420494e544f206f726465727320280a2020202020202020757365725f69642c0a20202020202020206f726465725f64657461696c732c0a20202020202020207374617475732c0a20202020202020207061796d656e745f6d6574686f642c0a20202020202020207368697070696e675f616464726573735f69642c0a20202020202020207061796d656e745f7374617475730a20202020292056414c55455320280a2020202020202020765f757365725f69642c0a2020202020202020765f6f726465725f64657461696c732c0a20202020202020202770656e64696e67272c0a2020202020202020705f7061796d656e745f6d6574686f642c0a2020202020202020705f7368697070696e675f616464726573735f69642c0a20202020202020202770656e64696e67270a20202020292052455455524e494e4720696420494e544f20765f6f726465725f69643b0a0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20747275652c200a2020202020202020276f726465725f6964272c20765f6f726465725f69642c0a2020202020202020276d657373616765272c2027536970617269c59f206261c59f6172c4b1796c61206f6c75c59f747572756c6475270a20202020293b0a0a455843455054494f4e205748454e204f5448455253205448454e0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c2066616c73652c200a2020202020202020276d657373616765272c20274269722068617461206f6c75c59f74753a2027207c7c2053514c4552524d0a20202020293b0a454e443b0a2424"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260210175158_security_audit_fixes_feb10.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- ============================================================\n-- SECURITY AUDIT FIX: 10 Feb 2026\n-- Fixes: S-02 (mutable search_path), P-01/P-02 (RLS initplan)\n-- ============================================================\n\n-- S-02: Fix mutable search_path on SECURITY DEFINER functions\n-- Pin search_path to prevent search_path hijacking attacks\n\n-- Fix create_order function\nALTER FUNCTION public.create_order SET search_path = public","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Fix admin_update_order_status function\nALTER FUNCTION public.admin_update_order_status SET search_path = public","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Fix get_dashboard_stats function\nALTER FUNCTION public.get_dashboard_stats SET search_path = public","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Fix get_site_setting function (from site_settings migration)\nDO $$ BEGIN\n  ALTER FUNCTION public.get_site_setting SET search_path = public;\nEXCEPTION WHEN undefined_function THEN NULL;\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Fix any other SECURITY DEFINER functions\nDO $$ BEGIN\n  ALTER FUNCTION public.check_admin_status SET search_path = public;\nEXCEPTION WHEN undefined_function THEN NULL;\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- ============================================================\n-- P-01/P-02: Optimize RLS policies to avoid initplan issues\n-- Replace auth.uid() with (select auth.uid()) to prevent \n-- re-evaluation per row (subselect caching)\n-- ============================================================\n\n-- Drop and recreate orders policies with optimized auth check\nDO $$ BEGIN\n  -- Orders: users can view own orders\n  DROP POLICY IF EXISTS \"Users can view own orders\" ON orders;\n  CREATE POLICY \"Users can view own orders\" ON orders\n    FOR SELECT USING (user_id = (SELECT auth.uid()));\n\n  -- Orders: users can insert own orders  \n  DROP POLICY IF EXISTS \"Users can insert own orders\" ON orders;\n  CREATE POLICY \"Users can insert own orders\" ON orders\n    FOR INSERT WITH CHECK (user_id = (SELECT auth.uid()));\n\n  -- Profiles: users can view own profile\n  DROP POLICY IF EXISTS \"Users can view own profile\" ON profiles;\n  CREATE POLICY \"Users can view own profile\" ON profiles\n    FOR SELECT USING (id = (SELECT auth.uid()));\n\n  -- Profiles: users can update own profile\n  DROP POLICY IF EXISTS \"Users can update own profile\" ON profiles;  \n  CREATE POLICY \"Users can update own profile\" ON profiles\n    FOR UPDATE USING (id = (SELECT auth.uid()));\n\n  -- Addresses: users can manage own addresses\n  DROP POLICY IF EXISTS \"Users can view own addresses\" ON addresses;\n  CREATE POLICY \"Users can view own addresses\" ON addresses\n    FOR SELECT USING (user_id = (SELECT auth.uid()));\n\n  DROP POLICY IF EXISTS \"Users can insert own addresses\" ON addresses;\n  CREATE POLICY \"Users can insert own addresses\" ON addresses\n    FOR INSERT WITH CHECK (user_id = (SELECT auth.uid()));\n\n  DROP POLICY IF EXISTS \"Users can update own addresses\" ON addresses;\n  CREATE POLICY \"Users can update own addresses\" ON addresses\n    FOR UPDATE USING (user_id = (SELECT auth.uid()));\n\n  DROP POLICY IF EXISTS \"Users can delete own addresses\" ON addresses;\n  CREATE POLICY \"Users can delete own addresses\" ON addresses\n    FOR DELETE USING (user_id = (SELECT auth.uid()));\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- ============================================================\n-- S-03: Enable leaked password protection via Supabase Auth config\n-- (This is done via Supabase Dashboard \u003e Auth \u003e Providers \u003e Email)\n-- Adding a comment here as documentation only\n-- ============================================================\n-- TO ENABLE: Go to Supabase Dashboard \u003e Authentication \u003e Providers \u003e Email\n-- Toggle ON \"Leaked Password Protection\"","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260210175158"},{"text":"security_audit_fixes_feb10"},{"binary":"0000000100000000000000190000000700000001000001b72d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0a2d2d205345435552495459204155444954204649583a2031302046656220323032360a2d2d2046697865733a20532d303220286d757461626c65207365617263685f70617468292c20502d30312f502d30322028524c5320696e6974706c616e290a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0a0a2d2d20532d30323a20466978206d757461626c65207365617263685f70617468206f6e20534543555249545920444546494e45522066756e6374696f6e730a2d2d2050696e207365617263685f7061746820746f2070726576656e74207365617263685f706174682068696a61636b696e672061747461636b730a0a2d2d20466978206372656174655f6f726465722066756e6374696f6e0a414c5445522046554e4354494f4e207075626c69632e6372656174655f6f7264657220534554207365617263685f70617468203d207075626c6963000000722d2d204669782061646d696e5f7570646174655f6f726465725f7374617475732066756e6374696f6e0a414c5445522046554e4354494f4e207075626c69632e61646d696e5f7570646174655f6f726465725f73746174757320534554207365617263685f70617468203d207075626c6963000000662d2d20466978206765745f64617368626f6172645f73746174732066756e6374696f6e0a414c5445522046554e4354494f4e207075626c69632e6765745f64617368626f6172645f737461747320534554207365617263685f70617468203d207075626c6963000000c22d2d20466978206765745f736974655f73657474696e672066756e6374696f6e202866726f6d20736974655f73657474696e6773206d6967726174696f6e290a444f20242420424547494e0a2020414c5445522046554e4354494f4e207075626c69632e6765745f736974655f73657474696e6720534554207365617263685f70617468203d207075626c69633b0a455843455054494f4e205748454e20756e646566696e65645f66756e6374696f6e205448454e204e554c4c3b0a454e44202424000000b02d2d2046697820616e79206f7468657220534543555249545920444546494e45522066756e6374696f6e730a444f20242420424547494e0a2020414c5445522046554e4354494f4e207075626c69632e636865636b5f61646d696e5f73746174757320534554207365617263685f70617468203d207075626c69633b0a455843455054494f4e205748454e20756e646566696e65645f66756e6374696f6e205448454e204e554c4c3b0a454e44202424000007ff2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0a2d2d20502d30312f502d30323a204f7074696d697a6520524c5320706f6c696369657320746f2061766f696420696e6974706c616e206973737565730a2d2d205265706c61636520617574682e75696428292077697468202873656c65637420617574682e75696428292920746f2070726576656e74200a2d2d2072652d6576616c756174696f6e2070657220726f77202873756273656c6563742063616368696e67290a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0a0a2d2d2044726f7020616e64207265637265617465206f726465727320706f6c69636965732077697468206f7074696d697a6564206175746820636865636b0a444f20242420424547494e0a20202d2d204f72646572733a2075736572732063616e2076696577206f776e206f72646572730a202044524f5020504f4c49435920494620455849535453202255736572732063616e2076696577206f776e206f726465727322204f4e206f72646572733b0a202043524541544520504f4c494359202255736572732063616e2076696577206f776e206f726465727322204f4e206f72646572730a20202020464f522053454c454354205553494e472028757365725f6964203d202853454c45435420617574682e756964282929293b0a0a20202d2d204f72646572733a2075736572732063616e20696e73657274206f776e206f726465727320200a202044524f5020504f4c49435920494620455849535453202255736572732063616e20696e73657274206f776e206f726465727322204f4e206f72646572733b0a202043524541544520504f4c494359202255736572732063616e20696e73657274206f776e206f726465727322204f4e206f72646572730a20202020464f5220494e53455254205749544820434845434b2028757365725f6964203d202853454c45435420617574682e756964282929293b0a0a20202d2d2050726f66696c65733a2075736572732063616e2076696577206f776e2070726f66696c650a202044524f5020504f4c49435920494620455849535453202255736572732063616e2076696577206f776e2070726f66696c6522204f4e2070726f66696c65733b0a202043524541544520504f4c494359202255736572732063616e2076696577206f776e2070726f66696c6522204f4e2070726f66696c65730a20202020464f522053454c454354205553494e4720286964203d202853454c45435420617574682e756964282929293b0a0a20202d2d2050726f66696c65733a2075736572732063616e20757064617465206f776e2070726f66696c650a202044524f5020504f4c49435920494620455849535453202255736572732063616e20757064617465206f776e2070726f66696c6522204f4e2070726f66696c65733b20200a202043524541544520504f4c494359202255736572732063616e20757064617465206f776e2070726f66696c6522204f4e2070726f66696c65730a20202020464f5220555044415445205553494e4720286964203d202853454c45435420617574682e756964282929293b0a0a20202d2d204164647265737365733a2075736572732063616e206d616e616765206f776e206164647265737365730a202044524f5020504f4c49435920494620455849535453202255736572732063616e2076696577206f776e2061646472657373657322204f4e206164647265737365733b0a202043524541544520504f4c494359202255736572732063616e2076696577206f776e2061646472657373657322204f4e206164647265737365730a20202020464f522053454c454354205553494e472028757365725f6964203d202853454c45435420617574682e756964282929293b0a0a202044524f5020504f4c49435920494620455849535453202255736572732063616e20696e73657274206f776e2061646472657373657322204f4e206164647265737365733b0a202043524541544520504f4c494359202255736572732063616e20696e73657274206f776e2061646472657373657322204f4e206164647265737365730a20202020464f5220494e53455254205749544820434845434b2028757365725f6964203d202853454c45435420617574682e756964282929293b0a0a202044524f5020504f4c49435920494620455849535453202255736572732063616e20757064617465206f776e2061646472657373657322204f4e206164647265737365733b0a202043524541544520504f4c494359202255736572732063616e20757064617465206f776e2061646472657373657322204f4e206164647265737365730a20202020464f5220555044415445205553494e472028757365725f6964203d202853454c45435420617574682e756964282929293b0a0a202044524f5020504f4c49435920494620455849535453202255736572732063616e2064656c657465206f776e2061646472657373657322204f4e206164647265737365733b0a202043524541544520504f4c494359202255736572732063616e2064656c657465206f776e2061646472657373657322204f4e206164647265737365730a20202020464f522044454c455445205553494e472028757365725f6964203d202853454c45435420617574682e756964282929293b0a454e44202424000001ac2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0a2d2d20532d30333a20456e61626c65206c65616b65642070617373776f72642070726f74656374696f6e20766961205375706162617365204175746820636f6e6669670a2d2d20285468697320697320646f6e65207669612053757061626173652044617368626f617264203e2041757468203e2050726f766964657273203e20456d61696c290a2d2d20416464696e67206120636f6d6d656e74206865726520617320646f63756d656e746174696f6e206f6e6c790a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0a2d2d20544f20454e41424c453a20476f20746f2053757061626173652044617368626f617264203e2041757468656e7469636174696f6e203e2050726f766964657273203e20456d61696c0a2d2d20546f67676c65204f4e20224c65616b65642050617373776f72642050726f74656374696f6e22"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users can view own orders\" for relation \"orders\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"SQL statement \"DROP POLICY IF EXISTS \"Users can view own orders\" ON orders\"\nPL/pgSQL function inline_code_block line 3 at SQL statement","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users can view own profile\" for relation \"profiles\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"SQL statement \"DROP POLICY IF EXISTS \"Users can view own profile\" ON profiles\"\nPL/pgSQL function inline_code_block line 13 at SQL statement","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Users can view own orders" for relation "orders" does not exist, skipping
NOTICE (00000): policy "Users can view own profile" for relation "profiles" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users can update own profile\" for relation \"profiles\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"SQL statement \"DROP POLICY IF EXISTS \"Users can update own profile\" ON profiles\"\nPL/pgSQL function inline_code_block line 18 at SQL statement","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users can view own addresses\" for relation \"addresses\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"SQL statement \"DROP POLICY IF EXISTS \"Users can view own addresses\" ON addresses\"\nPL/pgSQL function inline_code_block line 23 at SQL statement","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Users can update own profile" for relation "profiles" does not exist, skipping
NOTICE (00000): policy "Users can view own addresses" for relation "addresses" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"EmptyQueryResponse"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260210184830_create_support_tickets_table_v2.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TABLE IF NOT EXISTS public.support_tickets (\n    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n    user_id UUID REFERENCES auth.users(id) ON DELETE SET NULL,\n    name TEXT NOT NULL CHECK (char_length(name) BETWEEN 2 AND 100),\n    email TEXT NOT NULL CHECK (email ~* '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$'),\n    category TEXT NOT NULL DEFAULT 'general'\n        CHECK (category IN ('order_issue', 'product_info', 'delivery', 'other', 'general')),\n    subject TEXT NOT NULL CHECK (char_length(subject) BETWEEN 5 AND 200),\n    message TEXT NOT NULL CHECK (char_length(message) BETWEEN 10 AND 5000),\n    order_id UUID REFERENCES public.orders(id) ON DELETE SET NULL,\n    status TEXT NOT NULL DEFAULT 'open' CHECK (status IN ('open', 'answered', 'closed')),\n    admin_reply TEXT,\n    replied_at TIMESTAMPTZ,\n    replied_by UUID REFERENCES auth.users(id),\n    created_at TIMESTAMPTZ DEFAULT now(),\n    updated_at TIMESTAMPTZ DEFAULT now()\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Enable RLS\nALTER TABLE public.support_tickets ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Drop existing policies if any (to be safe)\nDROP POLICY IF EXISTS \"Anyone can insert tickets\" ON public.support_tickets","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users can view own tickets\" ON public.support_tickets","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can perform all actions on tickets\" ON public.support_tickets","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Policies\n-- 1. Anyone can insert (including visitors)\nCREATE POLICY \"Anyone can insert tickets\" \nON public.support_tickets \nFOR INSERT \nWITH CHECK (true)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Authenticated users can see only their own tickets\nCREATE POLICY \"Users can view own tickets\" \nON public.support_tickets \nFOR SELECT \nUSING (user_id = (SELECT auth.uid()))","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. Admins can do everything\nCREATE POLICY \"Admins can perform all actions on tickets\" \nON public.support_tickets \nFOR ALL \nTO authenticated\nUSING (\n    EXISTS (\n        SELECT 1 FROM public.profiles \n        WHERE id = (SELECT auth.uid()) \n        AND (is_admin = true OR is_superadmin = true)\n    )\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Trigger for updated_at\nCREATE OR REPLACE FUNCTION public.handle_updated_at()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = now();\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP TRIGGER IF EXISTS on_support_tickets_updated ON public.support_tickets","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TRIGGER on_support_tickets_updated\n    BEFORE UPDATE ON public.support_tickets\n    FOR EACH ROW\n    EXECUTE FUNCTION public.handle_updated_at()","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260210184830"},{"text":"create_support_tickets_table_v2"},{"binary":"0000000100000000000000190000000b00000001000003b9435245415445205441424c45204946204e4f5420455849535453207075626c69632e737570706f72745f7469636b65747320280a20202020696420555549442044454641554c542067656e5f72616e646f6d5f757569642829205052494d415259204b45592c0a20202020757365725f69642055554944205245464552454e43455320617574682e757365727328696429204f4e2044454c45544520534554204e554c4c2c0a202020206e616d652054455854204e4f54204e554c4c20434845434b2028636861725f6c656e677468286e616d6529204245545745454e203220414e4420313030292c0a20202020656d61696c2054455854204e4f54204e554c4c20434845434b2028656d61696c207e2a20275e5b412d5a612d7a302d392e5f252b2d5d2b405b412d5a612d7a302d392e2d5d2b5c2e5b412d5a612d7a5d7b322c7d2427292c0a2020202063617465676f72792054455854204e4f54204e554c4c2044454641554c54202767656e6572616c270a2020202020202020434845434b202863617465676f727920494e2028276f726465725f6973737565272c202770726f647563745f696e666f272c202764656c6976657279272c20276f74686572272c202767656e6572616c2729292c0a202020207375626a6563742054455854204e4f54204e554c4c20434845434b2028636861725f6c656e677468287375626a65637429204245545745454e203520414e4420323030292c0a202020206d6573736167652054455854204e4f54204e554c4c20434845434b2028636861725f6c656e677468286d65737361676529204245545745454e20313020414e442035303030292c0a202020206f726465725f69642055554944205245464552454e434553207075626c69632e6f726465727328696429204f4e2044454c45544520534554204e554c4c2c0a202020207374617475732054455854204e4f54204e554c4c2044454641554c5420276f70656e2720434845434b202873746174757320494e2028276f70656e272c2027616e737765726564272c2027636c6f7365642729292c0a2020202061646d696e5f7265706c7920544558542c0a202020207265706c6965645f61742054494d455354414d50545a2c0a202020207265706c6965645f62792055554944205245464552454e43455320617574682e7573657273286964292c0a20202020637265617465645f61742054494d455354414d50545a2044454641554c54206e6f7728292c0a20202020757064617465645f61742054494d455354414d50545a2044454641554c54206e6f7728290a290000004a2d2d20456e61626c6520524c530a414c544552205441424c45207075626c69632e737570706f72745f7469636b65747320454e41424c4520524f57204c4556454c205345435552495459000000792d2d2044726f70206578697374696e6720706f6c696369657320696620616e792028746f2062652073616665290a44524f5020504f4c494359204946204558495354532022416e796f6e652063616e20696e73657274207469636b65747322204f4e207075626c69632e737570706f72745f7469636b6574730000004c44524f5020504f4c49435920494620455849535453202255736572732063616e2076696577206f776e207469636b65747322204f4e207075626c69632e737570706f72745f7469636b6574730000005b44524f5020504f4c49435920494620455849535453202241646d696e732063616e20706572666f726d20616c6c20616374696f6e73206f6e207469636b65747322204f4e207075626c69632e737570706f72745f7469636b6574730000009c2d2d20506f6c69636965730a2d2d20312e20416e796f6e652063616e20696e736572742028696e636c7564696e672076697369746f7273290a43524541544520504f4c4943592022416e796f6e652063616e20696e73657274207469636b65747322200a4f4e207075626c69632e737570706f72745f7469636b657473200a464f5220494e53455254200a5749544820434845434b20287472756529000000b12d2d20322e2041757468656e746963617465642075736572732063616e20736565206f6e6c79207468656972206f776e207469636b6574730a43524541544520504f4c494359202255736572732063616e2076696577206f776e207469636b65747322200a4f4e207075626c69632e737570706f72745f7469636b657473200a464f522053454c454354200a5553494e472028757365725f6964203d202853454c45435420617574682e75696428292929000001302d2d20332e2041646d696e732063616e20646f2065766572797468696e670a43524541544520504f4c494359202241646d696e732063616e20706572666f726d20616c6c20616374696f6e73206f6e207469636b65747322200a4f4e207075626c69632e737570706f72745f7469636b657473200a464f5220414c4c200a544f2061757468656e746963617465640a5553494e4720280a2020202045584953545320280a202020202020202053454c45435420312046524f4d207075626c69632e70726f66696c6573200a20202020202020205748455245206964203d202853454c45435420617574682e756964282929200a2020202020202020414e44202869735f61646d696e203d2074727565204f522069735f737570657261646d696e203d2074727565290a20202020290a29000000da2d2d205472696767657220666f7220757064617465645f61740a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e68616e646c655f757064617465645f617428290a52455455524e5320545249474745522041532024240a424547494e0a202020204e45572e757064617465645f6174203d206e6f7728293b0a2020202052455455524e204e45573b0a454e443b0a2424204c414e475541474520706c706773716c20534543555249545920444546494e455220534554207365617263685f70617468203d207075626c69630000004b44524f50205452494747455220494620455849535453206f6e5f737570706f72745f7469636b6574735f75706461746564204f4e207075626c69632e737570706f72745f7469636b657473000000964352454154452054524947474552206f6e5f737570706f72745f7469636b6574735f757064617465640a202020204245464f524520555044415445204f4e207075626c69632e737570706f72745f7469636b6574730a20202020464f52204541434820524f570a20202020455845435554452046554e4354494f4e207075626c69632e68616e646c655f757064617465645f61742829"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Anyone can insert tickets\" for relation \"public.support_tickets\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
NOTICE (00000): policy "Anyone can insert tickets" for relation "public.support_tickets" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users can view own tickets\" for relation \"public.support_tickets\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
NOTICE (00000): policy "Users can view own tickets" for relation "public.support_tickets" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can perform all actions on tickets\" for relation \"public.support_tickets\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Admins can perform all actions on tickets" for relation "public.support_tickets" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"trigger \"on_support_tickets_updated\" for relation \"public.support_tickets\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): trigger "on_support_tickets_updated" for relation "public.support_tickets" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260211075947_security_and_performance_overhaul_v2.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Security \u0026 Performance Overhaul - 2026-02-11 (v2)\r\n\r\n-- Note: skipping extension schema move as pg_net doesn't support it directly\r\n\r\n-- 2. Function security fixes\r\n-- Ensure search_path is secure to prevent search_path injection attacks\r\nALTER FUNCTION is_admin_user(UUID) SET search_path = public","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. Policy Cleanup \u0026 Optimization (initplan optimization)\r\n\r\n-- addresses: Consolidate 'Users and admins can view addresses' and 'Users can view own addresses'\r\nDROP POLICY IF EXISTS \"Users and admins can view addresses\" ON addresses","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users can view own addresses\" ON addresses","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users and admins view addresses\" ON addresses\r\nFOR SELECT TO authenticated\r\nUSING (\r\n  user_id = (SELECT auth.uid()) OR \r\n  (SELECT is_admin_user((SELECT auth.uid())))\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- admin_audit_log: Consolidate 'Admins can view audit logs' and 'Superadmins can view audit logs'\r\n-- and fix initplan for INSERT\r\nDROP POLICY IF EXISTS \"Admins can view audit logs\" ON admin_audit_log","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Superadmins can view audit logs\" ON admin_audit_log","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins view audit logs\" ON admin_audit_log\r\nFOR SELECT TO authenticated\r\nUSING (\r\n  EXISTS (\r\n    SELECT 1 FROM profiles \r\n    WHERE id = (SELECT auth.uid()) \r\n    AND (is_admin = true OR is_superadmin = true)\r\n  )\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can insert audit logs\" ON admin_audit_log","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can view audit logs\" for relation \"admin_audit_log\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Admins can view audit logs" for relation "admin_audit_log" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins insert audit logs\" ON admin_audit_log\r\nFOR INSERT TO authenticated\r\nWITH CHECK (\r\n  EXISTS (\r\n    SELECT 1 FROM profiles\r\n    WHERE id = (SELECT auth.uid())\r\n    AND (is_admin = true OR is_superadmin = true)\r\n  )\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- orders: Consolidate SELECT policies and fix initplan for UPDATE\r\nDROP POLICY IF EXISTS \"Users and admins can view orders\" ON orders","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users can view own orders\" ON orders","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users and admins view orders\" ON orders\r\nFOR SELECT TO authenticated\r\nUSING (\r\n  user_id = (SELECT auth.uid()) OR \r\n  (SELECT is_admin_user((SELECT auth.uid())))\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users and admins can update orders\" ON orders","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can insert audit logs\" for relation \"admin_audit_log\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
NOTICE (00000): policy "Admins can insert audit logs" for relation "admin_audit_log" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users and admins update orders\" ON orders\r\nFOR UPDATE TO authenticated\r\nUSING (\r\n  ((user_id = (SELECT auth.uid())) AND (status = 'pending')) OR \r\n  (SELECT is_admin_user((SELECT auth.uid())))\r\n)\r\nWITH CHECK (\r\n  ((user_id = (SELECT auth.uid())) AND (status = 'pending')) OR \r\n  (SELECT is_admin_user((SELECT auth.uid())))\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- profiles: Consolidate SELECT and UPDATE policies\r\nDROP POLICY IF EXISTS \"Profiles are viewable by owners and admins\" ON profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users can view own profile\" ON profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Profiles viewable by owners and admins\" ON profiles\r\nFOR SELECT TO authenticated\r\nUSING (\r\n  id = (SELECT auth.uid()) OR \r\n  (SELECT is_admin_user((SELECT auth.uid())))\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Profiles are updatable by owners and admins\" ON profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users can update own profile\" ON profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Profiles updatable by owners and admins\" ON profiles\r\nFOR UPDATE TO authenticated\r\nUSING (\r\n  id = (SELECT auth.uid()) OR \r\n  (SELECT is_admin_user((SELECT auth.uid())))\r\n)\r\nWITH CHECK (\r\n  id = (SELECT auth.uid()) OR \r\n  (SELECT is_admin_user((SELECT auth.uid())))\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- support_tickets: Fix permissive INSERT, multiple policies, and initplan\r\nDROP POLICY IF EXISTS \"Admin full access\" ON support_tickets","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- This was ALL\r\nDROP POLICY IF EXISTS \"Everyone can insert tickets\" ON support_tickets","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users view own tickets\" ON support_tickets","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Only authenticated users or admins can access all rows\r\nCREATE POLICY \"Admin full access\" ON support_tickets\r\nFOR ALL TO authenticated\r\nUSING (\r\n  EXISTS (\r\n    SELECT 1 FROM profiles \r\n    WHERE id = (SELECT auth.uid()) \r\n    AND (is_admin = true OR is_superadmin = true)\r\n  )\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Users can only see their own tickets\r\nCREATE POLICY \"Users view own tickets\" ON support_tickets\r\nFOR SELECT TO authenticated\r\nUSING (\r\n  user_id = (SELECT auth.uid())\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Secure INSERT: authenticated users must match their ID, anon users can still insert\r\nCREATE POLICY \"Authenticated users insert own tickets\" ON support_tickets\r\nFOR INSERT TO authenticated\r\nWITH CHECK (\r\n  (user_id = (SELECT auth.uid())) OR \r\n  (SELECT is_admin_user((SELECT auth.uid())))\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Anonymous users can insert tickets\" ON support_tickets\r\nFOR INSERT TO anon\r\nWITH CHECK (\r\n  name IS NOT NULL AND \r\n  email IS NOT NULL AND \r\n  subject IS NOT NULL AND \r\n  message IS NOT NULL\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- site_settings: Fix initplan optimization\r\nDROP POLICY IF EXISTS \"Only admins can update settings\" ON site_settings","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admin full access\" for relation \"support_tickets\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
NOTICE (00000): policy "Admin full access" for relation "support_tickets" does not exist, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Only admins update settings\" ON site_settings\r\nFOR UPDATE TO authenticated\r\nUSING (\r\n  EXISTS (\r\n    SELECT 1 FROM profiles \r\n    WHERE id = (SELECT auth.uid()) AND is_admin = true\r\n  )\r\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Everyone can insert tickets\" for relation \"support_tickets\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users view own tickets\" for relation \"support_tickets\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
NOTICE (00000): policy "Everyone can insert tickets" for relation "support_tickets" does not exist, skipping
NOTICE (00000): policy "Users view own tickets" for relation "support_tickets" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260211075947"},{"text":"security_and_performance_overhaul_v2"},{"binary":"0000000100000000000000190000001d000000010000012d2d2d205365637572697479202620506572666f726d616e6365204f7665726861756c202d20323032362d30322d313120287632290d0a0d0a2d2d204e6f74653a20736b697070696e6720657874656e73696f6e20736368656d61206d6f76652061732070675f6e657420646f65736e277420737570706f7274206974206469726563746c790d0a0d0a2d2d20322e2046756e6374696f6e2073656375726974792066697865730d0a2d2d20456e73757265207365617263685f706174682069732073656375726520746f2070726576656e74207365617263685f7061746820696e6a656374696f6e2061747461636b730d0a414c5445522046554e4354494f4e2069735f61646d696e5f7573657228555549442920534554207365617263685f70617468203d207075626c6963000000eb2d2d20332e20506f6c69637920436c65616e75702026204f7074696d697a6174696f6e2028696e6974706c616e206f7074696d697a6174696f6e290d0a0d0a2d2d206164647265737365733a20436f6e736f6c69646174652027557365727320616e642061646d696e732063616e2076696577206164647265737365732720616e64202755736572732063616e2076696577206f776e20616464726573736573270d0a44524f5020504f4c494359204946204558495354532022557365727320616e642061646d696e732063616e20766965772061646472657373657322204f4e206164647265737365730000004144524f5020504f4c49435920494620455849535453202255736572732063616e2076696577206f776e2061646472657373657322204f4e20616464726573736573000000b943524541544520504f4c4943592022557365727320616e642061646d696e7320766965772061646472657373657322204f4e206164647265737365730d0a464f522053454c45435420544f2061757468656e746963617465640d0a5553494e4720280d0a2020757365725f6964203d202853454c45435420617574682e756964282929204f52200d0a20202853454c4543542069735f61646d696e5f75736572282853454c45435420617574682e75696428292929290d0a29000000c92d2d2061646d696e5f61756469745f6c6f673a20436f6e736f6c6964617465202741646d696e732063616e2076696577206175646974206c6f67732720616e642027537570657261646d696e732063616e2076696577206175646974206c6f6773270d0a2d2d20616e642066697820696e6974706c616e20666f7220494e534552540d0a44524f5020504f4c49435920494620455849535453202241646d696e732063616e2076696577206175646974206c6f677322204f4e2061646d696e5f61756469745f6c6f670000004a44524f5020504f4c494359204946204558495354532022537570657261646d696e732063616e2076696577206175646974206c6f677322204f4e2061646d696e5f61756469745f6c6f67000000e843524541544520504f4c494359202241646d696e732076696577206175646974206c6f677322204f4e2061646d696e5f61756469745f6c6f670d0a464f522053454c45435420544f2061757468656e746963617465640d0a5553494e4720280d0a202045584953545320280d0a2020202053454c45435420312046524f4d2070726f66696c6573200d0a202020205748455245206964203d202853454c45435420617574682e756964282929200d0a20202020414e44202869735f61646d696e203d2074727565204f522069735f737570657261646d696e203d2074727565290d0a2020290d0a290000004744524f5020504f4c49435920494620455849535453202241646d696e732063616e20696e73657274206175646974206c6f677322204f4e2061646d696e5f61756469745f6c6f67000000ed43524541544520504f4c494359202241646d696e7320696e73657274206175646974206c6f677322204f4e2061646d696e5f61756469745f6c6f670d0a464f5220494e5345525420544f2061757468656e746963617465640d0a5749544820434845434b20280d0a202045584953545320280d0a2020202053454c45435420312046524f4d2070726f66696c65730d0a202020205748455245206964203d202853454c45435420617574682e7569642829290d0a20202020414e44202869735f61646d696e203d2074727565204f522069735f737570657261646d696e203d2074727565290d0a2020290d0a29000000862d2d206f72646572733a20436f6e736f6c69646174652053454c45435420706f6c696369657320616e642066697820696e6974706c616e20666f72205550444154450d0a44524f5020504f4c494359204946204558495354532022557365727320616e642061646d696e732063616e2076696577206f726465727322204f4e206f72646572730000003b44524f5020504f4c49435920494620455849535453202255736572732063616e2076696577206f776e206f726465727322204f4e206f7264657273000000b343524541544520504f4c4943592022557365727320616e642061646d696e732076696577206f726465727322204f4e206f72646572730d0a464f522053454c45435420544f2061757468656e746963617465640d0a5553494e4720280d0a2020757365725f6964203d202853454c45435420617574682e756964282929204f52200d0a20202853454c4543542069735f61646d696e5f75736572282853454c45435420617574682e75696428292929290d0a290000004444524f5020504f4c494359204946204558495354532022557365727320616e642061646d696e732063616e20757064617465206f726465727322204f4e206f72646572730000015443524541544520504f4c4943592022557365727320616e642061646d696e7320757064617465206f726465727322204f4e206f72646572730d0a464f522055504441544520544f2061757468656e746963617465640d0a5553494e4720280d0a20202828757365725f6964203d202853454c45435420617574682e7569642829292920414e442028737461747573203d202770656e64696e67272929204f52200d0a20202853454c4543542069735f61646d696e5f75736572282853454c45435420617574682e75696428292929290d0a290d0a5749544820434845434b20280d0a20202828757365725f6964203d202853454c45435420617574682e7569642829292920414e442028737461747573203d202770656e64696e67272929204f52200d0a20202853454c4543542069735f61646d696e5f75736572282853454c45435420617574682e75696428292929290d0a29000000832d2d2070726f66696c65733a20436f6e736f6c69646174652053454c45435420616e642055504441544520706f6c69636965730d0a44524f5020504f4c49435920494620455849535453202250726f66696c657320617265207669657761626c65206279206f776e65727320616e642061646d696e7322204f4e2070726f66696c65730000003e44524f5020504f4c49435920494620455849535453202255736572732063616e2076696577206f776e2070726f66696c6522204f4e2070726f66696c6573000000ba43524541544520504f4c494359202250726f66696c6573207669657761626c65206279206f776e65727320616e642061646d696e7322204f4e2070726f66696c65730d0a464f522053454c45435420544f2061757468656e746963617465640d0a5553494e4720280d0a20206964203d202853454c45435420617574682e756964282929204f52200d0a20202853454c4543542069735f61646d696e5f75736572282853454c45435420617574682e75696428292929290d0a290000004f44524f5020504f4c49435920494620455849535453202250726f66696c65732061726520757064617461626c65206279206f776e65727320616e642061646d696e7322204f4e2070726f66696c65730000004044524f5020504f4c49435920494620455849535453202255736572732063616e20757064617465206f776e2070726f66696c6522204f4e2070726f66696c65730000011b43524541544520504f4c494359202250726f66696c657320757064617461626c65206279206f776e65727320616e642061646d696e7322204f4e2070726f66696c65730d0a464f522055504441544520544f2061757468656e746963617465640d0a5553494e4720280d0a20206964203d202853454c45435420617574682e756964282929204f52200d0a20202853454c4543542069735f61646d696e5f75736572282853454c45435420617574682e75696428292929290d0a290d0a5749544820434845434b20280d0a20206964203d202853454c45435420617574682e756964282929204f52200d0a20202853454c4543542069735f61646d696e5f75736572282853454c45435420617574682e75696428292929290d0a29000000882d2d20737570706f72745f7469636b6574733a20466978207065726d69737369766520494e534552542c206d756c7469706c6520706f6c69636965732c20616e6420696e6974706c616e0d0a44524f5020504f4c49435920494620455849535453202241646d696e2066756c6c2061636365737322204f4e20737570706f72745f7469636b657473000000572d2d20546869732077617320414c4c0d0a44524f5020504f4c49435920494620455849535453202245766572796f6e652063616e20696e73657274207469636b65747322204f4e20737570706f72745f7469636b6574730000004144524f5020504f4c49435920494620455849535453202255736572732076696577206f776e207469636b65747322204f4e20737570706f72745f7469636b6574730000011b2d2d204f6e6c792061757468656e74696361746564207573657273206f722061646d696e732063616e2061636365737320616c6c20726f77730d0a43524541544520504f4c494359202241646d696e2066756c6c2061636365737322204f4e20737570706f72745f7469636b6574730d0a464f5220414c4c20544f2061757468656e746963617465640d0a5553494e4720280d0a202045584953545320280d0a2020202053454c45435420312046524f4d2070726f66696c6573200d0a202020205748455245206964203d202853454c45435420617574682e756964282929200d0a20202020414e44202869735f61646d696e203d2074727565204f522069735f737570657261646d696e203d2074727565290d0a2020290d0a29000000ac2d2d2055736572732063616e206f6e6c7920736565207468656972206f776e207469636b6574730d0a43524541544520504f4c494359202255736572732076696577206f776e207469636b65747322204f4e20737570706f72745f7469636b6574730d0a464f522053454c45435420544f2061757468656e746963617465640d0a5553494e4720280d0a2020757365725f6964203d202853454c45435420617574682e7569642829290d0a29000001252d2d2053656375726520494e534552543a2061757468656e74696361746564207573657273206d757374206d617463682074686569722049442c20616e6f6e2075736572732063616e207374696c6c20696e736572740d0a43524541544520504f4c494359202241757468656e7469636174656420757365727320696e73657274206f776e207469636b65747322204f4e20737570706f72745f7469636b6574730d0a464f5220494e5345525420544f2061757468656e746963617465640d0a5749544820434845434b20280d0a202028757365725f6964203d202853454c45435420617574682e75696428292929204f52200d0a20202853454c4543542069735f61646d696e5f75736572282853454c45435420617574682e75696428292929290d0a29000000d043524541544520504f4c4943592022416e6f6e796d6f75732075736572732063616e20696e73657274207469636b65747322204f4e20737570706f72745f7469636b6574730d0a464f5220494e5345525420544f20616e6f6e0d0a5749544820434845434b20280d0a20206e616d65204953204e4f54204e554c4c20414e44200d0a2020656d61696c204953204e4f54204e554c4c20414e44200d0a20207375626a656374204953204e4f54204e554c4c20414e44200d0a20206d657373616765204953204e4f54204e554c4c0d0a29000000752d2d20736974655f73657474696e67733a2046697820696e6974706c616e206f7074696d697a6174696f6e0d0a44524f5020504f4c4943592049462045584953545320224f6e6c792061646d696e732063616e207570646174652073657474696e677322204f4e20736974655f73657474696e6773000000cb43524541544520504f4c49435920224f6e6c792061646d696e73207570646174652073657474696e677322204f4e20736974655f73657474696e67730d0a464f522055504441544520544f2061757468656e746963617465640d0a5553494e4720280d0a202045584953545320280d0a2020202053454c45435420312046524f4d2070726f66696c6573200d0a202020205748455245206964203d202853454c45435420617574682e75696428292920414e442069735f61646d696e203d20747275650d0a2020290d0a29"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Only admins can update settings\" for relation \"site_settings\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Only admins can update settings" for relation "site_settings" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260211080150_security_performance_final_fix_v3.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Final Security \u0026 Performance Fix - 2026-02-11 (v3)\n\n-- 1. Fix mutable search path for is_admin_user() Functions\nALTER FUNCTION is_admin_user() SET search_path = public","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER FUNCTION is_admin_user(UUID) SET search_path = public","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Consolidate support_tickets policies to remove \"Multiple Permissive Policies\" warning\nDROP POLICY IF EXISTS \"Admin full access\" ON support_tickets","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users view own tickets\" ON support_tickets","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Authenticated users insert own tickets\" ON support_tickets","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Authenticated users insert own tickets\" ON support_tickets","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Just in case\nDROP POLICY IF EXISTS \"support_tickets_select\" ON support_tickets","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"support_tickets_insert_authenticated\" ON support_tickets","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"support_tickets_insert_anon\" ON support_tickets","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Authenticated users insert own tickets\" for relation \"support_tickets\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
NOTICE (00000): policy "Authenticated users insert own tickets" for relation "support_tickets" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"support_tickets_admin_update\" ON support_tickets","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"support_tickets_select\" for relation \"support_tickets\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"support_tickets_insert_authenticated\" for relation \"support_tickets\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"support_tickets_admin_delete\" ON support_tickets","ParameterOIDs":null}
NOTICE (00000): policy "support_tickets_select" for relation "support_tickets" does not exist, skipping
NOTICE (00000): policy "support_tickets_insert_authenticated" for relation "support_tickets" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"support_tickets_insert_anon\" for relation \"support_tickets\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"support_tickets_admin_update\" for relation \"support_tickets\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "support_tickets_insert_anon" for relation "support_tickets" does not exist, skipping
NOTICE (00000): policy "support_tickets_admin_update" for relation "support_tickets" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Anonymous users can insert tickets\" ON support_tickets","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- SELECT: Owner or Admin\nCREATE POLICY \"support_tickets_select\" ON support_tickets\nFOR SELECT TO authenticated\nUSING (\n  user_id = (SELECT auth.uid()) OR \n  (SELECT is_admin_user())\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"support_tickets_admin_delete\" for relation \"support_tickets\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
NOTICE (00000): policy "support_tickets_admin_delete" for relation "support_tickets" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- INSERT: Owner or Admin\nCREATE POLICY \"support_tickets_insert_authenticated\" ON support_tickets\nFOR INSERT TO authenticated\nWITH CHECK (\n  (user_id = (SELECT auth.uid())) OR \n  (SELECT is_admin_user())\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Separate policy for anon (no conflict)\nCREATE POLICY \"support_tickets_insert_anon\" ON support_tickets\nFOR INSERT TO anon\nWITH CHECK (\n  name IS NOT NULL AND \n  email IS NOT NULL AND \n  subject IS NOT NULL AND \n  message IS NOT NULL\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- UPDATE: Admin Only\nCREATE POLICY \"support_tickets_admin_update\" ON support_tickets\nFOR UPDATE TO authenticated\nUSING ((SELECT is_admin_user()))\nWITH CHECK ((SELECT is_admin_user()))","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- DELETE: Admin Only\nCREATE POLICY \"support_tickets_admin_delete\" ON support_tickets\nFOR DELETE TO authenticated\nUSING ((SELECT is_admin_user()))","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. Extension Management\n-- Note: 'pg_net' schema move/reinstall is skipping because it often requires superuser/dashboard-level perms\n-- or has active dependencies. We will prioritize functionality over this specific warning.","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260211080150"},{"text":"security_performance_final_fix_v3"},{"binary":"0000000100000000000000190000001200000001000000aa2d2d2046696e616c205365637572697479202620506572666f726d616e636520466978202d20323032362d30322d313120287633290a0a2d2d20312e20466978206d757461626c6520736561726368207061746820666f722069735f61646d696e5f7573657228292046756e6374696f6e730a414c5445522046554e4354494f4e2069735f61646d696e5f75736572282920534554207365617263685f70617468203d207075626c69630000003b414c5445522046554e4354494f4e2069735f61646d696e5f7573657228555549442920534554207365617263685f70617468203d207075626c6963000000982d2d20322e20436f6e736f6c696461746520737570706f72745f7469636b65747320706f6c696369657320746f2072656d6f766520224d756c7469706c65205065726d69737369766520506f6c696369657322207761726e696e670a44524f5020504f4c49435920494620455849535453202241646d696e2066756c6c2061636365737322204f4e20737570706f72745f7469636b6574730000004144524f5020504f4c49435920494620455849535453202255736572732076696577206f776e207469636b65747322204f4e20737570706f72745f7469636b6574730000005144524f5020504f4c49435920494620455849535453202241757468656e7469636174656420757365727320696e73657274206f776e207469636b65747322204f4e20737570706f72745f7469636b6574730000005144524f5020504f4c49435920494620455849535453202241757468656e7469636174656420757365727320696e73657274206f776e207469636b65747322204f4e20737570706f72745f7469636b657473000000512d2d204a75737420696e20636173650a44524f5020504f4c494359204946204558495354532022737570706f72745f7469636b6574735f73656c65637422204f4e20737570706f72745f7469636b6574730000004f44524f5020504f4c494359204946204558495354532022737570706f72745f7469636b6574735f696e736572745f61757468656e7469636174656422204f4e20737570706f72745f7469636b6574730000004644524f5020504f4c494359204946204558495354532022737570706f72745f7469636b6574735f696e736572745f616e6f6e22204f4e20737570706f72745f7469636b6574730000004744524f5020504f4c494359204946204558495354532022737570706f72745f7469636b6574735f61646d696e5f75706461746522204f4e20737570706f72745f7469636b6574730000004744524f5020504f4c494359204946204558495354532022737570706f72745f7469636b6574735f61646d696e5f64656c65746522204f4e20737570706f72745f7469636b6574730000004d44524f5020504f4c494359204946204558495354532022416e6f6e796d6f75732075736572732063616e20696e73657274207469636b65747322204f4e20737570706f72745f7469636b657473000000b82d2d2053454c4543543a204f776e6572206f722041646d696e0a43524541544520504f4c4943592022737570706f72745f7469636b6574735f73656c65637422204f4e20737570706f72745f7469636b6574730a464f522053454c45435420544f2061757468656e746963617465640a5553494e4720280a2020757365725f6964203d202853454c45435420617574682e756964282929204f52200a20202853454c4543542069735f61646d696e5f757365722829290a29000000cd2d2d20494e534552543a204f776e6572206f722041646d696e0a43524541544520504f4c4943592022737570706f72745f7469636b6574735f696e736572745f61757468656e7469636174656422204f4e20737570706f72745f7469636b6574730a464f5220494e5345525420544f2061757468656e746963617465640a5749544820434845434b20280a202028757365725f6964203d202853454c45435420617574682e75696428292929204f52200a20202853454c4543542069735f61646d696e5f757365722829290a29000000ec2d2d20536570617261746520706f6c69637920666f7220616e6f6e20286e6f20636f6e666c696374290a43524541544520504f4c4943592022737570706f72745f7469636b6574735f696e736572745f616e6f6e22204f4e20737570706f72745f7469636b6574730a464f5220494e5345525420544f20616e6f6e0a5749544820434845434b20280a20206e616d65204953204e4f54204e554c4c20414e44200a2020656d61696c204953204e4f54204e554c4c20414e44200a20207375626a656374204953204e4f54204e554c4c20414e44200a20206d657373616765204953204e4f54204e554c4c0a29000000b82d2d205550444154453a2041646d696e204f6e6c790a43524541544520504f4c4943592022737570706f72745f7469636b6574735f61646d696e5f75706461746522204f4e20737570706f72745f7469636b6574730a464f522055504441544520544f2061757468656e746963617465640a5553494e4720282853454c4543542069735f61646d696e5f75736572282929290a5749544820434845434b20282853454c4543542069735f61646d696e5f7573657228292929000000922d2d2044454c4554453a2041646d696e204f6e6c790a43524541544520504f4c4943592022737570706f72745f7469636b6574735f61646d696e5f64656c65746522204f4e20737570706f72745f7469636b6574730a464f522044454c45544520544f2061757468656e746963617465640a5553494e4720282853454c4543542069735f61646d696e5f7573657228292929000000e42d2d20332e20457874656e73696f6e204d616e6167656d656e740a2d2d204e6f74653a202770675f6e65742720736368656d61206d6f76652f7265696e7374616c6c20697320736b697070696e672062656361757365206974206f6674656e207265717569726573207375706572757365722f64617368626f6172642d6c6576656c207065726d730a2d2d206f72206861732061637469766520646570656e64656e636965732e2057652077696c6c207072696f726974697a652066756e6374696f6e616c697479206f7665722074686973207370656369666963207761726e696e672e"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"EmptyQueryResponse"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260211175403_create_email_management_tables.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Create email_templates table\nCREATE TABLE IF NOT EXISTS public.email_templates (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    name TEXT NOT NULL,\n    slug TEXT UNIQUE NOT NULL,\n    subject TEXT NOT NULL,\n    content_html TEXT NOT NULL,\n    content_text TEXT,\n    variables JSONB DEFAULT '[]'::jsonb,\n    version INT DEFAULT 1,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Create email_configs table\nCREATE TABLE IF NOT EXISTS public.email_configs (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    template_slug TEXT REFERENCES public.email_templates(slug) ON DELETE CASCADE,\n    sender_name TEXT NOT NULL,\n    sender_email TEXT NOT NULL,\n    reply_to TEXT,\n    is_active BOOLEAN DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,\n    UNIQUE(template_slug, sender_email)\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Enhance email_logs table (if it exists, add more columns)\nALTER TABLE IF EXISTS public.email_logs \nADD COLUMN IF NOT EXISTS template_slug TEXT,\nADD COLUMN IF NOT EXISTS subject TEXT,\nADD COLUMN IF NOT EXISTS content_snapshot TEXT,\nADD COLUMN IF NOT EXISTS error_details TEXT","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Enable RLS\nALTER TABLE public.email_templates ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_configs ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- RLS Policies (Superadmins and Admins only)\nCREATE POLICY \"Admins can manage email templates\" \nON public.email_templates \nFOR ALL \nTO authenticated \nUSING (\n    EXISTS (\n        SELECT 1 FROM public.profiles \n        WHERE id = auth.uid() AND (is_admin = true OR is_superadmin = true)\n    )\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins can manage email configs\" \nON public.email_configs \nFOR ALL \nTO authenticated \nUSING (\n    EXISTS (\n        SELECT 1 FROM public.profiles \n        WHERE id = auth.uid() AND (is_admin = true OR is_superadmin = true)\n    )\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Function to handle updated_at\nCREATE OR REPLACE FUNCTION public.handle_updated_at()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = now();\n    RETURN NEW;\nEND;\n$$ language 'plpgsql'","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Triggers\nCREATE TRIGGER set_updated_at_templates\n    BEFORE UPDATE ON public.email_templates\n    FOR EACH ROW\n    EXECUTE PROCEDURE public.handle_updated_at()","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TRIGGER set_updated_at_configs\n    BEFORE UPDATE ON public.email_configs\n    FOR EACH ROW\n    EXECUTE PROCEDURE public.handle_updated_at()","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260211175403"},{"text":"create_email_management_tables"},{"binary":"0000000100000000000000190000000a00000001000002022d2d2043726561746520656d61696c5f74656d706c61746573207461626c650a435245415445205441424c45204946204e4f5420455849535453207075626c69632e656d61696c5f74656d706c6174657320280a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0a202020206e616d652054455854204e4f54204e554c4c2c0a20202020736c7567205445585420554e49515545204e4f54204e554c4c2c0a202020207375626a6563742054455854204e4f54204e554c4c2c0a20202020636f6e74656e745f68746d6c2054455854204e4f54204e554c4c2c0a20202020636f6e74656e745f7465787420544558542c0a202020207661726961626c6573204a534f4e422044454641554c5420275b5d273a3a6a736f6e622c0a2020202076657273696f6e20494e542044454641554c5420312c0a20202020637265617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c542074696d657a6f6e652827757463273a3a746578742c206e6f77282929204e4f54204e554c4c2c0a20202020757064617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c542074696d657a6f6e652827757463273a3a746578742c206e6f77282929204e4f54204e554c4c0a29000002222d2d2043726561746520656d61696c5f636f6e66696773207461626c650a435245415445205441424c45204946204e4f5420455849535453207075626c69632e656d61696c5f636f6e6669677320280a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0a2020202074656d706c6174655f736c75672054455854205245464552454e434553207075626c69632e656d61696c5f74656d706c6174657328736c756729204f4e2044454c45544520434153434144452c0a2020202073656e6465725f6e616d652054455854204e4f54204e554c4c2c0a2020202073656e6465725f656d61696c2054455854204e4f54204e554c4c2c0a202020207265706c795f746f20544558542c0a2020202069735f61637469766520424f4f4c45414e2044454641554c5420747275652c0a20202020637265617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c542074696d657a6f6e652827757463273a3a746578742c206e6f77282929204e4f54204e554c4c2c0a20202020757064617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c542074696d657a6f6e652827757463273a3a746578742c206e6f77282929204e4f54204e554c4c2c0a20202020554e495155452874656d706c6174655f736c75672c2073656e6465725f656d61696c290a29000001152d2d20456e68616e636520656d61696c5f6c6f6773207461626c6520286966206974206578697374732c20616464206d6f726520636f6c756d6e73290a414c544552205441424c4520494620455849535453207075626c69632e656d61696c5f6c6f6773200a41444420434f4c554d4e204946204e4f54204558495354532074656d706c6174655f736c756720544558542c0a41444420434f4c554d4e204946204e4f5420455849535453207375626a65637420544558542c0a41444420434f4c554d4e204946204e4f542045584953545320636f6e74656e745f736e617073686f7420544558542c0a41444420434f4c554d4e204946204e4f5420455849535453206572726f725f64657461696c7320544558540000004a2d2d20456e61626c6520524c530a414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174657320454e41424c4520524f57204c4556454c2053454355524954590000003a414c544552205441424c45207075626c69632e656d61696c5f636f6e6669677320454e41424c4520524f57204c4556454c205345435552495459000001262d2d20524c5320506f6c69636965732028537570657261646d696e7320616e642041646d696e73206f6e6c79290a43524541544520504f4c494359202241646d696e732063616e206d616e61676520656d61696c2074656d706c6174657322200a4f4e207075626c69632e656d61696c5f74656d706c61746573200a464f5220414c4c200a544f2061757468656e74696361746564200a5553494e4720280a2020202045584953545320280a202020202020202053454c45435420312046524f4d207075626c69632e70726f66696c6573200a20202020202020205748455245206964203d20617574682e756964282920414e44202869735f61646d696e203d2074727565204f522069735f737570657261646d696e203d2074727565290a20202020290a29000000f443524541544520504f4c494359202241646d696e732063616e206d616e61676520656d61696c20636f6e6669677322200a4f4e207075626c69632e656d61696c5f636f6e66696773200a464f5220414c4c200a544f2061757468656e74696361746564200a5553494e4720280a2020202045584953545320280a202020202020202053454c45435420312046524f4d207075626c69632e70726f66696c6573200a20202020202020205748455245206964203d20617574682e756964282920414e44202869735f61646d696e203d2074727565204f522069735f737570657261646d696e203d2074727565290a20202020290a29000000b92d2d2046756e6374696f6e20746f2068616e646c6520757064617465645f61740a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e68616e646c655f757064617465645f617428290a52455455524e5320545249474745522041532024240a424547494e0a202020204e45572e757064617465645f6174203d206e6f7728293b0a2020202052455455524e204e45573b0a454e443b0a2424206c616e67756167652027706c706773716c27000000a12d2d2054726967676572730a4352454154452054524947474552207365745f757064617465645f61745f74656d706c617465730a202020204245464f524520555044415445204f4e207075626c69632e656d61696c5f74656d706c617465730a20202020464f52204541434820524f570a20202020455845435554452050524f434544555245207075626c69632e68616e646c655f757064617465645f61742829000000914352454154452054524947474552207365745f757064617465645f61745f636f6e666967730a202020204245464f524520555044415445204f4e207075626c69632e656d61696c5f636f6e666967730a20202020464f52204541434820524f570a20202020455845435554452050524f434544555245207075626c69632e68616e646c655f757064617465645f61742829"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260212190000_security_hardening_phase1.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- ============================================\n-- Security Hardening Phase 1 (Critical fixes)\n-- Date: 2026-02-12\n-- ============================================\n\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Ensure privilege columns exist before protections\nALTER TABLE public.profiles ADD COLUMN IF NOT EXISTS is_admin BOOLEAN DEFAULT FALSE","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.profiles ADD COLUMN IF NOT EXISTS is_superadmin BOOLEAN DEFAULT FALSE","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Block self privilege escalation (is_admin / is_superadmin) for non-admin users\nCREATE OR REPLACE FUNCTION public.prevent_profile_privilege_self_escalation()\nRETURNS TRIGGER\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path = public, pg_catalog\nAS $$\nBEGIN\n    IF auth.uid() IS NOT NULL\n       AND (\n           OLD.is_admin IS DISTINCT FROM NEW.is_admin OR\n           OLD.is_superadmin IS DISTINCT FROM NEW.is_superadmin\n       )\n       AND NOT EXISTS (\n           SELECT 1\n           FROM public.profiles p\n           WHERE p.id = auth.uid()\n             AND (p.is_admin = TRUE OR p.is_superadmin = TRUE)\n       )\n    THEN\n        RAISE EXCEPTION 'Unauthorized privilege update attempt';\n    END IF;\n\n    RETURN NEW;\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP TRIGGER IF EXISTS trg_prevent_profile_privilege_self_escalation ON public.profiles","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TRIGGER trg_prevent_profile_privilege_self_escalation\nBEFORE UPDATE ON public.profiles\nFOR EACH ROW\nWHEN (\n    OLD.is_admin IS DISTINCT FROM NEW.is_admin OR\n    OLD.is_superadmin IS DISTINCT FROM NEW.is_superadmin\n)\nEXECUTE FUNCTION public.prevent_profile_privilege_self_escalation()","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"is_admin\" of relation \"profiles\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"is_superadmin\" of relation \"profiles\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
NOTICE (42701): column "is_admin" of relation "profiles" already exists, skipping
NOTICE (42701): column "is_superadmin" of relation "profiles" already exists, skipping
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Users must not update orders directly (status/payment/inventory manipulation risk)\nDO $$\nBEGIN\n    IF to_regclass('public.orders') IS NOT NULL THEN\n        EXECUTE 'DROP POLICY IF EXISTS \"Users can update own pending orders\" ON public.orders';\n    END IF;\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"trigger \"trg_prevent_profile_privilege_self_escalation\" for relation \"public.profiles\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
NOTICE (00000): trigger "trg_prevent_profile_privilege_self_escalation" for relation "public.profiles" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Tighten order status history insert policy to service_role only\nDO $$\nBEGIN\n    IF to_regclass('public.order_status_history') IS NOT NULL THEN\n        EXECUTE 'DROP POLICY IF EXISTS \"System can insert order status history\" ON public.order_status_history';\n        EXECUTE 'CREATE POLICY \"System can insert order status history\"\n                 ON public.order_status_history\n                 FOR INSERT\n                 TO service_role\n                 WITH CHECK (TRUE)';\n    END IF;\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Integration rate-limit log table for backend-only abuse controls\nCREATE TABLE IF NOT EXISTS public.integration_rate_limits (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    integration_name TEXT NOT NULL,\n    action TEXT NOT NULL,\n    actor_id UUID,\n    actor_email TEXT,\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_integration_rate_limits_lookup\nON public.integration_rate_limits (integration_name, action, actor_id, actor_email, created_at DESC)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users can update own pending orders\" for relation \"public.orders\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"SQL statement \"DROP POLICY IF EXISTS \"Users can update own pending orders\" ON public.orders\"\nPL/pgSQL function inline_code_block line 4 at EXECUTE","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"System can insert order status history\" for relation \"public.order_status_history\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"SQL statement \"DROP POLICY IF EXISTS \"System can insert order status history\" ON public.order_status_history\"\nPL/pgSQL function inline_code_block line 4 at EXECUTE","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Users can update own pending orders" for relation "public.orders" does not exist, skipping
NOTICE (00000): policy "System can insert order status history" for relation "public.order_status_history" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.integration_rate_limits ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"System can insert integration rate limits\" ON public.integration_rate_limits","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"System can insert integration rate limits\"\nON public.integration_rate_limits\nFOR INSERT\nTO service_role\nWITH CHECK (TRUE)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"System can read integration rate limits\" ON public.integration_rate_limits","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"System can read integration rate limits\"\nON public.integration_rate_limits\nFOR SELECT\nTO service_role\nUSING (TRUE)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"System can insert integration rate limits\" for relation \"public.integration_rate_limits\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
NOTICE (00000): policy "System can insert integration rate limits" for relation "public.integration_rate_limits" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"System can read integration rate limits\" for relation \"public.integration_rate_limits\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "System can read integration rate limits" for relation "public.integration_rate_limits" does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260212190000"},{"text":"security_hardening_phase1"},{"binary":"0000000100000000000000190000001000000001000000a92d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0a2d2d2053656375726974792048617264656e696e6720506861736520312028437269746963616c206669786573290a2d2d20446174653a20323032362d30322d31320a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0a0a424547494e000000882d2d20456e737572652070726976696c65676520636f6c756d6e73206578697374206265666f72652070726f74656374696f6e730a414c544552205441424c45207075626c69632e70726f66696c65732041444420434f4c554d4e204946204e4f54204558495354532069735f61646d696e20424f4f4c45414e2044454641554c542046414c534500000058414c544552205441424c45207075626c69632e70726f66696c65732041444420434f4c554d4e204946204e4f54204558495354532069735f737570657261646d696e20424f4f4c45414e2044454641554c542046414c5345000002d72d2d20426c6f636b2073656c662070726976696c65676520657363616c6174696f6e202869735f61646d696e202f2069735f737570657261646d696e2920666f72206e6f6e2d61646d696e2075736572730a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e70726576656e745f70726f66696c655f70726976696c6567655f73656c665f657363616c6174696f6e28290a52455455524e5320545249474745520a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670a41532024240a424547494e0a20202020494620617574682e7569642829204953204e4f54204e554c4c0a20202020202020414e4420280a20202020202020202020204f4c442e69735f61646d696e2049532044495354494e43542046524f4d204e45572e69735f61646d696e204f520a20202020202020202020204f4c442e69735f737570657261646d696e2049532044495354494e43542046524f4d204e45572e69735f737570657261646d696e0a20202020202020290a20202020202020414e44204e4f542045584953545320280a202020202020202020202053454c45435420310a202020202020202020202046524f4d207075626c69632e70726f66696c657320700a2020202020202020202020574845524520702e6964203d20617574682e75696428290a20202020202020202020202020414e442028702e69735f61646d696e203d2054525545204f5220702e69735f737570657261646d696e203d2054525545290a20202020202020290a202020205448454e0a2020202020202020524149534520455843455054494f4e2027556e617574686f72697a65642070726976696c6567652075706461746520617474656d7074273b0a20202020454e442049463b0a0a2020202052455455524e204e45573b0a454e443b0a24240000005744524f50205452494747455220494620455849535453207472675f70726576656e745f70726f66696c655f70726976696c6567655f73656c665f657363616c6174696f6e204f4e207075626c69632e70726f66696c6573000001224352454154452054524947474552207472675f70726576656e745f70726f66696c655f70726976696c6567655f73656c665f657363616c6174696f6e0a4245464f524520555044415445204f4e207075626c69632e70726f66696c65730a464f52204541434820524f570a5748454e20280a202020204f4c442e69735f61646d696e2049532044495354494e43542046524f4d204e45572e69735f61646d696e204f520a202020204f4c442e69735f737570657261646d696e2049532044495354494e43542046524f4d204e45572e69735f737570657261646d696e0a290a455845435554452046554e4354494f4e207075626c69632e70726576656e745f70726f66696c655f70726976696c6567655f73656c665f657363616c6174696f6e2829000001092d2d205573657273206d757374206e6f7420757064617465206f7264657273206469726563746c7920287374617475732f7061796d656e742f696e76656e746f7279206d616e6970756c6174696f6e207269736b290a444f2024240a424547494e0a20202020494620746f5f726567636c61737328277075626c69632e6f72646572732729204953204e4f54204e554c4c205448454e0a202020202020202045584543555445202744524f5020504f4c49435920494620455849535453202255736572732063616e20757064617465206f776e2070656e64696e67206f726465727322204f4e207075626c69632e6f7264657273273b0a20202020454e442049463b0a454e44202424000001ef2d2d205469676874656e206f726465722073746174757320686973746f727920696e7365727420706f6c69637920746f20736572766963655f726f6c65206f6e6c790a444f2024240a424547494e0a20202020494620746f5f726567636c61737328277075626c69632e6f726465725f7374617475735f686973746f72792729204953204e4f54204e554c4c205448454e0a202020202020202045584543555445202744524f5020504f4c49435920494620455849535453202253797374656d2063616e20696e73657274206f726465722073746174757320686973746f727922204f4e207075626c69632e6f726465725f7374617475735f686973746f7279273b0a202020202020202045584543555445202743524541544520504f4c494359202253797374656d2063616e20696e73657274206f726465722073746174757320686973746f7279220a20202020202020202020202020202020204f4e207075626c69632e6f726465725f7374617475735f686973746f72790a2020202020202020202020202020202020464f5220494e534552540a2020202020202020202020202020202020544f20736572766963655f726f6c650a20202020202020202020202020202020205749544820434845434b20285452554529273b0a20202020454e442049463b0a454e442024240000014d2d2d20496e746567726174696f6e20726174652d6c696d6974206c6f67207461626c6520666f72206261636b656e642d6f6e6c7920616275736520636f6e74726f6c730a435245415445205441424c45204946204e4f5420455849535453207075626c69632e696e746567726174696f6e5f726174655f6c696d69747320280a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0a20202020696e746567726174696f6e5f6e616d652054455854204e4f54204e554c4c2c0a20202020616374696f6e2054455854204e4f54204e554c4c2c0a202020206163746f725f696420555549442c0a202020206163746f725f656d61696c20544558542c0a20202020637265617465645f61742054494d455354414d50545a204e4f54204e554c4c2044454641554c54204e4f5728290a29000000a243524541544520494e444558204946204e4f5420455849535453206964785f696e746567726174696f6e5f726174655f6c696d6974735f6c6f6f6b75700a4f4e207075626c69632e696e746567726174696f6e5f726174655f6c696d6974732028696e746567726174696f6e5f6e616d652c20616374696f6e2c206163746f725f69642c206163746f725f656d61696c2c20637265617465645f617420444553432900000044414c544552205441424c45207075626c69632e696e746567726174696f6e5f726174655f6c696d69747320454e41424c4520524f57204c4556454c2053454355524954590000006344524f5020504f4c49435920494620455849535453202253797374656d2063616e20696e7365727420696e746567726174696f6e2072617465206c696d69747322204f4e207075626c69632e696e746567726174696f6e5f726174655f6c696d6974730000008843524541544520504f4c494359202253797374656d2063616e20696e7365727420696e746567726174696f6e2072617465206c696d697473220a4f4e207075626c69632e696e746567726174696f6e5f726174655f6c696d6974730a464f5220494e534552540a544f20736572766963655f726f6c650a5749544820434845434b202854525545290000006144524f5020504f4c49435920494620455849535453202253797374656d2063616e207265616420696e746567726174696f6e2072617465206c696d69747322204f4e207075626c69632e696e746567726174696f6e5f726174655f6c696d6974730000008143524541544520504f4c494359202253797374656d2063616e207265616420696e746567726174696f6e2072617465206c696d697473220a4f4e207075626c69632e696e746567726174696f6e5f726174655f6c696d6974730a464f522053454c4543540a544f20736572766963655f726f6c650a5553494e472028545255452900000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260212191000_security_hardening_phase2.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- ============================================\n-- Security Hardening Phase 2\n-- Date: 2026-02-12\n-- ============================================\n\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- ------------------------------------------------\n-- 1) Inventory integrity: prevent stock underflow\n-- ------------------------------------------------\nCREATE OR REPLACE FUNCTION public.manage_inventory()\nRETURNS TRIGGER\nLANGUAGE plpgsql\nSET search_path = public, pg_catalog\nAS $$\nDECLARE\n    item jsonb;\n    qty int;\n    prod_id uuid;\n    target_pid uuid;\n    old_status text;\n    new_status text;\n    is_new_active boolean;\n    is_old_active boolean;\n    is_new_delivered boolean;\n    is_old_delivered boolean;\n    is_new_cancelled boolean;\n    is_old_cancelled boolean;\n    v_rows_affected int;\nBEGIN\n    IF TG_OP = 'INSERT' THEN\n        old_status := NULL;\n        new_status := NEW.status;\n    ELSE\n        old_status := OLD.status;\n        new_status := NEW.status;\n    END IF;\n\n    is_new_active := lower(coalesce(new_status, '')) IN ('pending', 'processing', 'preparing', 'shipped', 'beklemede', 'ileniyor', 'hazrlanyor', 'kargoda');\n    is_old_active := lower(coalesce(old_status, '')) IN ('pending', 'processing', 'preparing', 'shipped', 'beklemede', 'ileniyor', 'hazrlanyor', 'kargoda');\n    is_new_delivered := lower(coalesce(new_status, '')) IN ('delivered', 'teslim edildi');\n    is_old_delivered := lower(coalesce(old_status, '')) IN ('delivered', 'teslim edildi');\n    is_new_cancelled := lower(coalesce(new_status, '')) IN ('cancelled', 'iptal edildi', 'iade edildi');\n    is_old_cancelled := lower(coalesce(old_status, '')) IN ('cancelled', 'iptal edildi', 'iade edildi');\n\n    IF NEW.order_details-\u003e'items' IS NOT NULL THEN\n        FOR item IN SELECT * FROM jsonb_array_elements(NEW.order_details-\u003e'items')\n        LOOP\n            qty := (item-\u003e\u003e'quantity')::int;\n            prod_id := (item-\u003e\u003e'product_id')::uuid;\n\n            IF qty IS NULL OR qty \u003c= 0 THEN\n                RAISE EXCEPTION 'Invalid quantity in order item';\n            END IF;\n\n            SELECT id\n              INTO target_pid\n              FROM public.products\n             WHERE id = prod_id\n             FOR UPDATE;\n\n            IF target_pid IS NULL THEN\n                RAISE EXCEPTION 'Product not found: %', prod_id;\n            END IF;\n\n            IF TG_OP = 'INSERT' THEN\n                IF is_new_active THEN\n                    UPDATE public.products\n                       SET stock = stock - qty,\n                           reserved_stock = COALESCE(reserved_stock, 0) + qty\n                     WHERE id = target_pid\n                       AND stock \u003e= qty;\n\n                    GET DIAGNOSTICS v_rows_affected = ROW_COUNT;\n                    IF v_rows_affected = 0 THEN\n                        RAISE EXCEPTION 'Insufficient stock for product %', target_pid;\n                    END IF;\n                ELSIF is_new_delivered THEN\n                    UPDATE public.products\n                       SET stock = stock - qty\n                     WHERE id = target_pid\n                       AND stock \u003e= qty;\n\n                    GET DIAGNOSTICS v_rows_affected = ROW_COUNT;\n                    IF v_rows_affected = 0 THEN\n                        RAISE EXCEPTION 'Insufficient stock for product %', target_pid;\n                    END IF;\n                END IF;\n            ELSIF TG_OP = 'UPDATE' AND new_status IS DISTINCT FROM old_status THEN\n                IF is_old_active AND is_new_delivered THEN\n                    UPDATE public.products\n                       SET reserved_stock = GREATEST(0, COALESCE(reserved_stock, 0) - qty)\n                     WHERE id = target_pid;\n                ELSIF is_old_active AND is_new_cancelled THEN\n                    UPDATE public.products\n                       SET reserved_stock = GREATEST(0, COALESCE(reserved_stock, 0) - qty),\n                           stock = stock + qty\n                     WHERE id = target_pid;\n                ELSIF is_old_delivered AND is_new_cancelled THEN\n                    UPDATE public.products\n                       SET stock = stock + qty\n                     WHERE id = target_pid;\n                ELSIF is_old_cancelled AND is_new_active THEN\n                    UPDATE public.products\n                       SET stock = stock - qty,\n                           reserved_stock = COALESCE(reserved_stock, 0) + qty\n                     WHERE id = target_pid\n                       AND stock \u003e= qty;\n\n                    GET DIAGNOSTICS v_rows_affected = ROW_COUNT;\n                    IF v_rows_affected = 0 THEN\n                        RAISE EXCEPTION 'Insufficient stock for product %', target_pid;\n                    END IF;\n                ELSIF is_old_cancelled AND is_new_delivered THEN\n                    UPDATE public.products\n                       SET stock = stock - qty\n                     WHERE id = target_pid\n                       AND stock \u003e= qty;\n\n                    GET DIAGNOSTICS v_rows_affected = ROW_COUNT;\n                    IF v_rows_affected = 0 THEN\n                        RAISE EXCEPTION 'Insufficient stock for product %', target_pid;\n                    END IF;\n                END IF;\n            END IF;\n        END LOOP;\n    END IF;\n\n    RETURN NEW;\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- ------------------------------------------------\n-- 2) Missing secure RPC: create_support_ticket_v1\n-- ------------------------------------------------\nDROP FUNCTION IF EXISTS public.create_support_ticket_v1(text, text, text, text, text, uuid)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.create_support_ticket_v1(\n    p_name text,\n    p_email text,\n    p_category text,\n    p_subject text,\n    p_message text,\n    p_user_id uuid DEFAULT NULL\n)\nRETURNS TABLE (id uuid)\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path = public, pg_catalog\nAS $$\nDECLARE\n    v_actor_id uuid := auth.uid();\n    v_effective_user_id uuid := p_user_id;\n    v_normalized_email text := lower(trim(coalesce(p_email, '')));\n    v_normalized_name text := trim(coalesce(p_name, ''));\n    v_normalized_subject text := trim(coalesce(p_subject, ''));\n    v_normalized_message text := trim(coalesce(p_message, ''));\n    v_category text := lower(trim(coalesce(p_category, '')));\n    v_recent_attempts int := 0;\n    v_ticket_id uuid;\nBEGIN\n    IF v_normalized_name = '' OR length(v_normalized_name) \u003c 2 OR length(v_normalized_name) \u003e 120 THEN\n        RAISE EXCEPTION 'Invalid name';\n    END IF;\n\n    IF v_normalized_email = '' OR v_normalized_email !~* '^[A-Z0-9._%+\\-]+@[A-Z0-9.\\-]+\\.[A-Z]{2,}$' THEN\n        RAISE EXCEPTION 'Invalid email';\n    END IF;\n\n    IF v_normalized_subject = '' OR length(v_normalized_subject) \u003c 5 OR length(v_normalized_subject) \u003e 200 THEN\n        RAISE EXCEPTION 'Invalid subject';\n    END IF;\n\n    IF v_normalized_message = '' OR length(v_normalized_message) \u003c 10 OR length(v_normalized_message) \u003e 5000 THEN\n        RAISE EXCEPTION 'Invalid message';\n    END IF;\n\n    IF v_category NOT IN ('general', 'order_issue', 'product_info', 'delivery', 'other') THEN\n        v_category := 'general';\n    END IF;\n\n    IF v_actor_id IS NULL AND v_effective_user_id IS NOT NULL THEN\n        RAISE EXCEPTION 'Unauthorized';\n    END IF;\n\n    IF v_actor_id IS NOT NULL THEN\n        IF v_effective_user_id IS NULL THEN\n            v_effective_user_id := v_actor_id;\n        ELSIF v_effective_user_id \u003c\u003e v_actor_id THEN\n            RAISE EXCEPTION 'Forbidden';\n        END IF;\n    END IF;\n\n    IF to_regclass('public.integration_rate_limits') IS NOT NULL THEN\n        SELECT COUNT(*)\n          INTO v_recent_attempts\n          FROM public.integration_rate_limits rl\n         WHERE rl.integration_name = 'support'\n           AND rl.action = 'ticket_create'\n           AND rl.created_at \u003e NOW() - INTERVAL '10 minutes'\n           AND (\n               (v_effective_user_id IS NOT NULL AND rl.actor_id = v_effective_user_id) OR\n               (v_effective_user_id IS NULL AND rl.actor_email = v_normalized_email)\n           );\n\n        IF v_recent_attempts \u003e= 5 THEN\n            RAISE EXCEPTION 'Rate limit exceeded';\n        END IF;\n    END IF;\n\n    INSERT INTO public.support_tickets (user_id, name, email, category, subject, message, status)\n    VALUES (v_effective_user_id, v_normalized_name, v_normalized_email, v_category, v_normalized_subject, v_normalized_message, 'open')\n    RETURNING public.support_tickets.id INTO v_ticket_id;\n\n    id := v_ticket_id;\n\n    IF to_regclass('public.integration_rate_limits') IS NOT NULL THEN\n        INSERT INTO public.integration_rate_limits (integration_name, action, actor_id, actor_email)\n        VALUES ('support', 'ticket_create', v_effective_user_id, v_normalized_email);\n    END IF;\n\n    RETURN NEXT;\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"REVOKE ALL ON FUNCTION public.create_support_ticket_v1(text, text, text, text, text, uuid) FROM PUBLIC","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"GRANT EXECUTE ON FUNCTION public.create_support_ticket_v1(text, text, text, text, text, uuid) TO anon, authenticated","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"function public.create_support_ticket_v1(text,text,text,text,text,uuid) does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
NOTICE (00000): function public.create_support_ticket_v1(text,text,text,text,text,uuid) does not exist, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- ------------------------------------------------\n-- 3) Missing secure RPC: sync_user_admin_status\n-- ------------------------------------------------\nDROP FUNCTION IF EXISTS public.sync_user_admin_status(uuid, boolean)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.sync_user_admin_status(\n    p_user_id uuid,\n    p_is_admin boolean\n)\nRETURNS void\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path = public, pg_catalog\nAS $$\nDECLARE\n    v_actor_id uuid := auth.uid();\n    v_actor_is_superadmin boolean := false;\nBEGIN\n    IF v_actor_id IS NULL THEN\n        RAISE EXCEPTION 'Unauthorized';\n    END IF;\n\n    SELECT COALESCE(p.is_superadmin, false)\n      INTO v_actor_is_superadmin\n      FROM public.profiles p\n     WHERE p.id = v_actor_id;\n\n    IF NOT v_actor_is_superadmin THEN\n        RAISE EXCEPTION 'Forbidden';\n    END IF;\n\n    IF p_user_id IS NULL THEN\n        RAISE EXCEPTION 'Invalid target user';\n    END IF;\n\n    IF p_user_id = v_actor_id AND p_is_admin = false THEN\n        RAISE EXCEPTION 'Cannot remove your own admin privileges';\n    END IF;\n\n    UPDATE public.profiles\n       SET is_admin = p_is_admin\n     WHERE id = p_user_id;\n\n    IF NOT FOUND THEN\n        RAISE EXCEPTION 'User not found';\n    END IF;\n\n    IF to_regclass('public.admin_audit_log') IS NOT NULL THEN\n        INSERT INTO public.admin_audit_log (admin_user_id, action, target_table, target_id, details)\n        VALUES (\n            v_actor_id,\n            CASE WHEN p_is_admin THEN 'GRANT_ADMIN' ELSE 'REVOKE_ADMIN' END,\n            'profiles',\n            p_user_id,\n            jsonb_build_object('is_admin', p_is_admin)\n        );\n    END IF;\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"REVOKE ALL ON FUNCTION public.sync_user_admin_status(uuid, boolean) FROM PUBLIC","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"GRANT EXECUTE ON FUNCTION public.sync_user_admin_status(uuid, boolean) TO authenticated","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- ------------------------------------------------\n-- 4) SECURITY DEFINER search_path hardening\n-- ------------------------------------------------\nDO $$\nBEGIN\n    IF to_regprocedure('public.create_order(jsonb,uuid,text,text)') IS NOT NULL THEN\n        EXECUTE 'ALTER FUNCTION public.create_order(jsonb, uuid, text, text) SET search_path = public, pg_catalog';\n    END IF;\n\n    IF to_regprocedure('public.validate_checkout(text,integer,text)') IS NOT NULL THEN\n        EXECUTE 'ALTER FUNCTION public.validate_checkout(text, integer, text) SET search_path = public, pg_catalog';\n    END IF;\n\n    IF to_regprocedure('public.verify_promo_code(text)') IS NOT NULL THEN\n        EXECUTE 'ALTER FUNCTION public.verify_promo_code(text) SET search_path = public, pg_catalog';\n    END IF;\n\n    IF to_regprocedure('public.is_admin_user()') IS NOT NULL THEN\n        EXECUTE 'ALTER FUNCTION public.is_admin_user() SET search_path = public, pg_catalog';\n    END IF;\n\n    IF to_regprocedure('public.admin_get_all_orders(text,integer,integer)') IS NOT NULL THEN\n        EXECUTE 'ALTER FUNCTION public.admin_get_all_orders(text, integer, integer) SET search_path = public, pg_catalog';\n    END IF;\n\n    IF to_regprocedure('public.admin_update_order_status(uuid,text)') IS NOT NULL THEN\n        EXECUTE 'ALTER FUNCTION public.admin_update_order_status(uuid, text) SET search_path = public, pg_catalog';\n    END IF;\n\n    IF to_regprocedure('public.admin_set_user_admin(uuid,boolean)') IS NOT NULL THEN\n        EXECUTE 'ALTER FUNCTION public.admin_set_user_admin(uuid, boolean) SET search_path = public, pg_catalog';\n    END IF;\n\n    IF to_regprocedure('public.manage_inventory()') IS NOT NULL THEN\n        EXECUTE 'ALTER FUNCTION public.manage_inventory() SET search_path = public, pg_catalog';\n    END IF;\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260212191000"},{"text":"security_hardening_phase2"},{"binary":"0000000100000000000000190000000c00000001000000982d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0a2d2d2053656375726974792048617264656e696e6720506861736520320a2d2d20446174653a20323032362d30322d31320a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0a0a424547494e000013ee2d2d202d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d0a2d2d20312920496e76656e746f727920696e746567726974793a2070726576656e742073746f636b20756e646572666c6f770a2d2d202d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d0a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e6d616e6167655f696e76656e746f727928290a52455455524e5320545249474745520a4c414e475541474520706c706773716c0a534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670a41532024240a4445434c4152450a202020206974656d206a736f6e623b0a2020202071747920696e743b0a2020202070726f645f696420757569643b0a202020207461726765745f70696420757569643b0a202020206f6c645f73746174757320746578743b0a202020206e65775f73746174757320746578743b0a2020202069735f6e65775f61637469766520626f6f6c65616e3b0a2020202069735f6f6c645f61637469766520626f6f6c65616e3b0a2020202069735f6e65775f64656c69766572656420626f6f6c65616e3b0a2020202069735f6f6c645f64656c69766572656420626f6f6c65616e3b0a2020202069735f6e65775f63616e63656c6c656420626f6f6c65616e3b0a2020202069735f6f6c645f63616e63656c6c656420626f6f6c65616e3b0a20202020765f726f77735f616666656374656420696e743b0a424547494e0a2020202049462054475f4f50203d2027494e5345525427205448454e0a20202020202020206f6c645f737461747573203a3d204e554c4c3b0a20202020202020206e65775f737461747573203a3d204e45572e7374617475733b0a20202020454c53450a20202020202020206f6c645f737461747573203a3d204f4c442e7374617475733b0a20202020202020206e65775f737461747573203a3d204e45572e7374617475733b0a20202020454e442049463b0a0a2020202069735f6e65775f616374697665203a3d206c6f77657228636f616c65736365286e65775f7374617475732c202727292920494e20282770656e64696e67272c202770726f63657373696e67272c2027707265706172696e67272c202773686970706564272c202762656b6c656d656465272c202769c59f6c656e69796f72272c202768617ac4b1726c616ec4b1796f72272c20276b6172676f646127293b0a2020202069735f6f6c645f616374697665203a3d206c6f77657228636f616c65736365286f6c645f7374617475732c202727292920494e20282770656e64696e67272c202770726f63657373696e67272c2027707265706172696e67272c202773686970706564272c202762656b6c656d656465272c202769c59f6c656e69796f72272c202768617ac4b1726c616ec4b1796f72272c20276b6172676f646127293b0a2020202069735f6e65775f64656c697665726564203a3d206c6f77657228636f616c65736365286e65775f7374617475732c202727292920494e20282764656c697665726564272c20277465736c696d206564696c646927293b0a2020202069735f6f6c645f64656c697665726564203a3d206c6f77657228636f616c65736365286f6c645f7374617475732c202727292920494e20282764656c697665726564272c20277465736c696d206564696c646927293b0a2020202069735f6e65775f63616e63656c6c6564203a3d206c6f77657228636f616c65736365286e65775f7374617475732c202727292920494e20282763616e63656c6c6564272c2027697074616c206564696c6469272c202769616465206564696c646927293b0a2020202069735f6f6c645f63616e63656c6c6564203a3d206c6f77657228636f616c65736365286f6c645f7374617475732c202727292920494e20282763616e63656c6c6564272c2027697074616c206564696c6469272c202769616465206564696c646927293b0a0a202020204946204e45572e6f726465725f64657461696c732d3e276974656d7327204953204e4f54204e554c4c205448454e0a2020202020202020464f52206974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e7473284e45572e6f726465725f64657461696c732d3e276974656d7327290a20202020202020204c4f4f500a202020202020202020202020717479203a3d20286974656d2d3e3e277175616e7469747927293a3a696e743b0a20202020202020202020202070726f645f6964203a3d20286974656d2d3e3e2770726f647563745f696427293a3a757569643b0a0a202020202020202020202020494620717479204953204e554c4c204f5220717479203c3d2030205448454e0a20202020202020202020202020202020524149534520455843455054494f4e2027496e76616c6964207175616e7469747920696e206f72646572206974656d273b0a202020202020202020202020454e442049463b0a0a20202020202020202020202053454c4543542069640a2020202020202020202020202020494e544f207461726765745f7069640a202020202020202020202020202046524f4d207075626c69632e70726f64756374730a202020202020202020202020205748455245206964203d2070726f645f69640a20202020202020202020202020464f52205550444154453b0a0a2020202020202020202020204946207461726765745f706964204953204e554c4c205448454e0a20202020202020202020202020202020524149534520455843455054494f4e202750726f64756374206e6f7420666f756e643a2025272c2070726f645f69643b0a202020202020202020202020454e442049463b0a0a20202020202020202020202049462054475f4f50203d2027494e5345525427205448454e0a2020202020202020202020202020202049462069735f6e65775f616374697665205448454e0a2020202020202020202020202020202020202020555044415445207075626c69632e70726f64756374730a20202020202020202020202020202020202020202020205345542073746f636b203d2073746f636b202d207174792c0a20202020202020202020202020202020202020202020202020202072657365727665645f73746f636b203d20434f414c455343452872657365727665645f73746f636b2c203029202b207174790a2020202020202020202020202020202020202020205748455245206964203d207461726765745f7069640a2020202020202020202020202020202020202020202020414e442073746f636b203e3d207174793b0a0a202020202020202020202020202020202020202047455420444941474e4f535449435320765f726f77735f6166666563746564203d20524f575f434f554e543b0a2020202020202020202020202020202020202020494620765f726f77735f6166666563746564203d2030205448454e0a202020202020202020202020202020202020202020202020524149534520455843455054494f4e2027496e73756666696369656e742073746f636b20666f722070726f647563742025272c207461726765745f7069643b0a2020202020202020202020202020202020202020454e442049463b0a20202020202020202020202020202020454c5349462069735f6e65775f64656c697665726564205448454e0a2020202020202020202020202020202020202020555044415445207075626c69632e70726f64756374730a20202020202020202020202020202020202020202020205345542073746f636b203d2073746f636b202d207174790a2020202020202020202020202020202020202020205748455245206964203d207461726765745f7069640a2020202020202020202020202020202020202020202020414e442073746f636b203e3d207174793b0a0a202020202020202020202020202020202020202047455420444941474e4f535449435320765f726f77735f6166666563746564203d20524f575f434f554e543b0a2020202020202020202020202020202020202020494620765f726f77735f6166666563746564203d2030205448454e0a202020202020202020202020202020202020202020202020524149534520455843455054494f4e2027496e73756666696369656e742073746f636b20666f722070726f647563742025272c207461726765745f7069643b0a2020202020202020202020202020202020202020454e442049463b0a20202020202020202020202020202020454e442049463b0a202020202020202020202020454c5349462054475f4f50203d20275550444154452720414e44206e65775f7374617475732049532044495354494e43542046524f4d206f6c645f737461747573205448454e0a2020202020202020202020202020202049462069735f6f6c645f61637469766520414e442069735f6e65775f64656c697665726564205448454e0a2020202020202020202020202020202020202020555044415445207075626c69632e70726f64756374730a20202020202020202020202020202020202020202020205345542072657365727665645f73746f636b203d20475245415445535428302c20434f414c455343452872657365727665645f73746f636b2c203029202d20717479290a2020202020202020202020202020202020202020205748455245206964203d207461726765745f7069643b0a20202020202020202020202020202020454c5349462069735f6f6c645f61637469766520414e442069735f6e65775f63616e63656c6c6564205448454e0a2020202020202020202020202020202020202020555044415445207075626c69632e70726f64756374730a20202020202020202020202020202020202020202020205345542072657365727665645f73746f636b203d20475245415445535428302c20434f414c455343452872657365727665645f73746f636b2c203029202d20717479292c0a20202020202020202020202020202020202020202020202020202073746f636b203d2073746f636b202b207174790a2020202020202020202020202020202020202020205748455245206964203d207461726765745f7069643b0a20202020202020202020202020202020454c5349462069735f6f6c645f64656c69766572656420414e442069735f6e65775f63616e63656c6c6564205448454e0a2020202020202020202020202020202020202020555044415445207075626c69632e70726f64756374730a20202020202020202020202020202020202020202020205345542073746f636b203d2073746f636b202b207174790a2020202020202020202020202020202020202020205748455245206964203d207461726765745f7069643b0a20202020202020202020202020202020454c5349462069735f6f6c645f63616e63656c6c656420414e442069735f6e65775f616374697665205448454e0a2020202020202020202020202020202020202020555044415445207075626c69632e70726f64756374730a20202020202020202020202020202020202020202020205345542073746f636b203d2073746f636b202d207174792c0a20202020202020202020202020202020202020202020202020202072657365727665645f73746f636b203d20434f414c455343452872657365727665645f73746f636b2c203029202b207174790a2020202020202020202020202020202020202020205748455245206964203d207461726765745f7069640a2020202020202020202020202020202020202020202020414e442073746f636b203e3d207174793b0a0a202020202020202020202020202020202020202047455420444941474e4f535449435320765f726f77735f6166666563746564203d20524f575f434f554e543b0a2020202020202020202020202020202020202020494620765f726f77735f6166666563746564203d2030205448454e0a202020202020202020202020202020202020202020202020524149534520455843455054494f4e2027496e73756666696369656e742073746f636b20666f722070726f647563742025272c207461726765745f7069643b0a2020202020202020202020202020202020202020454e442049463b0a20202020202020202020202020202020454c5349462069735f6f6c645f63616e63656c6c656420414e442069735f6e65775f64656c697665726564205448454e0a2020202020202020202020202020202020202020555044415445207075626c69632e70726f64756374730a20202020202020202020202020202020202020202020205345542073746f636b203d2073746f636b202d207174790a2020202020202020202020202020202020202020205748455245206964203d207461726765745f7069640a2020202020202020202020202020202020202020202020414e442073746f636b203e3d207174793b0a0a202020202020202020202020202020202020202047455420444941474e4f535449435320765f726f77735f6166666563746564203d20524f575f434f554e543b0a2020202020202020202020202020202020202020494620765f726f77735f6166666563746564203d2030205448454e0a202020202020202020202020202020202020202020202020524149534520455843455054494f4e2027496e73756666696369656e742073746f636b20666f722070726f647563742025272c207461726765745f7069643b0a2020202020202020202020202020202020202020454e442049463b0a20202020202020202020202020202020454e442049463b0a202020202020202020202020454e442049463b0a2020202020202020454e44204c4f4f503b0a20202020454e442049463b0a0a2020202052455455524e204e45573b0a454e443b0a2424000000f62d2d202d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d0a2d2d203229204d697373696e6720736563757265205250433a206372656174655f737570706f72745f7469636b65745f76310a2d2d202d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d0a44524f502046554e4354494f4e20494620455849535453207075626c69632e6372656174655f737570706f72745f7469636b65745f763128746578742c20746578742c20746578742c20746578742c20746578742c20757569642900000c6b435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e6372656174655f737570706f72745f7469636b65745f7631280a20202020705f6e616d6520746578742c0a20202020705f656d61696c20746578742c0a20202020705f63617465676f727920746578742c0a20202020705f7375626a65637420746578742c0a20202020705f6d65737361676520746578742c0a20202020705f757365725f696420757569642044454641554c54204e554c4c0a290a52455455524e53205441424c45202869642075756964290a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670a41532024240a4445434c4152450a20202020765f6163746f725f69642075756964203a3d20617574682e75696428293b0a20202020765f6566666563746976655f757365725f69642075756964203a3d20705f757365725f69643b0a20202020765f6e6f726d616c697a65645f656d61696c2074657874203a3d206c6f776572287472696d28636f616c6573636528705f656d61696c2c2027272929293b0a20202020765f6e6f726d616c697a65645f6e616d652074657874203a3d207472696d28636f616c6573636528705f6e616d652c20272729293b0a20202020765f6e6f726d616c697a65645f7375626a6563742074657874203a3d207472696d28636f616c6573636528705f7375626a6563742c20272729293b0a20202020765f6e6f726d616c697a65645f6d6573736167652074657874203a3d207472696d28636f616c6573636528705f6d6573736167652c20272729293b0a20202020765f63617465676f72792074657874203a3d206c6f776572287472696d28636f616c6573636528705f63617465676f72792c2027272929293b0a20202020765f726563656e745f617474656d70747320696e74203a3d20303b0a20202020765f7469636b65745f696420757569643b0a424547494e0a20202020494620765f6e6f726d616c697a65645f6e616d65203d202727204f52206c656e67746828765f6e6f726d616c697a65645f6e616d6529203c2032204f52206c656e67746828765f6e6f726d616c697a65645f6e616d6529203e20313230205448454e0a2020202020202020524149534520455843455054494f4e2027496e76616c6964206e616d65273b0a20202020454e442049463b0a0a20202020494620765f6e6f726d616c697a65645f656d61696c203d202727204f5220765f6e6f726d616c697a65645f656d61696c20217e2a20275e5b412d5a302d392e5f252b5c2d5d2b405b412d5a302d392e5c2d5d2b5c2e5b412d5a5d7b322c7d2427205448454e0a2020202020202020524149534520455843455054494f4e2027496e76616c696420656d61696c273b0a20202020454e442049463b0a0a20202020494620765f6e6f726d616c697a65645f7375626a656374203d202727204f52206c656e67746828765f6e6f726d616c697a65645f7375626a65637429203c2035204f52206c656e67746828765f6e6f726d616c697a65645f7375626a65637429203e20323030205448454e0a2020202020202020524149534520455843455054494f4e2027496e76616c6964207375626a656374273b0a20202020454e442049463b0a0a20202020494620765f6e6f726d616c697a65645f6d657373616765203d202727204f52206c656e67746828765f6e6f726d616c697a65645f6d65737361676529203c203130204f52206c656e67746828765f6e6f726d616c697a65645f6d65737361676529203e2035303030205448454e0a2020202020202020524149534520455843455054494f4e2027496e76616c6964206d657373616765273b0a20202020454e442049463b0a0a20202020494620765f63617465676f7279204e4f5420494e20282767656e6572616c272c20276f726465725f6973737565272c202770726f647563745f696e666f272c202764656c6976657279272c20276f746865722729205448454e0a2020202020202020765f63617465676f7279203a3d202767656e6572616c273b0a20202020454e442049463b0a0a20202020494620765f6163746f725f6964204953204e554c4c20414e4420765f6566666563746976655f757365725f6964204953204e4f54204e554c4c205448454e0a2020202020202020524149534520455843455054494f4e2027556e617574686f72697a6564273b0a20202020454e442049463b0a0a20202020494620765f6163746f725f6964204953204e4f54204e554c4c205448454e0a2020202020202020494620765f6566666563746976655f757365725f6964204953204e554c4c205448454e0a202020202020202020202020765f6566666563746976655f757365725f6964203a3d20765f6163746f725f69643b0a2020202020202020454c53494620765f6566666563746976655f757365725f6964203c3e20765f6163746f725f6964205448454e0a202020202020202020202020524149534520455843455054494f4e2027466f7262696464656e273b0a2020202020202020454e442049463b0a20202020454e442049463b0a0a20202020494620746f5f726567636c61737328277075626c69632e696e746567726174696f6e5f726174655f6c696d6974732729204953204e4f54204e554c4c205448454e0a202020202020202053454c45435420434f554e54282a290a20202020202020202020494e544f20765f726563656e745f617474656d7074730a2020202020202020202046524f4d207075626c69632e696e746567726174696f6e5f726174655f6c696d69747320726c0a202020202020202020574845524520726c2e696e746567726174696f6e5f6e616d65203d2027737570706f7274270a2020202020202020202020414e4420726c2e616374696f6e203d20277469636b65745f637265617465270a2020202020202020202020414e4420726c2e637265617465645f6174203e204e4f572829202d20494e54455256414c20273130206d696e75746573270a2020202020202020202020414e4420280a20202020202020202020202020202028765f6566666563746976655f757365725f6964204953204e4f54204e554c4c20414e4420726c2e6163746f725f6964203d20765f6566666563746976655f757365725f696429204f520a20202020202020202020202020202028765f6566666563746976655f757365725f6964204953204e554c4c20414e4420726c2e6163746f725f656d61696c203d20765f6e6f726d616c697a65645f656d61696c290a2020202020202020202020293b0a0a2020202020202020494620765f726563656e745f617474656d707473203e3d2035205448454e0a202020202020202020202020524149534520455843455054494f4e202752617465206c696d6974206578636565646564273b0a2020202020202020454e442049463b0a20202020454e442049463b0a0a20202020494e5345525420494e544f207075626c69632e737570706f72745f7469636b6574732028757365725f69642c206e616d652c20656d61696c2c2063617465676f72792c207375626a6563742c206d6573736167652c20737461747573290a2020202056414c5545532028765f6566666563746976655f757365725f69642c20765f6e6f726d616c697a65645f6e616d652c20765f6e6f726d616c697a65645f656d61696c2c20765f63617465676f72792c20765f6e6f726d616c697a65645f7375626a6563742c20765f6e6f726d616c697a65645f6d6573736167652c20276f70656e27290a2020202052455455524e494e47207075626c69632e737570706f72745f7469636b6574732e696420494e544f20765f7469636b65745f69643b0a0a202020206964203a3d20765f7469636b65745f69643b0a0a20202020494620746f5f726567636c61737328277075626c69632e696e746567726174696f6e5f726174655f6c696d6974732729204953204e4f54204e554c4c205448454e0a2020202020202020494e5345525420494e544f207075626c69632e696e746567726174696f6e5f726174655f6c696d6974732028696e746567726174696f6e5f6e616d652c20616374696f6e2c206163746f725f69642c206163746f725f656d61696c290a202020202020202056414c554553202827737570706f7274272c20277469636b65745f637265617465272c20765f6566666563746976655f757365725f69642c20765f6e6f726d616c697a65645f656d61696c293b0a20202020454e442049463b0a0a2020202052455455524e204e4558543b0a454e443b0a2424000000665245564f4b4520414c4c204f4e2046554e4354494f4e207075626c69632e6372656174655f737570706f72745f7469636b65745f763128746578742c20746578742c20746578742c20746578742c20746578742c2075756964292046524f4d205055424c4943000000744752414e542045584543555445204f4e2046554e4354494f4e207075626c69632e6372656174655f737570706f72745f7469636b65745f763128746578742c20746578742c20746578742c20746578742c20746578742c20757569642920544f20616e6f6e2c2061757468656e74696361746564000000dd2d2d202d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d0a2d2d203329204d697373696e6720736563757265205250433a2073796e635f757365725f61646d696e5f7374617475730a2d2d202d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d0a44524f502046554e4354494f4e20494620455849535453207075626c69632e73796e635f757365725f61646d696e5f73746174757328757569642c20626f6f6c65616e2900000579435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e73796e635f757365725f61646d696e5f737461747573280a20202020705f757365725f696420757569642c0a20202020705f69735f61646d696e20626f6f6c65616e0a290a52455455524e5320766f69640a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670a41532024240a4445434c4152450a20202020765f6163746f725f69642075756964203a3d20617574682e75696428293b0a20202020765f6163746f725f69735f737570657261646d696e20626f6f6c65616e203a3d2066616c73653b0a424547494e0a20202020494620765f6163746f725f6964204953204e554c4c205448454e0a2020202020202020524149534520455843455054494f4e2027556e617574686f72697a6564273b0a20202020454e442049463b0a0a2020202053454c45435420434f414c4553434528702e69735f737570657261646d696e2c2066616c7365290a202020202020494e544f20765f6163746f725f69735f737570657261646d696e0a20202020202046524f4d207075626c69632e70726f66696c657320700a2020202020574845524520702e6964203d20765f6163746f725f69643b0a0a202020204946204e4f5420765f6163746f725f69735f737570657261646d696e205448454e0a2020202020202020524149534520455843455054494f4e2027466f7262696464656e273b0a20202020454e442049463b0a0a20202020494620705f757365725f6964204953204e554c4c205448454e0a2020202020202020524149534520455843455054494f4e2027496e76616c6964207461726765742075736572273b0a20202020454e442049463b0a0a20202020494620705f757365725f6964203d20765f6163746f725f696420414e4420705f69735f61646d696e203d2066616c7365205448454e0a2020202020202020524149534520455843455054494f4e202743616e6e6f742072656d6f766520796f7572206f776e2061646d696e2070726976696c65676573273b0a20202020454e442049463b0a0a20202020555044415445207075626c69632e70726f66696c65730a202020202020205345542069735f61646d696e203d20705f69735f61646d696e0a20202020205748455245206964203d20705f757365725f69643b0a0a202020204946204e4f5420464f554e44205448454e0a2020202020202020524149534520455843455054494f4e202755736572206e6f7420666f756e64273b0a20202020454e442049463b0a0a20202020494620746f5f726567636c61737328277075626c69632e61646d696e5f61756469745f6c6f672729204953204e4f54204e554c4c205448454e0a2020202020202020494e5345525420494e544f207075626c69632e61646d696e5f61756469745f6c6f67202861646d696e5f757365725f69642c20616374696f6e2c207461726765745f7461626c652c207461726765745f69642c2064657461696c73290a202020202020202056414c55455320280a202020202020202020202020765f6163746f725f69642c0a20202020202020202020202043415345205748454e20705f69735f61646d696e205448454e20274752414e545f41444d494e2720454c534520275245564f4b455f41444d494e2720454e442c0a2020202020202020202020202770726f66696c6573272c0a202020202020202020202020705f757365725f69642c0a2020202020202020202020206a736f6e625f6275696c645f6f626a656374282769735f61646d696e272c20705f69735f61646d696e290a2020202020202020293b0a20202020454e442049463b0a454e443b0a24240000004f5245564f4b4520414c4c204f4e2046554e4354494f4e207075626c69632e73796e635f757365725f61646d696e5f73746174757328757569642c20626f6f6c65616e292046524f4d205055424c4943000000574752414e542045584543555445204f4e2046554e4354494f4e207075626c69632e73796e635f757365725f61646d696e5f73746174757328757569642c20626f6f6c65616e2920544f2061757468656e74696361746564000007032d2d202d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d0a2d2d20342920534543555249545920444546494e4552207365617263685f706174682068617264656e696e670a2d2d202d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d0a444f2024240a424547494e0a20202020494620746f5f72656770726f63656475726528277075626c69632e6372656174655f6f72646572286a736f6e622c757569642c746578742c74657874292729204953204e4f54204e554c4c205448454e0a2020202020202020455845435554452027414c5445522046554e4354494f4e207075626c69632e6372656174655f6f72646572286a736f6e622c20757569642c20746578742c20746578742920534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f67273b0a20202020454e442049463b0a0a20202020494620746f5f72656770726f63656475726528277075626c69632e76616c69646174655f636865636b6f757428746578742c696e74656765722c74657874292729204953204e4f54204e554c4c205448454e0a2020202020202020455845435554452027414c5445522046554e4354494f4e207075626c69632e76616c69646174655f636865636b6f757428746578742c20696e74656765722c20746578742920534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f67273b0a20202020454e442049463b0a0a20202020494620746f5f72656770726f63656475726528277075626c69632e7665726966795f70726f6d6f5f636f64652874657874292729204953204e4f54204e554c4c205448454e0a2020202020202020455845435554452027414c5445522046554e4354494f4e207075626c69632e7665726966795f70726f6d6f5f636f646528746578742920534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f67273b0a20202020454e442049463b0a0a20202020494620746f5f72656770726f63656475726528277075626c69632e69735f61646d696e5f7573657228292729204953204e4f54204e554c4c205448454e0a2020202020202020455845435554452027414c5445522046554e4354494f4e207075626c69632e69735f61646d696e5f75736572282920534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f67273b0a20202020454e442049463b0a0a20202020494620746f5f72656770726f63656475726528277075626c69632e61646d696e5f6765745f616c6c5f6f726465727328746578742c696e74656765722c696e7465676572292729204953204e4f54204e554c4c205448454e0a2020202020202020455845435554452027414c5445522046554e4354494f4e207075626c69632e61646d696e5f6765745f616c6c5f6f726465727328746578742c20696e74656765722c20696e74656765722920534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f67273b0a20202020454e442049463b0a0a20202020494620746f5f72656770726f63656475726528277075626c69632e61646d696e5f7570646174655f6f726465725f73746174757328757569642c74657874292729204953204e4f54204e554c4c205448454e0a2020202020202020455845435554452027414c5445522046554e4354494f4e207075626c69632e61646d696e5f7570646174655f6f726465725f73746174757328757569642c20746578742920534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f67273b0a20202020454e442049463b0a0a20202020494620746f5f72656770726f63656475726528277075626c69632e61646d696e5f7365745f757365725f61646d696e28757569642c626f6f6c65616e292729204953204e4f54204e554c4c205448454e0a2020202020202020455845435554452027414c5445522046554e4354494f4e207075626c69632e61646d696e5f7365745f757365725f61646d696e28757569642c20626f6f6c65616e2920534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f67273b0a20202020454e442049463b0a0a20202020494620746f5f72656770726f63656475726528277075626c69632e6d616e6167655f696e76656e746f727928292729204953204e4f54204e554c4c205448454e0a2020202020202020455845435554452027414c5445522046554e4354494f4e207075626c69632e6d616e6167655f696e76656e746f7279282920534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f67273b0a20202020454e442049463b0a454e4420242400000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"REVOKE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"REVOKE"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260212194000_security_hardening_phase3.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Security hardening phase 3\n-- Goal: prevent internal SQL error leakage from RPC responses.\n\nDO $$\nDECLARE\n    create_order_reg regprocedure := to_regprocedure('public.create_order(jsonb, uuid, text, text)');\n    create_order_definition text;\nBEGIN\n    IF create_order_reg IS NULL THEN\n        RAISE NOTICE 'create_order not found, skipping sanitization';\n        RETURN;\n    END IF;\n\n    SELECT pg_get_functiondef(create_order_reg) INTO create_order_definition;\n\n    IF create_order_definition LIKE '%''Bir hata olutu: '' || SQLERRM%' THEN\n        create_order_definition := replace(\n            create_order_definition,\n            '''Bir hata olutu: '' || SQLERRM',\n            '''Sipari oluturulurken beklenmeyen bir hata olutu. Ltfen tekrar deneyiniz.'''\n        );\n\n        EXECUTE create_order_definition;\n        RAISE NOTICE 'create_order SQLERRM leak sanitized';\n    ELSE\n        RAISE NOTICE 'create_order already sanitized';\n    END IF;\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DO $$\nDECLARE\n    validate_checkout_reg regprocedure := to_regprocedure('public.validate_checkout(text, integer, text)');\n    validate_checkout_definition text;\nBEGIN\n    IF validate_checkout_reg IS NULL THEN\n        RAISE NOTICE 'validate_checkout not found, skipping sanitization';\n        RETURN;\n    END IF;\n\n    SELECT pg_get_functiondef(validate_checkout_reg) INTO validate_checkout_definition;\n\n    IF validate_checkout_definition LIKE '%''Bir hata olutu: '' || SQLERRM%' THEN\n        validate_checkout_definition := replace(\n            validate_checkout_definition,\n            '''Bir hata olutu: '' || SQLERRM',\n            '''Checkout dorulamas srasnda beklenmeyen bir hata olutu. Ltfen tekrar deneyiniz.'''\n        );\n\n        EXECUTE validate_checkout_definition;\n        RAISE NOTICE 'validate_checkout SQLERRM leak sanitized';\n    ELSE\n        RAISE NOTICE 'validate_checkout already sanitized';\n    END IF;\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260212194000"},{"text":"security_hardening_phase3"},{"binary":"0000000100000000000000190000000200000001000003c92d2d2053656375726974792068617264656e696e6720706861736520330a2d2d20476f616c3a2070726576656e7420696e7465726e616c2053514c206572726f72206c65616b6167652066726f6d2052504320726573706f6e7365732e0a0a444f2024240a4445434c4152450a202020206372656174655f6f726465725f7265672072656770726f636564757265203a3d20746f5f72656770726f63656475726528277075626c69632e6372656174655f6f72646572286a736f6e622c20757569642c20746578742c20746578742927293b0a202020206372656174655f6f726465725f646566696e6974696f6e20746578743b0a424547494e0a202020204946206372656174655f6f726465725f726567204953204e554c4c205448454e0a20202020202020205241495345204e4f5449434520276372656174655f6f72646572206e6f7420666f756e642c20736b697070696e672073616e6974697a6174696f6e273b0a202020202020202052455455524e3b0a20202020454e442049463b0a0a2020202053454c4543542070675f6765745f66756e6374696f6e646566286372656174655f6f726465725f7265672920494e544f206372656174655f6f726465725f646566696e6974696f6e3b0a0a202020204946206372656174655f6f726465725f646566696e6974696f6e204c494b4520272527274269722068617461206f6c75c59f74753a202727207c7c2053514c4552524d2527205448454e0a20202020202020206372656174655f6f726465725f646566696e6974696f6e203a3d207265706c616365280a2020202020202020202020206372656174655f6f726465725f646566696e6974696f6e2c0a2020202020202020202020202727274269722068617461206f6c75c59f74753a202727207c7c2053514c4552524d272c0a202020202020202020202020272727536970617269c59f206f6c75c59f747572756c75726b656e2062656b6c656e6d6579656e206269722068617461206f6c75c59f74752e204cc3bc7466656e2074656b7261722064656e6579696e697a2e2727270a2020202020202020293b0a0a202020202020202045584543555445206372656174655f6f726465725f646566696e6974696f6e3b0a20202020202020205241495345204e4f5449434520276372656174655f6f726465722053514c4552524d206c65616b2073616e6974697a6564273b0a20202020454c53450a20202020202020205241495345204e4f5449434520276372656174655f6f7264657220616c72656164792073616e6974697a6564273b0a20202020454e442049463b0a454e44202424000003b1444f2024240a4445434c4152450a2020202076616c69646174655f636865636b6f75745f7265672072656770726f636564757265203a3d20746f5f72656770726f63656475726528277075626c69632e76616c69646174655f636865636b6f757428746578742c20696e74656765722c20746578742927293b0a2020202076616c69646174655f636865636b6f75745f646566696e6974696f6e20746578743b0a424547494e0a2020202049462076616c69646174655f636865636b6f75745f726567204953204e554c4c205448454e0a20202020202020205241495345204e4f54494345202776616c69646174655f636865636b6f7574206e6f7420666f756e642c20736b697070696e672073616e6974697a6174696f6e273b0a202020202020202052455455524e3b0a20202020454e442049463b0a0a2020202053454c4543542070675f6765745f66756e6374696f6e6465662876616c69646174655f636865636b6f75745f7265672920494e544f2076616c69646174655f636865636b6f75745f646566696e6974696f6e3b0a0a2020202049462076616c69646174655f636865636b6f75745f646566696e6974696f6e204c494b4520272527274269722068617461206f6c75c59f74753a202727207c7c2053514c4552524d2527205448454e0a202020202020202076616c69646174655f636865636b6f75745f646566696e6974696f6e203a3d207265706c616365280a20202020202020202020202076616c69646174655f636865636b6f75745f646566696e6974696f6e2c0a2020202020202020202020202727274269722068617461206f6c75c59f74753a202727207c7c2053514c4552524d272c0a202020202020202020202020272727436865636b6f757420646fc49f72756c616d6173c4b12073c4b1726173c4b16e64612062656b6c656e6d6579656e206269722068617461206f6c75c59f74752e204cc3bc7466656e2074656b7261722064656e6579696e697a2e2727270a2020202020202020293b0a0a2020202020202020455845435554452076616c69646174655f636865636b6f75745f646566696e6974696f6e3b0a20202020202020205241495345204e4f54494345202776616c69646174655f636865636b6f75742053514c4552524d206c65616b2073616e6974697a6564273b0a20202020454c53450a20202020202020205241495345204e4f54494345202776616c69646174655f636865636b6f757420616c72656164792073616e6974697a6564273b0a20202020454e442049463b0a454e44202424"}],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Sync"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"create_order SQLERRM leak sanitized","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"PL/pgSQL function inline_code_block line 21 at RAISE","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"pl_exec.c","Line":3911,"Routine":"exec_stmt_raise","UnknownFields":null}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
NOTICE (00000): create_order SQLERRM leak sanitized
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"validate_checkout not found, skipping sanitization","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"PL/pgSQL function inline_code_block line 7 at RAISE","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"pl_exec.c","Line":3911,"Routine":"exec_stmt_raise","UnknownFields":null}
NOTICE (00000): validate_checkout not found, skipping sanitization
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260213093000_payment_intents_foundation.sql...
2026/02/25 16:12:56 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:56 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Payment intents foundation for Bakiyem 3D flow\n-- Source of truth: payment_intents + stock_reservations + payment_transactions\n\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE EXTENSION IF NOT EXISTS pgcrypto","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Installment commission rates (percent values)\nCREATE TABLE IF NOT EXISTS public.installment_rates (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    installment_number INTEGER NOT NULL UNIQUE CHECK (installment_number BETWEEN 1 AND 12),\n    commission_rate NUMERIC(5,2) NOT NULL CHECK (commission_rate \u003e= 0),\n    is_active BOOLEAN NOT NULL DEFAULT TRUE,\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO public.installment_rates (installment_number, commission_rate, is_active)\nVALUES\n    (1, 4.50, TRUE),\n    (2, 8.71, TRUE),\n    (3, 10.78, TRUE),\n    (4, 12.87, TRUE),\n    (5, 14.93, TRUE),\n    (6, 17.00, TRUE),\n    (7, 19.10, TRUE),\n    (8, 21.18, TRUE),\n    (9, 23.25, TRUE),\n    (10, 25.35, FALSE),\n    (11, 27.43, FALSE),\n    (12, 29.51, FALSE)\nON CONFLICT (installment_number)\nDO UPDATE SET\n    commission_rate = EXCLUDED.commission_rate,\n    is_active = EXCLUDED.is_active,\n    updated_at = NOW()","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TABLE IF NOT EXISTS public.payment_intents (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,\n    shipping_address_id UUID NOT NULL REFERENCES public.addresses(id) ON DELETE RESTRICT,\n    payment_method TEXT NOT NULL DEFAULT 'credit_card' CHECK (payment_method IN ('credit_card', 'bank_transfer')),\n    status TEXT NOT NULL DEFAULT 'pending' CHECK (\n        status IN ('pending', 'awaiting_3d', 'paid', 'failed', 'void_pending', 'voided', 'expired', 'refund_pending', 'refunded')\n    ),\n    idempotency_key TEXT NOT NULL UNIQUE,\n    idempotency_expires_at TIMESTAMPTZ NOT NULL,\n    currency TEXT NOT NULL DEFAULT 'TL' CHECK (currency = 'TL'),\n    item_total_cents BIGINT NOT NULL CHECK (item_total_cents \u003e= 0),\n    vat_total_cents BIGINT NOT NULL CHECK (vat_total_cents \u003e= 0),\n    shipping_total_cents BIGINT NOT NULL CHECK (shipping_total_cents \u003e= 0),\n    discount_total_cents BIGINT NOT NULL DEFAULT 0 CHECK (discount_total_cents \u003e= 0),\n    base_total_cents BIGINT NOT NULL CHECK (base_total_cents \u003e= 0),\n    commission_rate NUMERIC(5,2) NOT NULL DEFAULT 0 CHECK (commission_rate \u003e= 0),\n    commission_amount_cents BIGINT NOT NULL DEFAULT 0 CHECK (commission_amount_cents \u003e= 0),\n    paid_total_cents BIGINT NOT NULL CHECK (paid_total_cents \u003e= 0),\n    installment_number INTEGER NOT NULL DEFAULT 1 CHECK (installment_number BETWEEN 1 AND 12),\n    cart_snapshot JSONB NOT NULL,\n    pricing_snapshot JSONB NOT NULL,\n    provider TEXT NOT NULL DEFAULT 'bakiyem',\n    merchant_ref TEXT,\n    gateway_trx_code TEXT,\n    gateway_status TEXT,\n    return_url TEXT,\n    fail_url TEXT,\n    threed_session_ref TEXT,\n    threed_payload_encrypted TEXT,\n    encryption_key_version TEXT,\n    expires_at TIMESTAMPTZ NOT NULL DEFAULT (NOW() + INTERVAL '15 minute'),\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TABLE IF NOT EXISTS public.stock_reservations (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    intent_id UUID NOT NULL REFERENCES public.payment_intents(id) ON DELETE CASCADE,\n    product_id UUID NOT NULL REFERENCES public.products(id) ON DELETE RESTRICT,\n    qty INTEGER NOT NULL CHECK (qty \u003e 0),\n    expires_at TIMESTAMPTZ NOT NULL,\n    released_at TIMESTAMPTZ,\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:56 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:56 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42710","Message":"extension \"pgcrypto\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"extension.c","Line":1791,"Routine":"CreateExtension","UnknownFields":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
NOTICE (42710): extension "pgcrypto" already exists, skipping
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE UNIQUE INDEX IF NOT EXISTS idx_stock_reservations_active_unique\n    ON public.stock_reservations (intent_id, product_id)\n    WHERE released_at IS NULL","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TABLE IF NOT EXISTS public.payment_transactions (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    intent_id UUID REFERENCES public.payment_intents(id) ON DELETE SET NULL,\n    order_id UUID REFERENCES public.orders(id) ON DELETE SET NULL,\n    operation TEXT NOT NULL CHECK (operation IN ('init_3d', 'finalize', 'void', 'refund', 'capture', 'inquiry')),\n    request_payload JSONB,\n    response_payload JSONB,\n    success BOOLEAN NOT NULL DEFAULT FALSE,\n    error_code TEXT,\n    error_message TEXT,\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TABLE IF NOT EXISTS public.payment_webhook_events (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    provider TEXT NOT NULL DEFAULT 'bakiyem',\n    intent_id UUID REFERENCES public.payment_intents(id) ON DELETE SET NULL,\n    gateway_trx_code TEXT,\n    other_trx_code TEXT,\n    result_code TEXT,\n    payload_hash TEXT NOT NULL,\n    event_dedupe_key TEXT NOT NULL UNIQUE,\n    payload JSONB NOT NULL,\n    processing_status TEXT NOT NULL DEFAULT 'received' CHECK (processing_status IN ('received', 'ignored', 'processed', 'failed')),\n    processed_at TIMESTAMPTZ,\n    error_message TEXT,\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TABLE IF NOT EXISTS public.payment_manual_review_queue (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    intent_id UUID REFERENCES public.payment_intents(id) ON DELETE SET NULL,\n    order_id UUID REFERENCES public.orders(id) ON DELETE SET NULL,\n    reason TEXT NOT NULL,\n    details JSONB NOT NULL DEFAULT '{}'::jsonb,\n    status TEXT NOT NULL DEFAULT 'open' CHECK (status IN ('open', 'in_progress', 'resolved', 'dismissed')),\n    dedupe_key TEXT,\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    UNIQUE (dedupe_key)\n)","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Existing table alignment for order-last card flow\nALTER TABLE public.orders ADD COLUMN IF NOT EXISTS payment_intent_id UUID","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.orders ADD COLUMN IF NOT EXISTS currency TEXT DEFAULT 'TL'","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.orders ADD COLUMN IF NOT EXISTS installment_number INTEGER","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.orders ADD COLUMN IF NOT EXISTS item_total_cents BIGINT","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.orders ADD COLUMN IF NOT EXISTS vat_total_cents BIGINT","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.orders ADD COLUMN IF NOT EXISTS shipping_total_cents BIGINT","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.orders ADD COLUMN IF NOT EXISTS discount_total_cents BIGINT DEFAULT 0","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.orders ADD COLUMN IF NOT EXISTS commission_amount_cents BIGINT DEFAULT 0","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.orders ADD COLUMN IF NOT EXISTS paid_total_cents BIGINT","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"UPDATE public.orders\nSET currency = 'TL'\nWHERE currency IS NULL","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DO $$\nBEGIN\n    IF NOT EXISTS (\n        SELECT 1\n        FROM pg_constraint\n        WHERE conname = 'orders_payment_intent_id_fkey'\n    ) THEN\n        ALTER TABLE public.orders\n            ADD CONSTRAINT orders_payment_intent_id_fkey\n            FOREIGN KEY (payment_intent_id) REFERENCES public.payment_intents(id) ON DELETE RESTRICT;\n    END IF;\nEND$$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"CREATE UNIQUE INDEX IF NOT EXISTS idx_orders_payment_intent_unique\n    ON public.orders (payment_intent_id)\n    WHERE payment_intent_id IS NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DO $$\nBEGIN\n    IF NOT EXISTS (\n        SELECT 1\n        FROM pg_constraint\n        WHERE conname = 'orders_credit_card_requires_intent'\n    ) THEN\n        ALTER TABLE public.orders\n            ADD CONSTRAINT orders_credit_card_requires_intent\n            CHECK (payment_method \u003c\u003e 'credit_card' OR payment_intent_id IS NOT NULL) NOT VALID;\n    END IF;\nEND$$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DO $$\nBEGIN\n    IF NOT EXISTS (\n        SELECT 1\n        FROM pg_constraint\n        WHERE conname = 'orders_currency_tl_only'\n    ) THEN\n        ALTER TABLE public.orders\n            ADD CONSTRAINT orders_currency_tl_only\n            CHECK (currency = 'TL') NOT VALID;\n    END IF;\nEND$$","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"-- Remove legacy trigger-driven stock flow (new flow uses reservation RPCs)\nDROP TRIGGER IF EXISTS trigger_deduct_stock ON public.orders","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:56 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:56 PG Send: {"Type":"Parse","Name":"","Query":"DROP TRIGGER IF EXISTS trigger_manage_stock_status ON public.orders","ParameterOIDs":null}
2026/02/25 16:12:56 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:56 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Lightweight updated_at helper for payment tables\nCREATE OR REPLACE FUNCTION public.set_payment_updated_at()\nRETURNS TRIGGER\nLANGUAGE plpgsql\nAS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP TRIGGER IF EXISTS trg_installment_rates_updated_at ON public.installment_rates","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TRIGGER trg_installment_rates_updated_at\n    BEFORE UPDATE ON public.installment_rates\n    FOR EACH ROW\n    EXECUTE FUNCTION public.set_payment_updated_at()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE EXTENSION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP TRIGGER IF EXISTS trg_payment_intents_updated_at ON public.payment_intents","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 12"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TRIGGER trg_payment_intents_updated_at\n    BEFORE UPDATE ON public.payment_intents\n    FOR EACH ROW\n    EXECUTE FUNCTION public.set_payment_updated_at()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"currency\" of relation \"orders\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
NOTICE (42701): column "currency" of relation "orders" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP TRIGGER IF EXISTS trg_manual_review_queue_updated_at ON public.payment_manual_review_queue","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TRIGGER trg_manual_review_queue_updated_at\n    BEFORE UPDATE ON public.payment_manual_review_queue\n    FOR EACH ROW\n    EXECUTE FUNCTION public.set_payment_updated_at()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Indexes\nCREATE INDEX IF NOT EXISTS idx_payment_intents_user_created ON public.payment_intents (user_id, created_at DESC)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_payment_intents_status_expires ON public.payment_intents (status, expires_at)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"UPDATE 0"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_payment_intents_gateway_trx ON public.payment_intents (gateway_trx_code)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_payment_transactions_intent_created ON public.payment_transactions (intent_id, created_at DESC)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"trigger \"trg_installment_rates_updated_at\" for relation \"public.installment_rates\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
NOTICE (00000): trigger "trg_installment_rates_updated_at" for relation "public.installment_rates" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"trigger \"trg_payment_intents_updated_at\" for relation \"public.payment_intents\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
NOTICE (00000): trigger "trg_payment_intents_updated_at" for relation "public.payment_intents" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_payment_transactions_order_created ON public.payment_transactions (order_id, created_at DESC)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"trigger \"trg_manual_review_queue_updated_at\" for relation \"public.payment_manual_review_queue\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): trigger "trg_manual_review_queue_updated_at" for relation "public.payment_manual_review_queue" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_webhook_events_intent_created ON public.payment_webhook_events (intent_id, created_at DESC)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_webhook_events_status_created ON public.payment_webhook_events (processing_status, created_at DESC)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_manual_review_status_created ON public.payment_manual_review_queue (status, created_at DESC)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_stock_reservations_expires_active ON public.stock_reservations (expires_at)\n    WHERE released_at IS NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- RLS rules\nALTER TABLE public.payment_intents ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.stock_reservations ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.payment_transactions ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.payment_webhook_events ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.payment_manual_review_queue ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.installment_rates ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"REVOKE ALL ON public.payment_intents FROM anon, authenticated","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"REVOKE ALL ON public.stock_reservations FROM anon, authenticated","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"REVOKE ALL ON public.payment_transactions FROM anon, authenticated","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"REVOKE ALL ON public.payment_webhook_events FROM anon, authenticated","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"REVOKE ALL ON public.payment_manual_review_queue FROM anon, authenticated","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"REVOKE ALL ON public.installment_rates FROM anon, authenticated","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"GRANT SELECT ON public.payment_intents TO authenticated","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"GRANT SELECT ON public.installment_rates TO authenticated","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users read own payment intents\" ON public.payment_intents","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users read own payment intents\"\nON public.payment_intents\nFOR SELECT\nTO authenticated\nUSING (auth.uid() = user_id)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users read installment rates\" ON public.installment_rates","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users read installment rates\"\nON public.installment_rates\nFOR SELECT\nTO authenticated\nUSING (TRUE)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"REVOKE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"REVOKE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"REVOKE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"REVOKE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"REVOKE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"REVOKE"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users read own payment intents\" for relation \"public.payment_intents\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260213093000"},{"text":"payment_intents_foundation"},{"binary":"0000000100000000000000190000003d00000001000000882d2d205061796d656e7420696e74656e747320666f756e646174696f6e20666f722042616b6979656d20334420666c6f770a2d2d20536f75726365206f662074727574683a207061796d656e745f696e74656e7473202b2073746f636b5f7265736572766174696f6e73202b207061796d656e745f7472616e73616374696f6e730a0a424547494e0000002743524541544520455854454e53494f4e204946204e4f542045584953545320706763727970746f000001d12d2d20496e7374616c6c6d656e7420636f6d6d697373696f6e207261746573202870657263656e742076616c756573290a435245415445205441424c45204946204e4f5420455849535453207075626c69632e696e7374616c6c6d656e745f726174657320280a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0a20202020696e7374616c6c6d656e745f6e756d62657220494e5445474552204e4f54204e554c4c20554e4951554520434845434b2028696e7374616c6c6d656e745f6e756d626572204245545745454e203120414e44203132292c0a20202020636f6d6d697373696f6e5f72617465204e554d4552494328352c3229204e4f54204e554c4c20434845434b2028636f6d6d697373696f6e5f72617465203e3d2030292c0a2020202069735f61637469766520424f4f4c45414e204e4f54204e554c4c2044454641554c5420545255452c0a20202020637265617465645f61742054494d455354414d50545a204e4f54204e554c4c2044454641554c54204e4f5728292c0a20202020757064617465645f61742054494d455354414d50545a204e4f54204e554c4c2044454641554c54204e4f5728290a2900000201494e5345525420494e544f207075626c69632e696e7374616c6c6d656e745f72617465732028696e7374616c6c6d656e745f6e756d6265722c20636f6d6d697373696f6e5f726174652c2069735f616374697665290a56414c5545530a2020202028312c20342e35302c2054525545292c0a2020202028322c20382e37312c2054525545292c0a2020202028332c2031302e37382c2054525545292c0a2020202028342c2031322e38372c2054525545292c0a2020202028352c2031342e39332c2054525545292c0a2020202028362c2031372e30302c2054525545292c0a2020202028372c2031392e31302c2054525545292c0a2020202028382c2032312e31382c2054525545292c0a2020202028392c2032332e32352c2054525545292c0a202020202831302c2032352e33352c2046414c5345292c0a202020202831312c2032372e34332c2046414c5345292c0a202020202831322c2032392e35312c2046414c5345290a4f4e20434f4e464c4943542028696e7374616c6c6d656e745f6e756d626572290a444f20555044415445205345540a20202020636f6d6d697373696f6e5f72617465203d204558434c554445442e636f6d6d697373696f6e5f726174652c0a2020202069735f616374697665203d204558434c554445442e69735f6163746976652c0a20202020757064617465645f6174203d204e4f5728290000078b435245415445205441424c45204946204e4f5420455849535453207075626c69632e7061796d656e745f696e74656e747320280a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0a20202020757365725f69642055554944204e4f54204e554c4c205245464552454e43455320617574682e757365727328696429204f4e2044454c45544520434153434144452c0a202020207368697070696e675f616464726573735f69642055554944204e4f54204e554c4c205245464552454e434553207075626c69632e61646472657373657328696429204f4e2044454c4554452052455354524943542c0a202020207061796d656e745f6d6574686f642054455854204e4f54204e554c4c2044454641554c5420276372656469745f636172642720434845434b20287061796d656e745f6d6574686f6420494e2028276372656469745f63617264272c202762616e6b5f7472616e736665722729292c0a202020207374617475732054455854204e4f54204e554c4c2044454641554c54202770656e64696e672720434845434b20280a202020202020202073746174757320494e20282770656e64696e67272c20276177616974696e675f3364272c202770616964272c20276661696c6564272c2027766f69645f70656e64696e67272c2027766f69646564272c202765787069726564272c2027726566756e645f70656e64696e67272c2027726566756e64656427290a20202020292c0a202020206964656d706f74656e63795f6b65792054455854204e4f54204e554c4c20554e495155452c0a202020206964656d706f74656e63795f657870697265735f61742054494d455354414d50545a204e4f54204e554c4c2c0a2020202063757272656e63792054455854204e4f54204e554c4c2044454641554c542027544c2720434845434b202863757272656e6379203d2027544c27292c0a202020206974656d5f746f74616c5f63656e747320424947494e54204e4f54204e554c4c20434845434b20286974656d5f746f74616c5f63656e7473203e3d2030292c0a202020207661745f746f74616c5f63656e747320424947494e54204e4f54204e554c4c20434845434b20287661745f746f74616c5f63656e7473203e3d2030292c0a202020207368697070696e675f746f74616c5f63656e747320424947494e54204e4f54204e554c4c20434845434b20287368697070696e675f746f74616c5f63656e7473203e3d2030292c0a20202020646973636f756e745f746f74616c5f63656e747320424947494e54204e4f54204e554c4c2044454641554c54203020434845434b2028646973636f756e745f746f74616c5f63656e7473203e3d2030292c0a20202020626173655f746f74616c5f63656e747320424947494e54204e4f54204e554c4c20434845434b2028626173655f746f74616c5f63656e7473203e3d2030292c0a20202020636f6d6d697373696f6e5f72617465204e554d4552494328352c3229204e4f54204e554c4c2044454641554c54203020434845434b2028636f6d6d697373696f6e5f72617465203e3d2030292c0a20202020636f6d6d697373696f6e5f616d6f756e745f63656e747320424947494e54204e4f54204e554c4c2044454641554c54203020434845434b2028636f6d6d697373696f6e5f616d6f756e745f63656e7473203e3d2030292c0a20202020706169645f746f74616c5f63656e747320424947494e54204e4f54204e554c4c20434845434b2028706169645f746f74616c5f63656e7473203e3d2030292c0a20202020696e7374616c6c6d656e745f6e756d62657220494e5445474552204e4f54204e554c4c2044454641554c54203120434845434b2028696e7374616c6c6d656e745f6e756d626572204245545745454e203120414e44203132292c0a20202020636172745f736e617073686f74204a534f4e42204e4f54204e554c4c2c0a2020202070726963696e675f736e617073686f74204a534f4e42204e4f54204e554c4c2c0a2020202070726f76696465722054455854204e4f54204e554c4c2044454641554c54202762616b6979656d272c0a202020206d65726368616e745f72656620544558542c0a20202020676174657761795f7472785f636f646520544558542c0a20202020676174657761795f73746174757320544558542c0a2020202072657475726e5f75726c20544558542c0a202020206661696c5f75726c20544558542c0a202020207468726565645f73657373696f6e5f72656620544558542c0a202020207468726565645f7061796c6f61645f656e6372797074656420544558542c0a20202020656e6372797074696f6e5f6b65795f76657273696f6e20544558542c0a20202020657870697265735f61742054494d455354414d50545a204e4f54204e554c4c2044454641554c5420284e4f572829202b20494e54455256414c20273135206d696e75746527292c0a20202020637265617465645f61742054494d455354414d50545a204e4f54204e554c4c2044454641554c54204e4f5728292c0a20202020757064617465645f61742054494d455354414d50545a204e4f54204e554c4c2044454641554c54204e4f5728290a29000001ae435245415445205441424c45204946204e4f5420455849535453207075626c69632e73746f636b5f7265736572766174696f6e7320280a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0a20202020696e74656e745f69642055554944204e4f54204e554c4c205245464552454e434553207075626c69632e7061796d656e745f696e74656e747328696429204f4e2044454c45544520434153434144452c0a2020202070726f647563745f69642055554944204e4f54204e554c4c205245464552454e434553207075626c69632e70726f647563747328696429204f4e2044454c4554452052455354524943542c0a2020202071747920494e5445474552204e4f54204e554c4c20434845434b2028717479203e2030292c0a20202020657870697265735f61742054494d455354414d50545a204e4f54204e554c4c2c0a2020202072656c65617365645f61742054494d455354414d50545a2c0a20202020637265617465645f61742054494d455354414d50545a204e4f54204e554c4c2044454641554c54204e4f5728290a290000009d43524541544520554e4951554520494e444558204946204e4f5420455849535453206964785f73746f636b5f7265736572766174696f6e735f6163746976655f756e697175650a202020204f4e207075626c69632e73746f636b5f7265736572766174696f6e732028696e74656e745f69642c2070726f647563745f6964290a2020202057484552452072656c65617365645f6174204953204e554c4c00000231435245415445205441424c45204946204e4f5420455849535453207075626c69632e7061796d656e745f7472616e73616374696f6e7320280a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0a20202020696e74656e745f69642055554944205245464552454e434553207075626c69632e7061796d656e745f696e74656e747328696429204f4e2044454c45544520534554204e554c4c2c0a202020206f726465725f69642055554944205245464552454e434553207075626c69632e6f726465727328696429204f4e2044454c45544520534554204e554c4c2c0a202020206f7065726174696f6e2054455854204e4f54204e554c4c20434845434b20286f7065726174696f6e20494e202827696e69745f3364272c202766696e616c697a65272c2027766f6964272c2027726566756e64272c202763617074757265272c2027696e71756972792729292c0a20202020726571756573745f7061796c6f6164204a534f4e422c0a20202020726573706f6e73655f7061796c6f6164204a534f4e422c0a202020207375636365737320424f4f4c45414e204e4f54204e554c4c2044454641554c542046414c53452c0a202020206572726f725f636f646520544558542c0a202020206572726f725f6d65737361676520544558542c0a20202020637265617465645f61742054494d455354414d50545a204e4f54204e554c4c2044454641554c54204e4f5728290a2900000287435245415445205441424c45204946204e4f5420455849535453207075626c69632e7061796d656e745f776562686f6f6b5f6576656e747320280a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0a2020202070726f76696465722054455854204e4f54204e554c4c2044454641554c54202762616b6979656d272c0a20202020696e74656e745f69642055554944205245464552454e434553207075626c69632e7061796d656e745f696e74656e747328696429204f4e2044454c45544520534554204e554c4c2c0a20202020676174657761795f7472785f636f646520544558542c0a202020206f746865725f7472785f636f646520544558542c0a20202020726573756c745f636f646520544558542c0a202020207061796c6f61645f686173682054455854204e4f54204e554c4c2c0a202020206576656e745f6465647570655f6b65792054455854204e4f54204e554c4c20554e495155452c0a202020207061796c6f6164204a534f4e42204e4f54204e554c4c2c0a2020202070726f63657373696e675f7374617475732054455854204e4f54204e554c4c2044454641554c54202772656365697665642720434845434b202870726f63657373696e675f73746174757320494e2028277265636569766564272c202769676e6f726564272c202770726f636573736564272c20276661696c65642729292c0a2020202070726f6365737365645f61742054494d455354414d50545a2c0a202020206572726f725f6d65737361676520544558542c0a20202020637265617465645f61742054494d455354414d50545a204e4f54204e554c4c2044454641554c54204e4f5728290a290000024d435245415445205441424c45204946204e4f5420455849535453207075626c69632e7061796d656e745f6d616e75616c5f7265766965775f717565756520280a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0a20202020696e74656e745f69642055554944205245464552454e434553207075626c69632e7061796d656e745f696e74656e747328696429204f4e2044454c45544520534554204e554c4c2c0a202020206f726465725f69642055554944205245464552454e434553207075626c69632e6f726465727328696429204f4e2044454c45544520534554204e554c4c2c0a20202020726561736f6e2054455854204e4f54204e554c4c2c0a2020202064657461696c73204a534f4e42204e4f54204e554c4c2044454641554c5420277b7d273a3a6a736f6e622c0a202020207374617475732054455854204e4f54204e554c4c2044454641554c5420276f70656e2720434845434b202873746174757320494e2028276f70656e272c2027696e5f70726f6772657373272c20277265736f6c766564272c20276469736d69737365642729292c0a202020206465647570655f6b657920544558542c0a20202020637265617465645f61742054494d455354414d50545a204e4f54204e554c4c2044454641554c54204e4f5728292c0a20202020757064617465645f61742054494d455354414d50545a204e4f54204e554c4c2044454641554c54204e4f5728292c0a20202020554e4951554520286465647570655f6b6579290a290000007e2d2d204578697374696e67207461626c6520616c69676e6d656e7420666f72206f726465722d6c617374206361726420666c6f770a414c544552205441424c45207075626c69632e6f72646572732041444420434f4c554d4e204946204e4f5420455849535453207061796d656e745f696e74656e745f696420555549440000004d414c544552205441424c45207075626c69632e6f72646572732041444420434f4c554d4e204946204e4f54204558495354532063757272656e637920544558542044454641554c542027544c270000004d414c544552205441424c45207075626c69632e6f72646572732041444420434f4c554d4e204946204e4f542045584953545320696e7374616c6c6d656e745f6e756d62657220494e54454745520000004a414c544552205441424c45207075626c69632e6f72646572732041444420434f4c554d4e204946204e4f5420455849535453206974656d5f746f74616c5f63656e747320424947494e5400000049414c544552205441424c45207075626c69632e6f72646572732041444420434f4c554d4e204946204e4f5420455849535453207661745f746f74616c5f63656e747320424947494e540000004e414c544552205441424c45207075626c69632e6f72646572732041444420434f4c554d4e204946204e4f5420455849535453207368697070696e675f746f74616c5f63656e747320424947494e5400000058414c544552205441424c45207075626c69632e6f72646572732041444420434f4c554d4e204946204e4f542045584953545320646973636f756e745f746f74616c5f63656e747320424947494e542044454641554c5420300000005b414c544552205441424c45207075626c69632e6f72646572732041444420434f4c554d4e204946204e4f542045584953545320636f6d6d697373696f6e5f616d6f756e745f63656e747320424947494e542044454641554c5420300000004a414c544552205441424c45207075626c69632e6f72646572732041444420434f4c554d4e204946204e4f542045584953545320706169645f746f74616c5f63656e747320424947494e540000003f555044415445207075626c69632e6f72646572730a5345542063757272656e6379203d2027544c270a57484552452063757272656e6379204953204e554c4c00000161444f2024240a424547494e0a202020204946204e4f542045584953545320280a202020202020202053454c45435420310a202020202020202046524f4d2070675f636f6e73747261696e740a2020202020202020574845524520636f6e6e616d65203d20276f72646572735f7061796d656e745f696e74656e745f69645f666b6579270a2020202029205448454e0a2020202020202020414c544552205441424c45207075626c69632e6f72646572730a20202020202020202020202041444420434f4e53545241494e54206f72646572735f7061796d656e745f696e74656e745f69645f666b65790a202020202020202020202020464f524549474e204b455920287061796d656e745f696e74656e745f696429205245464552454e434553207075626c69632e7061796d656e745f696e74656e747328696429204f4e2044454c4554452052455354524943543b0a20202020454e442049463b0a454e4424240000009343524541544520554e4951554520494e444558204946204e4f5420455849535453206964785f6f72646572735f7061796d656e745f696e74656e745f756e697175650a202020204f4e207075626c69632e6f726465727320287061796d656e745f696e74656e745f6964290a202020205748455245207061796d656e745f696e74656e745f6964204953204e4f54204e554c4c00000165444f2024240a424547494e0a202020204946204e4f542045584953545320280a202020202020202053454c45435420310a202020202020202046524f4d2070675f636f6e73747261696e740a2020202020202020574845524520636f6e6e616d65203d20276f72646572735f6372656469745f636172645f72657175697265735f696e74656e74270a2020202029205448454e0a2020202020202020414c544552205441424c45207075626c69632e6f72646572730a20202020202020202020202041444420434f4e53545241494e54206f72646572735f6372656469745f636172645f72657175697265735f696e74656e740a202020202020202020202020434845434b20287061796d656e745f6d6574686f64203c3e20276372656469745f6361726427204f52207061796d656e745f696e74656e745f6964204953204e4f54204e554c4c29204e4f542056414c49443b0a20202020454e442049463b0a454e4424240000011e444f2024240a424547494e0a202020204946204e4f542045584953545320280a202020202020202053454c45435420310a202020202020202046524f4d2070675f636f6e73747261696e740a2020202020202020574845524520636f6e6e616d65203d20276f72646572735f63757272656e63795f746c5f6f6e6c79270a2020202029205448454e0a2020202020202020414c544552205441424c45207075626c69632e6f72646572730a20202020202020202020202041444420434f4e53545241494e54206f72646572735f63757272656e63795f746c5f6f6e6c790a202020202020202020202020434845434b202863757272656e6379203d2027544c2729204e4f542056414c49443b0a20202020454e442049463b0a454e442424000000882d2d2052656d6f7665206c656761637920747269676765722d64726976656e2073746f636b20666c6f7720286e657720666c6f772075736573207265736572766174696f6e2052504373290a44524f5020545249474745522049462045584953545320747269676765725f6465647563745f73746f636b204f4e207075626c69632e6f72646572730000004344524f5020545249474745522049462045584953545320747269676765725f6d616e6167655f73746f636b5f737461747573204f4e207075626c69632e6f7264657273000000cf2d2d204c6967687477656967687420757064617465645f61742068656c70657220666f72207061796d656e74207461626c65730a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e7365745f7061796d656e745f757064617465645f617428290a52455455524e5320545249474745520a4c414e475541474520706c706773716c0a41532024240a424547494e0a202020204e45572e757064617465645f6174203d204e4f5728293b0a2020202052455455524e204e45573b0a454e443b0a24240000005344524f50205452494747455220494620455849535453207472675f696e7374616c6c6d656e745f72617465735f757064617465645f6174204f4e207075626c69632e696e7374616c6c6d656e745f7261746573000000a34352454154452054524947474552207472675f696e7374616c6c6d656e745f72617465735f757064617465645f61740a202020204245464f524520555044415445204f4e207075626c69632e696e7374616c6c6d656e745f72617465730a20202020464f52204541434820524f570a20202020455845435554452046554e4354494f4e207075626c69632e7365745f7061796d656e745f757064617465645f617428290000004f44524f50205452494747455220494620455849535453207472675f7061796d656e745f696e74656e74735f757064617465645f6174204f4e207075626c69632e7061796d656e745f696e74656e74730000009f4352454154452054524947474552207472675f7061796d656e745f696e74656e74735f757064617465645f61740a202020204245464f524520555044415445204f4e207075626c69632e7061796d656e745f696e74656e74730a20202020464f52204541434820524f570a20202020455845435554452046554e4354494f4e207075626c69632e7365745f7061796d656e745f757064617465645f617428290000005f44524f50205452494747455220494620455849535453207472675f6d616e75616c5f7265766965775f71756575655f757064617465645f6174204f4e207075626c69632e7061796d656e745f6d616e75616c5f7265766965775f7175657565000000af4352454154452054524947474552207472675f6d616e75616c5f7265766965775f71756575655f757064617465645f61740a202020204245464f524520555044415445204f4e207075626c69632e7061796d656e745f6d616e75616c5f7265766965775f71756575650a20202020464f52204541434820524f570a20202020455845435554452046554e4354494f4e207075626c69632e7365745f7061796d656e745f757064617465645f617428290000007b2d2d20496e64657865730a43524541544520494e444558204946204e4f5420455849535453206964785f7061796d656e745f696e74656e74735f757365725f63726561746564204f4e207075626c69632e7061796d656e745f696e74656e74732028757365725f69642c20637265617465645f61742044455343290000006c43524541544520494e444558204946204e4f5420455849535453206964785f7061796d656e745f696e74656e74735f7374617475735f65787069726573204f4e207075626c69632e7061796d656e745f696e74656e747320287374617475732c20657870697265735f6174290000006743524541544520494e444558204946204e4f5420455849535453206964785f7061796d656e745f696e74656e74735f676174657761795f747278204f4e207075626c69632e7061796d656e745f696e74656e74732028676174657761795f7472785f636f6465290000007e43524541544520494e444558204946204e4f5420455849535453206964785f7061796d656e745f7472616e73616374696f6e735f696e74656e745f63726561746564204f4e207075626c69632e7061796d656e745f7472616e73616374696f6e732028696e74656e745f69642c20637265617465645f61742044455343290000007c43524541544520494e444558204946204e4f5420455849535453206964785f7061796d656e745f7472616e73616374696f6e735f6f726465725f63726561746564204f4e207075626c69632e7061796d656e745f7472616e73616374696f6e7320286f726465725f69642c20637265617465645f61742044455343290000007a43524541544520494e444558204946204e4f5420455849535453206964785f776562686f6f6b5f6576656e74735f696e74656e745f63726561746564204f4e207075626c69632e7061796d656e745f776562686f6f6b5f6576656e74732028696e74656e745f69642c20637265617465645f61742044455343290000008243524541544520494e444558204946204e4f5420455849535453206964785f776562686f6f6b5f6576656e74735f7374617475735f63726561746564204f4e207075626c69632e7061796d656e745f776562686f6f6b5f6576656e7473202870726f63657373696e675f7374617475732c20637265617465645f61742044455343290000007b43524541544520494e444558204946204e4f5420455849535453206964785f6d616e75616c5f7265766965775f7374617475735f63726561746564204f4e207075626c69632e7061796d656e745f6d616e75616c5f7265766965775f717565756520287374617475732c20637265617465645f61742044455343290000008843524541544520494e444558204946204e4f5420455849535453206964785f73746f636b5f7265736572766174696f6e735f657870697265735f616374697665204f4e207075626c69632e73746f636b5f7265736572766174696f6e732028657870697265735f6174290a2020202057484552452072656c65617365645f6174204953204e554c4c000000492d2d20524c532072756c65730a414c544552205441424c45207075626c69632e7061796d656e745f696e74656e747320454e41424c4520524f57204c4556454c2053454355524954590000003f414c544552205441424c45207075626c69632e73746f636b5f7265736572766174696f6e7320454e41424c4520524f57204c4556454c20534543555249545900000041414c544552205441424c45207075626c69632e7061796d656e745f7472616e73616374696f6e7320454e41424c4520524f57204c4556454c20534543555249545900000043414c544552205441424c45207075626c69632e7061796d656e745f776562686f6f6b5f6576656e747320454e41424c4520524f57204c4556454c20534543555249545900000048414c544552205441424c45207075626c69632e7061796d656e745f6d616e75616c5f7265766965775f717565756520454e41424c4520524f57204c4556454c2053454355524954590000003e414c544552205441424c45207075626c69632e696e7374616c6c6d656e745f726174657320454e41424c4520524f57204c4556454c2053454355524954590000003d5245564f4b4520414c4c204f4e207075626c69632e7061796d656e745f696e74656e74732046524f4d20616e6f6e2c2061757468656e74696361746564000000405245564f4b4520414c4c204f4e207075626c69632e73746f636b5f7265736572766174696f6e732046524f4d20616e6f6e2c2061757468656e74696361746564000000425245564f4b4520414c4c204f4e207075626c69632e7061796d656e745f7472616e73616374696f6e732046524f4d20616e6f6e2c2061757468656e74696361746564000000445245564f4b4520414c4c204f4e207075626c69632e7061796d656e745f776562686f6f6b5f6576656e74732046524f4d20616e6f6e2c2061757468656e74696361746564000000495245564f4b4520414c4c204f4e207075626c69632e7061796d656e745f6d616e75616c5f7265766965775f71756575652046524f4d20616e6f6e2c2061757468656e746963617465640000003f5245564f4b4520414c4c204f4e207075626c69632e696e7374616c6c6d656e745f72617465732046524f4d20616e6f6e2c2061757468656e74696361746564000000374752414e542053454c454354204f4e207075626c69632e7061796d656e745f696e74656e747320544f2061757468656e74696361746564000000394752414e542053454c454354204f4e207075626c69632e696e7374616c6c6d656e745f726174657320544f2061757468656e746963617465640000005044524f5020504f4c49435920494620455849535453202255736572732072656164206f776e207061796d656e7420696e74656e747322204f4e207075626c69632e7061796d656e745f696e74656e74730000008143524541544520504f4c494359202255736572732072656164206f776e207061796d656e7420696e74656e7473220a4f4e207075626c69632e7061796d656e745f696e74656e74730a464f522053454c4543540a544f2061757468656e746963617465640a5553494e472028617574682e7569642829203d20757365725f6964290000005044524f5020504f4c4943592049462045584953545320225573657273207265616420696e7374616c6c6d656e7420726174657322204f4e207075626c69632e696e7374616c6c6d656e745f72617465730000007143524541544520504f4c49435920225573657273207265616420696e7374616c6c6d656e74207261746573220a4f4e207075626c69632e696e7374616c6c6d656e745f72617465730a464f522053454c4543540a544f2061757468656e746963617465640a5553494e472028545255452900000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
NOTICE (00000): policy "Users read own payment intents" for relation "public.payment_intents" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users read installment rates\" for relation \"public.installment_rates\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
NOTICE (00000): policy "Users read installment rates" for relation "public.installment_rates" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260213094000_payment_intent_rpcs.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- RPCs for payment intent lifecycle\n\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.calculate_order_quote_v1(\n    p_user_id UUID,\n    p_items JSONB,\n    p_shipping_address_id UUID,\n    p_payment_method TEXT DEFAULT 'credit_card',\n    p_installment_number INTEGER DEFAULT 1,\n    p_promo_code TEXT DEFAULT NULL\n)\nRETURNS JSONB\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path = public, pg_catalog\nAS $$\nDECLARE\n    v_role TEXT;\n    v_user_id UUID;\n    v_address_owner UUID;\n    v_item JSONB;\n    v_product_id UUID;\n    v_product_name TEXT;\n    v_product_price NUMERIC(12,2);\n    v_product_stock INTEGER;\n    v_reserved_stock INTEGER;\n    v_available_stock INTEGER;\n    v_qty INTEGER;\n    v_item_unit_cents BIGINT;\n    v_item_line_cents BIGINT;\n    v_item_total_cents BIGINT := 0;\n    v_vat_rate NUMERIC(10,4) := 0.20;\n    v_shipping_cost NUMERIC(10,2) := 49.90;\n    v_shipping_threshold NUMERIC(12,2) := 1500.00;\n    v_vat_total_cents BIGINT := 0;\n    v_shipping_total_cents BIGINT := 0;\n    v_discount_total_cents BIGINT := 0;\n    v_pre_shipping_total_cents BIGINT := 0;\n    v_base_total_cents BIGINT := 0;\n    v_commission_rate NUMERIC(5,2) := 0;\n    v_commission_amount_cents BIGINT := 0;\n    v_paid_total_cents BIGINT := 0;\n    v_rate_updated_at TIMESTAMPTZ;\n    v_promo_result JSON;\n    v_cart_snapshot JSONB := '[]'::jsonb;\nBEGIN\n    v_role := COALESCE(current_setting('request.jwt.claim.role', TRUE), '');\n    IF v_role = 'service_role' THEN\n        v_user_id := p_user_id;\n    ELSE\n        v_user_id := auth.uid();\n    END IF;\n\n    IF v_user_id IS NULL THEN\n        RETURN jsonb_build_object('success', FALSE, 'message', 'Oturum gerekli');\n    END IF;\n\n    IF p_items IS NULL OR jsonb_typeof(p_items) \u003c\u003e 'array' OR jsonb_array_length(p_items) = 0 THEN\n        RETURN jsonb_build_object('success', FALSE, 'message', 'Sepet bos olamaz');\n    END IF;\n\n    SELECT user_id\n    INTO v_address_owner\n    FROM public.addresses\n    WHERE id = p_shipping_address_id;\n\n    IF v_address_owner IS NULL OR v_address_owner \u003c\u003e v_user_id THEN\n        RETURN jsonb_build_object('success', FALSE, 'message', 'Gecersiz adres secimi');\n    END IF;\n\n    IF p_payment_method NOT IN ('credit_card', 'bank_transfer') THEN\n        RETURN jsonb_build_object('success', FALSE, 'message', 'Gecersiz odeme yontemi');\n    END IF;\n\n    IF p_payment_method = 'credit_card' AND (p_installment_number \u003c 1 OR p_installment_number \u003e 12) THEN\n        RETURN jsonb_build_object('success', FALSE, 'message', 'Gecersiz taksit sayisi');\n    END IF;\n\n    SELECT\n        COALESCE(vat_rate, 0.20),\n        COALESCE(shipping_cost, 49.90),\n        COALESCE(free_shipping_threshold, 1500.00)\n    INTO v_vat_rate, v_shipping_cost, v_shipping_threshold\n    FROM public.site_settings\n    WHERE id = 1;\n\n    FOR v_item IN SELECT * FROM jsonb_array_elements(p_items)\n    LOOP\n        v_product_id := (v_item-\u003e\u003e'product_id')::uuid;\n        v_qty := COALESCE((v_item-\u003e\u003e'quantity')::integer, 0);\n\n        IF v_product_id IS NULL OR v_qty \u003c= 0 THEN\n            RETURN jsonb_build_object('success', FALSE, 'message', 'Sepet ogesi gecersiz');\n        END IF;\n\n        SELECT\n            p.name,\n            p.price,\n            p.stock,\n            COALESCE(p.reserved_stock, 0)\n        INTO\n            v_product_name,\n            v_product_price,\n            v_product_stock,\n            v_reserved_stock\n        FROM public.products p\n        WHERE p.id = v_product_id;\n\n        IF NOT FOUND THEN\n            RETURN jsonb_build_object('success', FALSE, 'message', 'Urun bulunamadi');\n        END IF;\n\n        v_available_stock := v_product_stock - v_reserved_stock;\n        IF v_available_stock \u003c v_qty THEN\n            RETURN jsonb_build_object(\n                'success', FALSE,\n                'message', 'Yetersiz stok',\n                'product_id', v_product_id\n            );\n        END IF;\n\n        v_item_unit_cents := ROUND(v_product_price * 100)::bigint;\n        v_item_line_cents := v_item_unit_cents * v_qty;\n        v_item_total_cents := v_item_total_cents + v_item_line_cents;\n\n        v_cart_snapshot := v_cart_snapshot || jsonb_build_array(\n            jsonb_build_object(\n                'product_id', v_product_id,\n                'product_name', v_product_name,\n                'quantity', v_qty,\n                'unit_price_cents', v_item_unit_cents,\n                'unit_price', ROUND(v_item_unit_cents::numeric / 100, 2),\n                'subtotal_cents', v_item_line_cents,\n                'subtotal', ROUND(v_item_line_cents::numeric / 100, 2),\n                'line_total_cents', v_item_line_cents,\n                'line_total', ROUND(v_item_line_cents::numeric / 100, 2)\n            )\n        );\n    END LOOP;\n\n    v_vat_total_cents := ROUND(v_item_total_cents * v_vat_rate)::bigint;\n\n    IF p_promo_code IS NOT NULL AND LENGTH(TRIM(p_promo_code)) \u003e 0 THEN\n        BEGIN\n            SELECT verify_promo_code(p_promo_code) INTO v_promo_result;\n            IF COALESCE((v_promo_result-\u003e\u003e'valid')::boolean, FALSE) THEN\n                IF (v_promo_result-\u003e\u003e'discount_type') = 'percentage' THEN\n                    v_discount_total_cents := ROUND(\n                        (v_item_total_cents + v_vat_total_cents) *\n                        (COALESCE((v_promo_result-\u003e\u003e'discount_value')::numeric, 0) / 100.0)\n                    )::bigint;\n                ELSE\n                    v_discount_total_cents := ROUND(\n                        COALESCE((v_promo_result-\u003e\u003e'discount_value')::numeric, 0) * 100\n                    )::bigint;\n                END IF;\n\n                IF (v_promo_result-\u003e\u003e'max_discount_amount') IS NOT NULL THEN\n                    v_discount_total_cents := LEAST(\n                        v_discount_total_cents,\n                        ROUND((v_promo_result-\u003e\u003e'max_discount_amount')::numeric * 100)::bigint\n                    );\n                END IF;\n            END IF;\n        EXCEPTION WHEN OTHERS THEN\n            v_discount_total_cents := 0;\n        END;\n    END IF;\n\n    v_pre_shipping_total_cents := GREATEST(v_item_total_cents + v_vat_total_cents - v_discount_total_cents, 0);\n    IF v_pre_shipping_total_cents \u003e= ROUND(v_shipping_threshold * 100)::bigint THEN\n        v_shipping_total_cents := 0;\n    ELSE\n        v_shipping_total_cents := ROUND(v_shipping_cost * 100)::bigint;\n    END IF;\n\n    v_base_total_cents := v_pre_shipping_total_cents + v_shipping_total_cents;\n\n    IF p_payment_method = 'credit_card' THEN\n        SELECT commission_rate, updated_at\n        INTO v_commission_rate, v_rate_updated_at\n        FROM public.installment_rates\n        WHERE installment_number = p_installment_number\n          AND is_active = TRUE\n        LIMIT 1;\n\n        IF NOT FOUND THEN\n            RETURN jsonb_build_object('success', FALSE, 'message', 'Secilen taksit aktif degil');\n        END IF;\n\n        v_commission_amount_cents := ROUND(v_base_total_cents * (v_commission_rate / 100.0))::bigint;\n    ELSE\n        v_commission_rate := 0;\n        v_rate_updated_at := NOW();\n        v_commission_amount_cents := 0;\n    END IF;\n\n    v_paid_total_cents := v_base_total_cents + v_commission_amount_cents;\n\n    RETURN jsonb_build_object(\n        'success', TRUE,\n        'message', 'Quote olusturuldu',\n        'payment_method', p_payment_method,\n        'shipping_address_id', p_shipping_address_id,\n        'installment_number', CASE WHEN p_payment_method = 'credit_card' THEN p_installment_number ELSE 1 END,\n        'item_total_cents', v_item_total_cents,\n        'vat_total_cents', v_vat_total_cents,\n        'shipping_total_cents', v_shipping_total_cents,\n        'discount_total_cents', v_discount_total_cents,\n        'base_total_cents', v_base_total_cents,\n        'commission_rate', v_commission_rate,\n        'commission_amount_cents', v_commission_amount_cents,\n        'paid_total_cents', v_paid_total_cents,\n        'currency', 'TL',\n        'rate_version', 'v1',\n        'effective_from', v_rate_updated_at,\n        'cart_snapshot', v_cart_snapshot\n    );\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.reserve_stock_for_intent_v1(\n    p_intent_id UUID,\n    p_ttl_minutes INTEGER DEFAULT 15\n)\nRETURNS JSONB\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path = public, pg_catalog\nAS $$\nDECLARE\n    v_role TEXT;\n    v_intent RECORD;\n    v_item JSONB;\n    v_product_id UUID;\n    v_qty INTEGER;\n    v_stock INTEGER;\n    v_reserved INTEGER;\n    v_available INTEGER;\n    v_reserve_until TIMESTAMPTZ;\n    v_existing RECORD;\n    v_reserved_count INTEGER := 0;\nBEGIN\n    v_role := COALESCE(current_setting('request.jwt.claim.role', TRUE), '');\n    IF v_role \u003c\u003e 'service_role' THEN\n        RAISE EXCEPTION 'forbidden';\n    END IF;\n\n    SELECT *\n    INTO v_intent\n    FROM public.payment_intents\n    WHERE id = p_intent_id\n    FOR UPDATE;\n\n    IF NOT FOUND THEN\n        RAISE EXCEPTION 'intent_not_found';\n    END IF;\n\n    IF v_intent.status NOT IN ('pending', 'awaiting_3d') THEN\n        RAISE EXCEPTION 'intent_status_invalid';\n    END IF;\n\n    v_reserve_until := NOW() + make_interval(mins =\u003e GREATEST(p_ttl_minutes, 1));\n\n    -- release previously active reservations for same intent, then recreate deterministically\n    FOR v_existing IN\n        SELECT product_id, qty\n        FROM public.stock_reservations\n        WHERE intent_id = p_intent_id\n          AND released_at IS NULL\n    LOOP\n        UPDATE public.products\n        SET reserved_stock = GREATEST(COALESCE(reserved_stock, 0) - v_existing.qty, 0)\n        WHERE id = v_existing.product_id;\n    END LOOP;\n\n    UPDATE public.stock_reservations\n    SET released_at = NOW()\n    WHERE intent_id = p_intent_id\n      AND released_at IS NULL;\n\n    FOR v_item IN SELECT * FROM jsonb_array_elements(v_intent.cart_snapshot)\n    LOOP\n        v_product_id := (v_item-\u003e\u003e'product_id')::uuid;\n        v_qty := COALESCE((v_item-\u003e\u003e'quantity')::integer, 0);\n\n        IF v_product_id IS NULL OR v_qty \u003c= 0 THEN\n            RAISE EXCEPTION 'intent_cart_invalid';\n        END IF;\n\n        SELECT stock, COALESCE(reserved_stock, 0)\n        INTO v_stock, v_reserved\n        FROM public.products\n        WHERE id = v_product_id\n        FOR UPDATE;\n\n        IF NOT FOUND THEN\n            RAISE EXCEPTION 'product_not_found';\n        END IF;\n\n        v_available := v_stock - v_reserved;\n        IF v_available \u003c v_qty THEN\n            RAISE EXCEPTION 'insufficient_stock';\n        END IF;\n\n        INSERT INTO public.stock_reservations (intent_id, product_id, qty, expires_at)\n        VALUES (p_intent_id, v_product_id, v_qty, v_reserve_until);\n\n        UPDATE public.products\n        SET reserved_stock = COALESCE(reserved_stock, 0) + v_qty\n        WHERE id = v_product_id;\n\n        v_reserved_count := v_reserved_count + 1;\n    END LOOP;\n\n    UPDATE public.payment_intents\n    SET status = 'awaiting_3d',\n        expires_at = v_reserve_until,\n        updated_at = NOW()\n    WHERE id = p_intent_id;\n\n    RETURN jsonb_build_object(\n        'success', TRUE,\n        'intent_id', p_intent_id,\n        'reserved_count', v_reserved_count,\n        'expires_at', v_reserve_until\n    );\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.release_intent_reservations_v1(\n    p_intent_id UUID,\n    p_new_status TEXT DEFAULT 'failed'\n)\nRETURNS JSONB\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path = public, pg_catalog\nAS $$\nDECLARE\n    v_role TEXT;\n    v_reservation RECORD;\n    v_released_count INTEGER := 0;\nBEGIN\n    v_role := COALESCE(current_setting('request.jwt.claim.role', TRUE), '');\n    IF v_role \u003c\u003e 'service_role' THEN\n        RAISE EXCEPTION 'forbidden';\n    END IF;\n\n    FOR v_reservation IN\n        SELECT id, product_id, qty\n        FROM public.stock_reservations\n        WHERE intent_id = p_intent_id\n          AND released_at IS NULL\n        FOR UPDATE\n    LOOP\n        UPDATE public.products\n        SET reserved_stock = GREATEST(COALESCE(reserved_stock, 0) - v_reservation.qty, 0)\n        WHERE id = v_reservation.product_id;\n\n        UPDATE public.stock_reservations\n        SET released_at = NOW()\n        WHERE id = v_reservation.id;\n\n        v_released_count := v_released_count + 1;\n    END LOOP;\n\n    IF p_new_status IN ('failed', 'expired') THEN\n        UPDATE public.payment_intents\n        SET status = p_new_status,\n            updated_at = NOW()\n        WHERE id = p_intent_id\n          AND status NOT IN ('paid', 'voided', 'refunded');\n    END IF;\n\n    RETURN jsonb_build_object(\n        'success', TRUE,\n        'intent_id', p_intent_id,\n        'released_count', v_released_count\n    );\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.finalize_intent_create_order_v1(\n    p_intent_id UUID,\n    p_gateway_result JSONB DEFAULT '{}'::jsonb\n)\nRETURNS JSONB\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path = public, pg_catalog\nAS $$\nDECLARE\n    v_role TEXT;\n    v_intent RECORD;\n    v_existing_order_id UUID;\n    v_reservation RECORD;\n    v_product RECORD;\n    v_order_id UUID;\n    v_gateway_status TEXT;\n    v_gateway_trx_code TEXT;\n    v_order_details JSONB;\n    v_history_note TEXT;\n    v_active_reservation_count INTEGER := 0;\nBEGIN\n    v_role := COALESCE(current_setting('request.jwt.claim.role', TRUE), '');\n    IF v_role \u003c\u003e 'service_role' THEN\n        RAISE EXCEPTION 'forbidden';\n    END IF;\n\n    SELECT *\n    INTO v_intent\n    FROM public.payment_intents\n    WHERE id = p_intent_id\n    FOR UPDATE;\n\n    IF NOT FOUND THEN\n        RAISE EXCEPTION 'intent_not_found';\n    END IF;\n\n    IF v_intent.status = 'paid' THEN\n        SELECT id\n        INTO v_existing_order_id\n        FROM public.orders\n        WHERE payment_intent_id = p_intent_id\n        LIMIT 1;\n\n        RETURN jsonb_build_object(\n            'success', TRUE,\n            'order_id', v_existing_order_id,\n            'already_paid', TRUE\n        );\n    END IF;\n\n    IF v_intent.status NOT IN ('pending', 'awaiting_3d') THEN\n        RAISE EXCEPTION 'intent_status_invalid';\n    END IF;\n\n    IF v_intent.currency \u003c\u003e 'TL' THEN\n        RAISE EXCEPTION 'currency_mismatch';\n    END IF;\n\n    SELECT COUNT(*)\n    INTO v_active_reservation_count\n    FROM public.stock_reservations\n    WHERE intent_id = p_intent_id\n      AND released_at IS NULL;\n\n    IF v_active_reservation_count = 0 THEN\n        RAISE EXCEPTION 'no_active_reservations';\n    END IF;\n\n    FOR v_reservation IN\n        SELECT id, product_id, qty\n        FROM public.stock_reservations\n        WHERE intent_id = p_intent_id\n          AND released_at IS NULL\n        FOR UPDATE\n    LOOP\n        SELECT id, stock, COALESCE(reserved_stock, 0) AS reserved_stock\n        INTO v_product\n        FROM public.products\n        WHERE id = v_reservation.product_id\n        FOR UPDATE;\n\n        IF NOT FOUND THEN\n            RAISE EXCEPTION 'product_not_found';\n        END IF;\n\n        IF v_product.reserved_stock \u003c v_reservation.qty OR v_product.stock \u003c v_reservation.qty THEN\n            RAISE EXCEPTION 'reservation_state_invalid';\n        END IF;\n\n        UPDATE public.products\n        SET\n            stock = stock - v_reservation.qty,\n            reserved_stock = GREATEST(COALESCE(reserved_stock, 0) - v_reservation.qty, 0)\n        WHERE id = v_reservation.product_id;\n    END LOOP;\n\n    v_order_details := jsonb_build_object(\n        'items', v_intent.cart_snapshot,\n        'subtotal', ROUND(v_intent.item_total_cents::numeric / 100, 2),\n        'vat_amount', ROUND(v_intent.vat_total_cents::numeric / 100, 2),\n        'shipping_cost', ROUND(v_intent.shipping_total_cents::numeric / 100, 2),\n        'discount', ROUND(v_intent.discount_total_cents::numeric / 100, 2),\n        'commission_amount', ROUND(v_intent.commission_amount_cents::numeric / 100, 2),\n        'total', ROUND(v_intent.paid_total_cents::numeric / 100, 2),\n        'currency', 'TL',\n        'installment_number', v_intent.installment_number\n    );\n\n    INSERT INTO public.orders (\n        user_id,\n        shipping_address_id,\n        payment_method,\n        payment_status,\n        status,\n        order_details,\n        payment_intent_id,\n        currency,\n        installment_number,\n        item_total_cents,\n        vat_total_cents,\n        shipping_total_cents,\n        discount_total_cents,\n        commission_amount_cents,\n        paid_total_cents\n    )\n    VALUES (\n        v_intent.user_id,\n        v_intent.shipping_address_id,\n        'credit_card',\n        'paid',\n        'processing',\n        v_order_details,\n        v_intent.id,\n        'TL',\n        v_intent.installment_number,\n        v_intent.item_total_cents,\n        v_intent.vat_total_cents,\n        v_intent.shipping_total_cents,\n        v_intent.discount_total_cents,\n        v_intent.commission_amount_cents,\n        v_intent.paid_total_cents\n    )\n    RETURNING id INTO v_order_id;\n\n    v_history_note := 'Kart odemesi onaylandi ve siparis olusturuldu';\n    INSERT INTO public.order_status_history (order_id, status, note, created_at)\n    VALUES (v_order_id, 'processing', v_history_note, NOW());\n\n    UPDATE public.stock_reservations\n    SET released_at = NOW()\n    WHERE intent_id = p_intent_id\n      AND released_at IS NULL;\n\n    v_gateway_status := COALESCE(\n        p_gateway_result-\u003e\u003e'gateway_status',\n        p_gateway_result-\u003e\u003e'resultCode',\n        p_gateway_result-\u003e\u003e'result_code',\n        'success'\n    );\n    v_gateway_trx_code := COALESCE(\n        p_gateway_result-\u003e\u003e'gateway_trx_code',\n        p_gateway_result-\u003e\u003e'trxCode',\n        p_gateway_result-\u003e\u003e'trx_code',\n        v_intent.gateway_trx_code\n    );\n\n    UPDATE public.payment_intents\n    SET\n        status = 'paid',\n        gateway_status = v_gateway_status,\n        gateway_trx_code = v_gateway_trx_code,\n        updated_at = NOW()\n    WHERE id = p_intent_id;\n\n    RETURN jsonb_build_object(\n        'success', TRUE,\n        'order_id', v_order_id,\n        'already_paid', FALSE\n    );\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.release_expired_reservations_v1()\nRETURNS JSONB\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path = public, pg_catalog\nAS $$\nDECLARE\n    v_role TEXT;\n    v_reservation RECORD;\n    v_released_count INTEGER := 0;\n    v_expired_intent_count INTEGER := 0;\nBEGIN\n    v_role := COALESCE(current_setting('request.jwt.claim.role', TRUE), '');\n    IF v_role \u003c\u003e 'service_role' THEN\n        RAISE EXCEPTION 'forbidden';\n    END IF;\n\n    FOR v_reservation IN\n        SELECT id, intent_id, product_id, qty\n        FROM public.stock_reservations\n        WHERE released_at IS NULL\n          AND expires_at \u003c NOW()\n        FOR UPDATE\n    LOOP\n        UPDATE public.products\n        SET reserved_stock = GREATEST(COALESCE(reserved_stock, 0) - v_reservation.qty, 0)\n        WHERE id = v_reservation.product_id;\n\n        UPDATE public.stock_reservations\n        SET released_at = NOW()\n        WHERE id = v_reservation.id;\n\n        v_released_count := v_released_count + 1;\n    END LOOP;\n\n    UPDATE public.payment_intents\n    SET status = 'expired',\n        updated_at = NOW()\n    WHERE status IN ('pending', 'awaiting_3d')\n      AND expires_at \u003c NOW();\n\n    GET DIAGNOSTICS v_expired_intent_count = ROW_COUNT;\n\n    RETURN jsonb_build_object(\n        'success', TRUE,\n        'released_reservation_count', v_released_count,\n        'expired_intent_count', v_expired_intent_count\n    );\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.expire_abandoned_intents_v1()\nRETURNS JSONB\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path = public, pg_catalog\nAS $$\nDECLARE\n    v_role TEXT;\n    v_expired_count INTEGER := 0;\nBEGIN\n    v_role := COALESCE(current_setting('request.jwt.claim.role', TRUE), '');\n    IF v_role \u003c\u003e 'service_role' THEN\n        RAISE EXCEPTION 'forbidden';\n    END IF;\n\n    UPDATE public.payment_intents pi\n    SET status = 'expired',\n        updated_at = NOW()\n    WHERE pi.status IN ('pending', 'awaiting_3d')\n      AND pi.expires_at \u003c NOW()\n      AND NOT EXISTS (\n            SELECT 1\n            FROM public.stock_reservations sr\n            WHERE sr.intent_id = pi.id\n              AND sr.released_at IS NULL\n      );\n\n    GET DIAGNOSTICS v_expired_count = ROW_COUNT;\n\n    RETURN jsonb_build_object(\n        'success', TRUE,\n        'expired_intent_count', v_expired_count\n    );\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"REVOKE EXECUTE ON FUNCTION public.calculate_order_quote_v1(UUID, JSONB, UUID, TEXT, INTEGER, TEXT) FROM PUBLIC, anon, authenticated","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"REVOKE EXECUTE ON FUNCTION public.reserve_stock_for_intent_v1(UUID, INTEGER) FROM PUBLIC, anon, authenticated","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"REVOKE EXECUTE ON FUNCTION public.release_intent_reservations_v1(UUID, TEXT) FROM PUBLIC, anon, authenticated","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"REVOKE EXECUTE ON FUNCTION public.finalize_intent_create_order_v1(UUID, JSONB) FROM PUBLIC, anon, authenticated","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"REVOKE EXECUTE ON FUNCTION public.release_expired_reservations_v1() FROM PUBLIC, anon, authenticated","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"REVOKE EXECUTE ON FUNCTION public.expire_abandoned_intents_v1() FROM PUBLIC, anon, authenticated","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"GRANT EXECUTE ON FUNCTION public.calculate_order_quote_v1(UUID, JSONB, UUID, TEXT, INTEGER, TEXT) TO service_role","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"GRANT EXECUTE ON FUNCTION public.reserve_stock_for_intent_v1(UUID, INTEGER) TO service_role","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"GRANT EXECUTE ON FUNCTION public.release_intent_reservations_v1(UUID, TEXT) TO service_role","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"GRANT EXECUTE ON FUNCTION public.finalize_intent_create_order_v1(UUID, JSONB) TO service_role","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"GRANT EXECUTE ON FUNCTION public.release_expired_reservations_v1() TO service_role","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"GRANT EXECUTE ON FUNCTION public.expire_abandoned_intents_v1() TO service_role","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260213094000"},{"text":"payment_intent_rpcs"},{"binary":"00000001000000000000001900000014000000010000002b2d2d205250437320666f72207061796d656e7420696e74656e74206c6966656379636c650a0a424547494e00001efa435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e63616c63756c6174655f6f726465725f71756f74655f7631280a20202020705f757365725f696420555549442c0a20202020705f6974656d73204a534f4e422c0a20202020705f7368697070696e675f616464726573735f696420555549442c0a20202020705f7061796d656e745f6d6574686f6420544558542044454641554c5420276372656469745f63617264272c0a20202020705f696e7374616c6c6d656e745f6e756d62657220494e54454745522044454641554c5420312c0a20202020705f70726f6d6f5f636f646520544558542044454641554c54204e554c4c0a290a52455455524e53204a534f4e420a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670a41532024240a4445434c4152450a20202020765f726f6c6520544558543b0a20202020765f757365725f696420555549443b0a20202020765f616464726573735f6f776e657220555549443b0a20202020765f6974656d204a534f4e423b0a20202020765f70726f647563745f696420555549443b0a20202020765f70726f647563745f6e616d6520544558543b0a20202020765f70726f647563745f7072696365204e554d455249432831322c32293b0a20202020765f70726f647563745f73746f636b20494e54454745523b0a20202020765f72657365727665645f73746f636b20494e54454745523b0a20202020765f617661696c61626c655f73746f636b20494e54454745523b0a20202020765f71747920494e54454745523b0a20202020765f6974656d5f756e69745f63656e747320424947494e543b0a20202020765f6974656d5f6c696e655f63656e747320424947494e543b0a20202020765f6974656d5f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f7661745f72617465204e554d455249432831302c3429203a3d20302e32303b0a20202020765f7368697070696e675f636f7374204e554d455249432831302c3229203a3d2034392e39303b0a20202020765f7368697070696e675f7468726573686f6c64204e554d455249432831322c3229203a3d20313530302e30303b0a20202020765f7661745f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f7368697070696e675f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f646973636f756e745f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f7072655f7368697070696e675f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f626173655f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f636f6d6d697373696f6e5f72617465204e554d4552494328352c3229203a3d20303b0a20202020765f636f6d6d697373696f6e5f616d6f756e745f63656e747320424947494e54203a3d20303b0a20202020765f706169645f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f726174655f757064617465645f61742054494d455354414d50545a3b0a20202020765f70726f6d6f5f726573756c74204a534f4e3b0a20202020765f636172745f736e617073686f74204a534f4e42203a3d20275b5d273a3a6a736f6e623b0a424547494e0a20202020765f726f6c65203a3d20434f414c455343452863757272656e745f73657474696e672827726571756573742e6a77742e636c61696d2e726f6c65272c2054525545292c202727293b0a20202020494620765f726f6c65203d2027736572766963655f726f6c6527205448454e0a2020202020202020765f757365725f6964203a3d20705f757365725f69643b0a20202020454c53450a2020202020202020765f757365725f6964203a3d20617574682e75696428293b0a20202020454e442049463b0a0a20202020494620765f757365725f6964204953204e554c4c205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2046414c53452c20276d657373616765272c20274f747572756d20676572656b6c6927293b0a20202020454e442049463b0a0a20202020494620705f6974656d73204953204e554c4c204f52206a736f6e625f747970656f6628705f6974656d7329203c3e2027617272617927204f52206a736f6e625f61727261795f6c656e67746828705f6974656d7329203d2030205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2046414c53452c20276d657373616765272c2027536570657420626f73206f6c616d617a27293b0a20202020454e442049463b0a0a2020202053454c45435420757365725f69640a20202020494e544f20765f616464726573735f6f776e65720a2020202046524f4d207075626c69632e6164647265737365730a202020205748455245206964203d20705f7368697070696e675f616464726573735f69643b0a0a20202020494620765f616464726573735f6f776e6572204953204e554c4c204f5220765f616464726573735f6f776e6572203c3e20765f757365725f6964205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2046414c53452c20276d657373616765272c2027476563657273697a20616472657320736563696d6927293b0a20202020454e442049463b0a0a20202020494620705f7061796d656e745f6d6574686f64204e4f5420494e2028276372656469745f63617264272c202762616e6b5f7472616e736665722729205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2046414c53452c20276d657373616765272c2027476563657273697a206f64656d6520796f6e74656d6927293b0a20202020454e442049463b0a0a20202020494620705f7061796d656e745f6d6574686f64203d20276372656469745f636172642720414e442028705f696e7374616c6c6d656e745f6e756d626572203c2031204f5220705f696e7374616c6c6d656e745f6e756d626572203e20313229205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2046414c53452c20276d657373616765272c2027476563657273697a2074616b7369742073617969736927293b0a20202020454e442049463b0a0a2020202053454c4543540a2020202020202020434f414c45534345287661745f726174652c20302e3230292c0a2020202020202020434f414c45534345287368697070696e675f636f73742c2034392e3930292c0a2020202020202020434f414c4553434528667265655f7368697070696e675f7468726573686f6c642c20313530302e3030290a20202020494e544f20765f7661745f726174652c20765f7368697070696e675f636f73742c20765f7368697070696e675f7468726573686f6c640a2020202046524f4d207075626c69632e736974655f73657474696e67730a202020205748455245206964203d20313b0a0a20202020464f5220765f6974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e747328705f6974656d73290a202020204c4f4f500a2020202020202020765f70726f647563745f6964203a3d2028765f6974656d2d3e3e2770726f647563745f696427293a3a757569643b0a2020202020202020765f717479203a3d20434f414c455343452828765f6974656d2d3e3e277175616e7469747927293a3a696e74656765722c2030293b0a0a2020202020202020494620765f70726f647563745f6964204953204e554c4c204f5220765f717479203c3d2030205448454e0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2046414c53452c20276d657373616765272c20275365706574206f6765736920676563657273697a27293b0a2020202020202020454e442049463b0a0a202020202020202053454c4543540a202020202020202020202020702e6e616d652c0a202020202020202020202020702e70726963652c0a202020202020202020202020702e73746f636b2c0a202020202020202020202020434f414c4553434528702e72657365727665645f73746f636b2c2030290a2020202020202020494e544f0a202020202020202020202020765f70726f647563745f6e616d652c0a202020202020202020202020765f70726f647563745f70726963652c0a202020202020202020202020765f70726f647563745f73746f636b2c0a202020202020202020202020765f72657365727665645f73746f636b0a202020202020202046524f4d207075626c69632e70726f647563747320700a2020202020202020574845524520702e6964203d20765f70726f647563745f69643b0a0a20202020202020204946204e4f5420464f554e44205448454e0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2046414c53452c20276d657373616765272c20275572756e2062756c756e616d61646927293b0a2020202020202020454e442049463b0a0a2020202020202020765f617661696c61626c655f73746f636b203a3d20765f70726f647563745f73746f636b202d20765f72657365727665645f73746f636b3b0a2020202020202020494620765f617661696c61626c655f73746f636b203c20765f717479205448454e0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a202020202020202020202020202020202773756363657373272c2046414c53452c0a20202020202020202020202020202020276d657373616765272c2027596574657273697a2073746f6b272c0a202020202020202020202020202020202770726f647563745f6964272c20765f70726f647563745f69640a202020202020202020202020293b0a2020202020202020454e442049463b0a0a2020202020202020765f6974656d5f756e69745f63656e7473203a3d20524f554e4428765f70726f647563745f7072696365202a20313030293a3a626967696e743b0a2020202020202020765f6974656d5f6c696e655f63656e7473203a3d20765f6974656d5f756e69745f63656e7473202a20765f7174793b0a2020202020202020765f6974656d5f746f74616c5f63656e7473203a3d20765f6974656d5f746f74616c5f63656e7473202b20765f6974656d5f6c696e655f63656e74733b0a0a2020202020202020765f636172745f736e617073686f74203a3d20765f636172745f736e617073686f74207c7c206a736f6e625f6275696c645f6172726179280a2020202020202020202020206a736f6e625f6275696c645f6f626a656374280a202020202020202020202020202020202770726f647563745f6964272c20765f70726f647563745f69642c0a202020202020202020202020202020202770726f647563745f6e616d65272c20765f70726f647563745f6e616d652c0a20202020202020202020202020202020277175616e74697479272c20765f7174792c0a2020202020202020202020202020202027756e69745f70726963655f63656e7473272c20765f6974656d5f756e69745f63656e74732c0a2020202020202020202020202020202027756e69745f7072696365272c20524f554e4428765f6974656d5f756e69745f63656e74733a3a6e756d65726963202f203130302c2032292c0a2020202020202020202020202020202027737562746f74616c5f63656e7473272c20765f6974656d5f6c696e655f63656e74732c0a2020202020202020202020202020202027737562746f74616c272c20524f554e4428765f6974656d5f6c696e655f63656e74733a3a6e756d65726963202f203130302c2032292c0a20202020202020202020202020202020276c696e655f746f74616c5f63656e7473272c20765f6974656d5f6c696e655f63656e74732c0a20202020202020202020202020202020276c696e655f746f74616c272c20524f554e4428765f6974656d5f6c696e655f63656e74733a3a6e756d65726963202f203130302c2032290a202020202020202020202020290a2020202020202020293b0a20202020454e44204c4f4f503b0a0a20202020765f7661745f746f74616c5f63656e7473203a3d20524f554e4428765f6974656d5f746f74616c5f63656e7473202a20765f7661745f72617465293a3a626967696e743b0a0a20202020494620705f70726f6d6f5f636f6465204953204e4f54204e554c4c20414e44204c454e475448285452494d28705f70726f6d6f5f636f64652929203e2030205448454e0a2020202020202020424547494e0a20202020202020202020202053454c454354207665726966795f70726f6d6f5f636f646528705f70726f6d6f5f636f64652920494e544f20765f70726f6d6f5f726573756c743b0a202020202020202020202020494620434f414c455343452828765f70726f6d6f5f726573756c742d3e3e2776616c696427293a3a626f6f6c65616e2c2046414c534529205448454e0a2020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f747970652729203d202770657263656e7461676527205448454e0a2020202020202020202020202020202020202020765f646973636f756e745f746f74616c5f63656e7473203a3d20524f554e44280a20202020202020202020202020202020202020202020202028765f6974656d5f746f74616c5f63656e7473202b20765f7661745f746f74616c5f63656e747329202a0a20202020202020202020202020202020202020202020202028434f414c455343452828765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a6e756d657269632c203029202f203130302e30290a2020202020202020202020202020202020202020293a3a626967696e743b0a20202020202020202020202020202020454c53450a2020202020202020202020202020202020202020765f646973636f756e745f746f74616c5f63656e7473203a3d20524f554e44280a202020202020202020202020202020202020202020202020434f414c455343452828765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a6e756d657269632c203029202a203130300a2020202020202020202020202020202020202020293a3a626967696e743b0a20202020202020202020202020202020454e442049463b0a0a2020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e742729204953204e4f54204e554c4c205448454e0a2020202020202020202020202020202020202020765f646973636f756e745f746f74616c5f63656e7473203a3d204c45415354280a202020202020202020202020202020202020202020202020765f646973636f756e745f746f74616c5f63656e74732c0a202020202020202020202020202020202020202020202020524f554e442828765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e7427293a3a6e756d65726963202a20313030293a3a626967696e740a2020202020202020202020202020202020202020293b0a20202020202020202020202020202020454e442049463b0a202020202020202020202020454e442049463b0a2020202020202020455843455054494f4e205748454e204f5448455253205448454e0a202020202020202020202020765f646973636f756e745f746f74616c5f63656e7473203a3d20303b0a2020202020202020454e443b0a20202020454e442049463b0a0a20202020765f7072655f7368697070696e675f746f74616c5f63656e7473203a3d20475245415445535428765f6974656d5f746f74616c5f63656e7473202b20765f7661745f746f74616c5f63656e7473202d20765f646973636f756e745f746f74616c5f63656e74732c2030293b0a20202020494620765f7072655f7368697070696e675f746f74616c5f63656e7473203e3d20524f554e4428765f7368697070696e675f7468726573686f6c64202a20313030293a3a626967696e74205448454e0a2020202020202020765f7368697070696e675f746f74616c5f63656e7473203a3d20303b0a20202020454c53450a2020202020202020765f7368697070696e675f746f74616c5f63656e7473203a3d20524f554e4428765f7368697070696e675f636f7374202a20313030293a3a626967696e743b0a20202020454e442049463b0a0a20202020765f626173655f746f74616c5f63656e7473203a3d20765f7072655f7368697070696e675f746f74616c5f63656e7473202b20765f7368697070696e675f746f74616c5f63656e74733b0a0a20202020494620705f7061796d656e745f6d6574686f64203d20276372656469745f6361726427205448454e0a202020202020202053454c45435420636f6d6d697373696f6e5f726174652c20757064617465645f61740a2020202020202020494e544f20765f636f6d6d697373696f6e5f726174652c20765f726174655f757064617465645f61740a202020202020202046524f4d207075626c69632e696e7374616c6c6d656e745f72617465730a2020202020202020574845524520696e7374616c6c6d656e745f6e756d626572203d20705f696e7374616c6c6d656e745f6e756d6265720a20202020202020202020414e442069735f616374697665203d20545255450a20202020202020204c494d495420313b0a0a20202020202020204946204e4f5420464f554e44205448454e0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2046414c53452c20276d657373616765272c2027536563696c656e2074616b73697420616b74696620646567696c27293b0a2020202020202020454e442049463b0a0a2020202020202020765f636f6d6d697373696f6e5f616d6f756e745f63656e7473203a3d20524f554e4428765f626173655f746f74616c5f63656e7473202a2028765f636f6d6d697373696f6e5f72617465202f203130302e3029293a3a626967696e743b0a20202020454c53450a2020202020202020765f636f6d6d697373696f6e5f72617465203a3d20303b0a2020202020202020765f726174655f757064617465645f6174203a3d204e4f5728293b0a2020202020202020765f636f6d6d697373696f6e5f616d6f756e745f63656e7473203a3d20303b0a20202020454e442049463b0a0a20202020765f706169645f746f74616c5f63656e7473203a3d20765f626173655f746f74616c5f63656e7473202b20765f636f6d6d697373696f6e5f616d6f756e745f63656e74733b0a0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20545255452c0a2020202020202020276d657373616765272c202751756f7465206f6c7573747572756c6475272c0a2020202020202020277061796d656e745f6d6574686f64272c20705f7061796d656e745f6d6574686f642c0a2020202020202020277368697070696e675f616464726573735f6964272c20705f7368697070696e675f616464726573735f69642c0a202020202020202027696e7374616c6c6d656e745f6e756d626572272c2043415345205748454e20705f7061796d656e745f6d6574686f64203d20276372656469745f6361726427205448454e20705f696e7374616c6c6d656e745f6e756d62657220454c5345203120454e442c0a2020202020202020276974656d5f746f74616c5f63656e7473272c20765f6974656d5f746f74616c5f63656e74732c0a2020202020202020277661745f746f74616c5f63656e7473272c20765f7661745f746f74616c5f63656e74732c0a2020202020202020277368697070696e675f746f74616c5f63656e7473272c20765f7368697070696e675f746f74616c5f63656e74732c0a202020202020202027646973636f756e745f746f74616c5f63656e7473272c20765f646973636f756e745f746f74616c5f63656e74732c0a202020202020202027626173655f746f74616c5f63656e7473272c20765f626173655f746f74616c5f63656e74732c0a202020202020202027636f6d6d697373696f6e5f72617465272c20765f636f6d6d697373696f6e5f726174652c0a202020202020202027636f6d6d697373696f6e5f616d6f756e745f63656e7473272c20765f636f6d6d697373696f6e5f616d6f756e745f63656e74732c0a202020202020202027706169645f746f74616c5f63656e7473272c20765f706169645f746f74616c5f63656e74732c0a20202020202020202763757272656e6379272c2027544c272c0a202020202020202027726174655f76657273696f6e272c20277631272c0a2020202020202020276566666563746976655f66726f6d272c20765f726174655f757064617465645f61742c0a202020202020202027636172745f736e617073686f74272c20765f636172745f736e617073686f740a20202020293b0a454e443b0a242400000be4435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e726573657276655f73746f636b5f666f725f696e74656e745f7631280a20202020705f696e74656e745f696420555549442c0a20202020705f74746c5f6d696e7574657320494e54454745522044454641554c542031350a290a52455455524e53204a534f4e420a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670a41532024240a4445434c4152450a20202020765f726f6c6520544558543b0a20202020765f696e74656e74205245434f52443b0a20202020765f6974656d204a534f4e423b0a20202020765f70726f647563745f696420555549443b0a20202020765f71747920494e54454745523b0a20202020765f73746f636b20494e54454745523b0a20202020765f726573657276656420494e54454745523b0a20202020765f617661696c61626c6520494e54454745523b0a20202020765f726573657276655f756e74696c2054494d455354414d50545a3b0a20202020765f6578697374696e67205245434f52443b0a20202020765f72657365727665645f636f756e7420494e5445474552203a3d20303b0a424547494e0a20202020765f726f6c65203a3d20434f414c455343452863757272656e745f73657474696e672827726571756573742e6a77742e636c61696d2e726f6c65272c2054525545292c202727293b0a20202020494620765f726f6c65203c3e2027736572766963655f726f6c6527205448454e0a2020202020202020524149534520455843455054494f4e2027666f7262696464656e273b0a20202020454e442049463b0a0a2020202053454c454354202a0a20202020494e544f20765f696e74656e740a2020202046524f4d207075626c69632e7061796d656e745f696e74656e74730a202020205748455245206964203d20705f696e74656e745f69640a20202020464f52205550444154453b0a0a202020204946204e4f5420464f554e44205448454e0a2020202020202020524149534520455843455054494f4e2027696e74656e745f6e6f745f666f756e64273b0a20202020454e442049463b0a0a20202020494620765f696e74656e742e737461747573204e4f5420494e20282770656e64696e67272c20276177616974696e675f33642729205448454e0a2020202020202020524149534520455843455054494f4e2027696e74656e745f7374617475735f696e76616c6964273b0a20202020454e442049463b0a0a20202020765f726573657276655f756e74696c203a3d204e4f572829202b206d616b655f696e74657276616c286d696e73203d3e20475245415445535428705f74746c5f6d696e757465732c203129293b0a0a202020202d2d2072656c656173652070726576696f75736c7920616374697665207265736572766174696f6e7320666f722073616d6520696e74656e742c207468656e2072656372656174652064657465726d696e6973746963616c6c790a20202020464f5220765f6578697374696e6720494e0a202020202020202053454c4543542070726f647563745f69642c207174790a202020202020202046524f4d207075626c69632e73746f636b5f7265736572766174696f6e730a2020202020202020574845524520696e74656e745f6964203d20705f696e74656e745f69640a20202020202020202020414e442072656c65617365645f6174204953204e554c4c0a202020204c4f4f500a2020202020202020555044415445207075626c69632e70726f64756374730a20202020202020205345542072657365727665645f73746f636b203d20475245415445535428434f414c455343452872657365727665645f73746f636b2c203029202d20765f6578697374696e672e7174792c2030290a20202020202020205748455245206964203d20765f6578697374696e672e70726f647563745f69643b0a20202020454e44204c4f4f503b0a0a20202020555044415445207075626c69632e73746f636b5f7265736572766174696f6e730a202020205345542072656c65617365645f6174203d204e4f5728290a20202020574845524520696e74656e745f6964203d20705f696e74656e745f69640a202020202020414e442072656c65617365645f6174204953204e554c4c3b0a0a20202020464f5220765f6974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e747328765f696e74656e742e636172745f736e617073686f74290a202020204c4f4f500a2020202020202020765f70726f647563745f6964203a3d2028765f6974656d2d3e3e2770726f647563745f696427293a3a757569643b0a2020202020202020765f717479203a3d20434f414c455343452828765f6974656d2d3e3e277175616e7469747927293a3a696e74656765722c2030293b0a0a2020202020202020494620765f70726f647563745f6964204953204e554c4c204f5220765f717479203c3d2030205448454e0a202020202020202020202020524149534520455843455054494f4e2027696e74656e745f636172745f696e76616c6964273b0a2020202020202020454e442049463b0a0a202020202020202053454c4543542073746f636b2c20434f414c455343452872657365727665645f73746f636b2c2030290a2020202020202020494e544f20765f73746f636b2c20765f72657365727665640a202020202020202046524f4d207075626c69632e70726f64756374730a20202020202020205748455245206964203d20765f70726f647563745f69640a2020202020202020464f52205550444154453b0a0a20202020202020204946204e4f5420464f554e44205448454e0a202020202020202020202020524149534520455843455054494f4e202770726f647563745f6e6f745f666f756e64273b0a2020202020202020454e442049463b0a0a2020202020202020765f617661696c61626c65203a3d20765f73746f636b202d20765f72657365727665643b0a2020202020202020494620765f617661696c61626c65203c20765f717479205448454e0a202020202020202020202020524149534520455843455054494f4e2027696e73756666696369656e745f73746f636b273b0a2020202020202020454e442049463b0a0a2020202020202020494e5345525420494e544f207075626c69632e73746f636b5f7265736572766174696f6e732028696e74656e745f69642c2070726f647563745f69642c207174792c20657870697265735f6174290a202020202020202056414c5545532028705f696e74656e745f69642c20765f70726f647563745f69642c20765f7174792c20765f726573657276655f756e74696c293b0a0a2020202020202020555044415445207075626c69632e70726f64756374730a20202020202020205345542072657365727665645f73746f636b203d20434f414c455343452872657365727665645f73746f636b2c203029202b20765f7174790a20202020202020205748455245206964203d20765f70726f647563745f69643b0a0a2020202020202020765f72657365727665645f636f756e74203a3d20765f72657365727665645f636f756e74202b20313b0a20202020454e44204c4f4f503b0a0a20202020555044415445207075626c69632e7061796d656e745f696e74656e74730a2020202053455420737461747573203d20276177616974696e675f3364272c0a2020202020202020657870697265735f6174203d20765f726573657276655f756e74696c2c0a2020202020202020757064617465645f6174203d204e4f5728290a202020205748455245206964203d20705f696e74656e745f69643b0a0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20545255452c0a202020202020202027696e74656e745f6964272c20705f696e74656e745f69642c0a20202020202020202772657365727665645f636f756e74272c20765f72657365727665645f636f756e742c0a202020202020202027657870697265735f6174272c20765f726573657276655f756e74696c0a20202020293b0a454e443b0a24240000058f435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e72656c656173655f696e74656e745f7265736572766174696f6e735f7631280a20202020705f696e74656e745f696420555549442c0a20202020705f6e65775f73746174757320544558542044454641554c5420276661696c6564270a290a52455455524e53204a534f4e420a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670a41532024240a4445434c4152450a20202020765f726f6c6520544558543b0a20202020765f7265736572766174696f6e205245434f52443b0a20202020765f72656c65617365645f636f756e7420494e5445474552203a3d20303b0a424547494e0a20202020765f726f6c65203a3d20434f414c455343452863757272656e745f73657474696e672827726571756573742e6a77742e636c61696d2e726f6c65272c2054525545292c202727293b0a20202020494620765f726f6c65203c3e2027736572766963655f726f6c6527205448454e0a2020202020202020524149534520455843455054494f4e2027666f7262696464656e273b0a20202020454e442049463b0a0a20202020464f5220765f7265736572766174696f6e20494e0a202020202020202053454c4543542069642c2070726f647563745f69642c207174790a202020202020202046524f4d207075626c69632e73746f636b5f7265736572766174696f6e730a2020202020202020574845524520696e74656e745f6964203d20705f696e74656e745f69640a20202020202020202020414e442072656c65617365645f6174204953204e554c4c0a2020202020202020464f52205550444154450a202020204c4f4f500a2020202020202020555044415445207075626c69632e70726f64756374730a20202020202020205345542072657365727665645f73746f636b203d20475245415445535428434f414c455343452872657365727665645f73746f636b2c203029202d20765f7265736572766174696f6e2e7174792c2030290a20202020202020205748455245206964203d20765f7265736572766174696f6e2e70726f647563745f69643b0a0a2020202020202020555044415445207075626c69632e73746f636b5f7265736572766174696f6e730a20202020202020205345542072656c65617365645f6174203d204e4f5728290a20202020202020205748455245206964203d20765f7265736572766174696f6e2e69643b0a0a2020202020202020765f72656c65617365645f636f756e74203a3d20765f72656c65617365645f636f756e74202b20313b0a20202020454e44204c4f4f503b0a0a20202020494620705f6e65775f73746174757320494e2028276661696c6564272c2027657870697265642729205448454e0a2020202020202020555044415445207075626c69632e7061796d656e745f696e74656e74730a202020202020202053455420737461747573203d20705f6e65775f7374617475732c0a202020202020202020202020757064617465645f6174203d204e4f5728290a20202020202020205748455245206964203d20705f696e74656e745f69640a20202020202020202020414e4420737461747573204e4f5420494e20282770616964272c2027766f69646564272c2027726566756e64656427293b0a20202020454e442049463b0a0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20545255452c0a202020202020202027696e74656e745f6964272c20705f696e74656e745f69642c0a20202020202020202772656c65617365645f636f756e74272c20765f72656c65617365645f636f756e740a20202020293b0a454e443b0a242400001470435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e66696e616c697a655f696e74656e745f6372656174655f6f726465725f7631280a20202020705f696e74656e745f696420555549442c0a20202020705f676174657761795f726573756c74204a534f4e422044454641554c5420277b7d273a3a6a736f6e620a290a52455455524e53204a534f4e420a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670a41532024240a4445434c4152450a20202020765f726f6c6520544558543b0a20202020765f696e74656e74205245434f52443b0a20202020765f6578697374696e675f6f726465725f696420555549443b0a20202020765f7265736572766174696f6e205245434f52443b0a20202020765f70726f64756374205245434f52443b0a20202020765f6f726465725f696420555549443b0a20202020765f676174657761795f73746174757320544558543b0a20202020765f676174657761795f7472785f636f646520544558543b0a20202020765f6f726465725f64657461696c73204a534f4e423b0a20202020765f686973746f72795f6e6f746520544558543b0a20202020765f6163746976655f7265736572766174696f6e5f636f756e7420494e5445474552203a3d20303b0a424547494e0a20202020765f726f6c65203a3d20434f414c455343452863757272656e745f73657474696e672827726571756573742e6a77742e636c61696d2e726f6c65272c2054525545292c202727293b0a20202020494620765f726f6c65203c3e2027736572766963655f726f6c6527205448454e0a2020202020202020524149534520455843455054494f4e2027666f7262696464656e273b0a20202020454e442049463b0a0a2020202053454c454354202a0a20202020494e544f20765f696e74656e740a2020202046524f4d207075626c69632e7061796d656e745f696e74656e74730a202020205748455245206964203d20705f696e74656e745f69640a20202020464f52205550444154453b0a0a202020204946204e4f5420464f554e44205448454e0a2020202020202020524149534520455843455054494f4e2027696e74656e745f6e6f745f666f756e64273b0a20202020454e442049463b0a0a20202020494620765f696e74656e742e737461747573203d20277061696427205448454e0a202020202020202053454c4543542069640a2020202020202020494e544f20765f6578697374696e675f6f726465725f69640a202020202020202046524f4d207075626c69632e6f72646572730a20202020202020205748455245207061796d656e745f696e74656e745f6964203d20705f696e74656e745f69640a20202020202020204c494d495420313b0a0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c20545255452c0a202020202020202020202020276f726465725f6964272c20765f6578697374696e675f6f726465725f69642c0a20202020202020202020202027616c72656164795f70616964272c20545255450a2020202020202020293b0a20202020454e442049463b0a0a20202020494620765f696e74656e742e737461747573204e4f5420494e20282770656e64696e67272c20276177616974696e675f33642729205448454e0a2020202020202020524149534520455843455054494f4e2027696e74656e745f7374617475735f696e76616c6964273b0a20202020454e442049463b0a0a20202020494620765f696e74656e742e63757272656e6379203c3e2027544c27205448454e0a2020202020202020524149534520455843455054494f4e202763757272656e63795f6d69736d61746368273b0a20202020454e442049463b0a0a2020202053454c45435420434f554e54282a290a20202020494e544f20765f6163746976655f7265736572766174696f6e5f636f756e740a2020202046524f4d207075626c69632e73746f636b5f7265736572766174696f6e730a20202020574845524520696e74656e745f6964203d20705f696e74656e745f69640a202020202020414e442072656c65617365645f6174204953204e554c4c3b0a0a20202020494620765f6163746976655f7265736572766174696f6e5f636f756e74203d2030205448454e0a2020202020202020524149534520455843455054494f4e20276e6f5f6163746976655f7265736572766174696f6e73273b0a20202020454e442049463b0a0a20202020464f5220765f7265736572766174696f6e20494e0a202020202020202053454c4543542069642c2070726f647563745f69642c207174790a202020202020202046524f4d207075626c69632e73746f636b5f7265736572766174696f6e730a2020202020202020574845524520696e74656e745f6964203d20705f696e74656e745f69640a20202020202020202020414e442072656c65617365645f6174204953204e554c4c0a2020202020202020464f52205550444154450a202020204c4f4f500a202020202020202053454c4543542069642c2073746f636b2c20434f414c455343452872657365727665645f73746f636b2c2030292041532072657365727665645f73746f636b0a2020202020202020494e544f20765f70726f647563740a202020202020202046524f4d207075626c69632e70726f64756374730a20202020202020205748455245206964203d20765f7265736572766174696f6e2e70726f647563745f69640a2020202020202020464f52205550444154453b0a0a20202020202020204946204e4f5420464f554e44205448454e0a202020202020202020202020524149534520455843455054494f4e202770726f647563745f6e6f745f666f756e64273b0a2020202020202020454e442049463b0a0a2020202020202020494620765f70726f647563742e72657365727665645f73746f636b203c20765f7265736572766174696f6e2e717479204f5220765f70726f647563742e73746f636b203c20765f7265736572766174696f6e2e717479205448454e0a202020202020202020202020524149534520455843455054494f4e20277265736572766174696f6e5f73746174655f696e76616c6964273b0a2020202020202020454e442049463b0a0a2020202020202020555044415445207075626c69632e70726f64756374730a20202020202020205345540a20202020202020202020202073746f636b203d2073746f636b202d20765f7265736572766174696f6e2e7174792c0a20202020202020202020202072657365727665645f73746f636b203d20475245415445535428434f414c455343452872657365727665645f73746f636b2c203029202d20765f7265736572766174696f6e2e7174792c2030290a20202020202020205748455245206964203d20765f7265736572766174696f6e2e70726f647563745f69643b0a20202020454e44204c4f4f503b0a0a20202020765f6f726465725f64657461696c73203a3d206a736f6e625f6275696c645f6f626a656374280a2020202020202020276974656d73272c20765f696e74656e742e636172745f736e617073686f742c0a202020202020202027737562746f74616c272c20524f554e4428765f696e74656e742e6974656d5f746f74616c5f63656e74733a3a6e756d65726963202f203130302c2032292c0a2020202020202020277661745f616d6f756e74272c20524f554e4428765f696e74656e742e7661745f746f74616c5f63656e74733a3a6e756d65726963202f203130302c2032292c0a2020202020202020277368697070696e675f636f7374272c20524f554e4428765f696e74656e742e7368697070696e675f746f74616c5f63656e74733a3a6e756d65726963202f203130302c2032292c0a202020202020202027646973636f756e74272c20524f554e4428765f696e74656e742e646973636f756e745f746f74616c5f63656e74733a3a6e756d65726963202f203130302c2032292c0a202020202020202027636f6d6d697373696f6e5f616d6f756e74272c20524f554e4428765f696e74656e742e636f6d6d697373696f6e5f616d6f756e745f63656e74733a3a6e756d65726963202f203130302c2032292c0a202020202020202027746f74616c272c20524f554e4428765f696e74656e742e706169645f746f74616c5f63656e74733a3a6e756d65726963202f203130302c2032292c0a20202020202020202763757272656e6379272c2027544c272c0a202020202020202027696e7374616c6c6d656e745f6e756d626572272c20765f696e74656e742e696e7374616c6c6d656e745f6e756d6265720a20202020293b0a0a20202020494e5345525420494e544f207075626c69632e6f726465727320280a2020202020202020757365725f69642c0a20202020202020207368697070696e675f616464726573735f69642c0a20202020202020207061796d656e745f6d6574686f642c0a20202020202020207061796d656e745f7374617475732c0a20202020202020207374617475732c0a20202020202020206f726465725f64657461696c732c0a20202020202020207061796d656e745f696e74656e745f69642c0a202020202020202063757272656e63792c0a2020202020202020696e7374616c6c6d656e745f6e756d6265722c0a20202020202020206974656d5f746f74616c5f63656e74732c0a20202020202020207661745f746f74616c5f63656e74732c0a20202020202020207368697070696e675f746f74616c5f63656e74732c0a2020202020202020646973636f756e745f746f74616c5f63656e74732c0a2020202020202020636f6d6d697373696f6e5f616d6f756e745f63656e74732c0a2020202020202020706169645f746f74616c5f63656e74730a20202020290a2020202056414c55455320280a2020202020202020765f696e74656e742e757365725f69642c0a2020202020202020765f696e74656e742e7368697070696e675f616464726573735f69642c0a2020202020202020276372656469745f63617264272c0a20202020202020202770616964272c0a20202020202020202770726f63657373696e67272c0a2020202020202020765f6f726465725f64657461696c732c0a2020202020202020765f696e74656e742e69642c0a202020202020202027544c272c0a2020202020202020765f696e74656e742e696e7374616c6c6d656e745f6e756d6265722c0a2020202020202020765f696e74656e742e6974656d5f746f74616c5f63656e74732c0a2020202020202020765f696e74656e742e7661745f746f74616c5f63656e74732c0a2020202020202020765f696e74656e742e7368697070696e675f746f74616c5f63656e74732c0a2020202020202020765f696e74656e742e646973636f756e745f746f74616c5f63656e74732c0a2020202020202020765f696e74656e742e636f6d6d697373696f6e5f616d6f756e745f63656e74732c0a2020202020202020765f696e74656e742e706169645f746f74616c5f63656e74730a20202020290a2020202052455455524e494e4720696420494e544f20765f6f726465725f69643b0a0a20202020765f686973746f72795f6e6f7465203a3d20274b617274206f64656d657369206f6e61796c616e64692076652073697061726973206f6c7573747572756c6475273b0a20202020494e5345525420494e544f207075626c69632e6f726465725f7374617475735f686973746f727920286f726465725f69642c207374617475732c206e6f74652c20637265617465645f6174290a2020202056414c5545532028765f6f726465725f69642c202770726f63657373696e67272c20765f686973746f72795f6e6f74652c204e4f572829293b0a0a20202020555044415445207075626c69632e73746f636b5f7265736572766174696f6e730a202020205345542072656c65617365645f6174203d204e4f5728290a20202020574845524520696e74656e745f6964203d20705f696e74656e745f69640a202020202020414e442072656c65617365645f6174204953204e554c4c3b0a0a20202020765f676174657761795f737461747573203a3d20434f414c45534345280a2020202020202020705f676174657761795f726573756c742d3e3e27676174657761795f737461747573272c0a2020202020202020705f676174657761795f726573756c742d3e3e27726573756c74436f6465272c0a2020202020202020705f676174657761795f726573756c742d3e3e27726573756c745f636f6465272c0a20202020202020202773756363657373270a20202020293b0a20202020765f676174657761795f7472785f636f6465203a3d20434f414c45534345280a2020202020202020705f676174657761795f726573756c742d3e3e27676174657761795f7472785f636f6465272c0a2020202020202020705f676174657761795f726573756c742d3e3e27747278436f6465272c0a2020202020202020705f676174657761795f726573756c742d3e3e277472785f636f6465272c0a2020202020202020765f696e74656e742e676174657761795f7472785f636f64650a20202020293b0a0a20202020555044415445207075626c69632e7061796d656e745f696e74656e74730a202020205345540a2020202020202020737461747573203d202770616964272c0a2020202020202020676174657761795f737461747573203d20765f676174657761795f7374617475732c0a2020202020202020676174657761795f7472785f636f6465203d20765f676174657761795f7472785f636f64652c0a2020202020202020757064617465645f6174203d204e4f5728290a202020205748455245206964203d20705f696e74656e745f69643b0a0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20545255452c0a2020202020202020276f726465725f6964272c20765f6f726465725f69642c0a202020202020202027616c72656164795f70616964272c2046414c53450a20202020293b0a454e443b0a242400000581435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e72656c656173655f657870697265645f7265736572766174696f6e735f763128290a52455455524e53204a534f4e420a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670a41532024240a4445434c4152450a20202020765f726f6c6520544558543b0a20202020765f7265736572766174696f6e205245434f52443b0a20202020765f72656c65617365645f636f756e7420494e5445474552203a3d20303b0a20202020765f657870697265645f696e74656e745f636f756e7420494e5445474552203a3d20303b0a424547494e0a20202020765f726f6c65203a3d20434f414c455343452863757272656e745f73657474696e672827726571756573742e6a77742e636c61696d2e726f6c65272c2054525545292c202727293b0a20202020494620765f726f6c65203c3e2027736572766963655f726f6c6527205448454e0a2020202020202020524149534520455843455054494f4e2027666f7262696464656e273b0a20202020454e442049463b0a0a20202020464f5220765f7265736572766174696f6e20494e0a202020202020202053454c4543542069642c20696e74656e745f69642c2070726f647563745f69642c207174790a202020202020202046524f4d207075626c69632e73746f636b5f7265736572766174696f6e730a202020202020202057484552452072656c65617365645f6174204953204e554c4c0a20202020202020202020414e4420657870697265735f6174203c204e4f5728290a2020202020202020464f52205550444154450a202020204c4f4f500a2020202020202020555044415445207075626c69632e70726f64756374730a20202020202020205345542072657365727665645f73746f636b203d20475245415445535428434f414c455343452872657365727665645f73746f636b2c203029202d20765f7265736572766174696f6e2e7174792c2030290a20202020202020205748455245206964203d20765f7265736572766174696f6e2e70726f647563745f69643b0a0a2020202020202020555044415445207075626c69632e73746f636b5f7265736572766174696f6e730a20202020202020205345542072656c65617365645f6174203d204e4f5728290a20202020202020205748455245206964203d20765f7265736572766174696f6e2e69643b0a0a2020202020202020765f72656c65617365645f636f756e74203a3d20765f72656c65617365645f636f756e74202b20313b0a20202020454e44204c4f4f503b0a0a20202020555044415445207075626c69632e7061796d656e745f696e74656e74730a2020202053455420737461747573203d202765787069726564272c0a2020202020202020757064617465645f6174203d204e4f5728290a2020202057484552452073746174757320494e20282770656e64696e67272c20276177616974696e675f336427290a202020202020414e4420657870697265735f6174203c204e4f5728293b0a0a2020202047455420444941474e4f535449435320765f657870697265645f696e74656e745f636f756e74203d20524f575f434f554e543b0a0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20545255452c0a20202020202020202772656c65617365645f7265736572766174696f6e5f636f756e74272c20765f72656c65617365645f636f756e742c0a202020202020202027657870697265645f696e74656e745f636f756e74272c20765f657870697265645f696e74656e745f636f756e740a20202020293b0a454e443b0a24240000038a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e6578706972655f6162616e646f6e65645f696e74656e74735f763128290a52455455524e53204a534f4e420a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670a41532024240a4445434c4152450a20202020765f726f6c6520544558543b0a20202020765f657870697265645f636f756e7420494e5445474552203a3d20303b0a424547494e0a20202020765f726f6c65203a3d20434f414c455343452863757272656e745f73657474696e672827726571756573742e6a77742e636c61696d2e726f6c65272c2054525545292c202727293b0a20202020494620765f726f6c65203c3e2027736572766963655f726f6c6527205448454e0a2020202020202020524149534520455843455054494f4e2027666f7262696464656e273b0a20202020454e442049463b0a0a20202020555044415445207075626c69632e7061796d656e745f696e74656e74732070690a2020202053455420737461747573203d202765787069726564272c0a2020202020202020757064617465645f6174203d204e4f5728290a2020202057484552452070692e73746174757320494e20282770656e64696e67272c20276177616974696e675f336427290a202020202020414e442070692e657870697265735f6174203c204e4f5728290a202020202020414e44204e4f542045584953545320280a20202020202020202020202053454c45435420310a20202020202020202020202046524f4d207075626c69632e73746f636b5f7265736572766174696f6e732073720a20202020202020202020202057484552452073722e696e74656e745f6964203d2070692e69640a2020202020202020202020202020414e442073722e72656c65617365645f6174204953204e554c4c0a202020202020293b0a0a2020202047455420444941474e4f535449435320765f657870697265645f636f756e74203d20524f575f434f554e543b0a0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20545255452c0a202020202020202027657870697265645f696e74656e745f636f756e74272c20765f657870697265645f636f756e740a20202020293b0a454e443b0a2424000000835245564f4b452045584543555445204f4e2046554e4354494f4e207075626c69632e63616c63756c6174655f6f726465725f71756f74655f763128555549442c204a534f4e422c20555549442c20544558542c20494e54454745522c2054455854292046524f4d205055424c49432c20616e6f6e2c2061757468656e746963617465640000006d5245564f4b452045584543555445204f4e2046554e4354494f4e207075626c69632e726573657276655f73746f636b5f666f725f696e74656e745f763128555549442c20494e5445474552292046524f4d205055424c49432c20616e6f6e2c2061757468656e746963617465640000006d5245564f4b452045584543555445204f4e2046554e4354494f4e207075626c69632e72656c656173655f696e74656e745f7265736572766174696f6e735f763128555549442c2054455854292046524f4d205055424c49432c20616e6f6e2c2061757468656e746963617465640000006f5245564f4b452045584543555445204f4e2046554e4354494f4e207075626c69632e66696e616c697a655f696e74656e745f6372656174655f6f726465725f763128555549442c204a534f4e42292046524f4d205055424c49432c20616e6f6e2c2061757468656e74696361746564000000645245564f4b452045584543555445204f4e2046554e4354494f4e207075626c69632e72656c656173655f657870697265645f7265736572766174696f6e735f763128292046524f4d205055424c49432c20616e6f6e2c2061757468656e74696361746564000000605245564f4b452045584543555445204f4e2046554e4354494f4e207075626c69632e6578706972655f6162616e646f6e65645f696e74656e74735f763128292046524f4d205055424c49432c20616e6f6e2c2061757468656e74696361746564000000714752414e542045584543555445204f4e2046554e4354494f4e207075626c69632e63616c63756c6174655f6f726465725f71756f74655f763128555549442c204a534f4e422c20555549442c20544558542c20494e54454745522c20544558542920544f20736572766963655f726f6c650000005b4752414e542045584543555445204f4e2046554e4354494f4e207075626c69632e726573657276655f73746f636b5f666f725f696e74656e745f763128555549442c20494e54454745522920544f20736572766963655f726f6c650000005b4752414e542045584543555445204f4e2046554e4354494f4e207075626c69632e72656c656173655f696e74656e745f7265736572766174696f6e735f763128555549442c20544558542920544f20736572766963655f726f6c650000005d4752414e542045584543555445204f4e2046554e4354494f4e207075626c69632e66696e616c697a655f696e74656e745f6372656174655f6f726465725f763128555549442c204a534f4e422920544f20736572766963655f726f6c65000000524752414e542045584543555445204f4e2046554e4354494f4e207075626c69632e72656c656173655f657870697265645f7265736572766174696f6e735f7631282920544f20736572766963655f726f6c650000004e4752414e542045584543555445204f4e2046554e4354494f4e207075626c69632e6578706972655f6162616e646f6e65645f696e74656e74735f7631282920544f20736572766963655f726f6c6500000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"REVOKE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"REVOKE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"REVOKE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"REVOKE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"REVOKE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"REVOKE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260213094500_bank_transfer_only_create_order.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- create_order is restricted to bank transfer after payment-intent rollout\r\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- ============================================\r\n-- CREATE ORDER FUNCTION (Backend Logic)\r\n-- ============================================\r\n\r\nCREATE OR REPLACE FUNCTION create_order(\r\n    p_items JSONB, -- Array of objects: [{\"product_id\": \"uuid\", \"quantity\": 1}]\r\n    p_shipping_address_id UUID,\r\n    p_payment_method TEXT,\r\n    p_promo_code TEXT DEFAULT NULL\r\n)\r\nRETURNS JSONB\r\nLANGUAGE plpgsql\r\nSECURITY DEFINER\r\nAS $$\r\nDECLARE\r\n    v_user_id UUID;\r\n    v_item JSONB;\r\n    v_product_id UUID;\r\n    v_product_name TEXT;\r\n    v_product_price DECIMAL(10,2);\r\n    v_product_stock INT;\r\n    v_qty INT;\r\n    v_item_subtotal DECIMAL(10,2);\r\n    v_total_subtotal DECIMAL(10,2) := 0;\r\n    v_total_vat DECIMAL(10,2) := 0;\r\n    v_shipping_cost DECIMAL(10,2);\r\n    v_final_total DECIMAL(10,2);\r\n    v_discount DECIMAL(10,2) := 0;\r\n    v_order_id UUID;\r\n    v_valid_items JSONB := '[]'::JSONB;\r\n    v_item_detail JSONB;\r\n    v_order_details JSONB;\r\n    v_bank_ref TEXT := NULL;\r\n    v_address_owner UUID;\r\n    v_promo_result JSON;\r\n    v_item_total_cents BIGINT := 0;\r\n    v_vat_total_cents BIGINT := 0;\r\n    v_shipping_total_cents BIGINT := 0;\r\n    v_discount_total_cents BIGINT := 0;\r\n    v_paid_total_cents BIGINT := 0;\r\nBEGIN\r\n    -- Card flow must use payment_intent + 3D finalize path\r\n    IF p_payment_method \u003c\u003e 'bank_transfer' THEN\r\n        RETURN jsonb_build_object(\r\n            'success', false,\r\n            'message', 'Kart odemeleri yeni 3D akisi ile alinmaktadir. Lutfen kart odeme endpointini kullanin.'\r\n        );\r\n    END IF;\r\n\r\n    -- 1. Get User ID\r\n    v_user_id := auth.uid();\r\n    IF v_user_id IS NULL THEN\r\n        RETURN jsonb_build_object('success', false, 'message', 'Oturum amanz gerekiyor');\r\n    END IF;\r\n\r\n    -- 2. Address Ownership Check (IDOR Security Fix)\r\n    SELECT user_id INTO v_address_owner FROM addresses WHERE id = p_shipping_address_id;\r\n    IF v_address_owner IS NULL OR v_address_owner != v_user_id THEN\r\n         RETURN jsonb_build_object('success', false, 'message', 'Geersiz adres seimi: Adres size ait deil.');\r\n    END IF;\r\n\r\n    -- 3. Iterate input items\r\n    FOR v_item IN SELECT * FROM jsonb_array_elements(p_items)\r\n    LOOP\r\n        v_product_id := (v_item-\u003e\u003e'product_id')::UUID;\r\n        v_qty := (v_item-\u003e\u003e'quantity')::INT;\r\n\r\n        -- Negative Quantity Check (Logic Security Fix)\r\n        IF v_qty \u003c= 0 THEN\r\n             RETURN jsonb_build_object('success', false, 'message', 'Geersiz rn miktar: 0 veya negatif olamaz.');\r\n        END IF;\r\n\r\n        -- Get product from DB WITH LOCK (Race Condition Fix)\r\n        SELECT id, name, price, stock \r\n        INTO v_product_id, v_product_name, v_product_price, v_product_stock\r\n        FROM products \r\n        WHERE id = v_product_id\r\n        FOR UPDATE; -- Critical: Locks the row\r\n        \r\n        IF NOT FOUND THEN\r\n             RETURN jsonb_build_object('success', false, 'message', 'rn bulunamad: ID ' || v_product_id);\r\n        END IF;\r\n\r\n        -- Check stock validity\r\n        IF v_product_stock \u003c v_qty THEN\r\n             RETURN jsonb_build_object('success', false, 'message', 'Yetersiz stok: ' || v_product_name);\r\n        END IF;\r\n\r\n        -- Calculate item totals using DB price\r\n        v_item_subtotal := v_product_price * v_qty;\r\n        v_total_subtotal := v_total_subtotal + v_item_subtotal;\r\n        \r\n        -- Build item detail\r\n        v_item_detail := jsonb_build_object(\r\n            'product_id', v_product_id,\r\n            'product_name', v_product_name,\r\n            'quantity', v_qty,\r\n            'unit_price', v_product_price,\r\n            'subtotal', v_item_subtotal\r\n        );\r\n        \r\n        v_valid_items := v_valid_items || v_item_detail;\r\n        \r\n    END LOOP;\r\n\r\n    -- 4. VAT (20%)\r\n    v_total_vat := v_total_subtotal * 0.20;\r\n\r\n    -- 5. Shipping\r\n    IF v_total_subtotal \u003e= 1500 THEN\r\n        v_shipping_cost := 0;\r\n    ELSE\r\n        v_shipping_cost := 49.90;\r\n    END IF;\r\n\r\n    -- 6. Promo Code (Backend Logic using verify_promo_code)\r\n    v_discount := 0; \r\n    IF p_promo_code IS NOT NULL AND length(p_promo_code) \u003e 0 THEN\r\n        BEGIN\r\n            -- Attempt to call verify_promo_code\r\n            SELECT verify_promo_code(p_promo_code) INTO v_promo_result;\r\n            \r\n            IF (v_promo_result-\u003e\u003e'valid')::boolean = true THEN\r\n                -- Check min order amount logic if applicable\r\n                 IF (v_promo_result-\u003e\u003e'discount_type') = 'percentage' THEN\r\n                     v_discount := (v_total_subtotal + v_total_vat) * ((v_promo_result-\u003e\u003e'discount_value')::decimal / 100);\r\n                     -- Max discount check\r\n                     IF (v_promo_result-\u003e\u003e'max_discount_amount') IS NOT NULL AND v_discount \u003e (v_promo_result-\u003e\u003e'max_discount_amount')::decimal THEN\r\n                         v_discount := (v_promo_result-\u003e\u003e'max_discount_amount')::decimal;\r\n                     END IF;\r\n                 ELSE\r\n                     v_discount := (v_promo_result-\u003e\u003e'discount_value')::decimal;\r\n                 END IF;\r\n            END IF;\r\n        EXCEPTION WHEN OTHERS THEN\r\n            v_discount := 0;\r\n        END;\r\n    END IF;\r\n\r\n    -- 7. Final Total\r\n    v_final_total := v_total_subtotal + v_total_vat + v_shipping_cost - v_discount;\r\n    IF v_final_total \u003c 0 THEN v_final_total := 0; END IF;\r\n    v_item_total_cents := ROUND(v_total_subtotal * 100)::bigint;\r\n    v_vat_total_cents := ROUND(v_total_vat * 100)::bigint;\r\n    v_shipping_total_cents := ROUND(v_shipping_cost * 100)::bigint;\r\n    v_discount_total_cents := ROUND(v_discount * 100)::bigint;\r\n    v_paid_total_cents := ROUND(v_final_total * 100)::bigint;\r\n\r\n    -- Bank Reference\r\n    v_bank_ref := 'BRV-' || to_char(NOW(), 'YYMMDD') || '-' || upper(substring(md5(random()::text) from 1 for 4));\r\n\r\n    -- 8. Construct final order_details JSON\r\n    v_order_details := jsonb_build_object(\r\n        'items', v_valid_items,\r\n        'subtotal', v_total_subtotal,\r\n        'vat_rate', 0.20,\r\n        'vat_amount', v_total_vat,\r\n        'shipping_cost', v_shipping_cost,\r\n        'total', v_final_total,\r\n        'promo_code', p_promo_code,\r\n        'discount', v_discount,\r\n        'bank_reference', v_bank_ref\r\n    );\r\n\r\n    -- 9. Insert Order\r\n    INSERT INTO orders (\r\n        user_id,\r\n        shipping_address_id,\r\n        payment_method,\r\n        status,\r\n        payment_status,\r\n        order_details,\r\n        currency,\r\n        installment_number,\r\n        item_total_cents,\r\n        vat_total_cents,\r\n        shipping_total_cents,\r\n        discount_total_cents,\r\n        commission_amount_cents,\r\n        paid_total_cents\r\n    ) VALUES (\r\n        v_user_id,\r\n        p_shipping_address_id,\r\n        'bank_transfer',\r\n        'pending', \r\n        'pending',\r\n        v_order_details,\r\n        'TL',\r\n        1,\r\n        v_item_total_cents,\r\n        v_vat_total_cents,\r\n        v_shipping_total_cents,\r\n        v_discount_total_cents,\r\n        0,\r\n        v_paid_total_cents\r\n    ) RETURNING id INTO v_order_id;\r\n    \r\n    -- 10. Insert Status History\r\n    BEGIN\r\n        INSERT INTO order_status_history (order_id, status, note, created_at)\r\n        VALUES (\r\n            v_order_id,\r\n            'pending',\r\n            'Sipari alnd (Havale/EFT Bekleniyor)',\r\n            NOW()\r\n        );\r\n    EXCEPTION WHEN OTHERS THEN\r\n        NULL;\r\n    END;\r\n\r\n    -- 11. Return Success\r\n    RETURN jsonb_build_object(\r\n        'success', true, \r\n        'order_id', v_order_id,\r\n        'total', v_final_total,\r\n        'shipping_cost', v_shipping_cost,\r\n        'bank_reference', v_bank_ref,\r\n        'message', 'Sipari baaryla oluturuldu'\r\n    );\r\n\r\nEXCEPTION WHEN OTHERS THEN\r\n    RAISE LOG 'create_order failed for user %, payment_method %, error %',\r\n        COALESCE(v_user_id::text, 'anonymous'),\r\n        COALESCE(p_payment_method, 'unknown'),\r\n        SQLERRM;\r\n    RETURN jsonb_build_object(\r\n        'success', false, \r\n        'message', 'Sipari oluturulurken beklenmeyen bir hata olutu. Ltfen tekrar deneyiniz.'\r\n    );\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260213094500"},{"text":"bank_transfer_only_create_order"},{"binary":"0000000100000000000000190000000300000001000000522d2d206372656174655f6f72646572206973207265737472696374656420746f2062616e6b207472616e73666572206166746572207061796d656e742d696e74656e7420726f6c6c6f75740d0a424547494e00001f622d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20435245415445204f524445522046554e4354494f4e20284261636b656e64204c6f676963290d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a435245415445204f52205245504c4143452046554e4354494f4e206372656174655f6f72646572280d0a20202020705f6974656d73204a534f4e422c202d2d204172726179206f66206f626a656374733a205b7b2270726f647563745f6964223a202275756964222c20227175616e74697479223a20317d5d0d0a20202020705f7368697070696e675f616464726573735f696420555549442c0d0a20202020705f7061796d656e745f6d6574686f6420544558542c0d0a20202020705f70726f6d6f5f636f646520544558542044454641554c54204e554c4c0d0a290d0a52455455524e53204a534f4e420d0a4c414e475541474520706c706773716c0d0a534543555249545920444546494e45520d0a41532024240d0a4445434c4152450d0a20202020765f757365725f696420555549443b0d0a20202020765f6974656d204a534f4e423b0d0a20202020765f70726f647563745f696420555549443b0d0a20202020765f70726f647563745f6e616d6520544558543b0d0a20202020765f70726f647563745f707269636520444543494d414c2831302c32293b0d0a20202020765f70726f647563745f73746f636b20494e543b0d0a20202020765f71747920494e543b0d0a20202020765f6974656d5f737562746f74616c20444543494d414c2831302c32293b0d0a20202020765f746f74616c5f737562746f74616c20444543494d414c2831302c3229203a3d20303b0d0a20202020765f746f74616c5f76617420444543494d414c2831302c3229203a3d20303b0d0a20202020765f7368697070696e675f636f737420444543494d414c2831302c32293b0d0a20202020765f66696e616c5f746f74616c20444543494d414c2831302c32293b0d0a20202020765f646973636f756e7420444543494d414c2831302c3229203a3d20303b0d0a20202020765f6f726465725f696420555549443b0d0a20202020765f76616c69645f6974656d73204a534f4e42203a3d20275b5d273a3a4a534f4e423b0d0a20202020765f6974656d5f64657461696c204a534f4e423b0d0a20202020765f6f726465725f64657461696c73204a534f4e423b0d0a20202020765f62616e6b5f7265662054455854203a3d204e554c4c3b0d0a20202020765f616464726573735f6f776e657220555549443b0d0a20202020765f70726f6d6f5f726573756c74204a534f4e3b0d0a20202020765f6974656d5f746f74616c5f63656e747320424947494e54203a3d20303b0d0a20202020765f7661745f746f74616c5f63656e747320424947494e54203a3d20303b0d0a20202020765f7368697070696e675f746f74616c5f63656e747320424947494e54203a3d20303b0d0a20202020765f646973636f756e745f746f74616c5f63656e747320424947494e54203a3d20303b0d0a20202020765f706169645f746f74616c5f63656e747320424947494e54203a3d20303b0d0a424547494e0d0a202020202d2d204361726420666c6f77206d75737420757365207061796d656e745f696e74656e74202b2033442066696e616c697a6520706174680d0a20202020494620705f7061796d656e745f6d6574686f64203c3e202762616e6b5f7472616e7366657227205448454e0d0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280d0a2020202020202020202020202773756363657373272c2066616c73652c0d0a202020202020202020202020276d657373616765272c20274b617274206f64656d656c6572692079656e6920334420616b69736920696c6520616c696e6d616b74616469722e204c757466656e206b617274206f64656d6520656e64706f696e74696e69206b756c6c616e696e2e270d0a2020202020202020293b0d0a20202020454e442049463b0d0a0d0a202020202d2d20312e2047657420557365722049440d0a20202020765f757365725f6964203a3d20617574682e75696428293b0d0a20202020494620765f757365725f6964204953204e554c4c205448454e0d0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274f747572756d2061c3a76d616ec4b17a20676572656b69796f7227293b0d0a20202020454e442049463b0d0a0d0a202020202d2d20322e2041646472657373204f776e65727368697020436865636b202849444f5220536563757269747920466978290d0a2020202053454c45435420757365725f696420494e544f20765f616464726573735f6f776e65722046524f4d20616464726573736573205748455245206964203d20705f7368697070696e675f616464726573735f69643b0d0a20202020494620765f616464726573735f6f776e6572204953204e554c4c204f5220765f616464726573735f6f776e657220213d20765f757365725f6964205448454e0d0a20202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274765c3a7657273697a206164726573207365c3a7696d693a2041647265732073697a6520616974206465c49f696c2e27293b0d0a20202020454e442049463b0d0a0d0a202020202d2d20332e204974657261746520696e707574206974656d730d0a20202020464f5220765f6974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e747328705f6974656d73290d0a202020204c4f4f500d0a2020202020202020765f70726f647563745f6964203a3d2028765f6974656d2d3e3e2770726f647563745f696427293a3a555549443b0d0a2020202020202020765f717479203a3d2028765f6974656d2d3e3e277175616e7469747927293a3a494e543b0d0a0d0a20202020202020202d2d204e65676174697665205175616e7469747920436865636b20284c6f67696320536563757269747920466978290d0a2020202020202020494620765f717479203c3d2030205448454e0d0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274765c3a7657273697a20c3bc72c3bc6e206d696b746172c4b13a20302076657961206e656761746966206f6c616d617a2e27293b0d0a2020202020202020454e442049463b0d0a0d0a20202020202020202d2d204765742070726f647563742066726f6d2044422057495448204c4f434b20285261636520436f6e646974696f6e20466978290d0a202020202020202053454c4543542069642c206e616d652c2070726963652c2073746f636b200d0a2020202020202020494e544f20765f70726f647563745f69642c20765f70726f647563745f6e616d652c20765f70726f647563745f70726963652c20765f70726f647563745f73746f636b0d0a202020202020202046524f4d2070726f6475637473200d0a20202020202020205748455245206964203d20765f70726f647563745f69640d0a2020202020202020464f52205550444154453b202d2d20437269746963616c3a204c6f636b732074686520726f770d0a20202020202020200d0a20202020202020204946204e4f5420464f554e44205448454e0d0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c2027c39c72c3bc6e2062756c756e616d6164c4b13a2049442027207c7c20765f70726f647563745f6964293b0d0a2020202020202020454e442049463b0d0a0d0a20202020202020202d2d20436865636b2073746f636b2076616c69646974790d0a2020202020202020494620765f70726f647563745f73746f636b203c20765f717479205448454e0d0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c2027596574657273697a2073746f6b3a2027207c7c20765f70726f647563745f6e616d65293b0d0a2020202020202020454e442049463b0d0a0d0a20202020202020202d2d2043616c63756c617465206974656d20746f74616c73207573696e672044422070726963650d0a2020202020202020765f6974656d5f737562746f74616c203a3d20765f70726f647563745f7072696365202a20765f7174793b0d0a2020202020202020765f746f74616c5f737562746f74616c203a3d20765f746f74616c5f737562746f74616c202b20765f6974656d5f737562746f74616c3b0d0a20202020202020200d0a20202020202020202d2d204275696c64206974656d2064657461696c0d0a2020202020202020765f6974656d5f64657461696c203a3d206a736f6e625f6275696c645f6f626a656374280d0a2020202020202020202020202770726f647563745f6964272c20765f70726f647563745f69642c0d0a2020202020202020202020202770726f647563745f6e616d65272c20765f70726f647563745f6e616d652c0d0a202020202020202020202020277175616e74697479272c20765f7174792c0d0a20202020202020202020202027756e69745f7072696365272c20765f70726f647563745f70726963652c0d0a20202020202020202020202027737562746f74616c272c20765f6974656d5f737562746f74616c0d0a2020202020202020293b0d0a20202020202020200d0a2020202020202020765f76616c69645f6974656d73203a3d20765f76616c69645f6974656d73207c7c20765f6974656d5f64657461696c3b0d0a20202020202020200d0a20202020454e44204c4f4f503b0d0a0d0a202020202d2d20342e205641542028323025290d0a20202020765f746f74616c5f766174203a3d20765f746f74616c5f737562746f74616c202a20302e32303b0d0a0d0a202020202d2d20352e205368697070696e670d0a20202020494620765f746f74616c5f737562746f74616c203e3d2031353030205448454e0d0a2020202020202020765f7368697070696e675f636f7374203a3d20303b0d0a20202020454c53450d0a2020202020202020765f7368697070696e675f636f7374203a3d2034392e39303b0d0a20202020454e442049463b0d0a0d0a202020202d2d20362e2050726f6d6f20436f646520284261636b656e64204c6f676963207573696e67207665726966795f70726f6d6f5f636f6465290d0a20202020765f646973636f756e74203a3d20303b200d0a20202020494620705f70726f6d6f5f636f6465204953204e4f54204e554c4c20414e44206c656e67746828705f70726f6d6f5f636f646529203e2030205448454e0d0a2020202020202020424547494e0d0a2020202020202020202020202d2d20417474656d707420746f2063616c6c207665726966795f70726f6d6f5f636f64650d0a20202020202020202020202053454c454354207665726966795f70726f6d6f5f636f646528705f70726f6d6f5f636f64652920494e544f20765f70726f6d6f5f726573756c743b0d0a2020202020202020202020200d0a20202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e2776616c696427293a3a626f6f6c65616e203d2074727565205448454e0d0a202020202020202020202020202020202d2d20436865636b206d696e206f7264657220616d6f756e74206c6f676963206966206170706c696361626c650d0a202020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f747970652729203d202770657263656e7461676527205448454e0d0a202020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f746f74616c5f737562746f74616c202b20765f746f74616c5f76617429202a202828765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a646563696d616c202f20313030293b0d0a2020202020202020202020202020202020202020202d2d204d617820646973636f756e7420636865636b0d0a20202020202020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e742729204953204e4f54204e554c4c20414e4420765f646973636f756e74203e2028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e7427293a3a646563696d616c205448454e0d0a20202020202020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e7427293a3a646563696d616c3b0d0a202020202020202020202020202020202020202020454e442049463b0d0a2020202020202020202020202020202020454c53450d0a202020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a646563696d616c3b0d0a2020202020202020202020202020202020454e442049463b0d0a202020202020202020202020454e442049463b0d0a2020202020202020455843455054494f4e205748454e204f5448455253205448454e0d0a202020202020202020202020765f646973636f756e74203a3d20303b0d0a2020202020202020454e443b0d0a20202020454e442049463b0d0a0d0a202020202d2d20372e2046696e616c20546f74616c0d0a20202020765f66696e616c5f746f74616c203a3d20765f746f74616c5f737562746f74616c202b20765f746f74616c5f766174202b20765f7368697070696e675f636f7374202d20765f646973636f756e743b0d0a20202020494620765f66696e616c5f746f74616c203c2030205448454e20765f66696e616c5f746f74616c203a3d20303b20454e442049463b0d0a20202020765f6974656d5f746f74616c5f63656e7473203a3d20524f554e4428765f746f74616c5f737562746f74616c202a20313030293a3a626967696e743b0d0a20202020765f7661745f746f74616c5f63656e7473203a3d20524f554e4428765f746f74616c5f766174202a20313030293a3a626967696e743b0d0a20202020765f7368697070696e675f746f74616c5f63656e7473203a3d20524f554e4428765f7368697070696e675f636f7374202a20313030293a3a626967696e743b0d0a20202020765f646973636f756e745f746f74616c5f63656e7473203a3d20524f554e4428765f646973636f756e74202a20313030293a3a626967696e743b0d0a20202020765f706169645f746f74616c5f63656e7473203a3d20524f554e4428765f66696e616c5f746f74616c202a20313030293a3a626967696e743b0d0a0d0a202020202d2d2042616e6b205265666572656e63650d0a20202020765f62616e6b5f726566203a3d20274252562d27207c7c20746f5f63686172284e4f5728292c202759594d4d44442729207c7c20272d27207c7c20757070657228737562737472696e67286d64352872616e646f6d28293a3a74657874292066726f6d203120666f72203429293b0d0a0d0a202020202d2d20382e20436f6e7374727563742066696e616c206f726465725f64657461696c73204a534f4e0d0a20202020765f6f726465725f64657461696c73203a3d206a736f6e625f6275696c645f6f626a656374280d0a2020202020202020276974656d73272c20765f76616c69645f6974656d732c0d0a202020202020202027737562746f74616c272c20765f746f74616c5f737562746f74616c2c0d0a2020202020202020277661745f72617465272c20302e32302c0d0a2020202020202020277661745f616d6f756e74272c20765f746f74616c5f7661742c0d0a2020202020202020277368697070696e675f636f7374272c20765f7368697070696e675f636f73742c0d0a202020202020202027746f74616c272c20765f66696e616c5f746f74616c2c0d0a20202020202020202770726f6d6f5f636f6465272c20705f70726f6d6f5f636f64652c0d0a202020202020202027646973636f756e74272c20765f646973636f756e742c0d0a20202020202020202762616e6b5f7265666572656e6365272c20765f62616e6b5f7265660d0a20202020293b0d0a0d0a202020202d2d20392e20496e73657274204f726465720d0a20202020494e5345525420494e544f206f726465727320280d0a2020202020202020757365725f69642c0d0a20202020202020207368697070696e675f616464726573735f69642c0d0a20202020202020207061796d656e745f6d6574686f642c0d0a20202020202020207374617475732c0d0a20202020202020207061796d656e745f7374617475732c0d0a20202020202020206f726465725f64657461696c732c0d0a202020202020202063757272656e63792c0d0a2020202020202020696e7374616c6c6d656e745f6e756d6265722c0d0a20202020202020206974656d5f746f74616c5f63656e74732c0d0a20202020202020207661745f746f74616c5f63656e74732c0d0a20202020202020207368697070696e675f746f74616c5f63656e74732c0d0a2020202020202020646973636f756e745f746f74616c5f63656e74732c0d0a2020202020202020636f6d6d697373696f6e5f616d6f756e745f63656e74732c0d0a2020202020202020706169645f746f74616c5f63656e74730d0a20202020292056414c55455320280d0a2020202020202020765f757365725f69642c0d0a2020202020202020705f7368697070696e675f616464726573735f69642c0d0a20202020202020202762616e6b5f7472616e73666572272c0d0a20202020202020202770656e64696e67272c200d0a20202020202020202770656e64696e67272c0d0a2020202020202020765f6f726465725f64657461696c732c0d0a202020202020202027544c272c0d0a2020202020202020312c0d0a2020202020202020765f6974656d5f746f74616c5f63656e74732c0d0a2020202020202020765f7661745f746f74616c5f63656e74732c0d0a2020202020202020765f7368697070696e675f746f74616c5f63656e74732c0d0a2020202020202020765f646973636f756e745f746f74616c5f63656e74732c0d0a2020202020202020302c0d0a2020202020202020765f706169645f746f74616c5f63656e74730d0a20202020292052455455524e494e4720696420494e544f20765f6f726465725f69643b0d0a202020200d0a202020202d2d2031302e20496e736572742053746174757320486973746f72790d0a20202020424547494e0d0a2020202020202020494e5345525420494e544f206f726465725f7374617475735f686973746f727920286f726465725f69642c207374617475732c206e6f74652c20637265617465645f6174290d0a202020202020202056414c55455320280d0a202020202020202020202020765f6f726465725f69642c0d0a2020202020202020202020202770656e64696e67272c0d0a20202020202020202020202027536970617269c59f20616cc4b16e64c4b12028486176616c652f4546542042656b6c656e69796f7229272c0d0a2020202020202020202020204e4f5728290d0a2020202020202020293b0d0a20202020455843455054494f4e205748454e204f5448455253205448454e0d0a20202020202020204e554c4c3b0d0a20202020454e443b0d0a0d0a202020202d2d2031312e2052657475726e20537563636573730d0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280d0a20202020202020202773756363657373272c20747275652c200d0a2020202020202020276f726465725f6964272c20765f6f726465725f69642c0d0a202020202020202027746f74616c272c20765f66696e616c5f746f74616c2c0d0a2020202020202020277368697070696e675f636f7374272c20765f7368697070696e675f636f73742c0d0a20202020202020202762616e6b5f7265666572656e6365272c20765f62616e6b5f7265662c0d0a2020202020202020276d657373616765272c2027536970617269c59f206261c59f6172c4b1796c61206f6c75c59f747572756c6475270d0a20202020293b0d0a0d0a455843455054494f4e205748454e204f5448455253205448454e0d0a202020205241495345204c4f4720276372656174655f6f72646572206661696c656420666f72207573657220252c207061796d656e745f6d6574686f6420252c206572726f722025272c0d0a2020202020202020434f414c4553434528765f757365725f69643a3a746578742c2027616e6f6e796d6f757327292c0d0a2020202020202020434f414c4553434528705f7061796d656e745f6d6574686f642c2027756e6b6e6f776e27292c0d0a202020202020202053514c4552524d3b0d0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280d0a20202020202020202773756363657373272c2066616c73652c200d0a2020202020202020276d657373616765272c2027536970617269c59f206f6c75c59f747572756c75726b656e2062656b6c656e6d6579656e206269722068617461206f6c75c59f74752e204cc3bc7466656e2074656b7261722064656e6579696e697a2e270d0a20202020293b0d0a454e443b0d0a242400000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260213111000_admin_order_status_payment_intent_alignment.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Align admin cancellation flow with payment-intent source of truth.\n-- Credit-card orders must not be marked refunded by status transition alone.\n\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.admin_update_order_status(\n    p_order_id UUID,\n    p_new_status TEXT,\n    p_note TEXT DEFAULT NULL\n)\nRETURNS BOOLEAN AS $$\nDECLARE\n    v_old_status TEXT;\n    v_order_details JSONB;\n    v_payment_status TEXT;\n    v_payment_method TEXT;\n    v_payment_intent_id UUID;\n    v_item RECORD;\nBEGIN\n    -- 1. Admin check\n    IF NOT public.is_admin_user() THEN\n        RAISE EXCEPTION 'Unauthorized: Admin permission required';\n    END IF;\n\n    -- 2. Fetch current order data\n    SELECT status, order_details, payment_status, payment_method, payment_intent_id\n    INTO v_old_status, v_order_details, v_payment_status, v_payment_method, v_payment_intent_id\n    FROM public.orders\n    WHERE id = p_order_id;\n\n    IF NOT FOUND THEN\n        RAISE EXCEPTION 'Order not found';\n    END IF;\n\n    -- 3. Transition validation\n    IF v_old_status = 'cancelled' THEN\n        RAISE EXCEPTION 'Cancelled orders cannot be updated';\n    END IF;\n\n    IF p_new_status NOT IN ('pending', 'processing', 'preparing', 'shipped', 'delivered', 'cancelled') THEN\n        RAISE EXCEPTION 'Invalid status: %', p_new_status;\n    END IF;\n\n    -- 4. Cancellation Logic (Stock Restore)\n    IF p_new_status = 'cancelled' THEN\n        -- Financial status is intent-driven for card payments.\n        IF v_payment_status = 'paid' THEN\n            IF v_payment_method = 'credit_card' AND v_payment_intent_id IS NOT NULL THEN\n                NULL;\n            ELSE\n                UPDATE public.orders SET payment_status = 'refunded' WHERE id = p_order_id;\n            END IF;\n        END IF;\n\n        -- Restore stock for items\n        FOR v_item IN\n            SELECT *\n            FROM jsonb_to_recordset(v_order_details-\u003e'items') AS x(product_id UUID, quantity INTEGER)\n        LOOP\n            IF v_item.product_id IS NOT NULL THEN\n                BEGIN\n                    PERFORM public.restore_stock(v_item.product_id, v_item.quantity);\n                EXCEPTION WHEN OTHERS THEN\n                    UPDATE public.products\n                    SET stock = stock + v_item.quantity,\n                        updated_at = NOW()\n                    WHERE id = v_item.product_id;\n                END;\n            END IF;\n        END LOOP;\n\n        -- Update reason\n        UPDATE public.orders SET cancellation_reason = p_note WHERE id = p_order_id;\n    END IF;\n\n    -- 5. Delivery Logic\n    IF p_new_status = 'delivered' AND v_old_status != 'delivered' THEN\n        FOR v_item IN\n            SELECT *\n            FROM jsonb_to_recordset(v_order_details-\u003e'items') AS x(product_id UUID, quantity INTEGER)\n        LOOP\n            IF v_item.product_id IS NOT NULL THEN\n                BEGIN\n                    PERFORM public.finalize_reservation(v_item.product_id, v_item.quantity);\n                EXCEPTION WHEN OTHERS THEN\n                    NULL;\n                END;\n            END IF;\n        END LOOP;\n    END IF;\n\n    -- 6. Update Order\n    UPDATE public.orders\n    SET status = p_new_status, updated_at = NOW()\n    WHERE id = p_order_id;\n\n    -- 7. Insert into Order Status History\n    IF EXISTS (SELECT FROM information_schema.tables WHERE table_name = 'order_status_history') THEN\n        INSERT INTO public.order_status_history (order_id, status, note, created_by)\n        VALUES (p_order_id, p_new_status, p_note, auth.uid());\n    END IF;\n\n    -- 8. Insert into Admin Audit Log\n    INSERT INTO public.admin_audit_log (admin_user_id, action, target_table, target_id, details)\n    VALUES (\n        auth.uid(),\n        'update_order_status',\n        'orders',\n        p_order_id,\n        jsonb_build_object(\n            'old_status', v_old_status,\n            'new_status', p_new_status,\n            'note', p_note\n        )\n    );\n\n    RETURN FOUND;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_catalog","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260213111000"},{"text":"admin_order_status_payment_intent_alignment"},{"binary":"00000001000000000000001900000003000000010000009a2d2d20416c69676e2061646d696e2063616e63656c6c6174696f6e20666c6f772077697468207061796d656e742d696e74656e7420736f75726365206f662074727574682e0a2d2d204372656469742d63617264206f7264657273206d757374206e6f74206265206d61726b656420726566756e64656420627920737461747573207472616e736974696f6e20616c6f6e652e0a0a424547494e00000ef6435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e61646d696e5f7570646174655f6f726465725f737461747573280a20202020705f6f726465725f696420555549442c0a20202020705f6e65775f73746174757320544558542c0a20202020705f6e6f746520544558542044454641554c54204e554c4c0a290a52455455524e5320424f4f4c45414e2041532024240a4445434c4152450a20202020765f6f6c645f73746174757320544558543b0a20202020765f6f726465725f64657461696c73204a534f4e423b0a20202020765f7061796d656e745f73746174757320544558543b0a20202020765f7061796d656e745f6d6574686f6420544558543b0a20202020765f7061796d656e745f696e74656e745f696420555549443b0a20202020765f6974656d205245434f52443b0a424547494e0a202020202d2d20312e2041646d696e20636865636b0a202020204946204e4f54207075626c69632e69735f61646d696e5f757365722829205448454e0a2020202020202020524149534520455843455054494f4e2027556e617574686f72697a65643a2041646d696e207065726d697373696f6e207265717569726564273b0a20202020454e442049463b0a0a202020202d2d20322e2046657463682063757272656e74206f7264657220646174610a2020202053454c454354207374617475732c206f726465725f64657461696c732c207061796d656e745f7374617475732c207061796d656e745f6d6574686f642c207061796d656e745f696e74656e745f69640a20202020494e544f20765f6f6c645f7374617475732c20765f6f726465725f64657461696c732c20765f7061796d656e745f7374617475732c20765f7061796d656e745f6d6574686f642c20765f7061796d656e745f696e74656e745f69640a2020202046524f4d207075626c69632e6f72646572730a202020205748455245206964203d20705f6f726465725f69643b0a0a202020204946204e4f5420464f554e44205448454e0a2020202020202020524149534520455843455054494f4e20274f72646572206e6f7420666f756e64273b0a20202020454e442049463b0a0a202020202d2d20332e205472616e736974696f6e2076616c69646174696f6e0a20202020494620765f6f6c645f737461747573203d202763616e63656c6c656427205448454e0a2020202020202020524149534520455843455054494f4e202743616e63656c6c6564206f72646572732063616e6e6f742062652075706461746564273b0a20202020454e442049463b0a0a20202020494620705f6e65775f737461747573204e4f5420494e20282770656e64696e67272c202770726f63657373696e67272c2027707265706172696e67272c202773686970706564272c202764656c697665726564272c202763616e63656c6c65642729205448454e0a2020202020202020524149534520455843455054494f4e2027496e76616c6964207374617475733a2025272c20705f6e65775f7374617475733b0a20202020454e442049463b0a0a202020202d2d20342e2043616e63656c6c6174696f6e204c6f676963202853746f636b20526573746f7265290a20202020494620705f6e65775f737461747573203d202763616e63656c6c656427205448454e0a20202020202020202d2d2046696e616e6369616c2073746174757320697320696e74656e742d64726976656e20666f722063617264207061796d656e74732e0a2020202020202020494620765f7061796d656e745f737461747573203d20277061696427205448454e0a202020202020202020202020494620765f7061796d656e745f6d6574686f64203d20276372656469745f636172642720414e4420765f7061796d656e745f696e74656e745f6964204953204e4f54204e554c4c205448454e0a202020202020202020202020202020204e554c4c3b0a202020202020202020202020454c53450a20202020202020202020202020202020555044415445207075626c69632e6f726465727320534554207061796d656e745f737461747573203d2027726566756e64656427205748455245206964203d20705f6f726465725f69643b0a202020202020202020202020454e442049463b0a2020202020202020454e442049463b0a0a20202020202020202d2d20526573746f72652073746f636b20666f72206974656d730a2020202020202020464f5220765f6974656d20494e0a20202020202020202020202053454c454354202a0a20202020202020202020202046524f4d206a736f6e625f746f5f7265636f726473657428765f6f726465725f64657461696c732d3e276974656d73272920415320782870726f647563745f696420555549442c207175616e7469747920494e5445474552290a20202020202020204c4f4f500a202020202020202020202020494620765f6974656d2e70726f647563745f6964204953204e4f54204e554c4c205448454e0a20202020202020202020202020202020424547494e0a2020202020202020202020202020202020202020504552464f524d207075626c69632e726573746f72655f73746f636b28765f6974656d2e70726f647563745f69642c20765f6974656d2e7175616e74697479293b0a20202020202020202020202020202020455843455054494f4e205748454e204f5448455253205448454e0a2020202020202020202020202020202020202020555044415445207075626c69632e70726f64756374730a20202020202020202020202020202020202020205345542073746f636b203d2073746f636b202b20765f6974656d2e7175616e746974792c0a202020202020202020202020202020202020202020202020757064617465645f6174203d204e4f5728290a20202020202020202020202020202020202020205748455245206964203d20765f6974656d2e70726f647563745f69643b0a20202020202020202020202020202020454e443b0a202020202020202020202020454e442049463b0a2020202020202020454e44204c4f4f503b0a0a20202020202020202d2d2055706461746520726561736f6e0a2020202020202020555044415445207075626c69632e6f7264657273205345542063616e63656c6c6174696f6e5f726561736f6e203d20705f6e6f7465205748455245206964203d20705f6f726465725f69643b0a20202020454e442049463b0a0a202020202d2d20352e2044656c6976657279204c6f6769630a20202020494620705f6e65775f737461747573203d202764656c6976657265642720414e4420765f6f6c645f73746174757320213d202764656c69766572656427205448454e0a2020202020202020464f5220765f6974656d20494e0a20202020202020202020202053454c454354202a0a20202020202020202020202046524f4d206a736f6e625f746f5f7265636f726473657428765f6f726465725f64657461696c732d3e276974656d73272920415320782870726f647563745f696420555549442c207175616e7469747920494e5445474552290a20202020202020204c4f4f500a202020202020202020202020494620765f6974656d2e70726f647563745f6964204953204e4f54204e554c4c205448454e0a20202020202020202020202020202020424547494e0a2020202020202020202020202020202020202020504552464f524d207075626c69632e66696e616c697a655f7265736572766174696f6e28765f6974656d2e70726f647563745f69642c20765f6974656d2e7175616e74697479293b0a20202020202020202020202020202020455843455054494f4e205748454e204f5448455253205448454e0a20202020202020202020202020202020202020204e554c4c3b0a20202020202020202020202020202020454e443b0a202020202020202020202020454e442049463b0a2020202020202020454e44204c4f4f503b0a20202020454e442049463b0a0a202020202d2d20362e20557064617465204f726465720a20202020555044415445207075626c69632e6f72646572730a2020202053455420737461747573203d20705f6e65775f7374617475732c20757064617465645f6174203d204e4f5728290a202020205748455245206964203d20705f6f726465725f69643b0a0a202020202d2d20372e20496e7365727420696e746f204f726465722053746174757320486973746f72790a20202020494620455849535453202853454c4543542046524f4d20696e666f726d6174696f6e5f736368656d612e7461626c6573205748455245207461626c655f6e616d65203d20276f726465725f7374617475735f686973746f72792729205448454e0a2020202020202020494e5345525420494e544f207075626c69632e6f726465725f7374617475735f686973746f727920286f726465725f69642c207374617475732c206e6f74652c20637265617465645f6279290a202020202020202056414c5545532028705f6f726465725f69642c20705f6e65775f7374617475732c20705f6e6f74652c20617574682e7569642829293b0a20202020454e442049463b0a0a202020202d2d20382e20496e7365727420696e746f2041646d696e204175646974204c6f670a20202020494e5345525420494e544f207075626c69632e61646d696e5f61756469745f6c6f67202861646d696e5f757365725f69642c20616374696f6e2c207461726765745f7461626c652c207461726765745f69642c2064657461696c73290a2020202056414c55455320280a2020202020202020617574682e75696428292c0a2020202020202020277570646174655f6f726465725f737461747573272c0a2020202020202020276f7264657273272c0a2020202020202020705f6f726465725f69642c0a20202020202020206a736f6e625f6275696c645f6f626a656374280a202020202020202020202020276f6c645f737461747573272c20765f6f6c645f7374617475732c0a202020202020202020202020276e65775f737461747573272c20705f6e65775f7374617475732c0a202020202020202020202020276e6f7465272c20705f6e6f74650a2020202020202020290a20202020293b0a0a2020202052455455524e20464f554e443b0a454e443b0a2424204c414e475541474520706c706773716c20534543555249545920444546494e455220534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f6700000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260213114500_fix_service_role_detection_payment_rpcs.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- RPCs for payment intent lifecycle\n-- Service-role detection hardened for Edge Function calls where request.jwt.claim.role can be empty\n\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.calculate_order_quote_v1(\n    p_user_id UUID,\n    p_items JSONB,\n    p_shipping_address_id UUID,\n    p_payment_method TEXT DEFAULT 'credit_card',\n    p_installment_number INTEGER DEFAULT 1,\n    p_promo_code TEXT DEFAULT NULL\n)\nRETURNS JSONB\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path = public, pg_catalog\nAS $$\nDECLARE\n    v_role TEXT;\n    v_user_id UUID;\n    v_address_owner UUID;\n    v_item JSONB;\n    v_product_id UUID;\n    v_product_name TEXT;\n    v_product_price NUMERIC(12,2);\n    v_product_stock INTEGER;\n    v_reserved_stock INTEGER;\n    v_available_stock INTEGER;\n    v_qty INTEGER;\n    v_item_unit_cents BIGINT;\n    v_item_line_cents BIGINT;\n    v_item_total_cents BIGINT := 0;\n    v_vat_rate NUMERIC(10,4) := 0.20;\n    v_shipping_cost NUMERIC(10,2) := 49.90;\n    v_shipping_threshold NUMERIC(12,2) := 1500.00;\n    v_vat_total_cents BIGINT := 0;\n    v_shipping_total_cents BIGINT := 0;\n    v_discount_total_cents BIGINT := 0;\n    v_pre_shipping_total_cents BIGINT := 0;\n    v_base_total_cents BIGINT := 0;\n    v_commission_rate NUMERIC(5,2) := 0;\n    v_commission_amount_cents BIGINT := 0;\n    v_paid_total_cents BIGINT := 0;\n    v_rate_updated_at TIMESTAMPTZ;\n    v_promo_result JSON;\n    v_cart_snapshot JSONB := '[]'::jsonb;\nBEGIN\n    v_role := COALESCE(NULLIF(current_setting('request.jwt.claim.role', TRUE), ''), auth.role(), 'service_role');\n    IF v_role = 'service_role' THEN\n        v_user_id := p_user_id;\n    ELSE\n        v_user_id := auth.uid();\n    END IF;\n\n    IF v_user_id IS NULL THEN\n        RETURN jsonb_build_object('success', FALSE, 'message', 'Oturum gerekli');\n    END IF;\n\n    IF p_items IS NULL OR jsonb_typeof(p_items) \u003c\u003e 'array' OR jsonb_array_length(p_items) = 0 THEN\n        RETURN jsonb_build_object('success', FALSE, 'message', 'Sepet bos olamaz');\n    END IF;\n\n    SELECT user_id\n    INTO v_address_owner\n    FROM public.addresses\n    WHERE id = p_shipping_address_id;\n\n    IF v_address_owner IS NULL OR v_address_owner \u003c\u003e v_user_id THEN\n        RETURN jsonb_build_object('success', FALSE, 'message', 'Gecersiz adres secimi');\n    END IF;\n\n    IF p_payment_method NOT IN ('credit_card', 'bank_transfer') THEN\n        RETURN jsonb_build_object('success', FALSE, 'message', 'Gecersiz odeme yontemi');\n    END IF;\n\n    IF p_payment_method = 'credit_card' AND (p_installment_number \u003c 1 OR p_installment_number \u003e 12) THEN\n        RETURN jsonb_build_object('success', FALSE, 'message', 'Gecersiz taksit sayisi');\n    END IF;\n\n    SELECT\n        COALESCE(vat_rate, 0.20),\n        COALESCE(shipping_cost, 49.90),\n        COALESCE(free_shipping_threshold, 1500.00)\n    INTO v_vat_rate, v_shipping_cost, v_shipping_threshold\n    FROM public.site_settings\n    WHERE id = 1;\n\n    FOR v_item IN SELECT * FROM jsonb_array_elements(p_items)\n    LOOP\n        v_product_id := (v_item-\u003e\u003e'product_id')::uuid;\n        v_qty := COALESCE((v_item-\u003e\u003e'quantity')::integer, 0);\n\n        IF v_product_id IS NULL OR v_qty \u003c= 0 THEN\n            RETURN jsonb_build_object('success', FALSE, 'message', 'Sepet ogesi gecersiz');\n        END IF;\n\n        SELECT\n            p.name,\n            p.price,\n            p.stock,\n            COALESCE(p.reserved_stock, 0)\n        INTO\n            v_product_name,\n            v_product_price,\n            v_product_stock,\n            v_reserved_stock\n        FROM public.products p\n        WHERE p.id = v_product_id;\n\n        IF NOT FOUND THEN\n            RETURN jsonb_build_object('success', FALSE, 'message', 'Urun bulunamadi');\n        END IF;\n\n        v_available_stock := v_product_stock - v_reserved_stock;\n        IF v_available_stock \u003c v_qty THEN\n            RETURN jsonb_build_object(\n                'success', FALSE,\n                'message', 'Yetersiz stok',\n                'product_id', v_product_id\n            );\n        END IF;\n\n        v_item_unit_cents := ROUND(v_product_price * 100)::bigint;\n        v_item_line_cents := v_item_unit_cents * v_qty;\n        v_item_total_cents := v_item_total_cents + v_item_line_cents;\n\n        v_cart_snapshot := v_cart_snapshot || jsonb_build_array(\n            jsonb_build_object(\n                'product_id', v_product_id,\n                'product_name', v_product_name,\n                'quantity', v_qty,\n                'unit_price_cents', v_item_unit_cents,\n                'unit_price', ROUND(v_item_unit_cents::numeric / 100, 2),\n                'subtotal_cents', v_item_line_cents,\n                'subtotal', ROUND(v_item_line_cents::numeric / 100, 2),\n                'line_total_cents', v_item_line_cents,\n                'line_total', ROUND(v_item_line_cents::numeric / 100, 2)\n            )\n        );\n    END LOOP;\n\n    v_vat_total_cents := ROUND(v_item_total_cents * v_vat_rate)::bigint;\n\n    IF p_promo_code IS NOT NULL AND LENGTH(TRIM(p_promo_code)) \u003e 0 THEN\n        BEGIN\n            SELECT verify_promo_code(p_promo_code) INTO v_promo_result;\n            IF COALESCE((v_promo_result-\u003e\u003e'valid')::boolean, FALSE) THEN\n                IF (v_promo_result-\u003e\u003e'discount_type') = 'percentage' THEN\n                    v_discount_total_cents := ROUND(\n                        (v_item_total_cents + v_vat_total_cents) *\n                        (COALESCE((v_promo_result-\u003e\u003e'discount_value')::numeric, 0) / 100.0)\n                    )::bigint;\n                ELSE\n                    v_discount_total_cents := ROUND(\n                        COALESCE((v_promo_result-\u003e\u003e'discount_value')::numeric, 0) * 100\n                    )::bigint;\n                END IF;\n\n                IF (v_promo_result-\u003e\u003e'max_discount_amount') IS NOT NULL THEN\n                    v_discount_total_cents := LEAST(\n                        v_discount_total_cents,\n                        ROUND((v_promo_result-\u003e\u003e'max_discount_amount')::numeric * 100)::bigint\n                    );\n                END IF;\n            END IF;\n        EXCEPTION WHEN OTHERS THEN\n            v_discount_total_cents := 0;\n        END;\n    END IF;\n\n    v_pre_shipping_total_cents := GREATEST(v_item_total_cents + v_vat_total_cents - v_discount_total_cents, 0);\n    IF v_pre_shipping_total_cents \u003e= ROUND(v_shipping_threshold * 100)::bigint THEN\n        v_shipping_total_cents := 0;\n    ELSE\n        v_shipping_total_cents := ROUND(v_shipping_cost * 100)::bigint;\n    END IF;\n\n    v_base_total_cents := v_pre_shipping_total_cents + v_shipping_total_cents;\n\n    IF p_payment_method = 'credit_card' THEN\n        SELECT commission_rate, updated_at\n        INTO v_commission_rate, v_rate_updated_at\n        FROM public.installment_rates\n        WHERE installment_number = p_installment_number\n          AND is_active = TRUE\n        LIMIT 1;\n\n        IF NOT FOUND THEN\n            RETURN jsonb_build_object('success', FALSE, 'message', 'Secilen taksit aktif degil');\n        END IF;\n\n        v_commission_amount_cents := ROUND(v_base_total_cents * (v_commission_rate / 100.0))::bigint;\n    ELSE\n        v_commission_rate := 0;\n        v_rate_updated_at := NOW();\n        v_commission_amount_cents := 0;\n    END IF;\n\n    v_paid_total_cents := v_base_total_cents + v_commission_amount_cents;\n\n    RETURN jsonb_build_object(\n        'success', TRUE,\n        'message', 'Quote olusturuldu',\n        'payment_method', p_payment_method,\n        'shipping_address_id', p_shipping_address_id,\n        'installment_number', CASE WHEN p_payment_method = 'credit_card' THEN p_installment_number ELSE 1 END,\n        'item_total_cents', v_item_total_cents,\n        'vat_total_cents', v_vat_total_cents,\n        'shipping_total_cents', v_shipping_total_cents,\n        'discount_total_cents', v_discount_total_cents,\n        'base_total_cents', v_base_total_cents,\n        'commission_rate', v_commission_rate,\n        'commission_amount_cents', v_commission_amount_cents,\n        'paid_total_cents', v_paid_total_cents,\n        'currency', 'TL',\n        'rate_version', 'v1',\n        'effective_from', v_rate_updated_at,\n        'cart_snapshot', v_cart_snapshot\n    );\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.reserve_stock_for_intent_v1(\n    p_intent_id UUID,\n    p_ttl_minutes INTEGER DEFAULT 15\n)\nRETURNS JSONB\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path = public, pg_catalog\nAS $$\nDECLARE\n    v_role TEXT;\n    v_intent RECORD;\n    v_item JSONB;\n    v_product_id UUID;\n    v_qty INTEGER;\n    v_stock INTEGER;\n    v_reserved INTEGER;\n    v_available INTEGER;\n    v_reserve_until TIMESTAMPTZ;\n    v_existing RECORD;\n    v_reserved_count INTEGER := 0;\nBEGIN\n    v_role := COALESCE(NULLIF(current_setting('request.jwt.claim.role', TRUE), ''), auth.role(), 'service_role');\n    IF v_role \u003c\u003e 'service_role' THEN\n        RAISE EXCEPTION 'forbidden';\n    END IF;\n\n    SELECT *\n    INTO v_intent\n    FROM public.payment_intents\n    WHERE id = p_intent_id\n    FOR UPDATE;\n\n    IF NOT FOUND THEN\n        RAISE EXCEPTION 'intent_not_found';\n    END IF;\n\n    IF v_intent.status NOT IN ('pending', 'awaiting_3d') THEN\n        RAISE EXCEPTION 'intent_status_invalid';\n    END IF;\n\n    v_reserve_until := NOW() + make_interval(mins =\u003e GREATEST(p_ttl_minutes, 1));\n\n    -- release previously active reservations for same intent, then recreate deterministically\n    FOR v_existing IN\n        SELECT product_id, qty\n        FROM public.stock_reservations\n        WHERE intent_id = p_intent_id\n          AND released_at IS NULL\n    LOOP\n        UPDATE public.products\n        SET reserved_stock = GREATEST(COALESCE(reserved_stock, 0) - v_existing.qty, 0)\n        WHERE id = v_existing.product_id;\n    END LOOP;\n\n    UPDATE public.stock_reservations\n    SET released_at = NOW()\n    WHERE intent_id = p_intent_id\n      AND released_at IS NULL;\n\n    FOR v_item IN SELECT * FROM jsonb_array_elements(v_intent.cart_snapshot)\n    LOOP\n        v_product_id := (v_item-\u003e\u003e'product_id')::uuid;\n        v_qty := COALESCE((v_item-\u003e\u003e'quantity')::integer, 0);\n\n        IF v_product_id IS NULL OR v_qty \u003c= 0 THEN\n            RAISE EXCEPTION 'intent_cart_invalid';\n        END IF;\n\n        SELECT stock, COALESCE(reserved_stock, 0)\n        INTO v_stock, v_reserved\n        FROM public.products\n        WHERE id = v_product_id\n        FOR UPDATE;\n\n        IF NOT FOUND THEN\n            RAISE EXCEPTION 'product_not_found';\n        END IF;\n\n        v_available := v_stock - v_reserved;\n        IF v_available \u003c v_qty THEN\n            RAISE EXCEPTION 'insufficient_stock';\n        END IF;\n\n        INSERT INTO public.stock_reservations (intent_id, product_id, qty, expires_at)\n        VALUES (p_intent_id, v_product_id, v_qty, v_reserve_until);\n\n        UPDATE public.products\n        SET reserved_stock = COALESCE(reserved_stock, 0) + v_qty\n        WHERE id = v_product_id;\n\n        v_reserved_count := v_reserved_count + 1;\n    END LOOP;\n\n    UPDATE public.payment_intents\n    SET status = 'awaiting_3d',\n        expires_at = v_reserve_until,\n        updated_at = NOW()\n    WHERE id = p_intent_id;\n\n    RETURN jsonb_build_object(\n        'success', TRUE,\n        'intent_id', p_intent_id,\n        'reserved_count', v_reserved_count,\n        'expires_at', v_reserve_until\n    );\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.release_intent_reservations_v1(\n    p_intent_id UUID,\n    p_new_status TEXT DEFAULT 'failed'\n)\nRETURNS JSONB\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path = public, pg_catalog\nAS $$\nDECLARE\n    v_role TEXT;\n    v_reservation RECORD;\n    v_released_count INTEGER := 0;\nBEGIN\n    v_role := COALESCE(NULLIF(current_setting('request.jwt.claim.role', TRUE), ''), auth.role(), 'service_role');\n    IF v_role \u003c\u003e 'service_role' THEN\n        RAISE EXCEPTION 'forbidden';\n    END IF;\n\n    FOR v_reservation IN\n        SELECT id, product_id, qty\n        FROM public.stock_reservations\n        WHERE intent_id = p_intent_id\n          AND released_at IS NULL\n        FOR UPDATE\n    LOOP\n        UPDATE public.products\n        SET reserved_stock = GREATEST(COALESCE(reserved_stock, 0) - v_reservation.qty, 0)\n        WHERE id = v_reservation.product_id;\n\n        UPDATE public.stock_reservations\n        SET released_at = NOW()\n        WHERE id = v_reservation.id;\n\n        v_released_count := v_released_count + 1;\n    END LOOP;\n\n    IF p_new_status IN ('failed', 'expired') THEN\n        UPDATE public.payment_intents\n        SET status = p_new_status,\n            updated_at = NOW()\n        WHERE id = p_intent_id\n          AND status NOT IN ('paid', 'voided', 'refunded');\n    END IF;\n\n    RETURN jsonb_build_object(\n        'success', TRUE,\n        'intent_id', p_intent_id,\n        'released_count', v_released_count\n    );\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.finalize_intent_create_order_v1(\n    p_intent_id UUID,\n    p_gateway_result JSONB DEFAULT '{}'::jsonb\n)\nRETURNS JSONB\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path = public, pg_catalog\nAS $$\nDECLARE\n    v_role TEXT;\n    v_intent RECORD;\n    v_existing_order_id UUID;\n    v_reservation RECORD;\n    v_product RECORD;\n    v_order_id UUID;\n    v_gateway_status TEXT;\n    v_gateway_trx_code TEXT;\n    v_order_details JSONB;\n    v_history_note TEXT;\n    v_active_reservation_count INTEGER := 0;\nBEGIN\n    v_role := COALESCE(NULLIF(current_setting('request.jwt.claim.role', TRUE), ''), auth.role(), 'service_role');\n    IF v_role \u003c\u003e 'service_role' THEN\n        RAISE EXCEPTION 'forbidden';\n    END IF;\n\n    SELECT *\n    INTO v_intent\n    FROM public.payment_intents\n    WHERE id = p_intent_id\n    FOR UPDATE;\n\n    IF NOT FOUND THEN\n        RAISE EXCEPTION 'intent_not_found';\n    END IF;\n\n    IF v_intent.status = 'paid' THEN\n        SELECT id\n        INTO v_existing_order_id\n        FROM public.orders\n        WHERE payment_intent_id = p_intent_id\n        LIMIT 1;\n\n        RETURN jsonb_build_object(\n            'success', TRUE,\n            'order_id', v_existing_order_id,\n            'already_paid', TRUE\n        );\n    END IF;\n\n    IF v_intent.status NOT IN ('pending', 'awaiting_3d') THEN\n        RAISE EXCEPTION 'intent_status_invalid';\n    END IF;\n\n    IF v_intent.currency \u003c\u003e 'TL' THEN\n        RAISE EXCEPTION 'currency_mismatch';\n    END IF;\n\n    SELECT COUNT(*)\n    INTO v_active_reservation_count\n    FROM public.stock_reservations\n    WHERE intent_id = p_intent_id\n      AND released_at IS NULL;\n\n    IF v_active_reservation_count = 0 THEN\n        RAISE EXCEPTION 'no_active_reservations';\n    END IF;\n\n    FOR v_reservation IN\n        SELECT id, product_id, qty\n        FROM public.stock_reservations\n        WHERE intent_id = p_intent_id\n          AND released_at IS NULL\n        FOR UPDATE\n    LOOP\n        SELECT id, stock, COALESCE(reserved_stock, 0) AS reserved_stock\n        INTO v_product\n        FROM public.products\n        WHERE id = v_reservation.product_id\n        FOR UPDATE;\n\n        IF NOT FOUND THEN\n            RAISE EXCEPTION 'product_not_found';\n        END IF;\n\n        IF v_product.reserved_stock \u003c v_reservation.qty OR v_product.stock \u003c v_reservation.qty THEN\n            RAISE EXCEPTION 'reservation_state_invalid';\n        END IF;\n\n        UPDATE public.products\n        SET\n            stock = stock - v_reservation.qty,\n            reserved_stock = GREATEST(COALESCE(reserved_stock, 0) - v_reservation.qty, 0)\n        WHERE id = v_reservation.product_id;\n    END LOOP;\n\n    v_order_details := jsonb_build_object(\n        'items', v_intent.cart_snapshot,\n        'subtotal', ROUND(v_intent.item_total_cents::numeric / 100, 2),\n        'vat_amount', ROUND(v_intent.vat_total_cents::numeric / 100, 2),\n        'shipping_cost', ROUND(v_intent.shipping_total_cents::numeric / 100, 2),\n        'discount', ROUND(v_intent.discount_total_cents::numeric / 100, 2),\n        'commission_amount', ROUND(v_intent.commission_amount_cents::numeric / 100, 2),\n        'total', ROUND(v_intent.paid_total_cents::numeric / 100, 2),\n        'currency', 'TL',\n        'installment_number', v_intent.installment_number\n    );\n\n    INSERT INTO public.orders (\n        user_id,\n        shipping_address_id,\n        payment_method,\n        payment_status,\n        status,\n        order_details,\n        payment_intent_id,\n        currency,\n        installment_number,\n        item_total_cents,\n        vat_total_cents,\n        shipping_total_cents,\n        discount_total_cents,\n        commission_amount_cents,\n        paid_total_cents\n    )\n    VALUES (\n        v_intent.user_id,\n        v_intent.shipping_address_id,\n        'credit_card',\n        'paid',\n        'processing',\n        v_order_details,\n        v_intent.id,\n        'TL',\n        v_intent.installment_number,\n        v_intent.item_total_cents,\n        v_intent.vat_total_cents,\n        v_intent.shipping_total_cents,\n        v_intent.discount_total_cents,\n        v_intent.commission_amount_cents,\n        v_intent.paid_total_cents\n    )\n    RETURNING id INTO v_order_id;\n\n    v_history_note := 'Kart odemesi onaylandi ve siparis olusturuldu';\n    INSERT INTO public.order_status_history (order_id, status, note, created_at)\n    VALUES (v_order_id, 'processing', v_history_note, NOW());\n\n    UPDATE public.stock_reservations\n    SET released_at = NOW()\n    WHERE intent_id = p_intent_id\n      AND released_at IS NULL;\n\n    v_gateway_status := COALESCE(\n        p_gateway_result-\u003e\u003e'gateway_status',\n        p_gateway_result-\u003e\u003e'resultCode',\n        p_gateway_result-\u003e\u003e'result_code',\n        'success'\n    );\n    v_gateway_trx_code := COALESCE(\n        p_gateway_result-\u003e\u003e'gateway_trx_code',\n        p_gateway_result-\u003e\u003e'trxCode',\n        p_gateway_result-\u003e\u003e'trx_code',\n        v_intent.gateway_trx_code\n    );\n\n    UPDATE public.payment_intents\n    SET\n        status = 'paid',\n        gateway_status = v_gateway_status,\n        gateway_trx_code = v_gateway_trx_code,\n        updated_at = NOW()\n    WHERE id = p_intent_id;\n\n    RETURN jsonb_build_object(\n        'success', TRUE,\n        'order_id', v_order_id,\n        'already_paid', FALSE\n    );\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.release_expired_reservations_v1()\nRETURNS JSONB\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path = public, pg_catalog\nAS $$\nDECLARE\n    v_role TEXT;\n    v_reservation RECORD;\n    v_released_count INTEGER := 0;\n    v_expired_intent_count INTEGER := 0;\nBEGIN\n    v_role := COALESCE(NULLIF(current_setting('request.jwt.claim.role', TRUE), ''), auth.role(), 'service_role');\n    IF v_role \u003c\u003e 'service_role' THEN\n        RAISE EXCEPTION 'forbidden';\n    END IF;\n\n    FOR v_reservation IN\n        SELECT id, intent_id, product_id, qty\n        FROM public.stock_reservations\n        WHERE released_at IS NULL\n          AND expires_at \u003c NOW()\n        FOR UPDATE\n    LOOP\n        UPDATE public.products\n        SET reserved_stock = GREATEST(COALESCE(reserved_stock, 0) - v_reservation.qty, 0)\n        WHERE id = v_reservation.product_id;\n\n        UPDATE public.stock_reservations\n        SET released_at = NOW()\n        WHERE id = v_reservation.id;\n\n        v_released_count := v_released_count + 1;\n    END LOOP;\n\n    UPDATE public.payment_intents\n    SET status = 'expired',\n        updated_at = NOW()\n    WHERE status IN ('pending', 'awaiting_3d')\n      AND expires_at \u003c NOW();\n\n    GET DIAGNOSTICS v_expired_intent_count = ROW_COUNT;\n\n    RETURN jsonb_build_object(\n        'success', TRUE,\n        'released_reservation_count', v_released_count,\n        'expired_intent_count', v_expired_intent_count\n    );\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.expire_abandoned_intents_v1()\nRETURNS JSONB\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path = public, pg_catalog\nAS $$\nDECLARE\n    v_role TEXT;\n    v_expired_count INTEGER := 0;\nBEGIN\n    v_role := COALESCE(NULLIF(current_setting('request.jwt.claim.role', TRUE), ''), auth.role(), 'service_role');\n    IF v_role \u003c\u003e 'service_role' THEN\n        RAISE EXCEPTION 'forbidden';\n    END IF;\n\n    UPDATE public.payment_intents pi\n    SET status = 'expired',\n        updated_at = NOW()\n    WHERE pi.status IN ('pending', 'awaiting_3d')\n      AND pi.expires_at \u003c NOW()\n      AND NOT EXISTS (\n            SELECT 1\n            FROM public.stock_reservations sr\n            WHERE sr.intent_id = pi.id\n              AND sr.released_at IS NULL\n      );\n\n    GET DIAGNOSTICS v_expired_count = ROW_COUNT;\n\n    RETURN jsonb_build_object(\n        'success', TRUE,\n        'expired_intent_count', v_expired_count\n    );\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"REVOKE EXECUTE ON FUNCTION public.calculate_order_quote_v1(UUID, JSONB, UUID, TEXT, INTEGER, TEXT) FROM PUBLIC, anon, authenticated","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"REVOKE EXECUTE ON FUNCTION public.reserve_stock_for_intent_v1(UUID, INTEGER) FROM PUBLIC, anon, authenticated","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"REVOKE EXECUTE ON FUNCTION public.release_intent_reservations_v1(UUID, TEXT) FROM PUBLIC, anon, authenticated","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"REVOKE EXECUTE ON FUNCTION public.finalize_intent_create_order_v1(UUID, JSONB) FROM PUBLIC, anon, authenticated","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"REVOKE EXECUTE ON FUNCTION public.release_expired_reservations_v1() FROM PUBLIC, anon, authenticated","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"REVOKE EXECUTE ON FUNCTION public.expire_abandoned_intents_v1() FROM PUBLIC, anon, authenticated","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"GRANT EXECUTE ON FUNCTION public.calculate_order_quote_v1(UUID, JSONB, UUID, TEXT, INTEGER, TEXT) TO service_role","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"GRANT EXECUTE ON FUNCTION public.reserve_stock_for_intent_v1(UUID, INTEGER) TO service_role","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"GRANT EXECUTE ON FUNCTION public.release_intent_reservations_v1(UUID, TEXT) TO service_role","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"GRANT EXECUTE ON FUNCTION public.finalize_intent_create_order_v1(UUID, JSONB) TO service_role","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"GRANT EXECUTE ON FUNCTION public.release_expired_reservations_v1() TO service_role","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"GRANT EXECUTE ON FUNCTION public.expire_abandoned_intents_v1() TO service_role","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260213114500"},{"text":"fix_service_role_detection_payment_rpcs"},{"binary":"0000000100000000000000190000001400000001000000902d2d205250437320666f72207061796d656e7420696e74656e74206c6966656379636c650a2d2d20536572766963652d726f6c6520646574656374696f6e2068617264656e656420666f7220456467652046756e6374696f6e2063616c6c7320776865726520726571756573742e6a77742e636c61696d2e726f6c652063616e20626520656d7074790a0a424547494e00001f1f435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e63616c63756c6174655f6f726465725f71756f74655f7631280a20202020705f757365725f696420555549442c0a20202020705f6974656d73204a534f4e422c0a20202020705f7368697070696e675f616464726573735f696420555549442c0a20202020705f7061796d656e745f6d6574686f6420544558542044454641554c5420276372656469745f63617264272c0a20202020705f696e7374616c6c6d656e745f6e756d62657220494e54454745522044454641554c5420312c0a20202020705f70726f6d6f5f636f646520544558542044454641554c54204e554c4c0a290a52455455524e53204a534f4e420a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670a41532024240a4445434c4152450a20202020765f726f6c6520544558543b0a20202020765f757365725f696420555549443b0a20202020765f616464726573735f6f776e657220555549443b0a20202020765f6974656d204a534f4e423b0a20202020765f70726f647563745f696420555549443b0a20202020765f70726f647563745f6e616d6520544558543b0a20202020765f70726f647563745f7072696365204e554d455249432831322c32293b0a20202020765f70726f647563745f73746f636b20494e54454745523b0a20202020765f72657365727665645f73746f636b20494e54454745523b0a20202020765f617661696c61626c655f73746f636b20494e54454745523b0a20202020765f71747920494e54454745523b0a20202020765f6974656d5f756e69745f63656e747320424947494e543b0a20202020765f6974656d5f6c696e655f63656e747320424947494e543b0a20202020765f6974656d5f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f7661745f72617465204e554d455249432831302c3429203a3d20302e32303b0a20202020765f7368697070696e675f636f7374204e554d455249432831302c3229203a3d2034392e39303b0a20202020765f7368697070696e675f7468726573686f6c64204e554d455249432831322c3229203a3d20313530302e30303b0a20202020765f7661745f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f7368697070696e675f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f646973636f756e745f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f7072655f7368697070696e675f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f626173655f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f636f6d6d697373696f6e5f72617465204e554d4552494328352c3229203a3d20303b0a20202020765f636f6d6d697373696f6e5f616d6f756e745f63656e747320424947494e54203a3d20303b0a20202020765f706169645f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f726174655f757064617465645f61742054494d455354414d50545a3b0a20202020765f70726f6d6f5f726573756c74204a534f4e3b0a20202020765f636172745f736e617073686f74204a534f4e42203a3d20275b5d273a3a6a736f6e623b0a424547494e0a20202020765f726f6c65203a3d20434f414c45534345284e554c4c49462863757272656e745f73657474696e672827726571756573742e6a77742e636c61696d2e726f6c65272c2054525545292c202727292c20617574682e726f6c6528292c2027736572766963655f726f6c6527293b0a20202020494620765f726f6c65203d2027736572766963655f726f6c6527205448454e0a2020202020202020765f757365725f6964203a3d20705f757365725f69643b0a20202020454c53450a2020202020202020765f757365725f6964203a3d20617574682e75696428293b0a20202020454e442049463b0a0a20202020494620765f757365725f6964204953204e554c4c205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2046414c53452c20276d657373616765272c20274f747572756d20676572656b6c6927293b0a20202020454e442049463b0a0a20202020494620705f6974656d73204953204e554c4c204f52206a736f6e625f747970656f6628705f6974656d7329203c3e2027617272617927204f52206a736f6e625f61727261795f6c656e67746828705f6974656d7329203d2030205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2046414c53452c20276d657373616765272c2027536570657420626f73206f6c616d617a27293b0a20202020454e442049463b0a0a2020202053454c45435420757365725f69640a20202020494e544f20765f616464726573735f6f776e65720a2020202046524f4d207075626c69632e6164647265737365730a202020205748455245206964203d20705f7368697070696e675f616464726573735f69643b0a0a20202020494620765f616464726573735f6f776e6572204953204e554c4c204f5220765f616464726573735f6f776e6572203c3e20765f757365725f6964205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2046414c53452c20276d657373616765272c2027476563657273697a20616472657320736563696d6927293b0a20202020454e442049463b0a0a20202020494620705f7061796d656e745f6d6574686f64204e4f5420494e2028276372656469745f63617264272c202762616e6b5f7472616e736665722729205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2046414c53452c20276d657373616765272c2027476563657273697a206f64656d6520796f6e74656d6927293b0a20202020454e442049463b0a0a20202020494620705f7061796d656e745f6d6574686f64203d20276372656469745f636172642720414e442028705f696e7374616c6c6d656e745f6e756d626572203c2031204f5220705f696e7374616c6c6d656e745f6e756d626572203e20313229205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2046414c53452c20276d657373616765272c2027476563657273697a2074616b7369742073617969736927293b0a20202020454e442049463b0a0a2020202053454c4543540a2020202020202020434f414c45534345287661745f726174652c20302e3230292c0a2020202020202020434f414c45534345287368697070696e675f636f73742c2034392e3930292c0a2020202020202020434f414c4553434528667265655f7368697070696e675f7468726573686f6c642c20313530302e3030290a20202020494e544f20765f7661745f726174652c20765f7368697070696e675f636f73742c20765f7368697070696e675f7468726573686f6c640a2020202046524f4d207075626c69632e736974655f73657474696e67730a202020205748455245206964203d20313b0a0a20202020464f5220765f6974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e747328705f6974656d73290a202020204c4f4f500a2020202020202020765f70726f647563745f6964203a3d2028765f6974656d2d3e3e2770726f647563745f696427293a3a757569643b0a2020202020202020765f717479203a3d20434f414c455343452828765f6974656d2d3e3e277175616e7469747927293a3a696e74656765722c2030293b0a0a2020202020202020494620765f70726f647563745f6964204953204e554c4c204f5220765f717479203c3d2030205448454e0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2046414c53452c20276d657373616765272c20275365706574206f6765736920676563657273697a27293b0a2020202020202020454e442049463b0a0a202020202020202053454c4543540a202020202020202020202020702e6e616d652c0a202020202020202020202020702e70726963652c0a202020202020202020202020702e73746f636b2c0a202020202020202020202020434f414c4553434528702e72657365727665645f73746f636b2c2030290a2020202020202020494e544f0a202020202020202020202020765f70726f647563745f6e616d652c0a202020202020202020202020765f70726f647563745f70726963652c0a202020202020202020202020765f70726f647563745f73746f636b2c0a202020202020202020202020765f72657365727665645f73746f636b0a202020202020202046524f4d207075626c69632e70726f647563747320700a2020202020202020574845524520702e6964203d20765f70726f647563745f69643b0a0a20202020202020204946204e4f5420464f554e44205448454e0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2046414c53452c20276d657373616765272c20275572756e2062756c756e616d61646927293b0a2020202020202020454e442049463b0a0a2020202020202020765f617661696c61626c655f73746f636b203a3d20765f70726f647563745f73746f636b202d20765f72657365727665645f73746f636b3b0a2020202020202020494620765f617661696c61626c655f73746f636b203c20765f717479205448454e0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a202020202020202020202020202020202773756363657373272c2046414c53452c0a20202020202020202020202020202020276d657373616765272c2027596574657273697a2073746f6b272c0a202020202020202020202020202020202770726f647563745f6964272c20765f70726f647563745f69640a202020202020202020202020293b0a2020202020202020454e442049463b0a0a2020202020202020765f6974656d5f756e69745f63656e7473203a3d20524f554e4428765f70726f647563745f7072696365202a20313030293a3a626967696e743b0a2020202020202020765f6974656d5f6c696e655f63656e7473203a3d20765f6974656d5f756e69745f63656e7473202a20765f7174793b0a2020202020202020765f6974656d5f746f74616c5f63656e7473203a3d20765f6974656d5f746f74616c5f63656e7473202b20765f6974656d5f6c696e655f63656e74733b0a0a2020202020202020765f636172745f736e617073686f74203a3d20765f636172745f736e617073686f74207c7c206a736f6e625f6275696c645f6172726179280a2020202020202020202020206a736f6e625f6275696c645f6f626a656374280a202020202020202020202020202020202770726f647563745f6964272c20765f70726f647563745f69642c0a202020202020202020202020202020202770726f647563745f6e616d65272c20765f70726f647563745f6e616d652c0a20202020202020202020202020202020277175616e74697479272c20765f7174792c0a2020202020202020202020202020202027756e69745f70726963655f63656e7473272c20765f6974656d5f756e69745f63656e74732c0a2020202020202020202020202020202027756e69745f7072696365272c20524f554e4428765f6974656d5f756e69745f63656e74733a3a6e756d65726963202f203130302c2032292c0a2020202020202020202020202020202027737562746f74616c5f63656e7473272c20765f6974656d5f6c696e655f63656e74732c0a2020202020202020202020202020202027737562746f74616c272c20524f554e4428765f6974656d5f6c696e655f63656e74733a3a6e756d65726963202f203130302c2032292c0a20202020202020202020202020202020276c696e655f746f74616c5f63656e7473272c20765f6974656d5f6c696e655f63656e74732c0a20202020202020202020202020202020276c696e655f746f74616c272c20524f554e4428765f6974656d5f6c696e655f63656e74733a3a6e756d65726963202f203130302c2032290a202020202020202020202020290a2020202020202020293b0a20202020454e44204c4f4f503b0a0a20202020765f7661745f746f74616c5f63656e7473203a3d20524f554e4428765f6974656d5f746f74616c5f63656e7473202a20765f7661745f72617465293a3a626967696e743b0a0a20202020494620705f70726f6d6f5f636f6465204953204e4f54204e554c4c20414e44204c454e475448285452494d28705f70726f6d6f5f636f64652929203e2030205448454e0a2020202020202020424547494e0a20202020202020202020202053454c454354207665726966795f70726f6d6f5f636f646528705f70726f6d6f5f636f64652920494e544f20765f70726f6d6f5f726573756c743b0a202020202020202020202020494620434f414c455343452828765f70726f6d6f5f726573756c742d3e3e2776616c696427293a3a626f6f6c65616e2c2046414c534529205448454e0a2020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f747970652729203d202770657263656e7461676527205448454e0a2020202020202020202020202020202020202020765f646973636f756e745f746f74616c5f63656e7473203a3d20524f554e44280a20202020202020202020202020202020202020202020202028765f6974656d5f746f74616c5f63656e7473202b20765f7661745f746f74616c5f63656e747329202a0a20202020202020202020202020202020202020202020202028434f414c455343452828765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a6e756d657269632c203029202f203130302e30290a2020202020202020202020202020202020202020293a3a626967696e743b0a20202020202020202020202020202020454c53450a2020202020202020202020202020202020202020765f646973636f756e745f746f74616c5f63656e7473203a3d20524f554e44280a202020202020202020202020202020202020202020202020434f414c455343452828765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a6e756d657269632c203029202a203130300a2020202020202020202020202020202020202020293a3a626967696e743b0a20202020202020202020202020202020454e442049463b0a0a2020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e742729204953204e4f54204e554c4c205448454e0a2020202020202020202020202020202020202020765f646973636f756e745f746f74616c5f63656e7473203a3d204c45415354280a202020202020202020202020202020202020202020202020765f646973636f756e745f746f74616c5f63656e74732c0a202020202020202020202020202020202020202020202020524f554e442828765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e7427293a3a6e756d65726963202a20313030293a3a626967696e740a2020202020202020202020202020202020202020293b0a20202020202020202020202020202020454e442049463b0a202020202020202020202020454e442049463b0a2020202020202020455843455054494f4e205748454e204f5448455253205448454e0a202020202020202020202020765f646973636f756e745f746f74616c5f63656e7473203a3d20303b0a2020202020202020454e443b0a20202020454e442049463b0a0a20202020765f7072655f7368697070696e675f746f74616c5f63656e7473203a3d20475245415445535428765f6974656d5f746f74616c5f63656e7473202b20765f7661745f746f74616c5f63656e7473202d20765f646973636f756e745f746f74616c5f63656e74732c2030293b0a20202020494620765f7072655f7368697070696e675f746f74616c5f63656e7473203e3d20524f554e4428765f7368697070696e675f7468726573686f6c64202a20313030293a3a626967696e74205448454e0a2020202020202020765f7368697070696e675f746f74616c5f63656e7473203a3d20303b0a20202020454c53450a2020202020202020765f7368697070696e675f746f74616c5f63656e7473203a3d20524f554e4428765f7368697070696e675f636f7374202a20313030293a3a626967696e743b0a20202020454e442049463b0a0a20202020765f626173655f746f74616c5f63656e7473203a3d20765f7072655f7368697070696e675f746f74616c5f63656e7473202b20765f7368697070696e675f746f74616c5f63656e74733b0a0a20202020494620705f7061796d656e745f6d6574686f64203d20276372656469745f6361726427205448454e0a202020202020202053454c45435420636f6d6d697373696f6e5f726174652c20757064617465645f61740a2020202020202020494e544f20765f636f6d6d697373696f6e5f726174652c20765f726174655f757064617465645f61740a202020202020202046524f4d207075626c69632e696e7374616c6c6d656e745f72617465730a2020202020202020574845524520696e7374616c6c6d656e745f6e756d626572203d20705f696e7374616c6c6d656e745f6e756d6265720a20202020202020202020414e442069735f616374697665203d20545255450a20202020202020204c494d495420313b0a0a20202020202020204946204e4f5420464f554e44205448454e0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2046414c53452c20276d657373616765272c2027536563696c656e2074616b73697420616b74696620646567696c27293b0a2020202020202020454e442049463b0a0a2020202020202020765f636f6d6d697373696f6e5f616d6f756e745f63656e7473203a3d20524f554e4428765f626173655f746f74616c5f63656e7473202a2028765f636f6d6d697373696f6e5f72617465202f203130302e3029293a3a626967696e743b0a20202020454c53450a2020202020202020765f636f6d6d697373696f6e5f72617465203a3d20303b0a2020202020202020765f726174655f757064617465645f6174203a3d204e4f5728293b0a2020202020202020765f636f6d6d697373696f6e5f616d6f756e745f63656e7473203a3d20303b0a20202020454e442049463b0a0a20202020765f706169645f746f74616c5f63656e7473203a3d20765f626173655f746f74616c5f63656e7473202b20765f636f6d6d697373696f6e5f616d6f756e745f63656e74733b0a0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20545255452c0a2020202020202020276d657373616765272c202751756f7465206f6c7573747572756c6475272c0a2020202020202020277061796d656e745f6d6574686f64272c20705f7061796d656e745f6d6574686f642c0a2020202020202020277368697070696e675f616464726573735f6964272c20705f7368697070696e675f616464726573735f69642c0a202020202020202027696e7374616c6c6d656e745f6e756d626572272c2043415345205748454e20705f7061796d656e745f6d6574686f64203d20276372656469745f6361726427205448454e20705f696e7374616c6c6d656e745f6e756d62657220454c5345203120454e442c0a2020202020202020276974656d5f746f74616c5f63656e7473272c20765f6974656d5f746f74616c5f63656e74732c0a2020202020202020277661745f746f74616c5f63656e7473272c20765f7661745f746f74616c5f63656e74732c0a2020202020202020277368697070696e675f746f74616c5f63656e7473272c20765f7368697070696e675f746f74616c5f63656e74732c0a202020202020202027646973636f756e745f746f74616c5f63656e7473272c20765f646973636f756e745f746f74616c5f63656e74732c0a202020202020202027626173655f746f74616c5f63656e7473272c20765f626173655f746f74616c5f63656e74732c0a202020202020202027636f6d6d697373696f6e5f72617465272c20765f636f6d6d697373696f6e5f726174652c0a202020202020202027636f6d6d697373696f6e5f616d6f756e745f63656e7473272c20765f636f6d6d697373696f6e5f616d6f756e745f63656e74732c0a202020202020202027706169645f746f74616c5f63656e7473272c20765f706169645f746f74616c5f63656e74732c0a20202020202020202763757272656e6379272c2027544c272c0a202020202020202027726174655f76657273696f6e272c20277631272c0a2020202020202020276566666563746976655f66726f6d272c20765f726174655f757064617465645f61742c0a202020202020202027636172745f736e617073686f74272c20765f636172745f736e617073686f740a20202020293b0a454e443b0a242400000c09435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e726573657276655f73746f636b5f666f725f696e74656e745f7631280a20202020705f696e74656e745f696420555549442c0a20202020705f74746c5f6d696e7574657320494e54454745522044454641554c542031350a290a52455455524e53204a534f4e420a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670a41532024240a4445434c4152450a20202020765f726f6c6520544558543b0a20202020765f696e74656e74205245434f52443b0a20202020765f6974656d204a534f4e423b0a20202020765f70726f647563745f696420555549443b0a20202020765f71747920494e54454745523b0a20202020765f73746f636b20494e54454745523b0a20202020765f726573657276656420494e54454745523b0a20202020765f617661696c61626c6520494e54454745523b0a20202020765f726573657276655f756e74696c2054494d455354414d50545a3b0a20202020765f6578697374696e67205245434f52443b0a20202020765f72657365727665645f636f756e7420494e5445474552203a3d20303b0a424547494e0a20202020765f726f6c65203a3d20434f414c45534345284e554c4c49462863757272656e745f73657474696e672827726571756573742e6a77742e636c61696d2e726f6c65272c2054525545292c202727292c20617574682e726f6c6528292c2027736572766963655f726f6c6527293b0a20202020494620765f726f6c65203c3e2027736572766963655f726f6c6527205448454e0a2020202020202020524149534520455843455054494f4e2027666f7262696464656e273b0a20202020454e442049463b0a0a2020202053454c454354202a0a20202020494e544f20765f696e74656e740a2020202046524f4d207075626c69632e7061796d656e745f696e74656e74730a202020205748455245206964203d20705f696e74656e745f69640a20202020464f52205550444154453b0a0a202020204946204e4f5420464f554e44205448454e0a2020202020202020524149534520455843455054494f4e2027696e74656e745f6e6f745f666f756e64273b0a20202020454e442049463b0a0a20202020494620765f696e74656e742e737461747573204e4f5420494e20282770656e64696e67272c20276177616974696e675f33642729205448454e0a2020202020202020524149534520455843455054494f4e2027696e74656e745f7374617475735f696e76616c6964273b0a20202020454e442049463b0a0a20202020765f726573657276655f756e74696c203a3d204e4f572829202b206d616b655f696e74657276616c286d696e73203d3e20475245415445535428705f74746c5f6d696e757465732c203129293b0a0a202020202d2d2072656c656173652070726576696f75736c7920616374697665207265736572766174696f6e7320666f722073616d6520696e74656e742c207468656e2072656372656174652064657465726d696e6973746963616c6c790a20202020464f5220765f6578697374696e6720494e0a202020202020202053454c4543542070726f647563745f69642c207174790a202020202020202046524f4d207075626c69632e73746f636b5f7265736572766174696f6e730a2020202020202020574845524520696e74656e745f6964203d20705f696e74656e745f69640a20202020202020202020414e442072656c65617365645f6174204953204e554c4c0a202020204c4f4f500a2020202020202020555044415445207075626c69632e70726f64756374730a20202020202020205345542072657365727665645f73746f636b203d20475245415445535428434f414c455343452872657365727665645f73746f636b2c203029202d20765f6578697374696e672e7174792c2030290a20202020202020205748455245206964203d20765f6578697374696e672e70726f647563745f69643b0a20202020454e44204c4f4f503b0a0a20202020555044415445207075626c69632e73746f636b5f7265736572766174696f6e730a202020205345542072656c65617365645f6174203d204e4f5728290a20202020574845524520696e74656e745f6964203d20705f696e74656e745f69640a202020202020414e442072656c65617365645f6174204953204e554c4c3b0a0a20202020464f5220765f6974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e747328765f696e74656e742e636172745f736e617073686f74290a202020204c4f4f500a2020202020202020765f70726f647563745f6964203a3d2028765f6974656d2d3e3e2770726f647563745f696427293a3a757569643b0a2020202020202020765f717479203a3d20434f414c455343452828765f6974656d2d3e3e277175616e7469747927293a3a696e74656765722c2030293b0a0a2020202020202020494620765f70726f647563745f6964204953204e554c4c204f5220765f717479203c3d2030205448454e0a202020202020202020202020524149534520455843455054494f4e2027696e74656e745f636172745f696e76616c6964273b0a2020202020202020454e442049463b0a0a202020202020202053454c4543542073746f636b2c20434f414c455343452872657365727665645f73746f636b2c2030290a2020202020202020494e544f20765f73746f636b2c20765f72657365727665640a202020202020202046524f4d207075626c69632e70726f64756374730a20202020202020205748455245206964203d20765f70726f647563745f69640a2020202020202020464f52205550444154453b0a0a20202020202020204946204e4f5420464f554e44205448454e0a202020202020202020202020524149534520455843455054494f4e202770726f647563745f6e6f745f666f756e64273b0a2020202020202020454e442049463b0a0a2020202020202020765f617661696c61626c65203a3d20765f73746f636b202d20765f72657365727665643b0a2020202020202020494620765f617661696c61626c65203c20765f717479205448454e0a202020202020202020202020524149534520455843455054494f4e2027696e73756666696369656e745f73746f636b273b0a2020202020202020454e442049463b0a0a2020202020202020494e5345525420494e544f207075626c69632e73746f636b5f7265736572766174696f6e732028696e74656e745f69642c2070726f647563745f69642c207174792c20657870697265735f6174290a202020202020202056414c5545532028705f696e74656e745f69642c20765f70726f647563745f69642c20765f7174792c20765f726573657276655f756e74696c293b0a0a2020202020202020555044415445207075626c69632e70726f64756374730a20202020202020205345542072657365727665645f73746f636b203d20434f414c455343452872657365727665645f73746f636b2c203029202b20765f7174790a20202020202020205748455245206964203d20765f70726f647563745f69643b0a0a2020202020202020765f72657365727665645f636f756e74203a3d20765f72657365727665645f636f756e74202b20313b0a20202020454e44204c4f4f503b0a0a20202020555044415445207075626c69632e7061796d656e745f696e74656e74730a2020202053455420737461747573203d20276177616974696e675f3364272c0a2020202020202020657870697265735f6174203d20765f726573657276655f756e74696c2c0a2020202020202020757064617465645f6174203d204e4f5728290a202020205748455245206964203d20705f696e74656e745f69643b0a0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20545255452c0a202020202020202027696e74656e745f6964272c20705f696e74656e745f69642c0a20202020202020202772657365727665645f636f756e74272c20765f72657365727665645f636f756e742c0a202020202020202027657870697265735f6174272c20765f726573657276655f756e74696c0a20202020293b0a454e443b0a2424000005b4435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e72656c656173655f696e74656e745f7265736572766174696f6e735f7631280a20202020705f696e74656e745f696420555549442c0a20202020705f6e65775f73746174757320544558542044454641554c5420276661696c6564270a290a52455455524e53204a534f4e420a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670a41532024240a4445434c4152450a20202020765f726f6c6520544558543b0a20202020765f7265736572766174696f6e205245434f52443b0a20202020765f72656c65617365645f636f756e7420494e5445474552203a3d20303b0a424547494e0a20202020765f726f6c65203a3d20434f414c45534345284e554c4c49462863757272656e745f73657474696e672827726571756573742e6a77742e636c61696d2e726f6c65272c2054525545292c202727292c20617574682e726f6c6528292c2027736572766963655f726f6c6527293b0a20202020494620765f726f6c65203c3e2027736572766963655f726f6c6527205448454e0a2020202020202020524149534520455843455054494f4e2027666f7262696464656e273b0a20202020454e442049463b0a0a20202020464f5220765f7265736572766174696f6e20494e0a202020202020202053454c4543542069642c2070726f647563745f69642c207174790a202020202020202046524f4d207075626c69632e73746f636b5f7265736572766174696f6e730a2020202020202020574845524520696e74656e745f6964203d20705f696e74656e745f69640a20202020202020202020414e442072656c65617365645f6174204953204e554c4c0a2020202020202020464f52205550444154450a202020204c4f4f500a2020202020202020555044415445207075626c69632e70726f64756374730a20202020202020205345542072657365727665645f73746f636b203d20475245415445535428434f414c455343452872657365727665645f73746f636b2c203029202d20765f7265736572766174696f6e2e7174792c2030290a20202020202020205748455245206964203d20765f7265736572766174696f6e2e70726f647563745f69643b0a0a2020202020202020555044415445207075626c69632e73746f636b5f7265736572766174696f6e730a20202020202020205345542072656c65617365645f6174203d204e4f5728290a20202020202020205748455245206964203d20765f7265736572766174696f6e2e69643b0a0a2020202020202020765f72656c65617365645f636f756e74203a3d20765f72656c65617365645f636f756e74202b20313b0a20202020454e44204c4f4f503b0a0a20202020494620705f6e65775f73746174757320494e2028276661696c6564272c2027657870697265642729205448454e0a2020202020202020555044415445207075626c69632e7061796d656e745f696e74656e74730a202020202020202053455420737461747573203d20705f6e65775f7374617475732c0a202020202020202020202020757064617465645f6174203d204e4f5728290a20202020202020205748455245206964203d20705f696e74656e745f69640a20202020202020202020414e4420737461747573204e4f5420494e20282770616964272c2027766f69646564272c2027726566756e64656427293b0a20202020454e442049463b0a0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20545255452c0a202020202020202027696e74656e745f6964272c20705f696e74656e745f69642c0a20202020202020202772656c65617365645f636f756e74272c20765f72656c65617365645f636f756e740a20202020293b0a454e443b0a242400001495435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e66696e616c697a655f696e74656e745f6372656174655f6f726465725f7631280a20202020705f696e74656e745f696420555549442c0a20202020705f676174657761795f726573756c74204a534f4e422044454641554c5420277b7d273a3a6a736f6e620a290a52455455524e53204a534f4e420a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670a41532024240a4445434c4152450a20202020765f726f6c6520544558543b0a20202020765f696e74656e74205245434f52443b0a20202020765f6578697374696e675f6f726465725f696420555549443b0a20202020765f7265736572766174696f6e205245434f52443b0a20202020765f70726f64756374205245434f52443b0a20202020765f6f726465725f696420555549443b0a20202020765f676174657761795f73746174757320544558543b0a20202020765f676174657761795f7472785f636f646520544558543b0a20202020765f6f726465725f64657461696c73204a534f4e423b0a20202020765f686973746f72795f6e6f746520544558543b0a20202020765f6163746976655f7265736572766174696f6e5f636f756e7420494e5445474552203a3d20303b0a424547494e0a20202020765f726f6c65203a3d20434f414c45534345284e554c4c49462863757272656e745f73657474696e672827726571756573742e6a77742e636c61696d2e726f6c65272c2054525545292c202727292c20617574682e726f6c6528292c2027736572766963655f726f6c6527293b0a20202020494620765f726f6c65203c3e2027736572766963655f726f6c6527205448454e0a2020202020202020524149534520455843455054494f4e2027666f7262696464656e273b0a20202020454e442049463b0a0a2020202053454c454354202a0a20202020494e544f20765f696e74656e740a2020202046524f4d207075626c69632e7061796d656e745f696e74656e74730a202020205748455245206964203d20705f696e74656e745f69640a20202020464f52205550444154453b0a0a202020204946204e4f5420464f554e44205448454e0a2020202020202020524149534520455843455054494f4e2027696e74656e745f6e6f745f666f756e64273b0a20202020454e442049463b0a0a20202020494620765f696e74656e742e737461747573203d20277061696427205448454e0a202020202020202053454c4543542069640a2020202020202020494e544f20765f6578697374696e675f6f726465725f69640a202020202020202046524f4d207075626c69632e6f72646572730a20202020202020205748455245207061796d656e745f696e74656e745f6964203d20705f696e74656e745f69640a20202020202020204c494d495420313b0a0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c20545255452c0a202020202020202020202020276f726465725f6964272c20765f6578697374696e675f6f726465725f69642c0a20202020202020202020202027616c72656164795f70616964272c20545255450a2020202020202020293b0a20202020454e442049463b0a0a20202020494620765f696e74656e742e737461747573204e4f5420494e20282770656e64696e67272c20276177616974696e675f33642729205448454e0a2020202020202020524149534520455843455054494f4e2027696e74656e745f7374617475735f696e76616c6964273b0a20202020454e442049463b0a0a20202020494620765f696e74656e742e63757272656e6379203c3e2027544c27205448454e0a2020202020202020524149534520455843455054494f4e202763757272656e63795f6d69736d61746368273b0a20202020454e442049463b0a0a2020202053454c45435420434f554e54282a290a20202020494e544f20765f6163746976655f7265736572766174696f6e5f636f756e740a2020202046524f4d207075626c69632e73746f636b5f7265736572766174696f6e730a20202020574845524520696e74656e745f6964203d20705f696e74656e745f69640a202020202020414e442072656c65617365645f6174204953204e554c4c3b0a0a20202020494620765f6163746976655f7265736572766174696f6e5f636f756e74203d2030205448454e0a2020202020202020524149534520455843455054494f4e20276e6f5f6163746976655f7265736572766174696f6e73273b0a20202020454e442049463b0a0a20202020464f5220765f7265736572766174696f6e20494e0a202020202020202053454c4543542069642c2070726f647563745f69642c207174790a202020202020202046524f4d207075626c69632e73746f636b5f7265736572766174696f6e730a2020202020202020574845524520696e74656e745f6964203d20705f696e74656e745f69640a20202020202020202020414e442072656c65617365645f6174204953204e554c4c0a2020202020202020464f52205550444154450a202020204c4f4f500a202020202020202053454c4543542069642c2073746f636b2c20434f414c455343452872657365727665645f73746f636b2c2030292041532072657365727665645f73746f636b0a2020202020202020494e544f20765f70726f647563740a202020202020202046524f4d207075626c69632e70726f64756374730a20202020202020205748455245206964203d20765f7265736572766174696f6e2e70726f647563745f69640a2020202020202020464f52205550444154453b0a0a20202020202020204946204e4f5420464f554e44205448454e0a202020202020202020202020524149534520455843455054494f4e202770726f647563745f6e6f745f666f756e64273b0a2020202020202020454e442049463b0a0a2020202020202020494620765f70726f647563742e72657365727665645f73746f636b203c20765f7265736572766174696f6e2e717479204f5220765f70726f647563742e73746f636b203c20765f7265736572766174696f6e2e717479205448454e0a202020202020202020202020524149534520455843455054494f4e20277265736572766174696f6e5f73746174655f696e76616c6964273b0a2020202020202020454e442049463b0a0a2020202020202020555044415445207075626c69632e70726f64756374730a20202020202020205345540a20202020202020202020202073746f636b203d2073746f636b202d20765f7265736572766174696f6e2e7174792c0a20202020202020202020202072657365727665645f73746f636b203d20475245415445535428434f414c455343452872657365727665645f73746f636b2c203029202d20765f7265736572766174696f6e2e7174792c2030290a20202020202020205748455245206964203d20765f7265736572766174696f6e2e70726f647563745f69643b0a20202020454e44204c4f4f503b0a0a20202020765f6f726465725f64657461696c73203a3d206a736f6e625f6275696c645f6f626a656374280a2020202020202020276974656d73272c20765f696e74656e742e636172745f736e617073686f742c0a202020202020202027737562746f74616c272c20524f554e4428765f696e74656e742e6974656d5f746f74616c5f63656e74733a3a6e756d65726963202f203130302c2032292c0a2020202020202020277661745f616d6f756e74272c20524f554e4428765f696e74656e742e7661745f746f74616c5f63656e74733a3a6e756d65726963202f203130302c2032292c0a2020202020202020277368697070696e675f636f7374272c20524f554e4428765f696e74656e742e7368697070696e675f746f74616c5f63656e74733a3a6e756d65726963202f203130302c2032292c0a202020202020202027646973636f756e74272c20524f554e4428765f696e74656e742e646973636f756e745f746f74616c5f63656e74733a3a6e756d65726963202f203130302c2032292c0a202020202020202027636f6d6d697373696f6e5f616d6f756e74272c20524f554e4428765f696e74656e742e636f6d6d697373696f6e5f616d6f756e745f63656e74733a3a6e756d65726963202f203130302c2032292c0a202020202020202027746f74616c272c20524f554e4428765f696e74656e742e706169645f746f74616c5f63656e74733a3a6e756d65726963202f203130302c2032292c0a20202020202020202763757272656e6379272c2027544c272c0a202020202020202027696e7374616c6c6d656e745f6e756d626572272c20765f696e74656e742e696e7374616c6c6d656e745f6e756d6265720a20202020293b0a0a20202020494e5345525420494e544f207075626c69632e6f726465727320280a2020202020202020757365725f69642c0a20202020202020207368697070696e675f616464726573735f69642c0a20202020202020207061796d656e745f6d6574686f642c0a20202020202020207061796d656e745f7374617475732c0a20202020202020207374617475732c0a20202020202020206f726465725f64657461696c732c0a20202020202020207061796d656e745f696e74656e745f69642c0a202020202020202063757272656e63792c0a2020202020202020696e7374616c6c6d656e745f6e756d6265722c0a20202020202020206974656d5f746f74616c5f63656e74732c0a20202020202020207661745f746f74616c5f63656e74732c0a20202020202020207368697070696e675f746f74616c5f63656e74732c0a2020202020202020646973636f756e745f746f74616c5f63656e74732c0a2020202020202020636f6d6d697373696f6e5f616d6f756e745f63656e74732c0a2020202020202020706169645f746f74616c5f63656e74730a20202020290a2020202056414c55455320280a2020202020202020765f696e74656e742e757365725f69642c0a2020202020202020765f696e74656e742e7368697070696e675f616464726573735f69642c0a2020202020202020276372656469745f63617264272c0a20202020202020202770616964272c0a20202020202020202770726f63657373696e67272c0a2020202020202020765f6f726465725f64657461696c732c0a2020202020202020765f696e74656e742e69642c0a202020202020202027544c272c0a2020202020202020765f696e74656e742e696e7374616c6c6d656e745f6e756d6265722c0a2020202020202020765f696e74656e742e6974656d5f746f74616c5f63656e74732c0a2020202020202020765f696e74656e742e7661745f746f74616c5f63656e74732c0a2020202020202020765f696e74656e742e7368697070696e675f746f74616c5f63656e74732c0a2020202020202020765f696e74656e742e646973636f756e745f746f74616c5f63656e74732c0a2020202020202020765f696e74656e742e636f6d6d697373696f6e5f616d6f756e745f63656e74732c0a2020202020202020765f696e74656e742e706169645f746f74616c5f63656e74730a20202020290a2020202052455455524e494e4720696420494e544f20765f6f726465725f69643b0a0a20202020765f686973746f72795f6e6f7465203a3d20274b617274206f64656d657369206f6e61796c616e64692076652073697061726973206f6c7573747572756c6475273b0a20202020494e5345525420494e544f207075626c69632e6f726465725f7374617475735f686973746f727920286f726465725f69642c207374617475732c206e6f74652c20637265617465645f6174290a2020202056414c5545532028765f6f726465725f69642c202770726f63657373696e67272c20765f686973746f72795f6e6f74652c204e4f572829293b0a0a20202020555044415445207075626c69632e73746f636b5f7265736572766174696f6e730a202020205345542072656c65617365645f6174203d204e4f5728290a20202020574845524520696e74656e745f6964203d20705f696e74656e745f69640a202020202020414e442072656c65617365645f6174204953204e554c4c3b0a0a20202020765f676174657761795f737461747573203a3d20434f414c45534345280a2020202020202020705f676174657761795f726573756c742d3e3e27676174657761795f737461747573272c0a2020202020202020705f676174657761795f726573756c742d3e3e27726573756c74436f6465272c0a2020202020202020705f676174657761795f726573756c742d3e3e27726573756c745f636f6465272c0a20202020202020202773756363657373270a20202020293b0a20202020765f676174657761795f7472785f636f6465203a3d20434f414c45534345280a2020202020202020705f676174657761795f726573756c742d3e3e27676174657761795f7472785f636f6465272c0a2020202020202020705f676174657761795f726573756c742d3e3e27747278436f6465272c0a2020202020202020705f676174657761795f726573756c742d3e3e277472785f636f6465272c0a2020202020202020765f696e74656e742e676174657761795f7472785f636f64650a20202020293b0a0a20202020555044415445207075626c69632e7061796d656e745f696e74656e74730a202020205345540a2020202020202020737461747573203d202770616964272c0a2020202020202020676174657761795f737461747573203d20765f676174657761795f7374617475732c0a2020202020202020676174657761795f7472785f636f6465203d20765f676174657761795f7472785f636f64652c0a2020202020202020757064617465645f6174203d204e4f5728290a202020205748455245206964203d20705f696e74656e745f69643b0a0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20545255452c0a2020202020202020276f726465725f6964272c20765f6f726465725f69642c0a202020202020202027616c72656164795f70616964272c2046414c53450a20202020293b0a454e443b0a2424000005a6435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e72656c656173655f657870697265645f7265736572766174696f6e735f763128290a52455455524e53204a534f4e420a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670a41532024240a4445434c4152450a20202020765f726f6c6520544558543b0a20202020765f7265736572766174696f6e205245434f52443b0a20202020765f72656c65617365645f636f756e7420494e5445474552203a3d20303b0a20202020765f657870697265645f696e74656e745f636f756e7420494e5445474552203a3d20303b0a424547494e0a20202020765f726f6c65203a3d20434f414c45534345284e554c4c49462863757272656e745f73657474696e672827726571756573742e6a77742e636c61696d2e726f6c65272c2054525545292c202727292c20617574682e726f6c6528292c2027736572766963655f726f6c6527293b0a20202020494620765f726f6c65203c3e2027736572766963655f726f6c6527205448454e0a2020202020202020524149534520455843455054494f4e2027666f7262696464656e273b0a20202020454e442049463b0a0a20202020464f5220765f7265736572766174696f6e20494e0a202020202020202053454c4543542069642c20696e74656e745f69642c2070726f647563745f69642c207174790a202020202020202046524f4d207075626c69632e73746f636b5f7265736572766174696f6e730a202020202020202057484552452072656c65617365645f6174204953204e554c4c0a20202020202020202020414e4420657870697265735f6174203c204e4f5728290a2020202020202020464f52205550444154450a202020204c4f4f500a2020202020202020555044415445207075626c69632e70726f64756374730a20202020202020205345542072657365727665645f73746f636b203d20475245415445535428434f414c455343452872657365727665645f73746f636b2c203029202d20765f7265736572766174696f6e2e7174792c2030290a20202020202020205748455245206964203d20765f7265736572766174696f6e2e70726f647563745f69643b0a0a2020202020202020555044415445207075626c69632e73746f636b5f7265736572766174696f6e730a20202020202020205345542072656c65617365645f6174203d204e4f5728290a20202020202020205748455245206964203d20765f7265736572766174696f6e2e69643b0a0a2020202020202020765f72656c65617365645f636f756e74203a3d20765f72656c65617365645f636f756e74202b20313b0a20202020454e44204c4f4f503b0a0a20202020555044415445207075626c69632e7061796d656e745f696e74656e74730a2020202053455420737461747573203d202765787069726564272c0a2020202020202020757064617465645f6174203d204e4f5728290a2020202057484552452073746174757320494e20282770656e64696e67272c20276177616974696e675f336427290a202020202020414e4420657870697265735f6174203c204e4f5728293b0a0a2020202047455420444941474e4f535449435320765f657870697265645f696e74656e745f636f756e74203d20524f575f434f554e543b0a0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20545255452c0a20202020202020202772656c65617365645f7265736572766174696f6e5f636f756e74272c20765f72656c65617365645f636f756e742c0a202020202020202027657870697265645f696e74656e745f636f756e74272c20765f657870697265645f696e74656e745f636f756e740a20202020293b0a454e443b0a2424000003af435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e6578706972655f6162616e646f6e65645f696e74656e74735f763128290a52455455524e53204a534f4e420a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670a41532024240a4445434c4152450a20202020765f726f6c6520544558543b0a20202020765f657870697265645f636f756e7420494e5445474552203a3d20303b0a424547494e0a20202020765f726f6c65203a3d20434f414c45534345284e554c4c49462863757272656e745f73657474696e672827726571756573742e6a77742e636c61696d2e726f6c65272c2054525545292c202727292c20617574682e726f6c6528292c2027736572766963655f726f6c6527293b0a20202020494620765f726f6c65203c3e2027736572766963655f726f6c6527205448454e0a2020202020202020524149534520455843455054494f4e2027666f7262696464656e273b0a20202020454e442049463b0a0a20202020555044415445207075626c69632e7061796d656e745f696e74656e74732070690a2020202053455420737461747573203d202765787069726564272c0a2020202020202020757064617465645f6174203d204e4f5728290a2020202057484552452070692e73746174757320494e20282770656e64696e67272c20276177616974696e675f336427290a202020202020414e442070692e657870697265735f6174203c204e4f5728290a202020202020414e44204e4f542045584953545320280a20202020202020202020202053454c45435420310a20202020202020202020202046524f4d207075626c69632e73746f636b5f7265736572766174696f6e732073720a20202020202020202020202057484552452073722e696e74656e745f6964203d2070692e69640a2020202020202020202020202020414e442073722e72656c65617365645f6174204953204e554c4c0a202020202020293b0a0a2020202047455420444941474e4f535449435320765f657870697265645f636f756e74203d20524f575f434f554e543b0a0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20545255452c0a202020202020202027657870697265645f696e74656e745f636f756e74272c20765f657870697265645f636f756e740a20202020293b0a454e443b0a2424000000835245564f4b452045584543555445204f4e2046554e4354494f4e207075626c69632e63616c63756c6174655f6f726465725f71756f74655f763128555549442c204a534f4e422c20555549442c20544558542c20494e54454745522c2054455854292046524f4d205055424c49432c20616e6f6e2c2061757468656e746963617465640000006d5245564f4b452045584543555445204f4e2046554e4354494f4e207075626c69632e726573657276655f73746f636b5f666f725f696e74656e745f763128555549442c20494e5445474552292046524f4d205055424c49432c20616e6f6e2c2061757468656e746963617465640000006d5245564f4b452045584543555445204f4e2046554e4354494f4e207075626c69632e72656c656173655f696e74656e745f7265736572766174696f6e735f763128555549442c2054455854292046524f4d205055424c49432c20616e6f6e2c2061757468656e746963617465640000006f5245564f4b452045584543555445204f4e2046554e4354494f4e207075626c69632e66696e616c697a655f696e74656e745f6372656174655f6f726465725f763128555549442c204a534f4e42292046524f4d205055424c49432c20616e6f6e2c2061757468656e74696361746564000000645245564f4b452045584543555445204f4e2046554e4354494f4e207075626c69632e72656c656173655f657870697265645f7265736572766174696f6e735f763128292046524f4d205055424c49432c20616e6f6e2c2061757468656e74696361746564000000605245564f4b452045584543555445204f4e2046554e4354494f4e207075626c69632e6578706972655f6162616e646f6e65645f696e74656e74735f763128292046524f4d205055424c49432c20616e6f6e2c2061757468656e74696361746564000000714752414e542045584543555445204f4e2046554e4354494f4e207075626c69632e63616c63756c6174655f6f726465725f71756f74655f763128555549442c204a534f4e422c20555549442c20544558542c20494e54454745522c20544558542920544f20736572766963655f726f6c650000005b4752414e542045584543555445204f4e2046554e4354494f4e207075626c69632e726573657276655f73746f636b5f666f725f696e74656e745f763128555549442c20494e54454745522920544f20736572766963655f726f6c650000005b4752414e542045584543555445204f4e2046554e4354494f4e207075626c69632e72656c656173655f696e74656e745f7265736572766174696f6e735f763128555549442c20544558542920544f20736572766963655f726f6c650000005d4752414e542045584543555445204f4e2046554e4354494f4e207075626c69632e66696e616c697a655f696e74656e745f6372656174655f6f726465725f763128555549442c204a534f4e422920544f20736572766963655f726f6c65000000524752414e542045584543555445204f4e2046554e4354494f4e207075626c69632e72656c656173655f657870697265645f7265736572766174696f6e735f7631282920544f20736572766963655f726f6c650000004e4752414e542045584543555445204f4e2046554e4354494f4e207075626c69632e6578706972655f6162616e646f6e65645f696e74656e74735f7631282920544f20736572766963655f726f6c6500000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"REVOKE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"REVOKE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"REVOKE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"REVOKE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"REVOKE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"REVOKE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"GRANT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260213123000_activate_installment_rates_10_12.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"BEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"UPDATE public.installment_rates\nSET is_active = TRUE,\n    updated_at = NOW()\nWHERE installment_number BETWEEN 10 AND 12","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260213123000"},{"text":"activate_installment_rates_10_12"},{"binary":"000000010000000000000019000000030000000100000005424547494e00000077555044415445207075626c69632e696e7374616c6c6d656e745f72617465730a5345542069735f616374697665203d20545255452c0a20202020757064617465645f6174203d204e4f5728290a574845524520696e7374616c6c6d656e745f6e756d626572204245545745454e20313020414e4420313200000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"UPDATE 3"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260213190000_fix_create_order_search_path_security.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Security hardening: Explicitly set search_path for SECURITY DEFINER function\n-- Replaces/Updates the function definition from 20260213094500_bank_transfer_only_create_order.sql\n\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION create_order(\n    p_items JSONB, -- Array of objects: [{\"product_id\": \"uuid\", \"quantity\": 1}]\n    p_shipping_address_id UUID,\n    p_payment_method TEXT,\n    p_promo_code TEXT DEFAULT NULL\n)\nRETURNS JSONB\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path = public, pg_catalog -- HARDENING: Explicit search_path\nAS $$\nDECLARE\n    v_user_id UUID;\n    v_item JSONB;\n    v_product_id UUID;\n    v_product_name TEXT;\n    v_product_price DECIMAL(10,2);\n    v_product_stock INT;\n    v_qty INT;\n    v_item_subtotal DECIMAL(10,2);\n    v_total_subtotal DECIMAL(10,2) := 0;\n    v_total_vat DECIMAL(10,2) := 0;\n    v_shipping_cost DECIMAL(10,2);\n    v_final_total DECIMAL(10,2);\n    v_discount DECIMAL(10,2) := 0;\n    v_order_id UUID;\n    v_valid_items JSONB := '[]'::JSONB;\n    v_item_detail JSONB;\n    v_order_details JSONB;\n    v_bank_ref TEXT := NULL;\n    v_address_owner UUID;\n    v_promo_result JSON;\n    v_item_total_cents BIGINT := 0;\n    v_vat_total_cents BIGINT := 0;\n    v_shipping_total_cents BIGINT := 0;\n    v_discount_total_cents BIGINT := 0;\n    v_paid_total_cents BIGINT := 0;\nBEGIN\n    -- Card flow must use payment_intent + 3D finalize path\n    IF p_payment_method \u003c\u003e 'bank_transfer' THEN\n        RETURN jsonb_build_object(\n            'success', false,\n            'message', 'Kart odemeleri yeni 3D akisi ile alinmaktadir. Lutfen kart odeme endpointini kullanin.'\n        );\n    END IF;\n\n    -- 1. Get User ID (Safe due to search_path)\n    v_user_id := auth.uid();\n    IF v_user_id IS NULL THEN\n        RETURN jsonb_build_object('success', false, 'message', 'Oturum amanz gerekiyor');\n    END IF;\n\n    -- 2. Address Ownership Check (IDOR Security Fix)\n    SELECT user_id INTO v_address_owner FROM addresses WHERE id = p_shipping_address_id;\n    IF v_address_owner IS NULL OR v_address_owner != v_user_id THEN\n         RETURN jsonb_build_object('success', false, 'message', 'Geersiz adres seimi: Adres size ait deil.');\n    END IF;\n\n    -- 3. Iterate input items\n    FOR v_item IN SELECT * FROM jsonb_array_elements(p_items)\n    LOOP\n        v_product_id := (v_item-\u003e\u003e'product_id')::UUID;\n        v_qty := (v_item-\u003e\u003e'quantity')::INT;\n\n        -- Negative Quantity Check (Logic Security Fix)\n        IF v_qty \u003c= 0 THEN\n             RETURN jsonb_build_object('success', false, 'message', 'Geersiz rn miktar: 0 veya negatif olamaz.');\n        END IF;\n\n        -- Get product from DB WITH LOCK (Race Condition Fix)\n        SELECT id, name, price, stock \n        INTO v_product_id, v_product_name, v_product_price, v_product_stock\n        FROM products \n        WHERE id = v_product_id\n        FOR UPDATE; -- Critical: Locks the row\n        \n        IF NOT FOUND THEN\n             RETURN jsonb_build_object('success', false, 'message', 'rn bulunamad: ID ' || v_product_id);\n        END IF;\n\n        -- Check stock validity\n        IF v_product_stock \u003c v_qty THEN\n             RETURN jsonb_build_object('success', false, 'message', 'Yetersiz stok: ' || v_product_name);\n        END IF;\n\n        -- Calculate item totals using DB price\n        v_item_subtotal := v_product_price * v_qty;\n        v_total_subtotal := v_total_subtotal + v_item_subtotal;\n        \n        -- Build item detail\n        v_item_detail := jsonb_build_object(\n            'product_id', v_product_id,\n            'product_name', v_product_name,\n            'quantity', v_qty,\n            'unit_price', v_product_price,\n            'subtotal', v_item_subtotal\n        );\n        \n        v_valid_items := v_valid_items || v_item_detail;\n        \n    END LOOP;\n\n    -- 4. VAT (20%)\n    v_total_vat := v_total_subtotal * 0.20;\n\n    -- 5. Shipping\n    IF v_total_subtotal \u003e= 1500 THEN\n        v_shipping_cost := 0;\n    ELSE\n        v_shipping_cost := 49.90;\n    END IF;\n\n    -- 6. Promo Code (Backend Logic using verify_promo_code)\n    v_discount := 0; \n    IF p_promo_code IS NOT NULL AND length(p_promo_code) \u003e 0 THEN\n        BEGIN\n            -- Attempt to call verify_promo_code\n            SELECT verify_promo_code(p_promo_code) INTO v_promo_result;\n            \n            IF (v_promo_result-\u003e\u003e'valid')::boolean = true THEN\n                -- Check min order amount logic if applicable\n                 IF (v_promo_result-\u003e\u003e'discount_type') = 'percentage' THEN\n                     v_discount := (v_total_subtotal + v_total_vat) * ((v_promo_result-\u003e\u003e'discount_value')::decimal / 100);\n                     -- Max discount check\n                     IF (v_promo_result-\u003e\u003e'max_discount_amount') IS NOT NULL AND v_discount \u003e (v_promo_result-\u003e\u003e'max_discount_amount')::decimal THEN\n                         v_discount := (v_promo_result-\u003e\u003e'max_discount_amount')::decimal;\n                     END IF;\n                 ELSE\n                     v_discount := (v_promo_result-\u003e\u003e'discount_value')::decimal;\n                 END IF;\n            END IF;\n        EXCEPTION WHEN OTHERS THEN\n            v_discount := 0;\n        END;\n    END IF;\n\n    -- 7. Final Total\n    v_final_total := v_total_subtotal + v_total_vat + v_shipping_cost - v_discount;\n    IF v_final_total \u003c 0 THEN v_final_total := 0; END IF;\n    v_item_total_cents := ROUND(v_total_subtotal * 100)::bigint;\n    v_vat_total_cents := ROUND(v_total_vat * 100)::bigint;\n    v_shipping_total_cents := ROUND(v_shipping_cost * 100)::bigint;\n    v_discount_total_cents := ROUND(v_discount * 100)::bigint;\n    v_paid_total_cents := ROUND(v_final_total * 100)::bigint;\n\n    -- Bank Reference\n    v_bank_ref := 'BRV-' || to_char(NOW(), 'YYMMDD') || '-' || upper(substring(md5(random()::text) from 1 for 4));\n\n    -- 8. Construct final order_details JSON\n    v_order_details := jsonb_build_object(\n        'items', v_valid_items,\n        'subtotal', v_total_subtotal,\n        'vat_rate', 0.20,\n        'vat_amount', v_total_vat,\n        'shipping_cost', v_shipping_cost,\n        'total', v_final_total,\n        'promo_code', p_promo_code,\n        'discount', v_discount,\n        'bank_reference', v_bank_ref\n    );\n\n    -- 9. Insert Order\n    INSERT INTO orders (\n        user_id,\n        shipping_address_id,\n        payment_method,\n        status,\n        payment_status,\n        order_details,\n        currency,\n        installment_number,\n        item_total_cents,\n        vat_total_cents,\n        shipping_total_cents,\n        discount_total_cents,\n        commission_amount_cents,\n        paid_total_cents\n    ) VALUES (\n        v_user_id,\n        p_shipping_address_id,\n        'bank_transfer',\n        'pending', \n        'pending',\n        v_order_details,\n        'TL',\n        1,\n        v_item_total_cents,\n        v_vat_total_cents,\n        v_shipping_total_cents,\n        v_discount_total_cents,\n        0,\n        v_paid_total_cents\n    ) RETURNING id INTO v_order_id;\n    \n    -- 10. Insert Status History\n    BEGIN\n        INSERT INTO order_status_history (order_id, status, note, created_at)\n        VALUES (\n            v_order_id,\n            'pending',\n            'Sipari alnd (Havale/EFT Bekleniyor)',\n            NOW()\n        );\n    EXCEPTION WHEN OTHERS THEN\n        NULL;\n    END;\n\n    -- 11. Return Success\n    RETURN jsonb_build_object(\n        'success', true, \n        'order_id', v_order_id,\n        'total', v_final_total,\n        'shipping_cost', v_shipping_cost,\n        'bank_reference', v_bank_ref,\n        'message', 'Sipari baaryla oluturuldu'\n    );\n\nEXCEPTION WHEN OTHERS THEN\n    RAISE LOG 'create_order failed for user %, payment_method %, error %',\n        COALESCE(v_user_id::text, 'anonymous'),\n        COALESCE(p_payment_method, 'unknown'),\n        SQLERRM;\n    RETURN jsonb_build_object(\n        'success', false, \n        'message', 'Sipari oluturulurken beklenmeyen bir hata olutu. Ltfen tekrar deneyiniz.'\n    );\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260213190000"},{"text":"fix_create_order_search_path_security"},{"binary":"0000000100000000000000190000000300000001000000ba2d2d2053656375726974792068617264656e696e673a204578706c696369746c7920736574207365617263685f7061746820666f7220534543555249545920444546494e45522066756e6374696f6e0a2d2d205265706c616365732f55706461746573207468652066756e6374696f6e20646566696e6974696f6e2066726f6d2032303236303231333039343530305f62616e6b5f7472616e736665725f6f6e6c795f6372656174655f6f726465722e73716c0a0a424547494e00001e54435245415445204f52205245504c4143452046554e4354494f4e206372656174655f6f72646572280a20202020705f6974656d73204a534f4e422c202d2d204172726179206f66206f626a656374733a205b7b2270726f647563745f6964223a202275756964222c20227175616e74697479223a20317d5d0a20202020705f7368697070696e675f616464726573735f696420555549442c0a20202020705f7061796d656e745f6d6574686f6420544558542c0a20202020705f70726f6d6f5f636f646520544558542044454641554c54204e554c4c0a290a52455455524e53204a534f4e420a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f67202d2d2048415244454e494e473a204578706c69636974207365617263685f706174680a41532024240a4445434c4152450a20202020765f757365725f696420555549443b0a20202020765f6974656d204a534f4e423b0a20202020765f70726f647563745f696420555549443b0a20202020765f70726f647563745f6e616d6520544558543b0a20202020765f70726f647563745f707269636520444543494d414c2831302c32293b0a20202020765f70726f647563745f73746f636b20494e543b0a20202020765f71747920494e543b0a20202020765f6974656d5f737562746f74616c20444543494d414c2831302c32293b0a20202020765f746f74616c5f737562746f74616c20444543494d414c2831302c3229203a3d20303b0a20202020765f746f74616c5f76617420444543494d414c2831302c3229203a3d20303b0a20202020765f7368697070696e675f636f737420444543494d414c2831302c32293b0a20202020765f66696e616c5f746f74616c20444543494d414c2831302c32293b0a20202020765f646973636f756e7420444543494d414c2831302c3229203a3d20303b0a20202020765f6f726465725f696420555549443b0a20202020765f76616c69645f6974656d73204a534f4e42203a3d20275b5d273a3a4a534f4e423b0a20202020765f6974656d5f64657461696c204a534f4e423b0a20202020765f6f726465725f64657461696c73204a534f4e423b0a20202020765f62616e6b5f7265662054455854203a3d204e554c4c3b0a20202020765f616464726573735f6f776e657220555549443b0a20202020765f70726f6d6f5f726573756c74204a534f4e3b0a20202020765f6974656d5f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f7661745f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f7368697070696e675f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f646973636f756e745f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f706169645f746f74616c5f63656e747320424947494e54203a3d20303b0a424547494e0a202020202d2d204361726420666c6f77206d75737420757365207061796d656e745f696e74656e74202b2033442066696e616c697a6520706174680a20202020494620705f7061796d656e745f6d6574686f64203c3e202762616e6b5f7472616e7366657227205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276d657373616765272c20274b617274206f64656d656c6572692079656e6920334420616b69736920696c6520616c696e6d616b74616469722e204c757466656e206b617274206f64656d6520656e64706f696e74696e69206b756c6c616e696e2e270a2020202020202020293b0a20202020454e442049463b0a0a202020202d2d20312e2047657420557365722049442028536166652064756520746f207365617263685f70617468290a20202020765f757365725f6964203a3d20617574682e75696428293b0a20202020494620765f757365725f6964204953204e554c4c205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274f747572756d2061c3a76d616ec4b17a20676572656b69796f7227293b0a20202020454e442049463b0a0a202020202d2d20322e2041646472657373204f776e65727368697020436865636b202849444f5220536563757269747920466978290a2020202053454c45435420757365725f696420494e544f20765f616464726573735f6f776e65722046524f4d20616464726573736573205748455245206964203d20705f7368697070696e675f616464726573735f69643b0a20202020494620765f616464726573735f6f776e6572204953204e554c4c204f5220765f616464726573735f6f776e657220213d20765f757365725f6964205448454e0a20202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274765c3a7657273697a206164726573207365c3a7696d693a2041647265732073697a6520616974206465c49f696c2e27293b0a20202020454e442049463b0a0a202020202d2d20332e204974657261746520696e707574206974656d730a20202020464f5220765f6974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e747328705f6974656d73290a202020204c4f4f500a2020202020202020765f70726f647563745f6964203a3d2028765f6974656d2d3e3e2770726f647563745f696427293a3a555549443b0a2020202020202020765f717479203a3d2028765f6974656d2d3e3e277175616e7469747927293a3a494e543b0a0a20202020202020202d2d204e65676174697665205175616e7469747920436865636b20284c6f67696320536563757269747920466978290a2020202020202020494620765f717479203c3d2030205448454e0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274765c3a7657273697a20c3bc72c3bc6e206d696b746172c4b13a20302076657961206e656761746966206f6c616d617a2e27293b0a2020202020202020454e442049463b0a0a20202020202020202d2d204765742070726f647563742066726f6d2044422057495448204c4f434b20285261636520436f6e646974696f6e20466978290a202020202020202053454c4543542069642c206e616d652c2070726963652c2073746f636b200a2020202020202020494e544f20765f70726f647563745f69642c20765f70726f647563745f6e616d652c20765f70726f647563745f70726963652c20765f70726f647563745f73746f636b0a202020202020202046524f4d2070726f6475637473200a20202020202020205748455245206964203d20765f70726f647563745f69640a2020202020202020464f52205550444154453b202d2d20437269746963616c3a204c6f636b732074686520726f770a20202020202020200a20202020202020204946204e4f5420464f554e44205448454e0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c2027c39c72c3bc6e2062756c756e616d6164c4b13a2049442027207c7c20765f70726f647563745f6964293b0a2020202020202020454e442049463b0a0a20202020202020202d2d20436865636b2073746f636b2076616c69646974790a2020202020202020494620765f70726f647563745f73746f636b203c20765f717479205448454e0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c2027596574657273697a2073746f6b3a2027207c7c20765f70726f647563745f6e616d65293b0a2020202020202020454e442049463b0a0a20202020202020202d2d2043616c63756c617465206974656d20746f74616c73207573696e672044422070726963650a2020202020202020765f6974656d5f737562746f74616c203a3d20765f70726f647563745f7072696365202a20765f7174793b0a2020202020202020765f746f74616c5f737562746f74616c203a3d20765f746f74616c5f737562746f74616c202b20765f6974656d5f737562746f74616c3b0a20202020202020200a20202020202020202d2d204275696c64206974656d2064657461696c0a2020202020202020765f6974656d5f64657461696c203a3d206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202770726f647563745f6964272c20765f70726f647563745f69642c0a2020202020202020202020202770726f647563745f6e616d65272c20765f70726f647563745f6e616d652c0a202020202020202020202020277175616e74697479272c20765f7174792c0a20202020202020202020202027756e69745f7072696365272c20765f70726f647563745f70726963652c0a20202020202020202020202027737562746f74616c272c20765f6974656d5f737562746f74616c0a2020202020202020293b0a20202020202020200a2020202020202020765f76616c69645f6974656d73203a3d20765f76616c69645f6974656d73207c7c20765f6974656d5f64657461696c3b0a20202020202020200a20202020454e44204c4f4f503b0a0a202020202d2d20342e205641542028323025290a20202020765f746f74616c5f766174203a3d20765f746f74616c5f737562746f74616c202a20302e32303b0a0a202020202d2d20352e205368697070696e670a20202020494620765f746f74616c5f737562746f74616c203e3d2031353030205448454e0a2020202020202020765f7368697070696e675f636f7374203a3d20303b0a20202020454c53450a2020202020202020765f7368697070696e675f636f7374203a3d2034392e39303b0a20202020454e442049463b0a0a202020202d2d20362e2050726f6d6f20436f646520284261636b656e64204c6f676963207573696e67207665726966795f70726f6d6f5f636f6465290a20202020765f646973636f756e74203a3d20303b200a20202020494620705f70726f6d6f5f636f6465204953204e4f54204e554c4c20414e44206c656e67746828705f70726f6d6f5f636f646529203e2030205448454e0a2020202020202020424547494e0a2020202020202020202020202d2d20417474656d707420746f2063616c6c207665726966795f70726f6d6f5f636f64650a20202020202020202020202053454c454354207665726966795f70726f6d6f5f636f646528705f70726f6d6f5f636f64652920494e544f20765f70726f6d6f5f726573756c743b0a2020202020202020202020200a20202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e2776616c696427293a3a626f6f6c65616e203d2074727565205448454e0a202020202020202020202020202020202d2d20436865636b206d696e206f7264657220616d6f756e74206c6f676963206966206170706c696361626c650a202020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f747970652729203d202770657263656e7461676527205448454e0a202020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f746f74616c5f737562746f74616c202b20765f746f74616c5f76617429202a202828765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a646563696d616c202f20313030293b0a2020202020202020202020202020202020202020202d2d204d617820646973636f756e7420636865636b0a20202020202020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e742729204953204e4f54204e554c4c20414e4420765f646973636f756e74203e2028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e7427293a3a646563696d616c205448454e0a20202020202020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e7427293a3a646563696d616c3b0a202020202020202020202020202020202020202020454e442049463b0a2020202020202020202020202020202020454c53450a202020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a646563696d616c3b0a2020202020202020202020202020202020454e442049463b0a202020202020202020202020454e442049463b0a2020202020202020455843455054494f4e205748454e204f5448455253205448454e0a202020202020202020202020765f646973636f756e74203a3d20303b0a2020202020202020454e443b0a20202020454e442049463b0a0a202020202d2d20372e2046696e616c20546f74616c0a20202020765f66696e616c5f746f74616c203a3d20765f746f74616c5f737562746f74616c202b20765f746f74616c5f766174202b20765f7368697070696e675f636f7374202d20765f646973636f756e743b0a20202020494620765f66696e616c5f746f74616c203c2030205448454e20765f66696e616c5f746f74616c203a3d20303b20454e442049463b0a20202020765f6974656d5f746f74616c5f63656e7473203a3d20524f554e4428765f746f74616c5f737562746f74616c202a20313030293a3a626967696e743b0a20202020765f7661745f746f74616c5f63656e7473203a3d20524f554e4428765f746f74616c5f766174202a20313030293a3a626967696e743b0a20202020765f7368697070696e675f746f74616c5f63656e7473203a3d20524f554e4428765f7368697070696e675f636f7374202a20313030293a3a626967696e743b0a20202020765f646973636f756e745f746f74616c5f63656e7473203a3d20524f554e4428765f646973636f756e74202a20313030293a3a626967696e743b0a20202020765f706169645f746f74616c5f63656e7473203a3d20524f554e4428765f66696e616c5f746f74616c202a20313030293a3a626967696e743b0a0a202020202d2d2042616e6b205265666572656e63650a20202020765f62616e6b5f726566203a3d20274252562d27207c7c20746f5f63686172284e4f5728292c202759594d4d44442729207c7c20272d27207c7c20757070657228737562737472696e67286d64352872616e646f6d28293a3a74657874292066726f6d203120666f72203429293b0a0a202020202d2d20382e20436f6e7374727563742066696e616c206f726465725f64657461696c73204a534f4e0a20202020765f6f726465725f64657461696c73203a3d206a736f6e625f6275696c645f6f626a656374280a2020202020202020276974656d73272c20765f76616c69645f6974656d732c0a202020202020202027737562746f74616c272c20765f746f74616c5f737562746f74616c2c0a2020202020202020277661745f72617465272c20302e32302c0a2020202020202020277661745f616d6f756e74272c20765f746f74616c5f7661742c0a2020202020202020277368697070696e675f636f7374272c20765f7368697070696e675f636f73742c0a202020202020202027746f74616c272c20765f66696e616c5f746f74616c2c0a20202020202020202770726f6d6f5f636f6465272c20705f70726f6d6f5f636f64652c0a202020202020202027646973636f756e74272c20765f646973636f756e742c0a20202020202020202762616e6b5f7265666572656e6365272c20765f62616e6b5f7265660a20202020293b0a0a202020202d2d20392e20496e73657274204f726465720a20202020494e5345525420494e544f206f726465727320280a2020202020202020757365725f69642c0a20202020202020207368697070696e675f616464726573735f69642c0a20202020202020207061796d656e745f6d6574686f642c0a20202020202020207374617475732c0a20202020202020207061796d656e745f7374617475732c0a20202020202020206f726465725f64657461696c732c0a202020202020202063757272656e63792c0a2020202020202020696e7374616c6c6d656e745f6e756d6265722c0a20202020202020206974656d5f746f74616c5f63656e74732c0a20202020202020207661745f746f74616c5f63656e74732c0a20202020202020207368697070696e675f746f74616c5f63656e74732c0a2020202020202020646973636f756e745f746f74616c5f63656e74732c0a2020202020202020636f6d6d697373696f6e5f616d6f756e745f63656e74732c0a2020202020202020706169645f746f74616c5f63656e74730a20202020292056414c55455320280a2020202020202020765f757365725f69642c0a2020202020202020705f7368697070696e675f616464726573735f69642c0a20202020202020202762616e6b5f7472616e73666572272c0a20202020202020202770656e64696e67272c200a20202020202020202770656e64696e67272c0a2020202020202020765f6f726465725f64657461696c732c0a202020202020202027544c272c0a2020202020202020312c0a2020202020202020765f6974656d5f746f74616c5f63656e74732c0a2020202020202020765f7661745f746f74616c5f63656e74732c0a2020202020202020765f7368697070696e675f746f74616c5f63656e74732c0a2020202020202020765f646973636f756e745f746f74616c5f63656e74732c0a2020202020202020302c0a2020202020202020765f706169645f746f74616c5f63656e74730a20202020292052455455524e494e4720696420494e544f20765f6f726465725f69643b0a202020200a202020202d2d2031302e20496e736572742053746174757320486973746f72790a20202020424547494e0a2020202020202020494e5345525420494e544f206f726465725f7374617475735f686973746f727920286f726465725f69642c207374617475732c206e6f74652c20637265617465645f6174290a202020202020202056414c55455320280a202020202020202020202020765f6f726465725f69642c0a2020202020202020202020202770656e64696e67272c0a20202020202020202020202027536970617269c59f20616cc4b16e64c4b12028486176616c652f4546542042656b6c656e69796f7229272c0a2020202020202020202020204e4f5728290a2020202020202020293b0a20202020455843455054494f4e205748454e204f5448455253205448454e0a20202020202020204e554c4c3b0a20202020454e443b0a0a202020202d2d2031312e2052657475726e20537563636573730a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20747275652c200a2020202020202020276f726465725f6964272c20765f6f726465725f69642c0a202020202020202027746f74616c272c20765f66696e616c5f746f74616c2c0a2020202020202020277368697070696e675f636f7374272c20765f7368697070696e675f636f73742c0a20202020202020202762616e6b5f7265666572656e6365272c20765f62616e6b5f7265662c0a2020202020202020276d657373616765272c2027536970617269c59f206261c59f6172c4b1796c61206f6c75c59f747572756c6475270a20202020293b0a0a455843455054494f4e205748454e204f5448455253205448454e0a202020205241495345204c4f4720276372656174655f6f72646572206661696c656420666f72207573657220252c207061796d656e745f6d6574686f6420252c206572726f722025272c0a2020202020202020434f414c4553434528765f757365725f69643a3a746578742c2027616e6f6e796d6f757327292c0a2020202020202020434f414c4553434528705f7061796d656e745f6d6574686f642c2027756e6b6e6f776e27292c0a202020202020202053514c4552524d3b0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c2066616c73652c200a2020202020202020276d657373616765272c2027536970617269c59f206f6c75c59f747572756c75726b656e2062656b6c656e6d6579656e206269722068617461206f6c75c59f74752e204cc3bc7466656e2074656b7261722064656e6579696e697a2e270a20202020293b0a454e443b0a242400000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260213203000_security_fixes_search_path_and_rls.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Security Fixes:\r\n-- 1. Explicit search_path for triggers to prevent search_path hijacking\r\n-- 2. Add RLS policies for internal tables to satisfy warnings and allow admin access\r\n\r\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 1. Fix search_path for SECURITY DEFINER triggers\r\nALTER FUNCTION public.handle_user_confirmation_email() SET search_path = public, pg_catalog","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER FUNCTION public.handle_new_user() SET search_path = public, pg_catalog","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER FUNCTION public.handle_updated_at() SET search_path = public, pg_catalog","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Add RLS policies for payment_manual_review_queue (Admins only)\r\n-- Previously it had no policies (closed to all), but admins might need to see it.\r\nDROP POLICY IF EXISTS \"Admins can view review queue\" ON public.payment_manual_review_queue","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins can view review queue\"\r\nON public.payment_manual_review_queue\r\nFOR SELECT\r\nTO authenticated\r\nUSING (\r\n    (SELECT public.is_admin_user())\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. Add RLS policies for payment_webhook_events (Admins only - for debugging)\r\nDROP POLICY IF EXISTS \"Admins can view webhook events\" ON public.payment_webhook_events","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins can view webhook events\"\r\nON public.payment_webhook_events\r\nFOR SELECT\r\nTO authenticated\r\nUSING (\r\n    (SELECT public.is_admin_user())\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can view review queue\" for relation \"public.payment_manual_review_queue\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
NOTICE (00000): policy "Admins can view review queue" for relation "public.payment_manual_review_queue" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260213203000"},{"text":"security_fixes_search_path_and_rls"},{"binary":"0000000100000000000000190000000900000001000000bc2d2d2053656375726974792046697865733a0d0a2d2d20312e204578706c69636974207365617263685f7061746820666f7220747269676765727320746f2070726576656e74207365617263685f706174682068696a61636b696e670d0a2d2d20322e2041646420524c5320706f6c696369657320666f7220696e7465726e616c207461626c657320746f2073617469736679207761726e696e677320616e6420616c6c6f772061646d696e206163636573730d0a0d0a424547494e000000902d2d20312e20466978207365617263685f7061746820666f7220534543555249545920444546494e45522074726967676572730d0a414c5445522046554e4354494f4e207075626c69632e68616e646c655f757365725f636f6e6669726d6174696f6e5f656d61696c282920534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670000004c414c5445522046554e4354494f4e207075626c69632e68616e646c655f6e65775f75736572282920534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670000004e414c5445522046554e4354494f4e207075626c69632e68616e646c655f757064617465645f6174282920534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f67000000f42d2d20322e2041646420524c5320706f6c696369657320666f72207061796d656e745f6d616e75616c5f7265766965775f7175657565202841646d696e73206f6e6c79290d0a2d2d2050726576696f75736c7920697420686164206e6f20706f6c69636965732028636c6f73656420746f20616c6c292c206275742061646d696e73206d69676874206e65656420746f207365652069742e0d0a44524f5020504f4c49435920494620455849535453202241646d696e732063616e20766965772072657669657720717565756522204f4e207075626c69632e7061796d656e745f6d616e75616c5f7265766965775f7175657565000000a243524541544520504f4c494359202241646d696e732063616e207669657720726576696577207175657565220d0a4f4e207075626c69632e7061796d656e745f6d616e75616c5f7265766965775f71756575650d0a464f522053454c4543540d0a544f2061757468656e746963617465640d0a5553494e4720280d0a202020202853454c454354207075626c69632e69735f61646d696e5f757365722829290d0a29000000a82d2d20332e2041646420524c5320706f6c696369657320666f72207061796d656e745f776562686f6f6b5f6576656e7473202841646d696e73206f6e6c79202d20666f7220646562756767696e67290d0a44524f5020504f4c49435920494620455849535453202241646d696e732063616e207669657720776562686f6f6b206576656e747322204f4e207075626c69632e7061796d656e745f776562686f6f6b5f6576656e74730000009f43524541544520504f4c494359202241646d696e732063616e207669657720776562686f6f6b206576656e7473220d0a4f4e207075626c69632e7061796d656e745f776562686f6f6b5f6576656e74730d0a464f522053454c4543540d0a544f2061757468656e746963617465640d0a5553494e4720280d0a202020202853454c454354207075626c69632e69735f61646d696e5f757365722829290d0a2900000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can view webhook events\" for relation \"public.payment_webhook_events\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
NOTICE (00000): policy "Admins can view webhook events" for relation "public.payment_webhook_events" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260214171500_email_template_unification_phase1.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Phase 1: Email Template Unification Foundation\n-- Adds:\n-- 1) Global variable registry\n-- 2) Template-variable mapping with ordering\n-- 3) Template unresolved-token policy fields\n-- 4) Extended email log metadata\n-- 5) Backfill from legacy JSONB + token scanning\n\n-- Ensure generic updated_at trigger function exists\nCREATE OR REPLACE FUNCTION public.handle_updated_at()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = now();\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Canonical token key normalizer\nCREATE OR REPLACE FUNCTION public.normalize_email_token_key(raw_key TEXT)\nRETURNS TEXT\nLANGUAGE SQL\nIMMUTABLE\nAS $$\n    SELECT TRIM(BOTH '_' FROM\n        regexp_replace(\n            regexp_replace(\n                UPPER(\n                    regexp_replace(COALESCE(raw_key, ''), '([a-z0-9])([A-Z])', '\\1_\\2', 'g')\n                ),\n                '[^A-Z0-9_]+',\n                '_',\n                'g'\n            ),\n            '_+',\n            '_',\n            'g'\n        )\n    );\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Global variable registry\nCREATE TABLE IF NOT EXISTS public.email_variable_registry (\n    key TEXT PRIMARY KEY,\n    label TEXT NOT NULL,\n    description TEXT,\n    value_type TEXT NOT NULL DEFAULT 'string',\n    render_policy TEXT NOT NULL DEFAULT 'escaped_text',\n    sample_value TEXT,\n    is_sensitive BOOLEAN NOT NULL DEFAULT false,\n    is_active BOOLEAN NOT NULL DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,\n    CONSTRAINT email_variable_registry_key_format CHECK (key ~ '^[A-Z0-9_]+$'),\n    CONSTRAINT email_variable_registry_value_type_check CHECK (\n        value_type IN ('string', 'number', 'boolean', 'date', 'url', 'html')\n    ),\n    CONSTRAINT email_variable_registry_render_policy_check CHECK (\n        render_policy IN ('escaped_text', 'raw_html', 'url')\n    )\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_email_variable_registry_is_active\n    ON public.email_variable_registry (is_active)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Template-variable mapping\nCREATE TABLE IF NOT EXISTS public.email_template_variables (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    template_slug TEXT NOT NULL REFERENCES public.email_templates(slug) ON DELETE CASCADE,\n    variable_key TEXT NOT NULL REFERENCES public.email_variable_registry(key) ON DELETE RESTRICT,\n    is_required BOOLEAN NOT NULL DEFAULT false,\n    insertion_order INT NOT NULL DEFAULT 0,\n    is_enabled BOOLEAN NOT NULL DEFAULT true,\n    source_token TEXT,\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,\n    CONSTRAINT email_template_variables_unique UNIQUE (template_slug, variable_key),\n    CONSTRAINT email_template_variables_insertion_order_check CHECK (insertion_order \u003e= 0)\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_email_template_variables_template_order\n    ON public.email_template_variables (template_slug, insertion_order)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_email_template_variables_variable_key\n    ON public.email_template_variables (variable_key)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Extend email template policy metadata\nALTER TABLE IF EXISTS public.email_templates\n    ADD COLUMN IF NOT EXISTS is_auth_critical BOOLEAN NOT NULL DEFAULT false,\n    ADD COLUMN IF NOT EXISTS unresolved_policy TEXT NOT NULL DEFAULT 'block',\n    ADD COLUMN IF NOT EXISTS allowlist_fallback_keys TEXT[] NOT NULL DEFAULT ARRAY[]::TEXT[],\n    ADD COLUMN IF NOT EXISTS normalization_version INT NOT NULL DEFAULT 1,\n    ADD COLUMN IF NOT EXISTS editor_schema JSONB NOT NULL DEFAULT '{}'::jsonb","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DO $$\nBEGIN\n    IF NOT EXISTS (\n        SELECT 1\n        FROM pg_constraint\n        WHERE conname = 'email_templates_unresolved_policy_check'\n    ) THEN\n        ALTER TABLE public.email_templates\n            ADD CONSTRAINT email_templates_unresolved_policy_check\n            CHECK (unresolved_policy IN ('block', 'warn', 'allowlist_fallback'));\n    END IF;\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Extend email_logs for observability and policy evidence\nALTER TABLE IF EXISTS public.email_logs\n    ADD COLUMN IF NOT EXISTS template_slug TEXT,\n    ADD COLUMN IF NOT EXISTS subject TEXT,\n    ADD COLUMN IF NOT EXISTS content_snapshot TEXT,\n    ADD COLUMN IF NOT EXISTS error_details TEXT,\n    ADD COLUMN IF NOT EXISTS recipient_email TEXT,\n    ADD COLUMN IF NOT EXISTS render_warnings JSONB NOT NULL DEFAULT '[]'::jsonb,\n    ADD COLUMN IF NOT EXISTS unresolved_tokens JSONB NOT NULL DEFAULT '[]'::jsonb,\n    ADD COLUMN IF NOT EXISTS blocked BOOLEAN NOT NULL DEFAULT false,\n    ADD COLUMN IF NOT EXISTS degradation_active BOOLEAN NOT NULL DEFAULT false,\n    ADD COLUMN IF NOT EXISTS degradation_reason TEXT,\n    ADD COLUMN IF NOT EXISTS mode TEXT,\n    ADD COLUMN IF NOT EXISTS template_version INT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DO $$\nBEGIN\n    IF NOT EXISTS (\n        SELECT 1\n        FROM pg_constraint\n        WHERE conname = 'email_logs_mode_check'\n    ) THEN\n        ALTER TABLE public.email_logs\n            ADD CONSTRAINT email_logs_mode_check\n            CHECK (mode IS NULL OR mode IN ('send', 'test', 'browser_preview'));\n    END IF;\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"UPDATE public.email_logs\nSET recipient_email = recipient\nWHERE recipient_email IS NULL\n  AND recipient IS NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_email_logs_template_slug_sent_at\n    ON public.email_logs (template_slug, sent_at DESC)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_email_logs_mode_blocked\n    ON public.email_logs (mode, blocked)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- updated_at triggers\nDROP TRIGGER IF EXISTS set_updated_at_email_variable_registry ON public.email_variable_registry","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"template_slug\" of relation \"email_logs\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"subject\" of relation \"email_logs\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"content_snapshot\" of relation \"email_logs\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"error_details\" of relation \"email_logs\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
NOTICE (42701): column "template_slug" of relation "email_logs" already exists, skipping
NOTICE (42701): column "subject" of relation "email_logs" already exists, skipping
NOTICE (42701): column "content_snapshot" of relation "email_logs" already exists, skipping
NOTICE (42701): column "error_details" of relation "email_logs" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TRIGGER set_updated_at_email_variable_registry\n    BEFORE UPDATE ON public.email_variable_registry\n    FOR EACH ROW\n    EXECUTE PROCEDURE public.handle_updated_at()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP TRIGGER IF EXISTS set_updated_at_email_template_variables ON public.email_template_variables","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TRIGGER set_updated_at_email_template_variables\n    BEFORE UPDATE ON public.email_template_variables\n    FOR EACH ROW\n    EXECUTE PROCEDURE public.handle_updated_at()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- RLS\nALTER TABLE public.email_variable_registry ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"UPDATE 0"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_template_variables ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"trigger \"set_updated_at_email_variable_registry\" for relation \"public.email_variable_registry\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
NOTICE (00000): trigger "set_updated_at_email_variable_registry" for relation "public.email_variable_registry" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can manage email variable registry\" ON public.email_variable_registry","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins can manage email variable registry\"\nON public.email_variable_registry\nFOR ALL\nTO authenticated\nUSING (\n    EXISTS (\n        SELECT 1\n        FROM public.profiles\n        WHERE id = auth.uid()\n          AND (is_admin = true OR is_superadmin = true)\n    )\n)\nWITH CHECK (\n    EXISTS (\n        SELECT 1\n        FROM public.profiles\n        WHERE id = auth.uid()\n          AND (is_admin = true OR is_superadmin = true)\n    )\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"trigger \"set_updated_at_email_template_variables\" for relation \"public.email_template_variables\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can manage email template variables\" ON public.email_template_variables","ParameterOIDs":null}
NOTICE (00000): trigger "set_updated_at_email_template_variables" for relation "public.email_template_variables" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can manage email variable registry\" for relation \"public.email_variable_registry\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins can manage email template variables\"\nON public.email_template_variables\nFOR ALL\nTO authenticated\nUSING (\n    EXISTS (\n        SELECT 1\n        FROM public.profiles\n        WHERE id = auth.uid()\n          AND (is_admin = true OR is_superadmin = true)\n    )\n)\nWITH CHECK (\n    EXISTS (\n        SELECT 1\n        FROM public.profiles\n        WHERE id = auth.uid()\n          AND (is_admin = true OR is_superadmin = true)\n    )\n)","ParameterOIDs":null}
NOTICE (00000): policy "Admins can manage email variable registry" for relation "public.email_variable_registry" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can manage email template variables\" for relation \"public.email_template_variables\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Seed canonical global variables\nINSERT INTO public.email_variable_registry (\n    key,\n    label,\n    description,\n    value_type,\n    render_policy,\n    sample_value,\n    is_sensitive,\n    is_active\n)\nVALUES\n    ('NAME', 'Ad Soyad', 'Alc ad veya kullanc ad', 'string', 'escaped_text', 'Ahmet Ylmaz', false, true),\n    ('EMAIL', 'E-posta', 'Alc e-posta adresi', 'string', 'escaped_text', 'ahmet@example.com', true, true),\n    ('SUBJECT', 'Konu', 'Destek talebi veya bildirim konusu', 'string', 'escaped_text', 'Sipariiniz alnd', false, true),\n    ('ORDER_ID', 'Sipari No', 'Ksa sipari referans kodu', 'string', 'escaped_text', 'A1B2C3D4', false, true),\n    ('ORDER_DATE', 'Sipari Tarihi', 'Sipari oluturulma tarihi', 'date', 'escaped_text', '14 ubat 2026 16:45', false, true),\n    ('ITEMS_LIST', 'rn Listesi HTML', 'Sipari rn satrlarnn HTML ierii', 'html', 'raw_html', '\u003ctr\u003e\u003ctd\u003eBravita rn x1\u003c/td\u003e\u003c/tr\u003e', false, true),\n    ('SUBTOTAL', 'Ara Toplam', 'Sipari ara toplam', 'number', 'escaped_text', '1499.90', false, true),\n    ('DISCOUNT', 'ndirim', 'Sipari indirim tutar', 'number', 'escaped_text', '100.00', false, true),\n    ('TAX', 'KDV', 'Vergi tutar', 'number', 'escaped_text', '249.98', false, true),\n    ('TOTAL', 'Toplam', 'Sipari toplam tutar', 'number', 'escaped_text', '1649.88', false, true),\n    ('SHIPPING_ADDRESS', 'Teslimat Adresi', 'Sipari teslimat adresi', 'string', 'escaped_text', 'Kadky, stanbul', false, true),\n    ('PAYMENT_METHOD', 'deme Yntemi', 'Kredi kart veya havale bilgisi', 'string', 'escaped_text', 'Kredi Kart', false, true),\n    ('BANK_DETAILS', 'Banka Bilgileri HTML', 'Havale aklama kutusu ierii', 'html', 'raw_html', '\u003cdiv\u003eIBAN: TR00...\u003c/div\u003e', false, true),\n    ('SHIPPING_COMPANY', 'Kargo Firmas', 'Gnderim firmas ad', 'string', 'escaped_text', 'Yurtii Kargo', false, true),\n    ('TRACKING_NUMBER', 'Takip Numaras', 'Kargo takip kodu', 'string', 'escaped_text', 'TRK-123456', false, true),\n    ('CANCELLATION_REASON', 'ptal Nedeni', 'Sipari iptal aklamas', 'string', 'escaped_text', 'Stok sorunu', false, true),\n    ('BROWSER_LINK', 'Taraycda A Balants', 'E-postann web grnm balants', 'url', 'url', 'https://www.bravita.com.tr/...', false, true),\n    ('TICKET_ID', 'Destek Talep No', 'Destek talebi referans kodu', 'string', 'escaped_text', 'TKT12345', false, true),\n    ('CATEGORY', 'Destek Kategorisi', 'Destek talebi kategori ad', 'string', 'escaped_text', 'deme', false, true),\n    ('USER_MESSAGE', 'Kullanc Mesaj', 'Kullanc destek mesaj', 'string', 'escaped_text', 'Sipariim nerede?', false, true),\n    ('ADMIN_REPLY', 'Admin Yant', 'Destek ekibi yant', 'string', 'escaped_text', 'Talebiniz ileme alnd.', false, true),\n    ('CONFIRMATION_URL', 'Dorulama Linki', 'Auth dorulama veya sfrlama balants', 'url', 'url', 'https://www.bravita.com.tr/auth?...', true, true),\n    ('UNSUBSCRIBE_URL', 'Abonelikten k Linki', 'Bildirim aboneliinden k balants', 'url', 'url', 'https://www.bravita.com.tr/unsubscribe', false, true),\n    ('SITE_URL', 'Site URL', 'Site kk adresi', 'url', 'url', 'https://www.bravita.com.tr', false, true)\nON CONFLICT (key)\nDO UPDATE\nSET\n    label = EXCLUDED.label,\n    description = EXCLUDED.description,\n    value_type = EXCLUDED.value_type,\n    render_policy = EXCLUDED.render_policy,\n    sample_value = EXCLUDED.sample_value,\n    is_sensitive = EXCLUDED.is_sensitive,\n    is_active = true,\n    updated_at = timezone('utc'::text, now())","ParameterOIDs":null}
NOTICE (00000): policy "Admins can manage email template variables" for relation "public.email_template_variables" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Backfill mapping from legacy sources\nWITH json_tokens AS (\n    SELECT\n        t.slug AS template_slug,\n        j.raw_token,\n        j.ord::INT AS sort_order\n    FROM public.email_templates t\n    JOIN LATERAL jsonb_array_elements_text(COALESCE(t.variables, '[]'::jsonb)) WITH ORDINALITY AS j(raw_token, ord)\n        ON true\n),\nsubject_tokens AS (\n    SELECT\n        t.slug AS template_slug,\n        (m)[1] AS raw_token,\n        1000 + ROW_NUMBER() OVER (PARTITION BY t.slug ORDER BY (m)[1]) AS sort_order\n    FROM public.email_templates t\n    JOIN LATERAL regexp_matches(COALESCE(t.subject, ''), '\\{\\{\\s*\\.?([A-Za-z0-9_]+)\\s*\\}\\}', 'g') m\n        ON true\n),\nhtml_tokens AS (\n    SELECT\n        t.slug AS template_slug,\n        (m)[1] AS raw_token,\n        2000 + ROW_NUMBER() OVER (PARTITION BY t.slug ORDER BY (m)[1]) AS sort_order\n    FROM public.email_templates t\n    JOIN LATERAL regexp_matches(COALESCE(t.content_html, ''), '\\{\\{\\s*\\.?([A-Za-z0-9_]+)\\s*\\}\\}', 'g') m\n        ON true\n),\nall_tokens AS (\n    SELECT * FROM json_tokens\n    UNION ALL\n    SELECT * FROM subject_tokens\n    UNION ALL\n    SELECT * FROM html_tokens\n),\nnormalized AS (\n    SELECT\n        template_slug,\n        raw_token,\n        public.normalize_email_token_key(raw_token) AS variable_key,\n        sort_order\n    FROM all_tokens\n),\ndedup AS (\n    SELECT\n        template_slug,\n        variable_key,\n        MIN(sort_order) AS insertion_order\n    FROM normalized\n    WHERE variable_key \u003c\u003e ''\n    GROUP BY template_slug, variable_key\n)\nINSERT INTO public.email_variable_registry (\n    key,\n    label,\n    description,\n    value_type,\n    render_policy,\n    sample_value,\n    is_sensitive,\n    is_active\n)\nSELECT\n    d.variable_key,\n    INITCAP(REPLACE(LOWER(d.variable_key), '_', ' ')) AS label,\n    'Auto-discovered from existing templates during unification migration.' AS description,\n    CASE\n        WHEN d.variable_key IN ('SUBTOTAL', 'DISCOUNT', 'TAX', 'TOTAL') THEN 'number'\n        WHEN d.variable_key LIKE '%URL' OR d.variable_key = 'SITE_URL' OR d.variable_key = 'BROWSER_LINK' THEN 'url'\n        ELSE 'string'\n    END AS value_type,\n    CASE\n        WHEN d.variable_key IN ('ITEMS_LIST', 'BANK_DETAILS') THEN 'raw_html'\n        WHEN d.variable_key LIKE '%URL' OR d.variable_key = 'SITE_URL' OR d.variable_key = 'BROWSER_LINK' THEN 'url'\n        ELSE 'escaped_text'\n    END AS render_policy,\n    NULL,\n    false,\n    true\nFROM (\n    SELECT DISTINCT variable_key\n    FROM dedup\n) d\nWHERE NOT EXISTS (\n    SELECT 1\n    FROM public.email_variable_registry r\n    WHERE r.key = d.variable_key\n)\nON CONFLICT (key) DO NOTHING","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"WITH json_tokens AS (\n    SELECT\n        t.slug AS template_slug,\n        j.raw_token,\n        j.ord::INT AS sort_order\n    FROM public.email_templates t\n    JOIN LATERAL jsonb_array_elements_text(COALESCE(t.variables, '[]'::jsonb)) WITH ORDINALITY AS j(raw_token, ord)\n        ON true\n),\nsubject_tokens AS (\n    SELECT\n        t.slug AS template_slug,\n        (m)[1] AS raw_token,\n        1000 + ROW_NUMBER() OVER (PARTITION BY t.slug ORDER BY (m)[1]) AS sort_order\n    FROM public.email_templates t\n    JOIN LATERAL regexp_matches(COALESCE(t.subject, ''), '\\{\\{\\s*\\.?([A-Za-z0-9_]+)\\s*\\}\\}', 'g') m\n        ON true\n),\nhtml_tokens AS (\n    SELECT\n        t.slug AS template_slug,\n        (m)[1] AS raw_token,\n        2000 + ROW_NUMBER() OVER (PARTITION BY t.slug ORDER BY (m)[1]) AS sort_order\n    FROM public.email_templates t\n    JOIN LATERAL regexp_matches(COALESCE(t.content_html, ''), '\\{\\{\\s*\\.?([A-Za-z0-9_]+)\\s*\\}\\}', 'g') m\n        ON true\n),\nall_tokens AS (\n    SELECT * FROM json_tokens\n    UNION ALL\n    SELECT * FROM subject_tokens\n    UNION ALL\n    SELECT * FROM html_tokens\n),\nnormalized AS (\n    SELECT\n        template_slug,\n        raw_token,\n        public.normalize_email_token_key(raw_token) AS variable_key,\n        sort_order\n    FROM all_tokens\n),\ndedup AS (\n    SELECT\n        template_slug,\n        variable_key,\n        MIN(sort_order) AS insertion_order,\n        MIN(raw_token) AS source_token\n    FROM normalized\n    WHERE variable_key \u003c\u003e ''\n    GROUP BY template_slug, variable_key\n)\nINSERT INTO public.email_template_variables (\n    template_slug,\n    variable_key,\n    is_required,\n    insertion_order,\n    is_enabled,\n    source_token\n)\nSELECT\n    d.template_slug,\n    d.variable_key,\n    false,\n    d.insertion_order,\n    true,\n    d.source_token\nFROM dedup d\nON CONFLICT (template_slug, variable_key)\nDO UPDATE\nSET\n    insertion_order = LEAST(public.email_template_variables.insertion_order, EXCLUDED.insertion_order),\n    is_enabled = true,\n    source_token = COALESCE(public.email_template_variables.source_token, EXCLUDED.source_token),\n    updated_at = timezone('utc'::text, now())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Auth-critical template policy defaults\nUPDATE public.email_templates\nSET\n    is_auth_critical = true,\n    unresolved_policy = 'allowlist_fallback',\n    allowlist_fallback_keys = ARRAY[\n        'CONFIRMATION_URL',\n        'BROWSER_LINK',\n        'UNSUBSCRIBE_URL',\n        'SITE_URL',\n        'NAME',\n        'EMAIL'\n    ]::TEXT[],\n    normalization_version = GREATEST(normalization_version, 1)\nWHERE slug IN (\n    'confirm_signup',\n    'confirm-signup',\n    'reset_password'\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260214171500"},{"text":"email_template_unification_phase1"},{"binary":"0000000100000000000000190000001c00000001000001d62d2d20506861736520313a20456d61696c2054656d706c61746520556e696669636174696f6e20466f756e646174696f6e0a2d2d20416464733a0a2d2d20312920476c6f62616c207661726961626c652072656769737472790a2d2d2032292054656d706c6174652d7661726961626c65206d617070696e672077697468206f72646572696e670a2d2d2033292054656d706c61746520756e7265736f6c7665642d746f6b656e20706f6c696379206669656c64730a2d2d20342920457874656e64656420656d61696c206c6f67206d657461646174610a2d2d203529204261636b66696c6c2066726f6d206c6567616379204a534f4e42202b20746f6b656e207363616e6e696e670a0a2d2d20456e737572652067656e6572696320757064617465645f617420747269676765722066756e6374696f6e206578697374730a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e68616e646c655f757064617465645f617428290a52455455524e5320545249474745522041532024240a424547494e0a202020204e45572e757064617465645f6174203d206e6f7728293b0a2020202052455455524e204e45573b0a454e443b0a2424204c414e475541474520706c706773716c0000020c2d2d2043616e6f6e6963616c20746f6b656e206b6579206e6f726d616c697a65720a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e6e6f726d616c697a655f656d61696c5f746f6b656e5f6b6579287261775f6b65792054455854290a52455455524e5320544558540a4c414e47554147452053514c0a494d4d555441424c450a41532024240a2020202053454c454354205452494d28424f544820275f272046524f4d0a20202020202020207265676578705f7265706c616365280a2020202020202020202020207265676578705f7265706c616365280a202020202020202020202020202020205550504552280a20202020202020202020202020202020202020207265676578705f7265706c61636528434f414c45534345287261775f6b65792c202727292c2027285b612d7a302d395d29285b412d5a5d29272c20275c315f5c32272c20276727290a20202020202020202020202020202020292c0a20202020202020202020202020202020275b5e412d5a302d395f5d2b272c0a20202020202020202020202020202020275f272c0a202020202020202020202020202020202767270a202020202020202020202020292c0a202020202020202020202020275f2b272c0a202020202020202020202020275f272c0a2020202020202020202020202767270a2020202020202020290a20202020293b0a2424000003962d2d20476c6f62616c207661726961626c652072656769737472790a435245415445205441424c45204946204e4f5420455849535453207075626c69632e656d61696c5f7661726961626c655f726567697374727920280a202020206b65792054455854205052494d415259204b45592c0a202020206c6162656c2054455854204e4f54204e554c4c2c0a202020206465736372697074696f6e20544558542c0a2020202076616c75655f747970652054455854204e4f54204e554c4c2044454641554c542027737472696e67272c0a2020202072656e6465725f706f6c6963792054455854204e4f54204e554c4c2044454641554c542027657363617065645f74657874272c0a2020202073616d706c655f76616c756520544558542c0a2020202069735f73656e73697469766520424f4f4c45414e204e4f54204e554c4c2044454641554c542066616c73652c0a2020202069735f61637469766520424f4f4c45414e204e4f54204e554c4c2044454641554c5420747275652c0a20202020637265617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c542074696d657a6f6e652827757463273a3a746578742c206e6f77282929204e4f54204e554c4c2c0a20202020757064617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c542074696d657a6f6e652827757463273a3a746578742c206e6f77282929204e4f54204e554c4c2c0a20202020434f4e53545241494e5420656d61696c5f7661726961626c655f72656769737472795f6b65795f666f726d617420434845434b20286b6579207e20275e5b412d5a302d395f5d2b2427292c0a20202020434f4e53545241494e5420656d61696c5f7661726961626c655f72656769737472795f76616c75655f747970655f636865636b20434845434b20280a202020202020202076616c75655f7479706520494e202827737472696e67272c20276e756d626572272c2027626f6f6c65616e272c202764617465272c202775726c272c202768746d6c27290a20202020292c0a20202020434f4e53545241494e5420656d61696c5f7661726961626c655f72656769737472795f72656e6465725f706f6c6963795f636865636b20434845434b20280a202020202020202072656e6465725f706f6c69637920494e202827657363617065645f74657874272c20277261775f68746d6c272c202775726c27290a20202020290a290000007243524541544520494e444558204946204e4f5420455849535453206964785f656d61696c5f7661726961626c655f72656769737472795f69735f6163746976650a202020204f4e207075626c69632e656d61696c5f7661726961626c655f7265676973747279202869735f616374697665290000034a2d2d2054656d706c6174652d7661726961626c65206d617070696e670a435245415445205441424c45204946204e4f5420455849535453207075626c69632e656d61696c5f74656d706c6174655f7661726961626c657320280a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0a2020202074656d706c6174655f736c75672054455854204e4f54204e554c4c205245464552454e434553207075626c69632e656d61696c5f74656d706c6174657328736c756729204f4e2044454c45544520434153434144452c0a202020207661726961626c655f6b65792054455854204e4f54204e554c4c205245464552454e434553207075626c69632e656d61696c5f7661726961626c655f7265676973747279286b657929204f4e2044454c4554452052455354524943542c0a2020202069735f726571756972656420424f4f4c45414e204e4f54204e554c4c2044454641554c542066616c73652c0a20202020696e73657274696f6e5f6f7264657220494e54204e4f54204e554c4c2044454641554c5420302c0a2020202069735f656e61626c656420424f4f4c45414e204e4f54204e554c4c2044454641554c5420747275652c0a20202020736f757263655f746f6b656e20544558542c0a20202020637265617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c542074696d657a6f6e652827757463273a3a746578742c206e6f77282929204e4f54204e554c4c2c0a20202020757064617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c542074696d657a6f6e652827757463273a3a746578742c206e6f77282929204e4f54204e554c4c2c0a20202020434f4e53545241494e5420656d61696c5f74656d706c6174655f7661726961626c65735f756e6971756520554e49515545202874656d706c6174655f736c75672c207661726961626c655f6b6579292c0a20202020434f4e53545241494e5420656d61696c5f74656d706c6174655f7661726961626c65735f696e73657274696f6e5f6f726465725f636865636b20434845434b2028696e73657274696f6e5f6f72646572203e3d2030290a290000008e43524541544520494e444558204946204e4f5420455849535453206964785f656d61696c5f74656d706c6174655f7661726961626c65735f74656d706c6174655f6f726465720a202020204f4e207075626c69632e656d61696c5f74656d706c6174655f7661726961626c6573202874656d706c6174655f736c75672c20696e73657274696f6e5f6f72646572290000007a43524541544520494e444558204946204e4f5420455849535453206964785f656d61696c5f74656d706c6174655f7661726961626c65735f7661726961626c655f6b65790a202020204f4e207075626c69632e656d61696c5f74656d706c6174655f7661726961626c657320287661726961626c655f6b657929000001e82d2d20457874656e6420656d61696c2074656d706c61746520706f6c696379206d657461646174610a414c544552205441424c4520494620455849535453207075626c69632e656d61696c5f74656d706c617465730a2020202041444420434f4c554d4e204946204e4f54204558495354532069735f617574685f637269746963616c20424f4f4c45414e204e4f54204e554c4c2044454641554c542066616c73652c0a2020202041444420434f4c554d4e204946204e4f542045584953545320756e7265736f6c7665645f706f6c6963792054455854204e4f54204e554c4c2044454641554c542027626c6f636b272c0a2020202041444420434f4c554d4e204946204e4f542045584953545320616c6c6f776c6973745f66616c6c6261636b5f6b65797320544558545b5d204e4f54204e554c4c2044454641554c542041525241595b5d3a3a544558545b5d2c0a2020202041444420434f4c554d4e204946204e4f5420455849535453206e6f726d616c697a6174696f6e5f76657273696f6e20494e54204e4f54204e554c4c2044454641554c5420312c0a2020202041444420434f4c554d4e204946204e4f542045584953545320656469746f725f736368656d61204a534f4e42204e4f54204e554c4c2044454641554c5420277b7d273a3a6a736f6e620000016b444f2024240a424547494e0a202020204946204e4f542045584953545320280a202020202020202053454c45435420310a202020202020202046524f4d2070675f636f6e73747261696e740a2020202020202020574845524520636f6e6e616d65203d2027656d61696c5f74656d706c617465735f756e7265736f6c7665645f706f6c6963795f636865636b270a2020202029205448454e0a2020202020202020414c544552205441424c45207075626c69632e656d61696c5f74656d706c617465730a20202020202020202020202041444420434f4e53545241494e5420656d61696c5f74656d706c617465735f756e7265736f6c7665645f706f6c6963795f636865636b0a202020202020202020202020434845434b2028756e7265736f6c7665645f706f6c69637920494e202827626c6f636b272c20277761726e272c2027616c6c6f776c6973745f66616c6c6261636b2729293b0a20202020454e442049463b0a454e442024240000031f2d2d20457874656e6420656d61696c5f6c6f677320666f72206f62736572766162696c69747920616e6420706f6c6963792065766964656e63650a414c544552205441424c4520494620455849535453207075626c69632e656d61696c5f6c6f67730a2020202041444420434f4c554d4e204946204e4f54204558495354532074656d706c6174655f736c756720544558542c0a2020202041444420434f4c554d4e204946204e4f5420455849535453207375626a65637420544558542c0a2020202041444420434f4c554d4e204946204e4f542045584953545320636f6e74656e745f736e617073686f7420544558542c0a2020202041444420434f4c554d4e204946204e4f5420455849535453206572726f725f64657461696c7320544558542c0a2020202041444420434f4c554d4e204946204e4f542045584953545320726563697069656e745f656d61696c20544558542c0a2020202041444420434f4c554d4e204946204e4f54204558495354532072656e6465725f7761726e696e6773204a534f4e42204e4f54204e554c4c2044454641554c5420275b5d273a3a6a736f6e622c0a2020202041444420434f4c554d4e204946204e4f542045584953545320756e7265736f6c7665645f746f6b656e73204a534f4e42204e4f54204e554c4c2044454641554c5420275b5d273a3a6a736f6e622c0a2020202041444420434f4c554d4e204946204e4f542045584953545320626c6f636b656420424f4f4c45414e204e4f54204e554c4c2044454641554c542066616c73652c0a2020202041444420434f4c554d4e204946204e4f5420455849535453206465677261646174696f6e5f61637469766520424f4f4c45414e204e4f54204e554c4c2044454641554c542066616c73652c0a2020202041444420434f4c554d4e204946204e4f5420455849535453206465677261646174696f6e5f726561736f6e20544558542c0a2020202041444420434f4c554d4e204946204e4f5420455849535453206d6f646520544558542c0a2020202041444420434f4c554d4e204946204e4f54204558495354532074656d706c6174655f76657273696f6e20494e5400000141444f2024240a424547494e0a202020204946204e4f542045584953545320280a202020202020202053454c45435420310a202020202020202046524f4d2070675f636f6e73747261696e740a2020202020202020574845524520636f6e6e616d65203d2027656d61696c5f6c6f67735f6d6f64655f636865636b270a2020202029205448454e0a2020202020202020414c544552205441424c45207075626c69632e656d61696c5f6c6f67730a20202020202020202020202041444420434f4e53545241494e5420656d61696c5f6c6f67735f6d6f64655f636865636b0a202020202020202020202020434845434b20286d6f6465204953204e554c4c204f52206d6f646520494e20282773656e64272c202774657374272c202762726f777365725f707265766965772729293b0a20202020454e442049463b0a454e4420242400000072555044415445207075626c69632e656d61696c5f6c6f67730a53455420726563697069656e745f656d61696c203d20726563697069656e740a574845524520726563697069656e745f656d61696c204953204e554c4c0a2020414e4420726563697069656e74204953204e4f54204e554c4c0000007643524541544520494e444558204946204e4f5420455849535453206964785f656d61696c5f6c6f67735f74656d706c6174655f736c75675f73656e745f61740a202020204f4e207075626c69632e656d61696c5f6c6f6773202874656d706c6174655f736c75672c2073656e745f61742044455343290000005f43524541544520494e444558204946204e4f5420455849535453206964785f656d61696c5f6c6f67735f6d6f64655f626c6f636b65640a202020204f4e207075626c69632e656d61696c5f6c6f677320286d6f64652c20626c6f636b656429000000762d2d20757064617465645f61742074726967676572730a44524f50205452494747455220494620455849535453207365745f757064617465645f61745f656d61696c5f7661726961626c655f7265676973747279204f4e207075626c69632e656d61696c5f7661726961626c655f7265676973747279000000ab4352454154452054524947474552207365745f757064617465645f61745f656d61696c5f7661726961626c655f72656769737472790a202020204245464f524520555044415445204f4e207075626c69632e656d61696c5f7661726961626c655f72656769737472790a20202020464f52204541434820524f570a20202020455845435554452050524f434544555245207075626c69632e68616e646c655f757064617465645f617428290000006144524f50205452494747455220494620455849535453207365745f757064617465645f61745f656d61696c5f74656d706c6174655f7661726961626c6573204f4e207075626c69632e656d61696c5f74656d706c6174655f7661726961626c6573000000ad4352454154452054524947474552207365745f757064617465645f61745f656d61696c5f74656d706c6174655f7661726961626c65730a202020204245464f524520555044415445204f4e207075626c69632e656d61696c5f74656d706c6174655f7661726961626c65730a20202020464f52204541434820524f570a20202020455845435554452050524f434544555245207075626c69632e68616e646c655f757064617465645f617428290000004b2d2d20524c530a414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f726567697374727920454e41424c4520524f57204c4556454c20534543555249545900000045414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174655f7661726961626c657320454e41424c4520524f57204c4556454c2053454355524954590000006344524f5020504f4c49435920494620455849535453202241646d696e732063616e206d616e61676520656d61696c207661726961626c6520726567697374727922204f4e207075626c69632e656d61696c5f7661726961626c655f7265676973747279000001bb43524541544520504f4c494359202241646d696e732063616e206d616e61676520656d61696c207661726961626c65207265676973747279220a4f4e207075626c69632e656d61696c5f7661726961626c655f72656769737472790a464f5220414c4c0a544f2061757468656e746963617465640a5553494e4720280a2020202045584953545320280a202020202020202053454c45435420310a202020202020202046524f4d207075626c69632e70726f66696c65730a20202020202020205748455245206964203d20617574682e75696428290a20202020202020202020414e44202869735f61646d696e203d2074727565204f522069735f737570657261646d696e203d2074727565290a20202020290a290a5749544820434845434b20280a2020202045584953545320280a202020202020202053454c45435420310a202020202020202046524f4d207075626c69632e70726f66696c65730a20202020202020205748455245206964203d20617574682e75696428290a20202020202020202020414e44202869735f61646d696e203d2074727565204f522069735f737570657261646d696e203d2074727565290a20202020290a290000006544524f5020504f4c49435920494620455849535453202241646d696e732063616e206d616e61676520656d61696c2074656d706c617465207661726961626c657322204f4e207075626c69632e656d61696c5f74656d706c6174655f7661726961626c6573000001bd43524541544520504f4c494359202241646d696e732063616e206d616e61676520656d61696c2074656d706c617465207661726961626c6573220a4f4e207075626c69632e656d61696c5f74656d706c6174655f7661726961626c65730a464f5220414c4c0a544f2061757468656e746963617465640a5553494e4720280a2020202045584953545320280a202020202020202053454c45435420310a202020202020202046524f4d207075626c69632e70726f66696c65730a20202020202020205748455245206964203d20617574682e75696428290a20202020202020202020414e44202869735f61646d696e203d2074727565204f522069735f737570657261646d696e203d2074727565290a20202020290a290a5749544820434845434b20280a2020202045584953545320280a202020202020202053454c45435420310a202020202020202046524f4d207075626c69632e70726f66696c65730a20202020202020205748455245206964203d20617574682e75696428290a20202020202020202020414e44202869735f61646d696e203d2074727565204f522069735f737570657261646d696e203d2074727565290a20202020290a2900000e282d2d20536565642063616e6f6e6963616c20676c6f62616c207661726961626c65730a494e5345525420494e544f207075626c69632e656d61696c5f7661726961626c655f726567697374727920280a202020206b65792c0a202020206c6162656c2c0a202020206465736372697074696f6e2c0a2020202076616c75655f747970652c0a2020202072656e6465725f706f6c6963792c0a2020202073616d706c655f76616c75652c0a2020202069735f73656e7369746976652c0a2020202069735f6163746976650a290a56414c5545530a2020202028274e414d45272c2027416420536f796164272c2027416cc4b163c4b1206164c4b12076657961206b756c6c616ec4b163c4b1206164c4b1272c2027737472696e67272c2027657363617065645f74657874272c202741686d65742059c4b16c6d617a272c2066616c73652c2074727565292c0a202020202827454d41494c272c2027452d706f737461272c2027416cc4b163c4b120652d706f73746120616472657369272c2027737472696e67272c2027657363617065645f74657874272c202761686d6574406578616d706c652e636f6d272c20747275652c2074727565292c0a2020202028275355424a454354272c20274b6f6e75272c202744657374656b2074616c65626920766579612062696c646972696d206b6f6e757375272c2027737472696e67272c2027657363617065645f74657874272c2027536970617269c59f696e697a20616cc4b16e64c4b1272c2066616c73652c2074727565292c0a2020202028274f524445525f4944272c2027536970617269c59f204e6f272c20274bc4b1736120736970617269c59f207265666572616e73206b6f6475272c2027737472696e67272c2027657363617065645f74657874272c20274131423243334434272c2066616c73652c2074727565292c0a2020202028274f524445525f44415445272c2027536970617269c59f20546172696869272c2027536970617269c59f206f6c75c59f747572756c6d6120746172696869272c202764617465272c2027657363617065645f74657874272c2027313420c59e7562617420323032362031363a3435272c2066616c73652c2074727565292c0a2020202028274954454d535f4c495354272c2027c39c72c3bc6e204c6973746573692048544d4c272c2027536970617269c59f20c3bc72c3bc6e20736174c4b1726c6172c4b16ec4b16e2048544d4c2069c3a7657269c49f69272c202768746d6c272c20277261775f68746d6c272c20273c74723e3c74643e4272617669746120c39c72c3bc6e2078313c2f74643e3c2f74723e272c2066616c73652c2074727565292c0a202020202827535542544f54414c272c202741726120546f706c616d272c2027536970617269c59f2061726120746f706c616dc4b1272c20276e756d626572272c2027657363617065645f74657874272c2027313439392e3930272c2066616c73652c2074727565292c0a202020202827444953434f554e54272c2027c4b06e646972696d272c2027536970617269c59f20696e646972696d207475746172c4b1272c20276e756d626572272c2027657363617065645f74657874272c20273130302e3030272c2066616c73652c2074727565292c0a202020202827544158272c20274b4456272c20275665726769207475746172c4b1272c20276e756d626572272c2027657363617065645f74657874272c20273234392e3938272c2066616c73652c2074727565292c0a202020202827544f54414c272c2027546f706c616d272c2027536970617269c59f20746f706c616d207475746172c4b1272c20276e756d626572272c2027657363617065645f74657874272c2027313634392e3838272c2066616c73652c2074727565292c0a2020202028275348495050494e475f41444452455353272c20275465736c696d617420416472657369272c2027536970617269c59f207465736c696d617420616472657369272c2027737472696e67272c2027657363617065645f74657874272c20274b6164c4b16bc3b6792c20c4b07374616e62756c272c2066616c73652c2074727565292c0a2020202028275041594d454e545f4d4554484f44272c2027c39664656d652059c3b66e74656d69272c20274b72656469206b617274c4b1207665796120686176616c652062696c67697369272c2027737472696e67272c2027657363617065645f74657874272c20274b72656469204b617274c4b1272c2066616c73652c2074727565292c0a20202020282742414e4b5f44455441494c53272c202742616e6b612042696c67696c6572692048544d4c272c2027486176616c652061c3a7c4b16b6c616d61206b75747573752069c3a7657269c49f69272c202768746d6c272c20277261775f68746d6c272c20273c6469763e4942414e3a20545230302e2e2e3c2f6469763e272c2066616c73652c2074727565292c0a2020202028275348495050494e475f434f4d50414e59272c20274b6172676f204669726d6173c4b1272c202747c3b66e646572696d206669726d6173c4b1206164c4b1272c2027737472696e67272c2027657363617065645f74657874272c20275975727469c3a769204b6172676f272c2066616c73652c2074727565292c0a202020202827545241434b494e475f4e554d424552272c202754616b6970204e756d61726173c4b1272c20274b6172676f2074616b6970206b6f6475272c2027737472696e67272c2027657363617065645f74657874272c202754524b2d313233343536272c2066616c73652c2074727565292c0a20202020282743414e43454c4c4154494f4e5f524541534f4e272c2027c4b07074616c204e6564656e69272c2027536970617269c59f20697074616c2061c3a7c4b16b6c616d6173c4b1272c2027737472696e67272c2027657363617065645f74657874272c202753746f6b20736f72756e75272c2066616c73652c2074727565292c0a20202020282742524f575345525f4c494e4b272c20275461726179c4b163c4b164612041c3a7204261c49f6c616e74c4b173c4b1272c2027452d706f7374616ec4b16e207765622067c3b672c3bc6ec3bc6dc3bc206261c49f6c616e74c4b173c4b1272c202775726c272c202775726c272c202768747470733a2f2f7777772e627261766974612e636f6d2e74722f2e2e2e272c2066616c73652c2074727565292c0a2020202028275449434b45545f4944272c202744657374656b2054616c6570204e6f272c202744657374656b2074616c656269207265666572616e73206b6f6475272c2027737472696e67272c2027657363617065645f74657874272c2027544b543132333435272c2066616c73652c2074727565292c0a20202020282743415445474f5259272c202744657374656b204b617465676f72697369272c202744657374656b2074616c656269206b617465676f7269206164c4b1272c2027737472696e67272c2027657363617065645f74657874272c2027c39664656d65272c2066616c73652c2074727565292c0a202020202827555345525f4d455353414745272c20274b756c6c616ec4b163c4b1204d6573616ac4b1272c20274b756c6c616ec4b163c4b12064657374656b206d6573616ac4b1272c2027737472696e67272c2027657363617065645f74657874272c2027536970617269c59f696d206e65726564653f272c2066616c73652c2074727565292c0a20202020282741444d494e5f5245504c59272c202741646d696e2059616ec4b174c4b1272c202744657374656b20656b6962692079616ec4b174c4b1272c2027737472696e67272c2027657363617065645f74657874272c202754616c6562696e697a2069c59f6c656d6520616cc4b16e64c4b12e272c2066616c73652c2074727565292c0a202020202827434f4e4649524d4154494f4e5f55524c272c2027446fc49f72756c616d61204c696e6b69272c20274175746820646fc49f72756c616d6120766579612073c4b166c4b1726c616d61206261c49f6c616e74c4b173c4b1272c202775726c272c202775726c272c202768747470733a2f2f7777772e627261766974612e636f6d2e74722f617574683f2e2e2e272c20747275652c2074727565292c0a202020202827554e5355425343524942455f55524c272c202741626f6e656c696b74656e20c387c4b16bc4b1c59f204c696e6b69272c202742696c646972696d2061626f6e656c69c49f696e64656e20c3a7c4b16bc4b1c59f206261c49f6c616e74c4b173c4b1272c202775726c272c202775726c272c202768747470733a2f2f7777772e627261766974612e636f6d2e74722f756e737562736372696265272c2066616c73652c2074727565292c0a202020202827534954455f55524c272c2027536974652055524c272c202753697465206bc3b66b20616472657369272c202775726c272c202775726c272c202768747470733a2f2f7777772e627261766974612e636f6d2e7472272c2066616c73652c2074727565290a4f4e20434f4e464c49435420286b6579290a444f205550444154450a5345540a202020206c6162656c203d204558434c554445442e6c6162656c2c0a202020206465736372697074696f6e203d204558434c554445442e6465736372697074696f6e2c0a2020202076616c75655f74797065203d204558434c554445442e76616c75655f747970652c0a2020202072656e6465725f706f6c696379203d204558434c554445442e72656e6465725f706f6c6963792c0a2020202073616d706c655f76616c7565203d204558434c554445442e73616d706c655f76616c75652c0a2020202069735f73656e736974697665203d204558434c554445442e69735f73656e7369746976652c0a2020202069735f616374697665203d20747275652c0a20202020757064617465645f6174203d2074696d657a6f6e652827757463273a3a746578742c206e6f7728292900000a302d2d204261636b66696c6c206d617070696e672066726f6d206c656761637920736f75726365730a57495448206a736f6e5f746f6b656e7320415320280a2020202053454c4543540a2020202020202020742e736c75672041532074656d706c6174655f736c75672c0a20202020202020206a2e7261775f746f6b656e2c0a20202020202020206a2e6f72643a3a494e5420415320736f72745f6f726465720a2020202046524f4d207075626c69632e656d61696c5f74656d706c6174657320740a202020204a4f494e204c41544552414c206a736f6e625f61727261795f656c656d656e74735f7465787428434f414c4553434528742e7661726961626c65732c20275b5d273a3a6a736f6e6229292057495448204f5244494e414c495459204153206a287261775f746f6b656e2c206f7264290a20202020202020204f4e20747275650a292c0a7375626a6563745f746f6b656e7320415320280a2020202053454c4543540a2020202020202020742e736c75672041532074656d706c6174655f736c75672c0a2020202020202020286d295b315d204153207261775f746f6b656e2c0a202020202020202031303030202b20524f575f4e554d4245522829204f5645522028504152544954494f4e20425920742e736c7567204f5244455220425920286d295b315d2920415320736f72745f6f726465720a2020202046524f4d207075626c69632e656d61696c5f74656d706c6174657320740a202020204a4f494e204c41544552414c207265676578705f6d61746368657328434f414c4553434528742e7375626a6563742c202727292c20275c7b5c7b5c732a5c2e3f285b412d5a612d7a302d395f5d2b295c732a5c7d5c7d272c2027672729206d0a20202020202020204f4e20747275650a292c0a68746d6c5f746f6b656e7320415320280a2020202053454c4543540a2020202020202020742e736c75672041532074656d706c6174655f736c75672c0a2020202020202020286d295b315d204153207261775f746f6b656e2c0a202020202020202032303030202b20524f575f4e554d4245522829204f5645522028504152544954494f4e20425920742e736c7567204f5244455220425920286d295b315d2920415320736f72745f6f726465720a2020202046524f4d207075626c69632e656d61696c5f74656d706c6174657320740a202020204a4f494e204c41544552414c207265676578705f6d61746368657328434f414c4553434528742e636f6e74656e745f68746d6c2c202727292c20275c7b5c7b5c732a5c2e3f285b412d5a612d7a302d395f5d2b295c732a5c7d5c7d272c2027672729206d0a20202020202020204f4e20747275650a292c0a616c6c5f746f6b656e7320415320280a2020202053454c454354202a2046524f4d206a736f6e5f746f6b656e730a20202020554e494f4e20414c4c0a2020202053454c454354202a2046524f4d207375626a6563745f746f6b656e730a20202020554e494f4e20414c4c0a2020202053454c454354202a2046524f4d2068746d6c5f746f6b656e730a292c0a6e6f726d616c697a656420415320280a2020202053454c4543540a202020202020202074656d706c6174655f736c75672c0a20202020202020207261775f746f6b656e2c0a20202020202020207075626c69632e6e6f726d616c697a655f656d61696c5f746f6b656e5f6b6579287261775f746f6b656e29204153207661726961626c655f6b65792c0a2020202020202020736f72745f6f726465720a2020202046524f4d20616c6c5f746f6b656e730a292c0a646564757020415320280a2020202053454c4543540a202020202020202074656d706c6174655f736c75672c0a20202020202020207661726961626c655f6b65792c0a20202020202020204d494e28736f72745f6f726465722920415320696e73657274696f6e5f6f726465720a2020202046524f4d206e6f726d616c697a65640a202020205748455245207661726961626c655f6b6579203c3e2027270a2020202047524f55502042592074656d706c6174655f736c75672c207661726961626c655f6b65790a290a494e5345525420494e544f207075626c69632e656d61696c5f7661726961626c655f726567697374727920280a202020206b65792c0a202020206c6162656c2c0a202020206465736372697074696f6e2c0a2020202076616c75655f747970652c0a2020202072656e6465725f706f6c6963792c0a2020202073616d706c655f76616c75652c0a2020202069735f73656e7369746976652c0a2020202069735f6163746976650a290a53454c4543540a20202020642e7661726961626c655f6b65792c0a20202020494e4954434150285245504c414345284c4f57455228642e7661726961626c655f6b6579292c20275f272c202720272929204153206c6162656c2c0a20202020274175746f2d646973636f76657265642066726f6d206578697374696e672074656d706c6174657320647572696e6720756e696669636174696f6e206d6967726174696f6e2e27204153206465736372697074696f6e2c0a20202020434153450a20202020202020205748454e20642e7661726961626c655f6b657920494e202827535542544f54414c272c2027444953434f554e54272c2027544158272c2027544f54414c2729205448454e20276e756d626572270a20202020202020205748454e20642e7661726961626c655f6b6579204c494b4520272555524c27204f5220642e7661726961626c655f6b6579203d2027534954455f55524c27204f5220642e7661726961626c655f6b6579203d202742524f575345525f4c494e4b27205448454e202775726c270a2020202020202020454c53452027737472696e67270a20202020454e442041532076616c75655f747970652c0a20202020434153450a20202020202020205748454e20642e7661726961626c655f6b657920494e2028274954454d535f4c495354272c202742414e4b5f44455441494c532729205448454e20277261775f68746d6c270a20202020202020205748454e20642e7661726961626c655f6b6579204c494b4520272555524c27204f5220642e7661726961626c655f6b6579203d2027534954455f55524c27204f5220642e7661726961626c655f6b6579203d202742524f575345525f4c494e4b27205448454e202775726c270a2020202020202020454c53452027657363617065645f74657874270a20202020454e442041532072656e6465725f706f6c6963792c0a202020204e554c4c2c0a2020202066616c73652c0a20202020747275650a46524f4d20280a2020202053454c4543542044495354494e4354207661726961626c655f6b65790a2020202046524f4d2064656475700a2920640a5748455245204e4f542045584953545320280a2020202053454c45435420310a2020202046524f4d207075626c69632e656d61696c5f7661726961626c655f726567697374727920720a20202020574845524520722e6b6579203d20642e7661726961626c655f6b65790a290a4f4e20434f4e464c49435420286b65792920444f204e4f5448494e470000084957495448206a736f6e5f746f6b656e7320415320280a2020202053454c4543540a2020202020202020742e736c75672041532074656d706c6174655f736c75672c0a20202020202020206a2e7261775f746f6b656e2c0a20202020202020206a2e6f72643a3a494e5420415320736f72745f6f726465720a2020202046524f4d207075626c69632e656d61696c5f74656d706c6174657320740a202020204a4f494e204c41544552414c206a736f6e625f61727261795f656c656d656e74735f7465787428434f414c4553434528742e7661726961626c65732c20275b5d273a3a6a736f6e6229292057495448204f5244494e414c495459204153206a287261775f746f6b656e2c206f7264290a20202020202020204f4e20747275650a292c0a7375626a6563745f746f6b656e7320415320280a2020202053454c4543540a2020202020202020742e736c75672041532074656d706c6174655f736c75672c0a2020202020202020286d295b315d204153207261775f746f6b656e2c0a202020202020202031303030202b20524f575f4e554d4245522829204f5645522028504152544954494f4e20425920742e736c7567204f5244455220425920286d295b315d2920415320736f72745f6f726465720a2020202046524f4d207075626c69632e656d61696c5f74656d706c6174657320740a202020204a4f494e204c41544552414c207265676578705f6d61746368657328434f414c4553434528742e7375626a6563742c202727292c20275c7b5c7b5c732a5c2e3f285b412d5a612d7a302d395f5d2b295c732a5c7d5c7d272c2027672729206d0a20202020202020204f4e20747275650a292c0a68746d6c5f746f6b656e7320415320280a2020202053454c4543540a2020202020202020742e736c75672041532074656d706c6174655f736c75672c0a2020202020202020286d295b315d204153207261775f746f6b656e2c0a202020202020202032303030202b20524f575f4e554d4245522829204f5645522028504152544954494f4e20425920742e736c7567204f5244455220425920286d295b315d2920415320736f72745f6f726465720a2020202046524f4d207075626c69632e656d61696c5f74656d706c6174657320740a202020204a4f494e204c41544552414c207265676578705f6d61746368657328434f414c4553434528742e636f6e74656e745f68746d6c2c202727292c20275c7b5c7b5c732a5c2e3f285b412d5a612d7a302d395f5d2b295c732a5c7d5c7d272c2027672729206d0a20202020202020204f4e20747275650a292c0a616c6c5f746f6b656e7320415320280a2020202053454c454354202a2046524f4d206a736f6e5f746f6b656e730a20202020554e494f4e20414c4c0a2020202053454c454354202a2046524f4d207375626a6563745f746f6b656e730a20202020554e494f4e20414c4c0a2020202053454c454354202a2046524f4d2068746d6c5f746f6b656e730a292c0a6e6f726d616c697a656420415320280a2020202053454c4543540a202020202020202074656d706c6174655f736c75672c0a20202020202020207261775f746f6b656e2c0a20202020202020207075626c69632e6e6f726d616c697a655f656d61696c5f746f6b656e5f6b6579287261775f746f6b656e29204153207661726961626c655f6b65792c0a2020202020202020736f72745f6f726465720a2020202046524f4d20616c6c5f746f6b656e730a292c0a646564757020415320280a2020202053454c4543540a202020202020202074656d706c6174655f736c75672c0a20202020202020207661726961626c655f6b65792c0a20202020202020204d494e28736f72745f6f726465722920415320696e73657274696f6e5f6f726465722c0a20202020202020204d494e287261775f746f6b656e2920415320736f757263655f746f6b656e0a2020202046524f4d206e6f726d616c697a65640a202020205748455245207661726961626c655f6b6579203c3e2027270a2020202047524f55502042592074656d706c6174655f736c75672c207661726961626c655f6b65790a290a494e5345525420494e544f207075626c69632e656d61696c5f74656d706c6174655f7661726961626c657320280a2020202074656d706c6174655f736c75672c0a202020207661726961626c655f6b65792c0a2020202069735f72657175697265642c0a20202020696e73657274696f6e5f6f726465722c0a2020202069735f656e61626c65642c0a20202020736f757263655f746f6b656e0a290a53454c4543540a20202020642e74656d706c6174655f736c75672c0a20202020642e7661726961626c655f6b65792c0a2020202066616c73652c0a20202020642e696e73657274696f6e5f6f726465722c0a20202020747275652c0a20202020642e736f757263655f746f6b656e0a46524f4d20646564757020640a4f4e20434f4e464c494354202874656d706c6174655f736c75672c207661726961626c655f6b6579290a444f205550444154450a5345540a20202020696e73657274696f6e5f6f72646572203d204c45415354287075626c69632e656d61696c5f74656d706c6174655f7661726961626c65732e696e73657274696f6e5f6f726465722c204558434c554445442e696e73657274696f6e5f6f72646572292c0a2020202069735f656e61626c6564203d20747275652c0a20202020736f757263655f746f6b656e203d20434f414c45534345287075626c69632e656d61696c5f74656d706c6174655f7661726961626c65732e736f757263655f746f6b656e2c204558434c554445442e736f757263655f746f6b656e292c0a20202020757064617465645f6174203d2074696d657a6f6e652827757463273a3a746578742c206e6f77282929000001df2d2d20417574682d637269746963616c2074656d706c61746520706f6c6963792064656661756c74730a555044415445207075626c69632e656d61696c5f74656d706c617465730a5345540a2020202069735f617574685f637269746963616c203d20747275652c0a20202020756e7265736f6c7665645f706f6c696379203d2027616c6c6f776c6973745f66616c6c6261636b272c0a20202020616c6c6f776c6973745f66616c6c6261636b5f6b657973203d2041525241595b0a202020202020202027434f4e4649524d4154494f4e5f55524c272c0a20202020202020202742524f575345525f4c494e4b272c0a202020202020202027554e5355425343524942455f55524c272c0a202020202020202027534954455f55524c272c0a2020202020202020274e414d45272c0a202020202020202027454d41494c270a202020205d3a3a544558545b5d2c0a202020206e6f726d616c697a6174696f6e5f76657273696f6e203d204752454154455354286e6f726d616c697a6174696f6e5f76657273696f6e2c2031290a574845524520736c756720494e20280a2020202027636f6e6669726d5f7369676e7570272c0a2020202027636f6e6669726d2d7369676e7570272c0a202020202772657365745f70617373776f7264270a29"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 24"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 0"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 0"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"UPDATE 0"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260214192627_email_templates_standardized_content.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"BEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"WITH payload (\n  slug,\n  name,\n  subject,\n  variables,\n  title,\n  body,\n  cta_label,\n  cta_href,\n  meta1,\n  meta2,\n  meta3,\n  meta_align\n) AS (\n  VALUES\n    (\n      'confirm_signup',\n      'Hesap Dorulama',\n      'E-posta Adresinizi Dorulayn ',\n      '[\"CONFIRMATION_URL\"]'::jsonb,\n      'Hesabnz Dorulayn',\n      'Bravita hesabnz gvenle kullanmak iin e-posta dorulama admn tamamlayn.',\n      'E-postam Dorula',\n      '{{CONFIRMATION_URL}}',\n      'Dorulama balants gvenlik nedeniyle snrl sreyle geerlidir.',\n      NULL,\n      NULL,\n      'center'\n    ),\n    (\n      'reset_password',\n      'ifre Sfrlama',\n      'ifre Sfrlama Talebiniz ',\n      '[\"CONFIRMATION_URL\"]'::jsonb,\n      'ifrenizi Yenileyin',\n      'Hesabnz iin bir ifre sfrlama talebi aldk. Devam etmek iin aadaki butonu kullann.',\n      'ifremi Sfrla',\n      '{{CONFIRMATION_URL}}',\n      'Bu ilem size ait deilse bu e-postay gvenle grmezden gelebilirsiniz.',\n      NULL,\n      NULL,\n      'center'\n    ),\n    (\n      'password_changed',\n      'ifre Deitirildi',\n      'ifreniz Baaryla Gncellendi ',\n      '[\"SITE_URL\"]'::jsonb,\n      'ifreniz Deitirildi',\n      'Hesabnzn ifresi baaryla gncellendi. Bu ilem size ait deilse ltfen hemen destek ekibimizle iletiime gein.',\n      'Hesabma Git',\n      '{{SITE_URL}}',\n      'Gvenliiniz iin dzenli olarak gl ve benzersiz ifreler kullann.',\n      NULL,\n      NULL,\n      'center'\n    ),\n    (\n      'welcome_template',\n      'Ho Geldiniz',\n      'Bravita''ya Ho Geldiniz ',\n      '[\"NAME\",\"SITE_URL\",\"UNSUBSCRIBE_URL\",\"BROWSER_LINK\"]'::jsonb,\n      'Ho Geldiniz {{NAME}}!',\n      'Bravita ailesine katldnz iin mutluyuz. Yeni koleksiyonlar, kampanyalar ve zel ierikler sizi bekliyor.',\n      'Alverie Bala',\n      '{{SITE_URL}}',\n      'E-posta tercihlerinizi gncellemek iin \u003ca href=\"{{UNSUBSCRIBE_URL}}\" style=\"color:#ea580c;text-decoration:none;font-weight:700;\"\u003etklayn\u003c/a\u003e.',\n      NULL,\n      NULL,\n      'center'\n    ),\n    (\n      'order_confirmation',\n      'Sipari Onay',\n      'Sipariiniz Alnd  #{{ORDER_ID}}',\n      '[\"ORDER_ID\",\"ORDER_DATE\",\"TOTAL\",\"BROWSER_LINK\"]'::jsonb,\n      'Sipariiniz Alnd',\n      'Sipariinizi baaryla aldk. Hazrlk sreci balad, en ksa srede sizi bilgilendireceiz.',\n      'Sipari Detayn A',\n      '{{BROWSER_LINK}}',\n      '\u003cstrong\u003eSipari No:\u003c/strong\u003e #{{ORDER_ID}}',\n      '\u003cstrong\u003eTarih:\u003c/strong\u003e {{ORDER_DATE}}',\n      '\u003cstrong\u003eToplam:\u003c/strong\u003e {{TOTAL}}',\n      'center'\n    ),\n    (\n      'order_awaiting_payment',\n      'deme Bekleniyor',\n      'Sipariiniz Alnd, deme Bekleniyor  #{{ORDER_ID}}',\n      '[\"ORDER_ID\",\"ORDER_DATE\",\"TOTAL\",\"BROWSER_LINK\"]'::jsonb,\n      'deme Bekleniyor',\n      'Sipariiniz oluturuldu. demeniz onaylandnda sipariiniz hazrlk aamasna geecektir.',\n      'Sipari Durumunu Gr',\n      '{{BROWSER_LINK}}',\n      '\u003cstrong\u003eSipari No:\u003c/strong\u003e #{{ORDER_ID}}',\n      '\u003cstrong\u003eTarih:\u003c/strong\u003e {{ORDER_DATE}}',\n      '\u003cstrong\u003eToplam:\u003c/strong\u003e {{TOTAL}}',\n      'center'\n    ),\n    (\n      'order_processing',\n      'Sipari leniyor',\n      'Sipariiniz leniyor  #{{ORDER_ID}}',\n      '[\"ORDER_ID\",\"BROWSER_LINK\"]'::jsonb,\n      'Sipariiniz leniyor',\n      'Sipariiniz ekiplerimiz tarafndan kontrol ediliyor ve hazrlanma srasna alnyor.',\n      'Sipari Takibini A',\n      '{{BROWSER_LINK}}',\n      '\u003cstrong\u003eSipari No:\u003c/strong\u003e #{{ORDER_ID}}',\n      NULL,\n      NULL,\n      'center'\n    ),\n    (\n      'order_preparing',\n      'Sipari Hazrlanyor',\n      'Sipariiniz Hazrlanyor  #{{ORDER_ID}}',\n      '[\"ORDER_ID\",\"BROWSER_LINK\"]'::jsonb,\n      'Sipariiniz Hazrlanyor',\n      'Harika! Sipariiniz paketleme aamasnda. Kargoya verildiinde sizi hemen bilgilendireceiz.',\n      'Sipari Takibini A',\n      '{{BROWSER_LINK}}',\n      '\u003cstrong\u003eSipari No:\u003c/strong\u003e #{{ORDER_ID}}',\n      NULL,\n      NULL,\n      'center'\n    ),\n    (\n      'order_shipped',\n      'Kargoya Verildi',\n      'Sipariiniz Kargoya Verildi  #{{ORDER_ID}}',\n      '[\"ORDER_ID\",\"SHIPPING_COMPANY\",\"TRACKING_NUMBER\",\"BROWSER_LINK\"]'::jsonb,\n      'Sipariiniz Yolda',\n      'Sipariiniz kargoya teslim edildi. Aadaki bilgilerle gnderinizi takip edebilirsiniz.',\n      'Gnderi Takibini A',\n      '{{BROWSER_LINK}}',\n      '\u003cstrong\u003eSipari No:\u003c/strong\u003e #{{ORDER_ID}}',\n      '\u003cstrong\u003eKargo Firmas:\u003c/strong\u003e {{SHIPPING_COMPANY}}',\n      '\u003cstrong\u003eTakip No:\u003c/strong\u003e {{TRACKING_NUMBER}}',\n      'center'\n    ),\n    (\n      'order_delivered',\n      'Teslim Edildi',\n      'Sipariiniz Teslim Edildi  #{{ORDER_ID}}',\n      '[\"ORDER_ID\",\"BROWSER_LINK\"]'::jsonb,\n      'Sipariiniz Teslim Edildi',\n      'Sipariiniz baaryla teslim edildi. Bravita''y tercih ettiiniz iin teekkr ederiz.',\n      'Sipari Gemiini A',\n      '{{BROWSER_LINK}}',\n      '\u003cstrong\u003eSipari No:\u003c/strong\u003e #{{ORDER_ID}}',\n      NULL,\n      NULL,\n      'center'\n    ),\n    (\n      'order_cancelled',\n      'Sipari ptal Edildi',\n      'Sipariiniz ptal Edildi  #{{ORDER_ID}}',\n      '[\"ORDER_ID\",\"CANCELLATION_REASON\",\"BROWSER_LINK\"]'::jsonb,\n      'Sipariiniz ptal Edildi',\n      'Sipariiniz iptal edildi. Detaylar aada bulabilirsiniz.',\n      'Sipari Detayn A',\n      '{{BROWSER_LINK}}',\n      '\u003cstrong\u003eSipari No:\u003c/strong\u003e #{{ORDER_ID}}',\n      '\u003cstrong\u003eptal Nedeni:\u003c/strong\u003e {{CANCELLATION_REASON}}',\n      NULL,\n      'center'\n    ),\n    (\n      'support_ticket',\n      'Destek Talebi Alnd',\n      'Destek Talebiniz Alnd  #{{TICKET_ID}}',\n      '[\"NAME\",\"SUBJECT\",\"TICKET_ID\",\"BROWSER_LINK\"]'::jsonb,\n      'Destek Talebiniz Alnd',\n      'Merhaba {{NAME}}, talebiniz baaryla kaydedildi. Ekibimiz en ksa srede sizinle iletiime geecektir.',\n      'Talep Detayn A',\n      '{{BROWSER_LINK}}',\n      '\u003cstrong\u003eTalep No:\u003c/strong\u003e #{{TICKET_ID}}',\n      '\u003cstrong\u003eKonu:\u003c/strong\u003e {{SUBJECT}}',\n      NULL,\n      'center'\n    ),\n    (\n      'support_ticket_replied',\n      'Destek Yant',\n      'Destek Talebinize Yant Geldi  #{{TICKET_ID}}',\n      '[\"TICKET_ID\",\"USER_MESSAGE\",\"ADMIN_REPLY\",\"BROWSER_LINK\"]'::jsonb,\n      'Destek Talebiniz Yantland',\n      'Talebiniz iin ekibimiz bir yant paylat.',\n      'Talep Detayn A',\n      '{{BROWSER_LINK}}',\n      '\u003cstrong\u003eTalep No:\u003c/strong\u003e #{{TICKET_ID}}',\n      '\u003cstrong\u003eMesajnz:\u003c/strong\u003e {{USER_MESSAGE}}',\n      '\u003cstrong\u003eYantmz:\u003c/strong\u003e {{ADMIN_REPLY}}',\n      'left'\n    ),\n    (\n      'support_ticket_closed',\n      'Destek Talebi Kapatld',\n      'Destek Talebiniz zmlendi  #{{TICKET_ID}}',\n      '[\"TICKET_ID\",\"ADMIN_REPLY\",\"BROWSER_LINK\"]'::jsonb,\n      'Destek Talebiniz zmlendi',\n      'Talebiniz zmlendi ve kapatld. Ksa bir zet aadadr.',\n      'Talep Gemiini A',\n      '{{BROWSER_LINK}}',\n      '\u003cstrong\u003eTalep No:\u003c/strong\u003e #{{TICKET_ID}}',\n      '\u003cstrong\u003eSon Yant:\u003c/strong\u003e {{ADMIN_REPLY}}',\n      NULL,\n      'left'\n    )\n)\nUPDATE public.email_templates et\nSET\n  name = p.name,\n  subject = p.subject,\n  variables = p.variables,\n  content_html = format(\n    $tpl$\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"tr\"\u003e\n\u003chead\u003e\n  \u003cmeta charset=\"UTF-8\" /\u003e\n  \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /\u003e\n  \u003cstyle\u003e\n    .brv-msg-title { margin:0 0 14px; color:#0f172a; font-size:32px; line-height:1.2; font-weight:800; text-align:center; }\n    .brv-msg-text { margin:0 0 16px; color:#374151; font-size:16px; line-height:1.7; text-align:center; }\n    .brv-msg-box { margin:22px auto; padding:16px 18px; border:1px solid #fde7d8; background:#fff8f1; border-radius:14px; max-width:520px; }\n    .brv-msg-meta { margin:0; color:#7c2d12; font-size:14px; line-height:1.7; }\n    .brv-msg-btn-wrap { text-align:center; margin-top:24px; }\n    .brv-msg-btn { display:inline-block; padding:12px 22px; border-radius:999px; background:#ea580c; color:#ffffff !important; text-decoration:none; font-weight:700; font-size:14px; }\n  \u003c/style\u003e\n\u003c/head\u003e\n\u003cbody style=\"margin:0;padding:0;\"\u003e\n  \u003ch1 class=\"brv-msg-title\"\u003e%s\u003c/h1\u003e\n  \u003cp class=\"brv-msg-text\"\u003e%s\u003c/p\u003e\n  %s\n  \u003cdiv class=\"brv-msg-box\" style=\"%s\"\u003e\n    %s\n    %s\n    %s\n  \u003c/div\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n$tpl$,\n    p.title,\n    p.body,\n    CASE\n      WHEN p.cta_label IS NULL OR p.cta_href IS NULL THEN ''\n      ELSE format('\u003cdiv class=\"brv-msg-btn-wrap\"\u003e\u003ca href=\"%s\" class=\"brv-msg-btn\"\u003e%s\u003c/a\u003e\u003c/div\u003e', p.cta_href, p.cta_label)\n    END,\n    CASE WHEN p.meta_align = 'left' THEN 'text-align:left;' ELSE 'text-align:center;' END,\n    CASE WHEN p.meta1 IS NULL THEN '' ELSE format('\u003cp class=\"brv-msg-meta\"\u003e%s\u003c/p\u003e', p.meta1) END,\n    CASE WHEN p.meta2 IS NULL THEN '' ELSE format('\u003cp class=\"brv-msg-meta\" style=\"margin-top:10px;\"\u003e%s\u003c/p\u003e', p.meta2) END,\n    CASE WHEN p.meta3 IS NULL THEN '' ELSE format('\u003cp class=\"brv-msg-meta\" style=\"margin-top:10px;\"\u003e%s\u003c/p\u003e', p.meta3) END\n  ),\n  updated_at = timezone('utc'::text, now())\nFROM payload p\nWHERE et.slug = p.slug","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260214192627"},{"text":"email_templates_standardized_content"},{"binary":"000000010000000000000019000000030000000100000005424547494e0000241557495448207061796c6f616420280a2020736c75672c0a20206e616d652c0a20207375626a6563742c0a20207661726961626c65732c0a20207469746c652c0a2020626f64792c0a20206374615f6c6162656c2c0a20206374615f687265662c0a20206d657461312c0a20206d657461322c0a20206d657461332c0a20206d6574615f616c69676e0a2920415320280a202056414c5545530a20202020280a20202020202027636f6e6669726d5f7369676e7570272c0a20202020202027486573617020446fc49f72756c616d61272c0a20202020202027452d706f737461204164726573696e697a6920446fc49f72756c6179c4b16e20f09f9490272c0a202020202020275b22434f4e4649524d4154494f4e5f55524c225d273a3a6a736f6e622c0a202020202020274865736162c4b16ec4b17ac4b120446fc49f72756c6179c4b16e272c0a2020202020202742726176697461206865736162c4b16ec4b17ac4b12067c3bc76656e6c65206b756c6c616e6d616b2069c3a7696e20652d706f73746120646fc49f72756c616d61206164c4b16dc4b16ec4b12074616d616d6c6179c4b16e2e272c0a20202020202027452d706f7374616dc4b120446fc49f72756c61272c0a202020202020277b7b434f4e4649524d4154494f4e5f55524c7d7d272c0a20202020202027446fc49f72756c616d61206261c49f6c616e74c4b173c4b12067c3bc76656e6c696b206e6564656e69796c652073c4b16ec4b1726cc4b12073c3bc7265796c65206765c3a765726c696469722e272c0a2020202020204e554c4c2c0a2020202020204e554c4c2c0a2020202020202763656e746572270a20202020292c0a20202020280a2020202020202772657365745f70617373776f7264272c0a20202020202027c59e696672652053c4b166c4b1726c616d61272c0a20202020202027c59e696672652053c4b166c4b1726c616d612054616c6562696e697a20f09f9490272c0a202020202020275b22434f4e4649524d4154494f4e5f55524c225d273a3a6a736f6e622c0a20202020202027c59e696672656e697a692059656e696c6579696e272c0a202020202020274865736162c4b16ec4b17a2069c3a7696e2062697220c59f696672652073c4b166c4b1726c616d612074616c65626920616c64c4b16b2e20446576616d2065746d656b2069c3a7696e2061c59f61c49fc4b164616b69206275746f6e75206b756c6c616ec4b16e2e272c0a20202020202027c59e696672656d692053c4b166c4b1726c61272c0a202020202020277b7b434f4e4649524d4154494f4e5f55524c7d7d272c0a2020202020202742752069c59f6c656d2073697a6520616974206465c49f696c736520627520652d706f73746179c4b12067c3bc76656e6c652067c3b6726d657a64656e2067656c6562696c697273696e697a2e272c0a2020202020204e554c4c2c0a2020202020204e554c4c2c0a2020202020202763656e746572270a20202020292c0a20202020280a2020202020202770617373776f72645f6368616e676564272c0a20202020202027c59e69667265204465c49f69c59f746972696c6469272c0a20202020202027c59e696672656e697a204261c59f6172c4b1796c612047c3bc6e63656c6c656e646920f09f9490272c0a202020202020275b22534954455f55524c225d273a3a6a736f6e622c0a20202020202027c59e696672656e697a204465c49f69c59f746972696c6469272c0a202020202020274865736162c4b16ec4b17ac4b16e20c59f696672657369206261c59f6172c4b1796c612067c3bc6e63656c6c656e64692e2042752069c59f6c656d2073697a6520616974206465c49f696c7365206cc3bc7466656e2068656d656e2064657374656b20656b6962696d697a6c6520696c657469c59f696d65206765c3a7696e2e272c0a202020202020274865736162c4b16d6120476974272c0a202020202020277b7b534954455f55524c7d7d272c0a2020202020202747c3bc76656e6c69c49f696e697a2069c3a7696e2064c3bc7a656e6c69206f6c6172616b2067c3bcc3a76cc3bc2076652062656e7a657273697a20c59f696672656c6572206b756c6c616ec4b16e2e272c0a2020202020204e554c4c2c0a2020202020204e554c4c2c0a2020202020202763656e746572270a20202020292c0a20202020280a2020202020202777656c636f6d655f74656d706c617465272c0a20202020202027486fc59f2047656c64696e697a272c0a20202020202027427261766974612727796120486fc59f2047656c64696e697a20f09f8e89272c0a202020202020275b224e414d45222c22534954455f55524c222c22554e5355425343524942455f55524c222c2242524f575345525f4c494e4b225d273a3a6a736f6e622c0a20202020202027486fc59f2047656c64696e697a207b7b4e414d457d7d21272c0a20202020202027427261766974612061696c6573696e65206b6174c4b16c64c4b1c49fc4b16ec4b17a2069c3a7696e206d75746c7579757a2e2059656e69206b6f6c656b7369796f6e6c61722c206b616d70616e79616c617220766520c3b67a656c2069c3a76572696b6c65722073697a692062656b6c69796f722e272c0a20202020202027416cc4b1c59f76657269c59f65204261c59f6c61272c0a202020202020277b7b534954455f55524c7d7d272c0a20202020202027452d706f737461207465726369686c6572696e697a692067c3bc6e63656c6c656d656b2069c3a7696e203c6120687265663d227b7b554e5355425343524942455f55524c7d7d22207374796c653d22636f6c6f723a236561353830633b746578742d6465636f726174696f6e3a6e6f6e653b666f6e742d7765696768743a3730303b223e74c4b16b6c6179c4b16e3c2f613e2e272c0a2020202020204e554c4c2c0a2020202020204e554c4c2c0a2020202020202763656e746572270a20202020292c0a20202020280a202020202020276f726465725f636f6e6669726d6174696f6e272c0a20202020202027536970617269c59f204f6e6179c4b1272c0a20202020202027536970617269c59f696e697a20416cc4b16e64c4b120f09fa7be20237b7b4f524445525f49447d7d272c0a202020202020275b224f524445525f4944222c224f524445525f44415445222c22544f54414c222c2242524f575345525f4c494e4b225d273a3a6a736f6e622c0a20202020202027536970617269c59f696e697a20416cc4b16e64c4b1272c0a20202020202027536970617269c59f696e697a69206261c59f6172c4b1796c6120616c64c4b16b2e2048617ac4b1726cc4b16b2073c3bc72656369206261c59f6c6164c4b12c20656e206bc4b173612073c3bc726564652073697a692062696c67696c656e646972656365c49f697a2e272c0a20202020202027536970617269c59f204465746179c4b16ec4b12041c3a7272c0a202020202020277b7b42524f575345525f4c494e4b7d7d272c0a202020202020273c7374726f6e673e536970617269c59f204e6f3a3c2f7374726f6e673e20237b7b4f524445525f49447d7d272c0a202020202020273c7374726f6e673e54617269683a3c2f7374726f6e673e207b7b4f524445525f444154457d7d272c0a202020202020273c7374726f6e673e546f706c616d3a3c2f7374726f6e673e20e282ba7b7b544f54414c7d7d272c0a2020202020202763656e746572270a20202020292c0a20202020280a202020202020276f726465725f6177616974696e675f7061796d656e74272c0a20202020202027c39664656d652042656b6c656e69796f72272c0a20202020202027536970617269c59f696e697a20416cc4b16e64c4b12c20c39664656d652042656b6c656e69796f7220f09f92b320237b7b4f524445525f49447d7d272c0a202020202020275b224f524445525f4944222c224f524445525f44415445222c22544f54414c222c2242524f575345525f4c494e4b225d273a3a6a736f6e622c0a20202020202027c39664656d652042656b6c656e69796f72272c0a20202020202027536970617269c59f696e697a206f6c75c59f747572756c64752e20c39664656d656e697a206f6e61796c616e64c4b1c49fc4b16e646120736970617269c59f696e697a2068617ac4b1726cc4b16b2061c59f616d6173c4b16e61206765c3a76563656b7469722e272c0a20202020202027536970617269c59f20447572756d756e752047c3b672272c0a202020202020277b7b42524f575345525f4c494e4b7d7d272c0a202020202020273c7374726f6e673e536970617269c59f204e6f3a3c2f7374726f6e673e20237b7b4f524445525f49447d7d272c0a202020202020273c7374726f6e673e54617269683a3c2f7374726f6e673e207b7b4f524445525f444154457d7d272c0a202020202020273c7374726f6e673e546f706c616d3a3c2f7374726f6e673e20e282ba7b7b544f54414c7d7d272c0a2020202020202763656e746572270a20202020292c0a20202020280a202020202020276f726465725f70726f63657373696e67272c0a20202020202027536970617269c59f20c4b0c59f6c656e69796f72272c0a20202020202027536970617269c59f696e697a20c4b0c59f6c656e69796f7220e29a99efb88f20237b7b4f524445525f49447d7d272c0a202020202020275b224f524445525f4944222c2242524f575345525f4c494e4b225d273a3a6a736f6e622c0a20202020202027536970617269c59f696e697a20c4b0c59f6c656e69796f72272c0a20202020202027536970617269c59f696e697a20656b69706c6572696d697a207461726166c4b16e64616e206b6f6e74726f6c206564696c69796f722076652068617ac4b1726c616e6d612073c4b1726173c4b16e6120616cc4b16ec4b1796f722e272c0a20202020202027536970617269c59f2054616b6962696e692041c3a7272c0a202020202020277b7b42524f575345525f4c494e4b7d7d272c0a202020202020273c7374726f6e673e536970617269c59f204e6f3a3c2f7374726f6e673e20237b7b4f524445525f49447d7d272c0a2020202020204e554c4c2c0a2020202020204e554c4c2c0a2020202020202763656e746572270a20202020292c0a20202020280a202020202020276f726465725f707265706172696e67272c0a20202020202027536970617269c59f2048617ac4b1726c616ec4b1796f72272c0a20202020202027536970617269c59f696e697a2048617ac4b1726c616ec4b1796f7220f09f93a620237b7b4f524445525f49447d7d272c0a202020202020275b224f524445525f4944222c2242524f575345525f4c494e4b225d273a3a6a736f6e622c0a20202020202027536970617269c59f696e697a2048617ac4b1726c616ec4b1796f72272c0a20202020202027486172696b612120536970617269c59f696e697a2070616b65746c656d652061c59f616d6173c4b16e64612e204b6172676f796120766572696c6469c49f696e64652073697a692068656d656e2062696c67696c656e646972656365c49f697a2e272c0a20202020202027536970617269c59f2054616b6962696e692041c3a7272c0a202020202020277b7b42524f575345525f4c494e4b7d7d272c0a202020202020273c7374726f6e673e536970617269c59f204e6f3a3c2f7374726f6e673e20237b7b4f524445525f49447d7d272c0a2020202020204e554c4c2c0a2020202020204e554c4c2c0a2020202020202763656e746572270a20202020292c0a20202020280a202020202020276f726465725f73686970706564272c0a202020202020274b6172676f796120566572696c6469272c0a20202020202027536970617269c59f696e697a204b6172676f796120566572696c646920f09f9a9a20237b7b4f524445525f49447d7d272c0a202020202020275b224f524445525f4944222c225348495050494e475f434f4d50414e59222c22545241434b494e475f4e554d424552222c2242524f575345525f4c494e4b225d273a3a6a736f6e622c0a20202020202027536970617269c59f696e697a20596f6c6461272c0a20202020202027536970617269c59f696e697a206b6172676f7961207465736c696d206564696c64692e2041c59f61c49fc4b164616b692062696c67696c65726c652067c3b66e646572696e697a692074616b69702065646562696c697273696e697a2e272c0a2020202020202747c3b66e646572692054616b6962696e692041c3a7272c0a202020202020277b7b42524f575345525f4c494e4b7d7d272c0a202020202020273c7374726f6e673e536970617269c59f204e6f3a3c2f7374726f6e673e20237b7b4f524445525f49447d7d272c0a202020202020273c7374726f6e673e4b6172676f204669726d6173c4b13a3c2f7374726f6e673e207b7b5348495050494e475f434f4d50414e597d7d272c0a202020202020273c7374726f6e673e54616b6970204e6f3a3c2f7374726f6e673e207b7b545241434b494e475f4e554d4245527d7d272c0a2020202020202763656e746572270a20202020292c0a20202020280a202020202020276f726465725f64656c697665726564272c0a202020202020275465736c696d204564696c6469272c0a20202020202027536970617269c59f696e697a205465736c696d204564696c646920f09f8e8120237b7b4f524445525f49447d7d272c0a202020202020275b224f524445525f4944222c2242524f575345525f4c494e4b225d273a3a6a736f6e622c0a20202020202027536970617269c59f696e697a205465736c696d204564696c6469272c0a20202020202027536970617269c59f696e697a206261c59f6172c4b1796c61207465736c696d206564696c64692e2042726176697461272779c4b1207465726369682065747469c49f696e697a2069c3a7696e207465c59f656b6bc3bc722065646572697a2e272c0a20202020202027536970617269c59f204765c3a76d69c59f696e692041c3a7272c0a202020202020277b7b42524f575345525f4c494e4b7d7d272c0a202020202020273c7374726f6e673e536970617269c59f204e6f3a3c2f7374726f6e673e20237b7b4f524445525f49447d7d272c0a2020202020204e554c4c2c0a2020202020204e554c4c2c0a2020202020202763656e746572270a20202020292c0a20202020280a202020202020276f726465725f63616e63656c6c6564272c0a20202020202027536970617269c59f20c4b07074616c204564696c6469272c0a20202020202027536970617269c59f696e697a20c4b07074616c204564696c646920e29d8c20237b7b4f524445525f49447d7d272c0a202020202020275b224f524445525f4944222c2243414e43454c4c4154494f4e5f524541534f4e222c2242524f575345525f4c494e4b225d273a3a6a736f6e622c0a20202020202027536970617269c59f696e697a20c4b07074616c204564696c6469272c0a20202020202027536970617269c59f696e697a20697074616c206564696c64692e2044657461796c6172c4b12061c59f61c49fc4b164612062756c6162696c697273696e697a2e272c0a20202020202027536970617269c59f204465746179c4b16ec4b12041c3a7272c0a202020202020277b7b42524f575345525f4c494e4b7d7d272c0a202020202020273c7374726f6e673e536970617269c59f204e6f3a3c2f7374726f6e673e20237b7b4f524445525f49447d7d272c0a202020202020273c7374726f6e673ec4b07074616c204e6564656e693a3c2f7374726f6e673e207b7b43414e43454c4c4154494f4e5f524541534f4e7d7d272c0a2020202020204e554c4c2c0a2020202020202763656e746572270a20202020292c0a20202020280a20202020202027737570706f72745f7469636b6574272c0a2020202020202744657374656b2054616c65626920416cc4b16e64c4b1272c0a2020202020202744657374656b2054616c6562696e697a20416cc4b16e64c4b120f09f8eab20237b7b5449434b45545f49447d7d272c0a202020202020275b224e414d45222c225355424a454354222c225449434b45545f4944222c2242524f575345525f4c494e4b225d273a3a6a736f6e622c0a2020202020202744657374656b2054616c6562696e697a20416cc4b16e64c4b1272c0a202020202020274d657268616261207b7b4e414d457d7d2c2074616c6562696e697a206261c59f6172c4b1796c61206b6179646564696c64692e20456b6962696d697a20656e206bc4b173612073c3bc726564652073697a696e6c6520696c657469c59f696d65206765c3a76563656b7469722e272c0a2020202020202754616c6570204465746179c4b16ec4b12041c3a7272c0a202020202020277b7b42524f575345525f4c494e4b7d7d272c0a202020202020273c7374726f6e673e54616c6570204e6f3a3c2f7374726f6e673e20237b7b5449434b45545f49447d7d272c0a202020202020273c7374726f6e673e4b6f6e753a3c2f7374726f6e673e207b7b5355424a4543547d7d272c0a2020202020204e554c4c2c0a2020202020202763656e746572270a20202020292c0a20202020280a20202020202027737570706f72745f7469636b65745f7265706c696564272c0a2020202020202744657374656b2059616ec4b174c4b1272c0a2020202020202744657374656b2054616c6562696e697a652059616ec4b1742047656c646920f09f92ac20237b7b5449434b45545f49447d7d272c0a202020202020275b225449434b45545f4944222c22555345525f4d455353414745222c2241444d494e5f5245504c59222c2242524f575345525f4c494e4b225d273a3a6a736f6e622c0a2020202020202744657374656b2054616c6562696e697a2059616ec4b1746c616e64c4b1272c0a2020202020202754616c6562696e697a2069c3a7696e20656b6962696d697a206269722079616ec4b174207061796c61c59f74c4b12e272c0a2020202020202754616c6570204465746179c4b16ec4b12041c3a7272c0a202020202020277b7b42524f575345525f4c494e4b7d7d272c0a202020202020273c7374726f6e673e54616c6570204e6f3a3c2f7374726f6e673e20237b7b5449434b45545f49447d7d272c0a202020202020273c7374726f6e673e4d6573616ac4b16ec4b17a3a3c2f7374726f6e673e207b7b555345525f4d4553534147457d7d272c0a202020202020273c7374726f6e673e59616ec4b174c4b16dc4b17a3a3c2f7374726f6e673e207b7b41444d494e5f5245504c597d7d272c0a202020202020276c656674270a20202020292c0a20202020280a20202020202027737570706f72745f7469636b65745f636c6f736564272c0a2020202020202744657374656b2054616c656269204b61706174c4b16c64c4b1272c0a2020202020202744657374656b2054616c6562696e697a20c387c3b67ac3bc6d6c656e646920e29c8520237b7b5449434b45545f49447d7d272c0a202020202020275b225449434b45545f4944222c2241444d494e5f5245504c59222c2242524f575345525f4c494e4b225d273a3a6a736f6e622c0a2020202020202744657374656b2054616c6562696e697a20c387c3b67ac3bc6d6c656e6469272c0a2020202020202754616c6562696e697a20c3a7c3b67ac3bc6d6c656e6469207665206b61706174c4b16c64c4b12e204bc4b173612062697220c3b67a65742061c59f61c49fc4b1646164c4b1722e272c0a2020202020202754616c6570204765c3a76d69c59f696e692041c3a7272c0a202020202020277b7b42524f575345525f4c494e4b7d7d272c0a202020202020273c7374726f6e673e54616c6570204e6f3a3c2f7374726f6e673e20237b7b5449434b45545f49447d7d272c0a202020202020273c7374726f6e673e536f6e2059616ec4b1743a3c2f7374726f6e673e207b7b41444d494e5f5245504c597d7d272c0a2020202020204e554c4c2c0a202020202020276c656674270a20202020290a290a555044415445207075626c69632e656d61696c5f74656d706c617465732065740a5345540a20206e616d65203d20702e6e616d652c0a20207375626a656374203d20702e7375626a6563742c0a20207661726961626c6573203d20702e7661726961626c65732c0a2020636f6e74656e745f68746d6c203d20666f726d6174280a202020202474706c240a3c21444f43545950452068746d6c3e0a3c68746d6c206c616e673d227472223e0a3c686561643e0a20203c6d65746120636861727365743d225554462d3822202f3e0a20203c6d657461206e616d653d2276696577706f72742220636f6e74656e743d2277696474683d6465766963652d77696474682c20696e697469616c2d7363616c653d312e3022202f3e0a20203c7374796c653e0a202020202e6272762d6d73672d7469746c65207b206d617267696e3a30203020313470783b20636f6c6f723a233066313732613b20666f6e742d73697a653a333270783b206c696e652d6865696768743a312e323b20666f6e742d7765696768743a3830303b20746578742d616c69676e3a63656e7465723b207d0a202020202e6272762d6d73672d74657874207b206d617267696e3a30203020313670783b20636f6c6f723a233337343135313b20666f6e742d73697a653a313670783b206c696e652d6865696768743a312e373b20746578742d616c69676e3a63656e7465723b207d0a202020202e6272762d6d73672d626f78207b206d617267696e3a32327078206175746f3b2070616464696e673a3136707820313870783b20626f726465723a31707820736f6c696420236664653764383b206261636b67726f756e643a236666663866313b20626f726465722d7261646975733a313470783b206d61782d77696474683a35323070783b207d0a202020202e6272762d6d73672d6d657461207b206d617267696e3a303b20636f6c6f723a233763326431323b20666f6e742d73697a653a313470783b206c696e652d6865696768743a312e373b207d0a202020202e6272762d6d73672d62746e2d77726170207b20746578742d616c69676e3a63656e7465723b206d617267696e2d746f703a323470783b207d0a202020202e6272762d6d73672d62746e207b20646973706c61793a696e6c696e652d626c6f636b3b2070616464696e673a3132707820323270783b20626f726465722d7261646975733a39393970783b206261636b67726f756e643a236561353830633b20636f6c6f723a236666666666662021696d706f7274616e743b20746578742d6465636f726174696f6e3a6e6f6e653b20666f6e742d7765696768743a3730303b20666f6e742d73697a653a313470783b207d0a20203c2f7374796c653e0a3c2f686561643e0a3c626f6479207374796c653d226d617267696e3a303b70616464696e673a303b223e0a20203c683120636c6173733d226272762d6d73672d7469746c65223e25733c2f68313e0a20203c7020636c6173733d226272762d6d73672d74657874223e25733c2f703e0a202025730a20203c64697620636c6173733d226272762d6d73672d626f7822207374796c653d222573223e0a2020202025730a2020202025730a2020202025730a20203c2f6469763e0a3c2f626f64793e0a3c2f68746d6c3e0a2474706c242c0a20202020702e7469746c652c0a20202020702e626f64792c0a20202020434153450a2020202020205748454e20702e6374615f6c6162656c204953204e554c4c204f5220702e6374615f68726566204953204e554c4c205448454e2027270a202020202020454c534520666f726d617428273c64697620636c6173733d226272762d6d73672d62746e2d77726170223e3c6120687265663d2225732220636c6173733d226272762d6d73672d62746e223e25733c2f613e3c2f6469763e272c20702e6374615f687265662c20702e6374615f6c6162656c290a20202020454e442c0a2020202043415345205748454e20702e6d6574615f616c69676e203d20276c65667427205448454e2027746578742d616c69676e3a6c6566743b2720454c53452027746578742d616c69676e3a63656e7465723b2720454e442c0a2020202043415345205748454e20702e6d65746131204953204e554c4c205448454e20272720454c534520666f726d617428273c7020636c6173733d226272762d6d73672d6d657461223e25733c2f703e272c20702e6d657461312920454e442c0a2020202043415345205748454e20702e6d65746132204953204e554c4c205448454e20272720454c534520666f726d617428273c7020636c6173733d226272762d6d73672d6d65746122207374796c653d226d617267696e2d746f703a313070783b223e25733c2f703e272c20702e6d657461322920454e442c0a2020202043415345205748454e20702e6d65746133204953204e554c4c205448454e20272720454c534520666f726d617428273c7020636c6173733d226272762d6d73672d6d65746122207374796c653d226d617267696e2d746f703a313070783b223e25733c2f703e272c20702e6d657461332920454e440a2020292c0a2020757064617465645f6174203d2074696d657a6f6e652827757463273a3a746578742c206e6f772829290a46524f4d207061796c6f616420700a57484552452065742e736c7567203d20702e736c756700000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"UPDATE 0"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260215000000_database_drift_sync.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Migration to capture manual changes made directly to the remote Supabase database and resolve CI drift.\n-- This aligns the local migration history with the remote source of truth.\n\n-- 1. Table Alignment: Addresses\nALTER TABLE \"public\".\"addresses\" ADD COLUMN IF NOT EXISTS \"district\" TEXT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"addresses\" ALTER COLUMN \"city\" SET DATA TYPE character varying(100) USING \"city\"::character varying(100)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"addresses\" ALTER COLUMN \"postal_code\" SET DATA TYPE character varying(20) USING \"postal_code\"::character varying(20)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"addresses\" ALTER COLUMN \"street\" SET DATA TYPE character varying(500) USING \"street\"::character varying(500)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Table Alignment: Orders\n-- Drop policies depending on status/payment columns to allow type change\nDROP POLICY IF EXISTS \"Users and admins update orders\" ON public.orders","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"orders\" ADD COLUMN IF NOT EXISTS \"shipping_company\" TEXT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"orders\" ADD COLUMN IF NOT EXISTS \"tracking_number\" character varying(100)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Align types with remote\nALTER TABLE \"public\".\"orders\" ALTER COLUMN \"status\" SET DATA TYPE character varying(50) USING \"status\"::character varying(50)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"orders\" ALTER COLUMN \"payment_method\" SET DATA TYPE character varying(50) USING \"payment_method\"::character varying(50)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"orders\" ALTER COLUMN \"payment_status\" SET DATA TYPE character varying(50) USING \"payment_status\"::character varying(50)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Recreate policies for orders\nCREATE POLICY \"Users and admins update orders\" ON public.orders\nFOR UPDATE TO authenticated\nUSING (\n  ((user_id = (SELECT auth.uid())) AND (status = 'pending')) OR \n  (SELECT is_admin_user((SELECT auth.uid())))\n)\nWITH CHECK (\n  ((user_id = (SELECT auth.uid())) AND (status = 'pending')) OR \n  (SELECT is_admin_user((SELECT auth.uid())))\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. Table Alignment: Profiles\n-- Remove columns that don't exist in production to prevent drift\nALTER TABLE \"public\".\"profiles\" DROP COLUMN IF EXISTS \"avatar_url\"","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"profiles\" DROP COLUMN IF EXISTS \"tax_number\"","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"profiles\" DROP COLUMN IF EXISTS \"tax_office\"","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Add columns found in production but missing in some local paths\nALTER TABLE \"public\".\"profiles\" ADD COLUMN IF NOT EXISTS \"oauth_provider\" character varying(50)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"profiles\" ADD COLUMN IF NOT EXISTS \"phone_verified\" boolean DEFAULT false","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"profiles\" ADD COLUMN IF NOT EXISTS \"phone_verified_at\" timestamp without time zone","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"profiles\" ADD COLUMN IF NOT EXISTS \"email_notifications\" boolean DEFAULT true","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"column \"avatar_url\" of relation \"profiles\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":9019,"Routine":"ATExecDropColumn","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"profiles\" ADD COLUMN IF NOT EXISTS \"order_notifications\" boolean DEFAULT true","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
NOTICE (00000): column "avatar_url" of relation "profiles" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"column \"tax_number\" of relation \"profiles\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":9019,"Routine":"ATExecDropColumn","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
NOTICE (00000): column "tax_number" of relation "profiles" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"column \"tax_office\" of relation \"profiles\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":9019,"Routine":"ATExecDropColumn","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
NOTICE (00000): column "tax_office" of relation "profiles" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Align lengths and types\nALTER TABLE \"public\".\"profiles\" ALTER COLUMN \"email\" SET DATA TYPE character varying(255) USING \"email\"::character varying(255)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"profiles\" ALTER COLUMN \"full_name\" SET DATA TYPE character varying(255) USING \"full_name\"::character varying(255)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"profiles\" ALTER COLUMN \"company_name\" SET DATA TYPE character varying(255) USING \"company_name\"::character varying(255)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"email_notifications\" of relation \"profiles\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
NOTICE (42701): column "email_notifications" of relation "profiles" already exists, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"order_notifications\" of relation \"profiles\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
NOTICE (42701): column "order_notifications" of relation "profiles" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"profiles\" ALTER COLUMN \"phone\" SET DATA TYPE character varying(20) USING \"phone\"::character varying(20)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"profiles\" ALTER COLUMN \"user_type\" SET DATA TYPE character varying(50) USING \"user_type\"::character varying(50)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 4. Indices Alignment\nCREATE INDEX IF NOT EXISTS idx_order_status_history_created_by ON public.order_status_history USING btree (created_by)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_order_status_history_order_id ON public.order_status_history USING btree (order_id)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_orders_created_at ON public.orders USING btree (created_at DESC)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_orders_shipping_address_id ON public.orders USING btree (shipping_address_id)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_payment_intents_shipping_address_id ON public.payment_intents USING btree (shipping_address_id)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_payment_manual_review_intent_id ON public.payment_manual_review_queue USING btree (intent_id)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_payment_manual_review_order_id ON public.payment_manual_review_queue USING btree (order_id)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_stock_reservations_product_id ON public.stock_reservations USING btree (product_id)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_support_tickets_order_id ON public.support_tickets USING btree (order_id)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_support_tickets_replied_by ON public.support_tickets USING btree (replied_by)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_support_tickets_user_id ON public.support_tickets USING btree (user_id)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 4.1 Data Alignment: Ensure support_ticket email configuration exists\nINSERT INTO public.email_configs (template_slug, sender_name, sender_email, reply_to, is_active)\nSELECT\n  'support_ticket',\n  'Bravita Destek',\n  'support@bravita.com.tr',\n  'support@bravita.com.tr',\n  true\nWHERE EXISTS (\n  SELECT 1\n  FROM public.email_templates\n  WHERE slug = 'support_ticket'\n)\nAND NOT EXISTS (\n  SELECT 1\n  FROM public.email_configs\n  WHERE template_slug = 'support_ticket'\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 5. Function Alignment (Extracted from drift to match remote state exactly)\n-- These MUST exist before triggers that reference them\nCREATE OR REPLACE FUNCTION public.finalize_reservation(p_id uuid, quantity integer)\n RETURNS void\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\nBEGIN\n  UPDATE products\n  SET reserved_stock = GREATEST(0, reserved_stock - quantity)\n  WHERE id = p_id;\nEND;\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.increment_promo_usage(p_code text)\n RETURNS boolean\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\nDECLARE\n  v_current_usage INT;\n  v_limit INT;\nBEGIN\n  SELECT usage_count, usage_limit INTO v_current_usage, v_limit\n  FROM promo_codes \n  WHERE code ILIKE p_code \n  FOR UPDATE;\n  \n  IF NOT FOUND THEN\n    RETURN FALSE;\n  END IF;\n  \n  IF v_limit IS NOT NULL AND v_current_usage \u003e= v_limit THEN\n    RETURN FALSE;\n  END IF;\n  \n  UPDATE promo_codes \n  SET usage_count = COALESCE(usage_count, 0) + 1 \n  WHERE code ILIKE p_code;\n  \n  RETURN TRUE;\nEND;\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.reserve_stock(p_id uuid, quantity integer)\n RETURNS void\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\nBEGIN\n  UPDATE products\n  SET stock = stock - quantity,\n      reserved_stock = reserved_stock + quantity\n  WHERE id = p_id;\nEND;\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.restore_stock(p_id uuid, quantity integer)\n RETURNS void\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\nBEGIN\n  UPDATE products\n  SET stock = stock + quantity,\n      reserved_stock = GREATEST(0, reserved_stock - quantity)\n  WHERE id = p_id;\nEND;\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.update_orders_updated_at()\n RETURNS trigger\n LANGUAGE plpgsql\n SET search_path TO 'public'\nAS $function$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.update_updated_at_column()\n RETURNS trigger\n LANGUAGE plpgsql\n SET search_path TO 'public'\nAS $function$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.handle_new_user()\n RETURNS trigger\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\nBEGIN\n  INSERT INTO public.profiles (id, email, full_name, user_type)\n  VALUES (\n    NEW.id,\n    NEW.email,\n    COALESCE(NEW.raw_user_meta_data-\u003e\u003e'full_name', NEW.raw_user_meta_data-\u003e\u003e'name'),\n    'individual'\n  )\n  ON CONFLICT (id) DO NOTHING;\n  RETURN NEW;\nEND;\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 6. Trigger Alignment (Ensure clean recreation of triggers that were out of sync)\nDROP TRIGGER IF EXISTS trigger_handle_promo_usage ON public.orders","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TRIGGER trigger_handle_promo_usage AFTER INSERT ON public.orders FOR EACH ROW EXECUTE FUNCTION public.handle_new_order_promo()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP TRIGGER IF EXISTS trigger_manage_inventory ON public.orders","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TRIGGER trigger_manage_inventory AFTER INSERT OR UPDATE ON public.orders FOR EACH ROW EXECUTE FUNCTION public.manage_inventory()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP TRIGGER IF EXISTS trigger_orders_updated_at ON public.orders","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TRIGGER trigger_orders_updated_at BEFORE UPDATE ON public.orders FOR EACH ROW EXECUTE FUNCTION public.update_orders_updated_at()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP TRIGGER IF EXISTS on_auth_user_created ON auth.users","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TRIGGER on_auth_user_created AFTER INSERT ON auth.users FOR EACH ROW EXECUTE FUNCTION public.handle_new_user()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260215000000"},{"text":"database_drift_sync"},{"binary":"0000000100000000000000190000003300000001000001222d2d204d6967726174696f6e20746f2063617074757265206d616e75616c206368616e676573206d616465206469726563746c7920746f207468652072656d6f746520537570616261736520646174616261736520616e64207265736f6c76652043492064726966742e0a2d2d205468697320616c69676e7320746865206c6f63616c206d6967726174696f6e20686973746f72792077697468207468652072656d6f746520736f75726365206f662074727574682e0a0a2d2d20312e205461626c6520416c69676e6d656e743a204164647265737365730a414c544552205441424c4520227075626c6963222e22616464726573736573222041444420434f4c554d4e204946204e4f5420455849535453202264697374726963742220544558540000007e414c544552205441424c4520227075626c6963222e226164647265737365732220414c54455220434f4c554d4e202263697479222053455420444154412054595045206368617261637465722076617279696e672831303029205553494e47202263697479223a3a6368617261637465722076617279696e6728313030290000008a414c544552205441424c4520227075626c6963222e226164647265737365732220414c54455220434f4c554d4e2022706f7374616c5f636f6465222053455420444154412054595045206368617261637465722076617279696e6728323029205553494e472022706f7374616c5f636f6465223a3a6368617261637465722076617279696e672832302900000082414c544552205441424c4520227075626c6963222e226164647265737365732220414c54455220434f4c554d4e2022737472656574222053455420444154412054595045206368617261637465722076617279696e672835303029205553494e472022737472656574223a3a6368617261637465722076617279696e672835303029000000af2d2d20322e205461626c6520416c69676e6d656e743a204f72646572730a2d2d2044726f7020706f6c696369657320646570656e64696e67206f6e207374617475732f7061796d656e7420636f6c756d6e7320746f20616c6c6f772074797065206368616e67650a44524f5020504f4c494359204946204558495354532022557365727320616e642061646d696e7320757064617465206f726465727322204f4e207075626c69632e6f72646572730000004e414c544552205441424c4520227075626c6963222e226f7264657273222041444420434f4c554d4e204946204e4f542045584953545320227368697070696e675f636f6d70616e792220544558540000005f414c544552205441424c4520227075626c6963222e226f7264657273222041444420434f4c554d4e204946204e4f54204558495354532022747261636b696e675f6e756d62657222206368617261637465722076617279696e672831303029000000982d2d20416c69676e20747970657320776974682072656d6f74650a414c544552205441424c4520227075626c6963222e226f72646572732220414c54455220434f4c554d4e2022737461747573222053455420444154412054595045206368617261637465722076617279696e6728353029205553494e472022737461747573223a3a6368617261637465722076617279696e67283530290000008d414c544552205441424c4520227075626c6963222e226f72646572732220414c54455220434f4c554d4e20227061796d656e745f6d6574686f64222053455420444154412054595045206368617261637465722076617279696e6728353029205553494e4720227061796d656e745f6d6574686f64223a3a6368617261637465722076617279696e67283530290000008d414c544552205441424c4520227075626c6963222e226f72646572732220414c54455220434f4c554d4e20227061796d656e745f737461747573222053455420444154412054595045206368617261637465722076617279696e6728353029205553494e4720227061796d656e745f737461747573223a3a6368617261637465722076617279696e6728353029000001722d2d20526563726561746520706f6c696369657320666f72206f72646572730a43524541544520504f4c4943592022557365727320616e642061646d696e7320757064617465206f726465727322204f4e207075626c69632e6f72646572730a464f522055504441544520544f2061757468656e746963617465640a5553494e4720280a20202828757365725f6964203d202853454c45435420617574682e7569642829292920414e442028737461747573203d202770656e64696e67272929204f52200a20202853454c4543542069735f61646d696e5f75736572282853454c45435420617574682e75696428292929290a290a5749544820434845434b20280a20202828757365725f6964203d202853454c45435420617574682e7569642829292920414e442028737461747573203d202770656e64696e67272929204f52200a20202853454c4543542069735f61646d696e5f75736572282853454c45435420617574682e75696428292929290a29000000a42d2d20332e205461626c6520416c69676e6d656e743a2050726f66696c65730a2d2d2052656d6f766520636f6c756d6e73207468617420646f6e277420657869737420696e2070726f64756374696f6e20746f2070726576656e742064726966740a414c544552205441424c4520227075626c6963222e2270726f66696c6573222044524f5020434f4c554d4e2049462045584953545320226176617461725f75726c2200000042414c544552205441424c4520227075626c6963222e2270726f66696c6573222044524f5020434f4c554d4e2049462045584953545320227461785f6e756d6265722200000042414c544552205441424c4520227075626c6963222e2270726f66696c6573222044524f5020434f4c554d4e2049462045584953545320227461785f6f666669636522000000a22d2d2041646420636f6c756d6e7320666f756e6420696e2070726f64756374696f6e20627574206d697373696e6720696e20736f6d65206c6f63616c2070617468730a414c544552205441424c4520227075626c6963222e2270726f66696c6573222041444420434f4c554d4e204946204e4f542045584953545320226f617574685f70726f766964657222206368617261637465722076617279696e67283530290000005f414c544552205441424c4520227075626c6963222e2270726f66696c6573222041444420434f4c554d4e204946204e4f5420455849535453202270686f6e655f76657269666965642220626f6f6c65616e2044454641554c542066616c736500000068414c544552205441424c4520227075626c6963222e2270726f66696c6573222041444420434f4c554d4e204946204e4f5420455849535453202270686f6e655f76657269666965645f6174222074696d657374616d7020776974686f75742074696d65207a6f6e6500000063414c544552205441424c4520227075626c6963222e2270726f66696c6573222041444420434f4c554d4e204946204e4f54204558495354532022656d61696c5f6e6f74696669636174696f6e732220626f6f6c65616e2044454641554c54207472756500000063414c544552205441424c4520227075626c6963222e2270726f66696c6573222041444420434f4c554d4e204946204e4f542045584953545320226f726465725f6e6f74696669636174696f6e732220626f6f6c65616e2044454641554c5420747275650000009a2d2d20416c69676e206c656e6774687320616e642074797065730a414c544552205441424c4520227075626c6963222e2270726f66696c65732220414c54455220434f4c554d4e2022656d61696c222053455420444154412054595045206368617261637465722076617279696e672832353529205553494e472022656d61696c223a3a6368617261637465722076617279696e67283235352900000087414c544552205441424c4520227075626c6963222e2270726f66696c65732220414c54455220434f4c554d4e202266756c6c5f6e616d65222053455420444154412054595045206368617261637465722076617279696e672832353529205553494e47202266756c6c5f6e616d65223a3a6368617261637465722076617279696e6728323535290000008d414c544552205441424c4520227075626c6963222e2270726f66696c65732220414c54455220434f4c554d4e2022636f6d70616e795f6e616d65222053455420444154412054595045206368617261637465722076617279696e672832353529205553494e472022636f6d70616e795f6e616d65223a3a6368617261637465722076617279696e6728323535290000007d414c544552205441424c4520227075626c6963222e2270726f66696c65732220414c54455220434f4c554d4e202270686f6e65222053455420444154412054595045206368617261637465722076617279696e6728323029205553494e47202270686f6e65223a3a6368617261637465722076617279696e672832302900000085414c544552205441424c4520227075626c6963222e2270726f66696c65732220414c54455220434f4c554d4e2022757365725f74797065222053455420444154412054595045206368617261637465722076617279696e6728353029205553494e472022757365725f74797065223a3a6368617261637465722076617279696e67283530290000008e2d2d20342e20496e646963657320416c69676e6d656e740a43524541544520494e444558204946204e4f5420455849535453206964785f6f726465725f7374617475735f686973746f72795f637265617465645f6279204f4e207075626c69632e6f726465725f7374617475735f686973746f7279205553494e472062747265652028637265617465645f6279290000007243524541544520494e444558204946204e4f5420455849535453206964785f6f726465725f7374617475735f686973746f72795f6f726465725f6964204f4e207075626c69632e6f726465725f7374617475735f686973746f7279205553494e4720627472656520286f726465725f6964290000005f43524541544520494e444558204946204e4f5420455849535453206964785f6f72646572735f637265617465645f6174204f4e207075626c69632e6f7264657273205553494e472062747265652028637265617465645f61742044455343290000006c43524541544520494e444558204946204e4f5420455849535453206964785f6f72646572735f7368697070696e675f616464726573735f6964204f4e207075626c69632e6f7264657273205553494e4720627472656520287368697070696e675f616464726573735f6964290000007e43524541544520494e444558204946204e4f5420455849535453206964785f7061796d656e745f696e74656e74735f7368697070696e675f616464726573735f6964204f4e207075626c69632e7061796d656e745f696e74656e7473205553494e4720627472656520287368697070696e675f616464726573735f6964290000007c43524541544520494e444558204946204e4f5420455849535453206964785f7061796d656e745f6d616e75616c5f7265766965775f696e74656e745f6964204f4e207075626c69632e7061796d656e745f6d616e75616c5f7265766965775f7175657565205553494e472062747265652028696e74656e745f6964290000007a43524541544520494e444558204946204e4f5420455849535453206964785f7061796d656e745f6d616e75616c5f7265766965775f6f726465725f6964204f4e207075626c69632e7061796d656e745f6d616e75616c5f7265766965775f7175657565205553494e4720627472656520286f726465725f6964290000007243524541544520494e444558204946204e4f5420455849535453206964785f73746f636b5f7265736572766174696f6e735f70726f647563745f6964204f4e207075626c69632e73746f636b5f7265736572766174696f6e73205553494e47206274726565202870726f647563745f6964290000006843524541544520494e444558204946204e4f5420455849535453206964785f737570706f72745f7469636b6574735f6f726465725f6964204f4e207075626c69632e737570706f72745f7469636b657473205553494e4720627472656520286f726465725f6964290000006c43524541544520494e444558204946204e4f5420455849535453206964785f737570706f72745f7469636b6574735f7265706c6965645f6279204f4e207075626c69632e737570706f72745f7469636b657473205553494e4720627472656520287265706c6965645f6279290000006643524541544520494e444558204946204e4f5420455849535453206964785f737570706f72745f7469636b6574735f757365725f6964204f4e207075626c69632e737570706f72745f7469636b657473205553494e472062747265652028757365725f696429000001d32d2d20342e31204461746120416c69676e6d656e743a20456e7375726520737570706f72745f7469636b657420656d61696c20636f6e66696775726174696f6e206578697374730a494e5345525420494e544f207075626c69632e656d61696c5f636f6e66696773202874656d706c6174655f736c75672c2073656e6465725f6e616d652c2073656e6465725f656d61696c2c207265706c795f746f2c2069735f616374697665290a53454c4543540a202027737570706f72745f7469636b6574272c0a202027427261766974612044657374656b272c0a202027737570706f727440627261766974612e636f6d2e7472272c0a202027737570706f727440627261766974612e636f6d2e7472272c0a2020747275650a57484552452045584953545320280a202053454c45435420310a202046524f4d207075626c69632e656d61696c5f74656d706c617465730a2020574845524520736c7567203d2027737570706f72745f7469636b6574270a290a414e44204e4f542045584953545320280a202053454c45435420310a202046524f4d207075626c69632e656d61696c5f636f6e666967730a202057484552452074656d706c6174655f736c7567203d2027737570706f72745f7469636b6574270a29000001af2d2d20352e2046756e6374696f6e20416c69676e6d656e7420284578747261637465642066726f6d20647269667420746f206d617463682072656d6f74652073746174652065786163746c79290a2d2d205468657365204d555354206578697374206265666f72652074726967676572732074686174207265666572656e6365207468656d0a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e66696e616c697a655f7265736572766174696f6e28705f696420757569642c207175616e7469747920696e7465676572290a2052455455524e5320766f69640a204c414e475541474520706c706773716c0a20534543555249545920444546494e45520a20534554207365617263685f7061746820544f20277075626c6963270a4153202466756e6374696f6e240a424547494e0a20205550444154452070726f64756374730a20205345542072657365727665645f73746f636b203d20475245415445535428302c2072657365727665645f73746f636b202d207175616e74697479290a20205748455245206964203d20705f69643b0a454e443b0a2466756e6374696f6e240000026c435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e696e6372656d656e745f70726f6d6f5f757361676528705f636f64652074657874290a2052455455524e5320626f6f6c65616e0a204c414e475541474520706c706773716c0a20534543555249545920444546494e45520a20534554207365617263685f7061746820544f20277075626c6963270a4153202466756e6374696f6e240a4445434c4152450a2020765f63757272656e745f757361676520494e543b0a2020765f6c696d697420494e543b0a424547494e0a202053454c4543542075736167655f636f756e742c2075736167655f6c696d697420494e544f20765f63757272656e745f75736167652c20765f6c696d69740a202046524f4d2070726f6d6f5f636f646573200a2020574845524520636f646520494c494b4520705f636f6465200a2020464f52205550444154453b0a20200a20204946204e4f5420464f554e44205448454e0a2020202052455455524e2046414c53453b0a2020454e442049463b0a20200a2020494620765f6c696d6974204953204e4f54204e554c4c20414e4420765f63757272656e745f7573616765203e3d20765f6c696d6974205448454e0a2020202052455455524e2046414c53453b0a2020454e442049463b0a20200a20205550444154452070726f6d6f5f636f646573200a20205345542075736167655f636f756e74203d20434f414c455343452875736167655f636f756e742c203029202b2031200a2020574845524520636f646520494c494b4520705f636f64653b0a20200a202052455455524e20545255453b0a454e443b0a2466756e6374696f6e2400000135435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e726573657276655f73746f636b28705f696420757569642c207175616e7469747920696e7465676572290a2052455455524e5320766f69640a204c414e475541474520706c706773716c0a20534543555249545920444546494e45520a20534554207365617263685f7061746820544f20277075626c6963270a4153202466756e6374696f6e240a424547494e0a20205550444154452070726f64756374730a20205345542073746f636b203d2073746f636b202d207175616e746974792c0a20202020202072657365727665645f73746f636b203d2072657365727665645f73746f636b202b207175616e746974790a20205748455245206964203d20705f69643b0a454e443b0a2466756e6374696f6e2400000142435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e726573746f72655f73746f636b28705f696420757569642c207175616e7469747920696e7465676572290a2052455455524e5320766f69640a204c414e475541474520706c706773716c0a20534543555249545920444546494e45520a20534554207365617263685f7061746820544f20277075626c6963270a4153202466756e6374696f6e240a424547494e0a20205550444154452070726f64756374730a20205345542073746f636b203d2073746f636b202b207175616e746974792c0a20202020202072657365727665645f73746f636b203d20475245415445535428302c2072657365727665645f73746f636b202d207175616e74697479290a20205748455245206964203d20705f69643b0a454e443b0a2466756e6374696f6e24000000cc435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e7570646174655f6f72646572735f757064617465645f617428290a2052455455524e5320747269676765720a204c414e475541474520706c706773716c0a20534554207365617263685f7061746820544f20277075626c6963270a4153202466756e6374696f6e240a424547494e0a202020204e45572e757064617465645f6174203d204e4f5728293b0a2020202052455455524e204e45573b0a454e443b0a2466756e6374696f6e24000000cc435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e7570646174655f757064617465645f61745f636f6c756d6e28290a2052455455524e5320747269676765720a204c414e475541474520706c706773716c0a20534554207365617263685f7061746820544f20277075626c6963270a4153202466756e6374696f6e240a424547494e0a202020204e45572e757064617465645f6174203d204e4f5728293b0a2020202052455455524e204e45573b0a454e443b0a2466756e6374696f6e24000001a6435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e68616e646c655f6e65775f7573657228290a2052455455524e5320747269676765720a204c414e475541474520706c706773716c0a20534543555249545920444546494e45520a20534554207365617263685f7061746820544f20277075626c6963270a4153202466756e6374696f6e240a424547494e0a2020494e5345525420494e544f207075626c69632e70726f66696c6573202869642c20656d61696c2c2066756c6c5f6e616d652c20757365725f74797065290a202056414c55455320280a202020204e45572e69642c0a202020204e45572e656d61696c2c0a20202020434f414c45534345284e45572e7261775f757365725f6d6574615f646174612d3e3e2766756c6c5f6e616d65272c204e45572e7261775f757365725f6d6574615f646174612d3e3e276e616d6527292c0a2020202027696e646976696475616c270a2020290a20204f4e20434f4e464c494354202869642920444f204e4f5448494e473b0a202052455455524e204e45573b0a454e443b0a2466756e6374696f6e24000000962d2d20362e205472696767657220416c69676e6d656e742028456e7375726520636c65616e2072656372656174696f6e206f6620747269676765727320746861742077657265206f7574206f662073796e63290a44524f5020545249474745522049462045584953545320747269676765725f68616e646c655f70726f6d6f5f7573616765204f4e207075626c69632e6f726465727300000085435245415445205452494747455220747269676765725f68616e646c655f70726f6d6f5f757361676520414654455220494e53455254204f4e207075626c69632e6f726465727320464f52204541434820524f5720455845435554452046554e4354494f4e207075626c69632e68616e646c655f6e65775f6f726465725f70726f6d6f28290000004044524f5020545249474745522049462045584953545320747269676765725f6d616e6167655f696e76656e746f7279204f4e207075626c69632e6f726465727300000087435245415445205452494747455220747269676765725f6d616e6167655f696e76656e746f727920414654455220494e53455254204f5220555044415445204f4e207075626c69632e6f726465727320464f52204541434820524f5720455845435554452046554e4354494f4e207075626c69632e6d616e6167655f696e76656e746f727928290000004144524f5020545249474745522049462045584953545320747269676765725f6f72646572735f757064617465645f6174204f4e207075626c69632e6f726465727300000087435245415445205452494747455220747269676765725f6f72646572735f757064617465645f6174204245464f524520555044415445204f4e207075626c69632e6f726465727320464f52204541434820524f5720455845435554452046554e4354494f4e207075626c69632e7570646174655f6f72646572735f757064617465645f617428290000003944524f50205452494747455220494620455849535453206f6e5f617574685f757365725f63726561746564204f4e20617574682e7573657273000000754352454154452054524947474552206f6e5f617574685f757365725f6372656174656420414654455220494e53455254204f4e20617574682e757365727320464f52204541434820524f5720455845435554452046554e4354494f4e207075626c69632e68616e646c655f6e65775f757365722829"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 0"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"trigger \"trigger_handle_promo_usage\" for relation \"public.orders\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"trigger \"trigger_manage_inventory\" for relation \"public.orders\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"trigger \"trigger_orders_updated_at\" for relation \"public.orders\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"trigger \"on_auth_user_created\" for relation \"auth.users\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): trigger "trigger_handle_promo_usage" for relation "public.orders" does not exist, skipping
NOTICE (00000): trigger "trigger_manage_inventory" for relation "public.orders" does not exist, skipping
NOTICE (00000): trigger "trigger_orders_updated_at" for relation "public.orders" does not exist, skipping
NOTICE (00000): trigger "on_auth_user_created" for relation "auth.users" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260215000001_email_system_drift_sync.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Reconcile email system drift between remote and local migrations\n-- This migration captures schema differences detected by CI and aligns them with the local unification strategy.\n\n-- 1. Align email_templates table and resolve constraint conflicts\nDO $$\nBEGIN\n    -- Drop the restrictive old check constraint if it exists so we can migrate data\n    ALTER TABLE public.email_templates DROP CONSTRAINT IF EXISTS \"email_templates_unresolved_token_policy_check\";\n\n    -- Align data: 'keep'/'remove' -\u003e 'warn', 'error' -\u003e 'block'\n    IF EXISTS (SELECT 1 FROM information_schema.columns WHERE table_schema = 'public' AND table_name = 'email_templates' AND column_name = 'unresolved_token_policy') THEN\n        UPDATE public.email_templates \n        SET unresolved_token_policy = CASE \n            WHEN unresolved_token_policy IN ('keep', 'remove', 'empty', 'warn') THEN 'warn' \n            WHEN unresolved_token_policy = 'error' THEN 'block'\n            ELSE 'block' \n        END;\n    END IF;\n\n    -- Rename unresolved_token_policy to unresolved_policy\n    IF EXISTS (\n        SELECT 1 FROM information_schema.columns \n        WHERE table_schema = 'public' AND table_name = 'email_templates' AND column_name = 'unresolved_token_policy'\n    ) THEN\n        IF NOT EXISTS (\n            SELECT 1 FROM information_schema.columns \n            WHERE table_schema = 'public' AND table_name = 'email_templates' AND column_name = 'unresolved_policy'\n        ) THEN\n            ALTER TABLE public.email_templates RENAME COLUMN unresolved_token_policy TO unresolved_policy;\n        ELSE\n            -- Both exist, sync and drop\n            UPDATE public.email_templates SET unresolved_policy = unresolved_token_policy;\n            ALTER TABLE public.email_templates DROP COLUMN IF EXISTS unresolved_token_policy;\n        END IF;\n    END IF;\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Align email_variable_registry table\nDO $$\nBEGIN\n    -- Add missing columns from unification plan\n    ALTER TABLE public.email_variable_registry ADD COLUMN IF NOT EXISTS \"label\" TEXT;\n    ALTER TABLE public.email_variable_registry ADD COLUMN IF NOT EXISTS \"value_type\" TEXT DEFAULT 'string';\n    ALTER TABLE public.email_variable_registry ADD COLUMN IF NOT EXISTS \"render_policy\" TEXT DEFAULT 'escaped_text';\n    ALTER TABLE public.email_variable_registry ADD COLUMN IF NOT EXISTS \"is_sensitive\" BOOLEAN DEFAULT false;\n    ALTER TABLE public.email_variable_registry ADD COLUMN IF NOT EXISTS \"is_active\" BOOLEAN DEFAULT true;\n    ALTER TABLE public.email_variable_registry ADD COLUMN IF NOT EXISTS \"sample_value\" TEXT;\n\n    -- Map remote specific columns if they exist\n    IF EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'email_variable_registry' AND column_name = 'example_value') THEN\n        UPDATE public.email_variable_registry SET sample_value = example_value WHERE sample_value IS NULL;\n        ALTER TABLE public.email_variable_registry DROP COLUMN IF EXISTS example_value;\n    END IF;\n\n    IF EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'email_variable_registry' AND column_name = 'is_protected') THEN\n        UPDATE public.email_variable_registry SET is_sensitive = is_protected WHERE is_protected = true;\n        ALTER TABLE public.email_variable_registry DROP COLUMN IF EXISTS is_protected;\n    END IF;\n\n    -- Ensure labels are populated\n    UPDATE public.email_variable_registry SET label = key WHERE label IS NULL;\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. Align email_template_variables table\nDO $$\nBEGIN\n    -- Rename remote unique constraint to match local migration name\n    IF EXISTS (SELECT 1 FROM pg_constraint WHERE conname = 'email_template_variables_template_slug_variable_key_key') THEN\n        ALTER TABLE public.email_template_variables RENAME CONSTRAINT email_template_variables_template_slug_variable_key_key TO email_template_variables_unique;\n    END IF;\n\n    -- Add missing columns from unification plan\n    ALTER TABLE public.email_template_variables ADD COLUMN IF NOT EXISTS \"insertion_order\" INT DEFAULT 0;\n    ALTER TABLE public.email_template_variables ADD COLUMN IF NOT EXISTS \"is_enabled\" BOOLEAN DEFAULT true;\n    ALTER TABLE public.email_template_variables ADD COLUMN IF NOT EXISTS \"source_token\" TEXT;\n\n    -- Map fallback_value (found on remote) to dummy source_token if needed\n    IF EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'email_template_variables' AND column_name = 'fallback_value') THEN\n        ALTER TABLE public.email_template_variables DROP COLUMN IF EXISTS fallback_value;\n    END IF;\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"constraint \"email_templates_unresolved_token_policy_check\" of relation \"email_templates\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"SQL statement \"ALTER TABLE public.email_templates DROP CONSTRAINT IF EXISTS \"email_templates_unresolved_token_policy_check\"\"\nPL/pgSQL function inline_code_block line 4 at SQL statement","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":12655,"Routine":"ATExecDropConstraint","UnknownFields":null}
NOTICE (00000): constraint "email_templates_unresolved_token_policy_check" of relation "email_templates" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 4. Resolve Constraint and Trigger Drift specifically mentioned in CI output\n-- Primary Key Constraint for email_variable_registry\nDO $$\nBEGIN\n    IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname = 'email_variable_registry_pkey') THEN\n        ALTER TABLE \"public\".\"email_variable_registry\" ADD CONSTRAINT \"email_variable_registry_pkey\" PRIMARY KEY (\"key\");\n    END IF;\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Check constraint for unresolved_policy\nALTER TABLE \"public\".\"email_templates\" DROP CONSTRAINT IF EXISTS \"email_templates_unresolved_token_policy_check\"","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"email_templates\" DROP CONSTRAINT IF EXISTS \"email_templates_unresolved_policy_check\"","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"email_templates\" ADD CONSTRAINT \"email_templates_unresolved_policy_check\" \nCHECK (unresolved_policy IN ('block', 'warn', 'allowlist_fallback')) NOT VALID","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"email_templates\" VALIDATE CONSTRAINT \"email_templates_unresolved_policy_check\"","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"label\" of relation \"email_variable_registry\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"SQL statement \"ALTER TABLE public.email_variable_registry ADD COLUMN IF NOT EXISTS \"label\" TEXT\"\nPL/pgSQL function inline_code_block line 4 at SQL statement","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"value_type\" of relation \"email_variable_registry\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"SQL statement \"ALTER TABLE public.email_variable_registry ADD COLUMN IF NOT EXISTS \"value_type\" TEXT DEFAULT 'string'\"\nPL/pgSQL function inline_code_block line 5 at SQL statement","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"render_policy\" of relation \"email_variable_registry\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"SQL statement \"ALTER TABLE public.email_variable_registry ADD COLUMN IF NOT EXISTS \"render_policy\" TEXT DEFAULT 'escaped_text'\"\nPL/pgSQL function inline_code_block line 6 at SQL statement","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
NOTICE (42701): column "label" of relation "email_variable_registry" already exists, skipping
NOTICE (42701): column "value_type" of relation "email_variable_registry" already exists, skipping
NOTICE (42701): column "render_policy" of relation "email_variable_registry" already exists, skipping
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"is_sensitive\" of relation \"email_variable_registry\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"SQL statement \"ALTER TABLE public.email_variable_registry ADD COLUMN IF NOT EXISTS \"is_sensitive\" BOOLEAN DEFAULT false\"\nPL/pgSQL function inline_code_block line 7 at SQL statement","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"is_active\" of relation \"email_variable_registry\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"SQL statement \"ALTER TABLE public.email_variable_registry ADD COLUMN IF NOT EXISTS \"is_active\" BOOLEAN DEFAULT true\"\nPL/pgSQL function inline_code_block line 8 at SQL statement","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Triggers for updated_at\nDROP TRIGGER IF EXISTS set_updated_at_email_variable_registry ON public.email_variable_registry","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"sample_value\" of relation \"email_variable_registry\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"SQL statement \"ALTER TABLE public.email_variable_registry ADD COLUMN IF NOT EXISTS \"sample_value\" TEXT\"\nPL/pgSQL function inline_code_block line 9 at SQL statement","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
NOTICE (42701): column "is_sensitive" of relation "email_variable_registry" already exists, skipping
NOTICE (42701): column "is_active" of relation "email_variable_registry" already exists, skipping
NOTICE (42701): column "sample_value" of relation "email_variable_registry" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TRIGGER set_updated_at_email_variable_registry\n    BEFORE UPDATE ON public.email_variable_registry\n    FOR EACH ROW\n    EXECUTE FUNCTION public.handle_updated_at()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP TRIGGER IF EXISTS set_updated_at_email_template_variables ON public.email_template_variables","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TRIGGER set_updated_at_email_template_variables\n    BEFORE UPDATE ON public.email_template_variables\n    FOR EACH ROW\n    EXECUTE FUNCTION public.handle_updated_at()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260215000001"},{"text":"email_system_drift_sync"},{"binary":"0000000100000000000000190000000c00000001000007272d2d205265636f6e63696c6520656d61696c2073797374656d206472696674206265747765656e2072656d6f746520616e64206c6f63616c206d6967726174696f6e730a2d2d2054686973206d6967726174696f6e20636170747572657320736368656d6120646966666572656e63657320646574656374656420627920434920616e6420616c69676e73207468656d207769746820746865206c6f63616c20756e696669636174696f6e2073747261746567792e0a0a2d2d20312e20416c69676e20656d61696c5f74656d706c61746573207461626c6520616e64207265736f6c766520636f6e73747261696e7420636f6e666c696374730a444f2024240a424547494e0a202020202d2d2044726f7020746865207265737472696374697665206f6c6420636865636b20636f6e73747261696e742069662069742065786973747320736f2077652063616e206d69677261746520646174610a20202020414c544552205441424c45207075626c69632e656d61696c5f74656d706c617465732044524f5020434f4e53545241494e54204946204558495354532022656d61696c5f74656d706c617465735f756e7265736f6c7665645f746f6b656e5f706f6c6963795f636865636b223b0a0a202020202d2d20416c69676e20646174613a20276b656570272f2772656d6f766527202d3e20277761726e272c20276572726f7227202d3e2027626c6f636b270a20202020494620455849535453202853454c45435420312046524f4d20696e666f726d6174696f6e5f736368656d612e636f6c756d6e73205748455245207461626c655f736368656d61203d20277075626c69632720414e44207461626c655f6e616d65203d2027656d61696c5f74656d706c617465732720414e4420636f6c756d6e5f6e616d65203d2027756e7265736f6c7665645f746f6b656e5f706f6c6963792729205448454e0a2020202020202020555044415445207075626c69632e656d61696c5f74656d706c61746573200a202020202020202053455420756e7265736f6c7665645f746f6b656e5f706f6c696379203d2043415345200a2020202020202020202020205748454e20756e7265736f6c7665645f746f6b656e5f706f6c69637920494e2028276b656570272c202772656d6f7665272c2027656d707479272c20277761726e2729205448454e20277761726e27200a2020202020202020202020205748454e20756e7265736f6c7665645f746f6b656e5f706f6c696379203d20276572726f7227205448454e2027626c6f636b270a202020202020202020202020454c53452027626c6f636b27200a2020202020202020454e443b0a20202020454e442049463b0a0a202020202d2d2052656e616d6520756e7265736f6c7665645f746f6b656e5f706f6c69637920746f20756e7265736f6c7665645f706f6c6963790a2020202049462045584953545320280a202020202020202053454c45435420312046524f4d20696e666f726d6174696f6e5f736368656d612e636f6c756d6e73200a20202020202020205748455245207461626c655f736368656d61203d20277075626c69632720414e44207461626c655f6e616d65203d2027656d61696c5f74656d706c617465732720414e4420636f6c756d6e5f6e616d65203d2027756e7265736f6c7665645f746f6b656e5f706f6c696379270a2020202029205448454e0a20202020202020204946204e4f542045584953545320280a20202020202020202020202053454c45435420312046524f4d20696e666f726d6174696f6e5f736368656d612e636f6c756d6e73200a2020202020202020202020205748455245207461626c655f736368656d61203d20277075626c69632720414e44207461626c655f6e616d65203d2027656d61696c5f74656d706c617465732720414e4420636f6c756d6e5f6e616d65203d2027756e7265736f6c7665645f706f6c696379270a202020202020202029205448454e0a202020202020202020202020414c544552205441424c45207075626c69632e656d61696c5f74656d706c617465732052454e414d4520434f4c554d4e20756e7265736f6c7665645f746f6b656e5f706f6c69637920544f20756e7265736f6c7665645f706f6c6963793b0a2020202020202020454c53450a2020202020202020202020202d2d20426f74682065786973742c2073796e6320616e642064726f700a202020202020202020202020555044415445207075626c69632e656d61696c5f74656d706c617465732053455420756e7265736f6c7665645f706f6c696379203d20756e7265736f6c7665645f746f6b656e5f706f6c6963793b0a202020202020202020202020414c544552205441424c45207075626c69632e656d61696c5f74656d706c617465732044524f5020434f4c554d4e2049462045584953545320756e7265736f6c7665645f746f6b656e5f706f6c6963793b0a2020202020202020454e442049463b0a20202020454e442049463b0a454e44202424000006332d2d20322e20416c69676e20656d61696c5f7661726961626c655f7265676973747279207461626c650a444f2024240a424547494e0a202020202d2d20416464206d697373696e6720636f6c756d6e732066726f6d20756e696669636174696f6e20706c616e0a20202020414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f72656769737472792041444420434f4c554d4e204946204e4f542045584953545320226c6162656c2220544558543b0a20202020414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f72656769737472792041444420434f4c554d4e204946204e4f5420455849535453202276616c75655f747970652220544558542044454641554c542027737472696e67273b0a20202020414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f72656769737472792041444420434f4c554d4e204946204e4f5420455849535453202272656e6465725f706f6c6963792220544558542044454641554c542027657363617065645f74657874273b0a20202020414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f72656769737472792041444420434f4c554d4e204946204e4f5420455849535453202269735f73656e7369746976652220424f4f4c45414e2044454641554c542066616c73653b0a20202020414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f72656769737472792041444420434f4c554d4e204946204e4f5420455849535453202269735f6163746976652220424f4f4c45414e2044454641554c5420747275653b0a20202020414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f72656769737472792041444420434f4c554d4e204946204e4f5420455849535453202273616d706c655f76616c75652220544558543b0a0a202020202d2d204d61702072656d6f746520737065636966696320636f6c756d6e7320696620746865792065786973740a20202020494620455849535453202853454c45435420312046524f4d20696e666f726d6174696f6e5f736368656d612e636f6c756d6e73205748455245207461626c655f6e616d65203d2027656d61696c5f7661726961626c655f72656769737472792720414e4420636f6c756d6e5f6e616d65203d20276578616d706c655f76616c75652729205448454e0a2020202020202020555044415445207075626c69632e656d61696c5f7661726961626c655f7265676973747279205345542073616d706c655f76616c7565203d206578616d706c655f76616c75652057484552452073616d706c655f76616c7565204953204e554c4c3b0a2020202020202020414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f72656769737472792044524f5020434f4c554d4e20494620455849535453206578616d706c655f76616c75653b0a20202020454e442049463b0a0a20202020494620455849535453202853454c45435420312046524f4d20696e666f726d6174696f6e5f736368656d612e636f6c756d6e73205748455245207461626c655f6e616d65203d2027656d61696c5f7661726961626c655f72656769737472792720414e4420636f6c756d6e5f6e616d65203d202769735f70726f7465637465642729205448454e0a2020202020202020555044415445207075626c69632e656d61696c5f7661726961626c655f7265676973747279205345542069735f73656e736974697665203d2069735f70726f7465637465642057484552452069735f70726f746563746564203d20747275653b0a2020202020202020414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f72656769737472792044524f5020434f4c554d4e204946204558495354532069735f70726f7465637465643b0a20202020454e442049463b0a0a202020202d2d20456e73757265206c6162656c732061726520706f70756c617465640a20202020555044415445207075626c69632e656d61696c5f7661726961626c655f726567697374727920534554206c6162656c203d206b6579205748455245206c6162656c204953204e554c4c3b0a454e44202424000004532d2d20332e20416c69676e20656d61696c5f74656d706c6174655f7661726961626c6573207461626c650a444f2024240a424547494e0a202020202d2d2052656e616d652072656d6f746520756e6971756520636f6e73747261696e7420746f206d61746368206c6f63616c206d6967726174696f6e206e616d650a20202020494620455849535453202853454c45435420312046524f4d2070675f636f6e73747261696e7420574845524520636f6e6e616d65203d2027656d61696c5f74656d706c6174655f7661726961626c65735f74656d706c6174655f736c75675f7661726961626c655f6b65795f6b65792729205448454e0a2020202020202020414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174655f7661726961626c65732052454e414d4520434f4e53545241494e5420656d61696c5f74656d706c6174655f7661726961626c65735f74656d706c6174655f736c75675f7661726961626c655f6b65795f6b657920544f20656d61696c5f74656d706c6174655f7661726961626c65735f756e697175653b0a20202020454e442049463b0a0a202020202d2d20416464206d697373696e6720636f6c756d6e732066726f6d20756e696669636174696f6e20706c616e0a20202020414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174655f7661726961626c65732041444420434f4c554d4e204946204e4f54204558495354532022696e73657274696f6e5f6f726465722220494e542044454641554c5420303b0a20202020414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174655f7661726961626c65732041444420434f4c554d4e204946204e4f5420455849535453202269735f656e61626c65642220424f4f4c45414e2044454641554c5420747275653b0a20202020414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174655f7661726961626c65732041444420434f4c554d4e204946204e4f54204558495354532022736f757263655f746f6b656e2220544558543b0a0a202020202d2d204d61702066616c6c6261636b5f76616c75652028666f756e64206f6e2072656d6f74652920746f2064756d6d7920736f757263655f746f6b656e206966206e65656465640a20202020494620455849535453202853454c45435420312046524f4d20696e666f726d6174696f6e5f736368656d612e636f6c756d6e73205748455245207461626c655f6e616d65203d2027656d61696c5f74656d706c6174655f7661726961626c65732720414e4420636f6c756d6e5f6e616d65203d202766616c6c6261636b5f76616c75652729205448454e0a2020202020202020414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174655f7661726961626c65732044524f5020434f4c554d4e204946204558495354532066616c6c6261636b5f76616c75653b0a20202020454e442049463b0a454e44202424000001812d2d20342e205265736f6c766520436f6e73747261696e7420616e642054726967676572204472696674207370656369666963616c6c79206d656e74696f6e656420696e204349206f75747075740a2d2d205072696d617279204b657920436f6e73747261696e7420666f7220656d61696c5f7661726961626c655f72656769737472790a444f2024240a424547494e0a202020204946204e4f5420455849535453202853454c45435420312046524f4d2070675f636f6e73747261696e7420574845524520636f6e6e616d65203d2027656d61696c5f7661726961626c655f72656769737472795f706b65792729205448454e0a2020202020202020414c544552205441424c4520227075626c6963222e22656d61696c5f7661726961626c655f7265676973747279222041444420434f4e53545241494e542022656d61696c5f7661726961626c655f72656769737472795f706b657922205052494d415259204b45592028226b657922293b0a20202020454e442049463b0a454e442024240000009a2d2d20436865636b20636f6e73747261696e7420666f7220756e7265736f6c7665645f706f6c6963790a414c544552205441424c4520227075626c6963222e22656d61696c5f74656d706c61746573222044524f5020434f4e53545241494e54204946204558495354532022656d61696c5f74656d706c617465735f756e7265736f6c7665645f746f6b656e5f706f6c6963795f636865636b220000006a414c544552205441424c4520227075626c6963222e22656d61696c5f74656d706c61746573222044524f5020434f4e53545241494e54204946204558495354532022656d61696c5f74656d706c617465735f756e7265736f6c7665645f706f6c6963795f636865636b22000000af414c544552205441424c4520227075626c6963222e22656d61696c5f74656d706c61746573222041444420434f4e53545241494e542022656d61696c5f74656d706c617465735f756e7265736f6c7665645f706f6c6963795f636865636b22200a434845434b2028756e7265736f6c7665645f706f6c69637920494e202827626c6f636b272c20277761726e272c2027616c6c6f776c6973745f66616c6c6261636b272929204e4f542056414c494400000064414c544552205441424c4520227075626c6963222e22656d61696c5f74656d706c61746573222056414c494441544520434f4e53545241494e542022656d61696c5f74656d706c617465735f756e7265736f6c7665645f706f6c6963795f636865636b220000007a2d2d20547269676765727320666f7220757064617465645f61740a44524f50205452494747455220494620455849535453207365745f757064617465645f61745f656d61696c5f7661726961626c655f7265676973747279204f4e207075626c69632e656d61696c5f7661726961626c655f7265676973747279000000aa4352454154452054524947474552207365745f757064617465645f61745f656d61696c5f7661726961626c655f72656769737472790a202020204245464f524520555044415445204f4e207075626c69632e656d61696c5f7661726961626c655f72656769737472790a20202020464f52204541434820524f570a20202020455845435554452046554e4354494f4e207075626c69632e68616e646c655f757064617465645f617428290000006144524f50205452494747455220494620455849535453207365745f757064617465645f61745f656d61696c5f74656d706c6174655f7661726961626c6573204f4e207075626c69632e656d61696c5f74656d706c6174655f7661726961626c6573000000ac4352454154452054524947474552207365745f757064617465645f61745f656d61696c5f74656d706c6174655f7661726961626c65730a202020204245464f524520555044415445204f4e207075626c69632e656d61696c5f74656d706c6174655f7661726961626c65730a20202020464f52204541434820524f570a20202020455845435554452046554e4354494f4e207075626c69632e68616e646c655f757064617465645f61742829"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"insertion_order\" of relation \"email_template_variables\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"SQL statement \"ALTER TABLE public.email_template_variables ADD COLUMN IF NOT EXISTS \"insertion_order\" INT DEFAULT 0\"\nPL/pgSQL function inline_code_block line 9 at SQL statement","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
NOTICE (42701): column "insertion_order" of relation "email_template_variables" already exists, skipping
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"is_enabled\" of relation \"email_template_variables\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"SQL statement \"ALTER TABLE public.email_template_variables ADD COLUMN IF NOT EXISTS \"is_enabled\" BOOLEAN DEFAULT true\"\nPL/pgSQL function inline_code_block line 10 at SQL statement","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"source_token\" of relation \"email_template_variables\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"SQL statement \"ALTER TABLE public.email_template_variables ADD COLUMN IF NOT EXISTS \"source_token\" TEXT\"\nPL/pgSQL function inline_code_block line 11 at SQL statement","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
NOTICE (42701): column "is_enabled" of relation "email_template_variables" already exists, skipping
NOTICE (42701): column "source_token" of relation "email_template_variables" already exists, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"constraint \"email_templates_unresolved_token_policy_check\" of relation \"email_templates\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":12655,"Routine":"ATExecDropConstraint","UnknownFields":null}
NOTICE (00000): constraint "email_templates_unresolved_token_policy_check" of relation "email_templates" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260215000002_final_drift_cleanup.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Final Database Drift Cleanup and Consistency Alignment\n-- This migration ensures ALL tables use consistent types and defaults to prevent CI drift detection.\n\n-- 1. Align Profiles Timestamp and Types\nALTER TABLE \"public\".\"profiles\" \n  ALTER COLUMN \"created_at\" SET DATA TYPE TIMESTAMP WITH TIME ZONE USING \"created_at\" AT TIME ZONE 'UTC',\n  ALTER COLUMN \"updated_at\" SET DATA TYPE TIMESTAMP WITH TIME ZONE USING \"updated_at\" AT TIME ZONE 'UTC',\n  ALTER COLUMN \"phone_verified_at\" SET DATA TYPE TIMESTAMP WITH TIME ZONE USING \"phone_verified_at\" AT TIME ZONE 'UTC'","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"profiles\" \n  ALTER COLUMN \"created_at\" SET DEFAULT NOW(),\n  ALTER COLUMN \"updated_at\" SET DEFAULT NOW()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Align Addresses Timestamps\nALTER TABLE \"public\".\"addresses\" \n  ALTER COLUMN \"created_at\" SET DATA TYPE TIMESTAMP WITH TIME ZONE USING \"created_at\" AT TIME ZONE 'UTC'","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"addresses\" \n  ALTER COLUMN \"created_at\" SET DEFAULT NOW()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. Align Orders created_at (updated_at is already timestamptz)\nALTER TABLE \"public\".\"orders\" \n  ALTER COLUMN \"created_at\" SET DATA TYPE TIMESTAMP WITH TIME ZONE USING \"created_at\" AT TIME ZONE 'UTC'","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"orders\" \n  ALTER COLUMN \"created_at\" SET DEFAULT NOW()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 4. Align Email System Defaults and Constraints\n-- email_templates.unresolved_policy\nALTER TABLE \"public\".\"email_templates\" \n  ALTER COLUMN \"unresolved_policy\" SET DEFAULT 'block'","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Support Ticket Category alignment\nALTER TABLE \"public\".\"support_tickets\" DROP CONSTRAINT IF EXISTS \"support_tickets_category_check\"","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"support_tickets\" \n  ADD CONSTRAINT \"support_tickets_category_check\" \n  CHECK (category = ANY (ARRAY['order_issue'::text, 'product_info'::text, 'delivery'::text, 'other'::text, 'general'::text]))","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Support Ticket Status alignment\nALTER TABLE \"public\".\"support_tickets\" DROP CONSTRAINT IF EXISTS \"support_tickets_status_check\"","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"support_tickets\" \n  ADD CONSTRAINT \"support_tickets_status_check\" \n  CHECK (status = ANY (ARRAY['open'::text, 'answered'::text, 'closed'::text]))","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 5. Align Products timestamps\nALTER TABLE \"public\".\"products\" \n  ALTER COLUMN \"created_at\" SET DATA TYPE TIMESTAMP WITH TIME ZONE USING \"created_at\" AT TIME ZONE 'UTC',\n  ALTER COLUMN \"updated_at\" SET DATA TYPE TIMESTAMP WITH TIME ZONE USING \"updated_at\" AT TIME ZONE 'UTC'","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 6. Align Promo Codes and Logs\nALTER TABLE \"public\".\"promo_logs\" \n  ALTER COLUMN \"created_at\" SET DEFAULT timezone('utc'::text, now())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 7. Ensure handle_updated_at function is consistent for all triggers\nCREATE OR REPLACE FUNCTION public.handle_updated_at()\n RETURNS trigger\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\nBEGIN\n    NEW.updated_at = timezone('utc'::text, now());\n    RETURN NEW;\nEND;\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 8. Apply updated_at trigger to tables that might have drifted\nDO $$\nBEGIN\n    -- profiles\n    IF NOT EXISTS (SELECT 1 FROM pg_trigger WHERE tgname = 'set_updated_at_profiles') THEN\n        CREATE TRIGGER set_updated_at_profiles BEFORE UPDATE ON public.profiles FOR EACH ROW EXECUTE FUNCTION public.handle_updated_at();\n    END IF;\n    \n    -- products\n    IF NOT EXISTS (SELECT 1 FROM pg_trigger WHERE tgname = 'set_updated_at_products') THEN\n        CREATE TRIGGER set_updated_at_products BEFORE UPDATE ON public.products FOR EACH ROW EXECUTE FUNCTION public.handle_updated_at();\n    END IF;\n    \n    -- email_templates\n    IF NOT EXISTS (SELECT 1 FROM pg_trigger WHERE tgname = 'set_updated_at_email_templates') THEN\n        CREATE TRIGGER set_updated_at_email_templates BEFORE UPDATE ON public.email_templates FOR EACH ROW EXECUTE FUNCTION public.handle_updated_at();\n    END IF;\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260215000002"},{"text":"final_drift_cleanup"},{"binary":"0000000100000000000000190000000f00000001000002352d2d2046696e616c20446174616261736520447269667420436c65616e757020616e6420436f6e73697374656e637920416c69676e6d656e740a2d2d2054686973206d6967726174696f6e20656e737572657320414c4c207461626c65732075736520636f6e73697374656e7420747970657320616e642064656661756c747320746f2070726576656e7420434920647269667420646574656374696f6e2e0a0a2d2d20312e20416c69676e2050726f66696c65732054696d657374616d7020616e642054797065730a414c544552205441424c4520227075626c6963222e2270726f66696c657322200a2020414c54455220434f4c554d4e2022637265617465645f61742220534554204441544120545950452054494d455354414d5020574954482054494d45205a4f4e45205553494e472022637265617465645f6174222041542054494d45205a4f4e452027555443272c0a2020414c54455220434f4c554d4e2022757064617465645f61742220534554204441544120545950452054494d455354414d5020574954482054494d45205a4f4e45205553494e472022757064617465645f6174222041542054494d45205a4f4e452027555443272c0a2020414c54455220434f4c554d4e202270686f6e655f76657269666965645f61742220534554204441544120545950452054494d455354414d5020574954482054494d45205a4f4e45205553494e47202270686f6e655f76657269666965645f6174222041542054494d45205a4f4e452027555443270000007d414c544552205441424c4520227075626c6963222e2270726f66696c657322200a2020414c54455220434f4c554d4e2022637265617465645f617422205345542044454641554c54204e4f5728292c0a2020414c54455220434f4c554d4e2022757064617465645f617422205345542044454641554c54204e4f572829000000ab2d2d20322e20416c69676e204164647265737365732054696d657374616d70730a414c544552205441424c4520227075626c6963222e2261646472657373657322200a2020414c54455220434f4c554d4e2022637265617465645f61742220534554204441544120545950452054494d455354414d5020574954482054494d45205a4f4e45205553494e472022637265617465645f6174222041542054494d45205a4f4e452027555443270000004f414c544552205441424c4520227075626c6963222e2261646472657373657322200a2020414c54455220434f4c554d4e2022637265617465645f617422205345542044454641554c54204e4f572829000000c92d2d20332e20416c69676e204f726465727320637265617465645f61742028757064617465645f617420697320616c72656164792074696d657374616d70747a290a414c544552205441424c4520227075626c6963222e226f726465727322200a2020414c54455220434f4c554d4e2022637265617465645f61742220534554204441544120545950452054494d455354414d5020574954482054494d45205a4f4e45205553494e472022637265617465645f6174222041542054494d45205a4f4e452027555443270000004c414c544552205441424c4520227075626c6963222e226f726465727322200a2020414c54455220434f4c554d4e2022637265617465645f617422205345542044454641554c54204e4f572829000000b52d2d20342e20416c69676e20456d61696c2053797374656d2044656661756c747320616e6420436f6e73747261696e74730a2d2d20656d61696c5f74656d706c617465732e756e7265736f6c7665645f706f6c6963790a414c544552205441424c4520227075626c6963222e22656d61696c5f74656d706c6174657322200a2020414c54455220434f4c554d4e2022756e7265736f6c7665645f706f6c69637922205345542044454641554c542027626c6f636b27000000862d2d20537570706f7274205469636b65742043617465676f727920616c69676e6d656e740a414c544552205441424c4520227075626c6963222e22737570706f72745f7469636b657473222044524f5020434f4e53545241494e54204946204558495354532022737570706f72745f7469636b6574735f63617465676f72795f636865636b22000000d8414c544552205441424c4520227075626c6963222e22737570706f72745f7469636b65747322200a202041444420434f4e53545241494e542022737570706f72745f7469636b6574735f63617465676f72795f636865636b22200a2020434845434b202863617465676f7279203d20414e59202841525241595b276f726465725f6973737565273a3a746578742c202770726f647563745f696e666f273a3a746578742c202764656c6976657279273a3a746578742c20276f74686572273a3a746578742c202767656e6572616c273a3a746578745d2929000000822d2d20537570706f7274205469636b65742053746174757320616c69676e6d656e740a414c544552205441424c4520227075626c6963222e22737570706f72745f7469636b657473222044524f5020434f4e53545241494e54204946204558495354532022737570706f72745f7469636b6574735f7374617475735f636865636b22000000a7414c544552205441424c4520227075626c6963222e22737570706f72745f7469636b65747322200a202041444420434f4e53545241494e542022737570706f72745f7469636b6574735f7374617475735f636865636b22200a2020434845434b2028737461747573203d20414e59202841525241595b276f70656e273a3a746578742c2027616e737765726564273a3a746578742c2027636c6f736564273a3a746578745d2929000001132d2d20352e20416c69676e2050726f64756374732074696d657374616d70730a414c544552205441424c4520227075626c6963222e2270726f647563747322200a2020414c54455220434f4c554d4e2022637265617465645f61742220534554204441544120545950452054494d455354414d5020574954482054494d45205a4f4e45205553494e472022637265617465645f6174222041542054494d45205a4f4e452027555443272c0a2020414c54455220434f4c554d4e2022757064617465645f61742220534554204441544120545950452054494d455354414d5020574954482054494d45205a4f4e45205553494e472022757064617465645f6174222041542054494d45205a4f4e45202755544327000000882d2d20362e20416c69676e2050726f6d6f20436f64657320616e64204c6f67730a414c544552205441424c4520227075626c6963222e2270726f6d6f5f6c6f677322200a2020414c54455220434f4c554d4e2022637265617465645f617422205345542044454641554c542074696d657a6f6e652827757463273a3a746578742c206e6f77282929000001182d2d20372e20456e737572652068616e646c655f757064617465645f61742066756e6374696f6e20697320636f6e73697374656e7420666f7220616c6c2074726967676572730a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e68616e646c655f757064617465645f617428290a2052455455524e5320747269676765720a204c414e475541474520706c706773716c0a20534543555249545920444546494e45520a4153202466756e6374696f6e240a424547494e0a202020204e45572e757064617465645f6174203d2074696d657a6f6e652827757463273a3a746578742c206e6f772829293b0a2020202052455455524e204e45573b0a454e443b0a2466756e6374696f6e240000037c2d2d20382e204170706c7920757064617465645f6174207472696767657220746f207461626c65732074686174206d69676874206861766520647269667465640a444f2024240a424547494e0a202020202d2d2070726f66696c65730a202020204946204e4f5420455849535453202853454c45435420312046524f4d2070675f747269676765722057484552452074676e616d65203d20277365745f757064617465645f61745f70726f66696c65732729205448454e0a20202020202020204352454154452054524947474552207365745f757064617465645f61745f70726f66696c6573204245464f524520555044415445204f4e207075626c69632e70726f66696c657320464f52204541434820524f5720455845435554452046554e4354494f4e207075626c69632e68616e646c655f757064617465645f617428293b0a20202020454e442049463b0a202020200a202020202d2d2070726f64756374730a202020204946204e4f5420455849535453202853454c45435420312046524f4d2070675f747269676765722057484552452074676e616d65203d20277365745f757064617465645f61745f70726f64756374732729205448454e0a20202020202020204352454154452054524947474552207365745f757064617465645f61745f70726f6475637473204245464f524520555044415445204f4e207075626c69632e70726f647563747320464f52204541434820524f5720455845435554452046554e4354494f4e207075626c69632e68616e646c655f757064617465645f617428293b0a20202020454e442049463b0a202020200a202020202d2d20656d61696c5f74656d706c617465730a202020204946204e4f5420455849535453202853454c45435420312046524f4d2070675f747269676765722057484552452074676e616d65203d20277365745f757064617465645f61745f656d61696c5f74656d706c617465732729205448454e0a20202020202020204352454154452054524947474552207365745f757064617465645f61745f656d61696c5f74656d706c61746573204245464f524520555044415445204f4e207075626c69632e656d61696c5f74656d706c6174657320464f52204541434820524f5720455845435554452046554e4354494f4e207075626c69632e68616e646c655f757064617465645f617428293b0a20202020454e442049463b0a454e44202424"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260215000003_email_templates_standardized_content.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Legacy duplicate migration (Refer to 20260214192627 for current content)\r\n-- Emptied to prevent redundancy while maintaining migration history consistency.\r\nSELECT 1","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260215000003"},{"text":"email_templates_standardized_content"},{"binary":"0000000100000000000000190000000100000001000000a82d2d204c6567616379206475706c6963617465206d6967726174696f6e2028526566657220746f20323032363032313431393236323720666f722063757272656e7420636f6e74656e74290d0a2d2d20456d707469656420746f2070726576656e7420726564756e64616e6379207768696c65206d61696e7461696e696e67206d6967726174696f6e20686973746f727920636f6e73697374656e63792e0d0a53454c4543542031"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"RowDescription","Fields":[{"Name":"?column?","TableOID":0,"TableAttributeNumber":0,"DataTypeOID":23,"DataTypeSize":4,"TypeModifier":-1,"Format":0}]}
2026/02/25 16:12:57 PG Recv: {"Type":"DataRow","Values":[{"text":"1"}]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"SELECT 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260215000004_email_templates_restore_baseline_designs.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Restore DB email templates to high-quality baseline designs.\r\n-- Source of visual style: email_templates/* (kept untouched).\r\n-- Includes required common parts in raw HTML:\r\n-- - browser-view line\r\n-- - support contact\r\n-- - copyright\r\n-- - logo\r\n-- - emoji header icon\r\n-- - confirmation fallback line where relevant\r\n\r\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"WITH payload (\r\n  slug,\r\n  name,\r\n  subject,\r\n  variables,\r\n  content_html\r\n) AS (\r\n  VALUES\r\n    (\r\n      'confirm_signup',\r\n      'Hesap Dorulama',\r\n      'E-posta Adresinizi Dorulayn ',\r\n      '[\"CONFIRMATION_URL\",\"BROWSER_LINK\",\"SITE_URL\"]'::jsonb,\r\n      $tpl_confirm_signup$\r\n\u003c!DOCTYPE html\u003e\r\n\u003chtml lang=\"tr\"\u003e\r\n\u003chead\u003e\r\n  \u003cmeta charset=\"UTF-8\"\u003e\r\n  \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\r\n  \u003cmeta name=\"color-scheme\" content=\"light\"\u003e\r\n  \u003cmeta name=\"supported-color-schemes\" content=\"light\"\u003e\r\n  \u003ctitle\u003eE-postanz Dorulayn\u003c/title\u003e\r\n  \u003clink href=\"https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700;800\u0026family=Nunito:wght@400;600;700;800;900\u0026display=swap\" rel=\"stylesheet\"\u003e\r\n  \u003cstyle\u003e\r\n    :root { color-scheme: light; }\r\n    body { background-color:#FFFBF7 !important; color:#1F2937 !important; font-family:'Baloo 2','Nunito',sans-serif; margin:0; padding:0; -webkit-font-smoothing:antialiased; }\r\n    @media only screen and (max-width:600px) {\r\n      .container { width:100% !important; border-radius:0 !important; }\r\n      .content { padding:30px 20px !important; }\r\n      .button { width:100% !important; display:block !important; text-align:center !important; }\r\n    }\r\n  \u003c/style\u003e\r\n\u003c/head\u003e\r\n\u003cbody\u003e\r\n  \u003ctable width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#FFFBF7;\"\u003e\r\n    \u003ctr\u003e\r\n      \u003ctd align=\"center\" style=\"padding:20px 0;\"\u003e\r\n        \u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003eE-postay grntlemekte sorun mu yayorsunuz? \u003ca href=\"{{BROWSER_LINK}}\" style=\"color:#F97316;text-decoration:none;\"\u003eTaraycda an\u003c/a\u003e\u003c/p\u003e\r\n      \u003c/td\u003e\r\n    \u003c/tr\u003e\r\n    \u003ctr\u003e\r\n      \u003ctd align=\"center\" style=\"padding:0 0 40px;\"\u003e\r\n        \u003ctable class=\"container\" width=\"600\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#ffffff;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.05);overflow:hidden;\"\u003e\r\n          \u003ctr\u003e\u003ctd height=\"6\" style=\"background-color:#F97316;\"\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd align=\"center\" style=\"padding:40px 0 20px;\"\u003e\r\n              \u003cimg src=\"https://xpmbnznsmsujjuwumfiw.supabase.co/storage/v1/object/public/public-assets/bravita-logo.webp\" alt=\"Bravita\" width=\"180\" style=\"display:block;border:0;max-width:100%;height:auto;\" /\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:0 0 20px;\"\u003e\u003cdiv style=\"font-size:64px;line-height:1;\"\u003e\u003c/div\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd class=\"content\" align=\"center\" style=\"padding:0 60px 40px;\"\u003e\r\n              \u003ch1 style=\"margin:0 0 20px;color:#1F2937;font-size:26px;font-weight:700;letter-spacing:-0.5px;line-height:1.1;\"\u003eE-postanz Dorulayn\u003c/h1\u003e\r\n              \u003cp style=\"margin:0 0 30px;color:#4B5563;font-size:16px;line-height:1.6;\"\u003eBravita dnyasna ho geldiniz! \u003cbr\u003eHesabnz gvenceye almak ve alverie balamak iin ltfen aadaki butona tklayn.\u003c/p\u003e\r\n              \u003ctable border=\"0\" cellspacing=\"0\" cellpadding=\"0\"\u003e\r\n                \u003ctr\u003e\r\n                  \u003ctd align=\"center\" style=\"border-radius:50px;background-color:#F97316;\"\u003e\r\n                    \u003ca href=\"{{CONFIRMATION_URL}}\" class=\"button\" style=\"display:inline-block;padding:16px 48px;font-family:'Baloo 2','Nunito',sans-serif;font-size:16px;color:#ffffff;text-decoration:none;font-weight:600;border-radius:50px;background-color:#F97316;border:1px solid #F97316;\"\u003eHesabm Dorula\u003c/a\u003e\r\n                  \u003c/td\u003e\r\n                \u003c/tr\u003e\r\n              \u003c/table\u003e\r\n              \u003cdiv style=\"margin-top:40px;border-top:1px solid #E5E7EB;padding-top:20px;\"\u003e\r\n                \u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;line-height:1.5;\"\u003eLink almyor mu? Bunu deneyin:\u003cbr\u003e\u003ca href=\"{{CONFIRMATION_URL}}\" style=\"color:#F97316;text-decoration:none;word-break:break-all;\"\u003e{{CONFIRMATION_URL}}\u003c/a\u003e\u003c/p\u003e\r\n              \u003c/div\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd align=\"center\" style=\"background-color:#FFF8F0;padding:20px;\"\u003e\r\n              \u003cp style=\"margin:0 0 8px;color:#9CA3AF;font-size:12px;\"\u003eSorularnz m var? \u003ca href=\"mailto:support@bravita.com.tr\" style=\"color:#F97316;text-decoration:none;\"\u003esupport@bravita.com.tr\u003c/a\u003e\u003c/p\u003e\r\n              \u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003e 2026 Bravita. Tm haklar sakldr.\u003c/p\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n        \u003c/table\u003e\r\n      \u003c/td\u003e\r\n    \u003c/tr\u003e\r\n  \u003c/table\u003e\r\n\u003c/body\u003e\r\n\u003c/html\u003e\r\n$tpl_confirm_signup$\r\n    ),\r\n    (\r\n      'reset_password',\r\n      'ifre Sfrlama',\r\n      'ifre Sfrlama Talebiniz ',\r\n      '[\"CONFIRMATION_URL\",\"BROWSER_LINK\",\"SITE_URL\"]'::jsonb,\r\n      $tpl_reset_password$\r\n\u003c!DOCTYPE html\u003e\r\n\u003chtml lang=\"tr\"\u003e\r\n\u003chead\u003e\r\n  \u003cmeta charset=\"UTF-8\"\u003e\r\n  \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\r\n  \u003cmeta name=\"color-scheme\" content=\"light\"\u003e\r\n  \u003cmeta name=\"supported-color-schemes\" content=\"light\"\u003e\r\n  \u003ctitle\u003eifrenizi Sfrlayn\u003c/title\u003e\r\n  \u003clink href=\"https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700;800\u0026family=Nunito:wght@400;600;700;800;900\u0026display=swap\" rel=\"stylesheet\"\u003e\r\n  \u003cstyle\u003e\r\n    :root { color-scheme: light; }\r\n    body { background-color:#FFFBF7 !important; color:#1F2937 !important; font-family:'Baloo 2','Nunito',sans-serif; margin:0; padding:0; -webkit-font-smoothing:antialiased; }\r\n    @media only screen and (max-width:600px) {\r\n      .container { width:100% !important; border-radius:0 !important; }\r\n      .content { padding:30px 20px !important; }\r\n      .button { width:100% !important; display:block !important; text-align:center !important; }\r\n    }\r\n  \u003c/style\u003e\r\n\u003c/head\u003e\r\n\u003cbody\u003e\r\n  \u003ctable width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#FFFBF7;\"\u003e\r\n    \u003ctr\u003e\r\n      \u003ctd align=\"center\" style=\"padding:20px 0;\"\u003e\r\n        \u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003eE-postay grntlemekte sorun mu yayorsunuz? \u003ca href=\"{{BROWSER_LINK}}\" style=\"color:#F97316;text-decoration:none;\"\u003eTaraycda an\u003c/a\u003e\u003c/p\u003e\r\n      \u003c/td\u003e\r\n    \u003c/tr\u003e\r\n    \u003ctr\u003e\r\n      \u003ctd align=\"center\" style=\"padding:0 0 40px;\"\u003e\r\n        \u003ctable class=\"container\" width=\"600\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#ffffff;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.05);overflow:hidden;\"\u003e\r\n          \u003ctr\u003e\u003ctd height=\"6\" style=\"background-color:#F97316;\"\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd align=\"center\" style=\"padding:40px 0 20px;\"\u003e\r\n              \u003cimg src=\"https://xpmbnznsmsujjuwumfiw.supabase.co/storage/v1/object/public/public-assets/bravita-logo.webp\" alt=\"Bravita\" width=\"180\" style=\"display:block;border:0;max-width:100%;height:auto;\" /\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:0 0 20px;\"\u003e\u003cdiv style=\"font-size:64px;line-height:1;\"\u003e\u003c/div\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd class=\"content\" align=\"center\" style=\"padding:0 60px 40px;\"\u003e\r\n              \u003ch1 style=\"margin:0 0 20px;color:#1F2937;font-size:26px;font-weight:700;\"\u003eifre Yenileme Talebi\u003c/h1\u003e\r\n              \u003cp style=\"margin:0 0 30px;color:#4B5563;font-size:16px;line-height:1.6;\"\u003eifrenizi unuttuunuzu duyduk. Endielenmeyin, aadaki butona tklayarak hemen yeni bir ifre belirleyebilirsiniz.\u003c/p\u003e\r\n              \u003ctable border=\"0\" cellspacing=\"0\" cellpadding=\"0\"\u003e\r\n                \u003ctr\u003e\r\n                  \u003ctd align=\"center\" style=\"border-radius:50px;background-color:#F97316;\"\u003e\r\n                    \u003ca href=\"{{CONFIRMATION_URL}}\" class=\"button\" style=\"display:inline-block;padding:16px 48px;font-family:'Baloo 2','Nunito',sans-serif;font-size:16px;color:#ffffff;text-decoration:none;font-weight:600;border-radius:50px;background-color:#F97316;border:1px solid #F97316;\"\u003eifremi Sfrla\u003c/a\u003e\r\n                  \u003c/td\u003e\r\n                \u003c/tr\u003e\r\n              \u003c/table\u003e\r\n              \u003cdiv style=\"margin-top:40px;border-top:1px solid #E5E7EB;padding-top:20px;\"\u003e\r\n                \u003cp style=\"margin:0 0 10px;color:#EF4444;font-size:13px;font-weight:600;background:#FEF2F2;display:inline-block;padding:4px 10px;border-radius:4px;\"\u003e Gvenlik Notu\u003c/p\u003e\r\n                \u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;line-height:1.5;\"\u003eBu talebi siz yapmadysanz, hesabnz gvendedir. Bu mesaj silebilirsiniz.\u003cbr\u003e\u003cbr\u003eLink almyor mu?\u003cbr\u003e\u003ca href=\"{{CONFIRMATION_URL}}\" style=\"color:#F97316;text-decoration:none;word-break:break-all;\"\u003e{{CONFIRMATION_URL}}\u003c/a\u003e\u003c/p\u003e\r\n              \u003c/div\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd align=\"center\" style=\"background-color:#FFF8F0;padding:20px;\"\u003e\r\n              \u003cp style=\"margin:0 0 8px;color:#9CA3AF;font-size:12px;\"\u003eSorularnz m var? \u003ca href=\"mailto:support@bravita.com.tr\" style=\"color:#F97316;text-decoration:none;\"\u003esupport@bravita.com.tr\u003c/a\u003e\u003c/p\u003e\r\n              \u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003e 2026 Bravita. Tm haklar sakldr.\u003c/p\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n        \u003c/table\u003e\r\n      \u003c/td\u003e\r\n    \u003c/tr\u003e\r\n  \u003c/table\u003e\r\n\u003c/body\u003e\r\n\u003c/html\u003e\r\n$tpl_reset_password$\r\n    ),\r\n    (\r\n      'password_changed',\r\n      'ifre Deitirildi',\r\n      'ifreniz Baaryla Gncellendi ',\r\n      '[\"SITE_URL\",\"BROWSER_LINK\"]'::jsonb,\r\n      $tpl_password_changed$\r\n\u003c!DOCTYPE html\u003e\r\n\u003chtml lang=\"tr\"\u003e\r\n\u003chead\u003e\r\n  \u003cmeta charset=\"UTF-8\"\u003e\r\n  \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\r\n  \u003cmeta name=\"color-scheme\" content=\"light\"\u003e\r\n  \u003cmeta name=\"supported-color-schemes\" content=\"light\"\u003e\r\n  \u003ctitle\u003eifreniz Deitirildi\u003c/title\u003e\r\n  \u003clink href=\"https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700;800\u0026family=Nunito:wght@400;600;700;800;900\u0026display=swap\" rel=\"stylesheet\"\u003e\r\n  \u003cstyle\u003e\r\n    :root { color-scheme: light; }\r\n    body { background-color:#FFFBF7 !important; color:#1F2937 !important; font-family:'Baloo 2','Nunito',sans-serif; margin:0; padding:0; -webkit-font-smoothing:antialiased; }\r\n    @media only screen and (max-width:600px) {\r\n      .container { width:100% !important; border-radius:0 !important; }\r\n      .content { padding:30px 20px !important; }\r\n      .button { width:100% !important; display:block !important; text-align:center !important; }\r\n    }\r\n  \u003c/style\u003e\r\n\u003c/head\u003e\r\n\u003cbody\u003e\r\n  \u003ctable width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#FFFBF7;\"\u003e\r\n    \u003ctr\u003e\r\n      \u003ctd align=\"center\" style=\"padding:20px 0;\"\u003e\r\n        \u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003eE-postay grntlemekte sorun mu yayorsunuz? \u003ca href=\"{{BROWSER_LINK}}\" style=\"color:#F97316;text-decoration:none;\"\u003eTaraycda an\u003c/a\u003e\u003c/p\u003e\r\n      \u003c/td\u003e\r\n    \u003c/tr\u003e\r\n    \u003ctr\u003e\r\n      \u003ctd align=\"center\" style=\"padding:0 0 40px;\"\u003e\r\n        \u003ctable class=\"container\" width=\"600\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#ffffff;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.05);overflow:hidden;\"\u003e\r\n          \u003ctr\u003e\u003ctd height=\"6\" style=\"background-color:#22C55E;\"\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd align=\"center\" style=\"padding:40px 0 20px;\"\u003e\r\n              \u003cimg src=\"https://xpmbnznsmsujjuwumfiw.supabase.co/storage/v1/object/public/public-assets/bravita-logo.webp\" alt=\"Bravita\" width=\"180\" style=\"display:block;border:0;max-width:100%;height:auto;\" /\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:0 0 20px;\"\u003e\u003cdiv style=\"font-size:64px;line-height:1;\"\u003e\u003c/div\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd class=\"content\" align=\"center\" style=\"padding:0 60px 40px;\"\u003e\r\n              \u003ch1 style=\"margin:0 0 20px;color:#1F2937;font-size:26px;font-weight:700;\"\u003eifreniz Baaryla Deitirildi\u003c/h1\u003e\r\n              \u003cp style=\"margin:0 0 30px;color:#4B5563;font-size:16px;line-height:1.6;\"\u003eHesabnzn ifresi ksa sre nce gncellendi. Artk yeni ifrenizle giri yapabilirsiniz.\u003c/p\u003e\r\n              \u003ctable border=\"0\" cellspacing=\"0\" cellpadding=\"0\"\u003e\r\n                \u003ctr\u003e\r\n                  \u003ctd align=\"center\" style=\"border-radius:50px;background-color:#22C55E;\"\u003e\r\n                    \u003ca href=\"{{SITE_URL}}\" class=\"button\" style=\"display:inline-block;padding:16px 48px;font-family:'Baloo 2','Nunito',sans-serif;font-size:16px;color:#ffffff;text-decoration:none;font-weight:600;border-radius:50px;background-color:#22C55E;border:1px solid #22C55E;\"\u003eGiri Yap\u003c/a\u003e\r\n                  \u003c/td\u003e\r\n                \u003c/tr\u003e\r\n              \u003c/table\u003e\r\n              \u003cdiv style=\"margin-top:40px;border-top:1px solid #E5E7EB;padding-top:20px;\"\u003e\r\n                \u003cp style=\"margin:0 0 10px;color:#EF4444;font-size:13px;font-weight:600;background:#FEF2F2;display:inline-block;padding:4px 10px;border-radius:4px;\"\u003e nemli Gvenlik Uyars\u003c/p\u003e\r\n                \u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;line-height:1.5;\"\u003e\u003cstrong\u003eEer bu ilemi siz yapmadysanz, hesabnz tehlikede olabilir.\u003c/strong\u003e\u003cbr\u003eLtfen derhal \u003ca href=\"mailto:support@bravita.com.tr\" style=\"color:#F97316;text-decoration:none;\"\u003edestek ekibimizle\u003c/a\u003e iletiime gein.\u003c/p\u003e\r\n              \u003c/div\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd align=\"center\" style=\"background-color:#FFF8F0;padding:20px;\"\u003e\r\n              \u003cp style=\"margin:0 0 8px;color:#9CA3AF;font-size:12px;\"\u003eSorularnz m var? \u003ca href=\"mailto:support@bravita.com.tr\" style=\"color:#F97316;text-decoration:none;\"\u003esupport@bravita.com.tr\u003c/a\u003e\u003c/p\u003e\r\n              \u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003e 2026 Bravita. Tm haklar sakldr.\u003c/p\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n        \u003c/table\u003e\r\n      \u003c/td\u003e\r\n    \u003c/tr\u003e\r\n  \u003c/table\u003e\r\n\u003c/body\u003e\r\n\u003c/html\u003e\r\n$tpl_password_changed$\r\n    ),\r\n    (\r\n      'welcome_template',\r\n      'Ho Geldiniz',\r\n      'Bravita''ya Ho Geldiniz ',\r\n      '[\"NAME\",\"SITE_URL\",\"UNSUBSCRIBE_URL\",\"BROWSER_LINK\"]'::jsonb,\r\n      $tpl_welcome$\r\n\u003c!DOCTYPE html\u003e\r\n\u003chtml lang=\"tr\"\u003e\r\n\u003chead\u003e\r\n  \u003cmeta charset=\"UTF-8\"\u003e\r\n  \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\r\n  \u003cmeta name=\"color-scheme\" content=\"light\"\u003e\r\n  \u003cmeta name=\"supported-color-schemes\" content=\"light\"\u003e\r\n  \u003ctitle\u003eBravita''ya Ho Geldiniz!\u003c/title\u003e\r\n  \u003clink href=\"https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700;800\u0026family=Nunito:wght@400;600;700;800;900\u0026display=swap\" rel=\"stylesheet\"\u003e\r\n  \u003cstyle\u003e\r\n    :root { color-scheme: light; }\r\n    body { background-color:#FFFBF7 !important; color:#1F2937 !important; font-family:'Baloo 2','Nunito',-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif; margin:0; padding:0; -webkit-font-smoothing:antialiased; }\r\n    @media only screen and (max-width:600px) {\r\n      .container { width:100% !important; border-radius:0 !important; }\r\n      .content { padding:30px 20px !important; }\r\n      .button { width:100% !important; display:block !important; text-align:center !important; }\r\n    }\r\n  \u003c/style\u003e\r\n\u003c/head\u003e\r\n\u003cbody\u003e\r\n  \u003ctable width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#FFFBF7;\"\u003e\r\n    \u003ctr\u003e\r\n      \u003ctd align=\"center\" style=\"padding:20px 0;\"\u003e\r\n        \u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003eE-postay grntlemekte sorun mu yayorsunuz? \u003ca href=\"{{BROWSER_LINK}}\" style=\"color:#F97316;text-decoration:none;\"\u003eTaraycda an\u003c/a\u003e\u003c/p\u003e\r\n      \u003c/td\u003e\r\n    \u003c/tr\u003e\r\n    \u003ctr\u003e\r\n      \u003ctd align=\"center\" style=\"padding:0 0 40px;\"\u003e\r\n        \u003ctable class=\"container\" width=\"600\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#ffffff;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.05);overflow:hidden;\"\u003e\r\n          \u003ctr\u003e\u003ctd height=\"6\" style=\"background-color:#F97316;\"\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd align=\"center\" style=\"padding:40px 0 20px;\"\u003e\r\n              \u003cimg src=\"https://xpmbnznsmsujjuwumfiw.supabase.co/storage/v1/object/public/public-assets/bravita-logo.webp\" alt=\"Bravita\" width=\"180\" style=\"display:block;border:0;max-width:100%;height:auto;\" /\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:0 0 20px;\"\u003e\u003cdiv style=\"font-size:64px;line-height:1;\"\u003e\u003c/div\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd class=\"content\" align=\"center\" style=\"padding:0 60px 40px;\"\u003e\r\n              \u003ch1 style=\"margin:0 0 20px;color:#1F2937;font-size:26px;font-weight:700;letter-spacing:-0.5px;\"\u003eAramza Ho Geldiniz, {{NAME}}!\u003c/h1\u003e\r\n              \u003cp style=\"margin:0 0 30px;color:#4B5563;font-size:16px;line-height:1.6;\"\u003eBravita ailesine katldnz iin ok mutluyuz. Artk gelecee odakl byme ve srdrlebilir baar yolculuumuzun bir parassnz.\u003c/p\u003e\r\n              \u003ctable border=\"0\" cellspacing=\"0\" cellpadding=\"0\"\u003e\r\n                \u003ctr\u003e\r\n                  \u003ctd align=\"center\" style=\"border-radius:50px;background-color:#F97316;\"\u003e\r\n                    \u003ca href=\"{{SITE_URL}}\" class=\"button\" style=\"display:inline-block;padding:16px 48px;font-family:'Baloo 2','Nunito',sans-serif;font-size:16px;color:#ffffff;text-decoration:none;font-weight:600;border-radius:50px;background-color:#F97316;border:1px solid #F97316;\"\u003eBravita''y Kefet\u003c/a\u003e\r\n                  \u003c/td\u003e\r\n                \u003c/tr\u003e\r\n              \u003c/table\u003e\r\n              \u003cdiv style=\"margin-top:40px;border-top:1px solid #E5E7EB;padding-top:30px;text-align:left;\"\u003e\r\n                \u003cp style=\"margin:0 0 10px;color:#1F2937;font-weight:600;\"\u003eBravita ile neler yapabilirsiniz?\u003c/p\u003e\r\n                \u003cul style=\"margin:0;padding:0 0 0 20px;color:#4B5563;font-size:14px;line-height:1.8;\"\u003e\r\n                  \u003cli\u003eEn yeni rnlerden ve indirimlerden ilk siz haberdar olun.\u003c/li\u003e\r\n                  \u003cli\u003eHesabnz yneterek siparilerinizi takip edin.\u003c/li\u003e\r\n                  \u003cli\u003eSize zel kampanyalardan faydalanmaya balayn.\u003c/li\u003e\r\n                \u003c/ul\u003e\r\n              \u003c/div\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd align=\"center\" style=\"background-color:#FFF8F0;padding:20px;\"\u003e\r\n              \u003cp style=\"margin:0 0 8px;color:#9CA3AF;font-size:12px;\"\u003eSorularnz m var? \u003ca href=\"mailto:support@bravita.com.tr\" style=\"color:#F97316;text-decoration:none;\"\u003esupport@bravita.com.tr\u003c/a\u003e\u003c/p\u003e\r\n              \u003cp style=\"margin:0 0 8px;color:#9CA3AF;font-size:12px;\"\u003e 2026 Bravita. Tm haklar sakldr.\u003c/p\u003e\r\n              \u003cp style=\"margin:0;font-size:12px;\"\u003e\u003ca href=\"{{UNSUBSCRIBE_URL}}\" style=\"color:#F97316;text-decoration:none;\"\u003eAbonelikten Ayrl\u003c/a\u003e\u003c/p\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n        \u003c/table\u003e\r\n      \u003c/td\u003e\r\n    \u003c/tr\u003e\r\n  \u003c/table\u003e\r\n\u003c/body\u003e\r\n\u003c/html\u003e\r\n$tpl_welcome$\r\n    ),\r\n    (\r\n      'order_confirmation',\r\n      'Sipari Onay',\r\n      'Sipariiniz Alnd  #{{ORDER_ID}}',\r\n      '[\"ORDER_ID\",\"ORDER_DATE\",\"ITEMS_LIST\",\"SUBTOTAL\",\"DISCOUNT\",\"TAX\",\"TOTAL\",\"SHIPPING_ADDRESS\",\"PAYMENT_METHOD\",\"BANK_DETAILS\",\"BROWSER_LINK\",\"SITE_URL\"]'::jsonb,\r\n      $tpl_order_confirmation$\r\n\u003c!DOCTYPE html\u003e\r\n\u003chtml lang=\"tr\"\u003e\r\n\u003chead\u003e\r\n  \u003cmeta charset=\"UTF-8\"\u003e\r\n  \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\r\n  \u003cmeta name=\"color-scheme\" content=\"light\"\u003e\r\n  \u003cmeta name=\"supported-color-schemes\" content=\"light\"\u003e\r\n  \u003ctitle\u003eSipariiniz Onayland\u003c/title\u003e\r\n  \u003clink href=\"https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700;800\u0026family=Nunito:wght@400;600;700;800;900\u0026display=swap\" rel=\"stylesheet\"\u003e\r\n  \u003cstyle\u003e\r\n    :root { color-scheme: light; }\r\n    body { background-color:#FFFBF7 !important; color:#1F2937 !important; font-family:'Baloo 2','Nunito',sans-serif; margin:0; padding:0; }\r\n    .item-row td { border-bottom:1px solid #F3F4F6; padding:16px 0; }\r\n    .item-row:last-child td { border-bottom:none; }\r\n    @media only screen and (max-width:600px) {\r\n      .container { width:100% !important; border-radius:0 !important; }\r\n      .content { padding:30px 20px !important; }\r\n      .responsive-table { width:100% !important; }\r\n    }\r\n  \u003c/style\u003e\r\n\u003c/head\u003e\r\n\u003cbody\u003e\r\n  \u003ctable width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#FFFBF7;\"\u003e\r\n    \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:20px 0;\"\u003e\u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003eE-postay grntlemekte sorun mu yayorsunuz? \u003ca href=\"{{BROWSER_LINK}}\" style=\"color:#F97316;text-decoration:none;\"\u003eTaraycda an\u003c/a\u003e\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\r\n    \u003ctr\u003e\r\n      \u003ctd align=\"center\" style=\"padding:0 0 40px;\"\u003e\r\n        \u003ctable class=\"container\" width=\"600\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#ffffff;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.05);overflow:hidden;\"\u003e\r\n          \u003ctr\u003e\u003ctd height=\"6\" style=\"background-color:#22C55E;\"\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:40px 0 20px;\"\u003e\u003cimg src=\"https://xpmbnznsmsujjuwumfiw.supabase.co/storage/v1/object/public/public-assets/bravita-logo.webp\" alt=\"Bravita\" width=\"180\" style=\"display:block;border:0;max-width:100%;height:auto;\" /\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:0 0 20px;\"\u003e\u003cdiv style=\"font-size:64px;line-height:1;\"\u003e\u003c/div\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd class=\"content\" align=\"center\" style=\"padding:0 40px 40px;\"\u003e\r\n              \u003ch1 style=\"margin:0 0 10px;color:#1F2937;font-size:26px;font-weight:700;\"\u003eSipariiniz Onayland!\u003c/h1\u003e\r\n              \u003cp style=\"margin:0 0 30px;color:#4B5563;font-size:16px;line-height:1.6;\"\u003eSipariiniz baaryla alnd ve hazrlanmaya baland.\u003c/p\u003e\r\n              \u003ctable width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#F9FAFB;border-radius:12px;margin-bottom:30px;padding:20px;\"\u003e\r\n                \u003ctr\u003e\r\n                  \u003ctd align=\"left\" style=\"padding-bottom:8px;\"\u003e\u003cspan style=\"color:#6B7280;font-size:13px;font-weight:600;text-transform:uppercase;\"\u003eSipari No\u003c/span\u003e\u003cbr\u003e\u003cspan style=\"color:#111827;font-size:16px;font-weight:700;\"\u003e#{{ORDER_ID}}\u003c/span\u003e\u003c/td\u003e\r\n                  \u003ctd align=\"right\" style=\"padding-bottom:8px;\"\u003e\u003cspan style=\"color:#6B7280;font-size:13px;font-weight:600;text-transform:uppercase;\"\u003eTarih\u003c/span\u003e\u003cbr\u003e\u003cspan style=\"color:#111827;font-size:16px;font-weight:700;\"\u003e{{ORDER_DATE}}\u003c/span\u003e\u003c/td\u003e\r\n                \u003c/tr\u003e\r\n              \u003c/table\u003e\r\n              \u003cdiv style=\"text-align:left;margin-bottom:30px;\"\u003e\r\n                \u003ch3 style=\"margin:0 0 15px;color:#F97316;font-size:16px;font-weight:700;text-transform:uppercase;letter-spacing:0.5px;\"\u003eSipari Detaylar\u003c/h3\u003e\r\n                \u003ctable width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"\u003e{{ITEMS_LIST}}\u003c/table\u003e\r\n              \u003c/div\u003e\r\n              \u003ctable width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"margin-bottom:30px;\"\u003e\r\n                \u003ctr\u003e\u003ctd style=\"padding:8px 0;color:#6B7280;font-size:14px;\"\u003eAra Toplam\u003c/td\u003e\u003ctd align=\"right\" style=\"padding:8px 0;color:#111827;font-size:14px;font-weight:600;\"\u003e{{SUBTOTAL}}\u003c/td\u003e\u003c/tr\u003e\r\n                \u003ctr\u003e\u003ctd style=\"padding:8px 0;color:#22C55E;font-size:14px;\"\u003endirim\u003c/td\u003e\u003ctd align=\"right\" style=\"padding:8px 0;color:#22C55E;font-size:14px;font-weight:600;\"\u003e-{{DISCOUNT}}\u003c/td\u003e\u003c/tr\u003e\r\n                \u003ctr\u003e\u003ctd style=\"padding:8px 0;color:#6B7280;font-size:14px;\"\u003eKDV (%20)\u003c/td\u003e\u003ctd align=\"right\" style=\"padding:8px 0;color:#111827;font-size:14px;font-weight:600;\"\u003e{{TAX}}\u003c/td\u003e\u003c/tr\u003e\r\n                \u003ctr\u003e\u003ctd style=\"border-top:1px solid #E5E7EB;padding:16px 0 0;color:#111827;font-size:18px;font-weight:800;\"\u003eToplam\u003c/td\u003e\u003ctd align=\"right\" style=\"border-top:1px solid #E5E7EB;padding:16px 0 0;color:#F97316;font-size:24px;font-weight:800;\"\u003e{{TOTAL}}\u003c/td\u003e\u003c/tr\u003e\r\n              \u003c/table\u003e\r\n              \u003cdiv style=\"text-align:left;background-color:#FFF7ED;padding:20px;border-radius:12px;border:1px solid #FFEDD5;\"\u003e\r\n                \u003ch3 style=\"margin:0 0 10px;color:#EA580C;font-size:14px;font-weight:700;text-transform:uppercase;\"\u003eTeslimat Adresi\u003c/h3\u003e\r\n                \u003cp style=\"margin:0;color:#431407;font-size:14px;line-height:1.6;\"\u003e{{SHIPPING_ADDRESS}}\u003c/p\u003e\r\n              \u003c/div\u003e\r\n              {{BANK_DETAILS}}\r\n              \u003cdiv style=\"margin-top:20px;text-align:center;\"\u003e\u003cp style=\"color:#6B7280;font-size:13px;\"\u003edeme Yntemi: \u003cstrong\u003e{{PAYMENT_METHOD}}\u003c/strong\u003e\u003c/p\u003e\u003c/div\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd align=\"center\" style=\"background-color:#FFF8F0;padding:20px;\"\u003e\r\n              \u003cp style=\"margin:0 0 8px;color:#9CA3AF;font-size:12px;\"\u003eSorularnz m var? \u003ca href=\"mailto:support@bravita.com.tr\" style=\"color:#F97316;text-decoration:none;\"\u003esupport@bravita.com.tr\u003c/a\u003e\u003c/p\u003e\r\n              \u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003e 2026 Bravita. Tm haklar sakldr.\u003c/p\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n        \u003c/table\u003e\r\n      \u003c/td\u003e\r\n    \u003c/tr\u003e\r\n  \u003c/table\u003e\r\n\u003c/body\u003e\r\n\u003c/html\u003e\r\n$tpl_order_confirmation$\r\n    ),\r\n    (\r\n      'order_awaiting_payment',\r\n      'deme Bekleniyor',\r\n      'Sipariiniz Alnd, deme Bekleniyor  #{{ORDER_ID}}',\r\n      '[\"ORDER_ID\",\"ORDER_DATE\",\"ITEMS_LIST\",\"SUBTOTAL\",\"DISCOUNT\",\"TAX\",\"TOTAL\",\"SHIPPING_ADDRESS\",\"PAYMENT_METHOD\",\"BANK_DETAILS\",\"BROWSER_LINK\",\"SITE_URL\"]'::jsonb,\r\n      $tpl_order_awaiting_payment$\r\n\u003c!DOCTYPE html\u003e\r\n\u003chtml lang=\"tr\"\u003e\r\n\u003chead\u003e\r\n  \u003cmeta charset=\"UTF-8\"\u003e\r\n  \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\r\n  \u003cmeta name=\"color-scheme\" content=\"light\"\u003e\r\n  \u003cmeta name=\"supported-color-schemes\" content=\"light\"\u003e\r\n  \u003ctitle\u003edeme Bekleniyor\u003c/title\u003e\r\n  \u003clink href=\"https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700;800\u0026family=Nunito:wght@400;600;700;800;900\u0026display=swap\" rel=\"stylesheet\"\u003e\r\n  \u003cstyle\u003e\r\n    :root { color-scheme: light; }\r\n    body { background-color:#FFFBF7 !important; color:#1F2937 !important; font-family:'Baloo 2','Nunito',sans-serif; margin:0; padding:0; }\r\n    @media only screen and (max-width:600px) {\r\n      .container { width:100% !important; border-radius:0 !important; }\r\n      .content { padding:30px 20px !important; }\r\n      .button { width:100% !important; display:block !important; text-align:center !important; }\r\n    }\r\n  \u003c/style\u003e\r\n\u003c/head\u003e\r\n\u003cbody\u003e\r\n  \u003ctable width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#FFFBF7;\"\u003e\r\n    \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:20px 0;\"\u003e\u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003eE-postay grntlemekte sorun mu yayorsunuz? \u003ca href=\"{{BROWSER_LINK}}\" style=\"color:#F97316;text-decoration:none;\"\u003eTaraycda an\u003c/a\u003e\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\r\n    \u003ctr\u003e\r\n      \u003ctd align=\"center\" style=\"padding:0 0 40px;\"\u003e\r\n        \u003ctable class=\"container\" width=\"600\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#ffffff;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.05);overflow:hidden;\"\u003e\r\n          \u003ctr\u003e\u003ctd height=\"6\" style=\"background-color:#3B82F6;\"\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:40px 0 20px;\"\u003e\u003cimg src=\"https://xpmbnznsmsujjuwumfiw.supabase.co/storage/v1/object/public/public-assets/bravita-logo.webp\" alt=\"Bravita\" width=\"180\" style=\"display:block;border:0;max-width:100%;height:auto;\" /\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:0 0 20px;\"\u003e\u003cdiv style=\"font-size:64px;line-height:1;\"\u003e\u003c/div\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd class=\"content\" align=\"center\" style=\"padding:0 40px 40px;\"\u003e\r\n              \u003ch1 style=\"margin:0 0 10px;color:#1F2937;font-size:26px;font-weight:700;\"\u003eSipariiniz Alnd, deme Bekleniyor\u003c/h1\u003e\r\n              \u003cp style=\"margin:0 0 30px;color:#4B5563;font-size:16px;line-height:1.6;\"\u003eSipariiniz oluturuldu. demeniz onaylandnda sipariiniz hazrlk aamasna geecektir.\u003c/p\u003e\r\n              \u003ctable width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#F9FAFB;border-radius:12px;margin-bottom:30px;padding:20px;\"\u003e\r\n                \u003ctr\u003e\r\n                  \u003ctd align=\"left\" style=\"padding-bottom:8px;\"\u003e\u003cspan style=\"color:#6B7280;font-size:13px;font-weight:600;text-transform:uppercase;\"\u003eSipari No\u003c/span\u003e\u003cbr\u003e\u003cspan style=\"color:#111827;font-size:16px;font-weight:700;\"\u003e#{{ORDER_ID}}\u003c/span\u003e\u003c/td\u003e\r\n                  \u003ctd align=\"right\" style=\"padding-bottom:8px;\"\u003e\u003cspan style=\"color:#6B7280;font-size:13px;font-weight:600;text-transform:uppercase;\"\u003eTarih\u003c/span\u003e\u003cbr\u003e\u003cspan style=\"color:#111827;font-size:16px;font-weight:700;\"\u003e{{ORDER_DATE}}\u003c/span\u003e\u003c/td\u003e\r\n                \u003c/tr\u003e\r\n              \u003c/table\u003e\r\n              \u003cdiv style=\"text-align:left;margin-bottom:30px;\"\u003e\r\n                \u003ch3 style=\"margin:0 0 15px;color:#F97316;font-size:16px;font-weight:700;text-transform:uppercase;letter-spacing:0.5px;\"\u003eSipari Detaylar\u003c/h3\u003e\r\n                \u003ctable width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"\u003e{{ITEMS_LIST}}\u003c/table\u003e\r\n              \u003c/div\u003e\r\n              \u003ctable width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"margin-bottom:20px;\"\u003e\r\n                \u003ctr\u003e\u003ctd style=\"padding:8px 0;color:#6B7280;font-size:14px;\"\u003eAra Toplam\u003c/td\u003e\u003ctd align=\"right\" style=\"padding:8px 0;color:#111827;font-size:14px;font-weight:600;\"\u003e{{SUBTOTAL}}\u003c/td\u003e\u003c/tr\u003e\r\n                \u003ctr\u003e\u003ctd style=\"padding:8px 0;color:#22C55E;font-size:14px;\"\u003endirim\u003c/td\u003e\u003ctd align=\"right\" style=\"padding:8px 0;color:#22C55E;font-size:14px;font-weight:600;\"\u003e-{{DISCOUNT}}\u003c/td\u003e\u003c/tr\u003e\r\n                \u003ctr\u003e\u003ctd style=\"padding:8px 0;color:#6B7280;font-size:14px;\"\u003eKDV (%20)\u003c/td\u003e\u003ctd align=\"right\" style=\"padding:8px 0;color:#111827;font-size:14px;font-weight:600;\"\u003e{{TAX}}\u003c/td\u003e\u003c/tr\u003e\r\n                \u003ctr\u003e\u003ctd style=\"border-top:1px solid #E5E7EB;padding:16px 0 0;color:#111827;font-size:18px;font-weight:800;\"\u003eToplam\u003c/td\u003e\u003ctd align=\"right\" style=\"border-top:1px solid #E5E7EB;padding:16px 0 0;color:#F97316;font-size:24px;font-weight:800;\"\u003e{{TOTAL}}\u003c/td\u003e\u003c/tr\u003e\r\n              \u003c/table\u003e\r\n              \u003cdiv style=\"text-align:left;background-color:#EFF6FF;border:1px solid #DBEAFE;padding:20px;border-radius:12px;margin-bottom:20px;\"\u003e\r\n                \u003cp style=\"margin:0;color:#1E3A8A;font-size:14px;line-height:1.6;\"\u003eHavale/EFT deme setiniz. demeniz dorulandnda sipariiniz otomatik olarak hazrlanacaktr.\u003c/p\u003e\r\n              \u003c/div\u003e\r\n              {{BANK_DETAILS}}\r\n              \u003cdiv style=\"margin-top:20px;text-align:center;\"\u003e\u003cp style=\"color:#6B7280;font-size:13px;\"\u003edeme Yntemi: \u003cstrong\u003e{{PAYMENT_METHOD}}\u003c/strong\u003e\u003c/p\u003e\u003c/div\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd align=\"center\" style=\"background-color:#FFF8F0;padding:20px;\"\u003e\r\n              \u003cp style=\"margin:0 0 8px;color:#9CA3AF;font-size:12px;\"\u003eSorularnz m var? \u003ca href=\"mailto:support@bravita.com.tr\" style=\"color:#F97316;text-decoration:none;\"\u003esupport@bravita.com.tr\u003c/a\u003e\u003c/p\u003e\r\n              \u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003e 2026 Bravita. Tm haklar sakldr.\u003c/p\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n        \u003c/table\u003e\r\n      \u003c/td\u003e\r\n    \u003c/tr\u003e\r\n  \u003c/table\u003e\r\n\u003c/body\u003e\r\n\u003c/html\u003e\r\n$tpl_order_awaiting_payment$\r\n    ),\r\n    (\r\n      'order_processing',\r\n      'Sipari leniyor',\r\n      'Sipariiniz leniyor  #{{ORDER_ID}}',\r\n      '[\"ORDER_ID\",\"BROWSER_LINK\",\"SITE_URL\"]'::jsonb,\r\n      $tpl_order_processing$\r\n\u003c!DOCTYPE html\u003e\r\n\u003chtml lang=\"tr\"\u003e\r\n\u003chead\u003e\r\n  \u003cmeta charset=\"UTF-8\"\u003e\r\n  \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\r\n  \u003cmeta name=\"color-scheme\" content=\"light\"\u003e\r\n  \u003cmeta name=\"supported-color-schemes\" content=\"light\"\u003e\r\n  \u003ctitle\u003eSipariiniz leniyor\u003c/title\u003e\r\n  \u003clink href=\"https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700;800\u0026family=Nunito:wght@400;600;700;800;900\u0026display=swap\" rel=\"stylesheet\"\u003e\r\n  \u003cstyle\u003e\r\n    :root { color-scheme: light; }\r\n    body { background-color:#FFFBF7 !important; color:#1F2937 !important; font-family:'Baloo 2','Nunito',sans-serif; margin:0; padding:0; }\r\n    @media only screen and (max-width:600px) { .container { width:100% !important; border-radius:0 !important; } .content { padding:30px 20px !important; } }\r\n  \u003c/style\u003e\r\n\u003c/head\u003e\r\n\u003cbody\u003e\r\n  \u003ctable width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#FFFBF7;\"\u003e\r\n    \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:20px 0;\"\u003e\u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003eE-postay grntlemekte sorun mu yayorsunuz? \u003ca href=\"{{BROWSER_LINK}}\" style=\"color:#F97316;text-decoration:none;\"\u003eTaraycda an\u003c/a\u003e\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\r\n    \u003ctr\u003e\r\n      \u003ctd align=\"center\" style=\"padding:0 0 40px;\"\u003e\r\n        \u003ctable class=\"container\" width=\"600\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#ffffff;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.05);overflow:hidden;\"\u003e\r\n          \u003ctr\u003e\u003ctd height=\"6\" style=\"background-color:#3B82F6;\"\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:40px 0 20px;\"\u003e\u003cimg src=\"https://xpmbnznsmsujjuwumfiw.supabase.co/storage/v1/object/public/public-assets/bravita-logo.webp\" alt=\"Bravita\" width=\"180\" style=\"display:block;border:0;max-width:100%;height:auto;\" /\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:0 0 20px;\"\u003e\u003cdiv style=\"font-size:64px;line-height:1;\"\u003e\u003c/div\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd class=\"content\" align=\"center\" style=\"padding:0 40px 40px;\"\u003e\r\n              \u003ch1 style=\"margin:0 0 14px;color:#1F2937;font-size:26px;font-weight:700;\"\u003eSipariiniz leniyor\u003c/h1\u003e\r\n              \u003cp style=\"margin:0 0 24px;color:#4B5563;font-size:16px;line-height:1.6;\"\u003e#{{ORDER_ID}} numaral sipariiniz ekiplerimiz tarafndan kontrol ediliyor ve hazrlanma srasna alnyor.\u003c/p\u003e\r\n              \u003ctable border=\"0\" cellspacing=\"0\" cellpadding=\"0\"\u003e\u003ctr\u003e\u003ctd align=\"center\" style=\"border-radius:50px;background-color:#3B82F6;\"\u003e\u003ca href=\"{{BROWSER_LINK}}\" style=\"display:inline-block;padding:14px 36px;font-family:'Baloo 2','Nunito',sans-serif;font-size:15px;color:#ffffff;text-decoration:none;font-weight:600;border-radius:50px;background-color:#3B82F6;border:1px solid #3B82F6;\"\u003eSipari Takibini A\u003c/a\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"background-color:#FFF8F0;padding:20px;\"\u003e\u003cp style=\"margin:0 0 8px;color:#9CA3AF;font-size:12px;\"\u003eSorularnz m var? \u003ca href=\"mailto:support@bravita.com.tr\" style=\"color:#F97316;text-decoration:none;\"\u003esupport@bravita.com.tr\u003c/a\u003e\u003c/p\u003e\u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003e 2026 Bravita. Tm haklar sakldr.\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\r\n        \u003c/table\u003e\r\n      \u003c/td\u003e\r\n    \u003c/tr\u003e\r\n  \u003c/table\u003e\r\n\u003c/body\u003e\r\n\u003c/html\u003e\r\n$tpl_order_processing$\r\n    ),\r\n    (\r\n      'order_preparing',\r\n      'Sipari Hazrlanyor',\r\n      'Sipariiniz Hazrlanyor  #{{ORDER_ID}}',\r\n      '[\"ORDER_ID\",\"BROWSER_LINK\",\"SITE_URL\"]'::jsonb,\r\n      $tpl_order_preparing$\r\n\u003c!DOCTYPE html\u003e\r\n\u003chtml lang=\"tr\"\u003e\r\n\u003chead\u003e\r\n  \u003cmeta charset=\"UTF-8\"\u003e\r\n  \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\r\n  \u003cmeta name=\"color-scheme\" content=\"light\"\u003e\r\n  \u003cmeta name=\"supported-color-schemes\" content=\"light\"\u003e\r\n  \u003ctitle\u003eSipariiniz Hazrlanyor\u003c/title\u003e\r\n  \u003clink href=\"https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700;800\u0026family=Nunito:wght@400;600;700;800;900\u0026display=swap\" rel=\"stylesheet\"\u003e\r\n  \u003cstyle\u003e\r\n    :root { color-scheme: light; }\r\n    body { background-color:#FFFBF7 !important; color:#1F2937 !important; font-family:'Baloo 2','Nunito',sans-serif; margin:0; padding:0; }\r\n    @media only screen and (max-width:600px) { .container { width:100% !important; border-radius:0 !important; } .content { padding:30px 20px !important; } }\r\n  \u003c/style\u003e\r\n\u003c/head\u003e\r\n\u003cbody\u003e\r\n  \u003ctable width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#FFFBF7;\"\u003e\r\n    \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:20px 0;\"\u003e\u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003eE-postay grntlemekte sorun mu yayorsunuz? \u003ca href=\"{{BROWSER_LINK}}\" style=\"color:#F97316;text-decoration:none;\"\u003eTaraycda an\u003c/a\u003e\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\r\n    \u003ctr\u003e\r\n      \u003ctd align=\"center\" style=\"padding:0 0 40px;\"\u003e\r\n        \u003ctable class=\"container\" width=\"600\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#ffffff;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.05);overflow:hidden;\"\u003e\r\n          \u003ctr\u003e\u003ctd height=\"6\" style=\"background-color:#6366F1;\"\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:40px 0 20px;\"\u003e\u003cimg src=\"https://xpmbnznsmsujjuwumfiw.supabase.co/storage/v1/object/public/public-assets/bravita-logo.webp\" alt=\"Bravita\" width=\"180\" style=\"display:block;border:0;max-width:100%;height:auto;\" /\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:0 0 20px;\"\u003e\u003cdiv style=\"font-size:64px;line-height:1;\"\u003e\u003c/div\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd class=\"content\" align=\"center\" style=\"padding:0 40px 40px;\"\u003e\r\n              \u003ch1 style=\"margin:0 0 14px;color:#1F2937;font-size:26px;font-weight:700;\"\u003eSipariiniz Hazrlanyor\u003c/h1\u003e\r\n              \u003cp style=\"margin:0 0 24px;color:#4B5563;font-size:16px;line-height:1.6;\"\u003eHarika! #{{ORDER_ID}} numaral sipariiniz paketleme aamasnda. Kargoya verildiinde sizi hemen bilgilendireceiz.\u003c/p\u003e\r\n              \u003ctable border=\"0\" cellspacing=\"0\" cellpadding=\"0\"\u003e\u003ctr\u003e\u003ctd align=\"center\" style=\"border-radius:50px;background-color:#6366F1;\"\u003e\u003ca href=\"{{BROWSER_LINK}}\" style=\"display:inline-block;padding:14px 36px;font-family:'Baloo 2','Nunito',sans-serif;font-size:15px;color:#ffffff;text-decoration:none;font-weight:600;border-radius:50px;background-color:#6366F1;border:1px solid #6366F1;\"\u003eSipari Takibini A\u003c/a\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"background-color:#FFF8F0;padding:20px;\"\u003e\u003cp style=\"margin:0 0 8px;color:#9CA3AF;font-size:12px;\"\u003eSorularnz m var? \u003ca href=\"mailto:support@bravita.com.tr\" style=\"color:#F97316;text-decoration:none;\"\u003esupport@bravita.com.tr\u003c/a\u003e\u003c/p\u003e\u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003e 2026 Bravita. Tm haklar sakldr.\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\r\n        \u003c/table\u003e\r\n      \u003c/td\u003e\r\n    \u003c/tr\u003e\r\n  \u003c/table\u003e\r\n\u003c/body\u003e\r\n\u003c/html\u003e\r\n$tpl_order_preparing$\r\n    ),\r\n    (\r\n      'order_shipped',\r\n      'Kargoya Verildi',\r\n      'Sipariiniz Kargoya Verildi  #{{ORDER_ID}}',\r\n      '[\"ORDER_ID\",\"SHIPPING_COMPANY\",\"TRACKING_NUMBER\",\"BROWSER_LINK\",\"SITE_URL\"]'::jsonb,\r\n      $tpl_order_shipped$\r\n\u003c!DOCTYPE html\u003e\r\n\u003chtml lang=\"tr\"\u003e\r\n\u003chead\u003e\r\n  \u003cmeta charset=\"UTF-8\"\u003e\r\n  \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\r\n  \u003cmeta name=\"color-scheme\" content=\"light\"\u003e\r\n  \u003cmeta name=\"supported-color-schemes\" content=\"light\"\u003e\r\n  \u003ctitle\u003eSipariiniz Kargoya Verildi\u003c/title\u003e\r\n  \u003clink href=\"https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700;800\u0026family=Nunito:wght@400;600;700;800;900\u0026display=swap\" rel=\"stylesheet\"\u003e\r\n  \u003cstyle\u003e\r\n    :root { color-scheme: light; }\r\n    body { background-color:#FFFBF7 !important; color:#1F2937 !important; font-family:'Baloo 2','Nunito',sans-serif; margin:0; padding:0; }\r\n    @media only screen and (max-width:600px) { .container { width:100% !important; border-radius:0 !important; } .content { padding:30px 20px !important; } }\r\n  \u003c/style\u003e\r\n\u003c/head\u003e\r\n\u003cbody\u003e\r\n  \u003ctable width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#FFFBF7;\"\u003e\r\n    \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:20px 0;\"\u003e\u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003eE-postay grntlemekte sorun mu yayorsunuz? \u003ca href=\"{{BROWSER_LINK}}\" style=\"color:#F97316;text-decoration:none;\"\u003eTaraycda an\u003c/a\u003e\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\r\n    \u003ctr\u003e\r\n      \u003ctd align=\"center\" style=\"padding:0 0 40px;\"\u003e\r\n        \u003ctable class=\"container\" width=\"600\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#ffffff;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.05);overflow:hidden;\"\u003e\r\n          \u003ctr\u003e\u003ctd height=\"6\" style=\"background-color:#F97316;\"\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:40px 0 20px;\"\u003e\u003cimg src=\"https://xpmbnznsmsujjuwumfiw.supabase.co/storage/v1/object/public/public-assets/bravita-logo.webp\" alt=\"Bravita\" width=\"180\" style=\"display:block;border:0;max-width:100%;height:auto;\" /\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:0 0 20px;\"\u003e\u003cdiv style=\"font-size:64px;line-height:1;\"\u003e\u003c/div\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd class=\"content\" align=\"center\" style=\"padding:0 40px 40px;\"\u003e\r\n              \u003ch1 style=\"margin:0 0 14px;color:#1F2937;font-size:26px;font-weight:700;\"\u003eSipariiniz Kargoya Verildi!\u003c/h1\u003e\r\n              \u003cp style=\"margin:0 0 24px;color:#4B5563;font-size:16px;line-height:1.6;\"\u003e#{{ORDER_ID}} numaral sipariiniz kargo firmasna teslim edildi.\u003c/p\u003e\r\n              \u003cdiv style=\"background-color:#FFF7ED;border:1px solid #FFEDD5;border-radius:12px;padding:20px;margin-bottom:24px;text-align:left;\"\u003e\r\n                \u003cp style=\"margin:0 0 8px;color:#7C2D12;font-size:14px;\"\u003e\u003cstrong\u003eKargo Firmas:\u003c/strong\u003e {{SHIPPING_COMPANY}}\u003c/p\u003e\r\n                \u003cp style=\"margin:0;color:#7C2D12;font-size:14px;\"\u003e\u003cstrong\u003eTakip Numaras:\u003c/strong\u003e {{TRACKING_NUMBER}}\u003c/p\u003e\r\n              \u003c/div\u003e\r\n              \u003ctable border=\"0\" cellspacing=\"0\" cellpadding=\"0\"\u003e\u003ctr\u003e\u003ctd align=\"center\" style=\"border-radius:50px;background-color:#F97316;\"\u003e\u003ca href=\"{{BROWSER_LINK}}\" style=\"display:inline-block;padding:14px 36px;font-family:'Baloo 2','Nunito',sans-serif;font-size:15px;color:#ffffff;text-decoration:none;font-weight:600;border-radius:50px;background-color:#F97316;border:1px solid #F97316;\"\u003eKargo Takibini A\u003c/a\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"background-color:#FFF8F0;padding:20px;\"\u003e\u003cp style=\"margin:0 0 8px;color:#9CA3AF;font-size:12px;\"\u003eSorularnz m var? \u003ca href=\"mailto:support@bravita.com.tr\" style=\"color:#F97316;text-decoration:none;\"\u003esupport@bravita.com.tr\u003c/a\u003e\u003c/p\u003e\u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003e 2026 Bravita. Tm haklar sakldr.\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\r\n        \u003c/table\u003e\r\n      \u003c/td\u003e\r\n    \u003c/tr\u003e\r\n  \u003c/table\u003e\r\n\u003c/body\u003e\r\n\u003c/html\u003e\r\n$tpl_order_shipped$\r\n    ),\r\n    (\r\n      'order_delivered',\r\n      'Teslim Edildi',\r\n      'Sipariiniz Teslim Edildi  #{{ORDER_ID}}',\r\n      '[\"ORDER_ID\",\"SITE_URL\",\"BROWSER_LINK\"]'::jsonb,\r\n      $tpl_order_delivered$\r\n\u003c!DOCTYPE html\u003e\r\n\u003chtml lang=\"tr\"\u003e\r\n\u003chead\u003e\r\n  \u003cmeta charset=\"UTF-8\"\u003e\r\n  \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\r\n  \u003cmeta name=\"color-scheme\" content=\"light\"\u003e\r\n  \u003cmeta name=\"supported-color-schemes\" content=\"light\"\u003e\r\n  \u003ctitle\u003eSipariiniz Teslim Edildi\u003c/title\u003e\r\n  \u003clink href=\"https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700;800\u0026family=Nunito:wght@400;600;700;800;900\u0026display=swap\" rel=\"stylesheet\"\u003e\r\n  \u003cstyle\u003e\r\n    :root { color-scheme: light; }\r\n    body { background-color:#FFFBF7 !important; color:#1F2937 !important; font-family:'Baloo 2','Nunito',sans-serif; margin:0; padding:0; }\r\n    @media only screen and (max-width:600px) { .container { width:100% !important; border-radius:0 !important; } .content { padding:30px 20px !important; } }\r\n  \u003c/style\u003e\r\n\u003c/head\u003e\r\n\u003cbody\u003e\r\n  \u003ctable width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#FFFBF7;\"\u003e\r\n    \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:20px 0;\"\u003e\u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003eE-postay grntlemekte sorun mu yayorsunuz? \u003ca href=\"{{BROWSER_LINK}}\" style=\"color:#F97316;text-decoration:none;\"\u003eTaraycda an\u003c/a\u003e\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\r\n    \u003ctr\u003e\r\n      \u003ctd align=\"center\" style=\"padding:0 0 40px;\"\u003e\r\n        \u003ctable class=\"container\" width=\"600\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#ffffff;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.05);overflow:hidden;\"\u003e\r\n          \u003ctr\u003e\u003ctd height=\"6\" style=\"background-color:#22C55E;\"\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:40px 0 20px;\"\u003e\u003cimg src=\"https://xpmbnznsmsujjuwumfiw.supabase.co/storage/v1/object/public/public-assets/bravita-logo.webp\" alt=\"Bravita\" width=\"180\" style=\"display:block;border:0;max-width:100%;height:auto;\" /\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:0 0 20px;\"\u003e\u003cdiv style=\"font-size:64px;line-height:1;\"\u003e\u003c/div\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd class=\"content\" align=\"center\" style=\"padding:0 60px 40px;\"\u003e\r\n              \u003ch1 style=\"margin:0 0 20px;color:#1F2937;font-size:26px;font-weight:700;\"\u003eSipariiniz Baaryla Teslim Edildi!\u003c/h1\u003e\r\n              \u003cp style=\"margin:0 0 30px;color:#4B5563;font-size:16px;line-height:1.6;\"\u003eHarika haber! \u003cstrong\u003e#{{ORDER_ID}}\u003c/strong\u003e numaral sipariiniz adresinize ulat. Umarz aldnz rnleri ok seversiniz.\u003c/p\u003e\r\n              \u003cdiv style=\"background-color:#F0FDF4;border:1px solid #DCFCE7;border-radius:12px;padding:20px;margin-bottom:30px;text-align:left;\"\u003e\r\n                \u003cp style=\"margin:0;color:#166534;font-size:14px;line-height:1.5;\"\u003ernlerimizi kullandnz anlar bizimle paylamak isterseniz \u003cstrong\u003e@bravitatr\u003c/strong\u003e etiketiyle sosyal medyada paylaabilirsiniz. \u003c/p\u003e\r\n              \u003c/div\u003e\r\n              \u003ctable border=\"0\" cellspacing=\"0\" cellpadding=\"0\"\u003e\r\n                \u003ctr\u003e\r\n                  \u003ctd align=\"center\" style=\"border-radius:50px;background-color:#F97316;\"\u003e\r\n                    \u003ca href=\"{{SITE_URL}}/account/orders/{{ORDER_ID}}\" style=\"display:inline-block;padding:16px 48px;font-family:'Baloo 2','Nunito',sans-serif;font-size:16px;color:#ffffff;text-decoration:none;font-weight:600;border-radius:50px;background-color:#F97316;border:1px solid #F97316;\"\u003eSiparii Grntle\u003c/a\u003e\r\n                  \u003c/td\u003e\r\n                \u003c/tr\u003e\r\n              \u003c/table\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"background-color:#FFF8F0;padding:20px;\"\u003e\u003cp style=\"margin:0 0 8px;color:#9CA3AF;font-size:12px;\"\u003eSorularnz m var? \u003ca href=\"mailto:support@bravita.com.tr\" style=\"color:#F97316;text-decoration:none;\"\u003esupport@bravita.com.tr\u003c/a\u003e\u003c/p\u003e\u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003e 2026 Bravita. Tm haklar sakldr.\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\r\n        \u003c/table\u003e\r\n      \u003c/td\u003e\r\n    \u003c/tr\u003e\r\n  \u003c/table\u003e\r\n\u003c/body\u003e\r\n\u003c/html\u003e\r\n$tpl_order_delivered$\r\n    ),\r\n    (\r\n      'order_cancelled',\r\n      'Sipari ptal Edildi',\r\n      'Sipariiniz ptal Edildi  #{{ORDER_ID}}',\r\n      '[\"ORDER_ID\",\"CANCELLATION_REASON\",\"BROWSER_LINK\",\"SITE_URL\"]'::jsonb,\r\n      $tpl_order_cancelled$\r\n\u003c!DOCTYPE html\u003e\r\n\u003chtml lang=\"tr\"\u003e\r\n\u003chead\u003e\r\n  \u003cmeta charset=\"UTF-8\"\u003e\r\n  \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\r\n  \u003cmeta name=\"color-scheme\" content=\"light\"\u003e\r\n  \u003cmeta name=\"supported-color-schemes\" content=\"light\"\u003e\r\n  \u003ctitle\u003eSipariiniz ptal Edildi\u003c/title\u003e\r\n  \u003clink href=\"https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700;800\u0026family=Nunito:wght@400;600;700;800;900\u0026display=swap\" rel=\"stylesheet\"\u003e\r\n  \u003cstyle\u003e\r\n    :root { color-scheme: light; }\r\n    body { background-color:#FFFBF7 !important; color:#1F2937 !important; font-family:'Baloo 2','Nunito',sans-serif; margin:0; padding:0; }\r\n    @media only screen and (max-width:600px) { .container { width:100% !important; border-radius:0 !important; } .content { padding:30px 20px !important; } }\r\n  \u003c/style\u003e\r\n\u003c/head\u003e\r\n\u003cbody\u003e\r\n  \u003ctable width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#FFFBF7;\"\u003e\r\n    \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:20px 0;\"\u003e\u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003eE-postay grntlemekte sorun mu yayorsunuz? \u003ca href=\"{{BROWSER_LINK}}\" style=\"color:#F97316;text-decoration:none;\"\u003eTaraycda an\u003c/a\u003e\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\r\n    \u003ctr\u003e\r\n      \u003ctd align=\"center\" style=\"padding:0 0 40px;\"\u003e\r\n        \u003ctable class=\"container\" width=\"600\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#ffffff;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.05);overflow:hidden;\"\u003e\r\n          \u003ctr\u003e\u003ctd height=\"6\" style=\"background-color:#EF4444;\"\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:40px 0 20px;\"\u003e\u003cimg src=\"https://xpmbnznsmsujjuwumfiw.supabase.co/storage/v1/object/public/public-assets/bravita-logo.webp\" alt=\"Bravita\" width=\"180\" style=\"display:block;border:0;max-width:100%;height:auto;\" /\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:0 0 20px;\"\u003e\u003cdiv style=\"font-size:64px;line-height:1;\"\u003e\u003c/div\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd class=\"content\" align=\"center\" style=\"padding:0 40px 40px;\"\u003e\r\n              \u003ch1 style=\"margin:0 0 14px;color:#1F2937;font-size:26px;font-weight:700;\"\u003eSipariiniz ptal Edildi\u003c/h1\u003e\r\n              \u003cp style=\"margin:0 0 24px;color:#4B5563;font-size:16px;line-height:1.6;\"\u003e#{{ORDER_ID}} numaral sipariiniz iptal edildi. Detaylar aada bulabilirsiniz.\u003c/p\u003e\r\n              \u003cdiv style=\"background-color:#FEF2F2;border:1px solid #FECACA;border-radius:12px;padding:20px;margin-bottom:24px;text-align:left;\"\u003e\r\n                \u003cp style=\"margin:0;color:#991B1B;font-size:14px;line-height:1.6;\"\u003e\u003cstrong\u003eptal Nedeni:\u003c/strong\u003e {{CANCELLATION_REASON}}\u003c/p\u003e\r\n              \u003c/div\u003e\r\n              \u003ctable border=\"0\" cellspacing=\"0\" cellpadding=\"0\"\u003e\u003ctr\u003e\u003ctd align=\"center\" style=\"border-radius:50px;background-color:#EF4444;\"\u003e\u003ca href=\"{{BROWSER_LINK}}\" style=\"display:inline-block;padding:14px 36px;font-family:'Baloo 2','Nunito',sans-serif;font-size:15px;color:#ffffff;text-decoration:none;font-weight:600;border-radius:50px;background-color:#EF4444;border:1px solid #EF4444;\"\u003eSipari Detayn A\u003c/a\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"background-color:#FFF8F0;padding:20px;\"\u003e\u003cp style=\"margin:0 0 8px;color:#9CA3AF;font-size:12px;\"\u003eSorularnz m var? \u003ca href=\"mailto:support@bravita.com.tr\" style=\"color:#F97316;text-decoration:none;\"\u003esupport@bravita.com.tr\u003c/a\u003e\u003c/p\u003e\u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003e 2026 Bravita. Tm haklar sakldr.\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\r\n        \u003c/table\u003e\r\n      \u003c/td\u003e\r\n    \u003c/tr\u003e\r\n  \u003c/table\u003e\r\n\u003c/body\u003e\r\n\u003c/html\u003e\r\n$tpl_order_cancelled$\r\n    ),\r\n    (\r\n      'support_ticket',\r\n      'Destek Talebi Alnd',\r\n      'Destek Talebiniz Alnd  #{{TICKET_ID}}',\r\n      '[\"NAME\",\"EMAIL\",\"SUBJECT\",\"TICKET_ID\",\"CATEGORY\",\"USER_MESSAGE\",\"BROWSER_LINK\",\"SITE_URL\"]'::jsonb,\r\n      $tpl_support_ticket$\r\n\u003c!DOCTYPE html\u003e\r\n\u003chtml lang=\"tr\"\u003e\r\n\u003chead\u003e\r\n  \u003cmeta charset=\"UTF-8\"\u003e\r\n  \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\r\n  \u003cmeta name=\"color-scheme\" content=\"light\"\u003e\r\n  \u003cmeta name=\"supported-color-schemes\" content=\"light\"\u003e\r\n  \u003ctitle\u003eDestek Talebiniz Alnd\u003c/title\u003e\r\n  \u003clink href=\"https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700;800\u0026family=Nunito:wght@400;600;700;800;900\u0026display=swap\" rel=\"stylesheet\"\u003e\r\n  \u003cstyle\u003e\r\n    :root { color-scheme: light; }\r\n    body { background-color:#FFFBF7 !important; color:#1F2937 !important; font-family:'Baloo 2','Nunito',sans-serif; margin:0; padding:0; }\r\n    @media only screen and (max-width:600px) { .container { width:100% !important; border-radius:0 !important; } .content { padding:30px 20px !important; } }\r\n  \u003c/style\u003e\r\n\u003c/head\u003e\r\n\u003cbody\u003e\r\n  \u003ctable width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#FFFBF7;\"\u003e\r\n    \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:20px 0;\"\u003e\u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003eE-postay grntlemekte sorun mu yayorsunuz? \u003ca href=\"{{BROWSER_LINK}}\" style=\"color:#F97316;text-decoration:none;\"\u003eTaraycda an\u003c/a\u003e\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\r\n    \u003ctr\u003e\r\n      \u003ctd align=\"center\" style=\"padding:0 0 40px;\"\u003e\r\n        \u003ctable class=\"container\" width=\"600\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#ffffff;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.05);overflow:hidden;\"\u003e\r\n          \u003ctr\u003e\u003ctd height=\"6\" style=\"background-color:#F97316;\"\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:40px 0 20px;\"\u003e\u003cimg src=\"https://xpmbnznsmsujjuwumfiw.supabase.co/storage/v1/object/public/public-assets/bravita-logo.webp\" alt=\"Bravita\" width=\"180\" style=\"display:block;border:0;max-width:100%;height:auto;\" /\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:0 0 20px;\"\u003e\u003cdiv style=\"font-size:64px;line-height:1;\"\u003e\u003c/div\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd class=\"content\" align=\"center\" style=\"padding:0 40px 40px;\"\u003e\r\n              \u003ch1 style=\"margin:0 0 14px;color:#1F2937;font-size:26px;font-weight:700;\"\u003eDestek Talebiniz Alnd\u003c/h1\u003e\r\n              \u003cp style=\"margin:0 0 24px;color:#4B5563;font-size:16px;line-height:1.6;\"\u003eMerhaba {{NAME}}, talebiniz baaryla kaydedildi. Ekibimiz en ksa srede sizinle iletiime geecektir.\u003c/p\u003e\r\n              \u003cdiv style=\"background-color:#FFF7ED;border:1px solid #FFEDD5;border-radius:12px;padding:20px;margin-bottom:24px;text-align:left;\"\u003e\r\n                \u003cp style=\"margin:0 0 8px;color:#7C2D12;font-size:14px;\"\u003e\u003cstrong\u003eTalep No:\u003c/strong\u003e #{{TICKET_ID}}\u003c/p\u003e\r\n                \u003cp style=\"margin:0 0 8px;color:#7C2D12;font-size:14px;\"\u003e\u003cstrong\u003eKonu:\u003c/strong\u003e {{SUBJECT}}\u003c/p\u003e\r\n                \u003cp style=\"margin:0 0 8px;color:#7C2D12;font-size:14px;\"\u003e\u003cstrong\u003eKategori:\u003c/strong\u003e {{CATEGORY}}\u003c/p\u003e\r\n                \u003cp style=\"margin:0;color:#7C2D12;font-size:14px;line-height:1.6;\"\u003e\u003cstrong\u003eMesaj:\u003c/strong\u003e\u003cbr\u003e{{USER_MESSAGE}}\u003c/p\u003e\r\n              \u003c/div\u003e\r\n              \u003ctable border=\"0\" cellspacing=\"0\" cellpadding=\"0\"\u003e\u003ctr\u003e\u003ctd align=\"center\" style=\"border-radius:50px;background-color:#F97316;\"\u003e\u003ca href=\"{{BROWSER_LINK}}\" style=\"display:inline-block;padding:14px 36px;font-family:'Baloo 2','Nunito',sans-serif;font-size:15px;color:#ffffff;text-decoration:none;font-weight:600;border-radius:50px;background-color:#F97316;border:1px solid #F97316;\"\u003eTalep Detayn A\u003c/a\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"background-color:#FFF8F0;padding:20px;\"\u003e\u003cp style=\"margin:0 0 8px;color:#9CA3AF;font-size:12px;\"\u003eSorularnz m var? \u003ca href=\"mailto:support@bravita.com.tr\" style=\"color:#F97316;text-decoration:none;\"\u003esupport@bravita.com.tr\u003c/a\u003e\u003c/p\u003e\u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003e 2026 Bravita. Tm haklar sakldr.\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\r\n        \u003c/table\u003e\r\n      \u003c/td\u003e\r\n    \u003c/tr\u003e\r\n  \u003c/table\u003e\r\n\u003c/body\u003e\r\n\u003c/html\u003e\r\n$tpl_support_ticket$\r\n    ),\r\n    (\r\n      'support_ticket_replied',\r\n      'Destek Yant',\r\n      'Destek Talebinize Yant Geldi  #{{TICKET_ID}}',\r\n      '[\"TICKET_ID\",\"USER_MESSAGE\",\"ADMIN_REPLY\",\"BROWSER_LINK\",\"SITE_URL\",\"NAME\"]'::jsonb,\r\n      $tpl_support_ticket_replied$\r\n\u003c!DOCTYPE html\u003e\r\n\u003chtml lang=\"tr\"\u003e\r\n\u003chead\u003e\r\n  \u003cmeta charset=\"UTF-8\"\u003e\r\n  \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\r\n  \u003cmeta name=\"color-scheme\" content=\"light\"\u003e\r\n  \u003cmeta name=\"supported-color-schemes\" content=\"light\"\u003e\r\n  \u003ctitle\u003eDestek Talebiniz Yantland\u003c/title\u003e\r\n  \u003clink href=\"https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700;800\u0026family=Nunito:wght@400;600;700;800;900\u0026display=swap\" rel=\"stylesheet\"\u003e\r\n  \u003cstyle\u003e\r\n    :root { color-scheme: light; }\r\n    body { background-color:#FFFBF7 !important; color:#1F2937 !important; font-family:'Baloo 2','Nunito',sans-serif; margin:0; padding:0; }\r\n    @media only screen and (max-width:600px) { .container { width:100% !important; border-radius:0 !important; } .content { padding:30px 20px !important; } }\r\n  \u003c/style\u003e\r\n\u003c/head\u003e\r\n\u003cbody\u003e\r\n  \u003ctable width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#FFFBF7;\"\u003e\r\n    \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:20px 0;\"\u003e\u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003eE-postay grntlemekte sorun mu yayorsunuz? \u003ca href=\"{{BROWSER_LINK}}\" style=\"color:#F97316;text-decoration:none;\"\u003eTaraycda an\u003c/a\u003e\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\r\n    \u003ctr\u003e\r\n      \u003ctd align=\"center\" style=\"padding:0 0 40px;\"\u003e\r\n        \u003ctable class=\"container\" width=\"600\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#ffffff;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.05);overflow:hidden;\"\u003e\r\n          \u003ctr\u003e\u003ctd height=\"6\" style=\"background-color:#3B82F6;\"\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:40px 0 20px;\"\u003e\u003cimg src=\"https://xpmbnznsmsujjuwumfiw.supabase.co/storage/v1/object/public/public-assets/bravita-logo.webp\" alt=\"Bravita\" width=\"180\" style=\"display:block;border:0;max-width:100%;height:auto;\" /\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:0 0 20px;\"\u003e\u003cdiv style=\"font-size:64px;line-height:1;\"\u003e\u003c/div\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd class=\"content\" align=\"center\" style=\"padding:0 40px 40px;\"\u003e\r\n              \u003ch1 style=\"margin:0 0 14px;color:#1F2937;font-size:26px;font-weight:700;\"\u003eDestek Talebiniz Yantland\u003c/h1\u003e\r\n              \u003cp style=\"margin:0 0 24px;color:#4B5563;font-size:16px;line-height:1.6;\"\u003eTalebiniz iin ekibimiz bir yant paylat. Aadaki zetten inceleyebilirsiniz.\u003c/p\u003e\r\n              \u003cdiv style=\"background-color:#EFF6FF;border:1px solid #DBEAFE;border-radius:12px;padding:20px;margin-bottom:16px;text-align:left;\"\u003e\r\n                \u003cp style=\"margin:0 0 8px;color:#1E3A8A;font-size:14px;\"\u003e\u003cstrong\u003eTalep No:\u003c/strong\u003e #{{TICKET_ID}}\u003c/p\u003e\r\n                \u003cp style=\"margin:0;color:#1E3A8A;font-size:14px;line-height:1.6;\"\u003e\u003cstrong\u003eMesajnz:\u003c/strong\u003e\u003cbr\u003e{{USER_MESSAGE}}\u003c/p\u003e\r\n              \u003c/div\u003e\r\n              \u003cdiv style=\"background-color:#F0FDF4;border:1px solid #DCFCE7;border-radius:12px;padding:20px;margin-bottom:24px;text-align:left;\"\u003e\r\n                \u003cp style=\"margin:0;color:#166534;font-size:14px;line-height:1.6;\"\u003e\u003cstrong\u003eYantmz:\u003c/strong\u003e\u003cbr\u003e{{ADMIN_REPLY}}\u003c/p\u003e\r\n              \u003c/div\u003e\r\n              \u003ctable border=\"0\" cellspacing=\"0\" cellpadding=\"0\"\u003e\u003ctr\u003e\u003ctd align=\"center\" style=\"border-radius:50px;background-color:#3B82F6;\"\u003e\u003ca href=\"{{BROWSER_LINK}}\" style=\"display:inline-block;padding:14px 36px;font-family:'Baloo 2','Nunito',sans-serif;font-size:15px;color:#ffffff;text-decoration:none;font-weight:600;border-radius:50px;background-color:#3B82F6;border:1px solid #3B82F6;\"\u003eTalep Detayn A\u003c/a\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"background-color:#FFF8F0;padding:20px;\"\u003e\u003cp style=\"margin:0 0 8px;color:#9CA3AF;font-size:12px;\"\u003eSorularnz m var? \u003ca href=\"mailto:support@bravita.com.tr\" style=\"color:#F97316;text-decoration:none;\"\u003esupport@bravita.com.tr\u003c/a\u003e\u003c/p\u003e\u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003e 2026 Bravita. Tm haklar sakldr.\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\r\n        \u003c/table\u003e\r\n      \u003c/td\u003e\r\n    \u003c/tr\u003e\r\n  \u003c/table\u003e\r\n\u003c/body\u003e\r\n\u003c/html\u003e\r\n$tpl_support_ticket_replied$\r\n    ),\r\n    (\r\n      'support_ticket_closed',\r\n      'Destek Talebi Kapatld',\r\n      'Destek Talebiniz zmlendi  #{{TICKET_ID}}',\r\n      '[\"TICKET_ID\",\"ADMIN_REPLY\",\"BROWSER_LINK\",\"SITE_URL\",\"NAME\"]'::jsonb,\r\n      $tpl_support_ticket_closed$\r\n\u003c!DOCTYPE html\u003e\r\n\u003chtml lang=\"tr\"\u003e\r\n\u003chead\u003e\r\n  \u003cmeta charset=\"UTF-8\"\u003e\r\n  \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\r\n  \u003cmeta name=\"color-scheme\" content=\"light\"\u003e\r\n  \u003cmeta name=\"supported-color-schemes\" content=\"light\"\u003e\r\n  \u003ctitle\u003eDestek Talebiniz zmlendi\u003c/title\u003e\r\n  \u003clink href=\"https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700;800\u0026family=Nunito:wght@400;600;700;800;900\u0026display=swap\" rel=\"stylesheet\"\u003e\r\n  \u003cstyle\u003e\r\n    :root { color-scheme: light; }\r\n    body { background-color:#FFFBF7 !important; color:#1F2937 !important; font-family:'Baloo 2','Nunito',sans-serif; margin:0; padding:0; }\r\n    @media only screen and (max-width:600px) { .container { width:100% !important; border-radius:0 !important; } .content { padding:30px 20px !important; } }\r\n  \u003c/style\u003e\r\n\u003c/head\u003e\r\n\u003cbody\u003e\r\n  \u003ctable width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#FFFBF7;\"\u003e\r\n    \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:20px 0;\"\u003e\u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003eE-postay grntlemekte sorun mu yayorsunuz? \u003ca href=\"{{BROWSER_LINK}}\" style=\"color:#F97316;text-decoration:none;\"\u003eTaraycda an\u003c/a\u003e\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\r\n    \u003ctr\u003e\r\n      \u003ctd align=\"center\" style=\"padding:0 0 40px;\"\u003e\r\n        \u003ctable class=\"container\" width=\"600\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#ffffff;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.05);overflow:hidden;\"\u003e\r\n          \u003ctr\u003e\u003ctd height=\"6\" style=\"background-color:#22C55E;\"\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:40px 0 20px;\"\u003e\u003cimg src=\"https://xpmbnznsmsujjuwumfiw.supabase.co/storage/v1/object/public/public-assets/bravita-logo.webp\" alt=\"Bravita\" width=\"180\" style=\"display:block;border:0;max-width:100%;height:auto;\" /\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"padding:0 0 20px;\"\u003e\u003cdiv style=\"font-size:64px;line-height:1;\"\u003e\u003c/div\u003e\u003c/td\u003e\u003c/tr\u003e\r\n          \u003ctr\u003e\r\n            \u003ctd class=\"content\" align=\"center\" style=\"padding:0 40px 40px;\"\u003e\r\n              \u003ch1 style=\"margin:0 0 14px;color:#1F2937;font-size:26px;font-weight:700;\"\u003eDestek Talebiniz zmlendi\u003c/h1\u003e\r\n              \u003cp style=\"margin:0 0 24px;color:#4B5563;font-size:16px;line-height:1.6;\"\u003e#{{TICKET_ID}} numaral talebiniz zmlendi ve kapatld. zet bilgi aadadr.\u003c/p\u003e\r\n              \u003cdiv style=\"background-color:#F0FDF4;border:1px solid #DCFCE7;border-radius:12px;padding:20px;margin-bottom:24px;text-align:left;\"\u003e\r\n                \u003cp style=\"margin:0;color:#166534;font-size:14px;line-height:1.6;\"\u003e\u003cstrong\u003eSon Yant:\u003c/strong\u003e\u003cbr\u003e{{ADMIN_REPLY}}\u003c/p\u003e\r\n              \u003c/div\u003e\r\n              \u003ctable border=\"0\" cellspacing=\"0\" cellpadding=\"0\"\u003e\u003ctr\u003e\u003ctd align=\"center\" style=\"border-radius:50px;background-color:#22C55E;\"\u003e\u003ca href=\"{{BROWSER_LINK}}\" style=\"display:inline-block;padding:14px 36px;font-family:'Baloo 2','Nunito',sans-serif;font-size:15px;color:#ffffff;text-decoration:none;font-weight:600;border-radius:50px;background-color:#22C55E;border:1px solid #22C55E;\"\u003eTalep Gemiini A\u003c/a\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\r\n            \u003c/td\u003e\r\n          \u003c/tr\u003e\r\n          \u003ctr\u003e\u003ctd align=\"center\" style=\"background-color:#FFF8F0;padding:20px;\"\u003e\u003cp style=\"margin:0 0 8px;color:#9CA3AF;font-size:12px;\"\u003eSorularnz m var? \u003ca href=\"mailto:support@bravita.com.tr\" style=\"color:#F97316;text-decoration:none;\"\u003esupport@bravita.com.tr\u003c/a\u003e\u003c/p\u003e\u003cp style=\"margin:0;color:#9CA3AF;font-size:12px;\"\u003e 2026 Bravita. Tm haklar sakldr.\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\r\n        \u003c/table\u003e\r\n      \u003c/td\u003e\r\n    \u003c/tr\u003e\r\n  \u003c/table\u003e\r\n\u003c/body\u003e\r\n\u003c/html\u003e\r\n$tpl_support_ticket_closed$\r\n    )\r\n)\r\nUPDATE public.email_templates et\r\nSET\r\n  name = p.name,\r\n  subject = p.subject,\r\n  variables = p.variables,\r\n  content_html = p.content_html,\r\n  updated_at = timezone('utc'::text, now())\r\nFROM payload p\r\nWHERE et.slug = p.slug","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260215000004"},{"text":"email_templates_restore_baseline_designs"},{"binary":"0000000100000000000000190000000300000001000001492d2d20526573746f726520444220656d61696c2074656d706c6174657320746f20686967682d7175616c69747920626173656c696e652064657369676e732e0d0a2d2d20536f75726365206f662076697375616c207374796c653a20656d61696c5f74656d706c617465732f2a20286b65707420756e746f7563686564292e0d0a2d2d20496e636c7564657320726571756972656420636f6d6d6f6e20706172747320696e207261772048544d4c3a0d0a2d2d202d2062726f777365722d76696577206c696e650d0a2d2d202d20737570706f727420636f6e746163740d0a2d2d202d20636f707972696768740d0a2d2d202d206c6f676f0d0a2d2d202d20656d6f6a69206865616465722069636f6e0d0a2d2d202d20636f6e6669726d6174696f6e2066616c6c6261636b206c696e652077686572652072656c6576616e740d0a0d0a424547494e0000f23257495448207061796c6f616420280d0a2020736c75672c0d0a20206e616d652c0d0a20207375626a6563742c0d0a20207661726961626c65732c0d0a2020636f6e74656e745f68746d6c0d0a2920415320280d0a202056414c5545530d0a20202020280d0a20202020202027636f6e6669726d5f7369676e7570272c0d0a20202020202027486573617020446fc49f72756c616d61272c0d0a20202020202027452d706f737461204164726573696e697a6920446fc49f72756c6179c4b16e20f09f9490272c0d0a202020202020275b22434f4e4649524d4154494f4e5f55524c222c2242524f575345525f4c494e4b222c22534954455f55524c225d273a3a6a736f6e622c0d0a2020202020202474706c5f636f6e6669726d5f7369676e7570240d0a3c21444f43545950452068746d6c3e0d0a3c68746d6c206c616e673d227472223e0d0a3c686561643e0d0a20203c6d65746120636861727365743d225554462d38223e0d0a20203c6d657461206e616d653d2276696577706f72742220636f6e74656e743d2277696474683d6465766963652d77696474682c20696e697469616c2d7363616c653d312e30223e0d0a20203c6d657461206e616d653d22636f6c6f722d736368656d652220636f6e74656e743d226c69676874223e0d0a20203c6d657461206e616d653d22737570706f727465642d636f6c6f722d736368656d65732220636f6e74656e743d226c69676874223e0d0a20203c7469746c653e452d706f7374616ec4b17ac4b120446fc49f72756c6179c4b16e3c2f7469746c653e0d0a20203c6c696e6b20687265663d2268747470733a2f2f666f6e74732e676f6f676c65617069732e636f6d2f637373323f66616d696c793d42616c6f6f2b323a77676874403430303b3530303b3630303b3730303b3830302666616d696c793d4e756e69746f3a77676874403430303b3630303b3730303b3830303b39303026646973706c61793d73776170222072656c3d227374796c657368656574223e0d0a20203c7374796c653e0d0a202020203a726f6f74207b20636f6c6f722d736368656d653a206c696768743b207d0d0a20202020626f6479207b206261636b67726f756e642d636f6c6f723a234646464246372021696d706f7274616e743b20636f6c6f723a233146323933372021696d706f7274616e743b20666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b206d617267696e3a303b2070616464696e673a303b202d7765626b69742d666f6e742d736d6f6f7468696e673a616e7469616c69617365643b207d0d0a20202020406d65646961206f6e6c792073637265656e20616e6420286d61782d77696474683a363030707829207b0d0a2020202020202e636f6e7461696e6572207b2077696474683a313030252021696d706f7274616e743b20626f726465722d7261646975733a302021696d706f7274616e743b207d0d0a2020202020202e636f6e74656e74207b2070616464696e673a3330707820323070782021696d706f7274616e743b207d0d0a2020202020202e627574746f6e207b2077696474683a313030252021696d706f7274616e743b20646973706c61793a626c6f636b2021696d706f7274616e743b20746578742d616c69676e3a63656e7465722021696d706f7274616e743b207d0d0a202020207d0d0a20203c2f7374796c653e0d0a3c2f686561643e0d0a3c626f64793e0d0a20203c7461626c652077696474683d22313030252220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a234646464246373b223e0d0a202020203c74723e0d0a2020202020203c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a3230707820303b223e0d0a20202020202020203c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e452d706f73746179c4b12067c3b672c3bc6e74c3bc6c656d656b746520736f72756e206d75207961c59fc4b1796f7273756e757a3f203c6120687265663d227b7b42524f575345525f4c494e4b7d7d22207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e5461726179c4b163c4b164612061c3a7c4b16e3c2f613e3c2f703e0d0a2020202020203c2f74643e0d0a202020203c2f74723e0d0a202020203c74723e0d0a2020202020203c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020343070783b223e0d0a20202020202020203c7461626c6520636c6173733d22636f6e7461696e6572222077696474683d223630302220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a236666666666663b626f726465722d7261646975733a323070783b626f782d736861646f773a3020313070782033307078207267626128302c302c302c302e3035293b6f766572666c6f773a68696464656e3b223e0d0a202020202020202020203c74723e3c7464206865696768743d223622207374796c653d226261636b67726f756e642d636f6c6f723a234639373331363b223e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a34307078203020323070783b223e0d0a20202020202020202020202020203c696d67207372633d2268747470733a2f2f78706d626e7a6e736d73756a6a7577756d6669772e73757061626173652e636f2f73746f726167652f76312f6f626a6563742f7075626c69632f7075626c69632d6173736574732f627261766974612d6c6f676f2e776562702220616c743d2242726176697461222077696474683d2231383022207374796c653d22646973706c61793a626c6f636b3b626f726465723a303b6d61782d77696474683a313030253b6865696768743a6175746f3b22202f3e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020323070783b223e3c646976207374796c653d22666f6e742d73697a653a363470783b6c696e652d6865696768743a313b223ee29c89efb88f3c2f6469763e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420636c6173733d22636f6e74656e742220616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203630707820343070783b223e0d0a20202020202020202020202020203c6831207374796c653d226d617267696e3a30203020323070783b636f6c6f723a233146323933373b666f6e742d73697a653a323670783b666f6e742d7765696768743a3730303b6c65747465722d73706163696e673a2d302e3570783b6c696e652d6865696768743a312e313b223e452d706f7374616ec4b17ac4b120446fc49f72756c6179c4b16e3c2f68313e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a30203020333070783b636f6c6f723a233442353536333b666f6e742d73697a653a313670783b6c696e652d6865696768743a312e363b223e427261766974612064c3bc6e796173c4b16e6120686fc59f2067656c64696e697a2120f09f8e893c62723e4865736162c4b16ec4b17ac4b12067c3bc76656e6365796520616c6d616b20766520616cc4b1c59f76657269c59f65206261c59f6c616d616b2069c3a7696e206cc3bc7466656e2061c59f61c49fc4b164616b69206275746f6e612074c4b16b6c6179c4b16e2e3c2f703e0d0a20202020202020202020202020203c7461626c6520626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d2230223e0d0a202020202020202020202020202020203c74723e0d0a2020202020202020202020202020202020203c746420616c69676e3d2263656e74657222207374796c653d22626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a234639373331363b223e0d0a20202020202020202020202020202020202020203c6120687265663d227b7b434f4e4649524d4154494f4e5f55524c7d7d2220636c6173733d22627574746f6e22207374796c653d22646973706c61793a696e6c696e652d626c6f636b3b70616464696e673a3136707820343870783b666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b666f6e742d73697a653a313670783b636f6c6f723a236666666666663b746578742d6465636f726174696f6e3a6e6f6e653b666f6e742d7765696768743a3630303b626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a234639373331363b626f726465723a31707820736f6c696420234639373331363b223e4865736162c4b16dc4b120446fc49f72756c613c2f613e0d0a2020202020202020202020202020202020203c2f74643e0d0a202020202020202020202020202020203c2f74723e0d0a20202020202020202020202020203c2f7461626c653e0d0a20202020202020202020202020203c646976207374796c653d226d617267696e2d746f703a343070783b626f726465722d746f703a31707820736f6c696420234535453745423b70616464696e672d746f703a323070783b223e0d0a202020202020202020202020202020203c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b6c696e652d6865696768743a312e353b223e4c696e6b20c3a7616cc4b1c59f6dc4b1796f72206d753f2042756e752064656e6579696e3a3c62723e3c6120687265663d227b7b434f4e4649524d4154494f4e5f55524c7d7d22207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b776f72642d627265616b3a627265616b2d616c6c3b223e7b7b434f4e4649524d4154494f4e5f55524c7d7d3c2f613e3c2f703e0d0a20202020202020202020202020203c2f6469763e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420616c69676e3d2263656e74657222207374796c653d226261636b67726f756e642d636f6c6f723a234646463846303b70616464696e673a323070783b223e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a302030203870783b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e536f72756c6172c4b16ec4b17a206dc4b1207661723f203c6120687265663d226d61696c746f3a737570706f727440627261766974612e636f6d2e747222207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e737570706f727440627261766974612e636f6d2e74723c2f613e3c2f703e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223ec2a9203230323620427261766974612e2054c3bc6d2068616b6c6172c4b12073616b6cc4b164c4b1722e3c2f703e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a20202020202020203c2f7461626c653e0d0a2020202020203c2f74643e0d0a202020203c2f74723e0d0a20203c2f7461626c653e0d0a3c2f626f64793e0d0a3c2f68746d6c3e0d0a2474706c5f636f6e6669726d5f7369676e7570240d0a20202020292c0d0a20202020280d0a2020202020202772657365745f70617373776f7264272c0d0a20202020202027c59e696672652053c4b166c4b1726c616d61272c0d0a20202020202027c59e696672652053c4b166c4b1726c616d612054616c6562696e697a20f09f9490272c0d0a202020202020275b22434f4e4649524d4154494f4e5f55524c222c2242524f575345525f4c494e4b222c22534954455f55524c225d273a3a6a736f6e622c0d0a2020202020202474706c5f72657365745f70617373776f7264240d0a3c21444f43545950452068746d6c3e0d0a3c68746d6c206c616e673d227472223e0d0a3c686561643e0d0a20203c6d65746120636861727365743d225554462d38223e0d0a20203c6d657461206e616d653d2276696577706f72742220636f6e74656e743d2277696474683d6465766963652d77696474682c20696e697469616c2d7363616c653d312e30223e0d0a20203c6d657461206e616d653d22636f6c6f722d736368656d652220636f6e74656e743d226c69676874223e0d0a20203c6d657461206e616d653d22737570706f727465642d636f6c6f722d736368656d65732220636f6e74656e743d226c69676874223e0d0a20203c7469746c653ec59e696672656e697a692053c4b166c4b1726c6179c4b16e3c2f7469746c653e0d0a20203c6c696e6b20687265663d2268747470733a2f2f666f6e74732e676f6f676c65617069732e636f6d2f637373323f66616d696c793d42616c6f6f2b323a77676874403430303b3530303b3630303b3730303b3830302666616d696c793d4e756e69746f3a77676874403430303b3630303b3730303b3830303b39303026646973706c61793d73776170222072656c3d227374796c657368656574223e0d0a20203c7374796c653e0d0a202020203a726f6f74207b20636f6c6f722d736368656d653a206c696768743b207d0d0a20202020626f6479207b206261636b67726f756e642d636f6c6f723a234646464246372021696d706f7274616e743b20636f6c6f723a233146323933372021696d706f7274616e743b20666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b206d617267696e3a303b2070616464696e673a303b202d7765626b69742d666f6e742d736d6f6f7468696e673a616e7469616c69617365643b207d0d0a20202020406d65646961206f6e6c792073637265656e20616e6420286d61782d77696474683a363030707829207b0d0a2020202020202e636f6e7461696e6572207b2077696474683a313030252021696d706f7274616e743b20626f726465722d7261646975733a302021696d706f7274616e743b207d0d0a2020202020202e636f6e74656e74207b2070616464696e673a3330707820323070782021696d706f7274616e743b207d0d0a2020202020202e627574746f6e207b2077696474683a313030252021696d706f7274616e743b20646973706c61793a626c6f636b2021696d706f7274616e743b20746578742d616c69676e3a63656e7465722021696d706f7274616e743b207d0d0a202020207d0d0a20203c2f7374796c653e0d0a3c2f686561643e0d0a3c626f64793e0d0a20203c7461626c652077696474683d22313030252220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a234646464246373b223e0d0a202020203c74723e0d0a2020202020203c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a3230707820303b223e0d0a20202020202020203c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e452d706f73746179c4b12067c3b672c3bc6e74c3bc6c656d656b746520736f72756e206d75207961c59fc4b1796f7273756e757a3f203c6120687265663d227b7b42524f575345525f4c494e4b7d7d22207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e5461726179c4b163c4b164612061c3a7c4b16e3c2f613e3c2f703e0d0a2020202020203c2f74643e0d0a202020203c2f74723e0d0a202020203c74723e0d0a2020202020203c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020343070783b223e0d0a20202020202020203c7461626c6520636c6173733d22636f6e7461696e6572222077696474683d223630302220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a236666666666663b626f726465722d7261646975733a323070783b626f782d736861646f773a3020313070782033307078207267626128302c302c302c302e3035293b6f766572666c6f773a68696464656e3b223e0d0a202020202020202020203c74723e3c7464206865696768743d223622207374796c653d226261636b67726f756e642d636f6c6f723a234639373331363b223e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a34307078203020323070783b223e0d0a20202020202020202020202020203c696d67207372633d2268747470733a2f2f78706d626e7a6e736d73756a6a7577756d6669772e73757061626173652e636f2f73746f726167652f76312f6f626a6563742f7075626c69632f7075626c69632d6173736574732f627261766974612d6c6f676f2e776562702220616c743d2242726176697461222077696474683d2231383022207374796c653d22646973706c61793a626c6f636b3b626f726465723a303b6d61782d77696474683a313030253b6865696768743a6175746f3b22202f3e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020323070783b223e3c646976207374796c653d22666f6e742d73697a653a363470783b6c696e652d6865696768743a313b223ef09f94923c2f6469763e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420636c6173733d22636f6e74656e742220616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203630707820343070783b223e0d0a20202020202020202020202020203c6831207374796c653d226d617267696e3a30203020323070783b636f6c6f723a233146323933373b666f6e742d73697a653a323670783b666f6e742d7765696768743a3730303b223ec59e696672652059656e696c656d652054616c6562693c2f68313e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a30203020333070783b636f6c6f723a233442353536333b666f6e742d73697a653a313670783b6c696e652d6865696768743a312e363b223ec59e696672656e697a6920756e75747475c49f756e757a752064757964756b2e20456e6469c59f656c656e6d6579696e2c2061c59f61c49fc4b164616b69206275746f6e612074c4b16b6c61796172616b2068656d656e2079656e692062697220c59f696672652062656c69726c65796562696c697273696e697a2e3c2f703e0d0a20202020202020202020202020203c7461626c6520626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d2230223e0d0a202020202020202020202020202020203c74723e0d0a2020202020202020202020202020202020203c746420616c69676e3d2263656e74657222207374796c653d22626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a234639373331363b223e0d0a20202020202020202020202020202020202020203c6120687265663d227b7b434f4e4649524d4154494f4e5f55524c7d7d2220636c6173733d22627574746f6e22207374796c653d22646973706c61793a696e6c696e652d626c6f636b3b70616464696e673a3136707820343870783b666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b666f6e742d73697a653a313670783b636f6c6f723a236666666666663b746578742d6465636f726174696f6e3a6e6f6e653b666f6e742d7765696768743a3630303b626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a234639373331363b626f726465723a31707820736f6c696420234639373331363b223ec59e696672656d692053c4b166c4b1726c613c2f613e0d0a2020202020202020202020202020202020203c2f74643e0d0a202020202020202020202020202020203c2f74723e0d0a20202020202020202020202020203c2f7461626c653e0d0a20202020202020202020202020203c646976207374796c653d226d617267696e2d746f703a343070783b626f726465722d746f703a31707820736f6c696420234535453745423b70616464696e672d746f703a323070783b223e0d0a202020202020202020202020202020203c70207374796c653d226d617267696e3a30203020313070783b636f6c6f723a234546343434343b666f6e742d73697a653a313370783b666f6e742d7765696768743a3630303b6261636b67726f756e643a234645463246323b646973706c61793a696e6c696e652d626c6f636b3b70616464696e673a34707820313070783b626f726465722d7261646975733a3470783b223ee29aa0efb88f2047c3bc76656e6c696b204e6f74753c2f703e0d0a202020202020202020202020202020203c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b6c696e652d6865696768743a312e353b223e42752074616c6562692073697a207961706d6164c4b17973616ec4b17a2c206865736162c4b16ec4b17a2067c3bc76656e64656469722e204275206d6573616ac4b12073696c6562696c697273696e697a2e3c62723e3c62723e4c696e6b20c3a7616cc4b1c59f6dc4b1796f72206d753f3c62723e3c6120687265663d227b7b434f4e4649524d4154494f4e5f55524c7d7d22207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b776f72642d627265616b3a627265616b2d616c6c3b223e7b7b434f4e4649524d4154494f4e5f55524c7d7d3c2f613e3c2f703e0d0a20202020202020202020202020203c2f6469763e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420616c69676e3d2263656e74657222207374796c653d226261636b67726f756e642d636f6c6f723a234646463846303b70616464696e673a323070783b223e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a302030203870783b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e536f72756c6172c4b16ec4b17a206dc4b1207661723f203c6120687265663d226d61696c746f3a737570706f727440627261766974612e636f6d2e747222207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e737570706f727440627261766974612e636f6d2e74723c2f613e3c2f703e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223ec2a9203230323620427261766974612e2054c3bc6d2068616b6c6172c4b12073616b6cc4b164c4b1722e3c2f703e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a20202020202020203c2f7461626c653e0d0a2020202020203c2f74643e0d0a202020203c2f74723e0d0a20203c2f7461626c653e0d0a3c2f626f64793e0d0a3c2f68746d6c3e0d0a2474706c5f72657365745f70617373776f7264240d0a20202020292c0d0a20202020280d0a2020202020202770617373776f72645f6368616e676564272c0d0a20202020202027c59e69667265204465c49f69c59f746972696c6469272c0d0a20202020202027c59e696672656e697a204261c59f6172c4b1796c612047c3bc6e63656c6c656e646920f09f9490272c0d0a202020202020275b22534954455f55524c222c2242524f575345525f4c494e4b225d273a3a6a736f6e622c0d0a2020202020202474706c5f70617373776f72645f6368616e676564240d0a3c21444f43545950452068746d6c3e0d0a3c68746d6c206c616e673d227472223e0d0a3c686561643e0d0a20203c6d65746120636861727365743d225554462d38223e0d0a20203c6d657461206e616d653d2276696577706f72742220636f6e74656e743d2277696474683d6465766963652d77696474682c20696e697469616c2d7363616c653d312e30223e0d0a20203c6d657461206e616d653d22636f6c6f722d736368656d652220636f6e74656e743d226c69676874223e0d0a20203c6d657461206e616d653d22737570706f727465642d636f6c6f722d736368656d65732220636f6e74656e743d226c69676874223e0d0a20203c7469746c653ec59e696672656e697a204465c49f69c59f746972696c64693c2f7469746c653e0d0a20203c6c696e6b20687265663d2268747470733a2f2f666f6e74732e676f6f676c65617069732e636f6d2f637373323f66616d696c793d42616c6f6f2b323a77676874403430303b3530303b3630303b3730303b3830302666616d696c793d4e756e69746f3a77676874403430303b3630303b3730303b3830303b39303026646973706c61793d73776170222072656c3d227374796c657368656574223e0d0a20203c7374796c653e0d0a202020203a726f6f74207b20636f6c6f722d736368656d653a206c696768743b207d0d0a20202020626f6479207b206261636b67726f756e642d636f6c6f723a234646464246372021696d706f7274616e743b20636f6c6f723a233146323933372021696d706f7274616e743b20666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b206d617267696e3a303b2070616464696e673a303b202d7765626b69742d666f6e742d736d6f6f7468696e673a616e7469616c69617365643b207d0d0a20202020406d65646961206f6e6c792073637265656e20616e6420286d61782d77696474683a363030707829207b0d0a2020202020202e636f6e7461696e6572207b2077696474683a313030252021696d706f7274616e743b20626f726465722d7261646975733a302021696d706f7274616e743b207d0d0a2020202020202e636f6e74656e74207b2070616464696e673a3330707820323070782021696d706f7274616e743b207d0d0a2020202020202e627574746f6e207b2077696474683a313030252021696d706f7274616e743b20646973706c61793a626c6f636b2021696d706f7274616e743b20746578742d616c69676e3a63656e7465722021696d706f7274616e743b207d0d0a202020207d0d0a20203c2f7374796c653e0d0a3c2f686561643e0d0a3c626f64793e0d0a20203c7461626c652077696474683d22313030252220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a234646464246373b223e0d0a202020203c74723e0d0a2020202020203c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a3230707820303b223e0d0a20202020202020203c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e452d706f73746179c4b12067c3b672c3bc6e74c3bc6c656d656b746520736f72756e206d75207961c59fc4b1796f7273756e757a3f203c6120687265663d227b7b42524f575345525f4c494e4b7d7d22207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e5461726179c4b163c4b164612061c3a7c4b16e3c2f613e3c2f703e0d0a2020202020203c2f74643e0d0a202020203c2f74723e0d0a202020203c74723e0d0a2020202020203c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020343070783b223e0d0a20202020202020203c7461626c6520636c6173733d22636f6e7461696e6572222077696474683d223630302220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a236666666666663b626f726465722d7261646975733a323070783b626f782d736861646f773a3020313070782033307078207267626128302c302c302c302e3035293b6f766572666c6f773a68696464656e3b223e0d0a202020202020202020203c74723e3c7464206865696768743d223622207374796c653d226261636b67726f756e642d636f6c6f723a233232433535453b223e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a34307078203020323070783b223e0d0a20202020202020202020202020203c696d67207372633d2268747470733a2f2f78706d626e7a6e736d73756a6a7577756d6669772e73757061626173652e636f2f73746f726167652f76312f6f626a6563742f7075626c69632f7075626c69632d6173736574732f627261766974612d6c6f676f2e776562702220616c743d2242726176697461222077696474683d2231383022207374796c653d22646973706c61793a626c6f636b3b626f726465723a303b6d61782d77696474683a313030253b6865696768743a6175746f3b22202f3e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020323070783b223e3c646976207374796c653d22666f6e742d73697a653a363470783b6c696e652d6865696768743a313b223ee29c853c2f6469763e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420636c6173733d22636f6e74656e742220616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203630707820343070783b223e0d0a20202020202020202020202020203c6831207374796c653d226d617267696e3a30203020323070783b636f6c6f723a233146323933373b666f6e742d73697a653a323670783b666f6e742d7765696768743a3730303b223ec59e696672656e697a204261c59f6172c4b1796c61204465c49f69c59f746972696c64693c2f68313e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a30203020333070783b636f6c6f723a233442353536333b666f6e742d73697a653a313670783b6c696e652d6865696768743a312e363b223e4865736162c4b16ec4b17ac4b16e20c59f696672657369206bc4b173612073c3bc726520c3b66e63652067c3bc6e63656c6c656e64692e20417274c4b16b2079656e6920c59f696672656e697a6c652067697269c59f207961706162696c697273696e697a2e3c2f703e0d0a20202020202020202020202020203c7461626c6520626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d2230223e0d0a202020202020202020202020202020203c74723e0d0a2020202020202020202020202020202020203c746420616c69676e3d2263656e74657222207374796c653d22626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a233232433535453b223e0d0a20202020202020202020202020202020202020203c6120687265663d227b7b534954455f55524c7d7d2220636c6173733d22627574746f6e22207374796c653d22646973706c61793a696e6c696e652d626c6f636b3b70616464696e673a3136707820343870783b666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b666f6e742d73697a653a313670783b636f6c6f723a236666666666663b746578742d6465636f726174696f6e3a6e6f6e653b666f6e742d7765696768743a3630303b626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a233232433535453b626f726465723a31707820736f6c696420233232433535453b223e47697269c59f205961703c2f613e0d0a2020202020202020202020202020202020203c2f74643e0d0a202020202020202020202020202020203c2f74723e0d0a20202020202020202020202020203c2f7461626c653e0d0a20202020202020202020202020203c646976207374796c653d226d617267696e2d746f703a343070783b626f726465722d746f703a31707820736f6c696420234535453745423b70616464696e672d746f703a323070783b223e0d0a202020202020202020202020202020203c70207374796c653d226d617267696e3a30203020313070783b636f6c6f723a234546343434343b666f6e742d73697a653a313370783b666f6e742d7765696768743a3630303b6261636b67726f756e643a234645463246323b646973706c61793a696e6c696e652d626c6f636b3b70616464696e673a34707820313070783b626f726465722d7261646975733a3470783b223ee29aa0efb88f20c3966e656d6c692047c3bc76656e6c696b2055796172c4b173c4b13c2f703e0d0a202020202020202020202020202020203c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b6c696e652d6865696768743a312e353b223e3c7374726f6e673e45c49f65722062752069c59f6c656d692073697a207961706d6164c4b17973616ec4b17a2c206865736162c4b16ec4b17a207465686c696b656465206f6c6162696c69722e3c2f7374726f6e673e3c62723e4cc3bc7466656e2064657268616c203c6120687265663d226d61696c746f3a737570706f727440627261766974612e636f6d2e747222207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e64657374656b20656b6962696d697a6c653c2f613e20696c657469c59f696d65206765c3a7696e2e3c2f703e0d0a20202020202020202020202020203c2f6469763e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420616c69676e3d2263656e74657222207374796c653d226261636b67726f756e642d636f6c6f723a234646463846303b70616464696e673a323070783b223e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a302030203870783b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e536f72756c6172c4b16ec4b17a206dc4b1207661723f203c6120687265663d226d61696c746f3a737570706f727440627261766974612e636f6d2e747222207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e737570706f727440627261766974612e636f6d2e74723c2f613e3c2f703e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223ec2a9203230323620427261766974612e2054c3bc6d2068616b6c6172c4b12073616b6cc4b164c4b1722e3c2f703e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a20202020202020203c2f7461626c653e0d0a2020202020203c2f74643e0d0a202020203c2f74723e0d0a20203c2f7461626c653e0d0a3c2f626f64793e0d0a3c2f68746d6c3e0d0a2474706c5f70617373776f72645f6368616e676564240d0a20202020292c0d0a20202020280d0a2020202020202777656c636f6d655f74656d706c617465272c0d0a20202020202027486fc59f2047656c64696e697a272c0d0a20202020202027427261766974612727796120486fc59f2047656c64696e697a20f09f8e89272c0d0a202020202020275b224e414d45222c22534954455f55524c222c22554e5355425343524942455f55524c222c2242524f575345525f4c494e4b225d273a3a6a736f6e622c0d0a2020202020202474706c5f77656c636f6d65240d0a3c21444f43545950452068746d6c3e0d0a3c68746d6c206c616e673d227472223e0d0a3c686561643e0d0a20203c6d65746120636861727365743d225554462d38223e0d0a20203c6d657461206e616d653d2276696577706f72742220636f6e74656e743d2277696474683d6465766963652d77696474682c20696e697469616c2d7363616c653d312e30223e0d0a20203c6d657461206e616d653d22636f6c6f722d736368656d652220636f6e74656e743d226c69676874223e0d0a20203c6d657461206e616d653d22737570706f727465642d636f6c6f722d736368656d65732220636f6e74656e743d226c69676874223e0d0a20203c7469746c653e427261766974612727796120486fc59f2047656c64696e697a213c2f7469746c653e0d0a20203c6c696e6b20687265663d2268747470733a2f2f666f6e74732e676f6f676c65617069732e636f6d2f637373323f66616d696c793d42616c6f6f2b323a77676874403430303b3530303b3630303b3730303b3830302666616d696c793d4e756e69746f3a77676874403430303b3630303b3730303b3830303b39303026646973706c61793d73776170222072656c3d227374796c657368656574223e0d0a20203c7374796c653e0d0a202020203a726f6f74207b20636f6c6f722d736368656d653a206c696768743b207d0d0a20202020626f6479207b206261636b67726f756e642d636f6c6f723a234646464246372021696d706f7274616e743b20636f6c6f723a233146323933372021696d706f7274616e743b20666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c2d6170706c652d73797374656d2c426c696e6b4d616353797374656d466f6e742c275365676f65205549272c526f626f746f2c48656c7665746963612c417269616c2c73616e732d73657269663b206d617267696e3a303b2070616464696e673a303b202d7765626b69742d666f6e742d736d6f6f7468696e673a616e7469616c69617365643b207d0d0a20202020406d65646961206f6e6c792073637265656e20616e6420286d61782d77696474683a363030707829207b0d0a2020202020202e636f6e7461696e6572207b2077696474683a313030252021696d706f7274616e743b20626f726465722d7261646975733a302021696d706f7274616e743b207d0d0a2020202020202e636f6e74656e74207b2070616464696e673a3330707820323070782021696d706f7274616e743b207d0d0a2020202020202e627574746f6e207b2077696474683a313030252021696d706f7274616e743b20646973706c61793a626c6f636b2021696d706f7274616e743b20746578742d616c69676e3a63656e7465722021696d706f7274616e743b207d0d0a202020207d0d0a20203c2f7374796c653e0d0a3c2f686561643e0d0a3c626f64793e0d0a20203c7461626c652077696474683d22313030252220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a234646464246373b223e0d0a202020203c74723e0d0a2020202020203c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a3230707820303b223e0d0a20202020202020203c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e452d706f73746179c4b12067c3b672c3bc6e74c3bc6c656d656b746520736f72756e206d75207961c59fc4b1796f7273756e757a3f203c6120687265663d227b7b42524f575345525f4c494e4b7d7d22207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e5461726179c4b163c4b164612061c3a7c4b16e3c2f613e3c2f703e0d0a2020202020203c2f74643e0d0a202020203c2f74723e0d0a202020203c74723e0d0a2020202020203c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020343070783b223e0d0a20202020202020203c7461626c6520636c6173733d22636f6e7461696e6572222077696474683d223630302220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a236666666666663b626f726465722d7261646975733a323070783b626f782d736861646f773a3020313070782033307078207267626128302c302c302c302e3035293b6f766572666c6f773a68696464656e3b223e0d0a202020202020202020203c74723e3c7464206865696768743d223622207374796c653d226261636b67726f756e642d636f6c6f723a234639373331363b223e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a34307078203020323070783b223e0d0a20202020202020202020202020203c696d67207372633d2268747470733a2f2f78706d626e7a6e736d73756a6a7577756d6669772e73757061626173652e636f2f73746f726167652f76312f6f626a6563742f7075626c69632f7075626c69632d6173736574732f627261766974612d6c6f676f2e776562702220616c743d2242726176697461222077696474683d2231383022207374796c653d22646973706c61793a626c6f636b3b626f726465723a303b6d61782d77696474683a313030253b6865696768743a6175746f3b22202f3e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020323070783b223e3c646976207374796c653d22666f6e742d73697a653a363470783b6c696e652d6865696768743a313b223ef09fa6993c2f6469763e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420636c6173733d22636f6e74656e742220616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203630707820343070783b223e0d0a20202020202020202020202020203c6831207374796c653d226d617267696e3a30203020323070783b636f6c6f723a233146323933373b666f6e742d73697a653a323670783b666f6e742d7765696768743a3730303b6c65747465722d73706163696e673a2d302e3570783b223e4172616dc4b17a6120486fc59f2047656c64696e697a2c207b7b4e414d457d7d213c2f68313e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a30203020333070783b636f6c6f723a233442353536333b666f6e742d73697a653a313670783b6c696e652d6865696768743a312e363b223e427261766974612061696c6573696e65206b6174c4b16c64c4b1c49fc4b16ec4b17a2069c3a7696e20c3a76f6b206d75746c7579757a2e20417274c4b16b2067656c656365c49f65206f64616b6cc4b12062c3bc79c3bc6d652076652073c3bc7264c3bc72c3bc6c6562696c6972206261c59f6172c4b120796f6c63756c75c49f756d757a756e2062697220706172c3a76173c4b173c4b16ec4b17a2e3c2f703e0d0a20202020202020202020202020203c7461626c6520626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d2230223e0d0a202020202020202020202020202020203c74723e0d0a2020202020202020202020202020202020203c746420616c69676e3d2263656e74657222207374796c653d22626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a234639373331363b223e0d0a20202020202020202020202020202020202020203c6120687265663d227b7b534954455f55524c7d7d2220636c6173733d22627574746f6e22207374796c653d22646973706c61793a696e6c696e652d626c6f636b3b70616464696e673a3136707820343870783b666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b666f6e742d73697a653a313670783b636f6c6f723a236666666666663b746578742d6465636f726174696f6e3a6e6f6e653b666f6e742d7765696768743a3630303b626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a234639373331363b626f726465723a31707820736f6c696420234639373331363b223e42726176697461272779c4b1204b65c59f6665743c2f613e0d0a2020202020202020202020202020202020203c2f74643e0d0a202020202020202020202020202020203c2f74723e0d0a20202020202020202020202020203c2f7461626c653e0d0a20202020202020202020202020203c646976207374796c653d226d617267696e2d746f703a343070783b626f726465722d746f703a31707820736f6c696420234535453745423b70616464696e672d746f703a333070783b746578742d616c69676e3a6c6566743b223e0d0a202020202020202020202020202020203c70207374796c653d226d617267696e3a30203020313070783b636f6c6f723a233146323933373b666f6e742d7765696768743a3630303b223e4272617669746120696c65206e656c6572207961706162696c697273696e697a3f3c2f703e0d0a202020202020202020202020202020203c756c207374796c653d226d617267696e3a303b70616464696e673a302030203020323070783b636f6c6f723a233442353536333b666f6e742d73697a653a313470783b6c696e652d6865696768743a312e383b223e0d0a2020202020202020202020202020202020203c6c693e456e2079656e6920c3bc72c3bc6e6c657264656e20766520696e646972696d6c657264656e20696c6b2073697a206861626572646172206f6c756e2e3c2f6c693e0d0a2020202020202020202020202020202020203c6c693e4865736162c4b16ec4b17ac4b12079c3b66e65746572656b20736970617269c59f6c6572696e697a692074616b6970206564696e2e3c2f6c693e0d0a2020202020202020202020202020202020203c6c693e53697a6520c3b67a656c206b616d70616e79616c617264616e2066617964616c616e6d617961206261c59f6c6179c4b16e2e3c2f6c693e0d0a202020202020202020202020202020203c2f756c3e0d0a20202020202020202020202020203c2f6469763e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420616c69676e3d2263656e74657222207374796c653d226261636b67726f756e642d636f6c6f723a234646463846303b70616464696e673a323070783b223e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a302030203870783b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e536f72756c6172c4b16ec4b17a206dc4b1207661723f203c6120687265663d226d61696c746f3a737570706f727440627261766974612e636f6d2e747222207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e737570706f727440627261766974612e636f6d2e74723c2f613e3c2f703e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a302030203870783b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223ec2a9203230323620427261766974612e2054c3bc6d2068616b6c6172c4b12073616b6cc4b164c4b1722e3c2f703e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a303b666f6e742d73697a653a313270783b223e3c6120687265663d227b7b554e5355425343524942455f55524c7d7d22207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e41626f6e656c696b74656e20417972c4b16c3c2f613e3c2f703e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a20202020202020203c2f7461626c653e0d0a2020202020203c2f74643e0d0a202020203c2f74723e0d0a20203c2f7461626c653e0d0a3c2f626f64793e0d0a3c2f68746d6c3e0d0a2474706c5f77656c636f6d65240d0a20202020292c0d0a20202020280d0a202020202020276f726465725f636f6e6669726d6174696f6e272c0d0a20202020202027536970617269c59f204f6e6179c4b1272c0d0a20202020202027536970617269c59f696e697a20416cc4b16e64c4b120f09fa7be20237b7b4f524445525f49447d7d272c0d0a202020202020275b224f524445525f4944222c224f524445525f44415445222c224954454d535f4c495354222c22535542544f54414c222c22444953434f554e54222c22544158222c22544f54414c222c225348495050494e475f41444452455353222c225041594d454e545f4d4554484f44222c2242414e4b5f44455441494c53222c2242524f575345525f4c494e4b222c22534954455f55524c225d273a3a6a736f6e622c0d0a2020202020202474706c5f6f726465725f636f6e6669726d6174696f6e240d0a3c21444f43545950452068746d6c3e0d0a3c68746d6c206c616e673d227472223e0d0a3c686561643e0d0a20203c6d65746120636861727365743d225554462d38223e0d0a20203c6d657461206e616d653d2276696577706f72742220636f6e74656e743d2277696474683d6465766963652d77696474682c20696e697469616c2d7363616c653d312e30223e0d0a20203c6d657461206e616d653d22636f6c6f722d736368656d652220636f6e74656e743d226c69676874223e0d0a20203c6d657461206e616d653d22737570706f727465642d636f6c6f722d736368656d65732220636f6e74656e743d226c69676874223e0d0a20203c7469746c653e536970617269c59f696e697a204f6e61796c616e64c4b13c2f7469746c653e0d0a20203c6c696e6b20687265663d2268747470733a2f2f666f6e74732e676f6f676c65617069732e636f6d2f637373323f66616d696c793d42616c6f6f2b323a77676874403430303b3530303b3630303b3730303b3830302666616d696c793d4e756e69746f3a77676874403430303b3630303b3730303b3830303b39303026646973706c61793d73776170222072656c3d227374796c657368656574223e0d0a20203c7374796c653e0d0a202020203a726f6f74207b20636f6c6f722d736368656d653a206c696768743b207d0d0a20202020626f6479207b206261636b67726f756e642d636f6c6f723a234646464246372021696d706f7274616e743b20636f6c6f723a233146323933372021696d706f7274616e743b20666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b206d617267696e3a303b2070616464696e673a303b207d0d0a202020202e6974656d2d726f77207464207b20626f726465722d626f74746f6d3a31707820736f6c696420234633463446363b2070616464696e673a3136707820303b207d0d0a202020202e6974656d2d726f773a6c6173742d6368696c64207464207b20626f726465722d626f74746f6d3a6e6f6e653b207d0d0a20202020406d65646961206f6e6c792073637265656e20616e6420286d61782d77696474683a363030707829207b0d0a2020202020202e636f6e7461696e6572207b2077696474683a313030252021696d706f7274616e743b20626f726465722d7261646975733a302021696d706f7274616e743b207d0d0a2020202020202e636f6e74656e74207b2070616464696e673a3330707820323070782021696d706f7274616e743b207d0d0a2020202020202e726573706f6e736976652d7461626c65207b2077696474683a313030252021696d706f7274616e743b207d0d0a202020207d0d0a20203c2f7374796c653e0d0a3c2f686561643e0d0a3c626f64793e0d0a20203c7461626c652077696474683d22313030252220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a234646464246373b223e0d0a202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a3230707820303b223e3c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e452d706f73746179c4b12067c3b672c3bc6e74c3bc6c656d656b746520736f72756e206d75207961c59fc4b1796f7273756e757a3f203c6120687265663d227b7b42524f575345525f4c494e4b7d7d22207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e5461726179c4b163c4b164612061c3a7c4b16e3c2f613e3c2f703e3c2f74643e3c2f74723e0d0a202020203c74723e0d0a2020202020203c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020343070783b223e0d0a20202020202020203c7461626c6520636c6173733d22636f6e7461696e6572222077696474683d223630302220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a236666666666663b626f726465722d7261646975733a323070783b626f782d736861646f773a3020313070782033307078207267626128302c302c302c302e3035293b6f766572666c6f773a68696464656e3b223e0d0a202020202020202020203c74723e3c7464206865696768743d223622207374796c653d226261636b67726f756e642d636f6c6f723a233232433535453b223e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a34307078203020323070783b223e3c696d67207372633d2268747470733a2f2f78706d626e7a6e736d73756a6a7577756d6669772e73757061626173652e636f2f73746f726167652f76312f6f626a6563742f7075626c69632f7075626c69632d6173736574732f627261766974612d6c6f676f2e776562702220616c743d2242726176697461222077696474683d2231383022207374796c653d22646973706c61793a626c6f636b3b626f726465723a303b6d61782d77696474683a313030253b6865696768743a6175746f3b22202f3e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020323070783b223e3c646976207374796c653d22666f6e742d73697a653a363470783b6c696e652d6865696768743a313b223ef09f8e893c2f6469763e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420636c6173733d22636f6e74656e742220616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203430707820343070783b223e0d0a20202020202020202020202020203c6831207374796c653d226d617267696e3a30203020313070783b636f6c6f723a233146323933373b666f6e742d73697a653a323670783b666f6e742d7765696768743a3730303b223e536970617269c59f696e697a204f6e61796c616e64c4b1213c2f68313e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a30203020333070783b636f6c6f723a233442353536333b666f6e742d73697a653a313670783b6c696e652d6865696768743a312e363b223e536970617269c59f696e697a206261c59f6172c4b1796c6120616cc4b16e64c4b12076652068617ac4b1726c616e6d617961206261c59f6c616e64c4b12e3c2f703e0d0a20202020202020202020202020203c7461626c652077696474683d22313030252220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a234639464146423b626f726465722d7261646975733a313270783b6d617267696e2d626f74746f6d3a333070783b70616464696e673a323070783b223e0d0a202020202020202020202020202020203c74723e0d0a2020202020202020202020202020202020203c746420616c69676e3d226c65667422207374796c653d2270616464696e672d626f74746f6d3a3870783b223e3c7370616e207374796c653d22636f6c6f723a233642373238303b666f6e742d73697a653a313370783b666f6e742d7765696768743a3630303b746578742d7472616e73666f726d3a7570706572636173653b223e536970617269c59f204e6f3c2f7370616e3e3c62723e3c7370616e207374796c653d22636f6c6f723a233131313832373b666f6e742d73697a653a313670783b666f6e742d7765696768743a3730303b223e237b7b4f524445525f49447d7d3c2f7370616e3e3c2f74643e0d0a2020202020202020202020202020202020203c746420616c69676e3d22726967687422207374796c653d2270616464696e672d626f74746f6d3a3870783b223e3c7370616e207374796c653d22636f6c6f723a233642373238303b666f6e742d73697a653a313370783b666f6e742d7765696768743a3630303b746578742d7472616e73666f726d3a7570706572636173653b223e54617269683c2f7370616e3e3c62723e3c7370616e207374796c653d22636f6c6f723a233131313832373b666f6e742d73697a653a313670783b666f6e742d7765696768743a3730303b223e7b7b4f524445525f444154457d7d3c2f7370616e3e3c2f74643e0d0a202020202020202020202020202020203c2f74723e0d0a20202020202020202020202020203c2f7461626c653e0d0a20202020202020202020202020203c646976207374796c653d22746578742d616c69676e3a6c6566743b6d617267696e2d626f74746f6d3a333070783b223e0d0a202020202020202020202020202020203c6833207374796c653d226d617267696e3a30203020313570783b636f6c6f723a234639373331363b666f6e742d73697a653a313670783b666f6e742d7765696768743a3730303b746578742d7472616e73666f726d3a7570706572636173653b6c65747465722d73706163696e673a302e3570783b223e536970617269c59f2044657461796c6172c4b13c2f68333e0d0a202020202020202020202020202020203c7461626c652077696474683d22313030252220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d2230223e7b7b4954454d535f4c4953547d7d3c2f7461626c653e0d0a20202020202020202020202020203c2f6469763e0d0a20202020202020202020202020203c7461626c652077696474683d22313030252220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226d617267696e2d626f74746f6d3a333070783b223e0d0a202020202020202020202020202020203c74723e3c7464207374796c653d2270616464696e673a38707820303b636f6c6f723a233642373238303b666f6e742d73697a653a313470783b223e41726120546f706c616d3c2f74643e3c746420616c69676e3d22726967687422207374796c653d2270616464696e673a38707820303b636f6c6f723a233131313832373b666f6e742d73697a653a313470783b666f6e742d7765696768743a3630303b223ee282ba7b7b535542544f54414c7d7d3c2f74643e3c2f74723e0d0a202020202020202020202020202020203c74723e3c7464207374796c653d2270616464696e673a38707820303b636f6c6f723a233232433535453b666f6e742d73697a653a313470783b223ec4b06e646972696d3c2f74643e3c746420616c69676e3d22726967687422207374796c653d2270616464696e673a38707820303b636f6c6f723a233232433535453b666f6e742d73697a653a313470783b666f6e742d7765696768743a3630303b223e2de282ba7b7b444953434f554e547d7d3c2f74643e3c2f74723e0d0a202020202020202020202020202020203c74723e3c7464207374796c653d2270616464696e673a38707820303b636f6c6f723a233642373238303b666f6e742d73697a653a313470783b223e4b44562028253230293c2f74643e3c746420616c69676e3d22726967687422207374796c653d2270616464696e673a38707820303b636f6c6f723a233131313832373b666f6e742d73697a653a313470783b666f6e742d7765696768743a3630303b223ee282ba7b7b5441587d7d3c2f74643e3c2f74723e0d0a202020202020202020202020202020203c74723e3c7464207374796c653d22626f726465722d746f703a31707820736f6c696420234535453745423b70616464696e673a31367078203020303b636f6c6f723a233131313832373b666f6e742d73697a653a313870783b666f6e742d7765696768743a3830303b223e546f706c616d3c2f74643e3c746420616c69676e3d22726967687422207374796c653d22626f726465722d746f703a31707820736f6c696420234535453745423b70616464696e673a31367078203020303b636f6c6f723a234639373331363b666f6e742d73697a653a323470783b666f6e742d7765696768743a3830303b223ee282ba7b7b544f54414c7d7d3c2f74643e3c2f74723e0d0a20202020202020202020202020203c2f7461626c653e0d0a20202020202020202020202020203c646976207374796c653d22746578742d616c69676e3a6c6566743b6261636b67726f756e642d636f6c6f723a234646463745443b70616464696e673a323070783b626f726465722d7261646975733a313270783b626f726465723a31707820736f6c696420234646454444353b223e0d0a202020202020202020202020202020203c6833207374796c653d226d617267696e3a30203020313070783b636f6c6f723a234541353830433b666f6e742d73697a653a313470783b666f6e742d7765696768743a3730303b746578742d7472616e73666f726d3a7570706572636173653b223e5465736c696d6174204164726573693c2f68333e0d0a202020202020202020202020202020203c70207374796c653d226d617267696e3a303b636f6c6f723a233433313430373b666f6e742d73697a653a313470783b6c696e652d6865696768743a312e363b223e7b7b5348495050494e475f414444524553537d7d3c2f703e0d0a20202020202020202020202020203c2f6469763e0d0a20202020202020202020202020207b7b42414e4b5f44455441494c537d7d0d0a20202020202020202020202020203c646976207374796c653d226d617267696e2d746f703a323070783b746578742d616c69676e3a63656e7465723b223e3c70207374796c653d22636f6c6f723a233642373238303b666f6e742d73697a653a313370783b223ec39664656d652059c3b66e74656d693a203c7374726f6e673e7b7b5041594d454e545f4d4554484f447d7d3c2f7374726f6e673e3c2f703e3c2f6469763e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420616c69676e3d2263656e74657222207374796c653d226261636b67726f756e642d636f6c6f723a234646463846303b70616464696e673a323070783b223e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a302030203870783b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e536f72756c6172c4b16ec4b17a206dc4b1207661723f203c6120687265663d226d61696c746f3a737570706f727440627261766974612e636f6d2e747222207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e737570706f727440627261766974612e636f6d2e74723c2f613e3c2f703e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223ec2a9203230323620427261766974612e2054c3bc6d2068616b6c6172c4b12073616b6cc4b164c4b1722e3c2f703e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a20202020202020203c2f7461626c653e0d0a2020202020203c2f74643e0d0a202020203c2f74723e0d0a20203c2f7461626c653e0d0a3c2f626f64793e0d0a3c2f68746d6c3e0d0a2474706c5f6f726465725f636f6e6669726d6174696f6e240d0a20202020292c0d0a20202020280d0a202020202020276f726465725f6177616974696e675f7061796d656e74272c0d0a20202020202027c39664656d652042656b6c656e69796f72272c0d0a20202020202027536970617269c59f696e697a20416cc4b16e64c4b12c20c39664656d652042656b6c656e69796f7220f09f92b320237b7b4f524445525f49447d7d272c0d0a202020202020275b224f524445525f4944222c224f524445525f44415445222c224954454d535f4c495354222c22535542544f54414c222c22444953434f554e54222c22544158222c22544f54414c222c225348495050494e475f41444452455353222c225041594d454e545f4d4554484f44222c2242414e4b5f44455441494c53222c2242524f575345525f4c494e4b222c22534954455f55524c225d273a3a6a736f6e622c0d0a2020202020202474706c5f6f726465725f6177616974696e675f7061796d656e74240d0a3c21444f43545950452068746d6c3e0d0a3c68746d6c206c616e673d227472223e0d0a3c686561643e0d0a20203c6d65746120636861727365743d225554462d38223e0d0a20203c6d657461206e616d653d2276696577706f72742220636f6e74656e743d2277696474683d6465766963652d77696474682c20696e697469616c2d7363616c653d312e30223e0d0a20203c6d657461206e616d653d22636f6c6f722d736368656d652220636f6e74656e743d226c69676874223e0d0a20203c6d657461206e616d653d22737570706f727465642d636f6c6f722d736368656d65732220636f6e74656e743d226c69676874223e0d0a20203c7469746c653ec39664656d652042656b6c656e69796f723c2f7469746c653e0d0a20203c6c696e6b20687265663d2268747470733a2f2f666f6e74732e676f6f676c65617069732e636f6d2f637373323f66616d696c793d42616c6f6f2b323a77676874403430303b3530303b3630303b3730303b3830302666616d696c793d4e756e69746f3a77676874403430303b3630303b3730303b3830303b39303026646973706c61793d73776170222072656c3d227374796c657368656574223e0d0a20203c7374796c653e0d0a202020203a726f6f74207b20636f6c6f722d736368656d653a206c696768743b207d0d0a20202020626f6479207b206261636b67726f756e642d636f6c6f723a234646464246372021696d706f7274616e743b20636f6c6f723a233146323933372021696d706f7274616e743b20666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b206d617267696e3a303b2070616464696e673a303b207d0d0a20202020406d65646961206f6e6c792073637265656e20616e6420286d61782d77696474683a363030707829207b0d0a2020202020202e636f6e7461696e6572207b2077696474683a313030252021696d706f7274616e743b20626f726465722d7261646975733a302021696d706f7274616e743b207d0d0a2020202020202e636f6e74656e74207b2070616464696e673a3330707820323070782021696d706f7274616e743b207d0d0a2020202020202e627574746f6e207b2077696474683a313030252021696d706f7274616e743b20646973706c61793a626c6f636b2021696d706f7274616e743b20746578742d616c69676e3a63656e7465722021696d706f7274616e743b207d0d0a202020207d0d0a20203c2f7374796c653e0d0a3c2f686561643e0d0a3c626f64793e0d0a20203c7461626c652077696474683d22313030252220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a234646464246373b223e0d0a202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a3230707820303b223e3c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e452d706f73746179c4b12067c3b672c3bc6e74c3bc6c656d656b746520736f72756e206d75207961c59fc4b1796f7273756e757a3f203c6120687265663d227b7b42524f575345525f4c494e4b7d7d22207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e5461726179c4b163c4b164612061c3a7c4b16e3c2f613e3c2f703e3c2f74643e3c2f74723e0d0a202020203c74723e0d0a2020202020203c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020343070783b223e0d0a20202020202020203c7461626c6520636c6173733d22636f6e7461696e6572222077696474683d223630302220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a236666666666663b626f726465722d7261646975733a323070783b626f782d736861646f773a3020313070782033307078207267626128302c302c302c302e3035293b6f766572666c6f773a68696464656e3b223e0d0a202020202020202020203c74723e3c7464206865696768743d223622207374796c653d226261636b67726f756e642d636f6c6f723a233342383246363b223e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a34307078203020323070783b223e3c696d67207372633d2268747470733a2f2f78706d626e7a6e736d73756a6a7577756d6669772e73757061626173652e636f2f73746f726167652f76312f6f626a6563742f7075626c69632f7075626c69632d6173736574732f627261766974612d6c6f676f2e776562702220616c743d2242726176697461222077696474683d2231383022207374796c653d22646973706c61793a626c6f636b3b626f726465723a303b6d61782d77696474683a313030253b6865696768743a6175746f3b22202f3e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020323070783b223e3c646976207374796c653d22666f6e742d73697a653a363470783b6c696e652d6865696768743a313b223ef09f92b33c2f6469763e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420636c6173733d22636f6e74656e742220616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203430707820343070783b223e0d0a20202020202020202020202020203c6831207374796c653d226d617267696e3a30203020313070783b636f6c6f723a233146323933373b666f6e742d73697a653a323670783b666f6e742d7765696768743a3730303b223e536970617269c59f696e697a20416cc4b16e64c4b12c20c39664656d652042656b6c656e69796f723c2f68313e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a30203020333070783b636f6c6f723a233442353536333b666f6e742d73697a653a313670783b6c696e652d6865696768743a312e363b223e536970617269c59f696e697a206f6c75c59f747572756c64752e20c39664656d656e697a206f6e61796c616e64c4b1c49fc4b16e646120736970617269c59f696e697a2068617ac4b1726cc4b16b2061c59f616d6173c4b16e61206765c3a76563656b7469722e3c2f703e0d0a20202020202020202020202020203c7461626c652077696474683d22313030252220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a234639464146423b626f726465722d7261646975733a313270783b6d617267696e2d626f74746f6d3a333070783b70616464696e673a323070783b223e0d0a202020202020202020202020202020203c74723e0d0a2020202020202020202020202020202020203c746420616c69676e3d226c65667422207374796c653d2270616464696e672d626f74746f6d3a3870783b223e3c7370616e207374796c653d22636f6c6f723a233642373238303b666f6e742d73697a653a313370783b666f6e742d7765696768743a3630303b746578742d7472616e73666f726d3a7570706572636173653b223e536970617269c59f204e6f3c2f7370616e3e3c62723e3c7370616e207374796c653d22636f6c6f723a233131313832373b666f6e742d73697a653a313670783b666f6e742d7765696768743a3730303b223e237b7b4f524445525f49447d7d3c2f7370616e3e3c2f74643e0d0a2020202020202020202020202020202020203c746420616c69676e3d22726967687422207374796c653d2270616464696e672d626f74746f6d3a3870783b223e3c7370616e207374796c653d22636f6c6f723a233642373238303b666f6e742d73697a653a313370783b666f6e742d7765696768743a3630303b746578742d7472616e73666f726d3a7570706572636173653b223e54617269683c2f7370616e3e3c62723e3c7370616e207374796c653d22636f6c6f723a233131313832373b666f6e742d73697a653a313670783b666f6e742d7765696768743a3730303b223e7b7b4f524445525f444154457d7d3c2f7370616e3e3c2f74643e0d0a202020202020202020202020202020203c2f74723e0d0a20202020202020202020202020203c2f7461626c653e0d0a20202020202020202020202020203c646976207374796c653d22746578742d616c69676e3a6c6566743b6d617267696e2d626f74746f6d3a333070783b223e0d0a202020202020202020202020202020203c6833207374796c653d226d617267696e3a30203020313570783b636f6c6f723a234639373331363b666f6e742d73697a653a313670783b666f6e742d7765696768743a3730303b746578742d7472616e73666f726d3a7570706572636173653b6c65747465722d73706163696e673a302e3570783b223e536970617269c59f2044657461796c6172c4b13c2f68333e0d0a202020202020202020202020202020203c7461626c652077696474683d22313030252220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d2230223e7b7b4954454d535f4c4953547d7d3c2f7461626c653e0d0a20202020202020202020202020203c2f6469763e0d0a20202020202020202020202020203c7461626c652077696474683d22313030252220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226d617267696e2d626f74746f6d3a323070783b223e0d0a202020202020202020202020202020203c74723e3c7464207374796c653d2270616464696e673a38707820303b636f6c6f723a233642373238303b666f6e742d73697a653a313470783b223e41726120546f706c616d3c2f74643e3c746420616c69676e3d22726967687422207374796c653d2270616464696e673a38707820303b636f6c6f723a233131313832373b666f6e742d73697a653a313470783b666f6e742d7765696768743a3630303b223ee282ba7b7b535542544f54414c7d7d3c2f74643e3c2f74723e0d0a202020202020202020202020202020203c74723e3c7464207374796c653d2270616464696e673a38707820303b636f6c6f723a233232433535453b666f6e742d73697a653a313470783b223ec4b06e646972696d3c2f74643e3c746420616c69676e3d22726967687422207374796c653d2270616464696e673a38707820303b636f6c6f723a233232433535453b666f6e742d73697a653a313470783b666f6e742d7765696768743a3630303b223e2de282ba7b7b444953434f554e547d7d3c2f74643e3c2f74723e0d0a202020202020202020202020202020203c74723e3c7464207374796c653d2270616464696e673a38707820303b636f6c6f723a233642373238303b666f6e742d73697a653a313470783b223e4b44562028253230293c2f74643e3c746420616c69676e3d22726967687422207374796c653d2270616464696e673a38707820303b636f6c6f723a233131313832373b666f6e742d73697a653a313470783b666f6e742d7765696768743a3630303b223ee282ba7b7b5441587d7d3c2f74643e3c2f74723e0d0a202020202020202020202020202020203c74723e3c7464207374796c653d22626f726465722d746f703a31707820736f6c696420234535453745423b70616464696e673a31367078203020303b636f6c6f723a233131313832373b666f6e742d73697a653a313870783b666f6e742d7765696768743a3830303b223e546f706c616d3c2f74643e3c746420616c69676e3d22726967687422207374796c653d22626f726465722d746f703a31707820736f6c696420234535453745423b70616464696e673a31367078203020303b636f6c6f723a234639373331363b666f6e742d73697a653a323470783b666f6e742d7765696768743a3830303b223ee282ba7b7b544f54414c7d7d3c2f74643e3c2f74723e0d0a20202020202020202020202020203c2f7461626c653e0d0a20202020202020202020202020203c646976207374796c653d22746578742d616c69676e3a6c6566743b6261636b67726f756e642d636f6c6f723a234546463646463b626f726465723a31707820736f6c696420234442454146453b70616464696e673a323070783b626f726465722d7261646975733a313270783b6d617267696e2d626f74746f6d3a323070783b223e0d0a202020202020202020202020202020203c70207374796c653d226d617267696e3a303b636f6c6f723a233145334138413b666f6e742d73697a653a313470783b6c696e652d6865696768743a312e363b223e486176616c652f45465420c3b664656d65207365c3a774696e697a2e20c39664656d656e697a20646fc49f72756c616e64c4b1c49fc4b16e646120736970617269c59f696e697a206f746f6d6174696b206f6c6172616b2068617ac4b1726c616e6163616b74c4b1722e3c2f703e0d0a20202020202020202020202020203c2f6469763e0d0a20202020202020202020202020207b7b42414e4b5f44455441494c537d7d0d0a20202020202020202020202020203c646976207374796c653d226d617267696e2d746f703a323070783b746578742d616c69676e3a63656e7465723b223e3c70207374796c653d22636f6c6f723a233642373238303b666f6e742d73697a653a313370783b223ec39664656d652059c3b66e74656d693a203c7374726f6e673e7b7b5041594d454e545f4d4554484f447d7d3c2f7374726f6e673e3c2f703e3c2f6469763e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420616c69676e3d2263656e74657222207374796c653d226261636b67726f756e642d636f6c6f723a234646463846303b70616464696e673a323070783b223e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a302030203870783b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e536f72756c6172c4b16ec4b17a206dc4b1207661723f203c6120687265663d226d61696c746f3a737570706f727440627261766974612e636f6d2e747222207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e737570706f727440627261766974612e636f6d2e74723c2f613e3c2f703e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223ec2a9203230323620427261766974612e2054c3bc6d2068616b6c6172c4b12073616b6cc4b164c4b1722e3c2f703e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a20202020202020203c2f7461626c653e0d0a2020202020203c2f74643e0d0a202020203c2f74723e0d0a20203c2f7461626c653e0d0a3c2f626f64793e0d0a3c2f68746d6c3e0d0a2474706c5f6f726465725f6177616974696e675f7061796d656e74240d0a20202020292c0d0a20202020280d0a202020202020276f726465725f70726f63657373696e67272c0d0a20202020202027536970617269c59f20c4b0c59f6c656e69796f72272c0d0a20202020202027536970617269c59f696e697a20c4b0c59f6c656e69796f7220e29a99efb88f20237b7b4f524445525f49447d7d272c0d0a202020202020275b224f524445525f4944222c2242524f575345525f4c494e4b222c22534954455f55524c225d273a3a6a736f6e622c0d0a2020202020202474706c5f6f726465725f70726f63657373696e67240d0a3c21444f43545950452068746d6c3e0d0a3c68746d6c206c616e673d227472223e0d0a3c686561643e0d0a20203c6d65746120636861727365743d225554462d38223e0d0a20203c6d657461206e616d653d2276696577706f72742220636f6e74656e743d2277696474683d6465766963652d77696474682c20696e697469616c2d7363616c653d312e30223e0d0a20203c6d657461206e616d653d22636f6c6f722d736368656d652220636f6e74656e743d226c69676874223e0d0a20203c6d657461206e616d653d22737570706f727465642d636f6c6f722d736368656d65732220636f6e74656e743d226c69676874223e0d0a20203c7469746c653e536970617269c59f696e697a20c4b0c59f6c656e69796f723c2f7469746c653e0d0a20203c6c696e6b20687265663d2268747470733a2f2f666f6e74732e676f6f676c65617069732e636f6d2f637373323f66616d696c793d42616c6f6f2b323a77676874403430303b3530303b3630303b3730303b3830302666616d696c793d4e756e69746f3a77676874403430303b3630303b3730303b3830303b39303026646973706c61793d73776170222072656c3d227374796c657368656574223e0d0a20203c7374796c653e0d0a202020203a726f6f74207b20636f6c6f722d736368656d653a206c696768743b207d0d0a20202020626f6479207b206261636b67726f756e642d636f6c6f723a234646464246372021696d706f7274616e743b20636f6c6f723a233146323933372021696d706f7274616e743b20666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b206d617267696e3a303b2070616464696e673a303b207d0d0a20202020406d65646961206f6e6c792073637265656e20616e6420286d61782d77696474683a363030707829207b202e636f6e7461696e6572207b2077696474683a313030252021696d706f7274616e743b20626f726465722d7261646975733a302021696d706f7274616e743b207d202e636f6e74656e74207b2070616464696e673a3330707820323070782021696d706f7274616e743b207d207d0d0a20203c2f7374796c653e0d0a3c2f686561643e0d0a3c626f64793e0d0a20203c7461626c652077696474683d22313030252220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a234646464246373b223e0d0a202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a3230707820303b223e3c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e452d706f73746179c4b12067c3b672c3bc6e74c3bc6c656d656b746520736f72756e206d75207961c59fc4b1796f7273756e757a3f203c6120687265663d227b7b42524f575345525f4c494e4b7d7d22207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e5461726179c4b163c4b164612061c3a7c4b16e3c2f613e3c2f703e3c2f74643e3c2f74723e0d0a202020203c74723e0d0a2020202020203c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020343070783b223e0d0a20202020202020203c7461626c6520636c6173733d22636f6e7461696e6572222077696474683d223630302220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a236666666666663b626f726465722d7261646975733a323070783b626f782d736861646f773a3020313070782033307078207267626128302c302c302c302e3035293b6f766572666c6f773a68696464656e3b223e0d0a202020202020202020203c74723e3c7464206865696768743d223622207374796c653d226261636b67726f756e642d636f6c6f723a233342383246363b223e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a34307078203020323070783b223e3c696d67207372633d2268747470733a2f2f78706d626e7a6e736d73756a6a7577756d6669772e73757061626173652e636f2f73746f726167652f76312f6f626a6563742f7075626c69632f7075626c69632d6173736574732f627261766974612d6c6f676f2e776562702220616c743d2242726176697461222077696474683d2231383022207374796c653d22646973706c61793a626c6f636b3b626f726465723a303b6d61782d77696474683a313030253b6865696768743a6175746f3b22202f3e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020323070783b223e3c646976207374796c653d22666f6e742d73697a653a363470783b6c696e652d6865696768743a313b223ee29a99efb88f3c2f6469763e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420636c6173733d22636f6e74656e742220616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203430707820343070783b223e0d0a20202020202020202020202020203c6831207374796c653d226d617267696e3a30203020313470783b636f6c6f723a233146323933373b666f6e742d73697a653a323670783b666f6e742d7765696768743a3730303b223e536970617269c59f696e697a20c4b0c59f6c656e69796f723c2f68313e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a30203020323470783b636f6c6f723a233442353536333b666f6e742d73697a653a313670783b6c696e652d6865696768743a312e363b223e237b7b4f524445525f49447d7d206e756d6172616cc4b120736970617269c59f696e697a20656b69706c6572696d697a207461726166c4b16e64616e206b6f6e74726f6c206564696c69796f722076652068617ac4b1726c616e6d612073c4b1726173c4b16e6120616cc4b16ec4b1796f722e3c2f703e0d0a20202020202020202020202020203c7461626c6520626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d2230223e3c74723e3c746420616c69676e3d2263656e74657222207374796c653d22626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a233342383246363b223e3c6120687265663d227b7b42524f575345525f4c494e4b7d7d22207374796c653d22646973706c61793a696e6c696e652d626c6f636b3b70616464696e673a3134707820333670783b666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b666f6e742d73697a653a313570783b636f6c6f723a236666666666663b746578742d6465636f726174696f6e3a6e6f6e653b666f6e742d7765696768743a3630303b626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a233342383246363b626f726465723a31707820736f6c696420233342383246363b223e536970617269c59f2054616b6962696e692041c3a73c2f613e3c2f74643e3c2f74723e3c2f7461626c653e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d226261636b67726f756e642d636f6c6f723a234646463846303b70616464696e673a323070783b223e3c70207374796c653d226d617267696e3a302030203870783b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e536f72756c6172c4b16ec4b17a206dc4b1207661723f203c6120687265663d226d61696c746f3a737570706f727440627261766974612e636f6d2e747222207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e737570706f727440627261766974612e636f6d2e74723c2f613e3c2f703e3c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223ec2a9203230323620427261766974612e2054c3bc6d2068616b6c6172c4b12073616b6cc4b164c4b1722e3c2f703e3c2f74643e3c2f74723e0d0a20202020202020203c2f7461626c653e0d0a2020202020203c2f74643e0d0a202020203c2f74723e0d0a20203c2f7461626c653e0d0a3c2f626f64793e0d0a3c2f68746d6c3e0d0a2474706c5f6f726465725f70726f63657373696e67240d0a20202020292c0d0a20202020280d0a202020202020276f726465725f707265706172696e67272c0d0a20202020202027536970617269c59f2048617ac4b1726c616ec4b1796f72272c0d0a20202020202027536970617269c59f696e697a2048617ac4b1726c616ec4b1796f7220f09f93a620237b7b4f524445525f49447d7d272c0d0a202020202020275b224f524445525f4944222c2242524f575345525f4c494e4b222c22534954455f55524c225d273a3a6a736f6e622c0d0a2020202020202474706c5f6f726465725f707265706172696e67240d0a3c21444f43545950452068746d6c3e0d0a3c68746d6c206c616e673d227472223e0d0a3c686561643e0d0a20203c6d65746120636861727365743d225554462d38223e0d0a20203c6d657461206e616d653d2276696577706f72742220636f6e74656e743d2277696474683d6465766963652d77696474682c20696e697469616c2d7363616c653d312e30223e0d0a20203c6d657461206e616d653d22636f6c6f722d736368656d652220636f6e74656e743d226c69676874223e0d0a20203c6d657461206e616d653d22737570706f727465642d636f6c6f722d736368656d65732220636f6e74656e743d226c69676874223e0d0a20203c7469746c653e536970617269c59f696e697a2048617ac4b1726c616ec4b1796f723c2f7469746c653e0d0a20203c6c696e6b20687265663d2268747470733a2f2f666f6e74732e676f6f676c65617069732e636f6d2f637373323f66616d696c793d42616c6f6f2b323a77676874403430303b3530303b3630303b3730303b3830302666616d696c793d4e756e69746f3a77676874403430303b3630303b3730303b3830303b39303026646973706c61793d73776170222072656c3d227374796c657368656574223e0d0a20203c7374796c653e0d0a202020203a726f6f74207b20636f6c6f722d736368656d653a206c696768743b207d0d0a20202020626f6479207b206261636b67726f756e642d636f6c6f723a234646464246372021696d706f7274616e743b20636f6c6f723a233146323933372021696d706f7274616e743b20666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b206d617267696e3a303b2070616464696e673a303b207d0d0a20202020406d65646961206f6e6c792073637265656e20616e6420286d61782d77696474683a363030707829207b202e636f6e7461696e6572207b2077696474683a313030252021696d706f7274616e743b20626f726465722d7261646975733a302021696d706f7274616e743b207d202e636f6e74656e74207b2070616464696e673a3330707820323070782021696d706f7274616e743b207d207d0d0a20203c2f7374796c653e0d0a3c2f686561643e0d0a3c626f64793e0d0a20203c7461626c652077696474683d22313030252220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a234646464246373b223e0d0a202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a3230707820303b223e3c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e452d706f73746179c4b12067c3b672c3bc6e74c3bc6c656d656b746520736f72756e206d75207961c59fc4b1796f7273756e757a3f203c6120687265663d227b7b42524f575345525f4c494e4b7d7d22207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e5461726179c4b163c4b164612061c3a7c4b16e3c2f613e3c2f703e3c2f74643e3c2f74723e0d0a202020203c74723e0d0a2020202020203c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020343070783b223e0d0a20202020202020203c7461626c6520636c6173733d22636f6e7461696e6572222077696474683d223630302220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a236666666666663b626f726465722d7261646975733a323070783b626f782d736861646f773a3020313070782033307078207267626128302c302c302c302e3035293b6f766572666c6f773a68696464656e3b223e0d0a202020202020202020203c74723e3c7464206865696768743d223622207374796c653d226261636b67726f756e642d636f6c6f723a233633363646313b223e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a34307078203020323070783b223e3c696d67207372633d2268747470733a2f2f78706d626e7a6e736d73756a6a7577756d6669772e73757061626173652e636f2f73746f726167652f76312f6f626a6563742f7075626c69632f7075626c69632d6173736574732f627261766974612d6c6f676f2e776562702220616c743d2242726176697461222077696474683d2231383022207374796c653d22646973706c61793a626c6f636b3b626f726465723a303b6d61782d77696474683a313030253b6865696768743a6175746f3b22202f3e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020323070783b223e3c646976207374796c653d22666f6e742d73697a653a363470783b6c696e652d6865696768743a313b223ef09f93a63c2f6469763e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420636c6173733d22636f6e74656e742220616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203430707820343070783b223e0d0a20202020202020202020202020203c6831207374796c653d226d617267696e3a30203020313470783b636f6c6f723a233146323933373b666f6e742d73697a653a323670783b666f6e742d7765696768743a3730303b223e536970617269c59f696e697a2048617ac4b1726c616ec4b1796f723c2f68313e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a30203020323470783b636f6c6f723a233442353536333b666f6e742d73697a653a313670783b6c696e652d6865696768743a312e363b223e486172696b612120237b7b4f524445525f49447d7d206e756d6172616cc4b120736970617269c59f696e697a2070616b65746c656d652061c59f616d6173c4b16e64612e204b6172676f796120766572696c6469c49f696e64652073697a692068656d656e2062696c67696c656e646972656365c49f697a2e3c2f703e0d0a20202020202020202020202020203c7461626c6520626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d2230223e3c74723e3c746420616c69676e3d2263656e74657222207374796c653d22626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a233633363646313b223e3c6120687265663d227b7b42524f575345525f4c494e4b7d7d22207374796c653d22646973706c61793a696e6c696e652d626c6f636b3b70616464696e673a3134707820333670783b666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b666f6e742d73697a653a313570783b636f6c6f723a236666666666663b746578742d6465636f726174696f6e3a6e6f6e653b666f6e742d7765696768743a3630303b626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a233633363646313b626f726465723a31707820736f6c696420233633363646313b223e536970617269c59f2054616b6962696e692041c3a73c2f613e3c2f74643e3c2f74723e3c2f7461626c653e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d226261636b67726f756e642d636f6c6f723a234646463846303b70616464696e673a323070783b223e3c70207374796c653d226d617267696e3a302030203870783b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e536f72756c6172c4b16ec4b17a206dc4b1207661723f203c6120687265663d226d61696c746f3a737570706f727440627261766974612e636f6d2e747222207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e737570706f727440627261766974612e636f6d2e74723c2f613e3c2f703e3c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223ec2a9203230323620427261766974612e2054c3bc6d2068616b6c6172c4b12073616b6cc4b164c4b1722e3c2f703e3c2f74643e3c2f74723e0d0a20202020202020203c2f7461626c653e0d0a2020202020203c2f74643e0d0a202020203c2f74723e0d0a20203c2f7461626c653e0d0a3c2f626f64793e0d0a3c2f68746d6c3e0d0a2474706c5f6f726465725f707265706172696e67240d0a20202020292c0d0a20202020280d0a202020202020276f726465725f73686970706564272c0d0a202020202020274b6172676f796120566572696c6469272c0d0a20202020202027536970617269c59f696e697a204b6172676f796120566572696c646920f09f9a9a20237b7b4f524445525f49447d7d272c0d0a202020202020275b224f524445525f4944222c225348495050494e475f434f4d50414e59222c22545241434b494e475f4e554d424552222c2242524f575345525f4c494e4b222c22534954455f55524c225d273a3a6a736f6e622c0d0a2020202020202474706c5f6f726465725f73686970706564240d0a3c21444f43545950452068746d6c3e0d0a3c68746d6c206c616e673d227472223e0d0a3c686561643e0d0a20203c6d65746120636861727365743d225554462d38223e0d0a20203c6d657461206e616d653d2276696577706f72742220636f6e74656e743d2277696474683d6465766963652d77696474682c20696e697469616c2d7363616c653d312e30223e0d0a20203c6d657461206e616d653d22636f6c6f722d736368656d652220636f6e74656e743d226c69676874223e0d0a20203c6d657461206e616d653d22737570706f727465642d636f6c6f722d736368656d65732220636f6e74656e743d226c69676874223e0d0a20203c7469746c653e536970617269c59f696e697a204b6172676f796120566572696c64693c2f7469746c653e0d0a20203c6c696e6b20687265663d2268747470733a2f2f666f6e74732e676f6f676c65617069732e636f6d2f637373323f66616d696c793d42616c6f6f2b323a77676874403430303b3530303b3630303b3730303b3830302666616d696c793d4e756e69746f3a77676874403430303b3630303b3730303b3830303b39303026646973706c61793d73776170222072656c3d227374796c657368656574223e0d0a20203c7374796c653e0d0a202020203a726f6f74207b20636f6c6f722d736368656d653a206c696768743b207d0d0a20202020626f6479207b206261636b67726f756e642d636f6c6f723a234646464246372021696d706f7274616e743b20636f6c6f723a233146323933372021696d706f7274616e743b20666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b206d617267696e3a303b2070616464696e673a303b207d0d0a20202020406d65646961206f6e6c792073637265656e20616e6420286d61782d77696474683a363030707829207b202e636f6e7461696e6572207b2077696474683a313030252021696d706f7274616e743b20626f726465722d7261646975733a302021696d706f7274616e743b207d202e636f6e74656e74207b2070616464696e673a3330707820323070782021696d706f7274616e743b207d207d0d0a20203c2f7374796c653e0d0a3c2f686561643e0d0a3c626f64793e0d0a20203c7461626c652077696474683d22313030252220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a234646464246373b223e0d0a202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a3230707820303b223e3c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e452d706f73746179c4b12067c3b672c3bc6e74c3bc6c656d656b746520736f72756e206d75207961c59fc4b1796f7273756e757a3f203c6120687265663d227b7b42524f575345525f4c494e4b7d7d22207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e5461726179c4b163c4b164612061c3a7c4b16e3c2f613e3c2f703e3c2f74643e3c2f74723e0d0a202020203c74723e0d0a2020202020203c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020343070783b223e0d0a20202020202020203c7461626c6520636c6173733d22636f6e7461696e6572222077696474683d223630302220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a236666666666663b626f726465722d7261646975733a323070783b626f782d736861646f773a3020313070782033307078207267626128302c302c302c302e3035293b6f766572666c6f773a68696464656e3b223e0d0a202020202020202020203c74723e3c7464206865696768743d223622207374796c653d226261636b67726f756e642d636f6c6f723a234639373331363b223e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a34307078203020323070783b223e3c696d67207372633d2268747470733a2f2f78706d626e7a6e736d73756a6a7577756d6669772e73757061626173652e636f2f73746f726167652f76312f6f626a6563742f7075626c69632f7075626c69632d6173736574732f627261766974612d6c6f676f2e776562702220616c743d2242726176697461222077696474683d2231383022207374796c653d22646973706c61793a626c6f636b3b626f726465723a303b6d61782d77696474683a313030253b6865696768743a6175746f3b22202f3e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020323070783b223e3c646976207374796c653d22666f6e742d73697a653a363470783b6c696e652d6865696768743a313b223ef09f9a9a3c2f6469763e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420636c6173733d22636f6e74656e742220616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203430707820343070783b223e0d0a20202020202020202020202020203c6831207374796c653d226d617267696e3a30203020313470783b636f6c6f723a233146323933373b666f6e742d73697a653a323670783b666f6e742d7765696768743a3730303b223e536970617269c59f696e697a204b6172676f796120566572696c6469213c2f68313e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a30203020323470783b636f6c6f723a233442353536333b666f6e742d73697a653a313670783b6c696e652d6865696768743a312e363b223e237b7b4f524445525f49447d7d206e756d6172616cc4b120736970617269c59f696e697a206b6172676f206669726d6173c4b16e61207465736c696d206564696c64692e3c2f703e0d0a20202020202020202020202020203c646976207374796c653d226261636b67726f756e642d636f6c6f723a234646463745443b626f726465723a31707820736f6c696420234646454444353b626f726465722d7261646975733a313270783b70616464696e673a323070783b6d617267696e2d626f74746f6d3a323470783b746578742d616c69676e3a6c6566743b223e0d0a202020202020202020202020202020203c70207374796c653d226d617267696e3a302030203870783b636f6c6f723a233743324431323b666f6e742d73697a653a313470783b223e3c7374726f6e673e4b6172676f204669726d6173c4b13a3c2f7374726f6e673e207b7b5348495050494e475f434f4d50414e597d7d3c2f703e0d0a202020202020202020202020202020203c70207374796c653d226d617267696e3a303b636f6c6f723a233743324431323b666f6e742d73697a653a313470783b223e3c7374726f6e673e54616b6970204e756d61726173c4b13a3c2f7374726f6e673e207b7b545241434b494e475f4e554d4245527d7d3c2f703e0d0a20202020202020202020202020203c2f6469763e0d0a20202020202020202020202020203c7461626c6520626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d2230223e3c74723e3c746420616c69676e3d2263656e74657222207374796c653d22626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a234639373331363b223e3c6120687265663d227b7b42524f575345525f4c494e4b7d7d22207374796c653d22646973706c61793a696e6c696e652d626c6f636b3b70616464696e673a3134707820333670783b666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b666f6e742d73697a653a313570783b636f6c6f723a236666666666663b746578742d6465636f726174696f6e3a6e6f6e653b666f6e742d7765696768743a3630303b626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a234639373331363b626f726465723a31707820736f6c696420234639373331363b223e4b6172676f2054616b6962696e692041c3a73c2f613e3c2f74643e3c2f74723e3c2f7461626c653e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d226261636b67726f756e642d636f6c6f723a234646463846303b70616464696e673a323070783b223e3c70207374796c653d226d617267696e3a302030203870783b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e536f72756c6172c4b16ec4b17a206dc4b1207661723f203c6120687265663d226d61696c746f3a737570706f727440627261766974612e636f6d2e747222207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e737570706f727440627261766974612e636f6d2e74723c2f613e3c2f703e3c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223ec2a9203230323620427261766974612e2054c3bc6d2068616b6c6172c4b12073616b6cc4b164c4b1722e3c2f703e3c2f74643e3c2f74723e0d0a20202020202020203c2f7461626c653e0d0a2020202020203c2f74643e0d0a202020203c2f74723e0d0a20203c2f7461626c653e0d0a3c2f626f64793e0d0a3c2f68746d6c3e0d0a2474706c5f6f726465725f73686970706564240d0a20202020292c0d0a20202020280d0a202020202020276f726465725f64656c697665726564272c0d0a202020202020275465736c696d204564696c6469272c0d0a20202020202027536970617269c59f696e697a205465736c696d204564696c646920f09f8e8120237b7b4f524445525f49447d7d272c0d0a202020202020275b224f524445525f4944222c22534954455f55524c222c2242524f575345525f4c494e4b225d273a3a6a736f6e622c0d0a2020202020202474706c5f6f726465725f64656c697665726564240d0a3c21444f43545950452068746d6c3e0d0a3c68746d6c206c616e673d227472223e0d0a3c686561643e0d0a20203c6d65746120636861727365743d225554462d38223e0d0a20203c6d657461206e616d653d2276696577706f72742220636f6e74656e743d2277696474683d6465766963652d77696474682c20696e697469616c2d7363616c653d312e30223e0d0a20203c6d657461206e616d653d22636f6c6f722d736368656d652220636f6e74656e743d226c69676874223e0d0a20203c6d657461206e616d653d22737570706f727465642d636f6c6f722d736368656d65732220636f6e74656e743d226c69676874223e0d0a20203c7469746c653e536970617269c59f696e697a205465736c696d204564696c64693c2f7469746c653e0d0a20203c6c696e6b20687265663d2268747470733a2f2f666f6e74732e676f6f676c65617069732e636f6d2f637373323f66616d696c793d42616c6f6f2b323a77676874403430303b3530303b3630303b3730303b3830302666616d696c793d4e756e69746f3a77676874403430303b3630303b3730303b3830303b39303026646973706c61793d73776170222072656c3d227374796c657368656574223e0d0a20203c7374796c653e0d0a202020203a726f6f74207b20636f6c6f722d736368656d653a206c696768743b207d0d0a20202020626f6479207b206261636b67726f756e642d636f6c6f723a234646464246372021696d706f7274616e743b20636f6c6f723a233146323933372021696d706f7274616e743b20666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b206d617267696e3a303b2070616464696e673a303b207d0d0a20202020406d65646961206f6e6c792073637265656e20616e6420286d61782d77696474683a363030707829207b202e636f6e7461696e6572207b2077696474683a313030252021696d706f7274616e743b20626f726465722d7261646975733a302021696d706f7274616e743b207d202e636f6e74656e74207b2070616464696e673a3330707820323070782021696d706f7274616e743b207d207d0d0a20203c2f7374796c653e0d0a3c2f686561643e0d0a3c626f64793e0d0a20203c7461626c652077696474683d22313030252220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a234646464246373b223e0d0a202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a3230707820303b223e3c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e452d706f73746179c4b12067c3b672c3bc6e74c3bc6c656d656b746520736f72756e206d75207961c59fc4b1796f7273756e757a3f203c6120687265663d227b7b42524f575345525f4c494e4b7d7d22207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e5461726179c4b163c4b164612061c3a7c4b16e3c2f613e3c2f703e3c2f74643e3c2f74723e0d0a202020203c74723e0d0a2020202020203c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020343070783b223e0d0a20202020202020203c7461626c6520636c6173733d22636f6e7461696e6572222077696474683d223630302220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a236666666666663b626f726465722d7261646975733a323070783b626f782d736861646f773a3020313070782033307078207267626128302c302c302c302e3035293b6f766572666c6f773a68696464656e3b223e0d0a202020202020202020203c74723e3c7464206865696768743d223622207374796c653d226261636b67726f756e642d636f6c6f723a233232433535453b223e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a34307078203020323070783b223e3c696d67207372633d2268747470733a2f2f78706d626e7a6e736d73756a6a7577756d6669772e73757061626173652e636f2f73746f726167652f76312f6f626a6563742f7075626c69632f7075626c69632d6173736574732f627261766974612d6c6f676f2e776562702220616c743d2242726176697461222077696474683d2231383022207374796c653d22646973706c61793a626c6f636b3b626f726465723a303b6d61782d77696474683a313030253b6865696768743a6175746f3b22202f3e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020323070783b223e3c646976207374796c653d22666f6e742d73697a653a363470783b6c696e652d6865696768743a313b223ef09f8e813c2f6469763e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420636c6173733d22636f6e74656e742220616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203630707820343070783b223e0d0a20202020202020202020202020203c6831207374796c653d226d617267696e3a30203020323070783b636f6c6f723a233146323933373b666f6e742d73697a653a323670783b666f6e742d7765696768743a3730303b223e536970617269c59f696e697a204261c59f6172c4b1796c61205465736c696d204564696c6469213c2f68313e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a30203020333070783b636f6c6f723a233442353536333b666f6e742d73697a653a313670783b6c696e652d6865696768743a312e363b223e486172696b6120686162657221203c7374726f6e673e237b7b4f524445525f49447d7d3c2f7374726f6e673e206e756d6172616cc4b120736970617269c59f696e697a206164726573696e697a6520756c61c59f74c4b12e20556d6172c4b17a20616c64c4b1c49fc4b16ec4b17a20c3bc72c3bc6e6c65726920c3a76f6b20736576657273696e697a2e3c2f703e0d0a20202020202020202020202020203c646976207374796c653d226261636b67726f756e642d636f6c6f723a234630464446343b626f726465723a31707820736f6c696420234443464345373b626f726465722d7261646975733a313270783b70616464696e673a323070783b6d617267696e2d626f74746f6d3a333070783b746578742d616c69676e3a6c6566743b223e0d0a202020202020202020202020202020203c70207374796c653d226d617267696e3a303b636f6c6f723a233136363533343b666f6e742d73697a653a313470783b6c696e652d6865696768743a312e353b223ec39c72c3bc6e6c6572696d697a69206b756c6c616e64c4b1c49fc4b16ec4b17a20616e6c6172c4b12062697a696d6c65207061796c61c59f6d616b20697374657273656e697a203c7374726f6e673e406272617669746174723c2f7374726f6e673e206574696b657469796c6520736f7379616c206d656479616461207061796c61c59f6162696c697273696e697a2e20e29ca83c2f703e0d0a20202020202020202020202020203c2f6469763e0d0a20202020202020202020202020203c7461626c6520626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d2230223e0d0a202020202020202020202020202020203c74723e0d0a2020202020202020202020202020202020203c746420616c69676e3d2263656e74657222207374796c653d22626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a234639373331363b223e0d0a20202020202020202020202020202020202020203c6120687265663d227b7b534954455f55524c7d7d2f6163636f756e742f6f72646572732f7b7b4f524445525f49447d7d22207374796c653d22646973706c61793a696e6c696e652d626c6f636b3b70616464696e673a3136707820343870783b666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b666f6e742d73697a653a313670783b636f6c6f723a236666666666663b746578742d6465636f726174696f6e3a6e6f6e653b666f6e742d7765696768743a3630303b626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a234639373331363b626f726465723a31707820736f6c696420234639373331363b223e536970617269c59f692047c3b672c3bc6e74c3bc6c653c2f613e0d0a2020202020202020202020202020202020203c2f74643e0d0a202020202020202020202020202020203c2f74723e0d0a20202020202020202020202020203c2f7461626c653e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d226261636b67726f756e642d636f6c6f723a234646463846303b70616464696e673a323070783b223e3c70207374796c653d226d617267696e3a302030203870783b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e536f72756c6172c4b16ec4b17a206dc4b1207661723f203c6120687265663d226d61696c746f3a737570706f727440627261766974612e636f6d2e747222207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e737570706f727440627261766974612e636f6d2e74723c2f613e3c2f703e3c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223ec2a9203230323620427261766974612e2054c3bc6d2068616b6c6172c4b12073616b6cc4b164c4b1722e3c2f703e3c2f74643e3c2f74723e0d0a20202020202020203c2f7461626c653e0d0a2020202020203c2f74643e0d0a202020203c2f74723e0d0a20203c2f7461626c653e0d0a3c2f626f64793e0d0a3c2f68746d6c3e0d0a2474706c5f6f726465725f64656c697665726564240d0a20202020292c0d0a20202020280d0a202020202020276f726465725f63616e63656c6c6564272c0d0a20202020202027536970617269c59f20c4b07074616c204564696c6469272c0d0a20202020202027536970617269c59f696e697a20c4b07074616c204564696c646920e29d8c20237b7b4f524445525f49447d7d272c0d0a202020202020275b224f524445525f4944222c2243414e43454c4c4154494f4e5f524541534f4e222c2242524f575345525f4c494e4b222c22534954455f55524c225d273a3a6a736f6e622c0d0a2020202020202474706c5f6f726465725f63616e63656c6c6564240d0a3c21444f43545950452068746d6c3e0d0a3c68746d6c206c616e673d227472223e0d0a3c686561643e0d0a20203c6d65746120636861727365743d225554462d38223e0d0a20203c6d657461206e616d653d2276696577706f72742220636f6e74656e743d2277696474683d6465766963652d77696474682c20696e697469616c2d7363616c653d312e30223e0d0a20203c6d657461206e616d653d22636f6c6f722d736368656d652220636f6e74656e743d226c69676874223e0d0a20203c6d657461206e616d653d22737570706f727465642d636f6c6f722d736368656d65732220636f6e74656e743d226c69676874223e0d0a20203c7469746c653e536970617269c59f696e697a20c4b07074616c204564696c64693c2f7469746c653e0d0a20203c6c696e6b20687265663d2268747470733a2f2f666f6e74732e676f6f676c65617069732e636f6d2f637373323f66616d696c793d42616c6f6f2b323a77676874403430303b3530303b3630303b3730303b3830302666616d696c793d4e756e69746f3a77676874403430303b3630303b3730303b3830303b39303026646973706c61793d73776170222072656c3d227374796c657368656574223e0d0a20203c7374796c653e0d0a202020203a726f6f74207b20636f6c6f722d736368656d653a206c696768743b207d0d0a20202020626f6479207b206261636b67726f756e642d636f6c6f723a234646464246372021696d706f7274616e743b20636f6c6f723a233146323933372021696d706f7274616e743b20666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b206d617267696e3a303b2070616464696e673a303b207d0d0a20202020406d65646961206f6e6c792073637265656e20616e6420286d61782d77696474683a363030707829207b202e636f6e7461696e6572207b2077696474683a313030252021696d706f7274616e743b20626f726465722d7261646975733a302021696d706f7274616e743b207d202e636f6e74656e74207b2070616464696e673a3330707820323070782021696d706f7274616e743b207d207d0d0a20203c2f7374796c653e0d0a3c2f686561643e0d0a3c626f64793e0d0a20203c7461626c652077696474683d22313030252220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a234646464246373b223e0d0a202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a3230707820303b223e3c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e452d706f73746179c4b12067c3b672c3bc6e74c3bc6c656d656b746520736f72756e206d75207961c59fc4b1796f7273756e757a3f203c6120687265663d227b7b42524f575345525f4c494e4b7d7d22207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e5461726179c4b163c4b164612061c3a7c4b16e3c2f613e3c2f703e3c2f74643e3c2f74723e0d0a202020203c74723e0d0a2020202020203c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020343070783b223e0d0a20202020202020203c7461626c6520636c6173733d22636f6e7461696e6572222077696474683d223630302220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a236666666666663b626f726465722d7261646975733a323070783b626f782d736861646f773a3020313070782033307078207267626128302c302c302c302e3035293b6f766572666c6f773a68696464656e3b223e0d0a202020202020202020203c74723e3c7464206865696768743d223622207374796c653d226261636b67726f756e642d636f6c6f723a234546343434343b223e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a34307078203020323070783b223e3c696d67207372633d2268747470733a2f2f78706d626e7a6e736d73756a6a7577756d6669772e73757061626173652e636f2f73746f726167652f76312f6f626a6563742f7075626c69632f7075626c69632d6173736574732f627261766974612d6c6f676f2e776562702220616c743d2242726176697461222077696474683d2231383022207374796c653d22646973706c61793a626c6f636b3b626f726465723a303b6d61782d77696474683a313030253b6865696768743a6175746f3b22202f3e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020323070783b223e3c646976207374796c653d22666f6e742d73697a653a363470783b6c696e652d6865696768743a313b223ee29d8c3c2f6469763e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420636c6173733d22636f6e74656e742220616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203430707820343070783b223e0d0a20202020202020202020202020203c6831207374796c653d226d617267696e3a30203020313470783b636f6c6f723a233146323933373b666f6e742d73697a653a323670783b666f6e742d7765696768743a3730303b223e536970617269c59f696e697a20c4b07074616c204564696c64693c2f68313e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a30203020323470783b636f6c6f723a233442353536333b666f6e742d73697a653a313670783b6c696e652d6865696768743a312e363b223e237b7b4f524445525f49447d7d206e756d6172616cc4b120736970617269c59f696e697a20697074616c206564696c64692e2044657461796c6172c4b12061c59f61c49fc4b164612062756c6162696c697273696e697a2e3c2f703e0d0a20202020202020202020202020203c646976207374796c653d226261636b67726f756e642d636f6c6f723a234645463246323b626f726465723a31707820736f6c696420234645434143413b626f726465722d7261646975733a313270783b70616464696e673a323070783b6d617267696e2d626f74746f6d3a323470783b746578742d616c69676e3a6c6566743b223e0d0a202020202020202020202020202020203c70207374796c653d226d617267696e3a303b636f6c6f723a233939314231423b666f6e742d73697a653a313470783b6c696e652d6865696768743a312e363b223e3c7374726f6e673ec4b07074616c204e6564656e693a3c2f7374726f6e673e207b7b43414e43454c4c4154494f4e5f524541534f4e7d7d3c2f703e0d0a20202020202020202020202020203c2f6469763e0d0a20202020202020202020202020203c7461626c6520626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d2230223e3c74723e3c746420616c69676e3d2263656e74657222207374796c653d22626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a234546343434343b223e3c6120687265663d227b7b42524f575345525f4c494e4b7d7d22207374796c653d22646973706c61793a696e6c696e652d626c6f636b3b70616464696e673a3134707820333670783b666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b666f6e742d73697a653a313570783b636f6c6f723a236666666666663b746578742d6465636f726174696f6e3a6e6f6e653b666f6e742d7765696768743a3630303b626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a234546343434343b626f726465723a31707820736f6c696420234546343434343b223e536970617269c59f204465746179c4b16ec4b12041c3a73c2f613e3c2f74643e3c2f74723e3c2f7461626c653e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d226261636b67726f756e642d636f6c6f723a234646463846303b70616464696e673a323070783b223e3c70207374796c653d226d617267696e3a302030203870783b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e536f72756c6172c4b16ec4b17a206dc4b1207661723f203c6120687265663d226d61696c746f3a737570706f727440627261766974612e636f6d2e747222207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e737570706f727440627261766974612e636f6d2e74723c2f613e3c2f703e3c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223ec2a9203230323620427261766974612e2054c3bc6d2068616b6c6172c4b12073616b6cc4b164c4b1722e3c2f703e3c2f74643e3c2f74723e0d0a20202020202020203c2f7461626c653e0d0a2020202020203c2f74643e0d0a202020203c2f74723e0d0a20203c2f7461626c653e0d0a3c2f626f64793e0d0a3c2f68746d6c3e0d0a2474706c5f6f726465725f63616e63656c6c6564240d0a20202020292c0d0a20202020280d0a20202020202027737570706f72745f7469636b6574272c0d0a2020202020202744657374656b2054616c65626920416cc4b16e64c4b1272c0d0a2020202020202744657374656b2054616c6562696e697a20416cc4b16e64c4b120f09f8eab20237b7b5449434b45545f49447d7d272c0d0a202020202020275b224e414d45222c22454d41494c222c225355424a454354222c225449434b45545f4944222c2243415445474f5259222c22555345525f4d455353414745222c2242524f575345525f4c494e4b222c22534954455f55524c225d273a3a6a736f6e622c0d0a2020202020202474706c5f737570706f72745f7469636b6574240d0a3c21444f43545950452068746d6c3e0d0a3c68746d6c206c616e673d227472223e0d0a3c686561643e0d0a20203c6d65746120636861727365743d225554462d38223e0d0a20203c6d657461206e616d653d2276696577706f72742220636f6e74656e743d2277696474683d6465766963652d77696474682c20696e697469616c2d7363616c653d312e30223e0d0a20203c6d657461206e616d653d22636f6c6f722d736368656d652220636f6e74656e743d226c69676874223e0d0a20203c6d657461206e616d653d22737570706f727465642d636f6c6f722d736368656d65732220636f6e74656e743d226c69676874223e0d0a20203c7469746c653e44657374656b2054616c6562696e697a20416cc4b16e64c4b13c2f7469746c653e0d0a20203c6c696e6b20687265663d2268747470733a2f2f666f6e74732e676f6f676c65617069732e636f6d2f637373323f66616d696c793d42616c6f6f2b323a77676874403430303b3530303b3630303b3730303b3830302666616d696c793d4e756e69746f3a77676874403430303b3630303b3730303b3830303b39303026646973706c61793d73776170222072656c3d227374796c657368656574223e0d0a20203c7374796c653e0d0a202020203a726f6f74207b20636f6c6f722d736368656d653a206c696768743b207d0d0a20202020626f6479207b206261636b67726f756e642d636f6c6f723a234646464246372021696d706f7274616e743b20636f6c6f723a233146323933372021696d706f7274616e743b20666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b206d617267696e3a303b2070616464696e673a303b207d0d0a20202020406d65646961206f6e6c792073637265656e20616e6420286d61782d77696474683a363030707829207b202e636f6e7461696e6572207b2077696474683a313030252021696d706f7274616e743b20626f726465722d7261646975733a302021696d706f7274616e743b207d202e636f6e74656e74207b2070616464696e673a3330707820323070782021696d706f7274616e743b207d207d0d0a20203c2f7374796c653e0d0a3c2f686561643e0d0a3c626f64793e0d0a20203c7461626c652077696474683d22313030252220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a234646464246373b223e0d0a202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a3230707820303b223e3c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e452d706f73746179c4b12067c3b672c3bc6e74c3bc6c656d656b746520736f72756e206d75207961c59fc4b1796f7273756e757a3f203c6120687265663d227b7b42524f575345525f4c494e4b7d7d22207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e5461726179c4b163c4b164612061c3a7c4b16e3c2f613e3c2f703e3c2f74643e3c2f74723e0d0a202020203c74723e0d0a2020202020203c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020343070783b223e0d0a20202020202020203c7461626c6520636c6173733d22636f6e7461696e6572222077696474683d223630302220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a236666666666663b626f726465722d7261646975733a323070783b626f782d736861646f773a3020313070782033307078207267626128302c302c302c302e3035293b6f766572666c6f773a68696464656e3b223e0d0a202020202020202020203c74723e3c7464206865696768743d223622207374796c653d226261636b67726f756e642d636f6c6f723a234639373331363b223e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a34307078203020323070783b223e3c696d67207372633d2268747470733a2f2f78706d626e7a6e736d73756a6a7577756d6669772e73757061626173652e636f2f73746f726167652f76312f6f626a6563742f7075626c69632f7075626c69632d6173736574732f627261766974612d6c6f676f2e776562702220616c743d2242726176697461222077696474683d2231383022207374796c653d22646973706c61793a626c6f636b3b626f726465723a303b6d61782d77696474683a313030253b6865696768743a6175746f3b22202f3e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020323070783b223e3c646976207374796c653d22666f6e742d73697a653a363470783b6c696e652d6865696768743a313b223ef09f8eab3c2f6469763e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420636c6173733d22636f6e74656e742220616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203430707820343070783b223e0d0a20202020202020202020202020203c6831207374796c653d226d617267696e3a30203020313470783b636f6c6f723a233146323933373b666f6e742d73697a653a323670783b666f6e742d7765696768743a3730303b223e44657374656b2054616c6562696e697a20416cc4b16e64c4b13c2f68313e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a30203020323470783b636f6c6f723a233442353536333b666f6e742d73697a653a313670783b6c696e652d6865696768743a312e363b223e4d657268616261207b7b4e414d457d7d2c2074616c6562696e697a206261c59f6172c4b1796c61206b6179646564696c64692e20456b6962696d697a20656e206bc4b173612073c3bc726564652073697a696e6c6520696c657469c59f696d65206765c3a76563656b7469722e3c2f703e0d0a20202020202020202020202020203c646976207374796c653d226261636b67726f756e642d636f6c6f723a234646463745443b626f726465723a31707820736f6c696420234646454444353b626f726465722d7261646975733a313270783b70616464696e673a323070783b6d617267696e2d626f74746f6d3a323470783b746578742d616c69676e3a6c6566743b223e0d0a202020202020202020202020202020203c70207374796c653d226d617267696e3a302030203870783b636f6c6f723a233743324431323b666f6e742d73697a653a313470783b223e3c7374726f6e673e54616c6570204e6f3a3c2f7374726f6e673e20237b7b5449434b45545f49447d7d3c2f703e0d0a202020202020202020202020202020203c70207374796c653d226d617267696e3a302030203870783b636f6c6f723a233743324431323b666f6e742d73697a653a313470783b223e3c7374726f6e673e4b6f6e753a3c2f7374726f6e673e207b7b5355424a4543547d7d3c2f703e0d0a202020202020202020202020202020203c70207374796c653d226d617267696e3a302030203870783b636f6c6f723a233743324431323b666f6e742d73697a653a313470783b223e3c7374726f6e673e4b617465676f72693a3c2f7374726f6e673e207b7b43415445474f52597d7d3c2f703e0d0a202020202020202020202020202020203c70207374796c653d226d617267696e3a303b636f6c6f723a233743324431323b666f6e742d73697a653a313470783b6c696e652d6865696768743a312e363b223e3c7374726f6e673e4d6573616a3a3c2f7374726f6e673e3c62723e7b7b555345525f4d4553534147457d7d3c2f703e0d0a20202020202020202020202020203c2f6469763e0d0a20202020202020202020202020203c7461626c6520626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d2230223e3c74723e3c746420616c69676e3d2263656e74657222207374796c653d22626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a234639373331363b223e3c6120687265663d227b7b42524f575345525f4c494e4b7d7d22207374796c653d22646973706c61793a696e6c696e652d626c6f636b3b70616464696e673a3134707820333670783b666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b666f6e742d73697a653a313570783b636f6c6f723a236666666666663b746578742d6465636f726174696f6e3a6e6f6e653b666f6e742d7765696768743a3630303b626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a234639373331363b626f726465723a31707820736f6c696420234639373331363b223e54616c6570204465746179c4b16ec4b12041c3a73c2f613e3c2f74643e3c2f74723e3c2f7461626c653e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d226261636b67726f756e642d636f6c6f723a234646463846303b70616464696e673a323070783b223e3c70207374796c653d226d617267696e3a302030203870783b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e536f72756c6172c4b16ec4b17a206dc4b1207661723f203c6120687265663d226d61696c746f3a737570706f727440627261766974612e636f6d2e747222207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e737570706f727440627261766974612e636f6d2e74723c2f613e3c2f703e3c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223ec2a9203230323620427261766974612e2054c3bc6d2068616b6c6172c4b12073616b6cc4b164c4b1722e3c2f703e3c2f74643e3c2f74723e0d0a20202020202020203c2f7461626c653e0d0a2020202020203c2f74643e0d0a202020203c2f74723e0d0a20203c2f7461626c653e0d0a3c2f626f64793e0d0a3c2f68746d6c3e0d0a2474706c5f737570706f72745f7469636b6574240d0a20202020292c0d0a20202020280d0a20202020202027737570706f72745f7469636b65745f7265706c696564272c0d0a2020202020202744657374656b2059616ec4b174c4b1272c0d0a2020202020202744657374656b2054616c6562696e697a652059616ec4b1742047656c646920f09f92ac20237b7b5449434b45545f49447d7d272c0d0a202020202020275b225449434b45545f4944222c22555345525f4d455353414745222c2241444d494e5f5245504c59222c2242524f575345525f4c494e4b222c22534954455f55524c222c224e414d45225d273a3a6a736f6e622c0d0a2020202020202474706c5f737570706f72745f7469636b65745f7265706c696564240d0a3c21444f43545950452068746d6c3e0d0a3c68746d6c206c616e673d227472223e0d0a3c686561643e0d0a20203c6d65746120636861727365743d225554462d38223e0d0a20203c6d657461206e616d653d2276696577706f72742220636f6e74656e743d2277696474683d6465766963652d77696474682c20696e697469616c2d7363616c653d312e30223e0d0a20203c6d657461206e616d653d22636f6c6f722d736368656d652220636f6e74656e743d226c69676874223e0d0a20203c6d657461206e616d653d22737570706f727465642d636f6c6f722d736368656d65732220636f6e74656e743d226c69676874223e0d0a20203c7469746c653e44657374656b2054616c6562696e697a2059616ec4b1746c616e64c4b13c2f7469746c653e0d0a20203c6c696e6b20687265663d2268747470733a2f2f666f6e74732e676f6f676c65617069732e636f6d2f637373323f66616d696c793d42616c6f6f2b323a77676874403430303b3530303b3630303b3730303b3830302666616d696c793d4e756e69746f3a77676874403430303b3630303b3730303b3830303b39303026646973706c61793d73776170222072656c3d227374796c657368656574223e0d0a20203c7374796c653e0d0a202020203a726f6f74207b20636f6c6f722d736368656d653a206c696768743b207d0d0a20202020626f6479207b206261636b67726f756e642d636f6c6f723a234646464246372021696d706f7274616e743b20636f6c6f723a233146323933372021696d706f7274616e743b20666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b206d617267696e3a303b2070616464696e673a303b207d0d0a20202020406d65646961206f6e6c792073637265656e20616e6420286d61782d77696474683a363030707829207b202e636f6e7461696e6572207b2077696474683a313030252021696d706f7274616e743b20626f726465722d7261646975733a302021696d706f7274616e743b207d202e636f6e74656e74207b2070616464696e673a3330707820323070782021696d706f7274616e743b207d207d0d0a20203c2f7374796c653e0d0a3c2f686561643e0d0a3c626f64793e0d0a20203c7461626c652077696474683d22313030252220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a234646464246373b223e0d0a202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a3230707820303b223e3c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e452d706f73746179c4b12067c3b672c3bc6e74c3bc6c656d656b746520736f72756e206d75207961c59fc4b1796f7273756e757a3f203c6120687265663d227b7b42524f575345525f4c494e4b7d7d22207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e5461726179c4b163c4b164612061c3a7c4b16e3c2f613e3c2f703e3c2f74643e3c2f74723e0d0a202020203c74723e0d0a2020202020203c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020343070783b223e0d0a20202020202020203c7461626c6520636c6173733d22636f6e7461696e6572222077696474683d223630302220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a236666666666663b626f726465722d7261646975733a323070783b626f782d736861646f773a3020313070782033307078207267626128302c302c302c302e3035293b6f766572666c6f773a68696464656e3b223e0d0a202020202020202020203c74723e3c7464206865696768743d223622207374796c653d226261636b67726f756e642d636f6c6f723a233342383246363b223e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a34307078203020323070783b223e3c696d67207372633d2268747470733a2f2f78706d626e7a6e736d73756a6a7577756d6669772e73757061626173652e636f2f73746f726167652f76312f6f626a6563742f7075626c69632f7075626c69632d6173736574732f627261766974612d6c6f676f2e776562702220616c743d2242726176697461222077696474683d2231383022207374796c653d22646973706c61793a626c6f636b3b626f726465723a303b6d61782d77696474683a313030253b6865696768743a6175746f3b22202f3e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020323070783b223e3c646976207374796c653d22666f6e742d73697a653a363470783b6c696e652d6865696768743a313b223ef09f92ac3c2f6469763e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420636c6173733d22636f6e74656e742220616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203430707820343070783b223e0d0a20202020202020202020202020203c6831207374796c653d226d617267696e3a30203020313470783b636f6c6f723a233146323933373b666f6e742d73697a653a323670783b666f6e742d7765696768743a3730303b223e44657374656b2054616c6562696e697a2059616ec4b1746c616e64c4b13c2f68313e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a30203020323470783b636f6c6f723a233442353536333b666f6e742d73697a653a313670783b6c696e652d6865696768743a312e363b223e54616c6562696e697a2069c3a7696e20656b6962696d697a206269722079616ec4b174207061796c61c59f74c4b12e2041c59f61c49fc4b164616b6920c3b67a657474656e20696e63656c65796562696c697273696e697a2e3c2f703e0d0a20202020202020202020202020203c646976207374796c653d226261636b67726f756e642d636f6c6f723a234546463646463b626f726465723a31707820736f6c696420234442454146453b626f726465722d7261646975733a313270783b70616464696e673a323070783b6d617267696e2d626f74746f6d3a313670783b746578742d616c69676e3a6c6566743b223e0d0a202020202020202020202020202020203c70207374796c653d226d617267696e3a302030203870783b636f6c6f723a233145334138413b666f6e742d73697a653a313470783b223e3c7374726f6e673e54616c6570204e6f3a3c2f7374726f6e673e20237b7b5449434b45545f49447d7d3c2f703e0d0a202020202020202020202020202020203c70207374796c653d226d617267696e3a303b636f6c6f723a233145334138413b666f6e742d73697a653a313470783b6c696e652d6865696768743a312e363b223e3c7374726f6e673e4d6573616ac4b16ec4b17a3a3c2f7374726f6e673e3c62723e7b7b555345525f4d4553534147457d7d3c2f703e0d0a20202020202020202020202020203c2f6469763e0d0a20202020202020202020202020203c646976207374796c653d226261636b67726f756e642d636f6c6f723a234630464446343b626f726465723a31707820736f6c696420234443464345373b626f726465722d7261646975733a313270783b70616464696e673a323070783b6d617267696e2d626f74746f6d3a323470783b746578742d616c69676e3a6c6566743b223e0d0a202020202020202020202020202020203c70207374796c653d226d617267696e3a303b636f6c6f723a233136363533343b666f6e742d73697a653a313470783b6c696e652d6865696768743a312e363b223e3c7374726f6e673e59616ec4b174c4b16dc4b17a3a3c2f7374726f6e673e3c62723e7b7b41444d494e5f5245504c597d7d3c2f703e0d0a20202020202020202020202020203c2f6469763e0d0a20202020202020202020202020203c7461626c6520626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d2230223e3c74723e3c746420616c69676e3d2263656e74657222207374796c653d22626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a233342383246363b223e3c6120687265663d227b7b42524f575345525f4c494e4b7d7d22207374796c653d22646973706c61793a696e6c696e652d626c6f636b3b70616464696e673a3134707820333670783b666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b666f6e742d73697a653a313570783b636f6c6f723a236666666666663b746578742d6465636f726174696f6e3a6e6f6e653b666f6e742d7765696768743a3630303b626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a233342383246363b626f726465723a31707820736f6c696420233342383246363b223e54616c6570204465746179c4b16ec4b12041c3a73c2f613e3c2f74643e3c2f74723e3c2f7461626c653e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d226261636b67726f756e642d636f6c6f723a234646463846303b70616464696e673a323070783b223e3c70207374796c653d226d617267696e3a302030203870783b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e536f72756c6172c4b16ec4b17a206dc4b1207661723f203c6120687265663d226d61696c746f3a737570706f727440627261766974612e636f6d2e747222207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e737570706f727440627261766974612e636f6d2e74723c2f613e3c2f703e3c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223ec2a9203230323620427261766974612e2054c3bc6d2068616b6c6172c4b12073616b6cc4b164c4b1722e3c2f703e3c2f74643e3c2f74723e0d0a20202020202020203c2f7461626c653e0d0a2020202020203c2f74643e0d0a202020203c2f74723e0d0a20203c2f7461626c653e0d0a3c2f626f64793e0d0a3c2f68746d6c3e0d0a2474706c5f737570706f72745f7469636b65745f7265706c696564240d0a20202020292c0d0a20202020280d0a20202020202027737570706f72745f7469636b65745f636c6f736564272c0d0a2020202020202744657374656b2054616c656269204b61706174c4b16c64c4b1272c0d0a2020202020202744657374656b2054616c6562696e697a20c387c3b67ac3bc6d6c656e646920e29c8520237b7b5449434b45545f49447d7d272c0d0a202020202020275b225449434b45545f4944222c2241444d494e5f5245504c59222c2242524f575345525f4c494e4b222c22534954455f55524c222c224e414d45225d273a3a6a736f6e622c0d0a2020202020202474706c5f737570706f72745f7469636b65745f636c6f736564240d0a3c21444f43545950452068746d6c3e0d0a3c68746d6c206c616e673d227472223e0d0a3c686561643e0d0a20203c6d65746120636861727365743d225554462d38223e0d0a20203c6d657461206e616d653d2276696577706f72742220636f6e74656e743d2277696474683d6465766963652d77696474682c20696e697469616c2d7363616c653d312e30223e0d0a20203c6d657461206e616d653d22636f6c6f722d736368656d652220636f6e74656e743d226c69676874223e0d0a20203c6d657461206e616d653d22737570706f727465642d636f6c6f722d736368656d65732220636f6e74656e743d226c69676874223e0d0a20203c7469746c653e44657374656b2054616c6562696e697a20c387c3b67ac3bc6d6c656e64693c2f7469746c653e0d0a20203c6c696e6b20687265663d2268747470733a2f2f666f6e74732e676f6f676c65617069732e636f6d2f637373323f66616d696c793d42616c6f6f2b323a77676874403430303b3530303b3630303b3730303b3830302666616d696c793d4e756e69746f3a77676874403430303b3630303b3730303b3830303b39303026646973706c61793d73776170222072656c3d227374796c657368656574223e0d0a20203c7374796c653e0d0a202020203a726f6f74207b20636f6c6f722d736368656d653a206c696768743b207d0d0a20202020626f6479207b206261636b67726f756e642d636f6c6f723a234646464246372021696d706f7274616e743b20636f6c6f723a233146323933372021696d706f7274616e743b20666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b206d617267696e3a303b2070616464696e673a303b207d0d0a20202020406d65646961206f6e6c792073637265656e20616e6420286d61782d77696474683a363030707829207b202e636f6e7461696e6572207b2077696474683a313030252021696d706f7274616e743b20626f726465722d7261646975733a302021696d706f7274616e743b207d202e636f6e74656e74207b2070616464696e673a3330707820323070782021696d706f7274616e743b207d207d0d0a20203c2f7374796c653e0d0a3c2f686561643e0d0a3c626f64793e0d0a20203c7461626c652077696474683d22313030252220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a234646464246373b223e0d0a202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a3230707820303b223e3c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e452d706f73746179c4b12067c3b672c3bc6e74c3bc6c656d656b746520736f72756e206d75207961c59fc4b1796f7273756e757a3f203c6120687265663d227b7b42524f575345525f4c494e4b7d7d22207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e5461726179c4b163c4b164612061c3a7c4b16e3c2f613e3c2f703e3c2f74643e3c2f74723e0d0a202020203c74723e0d0a2020202020203c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020343070783b223e0d0a20202020202020203c7461626c6520636c6173733d22636f6e7461696e6572222077696474683d223630302220626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d223022207374796c653d226261636b67726f756e642d636f6c6f723a236666666666663b626f726465722d7261646975733a323070783b626f782d736861646f773a3020313070782033307078207267626128302c302c302c302e3035293b6f766572666c6f773a68696464656e3b223e0d0a202020202020202020203c74723e3c7464206865696768743d223622207374796c653d226261636b67726f756e642d636f6c6f723a233232433535453b223e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a34307078203020323070783b223e3c696d67207372633d2268747470733a2f2f78706d626e7a6e736d73756a6a7577756d6669772e73757061626173652e636f2f73746f726167652f76312f6f626a6563742f7075626c69632f7075626c69632d6173736574732f627261766974612d6c6f676f2e776562702220616c743d2242726176697461222077696474683d2231383022207374796c653d22646973706c61793a626c6f636b3b626f726465723a303b6d61782d77696474683a313030253b6865696768743a6175746f3b22202f3e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203020323070783b223e3c646976207374796c653d22666f6e742d73697a653a363470783b6c696e652d6865696768743a313b223ee29c853c2f6469763e3c2f74643e3c2f74723e0d0a202020202020202020203c74723e0d0a2020202020202020202020203c746420636c6173733d22636f6e74656e742220616c69676e3d2263656e74657222207374796c653d2270616464696e673a30203430707820343070783b223e0d0a20202020202020202020202020203c6831207374796c653d226d617267696e3a30203020313470783b636f6c6f723a233146323933373b666f6e742d73697a653a323670783b666f6e742d7765696768743a3730303b223e44657374656b2054616c6562696e697a20c387c3b67ac3bc6d6c656e64693c2f68313e0d0a20202020202020202020202020203c70207374796c653d226d617267696e3a30203020323470783b636f6c6f723a233442353536333b666f6e742d73697a653a313670783b6c696e652d6865696768743a312e363b223e237b7b5449434b45545f49447d7d206e756d6172616cc4b12074616c6562696e697a20c3a7c3b67ac3bc6d6c656e6469207665206b61706174c4b16c64c4b12e20c3967a65742062696c67692061c59f61c49fc4b1646164c4b1722e3c2f703e0d0a20202020202020202020202020203c646976207374796c653d226261636b67726f756e642d636f6c6f723a234630464446343b626f726465723a31707820736f6c696420234443464345373b626f726465722d7261646975733a313270783b70616464696e673a323070783b6d617267696e2d626f74746f6d3a323470783b746578742d616c69676e3a6c6566743b223e0d0a202020202020202020202020202020203c70207374796c653d226d617267696e3a303b636f6c6f723a233136363533343b666f6e742d73697a653a313470783b6c696e652d6865696768743a312e363b223e3c7374726f6e673e536f6e2059616ec4b1743a3c2f7374726f6e673e3c62723e7b7b41444d494e5f5245504c597d7d3c2f703e0d0a20202020202020202020202020203c2f6469763e0d0a20202020202020202020202020203c7461626c6520626f726465723d2230222063656c6c73706163696e673d2230222063656c6c70616464696e673d2230223e3c74723e3c746420616c69676e3d2263656e74657222207374796c653d22626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a233232433535453b223e3c6120687265663d227b7b42524f575345525f4c494e4b7d7d22207374796c653d22646973706c61793a696e6c696e652d626c6f636b3b70616464696e673a3134707820333670783b666f6e742d66616d696c793a2742616c6f6f2032272c274e756e69746f272c73616e732d73657269663b666f6e742d73697a653a313570783b636f6c6f723a236666666666663b746578742d6465636f726174696f6e3a6e6f6e653b666f6e742d7765696768743a3630303b626f726465722d7261646975733a353070783b6261636b67726f756e642d636f6c6f723a233232433535453b626f726465723a31707820736f6c696420233232433535453b223e54616c6570204765c3a76d69c59f696e692041c3a73c2f613e3c2f74643e3c2f74723e3c2f7461626c653e0d0a2020202020202020202020203c2f74643e0d0a202020202020202020203c2f74723e0d0a202020202020202020203c74723e3c746420616c69676e3d2263656e74657222207374796c653d226261636b67726f756e642d636f6c6f723a234646463846303b70616464696e673a323070783b223e3c70207374796c653d226d617267696e3a302030203870783b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223e536f72756c6172c4b16ec4b17a206dc4b1207661723f203c6120687265663d226d61696c746f3a737570706f727440627261766974612e636f6d2e747222207374796c653d22636f6c6f723a234639373331363b746578742d6465636f726174696f6e3a6e6f6e653b223e737570706f727440627261766974612e636f6d2e74723c2f613e3c2f703e3c70207374796c653d226d617267696e3a303b636f6c6f723a233943413341463b666f6e742d73697a653a313270783b223ec2a9203230323620427261766974612e2054c3bc6d2068616b6c6172c4b12073616b6cc4b164c4b1722e3c2f703e3c2f74643e3c2f74723e0d0a20202020202020203c2f7461626c653e0d0a2020202020203c2f74643e0d0a202020203c2f74723e0d0a20203c2f7461626c653e0d0a3c2f626f64793e0d0a3c2f68746d6c3e0d0a2474706c5f737570706f72745f7469636b65745f636c6f736564240d0a20202020290d0a290d0a555044415445207075626c69632e656d61696c5f74656d706c617465732065740d0a5345540d0a20206e616d65203d20702e6e616d652c0d0a20207375626a656374203d20702e7375626a6563742c0d0a20207661726961626c6573203d20702e7661726961626c65732c0d0a2020636f6e74656e745f68746d6c203d20702e636f6e74656e745f68746d6c2c0d0a2020757064617465645f6174203d2074696d657a6f6e652827757463273a3a746578742c206e6f772829290d0a46524f4d207061796c6f616420700d0a57484552452065742e736c7567203d20702e736c756700000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"UPDATE 0"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260215000005_email_logs_admin_read_policy.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Allow admin/superadmin users to read email logs in Admin panel.\r\n-- Existing service_role policies remain intact for system writes/reads.\r\n\r\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE IF EXISTS public.email_logs ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can read email logs\" ON public.email_logs","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins can read email logs\"\r\nON public.email_logs\r\nFOR SELECT\r\nTO authenticated\r\nUSING (\r\n  EXISTS (\r\n    SELECT 1\r\n    FROM public.profiles p\r\n    WHERE p.id = auth.uid()\r\n      AND (p.is_admin = true OR p.is_superadmin = true)\r\n  )\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can read email logs\" for relation \"public.email_logs\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260215000005"},{"text":"email_logs_admin_read_policy"},{"binary":"0000000100000000000000190000000500000001000000952d2d20416c6c6f772061646d696e2f737570657261646d696e20757365727320746f207265616420656d61696c206c6f677320696e2041646d696e2070616e656c2e0d0a2d2d204578697374696e6720736572766963655f726f6c6520706f6c69636965732072656d61696e20696e7461637420666f722073797374656d207772697465732f72656164732e0d0a0d0a424547494e00000041414c544552205441424c4520494620455849535453207075626c69632e656d61696c5f6c6f677320454e41424c4520524f57204c4556454c2053454355524954590000004744524f5020504f4c49435920494620455849535453202241646d696e732063616e207265616420656d61696c206c6f677322204f4e207075626c69632e656d61696c5f6c6f6773000000fb43524541544520504f4c494359202241646d696e732063616e207265616420656d61696c206c6f6773220d0a4f4e207075626c69632e656d61696c5f6c6f67730d0a464f522053454c4543540d0a544f2061757468656e746963617465640d0a5553494e4720280d0a202045584953545320280d0a2020202053454c45435420310d0a2020202046524f4d207075626c69632e70726f66696c657320700d0a20202020574845524520702e6964203d20617574682e75696428290d0a202020202020414e442028702e69735f61646d696e203d2074727565204f5220702e69735f737570657261646d696e203d2074727565290d0a2020290d0a2900000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
NOTICE (00000): policy "Admins can read email logs" for relation "public.email_logs" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260215000006_email_logs_superadmin_read_policy.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Restrict admin email log visibility to superadmin users only.\r\n-- Service role policies remain intact for system writes/reads.\r\n\r\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE IF EXISTS public.email_logs ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can read email logs\" ON public.email_logs","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Superadmins can read email logs\" ON public.email_logs","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Superadmins can read email logs\"\r\nON public.email_logs\r\nFOR SELECT\r\nTO authenticated\r\nUSING (\r\n  EXISTS (\r\n    SELECT 1\r\n    FROM public.profiles p\r\n    WHERE p.id = auth.uid()\r\n      AND p.is_superadmin = true\r\n  )\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260215000006"},{"text":"email_logs_superadmin_read_policy"},{"binary":"00000001000000000000001900000006000000010000008a2d2d2052657374726963742061646d696e20656d61696c206c6f67207669736962696c69747920746f20737570657261646d696e207573657273206f6e6c792e0d0a2d2d205365727669636520726f6c6520706f6c69636965732072656d61696e20696e7461637420666f722073797374656d207772697465732f72656164732e0d0a0d0a424547494e00000041414c544552205441424c4520494620455849535453207075626c69632e656d61696c5f6c6f677320454e41424c4520524f57204c4556454c2053454355524954590000004744524f5020504f4c49435920494620455849535453202241646d696e732063616e207265616420656d61696c206c6f677322204f4e207075626c69632e656d61696c5f6c6f67730000004c44524f5020504f4c494359204946204558495354532022537570657261646d696e732063616e207265616420656d61696c206c6f677322204f4e207075626c69632e656d61696c5f6c6f6773000000e943524541544520504f4c4943592022537570657261646d696e732063616e207265616420656d61696c206c6f6773220d0a4f4e207075626c69632e656d61696c5f6c6f67730d0a464f522053454c4543540d0a544f2061757468656e746963617465640d0a5553494e4720280d0a202045584953545320280d0a2020202053454c45435420310d0a2020202046524f4d207075626c69632e70726f66696c657320700d0a20202020574845524520702e6964203d20617574682e75696428290d0a202020202020414e4420702e69735f737570657261646d696e203d20747275650d0a2020290d0a2900000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Superadmins can read email logs\" for relation \"public.email_logs\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Superadmins can read email logs" for relation "public.email_logs" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260215000007_email_management_superadmin_only.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Restrict admin email management tables to superadmin users only.\r\n\r\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE IF EXISTS public.email_templates ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE IF EXISTS public.email_configs ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can manage email templates\" ON public.email_templates","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Superadmins can manage email templates\" ON public.email_templates","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Superadmins can manage email templates\"\r\nON public.email_templates\r\nFOR ALL\r\nTO authenticated\r\nUSING (\r\n  EXISTS (\r\n    SELECT 1\r\n    FROM public.profiles p\r\n    WHERE p.id = auth.uid()\r\n      AND p.is_superadmin = true\r\n  )\r\n)\r\nWITH CHECK (\r\n  EXISTS (\r\n    SELECT 1\r\n    FROM public.profiles p\r\n    WHERE p.id = auth.uid()\r\n      AND p.is_superadmin = true\r\n  )\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can manage email configs\" ON public.email_configs","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Superadmins can manage email configs\" ON public.email_configs","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Superadmins can manage email configs\"\r\nON public.email_configs\r\nFOR ALL\r\nTO authenticated\r\nUSING (\r\n  EXISTS (\r\n    SELECT 1\r\n    FROM public.profiles p\r\n    WHERE p.id = auth.uid()\r\n      AND p.is_superadmin = true\r\n  )\r\n)\r\nWITH CHECK (\r\n  EXISTS (\r\n    SELECT 1\r\n    FROM public.profiles p\r\n    WHERE p.id = auth.uid()\r\n      AND p.is_superadmin = true\r\n  )\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Superadmins can manage email templates\" for relation \"public.email_templates\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
NOTICE (00000): policy "Superadmins can manage email templates" for relation "public.email_templates" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Superadmins can manage email configs\" for relation \"public.email_configs\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Superadmins can manage email configs" for relation "public.email_configs" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260215000007"},{"text":"email_management_superadmin_only"},{"binary":"0000000100000000000000190000000a000000010000004c2d2d2052657374726963742061646d696e20656d61696c206d616e6167656d656e74207461626c657320746f20737570657261646d696e207573657273206f6e6c792e0d0a0d0a424547494e00000046414c544552205441424c4520494620455849535453207075626c69632e656d61696c5f74656d706c6174657320454e41424c4520524f57204c4556454c20534543555249545900000044414c544552205441424c4520494620455849535453207075626c69632e656d61696c5f636f6e6669677320454e41424c4520524f57204c4556454c2053454355524954590000005344524f5020504f4c49435920494620455849535453202241646d696e732063616e206d616e61676520656d61696c2074656d706c6174657322204f4e207075626c69632e656d61696c5f74656d706c617465730000005844524f5020504f4c494359204946204558495354532022537570657261646d696e732063616e206d616e61676520656d61696c2074656d706c6174657322204f4e207075626c69632e656d61696c5f74656d706c617465730000017d43524541544520504f4c4943592022537570657261646d696e732063616e206d616e61676520656d61696c2074656d706c61746573220d0a4f4e207075626c69632e656d61696c5f74656d706c617465730d0a464f5220414c4c0d0a544f2061757468656e746963617465640d0a5553494e4720280d0a202045584953545320280d0a2020202053454c45435420310d0a2020202046524f4d207075626c69632e70726f66696c657320700d0a20202020574845524520702e6964203d20617574682e75696428290d0a202020202020414e4420702e69735f737570657261646d696e203d20747275650d0a2020290d0a290d0a5749544820434845434b20280d0a202045584953545320280d0a2020202053454c45435420310d0a2020202046524f4d207075626c69632e70726f66696c657320700d0a20202020574845524520702e6964203d20617574682e75696428290d0a202020202020414e4420702e69735f737570657261646d696e203d20747275650d0a2020290d0a290000004f44524f5020504f4c49435920494620455849535453202241646d696e732063616e206d616e61676520656d61696c20636f6e6669677322204f4e207075626c69632e656d61696c5f636f6e666967730000005444524f5020504f4c494359204946204558495354532022537570657261646d696e732063616e206d616e61676520656d61696c20636f6e6669677322204f4e207075626c69632e656d61696c5f636f6e666967730000017943524541544520504f4c4943592022537570657261646d696e732063616e206d616e61676520656d61696c20636f6e66696773220d0a4f4e207075626c69632e656d61696c5f636f6e666967730d0a464f5220414c4c0d0a544f2061757468656e746963617465640d0a5553494e4720280d0a202045584953545320280d0a2020202053454c45435420310d0a2020202046524f4d207075626c69632e70726f66696c657320700d0a20202020574845524520702e6964203d20617574682e75696428290d0a202020202020414e4420702e69735f737570657261646d696e203d20747275650d0a2020290d0a290d0a5749544820434845434b20280d0a202045584953545320280d0a2020202053454c45435420310d0a2020202046524f4d207075626c69632e70726f66696c657320700d0a20202020574845524520702e6964203d20617574682e75696428290d0a202020202020414e4420702e69735f737570657261646d696e203d20747275650d0a2020290d0a2900000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260215000008_security_performance_lint_fixes.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Supabase Linter Fixes: Security and Performance\r\n-- 1. Security: Set search_path for mutable functions\r\n-- 2. Performance: Auth RLS Init Plan (Subquery for auth functions)\r\n-- 3. Performance: Multiple Permissive Policies (Avoid policy overlap)\r\n\r\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 1. SECURITY: Set search_path for mutable functions to prevent search-path hijacking\r\n\r\nALTER FUNCTION public.handle_updated_at() SET search_path = public, pg_catalog","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER FUNCTION public.normalize_email_token_key(text) SET search_path = public, pg_catalog","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. PERFORMANCE: Auth RLS Init Plan \u0026 Multiple Permissive Policies\r\n\r\n-- email_variable_registry\r\n-- Combine into mutations-only policy + optimized select policy\r\nDROP POLICY IF EXISTS \"Admins can manage email variable registry\" ON public.email_variable_registry","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Public read variable registry\" ON public.email_variable_registry","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins manage email variable registry\"\r\nON public.email_variable_registry\r\nFOR ALL\r\nTO authenticated\r\nUSING ( (SELECT is_admin_user()) )\r\nWITH CHECK ( (SELECT is_admin_user()) )","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Public read variable registry\"\r\nON public.email_variable_registry\r\nFOR SELECT\r\nTO authenticated\r\nUSING ( true )","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- email_template_variables\r\n-- Combine into mutations-only policy + optimized select policy\r\nDROP POLICY IF EXISTS \"Admins can manage email template variables\" ON public.email_template_variables","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Public read template variables\" ON public.email_template_variables","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Public read variable registry\" for relation \"public.email_variable_registry\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Public read variable registry" for relation "public.email_variable_registry" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins manage email template variables\"\r\nON public.email_template_variables\r\nFOR ALL\r\nTO authenticated\r\nUSING ( (SELECT is_admin_user()) )\r\nWITH CHECK ( (SELECT is_admin_user()) )","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Public read template variables\"\r\nON public.email_template_variables\r\nFOR SELECT\r\nTO authenticated\r\nUSING ( true )","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- email_logs\r\n-- Optimized initplan for superadmin check\r\nDROP POLICY IF EXISTS \"Superadmins can read email logs\" ON public.email_logs","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Superadmins can read email logs\"\r\nON public.email_logs\r\nFOR SELECT\r\nTO authenticated\r\nUSING (\r\n  EXISTS (\r\n    SELECT 1\r\n    FROM public.profiles p\r\n    WHERE p.id = (SELECT auth.uid())\r\n      AND p.is_superadmin = true\r\n  )\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Public read template variables\" for relation \"public.email_template_variables\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
NOTICE (00000): policy "Public read template variables" for relation "public.email_template_variables" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- email_templates\r\n-- Optimized initplan for superadmin check\r\nDROP POLICY IF EXISTS \"Superadmins can manage email templates\" ON public.email_templates","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Superadmins can manage email templates\"\r\nON public.email_templates\r\nFOR ALL\r\nTO authenticated\r\nUSING (\r\n  EXISTS (\r\n    SELECT 1\r\n    FROM public.profiles p\r\n    WHERE p.id = (SELECT auth.uid())\r\n      AND p.is_superadmin = true\r\n  )\r\n)\r\nWITH CHECK (\r\n  EXISTS (\r\n    SELECT 1\r\n    FROM public.profiles p\r\n    WHERE p.id = (SELECT auth.uid())\r\n      AND p.is_superadmin = true\r\n  )\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- email_configs\r\n-- Optimized initplan for superadmin check\r\nDROP POLICY IF EXISTS \"Superadmins can manage email configs\" ON public.email_configs","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Superadmins can manage email configs\"\r\nON public.email_configs\r\nFOR ALL\r\nTO authenticated\r\nUSING (\r\n  EXISTS (\r\n    SELECT 1\r\n    FROM public.profiles p\r\n    WHERE p.id = (SELECT auth.uid())\r\n      AND p.is_superadmin = true\r\n  )\r\n)\r\nWITH CHECK (\r\n  EXISTS (\r\n    SELECT 1\r\n    FROM public.profiles p\r\n    WHERE p.id = (SELECT auth.uid())\r\n      AND p.is_superadmin = true\r\n  )\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- payment_transactions\r\n-- Resolve Multiple Permissive Policies for SELECT\r\nDROP POLICY IF EXISTS \"Admins manage payment transactions\" ON public.payment_transactions","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users can view own transactions\" ON public.payment_transactions","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins manage payment transactions\"\r\nON public.payment_transactions\r\nFOR ALL\r\nTO authenticated\r\nUSING ( (SELECT is_admin_user()) )\r\nWITH CHECK ( (SELECT is_admin_user()) )","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Select payment transactions\"\r\nON public.payment_transactions\r\nFOR SELECT\r\nTO authenticated\r\nUSING (\r\n  (SELECT is_admin_user())\r\n  OR \r\n  EXISTS (\r\n    SELECT 1 FROM public.payment_intents\r\n    WHERE payment_intents.id = payment_transactions.intent_id\r\n      AND payment_intents.user_id = (SELECT auth.uid())\r\n  )\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins manage payment transactions\" for relation \"public.payment_transactions\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
NOTICE (00000): policy "Admins manage payment transactions" for relation "public.payment_transactions" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users can view own transactions\" for relation \"public.payment_transactions\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Users can view own transactions" for relation "public.payment_transactions" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260215000008"},{"text":"security_performance_lint_fixes"},{"binary":"0000000100000000000000190000001600000001000000ff2d2d205375706162617365204c696e7465722046697865733a20536563757269747920616e6420506572666f726d616e63650d0a2d2d20312e2053656375726974793a20536574207365617263685f7061746820666f72206d757461626c652066756e6374696f6e730d0a2d2d20322e20506572666f726d616e63653a204175746820524c5320496e697420506c616e2028537562717565727920666f7220617574682066756e6374696f6e73290d0a2d2d20332e20506572666f726d616e63653a204d756c7469706c65205065726d69737369766520506f6c6963696573202841766f696420706f6c696379206f7665726c6170290d0a0d0a424547494e000000a82d2d20312e2053454355524954593a20536574207365617263685f7061746820666f72206d757461626c652066756e6374696f6e7320746f2070726576656e74207365617263682d706174682068696a61636b696e670d0a0d0a414c5445522046554e4354494f4e207075626c69632e68616e646c655f757064617465645f6174282920534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670000005a414c5445522046554e4354494f4e207075626c69632e6e6f726d616c697a655f656d61696c5f746f6b656e5f6b657928746578742920534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f67000001082d2d20322e20504552464f524d414e43453a204175746820524c5320496e697420506c616e2026204d756c7469706c65205065726d69737369766520506f6c69636965730d0a0d0a2d2d20656d61696c5f7661726961626c655f72656769737472790d0a2d2d20436f6d62696e6520696e746f206d75746174696f6e732d6f6e6c7920706f6c696379202b206f7074696d697a65642073656c65637420706f6c6963790d0a44524f5020504f4c49435920494620455849535453202241646d696e732063616e206d616e61676520656d61696c207661726961626c6520726567697374727922204f4e207075626c69632e656d61696c5f7661726961626c655f72656769737472790000005744524f5020504f4c4943592049462045584953545320225075626c69632072656164207661726961626c6520726567697374727922204f4e207075626c69632e656d61696c5f7661726961626c655f7265676973747279000000c043524541544520504f4c494359202241646d696e73206d616e61676520656d61696c207661726961626c65207265676973747279220d0a4f4e207075626c69632e656d61696c5f7661726961626c655f72656769737472790d0a464f5220414c4c0d0a544f2061757468656e746963617465640d0a5553494e472028202853454c4543542069735f61646d696e5f7573657228292920290d0a5749544820434845434b2028202853454c4543542069735f61646d696e5f7573657228292920290000007e43524541544520504f4c49435920225075626c69632072656164207661726961626c65207265676973747279220d0a4f4e207075626c69632e656d61696c5f7661726961626c655f72656769737472790d0a464f522053454c4543540d0a544f2061757468656e746963617465640d0a5553494e47202820747275652029000000c32d2d20656d61696c5f74656d706c6174655f7661726961626c65730d0a2d2d20436f6d62696e6520696e746f206d75746174696f6e732d6f6e6c7920706f6c696379202b206f7074696d697a65642073656c65637420706f6c6963790d0a44524f5020504f4c49435920494620455849535453202241646d696e732063616e206d616e61676520656d61696c2074656d706c617465207661726961626c657322204f4e207075626c69632e656d61696c5f74656d706c6174655f7661726961626c65730000005944524f5020504f4c4943592049462045584953545320225075626c696320726561642074656d706c617465207661726961626c657322204f4e207075626c69632e656d61696c5f74656d706c6174655f7661726961626c6573000000c243524541544520504f4c494359202241646d696e73206d616e61676520656d61696c2074656d706c617465207661726961626c6573220d0a4f4e207075626c69632e656d61696c5f74656d706c6174655f7661726961626c65730d0a464f5220414c4c0d0a544f2061757468656e746963617465640d0a5553494e472028202853454c4543542069735f61646d696e5f7573657228292920290d0a5749544820434845434b2028202853454c4543542069735f61646d696e5f7573657228292920290000008043524541544520504f4c49435920225075626c696320726561642074656d706c617465207661726961626c6573220d0a4f4e207075626c69632e656d61696c5f74656d706c6174655f7661726961626c65730d0a464f522053454c4543540d0a544f2061757468656e746963617465640d0a5553494e47202820747275652029000000872d2d20656d61696c5f6c6f67730d0a2d2d204f7074696d697a656420696e6974706c616e20666f7220737570657261646d696e20636865636b0d0a44524f5020504f4c494359204946204558495354532022537570657261646d696e732063616e207265616420656d61696c206c6f677322204f4e207075626c69632e656d61696c5f6c6f6773000000f243524541544520504f4c4943592022537570657261646d696e732063616e207265616420656d61696c206c6f6773220d0a4f4e207075626c69632e656d61696c5f6c6f67730d0a464f522053454c4543540d0a544f2061757468656e746963617465640d0a5553494e4720280d0a202045584953545320280d0a2020202053454c45435420310d0a2020202046524f4d207075626c69632e70726f66696c657320700d0a20202020574845524520702e6964203d202853454c45435420617574682e7569642829290d0a202020202020414e4420702e69735f737570657261646d696e203d20747275650d0a2020290d0a29000000982d2d20656d61696c5f74656d706c617465730d0a2d2d204f7074696d697a656420696e6974706c616e20666f7220737570657261646d696e20636865636b0d0a44524f5020504f4c494359204946204558495354532022537570657261646d696e732063616e206d616e61676520656d61696c2074656d706c6174657322204f4e207075626c69632e656d61696c5f74656d706c617465730000018f43524541544520504f4c4943592022537570657261646d696e732063616e206d616e61676520656d61696c2074656d706c61746573220d0a4f4e207075626c69632e656d61696c5f74656d706c617465730d0a464f5220414c4c0d0a544f2061757468656e746963617465640d0a5553494e4720280d0a202045584953545320280d0a2020202053454c45435420310d0a2020202046524f4d207075626c69632e70726f66696c657320700d0a20202020574845524520702e6964203d202853454c45435420617574682e7569642829290d0a202020202020414e4420702e69735f737570657261646d696e203d20747275650d0a2020290d0a290d0a5749544820434845434b20280d0a202045584953545320280d0a2020202053454c45435420310d0a2020202046524f4d207075626c69632e70726f66696c657320700d0a20202020574845524520702e6964203d202853454c45435420617574682e7569642829290d0a202020202020414e4420702e69735f737570657261646d696e203d20747275650d0a2020290d0a29000000922d2d20656d61696c5f636f6e666967730d0a2d2d204f7074696d697a656420696e6974706c616e20666f7220737570657261646d696e20636865636b0d0a44524f5020504f4c494359204946204558495354532022537570657261646d696e732063616e206d616e61676520656d61696c20636f6e6669677322204f4e207075626c69632e656d61696c5f636f6e666967730000018b43524541544520504f4c4943592022537570657261646d696e732063616e206d616e61676520656d61696c20636f6e66696773220d0a4f4e207075626c69632e656d61696c5f636f6e666967730d0a464f5220414c4c0d0a544f2061757468656e746963617465640d0a5553494e4720280d0a202045584953545320280d0a2020202053454c45435420310d0a2020202046524f4d207075626c69632e70726f66696c657320700d0a20202020574845524520702e6964203d202853454c45435420617574682e7569642829290d0a202020202020414e4420702e69735f737570657261646d696e203d20747275650d0a2020290d0a290d0a5749544820434845434b20280d0a202045584953545320280d0a2020202053454c45435420310d0a2020202046524f4d207075626c69632e70726f66696c657320700d0a20202020574845524520702e6964203d202853454c45435420617574682e7569642829290d0a202020202020414e4420702e69735f737570657261646d696e203d20747275650d0a2020290d0a29000000a62d2d207061796d656e745f7472616e73616374696f6e730d0a2d2d205265736f6c7665204d756c7469706c65205065726d69737369766520506f6c696369657320666f722053454c4543540d0a44524f5020504f4c49435920494620455849535453202241646d696e73206d616e616765207061796d656e74207472616e73616374696f6e7322204f4e207075626c69632e7061796d656e745f7472616e73616374696f6e730000005644524f5020504f4c49435920494620455849535453202255736572732063616e2076696577206f776e207472616e73616374696f6e7322204f4e207075626c69632e7061796d656e745f7472616e73616374696f6e73000000ba43524541544520504f4c494359202241646d696e73206d616e616765207061796d656e74207472616e73616374696f6e73220d0a4f4e207075626c69632e7061796d656e745f7472616e73616374696f6e730d0a464f5220414c4c0d0a544f2061757468656e746963617465640d0a5553494e472028202853454c4543542069735f61646d696e5f7573657228292920290d0a5749544820434845434b2028202853454c4543542069735f61646d696e5f7573657228292920290000014b43524541544520504f4c494359202253656c656374207061796d656e74207472616e73616374696f6e73220d0a4f4e207075626c69632e7061796d656e745f7472616e73616374696f6e730d0a464f522053454c4543540d0a544f2061757468656e746963617465640d0a5553494e4720280d0a20202853454c4543542069735f61646d696e5f757365722829290d0a20204f52200d0a202045584953545320280d0a2020202053454c45435420312046524f4d207075626c69632e7061796d656e745f696e74656e74730d0a202020205748455245207061796d656e745f696e74656e74732e6964203d207061796d656e745f7472616e73616374696f6e732e696e74656e745f69640d0a202020202020414e44207061796d656e745f696e74656e74732e757365725f6964203d202853454c45435420617574682e7569642829290d0a2020290d0a2900000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260215170000_baseline_missing_tables.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Baseline migration for tables found in production but missing from repository history\r\n-- This ensures that the local development environment and CI/CD can recreate the exact schema.\r\n\r\n-- 1. admin_audit_log\r\nCREATE TABLE IF NOT EXISTS public.admin_audit_log (\r\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\r\n    admin_user_id UUID REFERENCES auth.users(id),\r\n    action TEXT NOT NULL,\r\n    target_table TEXT,\r\n    target_id UUID,\r\n    details JSONB,\r\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT now()\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMENT ON TABLE public.admin_audit_log IS 'Admin ilem loglar - GDPR compliance'","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42P07","Message":"relation \"admin_audit_log\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"parse_utilcmd.c","Line":207,"Routine":"transformCreateStmt","UnknownFields":null}
NOTICE (42P07): relation "admin_audit_log" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.admin_audit_log ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. email_logs\r\nCREATE TABLE IF NOT EXISTS public.email_logs (\r\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\r\n    order_id UUID REFERENCES public.orders(id) ON DELETE SET NULL,\r\n    email_type TEXT NOT NULL,\r\n    sent_at TIMESTAMP WITH TIME ZONE DEFAULT now(),\r\n    recipient TEXT,\r\n    template_slug TEXT,\r\n    subject TEXT,\r\n    content_snapshot TEXT,\r\n    error_details TEXT,\r\n    metadata JSONB DEFAULT '{}'::jsonb,\r\n    recipient_email TEXT,\r\n    render_warnings JSONB NOT NULL DEFAULT '[]'::jsonb,\r\n    unresolved_tokens JSONB NOT NULL DEFAULT '[]'::jsonb,\r\n    blocked BOOLEAN NOT NULL DEFAULT false,\r\n    degradation_active BOOLEAN NOT NULL DEFAULT false,\r\n    degradation_reason TEXT,\r\n    mode TEXT CHECK (mode IS NULL OR mode IN ('send'::text, 'test'::text, 'browser_preview'::text)),\r\n    template_version INTEGER\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_logs ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. payment_intents\r\nCREATE TABLE IF NOT EXISTS public.payment_intents (\r\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\r\n    user_id UUID NOT NULL REFERENCES auth.users(id),\r\n    shipping_address_id UUID REFERENCES public.addresses(id),\r\n    payment_method TEXT DEFAULT 'credit_card' CHECK (payment_method IN ('credit_card', 'bank_transfer')),\r\n    status TEXT DEFAULT 'pending' CHECK (status IN ('pending', 'awaiting_3d', 'paid', 'failed', 'void_pending', 'voided', 'expired', 'refund_pending', 'refunded')),\r\n    idempotency_key TEXT UNIQUE,\r\n    idempotency_expires_at TIMESTAMP WITH TIME ZONE,\r\n    currency TEXT DEFAULT 'TL',\r\n    item_total_cents BIGINT CHECK (item_total_cents \u003e= 0),\r\n    vat_total_cents BIGINT CHECK (vat_total_cents \u003e= 0),\r\n    shipping_total_cents BIGINT CHECK (shipping_total_cents \u003e= 0),\r\n    discount_total_cents BIGINT DEFAULT 0 CHECK (discount_total_cents \u003e= 0),\r\n    base_total_cents BIGINT CHECK (base_total_cents \u003e= 0),\r\n    commission_rate NUMERIC DEFAULT 0 CHECK (commission_rate \u003e= 0),\r\n    commission_amount_cents BIGINT DEFAULT 0 CHECK (commission_amount_cents \u003e= 0),\r\n    paid_total_cents BIGINT CHECK (paid_total_cents \u003e= 0),\r\n    installment_number INTEGER DEFAULT 1 CHECK (installment_number BETWEEN 1 AND 12),\r\n    cart_snapshot JSONB,\r\n    pricing_snapshot JSONB,\r\n    provider TEXT DEFAULT 'bakiyem',\r\n    merchant_ref TEXT,\r\n    gateway_trx_code TEXT,\r\n    gateway_status TEXT,\r\n    return_url TEXT,\r\n    fail_url TEXT,\r\n    threed_session_ref TEXT,\r\n    threed_payload_encrypted TEXT,\r\n    encryption_key_version TEXT,\r\n    expires_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT (now() + interval '15 minutes'),\r\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\r\n    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.payment_intents ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42P07","Message":"relation \"email_logs\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"parse_utilcmd.c","Line":207,"Routine":"transformCreateStmt","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
NOTICE (42P07): relation "email_logs" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 4. payment_transactions\r\nCREATE TABLE IF NOT EXISTS public.payment_transactions (\r\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\r\n    intent_id UUID REFERENCES public.payment_intents(id) ON DELETE SET NULL,\r\n    order_id UUID REFERENCES public.orders(id) ON DELETE SET NULL,\r\n    operation TEXT CHECK (operation IN ('init_3d', 'finalize', 'void', 'refund', 'capture', 'inquiry')),\r\n    request_payload JSONB,\r\n    response_payload JSONB,\r\n    success BOOLEAN DEFAULT false,\r\n    error_code TEXT,\r\n    error_message TEXT,\r\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT now()\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.payment_transactions ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42P07","Message":"relation \"payment_intents\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"parse_utilcmd.c","Line":207,"Routine":"transformCreateStmt","UnknownFields":null}
NOTICE (42P07): relation "payment_intents" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 5. payment_webhook_events\r\nCREATE TABLE IF NOT EXISTS public.payment_webhook_events (\r\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\r\n    provider TEXT DEFAULT 'bakiyem',\r\n    intent_id UUID REFERENCES public.payment_intents(id),\r\n    gateway_trx_code TEXT,\r\n    other_trx_code TEXT,\r\n    result_code TEXT,\r\n    payload_hash TEXT NOT NULL,\r\n    event_dedupe_key TEXT UNIQUE NOT NULL,\r\n    payload JSONB NOT NULL,\r\n    processing_status TEXT DEFAULT 'received' CHECK (processing_status IN ('received', 'ignored', 'processed', 'failed')),\r\n    processed_at TIMESTAMP WITH TIME ZONE,\r\n    error_message TEXT,\r\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT now()\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42P07","Message":"relation \"payment_transactions\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"parse_utilcmd.c","Line":207,"Routine":"transformCreateStmt","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
NOTICE (42P07): relation "payment_transactions" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.payment_webhook_events ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 6. payment_manual_review_queue\r\nCREATE TABLE IF NOT EXISTS public.payment_manual_review_queue (\r\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\r\n    intent_id UUID REFERENCES public.payment_intents(id),\r\n    order_id UUID REFERENCES public.orders(id),\r\n    reason TEXT NOT NULL,\r\n    details JSONB DEFAULT '{}'::jsonb,\r\n    status TEXT DEFAULT 'open' CHECK (status IN ('open', 'in_progress', 'resolved', 'dismissed')),\r\n    dedupe_key TEXT UNIQUE,\r\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT now(),\r\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT now()\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.payment_manual_review_queue ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42P07","Message":"relation \"payment_webhook_events\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"parse_utilcmd.c","Line":207,"Routine":"transformCreateStmt","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
NOTICE (42P07): relation "payment_webhook_events" already exists, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42P07","Message":"relation \"payment_manual_review_queue\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"parse_utilcmd.c","Line":207,"Routine":"transformCreateStmt","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 7. stock_reservations\r\nCREATE TABLE IF NOT EXISTS public.stock_reservations (\r\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\r\n    intent_id UUID REFERENCES public.payment_intents(id),\r\n    product_id UUID REFERENCES public.products(id) ON DELETE CASCADE,\r\n    qty INTEGER NOT NULL CHECK (qty \u003e 0),\r\n    expires_at TIMESTAMP WITH TIME ZONE NOT NULL,\r\n    released_at TIMESTAMP WITH TIME ZONE,\r\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT now()\r\n)","ParameterOIDs":null}
NOTICE (42P07): relation "payment_manual_review_queue" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.stock_reservations ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 8. installment_rates\r\nCREATE TABLE IF NOT EXISTS public.installment_rates (\r\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\r\n    installment_number INTEGER UNIQUE NOT NULL CHECK (installment_number BETWEEN 1 AND 12),\r\n    commission_rate NUMERIC NOT NULL CHECK (commission_rate \u003e= 0),\r\n    is_active BOOLEAN DEFAULT true,\r\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT now(),\r\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT now()\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42P07","Message":"relation \"stock_reservations\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"parse_utilcmd.c","Line":207,"Routine":"transformCreateStmt","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
NOTICE (42P07): relation "stock_reservations" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.installment_rates ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 9. integration_rate_limits\r\nCREATE TABLE IF NOT EXISTS public.integration_rate_limits (\r\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\r\n    integration_name TEXT NOT NULL,\r\n    action TEXT NOT NULL,\r\n    actor_id UUID,\r\n    actor_email TEXT,\r\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT now()\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.integration_rate_limits ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42P07","Message":"relation \"installment_rates\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"parse_utilcmd.c","Line":207,"Routine":"transformCreateStmt","UnknownFields":null}
NOTICE (42P07): relation "installment_rates" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 10. promo_code_attempts\r\nCREATE TABLE IF NOT EXISTS public.promo_code_attempts (\r\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\r\n    user_id UUID REFERENCES auth.users(id),\r\n    ip_address TEXT,\r\n    attempt_timestamp TIMESTAMP WITH TIME ZONE DEFAULT now()\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42P07","Message":"relation \"integration_rate_limits\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"parse_utilcmd.c","Line":207,"Routine":"transformCreateStmt","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
NOTICE (42P07): relation "integration_rate_limits" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.promo_code_attempts ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 11. email_variable_registry\r\nCREATE TABLE IF NOT EXISTS public.email_variable_registry (\r\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\r\n    key TEXT UNIQUE NOT NULL,\r\n    description TEXT,\r\n    category TEXT DEFAULT 'general'::text,\r\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT now(),\r\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT now(),\r\n    label TEXT,\r\n    value_type TEXT DEFAULT 'string'::text,\r\n    render_policy TEXT DEFAULT 'escaped_text'::text,\r\n    is_sensitive BOOLEAN DEFAULT false,\r\n    is_active BOOLEAN DEFAULT true,\r\n    sample_value TEXT\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_variable_registry ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42P07","Message":"relation \"promo_code_attempts\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"parse_utilcmd.c","Line":207,"Routine":"transformCreateStmt","UnknownFields":null}
NOTICE (42P07): relation "promo_code_attempts" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 12. email_template_variables\r\nCREATE TABLE IF NOT EXISTS public.email_template_variables (\r\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\r\n    template_slug TEXT NOT NULL REFERENCES public.email_templates(slug) ON DELETE CASCADE,\r\n    variable_key TEXT NOT NULL REFERENCES public.email_variable_registry(key),\r\n    is_required BOOLEAN DEFAULT true,\r\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT now(),\r\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT now(),\r\n    insertion_order INTEGER DEFAULT 0,\r\n    is_enabled BOOLEAN DEFAULT true,\r\n    source_token TEXT\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42P07","Message":"relation \"email_variable_registry\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"parse_utilcmd.c","Line":207,"Routine":"transformCreateStmt","UnknownFields":null}
NOTICE (42P07): relation "email_variable_registry" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_template_variables ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DO $$\r\nBEGIN\r\n    IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname = 'email_template_variables_unique') THEN\r\n        ALTER TABLE public.email_template_variables ADD CONSTRAINT email_template_variables_unique UNIQUE (template_slug, variable_key);\r\n    END IF;\r\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42P07","Message":"relation \"email_template_variables\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"parse_utilcmd.c","Line":207,"Routine":"transformCreateStmt","UnknownFields":null}
NOTICE (42P07): relation "email_template_variables" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 12a. Critical Functions Baseline (Missing in some repos but present in remote)\r\nCREATE OR REPLACE FUNCTION public.is_admin_user()\r\n RETURNS boolean\r\n LANGUAGE plpgsql\r\n SECURITY DEFINER\r\n SET search_path TO 'public', 'pg_catalog'\r\nAS $function$\r\nBEGIN\r\n    RETURN EXISTS (\r\n        SELECT 1 FROM public.profiles \r\n        WHERE id = (SELECT auth.uid()) AND (is_admin = true OR is_superadmin = true)\r\n    );\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.is_admin_user(user_id uuid)\r\n RETURNS boolean\r\n LANGUAGE plpgsql\r\n STABLE SECURITY DEFINER\r\n SET search_path TO 'public'\r\nAS $function$\r\nDECLARE\r\n  admin_status boolean;\r\nBEGIN\r\n  SELECT is_admin INTO admin_status\r\n  FROM public.profiles\r\n  WHERE id = user_id\r\n  LIMIT 1;\r\n  RETURN COALESCE(admin_status, false);\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 13. site_settings (Baseline as seen in production if not already created)\r\n-- Note: site_settings is usually created in 20260210121836, but let's ensure it has all columns correctly.\r\n-- We use DO blocks to avoid errors if partially created.\r\nDO $$ \r\nBEGIN\r\n    IF NOT EXISTS (SELECT 1 FROM pg_tables WHERE schemaname = 'public' AND tablename = 'site_settings') THEN\r\n        CREATE TABLE public.site_settings (\r\n            id INTEGER PRIMARY KEY DEFAULT 1 CHECK (id = 1),\r\n            vat_rate NUMERIC DEFAULT 0.20,\r\n            shipping_cost NUMERIC DEFAULT 49.90,\r\n            free_shipping_threshold NUMERIC DEFAULT 1500.00,\r\n            updated_at TIMESTAMP WITH TIME ZONE DEFAULT now(),\r\n            bank_name TEXT DEFAULT 'Ziraat Bankas',\r\n            bank_iban TEXT DEFAULT 'TR00 0000 0000 0000 0000 0000 00',\r\n            bank_account_holder TEXT DEFAULT 'Bravita Salk A..'\r\n        );\r\n        INSERT INTO public.site_settings (id) VALUES (1) ON CONFLICT DO NOTHING;\r\n    END IF;\r\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260215170000"},{"text":"baseline_missing_tables"},{"binary":"0000000100000000000000190000001d00000001000002042d2d20426173656c696e65206d6967726174696f6e20666f72207461626c657320666f756e6420696e2070726f64756374696f6e20627574206d697373696e672066726f6d207265706f7369746f727920686973746f72790d0a2d2d205468697320656e7375726573207468617420746865206c6f63616c20646576656c6f706d656e7420656e7669726f6e6d656e7420616e642043492f43442063616e2072656372656174652074686520657861637420736368656d612e0d0a0d0a2d2d20312e2061646d696e5f61756469745f6c6f670d0a435245415445205441424c45204946204e4f5420455849535453207075626c69632e61646d696e5f61756469745f6c6f6720280d0a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0d0a2020202061646d696e5f757365725f69642055554944205245464552454e43455320617574682e7573657273286964292c0d0a20202020616374696f6e2054455854204e4f54204e554c4c2c0d0a202020207461726765745f7461626c6520544558542c0d0a202020207461726765745f696420555549442c0d0a2020202064657461696c73204a534f4e422c0d0a20202020637265617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c54206e6f7728290d0a2900000054434f4d4d454e54204f4e205441424c45207075626c69632e61646d696e5f61756469745f6c6f67204953202741646d696e2069c59f6c656d206c6f676c6172c4b1202d204744505220636f6d706c69616e6365270000003c414c544552205441424c45207075626c69632e61646d696e5f61756469745f6c6f6720454e41424c4520524f57204c4556454c205345435552495459000003442d2d20322e20656d61696c5f6c6f67730d0a435245415445205441424c45204946204e4f5420455849535453207075626c69632e656d61696c5f6c6f677320280d0a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0d0a202020206f726465725f69642055554944205245464552454e434553207075626c69632e6f726465727328696429204f4e2044454c45544520534554204e554c4c2c0d0a20202020656d61696c5f747970652054455854204e4f54204e554c4c2c0d0a2020202073656e745f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c54206e6f7728292c0d0a20202020726563697069656e7420544558542c0d0a2020202074656d706c6174655f736c756720544558542c0d0a202020207375626a65637420544558542c0d0a20202020636f6e74656e745f736e617073686f7420544558542c0d0a202020206572726f725f64657461696c7320544558542c0d0a202020206d65746164617461204a534f4e422044454641554c5420277b7d273a3a6a736f6e622c0d0a20202020726563697069656e745f656d61696c20544558542c0d0a2020202072656e6465725f7761726e696e6773204a534f4e42204e4f54204e554c4c2044454641554c5420275b5d273a3a6a736f6e622c0d0a20202020756e7265736f6c7665645f746f6b656e73204a534f4e42204e4f54204e554c4c2044454641554c5420275b5d273a3a6a736f6e622c0d0a20202020626c6f636b656420424f4f4c45414e204e4f54204e554c4c2044454641554c542066616c73652c0d0a202020206465677261646174696f6e5f61637469766520424f4f4c45414e204e4f54204e554c4c2044454641554c542066616c73652c0d0a202020206465677261646174696f6e5f726561736f6e20544558542c0d0a202020206d6f6465205445585420434845434b20286d6f6465204953204e554c4c204f52206d6f646520494e20282773656e64273a3a746578742c202774657374273a3a746578742c202762726f777365725f70726576696577273a3a7465787429292c0d0a2020202074656d706c6174655f76657273696f6e20494e54454745520d0a2900000037414c544552205441424c45207075626c69632e656d61696c5f6c6f677320454e41424c4520524f57204c4556454c205345435552495459000007052d2d20332e207061796d656e745f696e74656e74730d0a435245415445205441424c45204946204e4f5420455849535453207075626c69632e7061796d656e745f696e74656e747320280d0a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0d0a20202020757365725f69642055554944204e4f54204e554c4c205245464552454e43455320617574682e7573657273286964292c0d0a202020207368697070696e675f616464726573735f69642055554944205245464552454e434553207075626c69632e616464726573736573286964292c0d0a202020207061796d656e745f6d6574686f6420544558542044454641554c5420276372656469745f636172642720434845434b20287061796d656e745f6d6574686f6420494e2028276372656469745f63617264272c202762616e6b5f7472616e736665722729292c0d0a2020202073746174757320544558542044454641554c54202770656e64696e672720434845434b202873746174757320494e20282770656e64696e67272c20276177616974696e675f3364272c202770616964272c20276661696c6564272c2027766f69645f70656e64696e67272c2027766f69646564272c202765787069726564272c2027726566756e645f70656e64696e67272c2027726566756e6465642729292c0d0a202020206964656d706f74656e63795f6b6579205445585420554e495155452c0d0a202020206964656d706f74656e63795f657870697265735f61742054494d455354414d5020574954482054494d45205a4f4e452c0d0a2020202063757272656e637920544558542044454641554c542027544c272c0d0a202020206974656d5f746f74616c5f63656e747320424947494e5420434845434b20286974656d5f746f74616c5f63656e7473203e3d2030292c0d0a202020207661745f746f74616c5f63656e747320424947494e5420434845434b20287661745f746f74616c5f63656e7473203e3d2030292c0d0a202020207368697070696e675f746f74616c5f63656e747320424947494e5420434845434b20287368697070696e675f746f74616c5f63656e7473203e3d2030292c0d0a20202020646973636f756e745f746f74616c5f63656e747320424947494e542044454641554c54203020434845434b2028646973636f756e745f746f74616c5f63656e7473203e3d2030292c0d0a20202020626173655f746f74616c5f63656e747320424947494e5420434845434b2028626173655f746f74616c5f63656e7473203e3d2030292c0d0a20202020636f6d6d697373696f6e5f72617465204e554d455249432044454641554c54203020434845434b2028636f6d6d697373696f6e5f72617465203e3d2030292c0d0a20202020636f6d6d697373696f6e5f616d6f756e745f63656e747320424947494e542044454641554c54203020434845434b2028636f6d6d697373696f6e5f616d6f756e745f63656e7473203e3d2030292c0d0a20202020706169645f746f74616c5f63656e747320424947494e5420434845434b2028706169645f746f74616c5f63656e7473203e3d2030292c0d0a20202020696e7374616c6c6d656e745f6e756d62657220494e54454745522044454641554c54203120434845434b2028696e7374616c6c6d656e745f6e756d626572204245545745454e203120414e44203132292c0d0a20202020636172745f736e617073686f74204a534f4e422c0d0a2020202070726963696e675f736e617073686f74204a534f4e422c0d0a2020202070726f766964657220544558542044454641554c54202762616b6979656d272c0d0a202020206d65726368616e745f72656620544558542c0d0a20202020676174657761795f7472785f636f646520544558542c0d0a20202020676174657761795f73746174757320544558542c0d0a2020202072657475726e5f75726c20544558542c0d0a202020206661696c5f75726c20544558542c0d0a202020207468726565645f73657373696f6e5f72656620544558542c0d0a202020207468726565645f7061796c6f61645f656e6372797074656420544558542c0d0a20202020656e6372797074696f6e5f6b65795f76657273696f6e20544558542c0d0a20202020657870697265735f61742054494d455354414d5020574954482054494d45205a4f4e45204e4f54204e554c4c2044454641554c5420286e6f772829202b20696e74657276616c20273135206d696e7574657327292c0d0a20202020637265617465645f61742054494d455354414d5020574954482054494d45205a4f4e45204e4f54204e554c4c2044454641554c54206e6f7728292c0d0a20202020757064617465645f61742054494d455354414d5020574954482054494d45205a4f4e45204e4f54204e554c4c2044454641554c54206e6f7728290d0a290000003c414c544552205441424c45207075626c69632e7061796d656e745f696e74656e747320454e41424c4520524f57204c4556454c2053454355524954590000024a2d2d20342e207061796d656e745f7472616e73616374696f6e730d0a435245415445205441424c45204946204e4f5420455849535453207075626c69632e7061796d656e745f7472616e73616374696f6e7320280d0a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0d0a20202020696e74656e745f69642055554944205245464552454e434553207075626c69632e7061796d656e745f696e74656e747328696429204f4e2044454c45544520534554204e554c4c2c0d0a202020206f726465725f69642055554944205245464552454e434553207075626c69632e6f726465727328696429204f4e2044454c45544520534554204e554c4c2c0d0a202020206f7065726174696f6e205445585420434845434b20286f7065726174696f6e20494e202827696e69745f3364272c202766696e616c697a65272c2027766f6964272c2027726566756e64272c202763617074757265272c2027696e71756972792729292c0d0a20202020726571756573745f7061796c6f6164204a534f4e422c0d0a20202020726573706f6e73655f7061796c6f6164204a534f4e422c0d0a202020207375636365737320424f4f4c45414e2044454641554c542066616c73652c0d0a202020206572726f725f636f646520544558542c0d0a202020206572726f725f6d65737361676520544558542c0d0a20202020637265617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c54206e6f7728290d0a2900000041414c544552205441424c45207075626c69632e7061796d656e745f7472616e73616374696f6e7320454e41424c4520524f57204c4556454c2053454355524954590000029f2d2d20352e207061796d656e745f776562686f6f6b5f6576656e74730d0a435245415445205441424c45204946204e4f5420455849535453207075626c69632e7061796d656e745f776562686f6f6b5f6576656e747320280d0a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0d0a2020202070726f766964657220544558542044454641554c54202762616b6979656d272c0d0a20202020696e74656e745f69642055554944205245464552454e434553207075626c69632e7061796d656e745f696e74656e7473286964292c0d0a20202020676174657761795f7472785f636f646520544558542c0d0a202020206f746865725f7472785f636f646520544558542c0d0a20202020726573756c745f636f646520544558542c0d0a202020207061796c6f61645f686173682054455854204e4f54204e554c4c2c0d0a202020206576656e745f6465647570655f6b6579205445585420554e49515545204e4f54204e554c4c2c0d0a202020207061796c6f6164204a534f4e42204e4f54204e554c4c2c0d0a2020202070726f63657373696e675f73746174757320544558542044454641554c54202772656365697665642720434845434b202870726f63657373696e675f73746174757320494e2028277265636569766564272c202769676e6f726564272c202770726f636573736564272c20276661696c65642729292c0d0a2020202070726f6365737365645f61742054494d455354414d5020574954482054494d45205a4f4e452c0d0a202020206572726f725f6d65737361676520544558542c0d0a20202020637265617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c54206e6f7728290d0a2900000043414c544552205441424c45207075626c69632e7061796d656e745f776562686f6f6b5f6576656e747320454e41424c4520524f57204c4556454c205345435552495459000002382d2d20362e207061796d656e745f6d616e75616c5f7265766965775f71756575650d0a435245415445205441424c45204946204e4f5420455849535453207075626c69632e7061796d656e745f6d616e75616c5f7265766965775f717565756520280d0a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0d0a20202020696e74656e745f69642055554944205245464552454e434553207075626c69632e7061796d656e745f696e74656e7473286964292c0d0a202020206f726465725f69642055554944205245464552454e434553207075626c69632e6f7264657273286964292c0d0a20202020726561736f6e2054455854204e4f54204e554c4c2c0d0a2020202064657461696c73204a534f4e422044454641554c5420277b7d273a3a6a736f6e622c0d0a2020202073746174757320544558542044454641554c5420276f70656e2720434845434b202873746174757320494e2028276f70656e272c2027696e5f70726f6772657373272c20277265736f6c766564272c20276469736d69737365642729292c0d0a202020206465647570655f6b6579205445585420554e495155452c0d0a20202020637265617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c54206e6f7728292c0d0a20202020757064617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c54206e6f7728290d0a2900000048414c544552205441424c45207075626c69632e7061796d656e745f6d616e75616c5f7265766965775f717565756520454e41424c4520524f57204c4556454c205345435552495459000001c92d2d20372e2073746f636b5f7265736572766174696f6e730d0a435245415445205441424c45204946204e4f5420455849535453207075626c69632e73746f636b5f7265736572766174696f6e7320280d0a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0d0a20202020696e74656e745f69642055554944205245464552454e434553207075626c69632e7061796d656e745f696e74656e7473286964292c0d0a2020202070726f647563745f69642055554944205245464552454e434553207075626c69632e70726f647563747328696429204f4e2044454c45544520434153434144452c0d0a2020202071747920494e5445474552204e4f54204e554c4c20434845434b2028717479203e2030292c0d0a20202020657870697265735f61742054494d455354414d5020574954482054494d45205a4f4e45204e4f54204e554c4c2c0d0a2020202072656c65617365645f61742054494d455354414d5020574954482054494d45205a4f4e452c0d0a20202020637265617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c54206e6f7728290d0a290000003f414c544552205441424c45207075626c69632e73746f636b5f7265736572766174696f6e7320454e41424c4520524f57204c4556454c205345435552495459000001ba2d2d20382e20696e7374616c6c6d656e745f72617465730d0a435245415445205441424c45204946204e4f5420455849535453207075626c69632e696e7374616c6c6d656e745f726174657320280d0a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0d0a20202020696e7374616c6c6d656e745f6e756d62657220494e544547455220554e49515545204e4f54204e554c4c20434845434b2028696e7374616c6c6d656e745f6e756d626572204245545745454e203120414e44203132292c0d0a20202020636f6d6d697373696f6e5f72617465204e554d45524943204e4f54204e554c4c20434845434b2028636f6d6d697373696f6e5f72617465203e3d2030292c0d0a2020202069735f61637469766520424f4f4c45414e2044454641554c5420747275652c0d0a20202020637265617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c54206e6f7728292c0d0a20202020757064617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c54206e6f7728290d0a290000003e414c544552205441424c45207075626c69632e696e7374616c6c6d656e745f726174657320454e41424c4520524f57204c4556454c205345435552495459000001332d2d20392e20696e746567726174696f6e5f726174655f6c696d6974730d0a435245415445205441424c45204946204e4f5420455849535453207075626c69632e696e746567726174696f6e5f726174655f6c696d69747320280d0a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0d0a20202020696e746567726174696f6e5f6e616d652054455854204e4f54204e554c4c2c0d0a20202020616374696f6e2054455854204e4f54204e554c4c2c0d0a202020206163746f725f696420555549442c0d0a202020206163746f725f656d61696c20544558542c0d0a20202020637265617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c54206e6f7728290d0a2900000044414c544552205441424c45207075626c69632e696e746567726174696f6e5f726174655f6c696d69747320454e41424c4520524f57204c4556454c2053454355524954590000010b2d2d2031302e2070726f6d6f5f636f64655f617474656d7074730d0a435245415445205441424c45204946204e4f5420455849535453207075626c69632e70726f6d6f5f636f64655f617474656d70747320280d0a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0d0a20202020757365725f69642055554944205245464552454e43455320617574682e7573657273286964292c0d0a2020202069705f6164647265737320544558542c0d0a20202020617474656d70745f74696d657374616d702054494d455354414d5020574954482054494d45205a4f4e452044454641554c54206e6f7728290d0a2900000040414c544552205441424c45207075626c69632e70726f6d6f5f636f64655f617474656d70747320454e41424c4520524f57204c4556454c2053454355524954590000023d2d2d2031312e20656d61696c5f7661726961626c655f72656769737472790d0a435245415445205441424c45204946204e4f5420455849535453207075626c69632e656d61696c5f7661726961626c655f726567697374727920280d0a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0d0a202020206b6579205445585420554e49515545204e4f54204e554c4c2c0d0a202020206465736372697074696f6e20544558542c0d0a2020202063617465676f727920544558542044454641554c54202767656e6572616c273a3a746578742c0d0a20202020637265617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c54206e6f7728292c0d0a20202020757064617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c54206e6f7728292c0d0a202020206c6162656c20544558542c0d0a2020202076616c75655f7479706520544558542044454641554c542027737472696e67273a3a746578742c0d0a2020202072656e6465725f706f6c69637920544558542044454641554c542027657363617065645f74657874273a3a746578742c0d0a2020202069735f73656e73697469766520424f4f4c45414e2044454641554c542066616c73652c0d0a2020202069735f61637469766520424f4f4c45414e2044454641554c5420747275652c0d0a2020202073616d706c655f76616c756520544558540d0a2900000044414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f726567697374727920454e41424c4520524f57204c4556454c2053454355524954590000023c2d2d2031322e20656d61696c5f74656d706c6174655f7661726961626c65730d0a435245415445205441424c45204946204e4f5420455849535453207075626c69632e656d61696c5f74656d706c6174655f7661726961626c657320280d0a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0d0a2020202074656d706c6174655f736c75672054455854204e4f54204e554c4c205245464552454e434553207075626c69632e656d61696c5f74656d706c6174657328736c756729204f4e2044454c45544520434153434144452c0d0a202020207661726961626c655f6b65792054455854204e4f54204e554c4c205245464552454e434553207075626c69632e656d61696c5f7661726961626c655f7265676973747279286b6579292c0d0a2020202069735f726571756972656420424f4f4c45414e2044454641554c5420747275652c0d0a20202020637265617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c54206e6f7728292c0d0a20202020757064617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c54206e6f7728292c0d0a20202020696e73657274696f6e5f6f7264657220494e54454745522044454641554c5420302c0d0a2020202069735f656e61626c656420424f4f4c45414e2044454641554c5420747275652c0d0a20202020736f757263655f746f6b656e20544558540d0a2900000045414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174655f7661726961626c657320454e41424c4520524f57204c4556454c20534543555249545900000113444f2024240d0a424547494e0d0a202020204946204e4f5420455849535453202853454c45435420312046524f4d2070675f636f6e73747261696e7420574845524520636f6e6e616d65203d2027656d61696c5f74656d706c6174655f7661726961626c65735f756e697175652729205448454e0d0a2020202020202020414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174655f7661726961626c65732041444420434f4e53545241494e5420656d61696c5f74656d706c6174655f7661726961626c65735f756e6971756520554e49515545202874656d706c6174655f736c75672c207661726961626c655f6b6579293b0d0a20202020454e442049463b0d0a454e44202424000001ab2d2d203132612e20437269746963616c2046756e6374696f6e7320426173656c696e6520284d697373696e6720696e20736f6d65207265706f73206275742070726573656e7420696e2072656d6f7465290d0a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e69735f61646d696e5f7573657228290d0a2052455455524e5320626f6f6c65616e0d0a204c414e475541474520706c706773716c0d0a20534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f20277075626c6963272c202770675f636174616c6f67270d0a4153202466756e6374696f6e240d0a424547494e0d0a2020202052455455524e2045584953545320280d0a202020202020202053454c45435420312046524f4d207075626c69632e70726f66696c6573200d0a20202020202020205748455245206964203d202853454c45435420617574682e75696428292920414e44202869735f61646d696e203d2074727565204f522069735f737570657261646d696e203d2074727565290d0a20202020293b0d0a454e443b0d0a2466756e6374696f6e240000016c435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e69735f61646d696e5f7573657228757365725f69642075756964290d0a2052455455524e5320626f6f6c65616e0d0a204c414e475541474520706c706773716c0d0a20535441424c4520534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f20277075626c6963270d0a4153202466756e6374696f6e240d0a4445434c4152450d0a202061646d696e5f73746174757320626f6f6c65616e3b0d0a424547494e0d0a202053454c4543542069735f61646d696e20494e544f2061646d696e5f7374617475730d0a202046524f4d207075626c69632e70726f66696c65730d0a20205748455245206964203d20757365725f69640d0a20204c494d495420313b0d0a202052455455524e20434f414c455343452861646d696e5f7374617475732c2066616c7365293b0d0a454e443b0d0a2466756e6374696f6e24000003f12d2d2031332e20736974655f73657474696e67732028426173656c696e65206173207365656e20696e2070726f64756374696f6e206966206e6f7420616c72656164792063726561746564290d0a2d2d204e6f74653a20736974655f73657474696e677320697320757375616c6c79206372656174656420696e2032303236303231303132313833362c20627574206c6574277320656e737572652069742068617320616c6c20636f6c756d6e7320636f72726563746c792e0d0a2d2d2057652075736520444f20626c6f636b7320746f2061766f6964206572726f7273206966207061727469616c6c7920637265617465642e0d0a444f202424200d0a424547494e0d0a202020204946204e4f5420455849535453202853454c45435420312046524f4d2070675f7461626c657320574845524520736368656d616e616d65203d20277075626c69632720414e44207461626c656e616d65203d2027736974655f73657474696e67732729205448454e0d0a2020202020202020435245415445205441424c45207075626c69632e736974655f73657474696e677320280d0a202020202020202020202020696420494e5445474552205052494d415259204b45592044454641554c54203120434845434b20286964203d2031292c0d0a2020202020202020202020207661745f72617465204e554d455249432044454641554c5420302e32302c0d0a2020202020202020202020207368697070696e675f636f7374204e554d455249432044454641554c542034392e39302c0d0a202020202020202020202020667265655f7368697070696e675f7468726573686f6c64204e554d455249432044454641554c5420313530302e30302c0d0a202020202020202020202020757064617465645f61742054494d455354414d5020574954482054494d45205a4f4e452044454641554c54206e6f7728292c0d0a20202020202020202020202062616e6b5f6e616d6520544558542044454641554c5420275a69726161742042616e6b6173c4b1272c0d0a20202020202020202020202062616e6b5f6962616e20544558542044454641554c5420275452303020303030302030303030203030303020303030302030303030203030272c0d0a20202020202020202020202062616e6b5f6163636f756e745f686f6c64657220544558542044454641554c54202742726176697461205361c49f6cc4b16b20412ec59e2e270d0a2020202020202020293b0d0a2020202020202020494e5345525420494e544f207075626c69632e736974655f73657474696e677320286964292056414c55455320283129204f4e20434f4e464c49435420444f204e4f5448494e473b0d0a20202020454e442049463b0d0a454e44202424"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260215182546_fix_drift_manual_sync.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Fix database drift manually detected\r\n-- Drops obsoleted functions and ensures site_settings columns match remote schema\r\n\r\n-- 1. Drop obsoleted functions that were causing confusion\r\nDROP FUNCTION IF EXISTS public.is_admin CASCADE","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP FUNCTION IF EXISTS public.set_updated_at CASCADE","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Ensure site_settings has all observed columns (vat_rate, shipping_cost, etc.)\r\n-- These were found in the remote DB but missing from known migrations\r\nALTER TABLE public.site_settings \r\nADD COLUMN IF NOT EXISTS vat_rate NUMERIC DEFAULT 0.20,\r\nADD COLUMN IF NOT EXISTS shipping_cost NUMERIC DEFAULT 49.90,\r\nADD COLUMN IF NOT EXISTS free_shipping_threshold NUMERIC DEFAULT 1500.00","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMENT ON COLUMN public.site_settings.vat_rate IS 'Default VAT rate percentage (0.20 = 20%)'","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"function public.is_admin() does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"function public.set_updated_at() does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMENT ON COLUMN public.site_settings.shipping_cost IS 'Standard shipping cost'","ParameterOIDs":null}
NOTICE (00000): function public.is_admin() does not exist, skipping
NOTICE (00000): function public.set_updated_at() does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMENT ON COLUMN public.site_settings.free_shipping_threshold IS 'Minimum cart total for free shipping'","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. Fix support_tickets category check constraint drift\r\n-- Remote DB was missing 'general' in the allowed values\r\nALTER TABLE public.support_tickets \r\nDROP CONSTRAINT IF EXISTS support_tickets_category_check","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.support_tickets \r\nADD CONSTRAINT support_tickets_category_check \r\nCHECK (category IN ('order_issue', 'product_info', 'delivery', 'other', 'general'))","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260215182546"},{"text":"fix_drift_manual_sync"},{"binary":"0000000100000000000000190000000800000001000000ea2d2d20466978206461746162617365206472696674206d616e75616c6c792064657465637465640d0a2d2d2044726f7073206f62736f6c657465642066756e6374696f6e7320616e6420656e737572657320736974655f73657474696e677320636f6c756d6e73206d617463682072656d6f746520736368656d610d0a0d0a2d2d20312e2044726f70206f62736f6c657465642066756e6374696f6e73207468617420776572652063617573696e6720636f6e667573696f6e0d0a44524f502046554e4354494f4e20494620455849535453207075626c69632e69735f61646d696e20434153434144450000003544524f502046554e4354494f4e20494620455849535453207075626c69632e7365745f757064617465645f61742043415343414445000001802d2d20322e20456e7375726520736974655f73657474696e67732068617320616c6c206f6273657276656420636f6c756d6e7320287661745f726174652c207368697070696e675f636f73742c206574632e290d0a2d2d205468657365207765726520666f756e6420696e207468652072656d6f746520444220627574206d697373696e672066726f6d206b6e6f776e206d6967726174696f6e730d0a414c544552205441424c45207075626c69632e736974655f73657474696e6773200d0a41444420434f4c554d4e204946204e4f5420455849535453207661745f72617465204e554d455249432044454641554c5420302e32302c0d0a41444420434f4c554d4e204946204e4f5420455849535453207368697070696e675f636f7374204e554d455249432044454641554c542034392e39302c0d0a41444420434f4c554d4e204946204e4f542045584953545320667265655f7368697070696e675f7468726573686f6c64204e554d455249432044454641554c5420313530302e30300000005d434f4d4d454e54204f4e20434f4c554d4e207075626c69632e736974655f73657474696e67732e7661745f72617465204953202744656661756c742056415420726174652070657263656e746167652028302e3230203d20323025292700000050434f4d4d454e54204f4e20434f4c554d4e207075626c69632e736974655f73657474696e67732e7368697070696e675f636f737420495320275374616e64617264207368697070696e6720636f73742700000068434f4d4d454e54204f4e20434f4c554d4e207075626c69632e736974655f73657474696e67732e667265655f7368697070696e675f7468726573686f6c6420495320274d696e696d756d206361727420746f74616c20666f722066726565207368697070696e6727000000d22d2d20332e2046697820737570706f72745f7469636b6574732063617465676f727920636865636b20636f6e73747261696e742064726966740d0a2d2d2052656d6f746520444220776173206d697373696e67202767656e6572616c2720696e2074686520616c6c6f7765642076616c7565730d0a414c544552205441424c45207075626c69632e737570706f72745f7469636b657473200d0a44524f5020434f4e53545241494e542049462045584953545320737570706f72745f7469636b6574735f63617465676f72795f636865636b000000a8414c544552205441424c45207075626c69632e737570706f72745f7469636b657473200d0a41444420434f4e53545241494e5420737570706f72745f7469636b6574735f63617465676f72795f636865636b200d0a434845434b202863617465676f727920494e2028276f726465725f6973737565272c202770726f647563745f696e666f272c202764656c6976657279272c20276f74686572272c202767656e6572616c272929"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMENT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260215192952_fix_profiles_rls.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Add RLS policies for profiles table to fix access issues\r\n\r\n-- Drop existing policies if they conflict (though none were found for SELECT/UPDATE except INSERT)\r\nDROP POLICY IF EXISTS \"Users can view own profile\" ON profiles","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users can update own profile\" ON profiles","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can view all profiles\" ON profiles","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 1. Users can view their own profile\r\n-- This is critical for is_admin_user() to work (since it checks the user's own profile)\r\n-- and for the frontend to show profile data.\r\nCREATE POLICY \"Users can view own profile\" \r\nON profiles FOR SELECT \r\nUSING (auth.uid() = id)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users can view own profile\" for relation \"profiles\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Users can update their own profile\r\nCREATE POLICY \"Users can update own profile\" \r\nON profiles FOR UPDATE \r\nUSING (auth.uid() = id)","ParameterOIDs":null}
NOTICE (00000): policy "Users can view own profile" for relation "profiles" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users can update own profile\" for relation \"profiles\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
NOTICE (00000): policy "Users can update own profile" for relation "profiles" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can view all profiles\" for relation \"profiles\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
NOTICE (00000): policy "Admins can view all profiles" for relation "profiles" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. Admins can view all profiles\r\n-- This allows admins to see customer names on the dashboard.\r\n-- Reliance on \"Users can view own profile\" breaks potential recursion for is_admin_user().\r\nCREATE POLICY \"Admins can view all profiles\" \r\nON profiles FOR SELECT \r\nUSING (\r\n  (SELECT is_admin FROM profiles WHERE id = auth.uid()) = true \r\n  OR \r\n  (SELECT is_superadmin FROM profiles WHERE id = auth.uid()) = true\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260215192952"},{"text":"fix_profiles_rls"},{"binary":"0000000100000000000000190000000600000001000000e22d2d2041646420524c5320706f6c696369657320666f722070726f66696c6573207461626c6520746f2066697820616363657373206973737565730d0a0d0a2d2d2044726f70206578697374696e6720706f6c6963696573206966207468657920636f6e666c696374202874686f756768206e6f6e65207765726520666f756e6420666f722053454c4543542f5550444154452065786365707420494e53455254290d0a44524f5020504f4c49435920494620455849535453202255736572732063616e2076696577206f776e2070726f66696c6522204f4e2070726f66696c65730000004044524f5020504f4c49435920494620455849535453202255736572732063616e20757064617465206f776e2070726f66696c6522204f4e2070726f66696c65730000004044524f5020504f4c49435920494620455849535453202241646d696e732063616e207669657720616c6c2070726f66696c657322204f4e2070726f66696c65730000010e2d2d20312e2055736572732063616e2076696577207468656972206f776e2070726f66696c650d0a2d2d205468697320697320637269746963616c20666f722069735f61646d696e5f75736572282920746f20776f726b202873696e636520697420636865636b732074686520757365722773206f776e2070726f66696c65290d0a2d2d20616e6420666f72207468652066726f6e74656e6420746f2073686f772070726f66696c6520646174612e0d0a43524541544520504f4c494359202255736572732063616e2076696577206f776e2070726f66696c6522200d0a4f4e2070726f66696c657320464f522053454c454354200d0a5553494e472028617574682e7569642829203d20696429000000892d2d20322e2055736572732063616e20757064617465207468656972206f776e2070726f66696c650d0a43524541544520504f4c494359202255736572732063616e20757064617465206f776e2070726f66696c6522200d0a4f4e2070726f66696c657320464f5220555044415445200d0a5553494e472028617574682e7569642829203d206964290000019f2d2d20332e2041646d696e732063616e207669657720616c6c2070726f66696c65730d0a2d2d205468697320616c6c6f77732061646d696e7320746f2073656520637573746f6d6572206e616d6573206f6e207468652064617368626f6172642e0d0a2d2d2052656c69616e6365206f6e202255736572732063616e2076696577206f776e2070726f66696c652220627265616b7320706f74656e7469616c20726563757273696f6e20666f722069735f61646d696e5f7573657228292e0d0a43524541544520504f4c494359202241646d696e732063616e207669657720616c6c2070726f66696c657322200d0a4f4e2070726f66696c657320464f522053454c454354200d0a5553494e4720280d0a20202853454c4543542069735f61646d696e2046524f4d2070726f66696c6573205748455245206964203d20617574682e756964282929203d2074727565200d0a20204f52200d0a20202853454c4543542069735f737570657261646d696e2046524f4d2070726f66696c6573205748455245206964203d20617574682e756964282929203d20747275650d0a29"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260215193127_optimize_rls_policies.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Optimize RLS policies to fix performance warnings (auth_rls_initplan, multiple_permissive_policies)\r\n\r\n-- =========================================================================\r\n-- 1. PROFILES Optimizations\r\n-- =========================================================================\r\n\r\n-- Consolidate multiple SELECT policies for authenticated users into one.\r\n-- Also wrap auth.uid() in (SELECT auth.uid()) for caching.\r\nDROP POLICY IF EXISTS \"Users can view own profile\" ON profiles","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can view all profiles\" ON profiles","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Authenticated users view profiles\" ON profiles","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Authenticated users view profiles\" \r\nON profiles FOR SELECT \r\nTO authenticated\r\nUSING (\r\n  (SELECT auth.uid()) = id \r\n  OR \r\n  (SELECT is_admin_user())\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Optimize UPDATE policy (auth.uid caching)\r\nDROP POLICY IF EXISTS \"Users can update own profile\" ON profiles","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users can update own profile\" \r\nON profiles FOR UPDATE \r\nTO authenticated\r\nUSING ((SELECT auth.uid()) = id)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- =========================================================================\r\n-- 2. EMAIL TEMPLATE VARIABLES Optimizations\r\n-- =========================================================================\r\n\r\n-- The \"Public read template variables\" policy allows SELECT for everyone authenticated.\r\n-- The \"Admins manage email template variables\" allows ALL for admins.\r\n-- Problem: For SELECT, both run.\r\n-- Fix: Exclude SELECT from the Admin policy, rely on the Public Read policy for SELECT.\r\n-- OR redefine Admin policy to cover only non-SELECT operations? No, policies are per-cmd or ALL.\r\n-- Best approach: Define explicit policies per command for clarity and performance.\r\n\r\nDROP POLICY IF EXISTS \"Admins manage email template variables\" ON email_template_variables","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Public read template variables\" ON email_template_variables","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Authenticated users view profiles\" for relation \"profiles\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Authenticated users view profiles" for relation "profiles" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Authenticated users view template variables\" ON email_template_variables","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Everyone authenticated can read\r\nCREATE POLICY \"Authenticated users view template variables\"\r\nON email_template_variables FOR SELECT\r\nTO authenticated\r\nUSING (true)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Admins can insert/update/delete\r\nDROP POLICY IF EXISTS \"Admins manage template variables\" ON email_template_variables","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins manage template variables\"\r\nON email_template_variables FOR INSERT\r\nTO authenticated\r\nWITH CHECK ((SELECT is_admin_user()))","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins update template variables\" ON email_template_variables","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Authenticated users view template variables\" for relation \"email_template_variables\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
NOTICE (00000): policy "Authenticated users view template variables" for relation "email_template_variables" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins update template variables\"\r\nON email_template_variables FOR UPDATE\r\nTO authenticated\r\nUSING ((SELECT is_admin_user()))","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins manage template variables\" for relation \"email_template_variables\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
NOTICE (00000): policy "Admins manage template variables" for relation "email_template_variables" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins delete template variables\" ON email_template_variables","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins update template variables\" for relation \"email_template_variables\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
NOTICE (00000): policy "Admins update template variables" for relation "email_template_variables" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins delete template variables\"\r\nON email_template_variables FOR DELETE\r\nTO authenticated\r\nUSING ((SELECT is_admin_user()))","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- =========================================================================\r\n-- 3. EMAIL VARIABLE REGISTRY Optimizations (Similar to above)\r\n-- =========================================================================\r\n\r\nDROP POLICY IF EXISTS \"Admins manage email variable registry\" ON email_variable_registry","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins delete template variables\" for relation \"email_template_variables\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Admins delete template variables" for relation "email_template_variables" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Public read variable registry\" ON email_variable_registry","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Authenticated users view variable registry\" ON email_variable_registry","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Everyone authenticated can read\r\nCREATE POLICY \"Authenticated users view variable registry\"\r\nON email_variable_registry FOR SELECT\r\nTO authenticated\r\nUSING (true)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Admins can manage\r\nDROP POLICY IF EXISTS \"Admins insert variable registry\" ON email_variable_registry","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins insert variable registry\"\r\nON email_variable_registry FOR INSERT\r\nTO authenticated\r\nWITH CHECK ((SELECT is_admin_user()))","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Authenticated users view variable registry\" for relation \"email_variable_registry\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
NOTICE (00000): policy "Authenticated users view variable registry" for relation "email_variable_registry" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins insert variable registry\" for relation \"email_variable_registry\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Admins insert variable registry" for relation "email_variable_registry" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins update variable registry\" ON email_variable_registry","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins update variable registry\"\r\nON email_variable_registry FOR UPDATE\r\nTO authenticated\r\nUSING ((SELECT is_admin_user()))","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins delete variable registry\" ON email_variable_registry","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins update variable registry\" for relation \"email_variable_registry\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Admins update variable registry" for relation "email_variable_registry" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins delete variable registry\"\r\nON email_variable_registry FOR DELETE\r\nTO authenticated\r\nUSING ((SELECT is_admin_user()))","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- =========================================================================\r\n-- 4. PAYMENT TRANSACTIONS Optimizations\r\n-- =========================================================================\r\n\r\n-- Existing: \"Admins manage...\" (ALL) vs \"Select payment transactions\" (SELECT, checks admin OR user ownership)\r\n-- Fix: Remove SELECT from \"Admins manage\", let \"Select payment transactions\" handle it (which already includes admin check).\r\n\r\nDROP POLICY IF EXISTS \"Admins manage payment transactions\" ON payment_transactions","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins delete variable registry\" for relation \"email_variable_registry\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Select payment transactions\" ON payment_transactions","ParameterOIDs":null}
NOTICE (00000): policy "Admins delete variable registry" for relation "email_variable_registry" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"View payment transactions\" ON payment_transactions","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Unified SELECT policy (Admins OR Owners)\r\nCREATE POLICY \"View payment transactions\"\r\nON payment_transactions FOR SELECT\r\nTO authenticated\r\nUSING (\r\n  (SELECT is_admin_user())\r\n  OR \r\n  EXISTS (\r\n    SELECT 1 FROM payment_intents\r\n    WHERE payment_intents.id = payment_transactions.intent_id\r\n    AND payment_intents.user_id = (SELECT auth.uid())\r\n  )\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Admin Management (Insert/Update/Delete)\r\nDROP POLICY IF EXISTS \"Admins insert payment transactions\" ON payment_transactions","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins insert payment transactions\"\r\nON payment_transactions FOR INSERT\r\nTO authenticated\r\nWITH CHECK ((SELECT is_admin_user()))","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"View payment transactions\" for relation \"payment_transactions\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins insert payment transactions\" for relation \"payment_transactions\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins update payment transactions\" ON payment_transactions","ParameterOIDs":null}
NOTICE (00000): policy "View payment transactions" for relation "payment_transactions" does not exist, skipping
NOTICE (00000): policy "Admins insert payment transactions" for relation "payment_transactions" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins update payment transactions\"\r\nON payment_transactions FOR UPDATE\r\nTO authenticated\r\nUSING ((SELECT is_admin_user()))","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins delete payment transactions\" ON payment_transactions","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins update payment transactions\" for relation \"payment_transactions\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Admins update payment transactions" for relation "payment_transactions" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins delete payment transactions\"\r\nON payment_transactions FOR DELETE\r\nTO authenticated\r\nUSING ((SELECT is_admin_user()))","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins delete payment transactions\" for relation \"payment_transactions\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260215193127"},{"text":"optimize_rls_policies"},{"binary":"0000000100000000000000190000002400000001000001ec2d2d204f7074696d697a6520524c5320706f6c696369657320746f2066697820706572666f726d616e6365207761726e696e67732028617574685f726c735f696e6974706c616e2c206d756c7469706c655f7065726d6973736976655f706f6c6963696573290d0a0d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20312e2050524f46494c4553204f7074696d697a6174696f6e730d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d20436f6e736f6c6964617465206d756c7469706c652053454c45435420706f6c696369657320666f722061757468656e7469636174656420757365727320696e746f206f6e652e0d0a2d2d20416c736f207772617020617574682e756964282920696e202853454c45435420617574682e75696428292920666f722063616368696e672e0d0a44524f5020504f4c49435920494620455849535453202255736572732063616e2076696577206f776e2070726f66696c6522204f4e2070726f66696c65730000004044524f5020504f4c49435920494620455849535453202241646d696e732063616e207669657720616c6c2070726f66696c657322204f4e2070726f66696c65730000004544524f5020504f4c49435920494620455849535453202241757468656e7469636174656420757365727320766965772070726f66696c657322204f4e2070726f66696c6573000000a943524541544520504f4c494359202241757468656e7469636174656420757365727320766965772070726f66696c657322200d0a4f4e2070726f66696c657320464f522053454c454354200d0a544f2061757468656e746963617465640d0a5553494e4720280d0a20202853454c45435420617574682e756964282929203d206964200d0a20204f52200d0a20202853454c4543542069735f61646d696e5f757365722829290d0a290000006e2d2d204f7074696d697a652055504441544520706f6c6963792028617574682e7569642063616368696e67290d0a44524f5020504f4c49435920494620455849535453202255736572732063616e20757064617465206f776e2070726f66696c6522204f4e2070726f66696c65730000007a43524541544520504f4c494359202255736572732063616e20757064617465206f776e2070726f66696c6522200d0a4f4e2070726f66696c657320464f5220555044415445200d0a544f2061757468656e746963617465640d0a5553494e4720282853454c45435420617574682e756964282929203d20696429000002ff2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20322e20454d41494c2054454d504c415445205641524941424c4553204f7074696d697a6174696f6e730d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d2054686520225075626c696320726561642074656d706c617465207661726961626c65732220706f6c69637920616c6c6f77732053454c45435420666f722065766572796f6e652061757468656e746963617465642e0d0a2d2d20546865202241646d696e73206d616e61676520656d61696c2074656d706c617465207661726961626c65732220616c6c6f777320414c4c20666f722061646d696e732e0d0a2d2d2050726f626c656d3a20466f722053454c4543542c20626f74682072756e2e0d0a2d2d204669783a204578636c7564652053454c4543542066726f6d207468652041646d696e20706f6c6963792c2072656c79206f6e20746865205075626c6963205265616420706f6c69637920666f722053454c4543542e0d0a2d2d204f52207265646566696e652041646d696e20706f6c69637920746f20636f766572206f6e6c79206e6f6e2d53454c454354206f7065726174696f6e733f204e6f2c20706f6c696369657320617265207065722d636d64206f7220414c4c2e0d0a2d2d204265737420617070726f6163683a20446566696e65206578706c6963697420706f6c69636965732070657220636f6d6d616e6420666f7220636c617269747920616e6420706572666f726d616e63652e0d0a0d0a44524f5020504f4c49435920494620455849535453202241646d696e73206d616e61676520656d61696c2074656d706c617465207661726961626c657322204f4e20656d61696c5f74656d706c6174655f7661726961626c65730000005244524f5020504f4c4943592049462045584953545320225075626c696320726561642074656d706c617465207661726961626c657322204f4e20656d61696c5f74656d706c6174655f7661726961626c65730000005f44524f5020504f4c49435920494620455849535453202241757468656e7469636174656420757365727320766965772074656d706c617465207661726961626c657322204f4e20656d61696c5f74656d706c6174655f7661726961626c6573000000a72d2d2045766572796f6e652061757468656e746963617465642063616e20726561640d0a43524541544520504f4c494359202241757468656e7469636174656420757365727320766965772074656d706c617465207661726961626c6573220d0a4f4e20656d61696c5f74656d706c6174655f7661726961626c657320464f522053454c4543540d0a544f2061757468656e746963617465640d0a5553494e4720287472756529000000782d2d2041646d696e732063616e20696e736572742f7570646174652f64656c6574650d0a44524f5020504f4c49435920494620455849535453202241646d696e73206d616e6167652074656d706c617465207661726961626c657322204f4e20656d61696c5f74656d706c6174655f7661726961626c65730000009143524541544520504f4c494359202241646d696e73206d616e6167652074656d706c617465207661726961626c6573220d0a4f4e20656d61696c5f74656d706c6174655f7661726961626c657320464f5220494e534552540d0a544f2061757468656e746963617465640d0a5749544820434845434b20282853454c4543542069735f61646d696e5f75736572282929290000005444524f5020504f4c49435920494620455849535453202241646d696e73207570646174652074656d706c617465207661726961626c657322204f4e20656d61696c5f74656d706c6174655f7661726961626c65730000008c43524541544520504f4c494359202241646d696e73207570646174652074656d706c617465207661726961626c6573220d0a4f4e20656d61696c5f74656d706c6174655f7661726961626c657320464f52205550444154450d0a544f2061757468656e746963617465640d0a5553494e4720282853454c4543542069735f61646d696e5f75736572282929290000005444524f5020504f4c49435920494620455849535453202241646d696e732064656c6574652074656d706c617465207661726961626c657322204f4e20656d61696c5f74656d706c6174655f7661726961626c65730000008c43524541544520504f4c494359202241646d696e732064656c6574652074656d706c617465207661726961626c6573220d0a4f4e20656d61696c5f74656d706c6174655f7661726961626c657320464f522044454c4554450d0a544f2061757468656e746963617465640d0a5553494e4720282853454c4543542069735f61646d696e5f7573657228292929000001362d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20332e20454d41494c205641524941424c45205245474953545259204f7074696d697a6174696f6e73202853696d696c617220746f2061626f7665290d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a44524f5020504f4c49435920494620455849535453202241646d696e73206d616e61676520656d61696c207661726961626c6520726567697374727922204f4e20656d61696c5f7661726961626c655f72656769737472790000005044524f5020504f4c4943592049462045584953545320225075626c69632072656164207661726961626c6520726567697374727922204f4e20656d61696c5f7661726961626c655f72656769737472790000005d44524f5020504f4c49435920494620455849535453202241757468656e746963617465642075736572732076696577207661726961626c6520726567697374727922204f4e20656d61696c5f7661726961626c655f7265676973747279000000a52d2d2045766572796f6e652061757468656e746963617465642063616e20726561640d0a43524541544520504f4c494359202241757468656e746963617465642075736572732076696577207661726961626c65207265676973747279220d0a4f4e20656d61696c5f7661726961626c655f726567697374727920464f522053454c4543540d0a544f2061757468656e746963617465640d0a5553494e4720287472756529000000682d2d2041646d696e732063616e206d616e6167650d0a44524f5020504f4c49435920494620455849535453202241646d696e7320696e73657274207661726961626c6520726567697374727922204f4e20656d61696c5f7661726961626c655f72656769737472790000008f43524541544520504f4c494359202241646d696e7320696e73657274207661726961626c65207265676973747279220d0a4f4e20656d61696c5f7661726961626c655f726567697374727920464f5220494e534552540d0a544f2061757468656e746963617465640d0a5749544820434845434b20282853454c4543542069735f61646d696e5f75736572282929290000005244524f5020504f4c49435920494620455849535453202241646d696e7320757064617465207661726961626c6520726567697374727922204f4e20656d61696c5f7661726961626c655f72656769737472790000008a43524541544520504f4c494359202241646d696e7320757064617465207661726961626c65207265676973747279220d0a4f4e20656d61696c5f7661726961626c655f726567697374727920464f52205550444154450d0a544f2061757468656e746963617465640d0a5553494e4720282853454c4543542069735f61646d696e5f75736572282929290000005244524f5020504f4c49435920494620455849535453202241646d696e732064656c657465207661726961626c6520726567697374727922204f4e20656d61696c5f7661726961626c655f72656769737472790000008a43524541544520504f4c494359202241646d696e732064656c657465207661726961626c65207265676973747279220d0a4f4e20656d61696c5f7661726961626c655f726567697374727920464f522044454c4554450d0a544f2061757468656e746963617465640d0a5553494e4720282853454c4543542069735f61646d696e5f75736572282929290000020c2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20342e205041594d454e54205452414e53414354494f4e53204f7074696d697a6174696f6e730d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d204578697374696e673a202241646d696e73206d616e6167652e2e2e222028414c4c29207673202253656c656374207061796d656e74207472616e73616374696f6e7322202853454c4543542c20636865636b732061646d696e204f522075736572206f776e657273686970290d0a2d2d204669783a2052656d6f76652053454c4543542066726f6d202241646d696e73206d616e616765222c206c6574202253656c656374207061796d656e74207472616e73616374696f6e73222068616e646c652069742028776869636820616c726561647920696e636c756465732061646d696e20636865636b292e0d0a0d0a44524f5020504f4c49435920494620455849535453202241646d696e73206d616e616765207061796d656e74207472616e73616374696f6e7322204f4e207061796d656e745f7472616e73616374696f6e730000004b44524f5020504f4c49435920494620455849535453202253656c656374207061796d656e74207472616e73616374696f6e7322204f4e207061796d656e745f7472616e73616374696f6e730000004944524f5020504f4c49435920494620455849535453202256696577207061796d656e74207472616e73616374696f6e7322204f4e207061796d656e745f7472616e73616374696f6e73000001652d2d20556e69666965642053454c45435420706f6c696379202841646d696e73204f52204f776e657273290d0a43524541544520504f4c494359202256696577207061796d656e74207472616e73616374696f6e73220d0a4f4e207061796d656e745f7472616e73616374696f6e7320464f522053454c4543540d0a544f2061757468656e746963617465640d0a5553494e4720280d0a20202853454c4543542069735f61646d696e5f757365722829290d0a20204f52200d0a202045584953545320280d0a2020202053454c45435420312046524f4d207061796d656e745f696e74656e74730d0a202020205748455245207061796d656e745f696e74656e74732e6964203d207061796d656e745f7472616e73616374696f6e732e696e74656e745f69640d0a20202020414e44207061796d656e745f696e74656e74732e757365725f6964203d202853454c45435420617574682e7569642829290d0a2020290d0a290000007e2d2d2041646d696e204d616e6167656d656e742028496e736572742f5570646174652f44656c657465290d0a44524f5020504f4c49435920494620455849535453202241646d696e7320696e73657274207061796d656e74207472616e73616374696f6e7322204f4e207061796d656e745f7472616e73616374696f6e730000008f43524541544520504f4c494359202241646d696e7320696e73657274207061796d656e74207472616e73616374696f6e73220d0a4f4e207061796d656e745f7472616e73616374696f6e7320464f5220494e534552540d0a544f2061757468656e746963617465640d0a5749544820434845434b20282853454c4543542069735f61646d696e5f75736572282929290000005244524f5020504f4c49435920494620455849535453202241646d696e7320757064617465207061796d656e74207472616e73616374696f6e7322204f4e207061796d656e745f7472616e73616374696f6e730000008a43524541544520504f4c494359202241646d696e7320757064617465207061796d656e74207472616e73616374696f6e73220d0a4f4e207061796d656e745f7472616e73616374696f6e7320464f52205550444154450d0a544f2061757468656e746963617465640d0a5553494e4720282853454c4543542069735f61646d696e5f75736572282929290000005244524f5020504f4c49435920494620455849535453202241646d696e732064656c657465207061796d656e74207472616e73616374696f6e7322204f4e207061796d656e745f7472616e73616374696f6e730000008a43524541544520504f4c494359202241646d696e732064656c657465207061796d656e74207472616e73616374696f6e73220d0a4f4e207061796d656e745f7472616e73616374696f6e7320464f522044454c4554450d0a544f2061757468656e746963617465640d0a5553494e4720282853454c4543542069735f61646d696e5f7573657228292929"}],"ResultFormatCodes":[]}
NOTICE (00000): policy "Admins delete payment transactions" for relation "payment_transactions" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260215193815_restrict_superadmin_access.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Restrict access to Email Management and System Logs to SuperAdmins only\r\n-- Also define is_superadmin_user() function for convenience\r\n\r\n-- 1. Create is_superadmin_user function\r\nCREATE OR REPLACE FUNCTION public.is_superadmin_user()\r\nRETURNS boolean\r\nLANGUAGE sql\r\nSECURITY DEFINER\r\nSET search_path = public\r\nAS $$\r\n  SELECT EXISTS (\r\n    SELECT 1\r\n    FROM profiles\r\n    WHERE id = auth.uid()\r\n      AND is_superadmin = true\r\n  );\r\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- =========================================================================\r\n-- 2. EMAIL TEMPLATE VARIABLES Optimizations (SuperAdmin Only)\r\n-- =========================================================================\r\n\r\n-- Drop previous broad admin policies\r\nDROP POLICY IF EXISTS \"Authenticated users view template variables\" ON email_template_variables","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins manage template variables\" ON email_template_variables","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins update template variables\" ON email_template_variables","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins delete template variables\" ON email_template_variables","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Restrict SELECT to SuperAdmins (assuming users don't need to read templates directly via API)\r\n-- If users need to read templates (e.g. for some frontend logic), revert this to Authenticated.\r\n-- But usually templates are backend-only.\r\nCREATE POLICY \"SuperAdmins view template variables\"\r\nON email_template_variables FOR SELECT\r\nTO authenticated\r\nUSING (public.is_superadmin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Restrict Manage to SuperAdmins\r\nCREATE POLICY \"SuperAdmins insert template variables\"\r\nON email_template_variables FOR INSERT\r\nTO authenticated\r\nWITH CHECK (public.is_superadmin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"SuperAdmins update template variables\"\r\nON email_template_variables FOR UPDATE\r\nTO authenticated\r\nUSING (public.is_superadmin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"SuperAdmins delete template variables\"\r\nON email_template_variables FOR DELETE\r\nTO authenticated\r\nUSING (public.is_superadmin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- =========================================================================\r\n-- 3. EMAIL VARIABLE REGISTRY Optimizations (SuperAdmin Only)\r\n-- =========================================================================\r\n\r\nDROP POLICY IF EXISTS \"Authenticated users view variable registry\" ON email_variable_registry","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins insert variable registry\" ON email_variable_registry","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins update variable registry\" ON email_variable_registry","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins delete variable registry\" ON email_variable_registry","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"SuperAdmins view variable registry\"\r\nON email_variable_registry FOR SELECT\r\nTO authenticated\r\nUSING (public.is_superadmin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"SuperAdmins insert variable registry\"\r\nON email_variable_registry FOR INSERT\r\nTO authenticated\r\nWITH CHECK (public.is_superadmin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"SuperAdmins update variable registry\"\r\nON email_variable_registry FOR UPDATE\r\nTO authenticated\r\nUSING (public.is_superadmin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"SuperAdmins delete variable registry\"\r\nON email_variable_registry FOR DELETE\r\nTO authenticated\r\nUSING (public.is_superadmin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- =========================================================================\r\n-- 4. ADMIN AUDIT LOGS (SuperAdmin View, All Admin Insert)\r\n-- =========================================================================\r\n\r\n-- Drop existing policies\r\nDROP POLICY IF EXISTS \"Admins view audit logs\" ON admin_audit_log","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins insert audit logs\" ON admin_audit_log","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Also distinct old policies if any\r\nDROP POLICY IF EXISTS \"Admins can view all audit logs\" ON admin_audit_log","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can insert audit logs\" ON admin_audit_log","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- SELECT: Only SuperAdmins\r\nCREATE POLICY \"SuperAdmins view audit logs\"\r\nON admin_audit_log FOR SELECT\r\nTO authenticated\r\nUSING (public.is_superadmin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- INSERT: Admins and SuperAdmins (to log their actions)\r\n-- We continue to use is_admin_user() which checks (is_admin OR is_superadmin)\r\nCREATE POLICY \"Admins insert audit logs\"\r\nON admin_audit_log FOR INSERT\r\nTO authenticated\r\nWITH CHECK (public.is_admin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260215193815"},{"text":"restrict_superadmin_access"},{"binary":"0000000100000000000000190000001700000001000001b72d2d2052657374726963742061636365737320746f20456d61696c204d616e6167656d656e7420616e642053797374656d204c6f677320746f20537570657241646d696e73206f6e6c790d0a2d2d20416c736f20646566696e652069735f737570657261646d696e5f7573657228292066756e6374696f6e20666f7220636f6e76656e69656e63650d0a0d0a2d2d20312e204372656174652069735f737570657261646d696e5f757365722066756e6374696f6e0d0a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e69735f737570657261646d696e5f7573657228290d0a52455455524e5320626f6f6c65616e0d0a4c414e47554147452073716c0d0a534543555249545920444546494e45520d0a534554207365617263685f70617468203d207075626c69630d0a41532024240d0a202053454c4543542045584953545320280d0a2020202053454c45435420310d0a2020202046524f4d2070726f66696c65730d0a202020205748455245206964203d20617574682e75696428290d0a202020202020414e442069735f737570657261646d696e203d20747275650d0a2020293b0d0a2424000001642d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20322e20454d41494c2054454d504c415445205641524941424c4553204f7074696d697a6174696f6e732028537570657241646d696e204f6e6c79290d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d2044726f702070726576696f75732062726f61642061646d696e20706f6c69636965730d0a44524f5020504f4c49435920494620455849535453202241757468656e7469636174656420757365727320766965772074656d706c617465207661726961626c657322204f4e20656d61696c5f74656d706c6174655f7661726961626c65730000005444524f5020504f4c49435920494620455849535453202241646d696e73206d616e6167652074656d706c617465207661726961626c657322204f4e20656d61696c5f74656d706c6174655f7661726961626c65730000005444524f5020504f4c49435920494620455849535453202241646d696e73207570646174652074656d706c617465207661726961626c657322204f4e20656d61696c5f74656d706c6174655f7661726961626c65730000005444524f5020504f4c49435920494620455849535453202241646d696e732064656c6574652074656d706c617465207661726961626c657322204f4e20656d61696c5f74656d706c6174655f7661726961626c6573000001822d2d2052657374726963742053454c45435420746f20537570657241646d696e732028617373756d696e6720757365727320646f6e2774206e65656420746f20726561642074656d706c61746573206469726563746c792076696120415049290d0a2d2d204966207573657273206e65656420746f20726561642074656d706c617465732028652e672e20666f7220736f6d652066726f6e74656e64206c6f676963292c20726576657274207468697320746f2041757468656e746963617465642e0d0a2d2d2042757420757375616c6c792074656d706c6174657320617265206261636b656e642d6f6e6c792e0d0a43524541544520504f4c4943592022537570657241646d696e7320766965772074656d706c617465207661726961626c6573220d0a4f4e20656d61696c5f74656d706c6174655f7661726961626c657320464f522053454c4543540d0a544f2061757468656e746963617465640d0a5553494e4720287075626c69632e69735f737570657261646d696e5f75736572282929000000bc2d2d205265737472696374204d616e61676520746f20537570657241646d696e730d0a43524541544520504f4c4943592022537570657241646d696e7320696e736572742074656d706c617465207661726961626c6573220d0a4f4e20656d61696c5f74656d706c6174655f7661726961626c657320464f5220494e534552540d0a544f2061757468656e746963617465640d0a5749544820434845434b20287075626c69632e69735f737570657261646d696e5f757365722829290000009443524541544520504f4c4943592022537570657241646d696e73207570646174652074656d706c617465207661726961626c6573220d0a4f4e20656d61696c5f74656d706c6174655f7661726961626c657320464f52205550444154450d0a544f2061757468656e746963617465640d0a5553494e4720287075626c69632e69735f737570657261646d696e5f757365722829290000009443524541544520504f4c4943592022537570657241646d696e732064656c6574652074656d706c617465207661726961626c6573220d0a4f4e20656d61696c5f74656d706c6174655f7661726961626c657320464f522044454c4554450d0a544f2061757468656e746963617465640d0a5553494e4720287075626c69632e69735f737570657261646d696e5f757365722829290000013a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20332e20454d41494c205641524941424c45205245474953545259204f7074696d697a6174696f6e732028537570657241646d696e204f6e6c79290d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a44524f5020504f4c49435920494620455849535453202241757468656e746963617465642075736572732076696577207661726961626c6520726567697374727922204f4e20656d61696c5f7661726961626c655f72656769737472790000005244524f5020504f4c49435920494620455849535453202241646d696e7320696e73657274207661726961626c6520726567697374727922204f4e20656d61696c5f7661726961626c655f72656769737472790000005244524f5020504f4c49435920494620455849535453202241646d696e7320757064617465207661726961626c6520726567697374727922204f4e20656d61696c5f7661726961626c655f72656769737472790000005244524f5020504f4c49435920494620455849535453202241646d696e732064656c657465207661726961626c6520726567697374727922204f4e20656d61696c5f7661726961626c655f72656769737472790000009043524541544520504f4c4943592022537570657241646d696e732076696577207661726961626c65207265676973747279220d0a4f4e20656d61696c5f7661726961626c655f726567697374727920464f522053454c4543540d0a544f2061757468656e746963617465640d0a5553494e4720287075626c69632e69735f737570657261646d696e5f757365722829290000009743524541544520504f4c4943592022537570657241646d696e7320696e73657274207661726961626c65207265676973747279220d0a4f4e20656d61696c5f7661726961626c655f726567697374727920464f5220494e534552540d0a544f2061757468656e746963617465640d0a5749544820434845434b20287075626c69632e69735f737570657261646d696e5f757365722829290000009243524541544520504f4c4943592022537570657241646d696e7320757064617465207661726961626c65207265676973747279220d0a4f4e20656d61696c5f7661726961626c655f726567697374727920464f52205550444154450d0a544f2061757468656e746963617465640d0a5553494e4720287075626c69632e69735f737570657261646d696e5f757365722829290000009243524541544520504f4c4943592022537570657241646d696e732064656c657465207661726961626c65207265676973747279220d0a4f4e20656d61696c5f7661726961626c655f726567697374727920464f522044454c4554450d0a544f2061757468656e746963617465640d0a5553494e4720287075626c69632e69735f737570657261646d696e5f75736572282929000001362d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20342e2041444d494e204155444954204c4f47532028537570657241646d696e20566965772c20416c6c2041646d696e20496e73657274290d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d2044726f70206578697374696e6720706f6c69636965730d0a44524f5020504f4c49435920494620455849535453202241646d696e732076696577206175646974206c6f677322204f4e2061646d696e5f61756469745f6c6f670000004344524f5020504f4c49435920494620455849535453202241646d696e7320696e73657274206175646974206c6f677322204f4e2061646d696e5f61756469745f6c6f670000006f2d2d20416c736f2064697374696e6374206f6c6420706f6c696369657320696620616e790d0a44524f5020504f4c49435920494620455849535453202241646d696e732063616e207669657720616c6c206175646974206c6f677322204f4e2061646d696e5f61756469745f6c6f670000004744524f5020504f4c49435920494620455849535453202241646d696e732063616e20696e73657274206175646974206c6f677322204f4e2061646d696e5f61756469745f6c6f670000009e2d2d2053454c4543543a204f6e6c7920537570657241646d696e730d0a43524541544520504f4c4943592022537570657241646d696e732076696577206175646974206c6f6773220d0a4f4e2061646d696e5f61756469745f6c6f6720464f522053454c4543540d0a544f2061757468656e746963617465640d0a5553494e4720287075626c69632e69735f737570657261646d696e5f75736572282929000001082d2d20494e534552543a2041646d696e7320616e6420537570657241646d696e732028746f206c6f6720746865697220616374696f6e73290d0a2d2d20576520636f6e74696e756520746f207573652069735f61646d696e5f75736572282920776869636820636865636b73202869735f61646d696e204f522069735f737570657261646d696e290d0a43524541544520504f4c494359202241646d696e7320696e73657274206175646974206c6f6773220d0a4f4e2061646d696e5f61756469745f6c6f6720464f5220494e534552540d0a544f2061757468656e746963617465640d0a5749544820434845434b20287075626c69632e69735f61646d696e5f75736572282929"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can view all audit logs\" for relation \"admin_audit_log\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
NOTICE (00000): policy "Admins can view all audit logs" for relation "admin_audit_log" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can insert audit logs\" for relation \"admin_audit_log\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
NOTICE (00000): policy "Admins can insert audit logs" for relation "admin_audit_log" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260215194119_fix_products_promos_rls.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Fix MISSING RLS Policies for Products and Promo Codes\r\n-- These tables had RLS enabled but NO policies, causing access denied (406) errors for everyone.\r\n\r\n-- =========================================================================\r\n-- 1. PRODUCTS\r\n-- =========================================================================\r\n\r\n-- Drop any existing policies to be safe\r\nDROP POLICY IF EXISTS \"Public read active products\" ON products","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins manage products\" ON products","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins view all products\" ON products","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Public read active products\" for relation \"products\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Public read active products" for relation "products" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Policy 1: Public (Anon + Auth) can view ACTIVE products\r\nCREATE POLICY \"Public read active products\"\r\nON products FOR SELECT\r\nTO public\r\nUSING (is_active = true)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins manage products\" for relation \"products\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Policy 2: Admins can view ALL products (including inactive)\r\n-- Note: 'authenticated' role includes admins.\r\n-- This policy allows seeing rows where is_admin_user() is true.\r\n-- Since policies are OR-ed, admins will see (active=true OR admin=true) -\u003e ALL.\r\nCREATE POLICY \"Admins view all products\"\r\nON products FOR SELECT\r\nTO authenticated\r\nUSING (public.is_admin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins view all products\" for relation \"products\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
NOTICE (00000): policy "Admins manage products" for relation "products" does not exist, skipping
NOTICE (00000): policy "Admins view all products" for relation "products" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Policy 3: Admins can MANAGE products (Insert, Update, Delete)\r\nCREATE POLICY \"Admins manage products\"\r\nON products FOR ALL\r\nTO authenticated\r\nUSING (public.is_admin_user())\r\nWITH CHECK (public.is_admin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- =========================================================================\r\n-- 2. PROMO CODES\r\n-- =========================================================================\r\n\r\n-- Drop any existing policies\r\nDROP POLICY IF EXISTS \"Public read active promo codes\" ON promo_codes","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins manage promo codes\" ON promo_codes","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins view all promo codes\" ON promo_codes","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Policy 1: Public can view ACTIVE promo codes\r\n-- Required for PromotionMarquee and Checkout validation\r\nCREATE POLICY \"Public read active promo codes\"\r\nON promo_codes FOR SELECT\r\nTO public\r\nUSING (is_active = true)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Public read active promo codes\" for relation \"promo_codes\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins manage promo codes\" for relation \"promo_codes\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins view all promo codes\" for relation \"promo_codes\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
NOTICE (00000): policy "Public read active promo codes" for relation "promo_codes" does not exist, skipping
NOTICE (00000): policy "Admins manage promo codes" for relation "promo_codes" does not exist, skipping
NOTICE (00000): policy "Admins view all promo codes" for relation "promo_codes" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Policy 2: Admins can view ALL promo codes\r\nCREATE POLICY \"Admins view all promo codes\"\r\nON promo_codes FOR SELECT\r\nTO authenticated\r\nUSING (public.is_admin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Policy 3: Admins can MANAGE promo codes\r\nCREATE POLICY \"Admins manage promo codes\"\r\nON promo_codes FOR ALL\r\nTO authenticated\r\nUSING (public.is_admin_user())\r\nWITH CHECK (public.is_admin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260215194119"},{"text":"fix_products_promos_rls"},{"binary":"0000000100000000000000190000000c00000001000001b62d2d20466978204d495353494e4720524c5320506f6c696369657320666f722050726f647563747320616e642050726f6d6f20436f6465730d0a2d2d205468657365207461626c65732068616420524c5320656e61626c656420627574204e4f20706f6c69636965732c2063617573696e67206163636573732064656e696564202834303629206572726f727320666f722065766572796f6e652e0d0a0d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20312e2050524f44554354530d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d2044726f7020616e79206578697374696e6720706f6c696369657320746f20626520736166650d0a44524f5020504f4c4943592049462045584953545320225075626c69632072656164206163746976652070726f647563747322204f4e2070726f64756374730000003a44524f5020504f4c49435920494620455849535453202241646d696e73206d616e6167652070726f647563747322204f4e2070726f64756374730000003c44524f5020504f4c49435920494620455849535453202241646d696e73207669657720616c6c2070726f647563747322204f4e2070726f6475637473000000a42d2d20506f6c69637920313a205075626c69632028416e6f6e202b2041757468292063616e2076696577204143544956452070726f64756374730d0a43524541544520504f4c49435920225075626c69632072656164206163746976652070726f6475637473220d0a4f4e2070726f647563747320464f522053454c4543540d0a544f207075626c69630d0a5553494e47202869735f616374697665203d207472756529000001762d2d20506f6c69637920323a2041646d696e732063616e207669657720414c4c2070726f64756374732028696e636c7564696e6720696e616374697665290d0a2d2d204e6f74653a202761757468656e746963617465642720726f6c6520696e636c756465732061646d696e732e0d0a2d2d205468697320706f6c69637920616c6c6f777320736565696e6720726f77732077686572652069735f61646d696e5f75736572282920697320747275652e0d0a2d2d2053696e636520706f6c696369657320617265204f522d65642c2061646d696e732077696c6c2073656520286163746976653d74727565204f522061646d696e3d7472756529202d3e20414c4c2e0d0a43524541544520504f4c494359202241646d696e73207669657720616c6c2070726f6475637473220d0a4f4e2070726f647563747320464f522053454c4543540d0a544f2061757468656e746963617465640d0a5553494e4720287075626c69632e69735f61646d696e5f75736572282929000000d42d2d20506f6c69637920333a2041646d696e732063616e204d414e4147452070726f64756374732028496e736572742c205570646174652c2044656c657465290d0a43524541544520504f4c494359202241646d696e73206d616e6167652070726f6475637473220d0a4f4e2070726f647563747320464f5220414c4c0d0a544f2061757468656e746963617465640d0a5553494e4720287075626c69632e69735f61646d696e5f757365722829290d0a5749544820434845434b20287075626c69632e69735f61646d696e5f75736572282929000001152d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20322e2050524f4d4f20434f4445530d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d2044726f7020616e79206578697374696e6720706f6c69636965730d0a44524f5020504f4c4943592049462045584953545320225075626c69632072656164206163746976652070726f6d6f20636f64657322204f4e2070726f6d6f5f636f6465730000004044524f5020504f4c49435920494620455849535453202241646d696e73206d616e6167652070726f6d6f20636f64657322204f4e2070726f6d6f5f636f6465730000004244524f5020504f4c49435920494620455849535453202241646d696e73207669657720616c6c2070726f6d6f20636f64657322204f4e2070726f6d6f5f636f646573000000d92d2d20506f6c69637920313a205075626c69632063616e2076696577204143544956452070726f6d6f20636f6465730d0a2d2d20526571756972656420666f722050726f6d6f74696f6e4d61727175656520616e6420436865636b6f75742076616c69646174696f6e0d0a43524541544520504f4c49435920225075626c69632072656164206163746976652070726f6d6f20636f646573220d0a4f4e2070726f6d6f5f636f64657320464f522053454c4543540d0a544f207075626c69630d0a5553494e47202869735f616374697665203d207472756529000000a62d2d20506f6c69637920323a2041646d696e732063616e207669657720414c4c2070726f6d6f20636f6465730d0a43524541544520504f4c494359202241646d696e73207669657720616c6c2070726f6d6f20636f646573220d0a4f4e2070726f6d6f5f636f64657320464f522053454c4543540d0a544f2061757468656e746963617465640d0a5553494e4720287075626c69632e69735f61646d696e5f75736572282929000000c42d2d20506f6c69637920333a2041646d696e732063616e204d414e4147452070726f6d6f20636f6465730d0a43524541544520504f4c494359202241646d696e73206d616e6167652070726f6d6f20636f646573220d0a4f4e2070726f6d6f5f636f64657320464f5220414c4c0d0a544f2061757468656e746963617465640d0a5553494e4720287075626c69632e69735f61646d696e5f757365722829290d0a5749544820434845434b20287075626c69632e69735f61646d696e5f75736572282929"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260216210000_schema_reconciliation.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Final Database Reconciliation and Drift Fix\r\n-- This migration ensures total alignment between remote and local, specifically addressing RLS and function drift.\r\n\r\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 1. Ensure all profiles policies are idempotent and optimized\r\nDROP POLICY IF EXISTS \"Authenticated users view profiles\" ON profiles","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users view own profiles\" ON profiles","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins view profiles\" ON profiles","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Profiles viewable by owners and admins\" ON profiles","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users can view own profile\" ON profiles","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can view all profiles\" ON profiles","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Authenticated users view profiles\" \r\nON profiles FOR SELECT \r\nTO authenticated\r\nUSING (\r\n  (SELECT auth.uid()) = id \r\n  OR \r\n  (SELECT public.is_admin_user())\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users view own profiles\" for relation \"profiles\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins view profiles\" for relation \"profiles\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users can view own profile\" for relation \"profiles\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
NOTICE (00000): policy "Users view own profiles" for relation "profiles" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can view all profiles\" for relation \"profiles\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Audit Log Drift Fix: Ensure standard uuid_generate_v4() usage if extension is present\r\nDO $$\r\nBEGIN\r\n    IF EXISTS (SELECT 1 FROM pg_extension WHERE extname = 'uuid-ossp') THEN\r\n        ALTER TABLE \"public\".\"admin_audit_log\" ALTER COLUMN \"id\" SET DEFAULT extensions.uuid_generate_v4();\r\n    ELSE\r\n        ALTER TABLE \"public\".\"admin_audit_log\" ALTER COLUMN \"id\" SET DEFAULT gen_random_uuid();\r\n    END IF;\r\nEND $$","ParameterOIDs":null}
NOTICE (00000): policy "Admins view profiles" for relation "profiles" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
NOTICE (00000): policy "Users can view own profile" for relation "profiles" does not exist, skipping
NOTICE (00000): policy "Admins can view all profiles" for relation "profiles" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. Address Column Alignment\r\nALTER TABLE \"public\".\"addresses\" ADD COLUMN IF NOT EXISTS \"district\" TEXT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"addresses\" ALTER COLUMN \"city\" SET DATA TYPE character varying(100) USING \"city\"::character varying(100)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"addresses\" ALTER COLUMN \"postal_code\" SET DATA TYPE character varying(20) USING \"postal_code\"::character varying(20)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"addresses\" ALTER COLUMN \"street\" SET DATA TYPE character varying(500) USING \"street\"::character varying(500)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"district\" of relation \"addresses\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 4. Sync Email Template Defaults and Columns\r\nALTER TABLE \"public\".\"email_templates\" \r\n  ADD COLUMN IF NOT EXISTS \"allow_raw_html\" BOOLEAN DEFAULT false,\r\n  ADD COLUMN IF NOT EXISTS \"is_auth_critical\" BOOLEAN NOT NULL DEFAULT false,\r\n  ADD COLUMN IF NOT EXISTS \"allowlist_fallback_keys\" TEXT[] NOT NULL DEFAULT ARRAY[]::TEXT[]","ParameterOIDs":null}
NOTICE (42701): column "district" of relation "addresses" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"email_templates\" \r\n  ALTER COLUMN \"normalization_version\" SET DEFAULT 1,\r\n  ALTER COLUMN \"editor_schema\" SET DEFAULT '{}'::jsonb,\r\n  ALTER COLUMN \"normalization_version\" SET NOT NULL,\r\n  ALTER COLUMN \"editor_schema\" SET NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 5. Profiles Consistency (Notifications and Admin Flags)\r\nALTER TABLE \"public\".\"profiles\"\r\n  ADD COLUMN IF NOT EXISTS \"email_notifications\" BOOLEAN DEFAULT true,\r\n  ADD COLUMN IF NOT EXISTS \"order_notifications\" BOOLEAN DEFAULT true,\r\n  ALTER COLUMN \"is_admin\" SET NOT NULL,\r\n  ALTER COLUMN \"is_admin\" SET DEFAULT false","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 6. Fix Site Settings constraints and nullability\r\nALTER TABLE \"public\".\"site_settings\"\r\n  ALTER COLUMN \"vat_rate\" SET NOT NULL,\r\n  ALTER COLUMN \"shipping_cost\" SET NOT NULL,\r\n  ALTER COLUMN \"free_shipping_threshold\" SET NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DO $$\r\nBEGIN\r\n    IF EXISTS (SELECT 1 FROM pg_constraint WHERE conname = 'site_settings_id_check') THEN\r\n        ALTER TABLE public.site_settings DROP CONSTRAINT site_settings_id_check;\r\n    END IF;\r\n    IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname = 'one_row') THEN\r\n        ALTER TABLE public.site_settings ADD CONSTRAINT one_row CHECK (id = 1);\r\n    END IF;\r\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"is_auth_critical\" of relation \"email_templates\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"allowlist_fallback_keys\" of relation \"email_templates\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"email_notifications\" of relation \"profiles\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"order_notifications\" of relation \"profiles\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
NOTICE (42701): column "is_auth_critical" of relation "email_templates" already exists, skipping
NOTICE (42701): column "allowlist_fallback_keys" of relation "email_templates" already exists, skipping
NOTICE (42701): column "email_notifications" of relation "profiles" already exists, skipping
NOTICE (42701): column "order_notifications" of relation "profiles" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 7. Orders and Support Tickets Constraints\r\nDO $$\r\nBEGIN\r\n    IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname = 'orders_currency_tl_only') THEN\r\n        ALTER TABLE \"public\".\"orders\" ADD CONSTRAINT orders_currency_tl_only CHECK (currency = 'TL'::text) NOT VALID;\r\n        ALTER TABLE \"public\".\"orders\" VALIDATE CONSTRAINT orders_currency_tl_only;\r\n    END IF;\r\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE \"public\".\"support_tickets\" \r\n  ALTER COLUMN \"category\" SET DEFAULT 'general'::text,\r\n  ALTER COLUMN \"status\" SET DEFAULT 'open'::text","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 8. Deep-Check Constraints Alignment\r\nDO $$ \r\nBEGIN\r\n    -- profiles\r\n    ALTER TABLE public.profiles DROP CONSTRAINT IF EXISTS profiles_phone_format_check;\r\n    ALTER TABLE public.profiles ADD CONSTRAINT profiles_phone_format_check CHECK (phone IS NULL OR phone ~ '^\\+[0-9]{10,15}$');\r\n    \r\n    ALTER TABLE public.profiles DROP CONSTRAINT IF EXISTS profiles_user_type_check;\r\n    ALTER TABLE public.profiles ADD CONSTRAINT profiles_user_type_check CHECK (user_type = ANY (ARRAY['individual'::text, 'company'::text]));\r\n\r\n    -- email_templates\r\n    ALTER TABLE public.email_templates DROP CONSTRAINT IF EXISTS email_templates_unresolved_policy_check;\r\n    ALTER TABLE public.email_templates ADD CONSTRAINT email_templates_unresolved_policy_check CHECK (unresolved_policy = ANY (ARRAY['block'::text, 'warn'::text, 'allowlist_fallback'::text]));\r\n\r\n    -- orders\r\n    ALTER TABLE public.orders DROP CONSTRAINT IF EXISTS orders_credit_card_requires_intent;\r\n    ALTER TABLE public.orders ADD CONSTRAINT orders_credit_card_requires_intent CHECK (payment_method \u003c\u003e 'credit_card' OR payment_intent_id IS NOT NULL) NOT VALID;\r\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260216210000"},{"text":"schema_reconciliation"},{"binary":"0000000100000000000000190000001600000001000000ac2d2d2046696e616c204461746162617365205265636f6e63696c696174696f6e20616e64204472696674204669780d0a2d2d2054686973206d6967726174696f6e20656e737572657320746f74616c20616c69676e6d656e74206265747765656e2072656d6f746520616e64206c6f63616c2c207370656369666963616c6c792061646472657373696e6720524c5320616e642066756e6374696f6e2064726966742e0d0a0d0a424547494e000000862d2d20312e20456e7375726520616c6c2070726f66696c657320706f6c696369657320617265206964656d706f74656e7420616e64206f7074696d697a65640d0a44524f5020504f4c49435920494620455849535453202241757468656e7469636174656420757365727320766965772070726f66696c657322204f4e2070726f66696c65730000003b44524f5020504f4c49435920494620455849535453202255736572732076696577206f776e2070726f66696c657322204f4e2070726f66696c65730000003844524f5020504f4c49435920494620455849535453202241646d696e7320766965772070726f66696c657322204f4e2070726f66696c65730000004a44524f5020504f4c49435920494620455849535453202250726f66696c6573207669657761626c65206279206f776e65727320616e642061646d696e7322204f4e2070726f66696c65730000003e44524f5020504f4c49435920494620455849535453202255736572732063616e2076696577206f776e2070726f66696c6522204f4e2070726f66696c65730000004044524f5020504f4c49435920494620455849535453202241646d696e732063616e207669657720616c6c2070726f66696c657322204f4e2070726f66696c6573000000b043524541544520504f4c494359202241757468656e7469636174656420757365727320766965772070726f66696c657322200d0a4f4e2070726f66696c657320464f522053454c454354200d0a544f2061757468656e746963617465640d0a5553494e4720280d0a20202853454c45435420617574682e756964282929203d206964200d0a20204f52200d0a20202853454c454354207075626c69632e69735f61646d696e5f757365722829290d0a29000001a32d2d20322e204175646974204c6f67204472696674204669783a20456e73757265207374616e6461726420757569645f67656e65726174655f7634282920757361676520696620657874656e73696f6e2069732070726573656e740d0a444f2024240d0a424547494e0d0a20202020494620455849535453202853454c45435420312046524f4d2070675f657874656e73696f6e205748455245206578746e616d65203d2027757569642d6f7373702729205448454e0d0a2020202020202020414c544552205441424c4520227075626c6963222e2261646d696e5f61756469745f6c6f672220414c54455220434f4c554d4e2022696422205345542044454641554c5420657874656e73696f6e732e757569645f67656e65726174655f763428293b0d0a20202020454c53450d0a2020202020202020414c544552205441424c4520227075626c6963222e2261646d696e5f61756469745f6c6f672220414c54455220434f4c554d4e2022696422205345542044454641554c542067656e5f72616e646f6d5f7575696428293b0d0a20202020454e442049463b0d0a454e44202424000000692d2d20332e204164647265737320436f6c756d6e20416c69676e6d656e740d0a414c544552205441424c4520227075626c6963222e22616464726573736573222041444420434f4c554d4e204946204e4f5420455849535453202264697374726963742220544558540000007e414c544552205441424c4520227075626c6963222e226164647265737365732220414c54455220434f4c554d4e202263697479222053455420444154412054595045206368617261637465722076617279696e672831303029205553494e47202263697479223a3a6368617261637465722076617279696e6728313030290000008a414c544552205441424c4520227075626c6963222e226164647265737365732220414c54455220434f4c554d4e2022706f7374616c5f636f6465222053455420444154412054595045206368617261637465722076617279696e6728323029205553494e472022706f7374616c5f636f6465223a3a6368617261637465722076617279696e672832302900000082414c544552205441424c4520227075626c6963222e226164647265737365732220414c54455220434f4c554d4e2022737472656574222053455420444154412054595045206368617261637465722076617279696e672835303029205553494e472022737472656574223a3a6368617261637465722076617279696e672835303029000001482d2d20342e2053796e6320456d61696c2054656d706c6174652044656661756c747320616e6420436f6c756d6e730d0a414c544552205441424c4520227075626c6963222e22656d61696c5f74656d706c6174657322200d0a202041444420434f4c554d4e204946204e4f54204558495354532022616c6c6f775f7261775f68746d6c2220424f4f4c45414e2044454641554c542066616c73652c0d0a202041444420434f4c554d4e204946204e4f5420455849535453202269735f617574685f637269746963616c2220424f4f4c45414e204e4f54204e554c4c2044454641554c542066616c73652c0d0a202041444420434f4c554d4e204946204e4f54204558495354532022616c6c6f776c6973745f66616c6c6261636b5f6b6579732220544558545b5d204e4f54204e554c4c2044454641554c542041525241595b5d3a3a544558545b5d000000fa414c544552205441424c4520227075626c6963222e22656d61696c5f74656d706c6174657322200d0a2020414c54455220434f4c554d4e20226e6f726d616c697a6174696f6e5f76657273696f6e22205345542044454641554c5420312c0d0a2020414c54455220434f4c554d4e2022656469746f725f736368656d6122205345542044454641554c5420277b7d273a3a6a736f6e622c0d0a2020414c54455220434f4c554d4e20226e6f726d616c697a6174696f6e5f76657273696f6e2220534554204e4f54204e554c4c2c0d0a2020414c54455220434f4c554d4e2022656469746f725f736368656d612220534554204e4f54204e554c4c000001412d2d20352e2050726f66696c657320436f6e73697374656e637920284e6f74696669636174696f6e7320616e642041646d696e20466c616773290d0a414c544552205441424c4520227075626c6963222e2270726f66696c6573220d0a202041444420434f4c554d4e204946204e4f54204558495354532022656d61696c5f6e6f74696669636174696f6e732220424f4f4c45414e2044454641554c5420747275652c0d0a202041444420434f4c554d4e204946204e4f542045584953545320226f726465725f6e6f74696669636174696f6e732220424f4f4c45414e2044454641554c5420747275652c0d0a2020414c54455220434f4c554d4e202269735f61646d696e2220534554204e4f54204e554c4c2c0d0a2020414c54455220434f4c554d4e202269735f61646d696e22205345542044454641554c542066616c7365000000e72d2d20362e2046697820536974652053657474696e677320636f6e73747261696e747320616e64206e756c6c6162696c6974790d0a414c544552205441424c4520227075626c6963222e22736974655f73657474696e6773220d0a2020414c54455220434f4c554d4e20227661745f726174652220534554204e4f54204e554c4c2c0d0a2020414c54455220434f4c554d4e20227368697070696e675f636f73742220534554204e4f54204e554c4c2c0d0a2020414c54455220434f4c554d4e2022667265655f7368697070696e675f7468726573686f6c642220534554204e4f54204e554c4c0000017c444f2024240d0a424547494e0d0a20202020494620455849535453202853454c45435420312046524f4d2070675f636f6e73747261696e7420574845524520636f6e6e616d65203d2027736974655f73657474696e67735f69645f636865636b2729205448454e0d0a2020202020202020414c544552205441424c45207075626c69632e736974655f73657474696e67732044524f5020434f4e53545241494e5420736974655f73657474696e67735f69645f636865636b3b0d0a20202020454e442049463b0d0a202020204946204e4f5420455849535453202853454c45435420312046524f4d2070675f636f6e73747261696e7420574845524520636f6e6e616d65203d20276f6e655f726f772729205448454e0d0a2020202020202020414c544552205441424c45207075626c69632e736974655f73657474696e67732041444420434f4e53545241494e54206f6e655f726f7720434845434b20286964203d2031293b0d0a20202020454e442049463b0d0a454e442024240000017a2d2d20372e204f726465727320616e6420537570706f7274205469636b65747320436f6e73747261696e74730d0a444f2024240d0a424547494e0d0a202020204946204e4f5420455849535453202853454c45435420312046524f4d2070675f636f6e73747261696e7420574845524520636f6e6e616d65203d20276f72646572735f63757272656e63795f746c5f6f6e6c792729205448454e0d0a2020202020202020414c544552205441424c4520227075626c6963222e226f7264657273222041444420434f4e53545241494e54206f72646572735f63757272656e63795f746c5f6f6e6c7920434845434b202863757272656e6379203d2027544c273a3a7465787429204e4f542056414c49443b0d0a2020202020202020414c544552205441424c4520227075626c6963222e226f7264657273222056414c494441544520434f4e53545241494e54206f72646572735f63757272656e63795f746c5f6f6e6c793b0d0a20202020454e442049463b0d0a454e4420242400000091414c544552205441424c4520227075626c6963222e22737570706f72745f7469636b65747322200d0a2020414c54455220434f4c554d4e202263617465676f727922205345542044454641554c54202767656e6572616c273a3a746578742c0d0a2020414c54455220434f4c554d4e202273746174757322205345542044454641554c5420276f70656e273a3a746578740000046a2d2d20382e20446565702d436865636b20436f6e73747261696e747320416c69676e6d656e740d0a444f202424200d0a424547494e0d0a202020202d2d2070726f66696c65730d0a20202020414c544552205441424c45207075626c69632e70726f66696c65732044524f5020434f4e53545241494e54204946204558495354532070726f66696c65735f70686f6e655f666f726d61745f636865636b3b0d0a20202020414c544552205441424c45207075626c69632e70726f66696c65732041444420434f4e53545241494e542070726f66696c65735f70686f6e655f666f726d61745f636865636b20434845434b202870686f6e65204953204e554c4c204f522070686f6e65207e20275e5c2b5b302d395d7b31302c31357d2427293b0d0a202020200d0a20202020414c544552205441424c45207075626c69632e70726f66696c65732044524f5020434f4e53545241494e54204946204558495354532070726f66696c65735f757365725f747970655f636865636b3b0d0a20202020414c544552205441424c45207075626c69632e70726f66696c65732041444420434f4e53545241494e542070726f66696c65735f757365725f747970655f636865636b20434845434b2028757365725f74797065203d20414e59202841525241595b27696e646976696475616c273a3a746578742c2027636f6d70616e79273a3a746578745d29293b0d0a0d0a202020202d2d20656d61696c5f74656d706c617465730d0a20202020414c544552205441424c45207075626c69632e656d61696c5f74656d706c617465732044524f5020434f4e53545241494e542049462045584953545320656d61696c5f74656d706c617465735f756e7265736f6c7665645f706f6c6963795f636865636b3b0d0a20202020414c544552205441424c45207075626c69632e656d61696c5f74656d706c617465732041444420434f4e53545241494e5420656d61696c5f74656d706c617465735f756e7265736f6c7665645f706f6c6963795f636865636b20434845434b2028756e7265736f6c7665645f706f6c696379203d20414e59202841525241595b27626c6f636b273a3a746578742c20277761726e273a3a746578742c2027616c6c6f776c6973745f66616c6c6261636b273a3a746578745d29293b0d0a0d0a202020202d2d206f72646572730d0a20202020414c544552205441424c45207075626c69632e6f72646572732044524f5020434f4e53545241494e5420494620455849535453206f72646572735f6372656469745f636172645f72657175697265735f696e74656e743b0d0a20202020414c544552205441424c45207075626c69632e6f72646572732041444420434f4e53545241494e54206f72646572735f6372656469745f636172645f72657175697265735f696e74656e7420434845434b20287061796d656e745f6d6574686f64203c3e20276372656469745f6361726427204f52207061796d656e745f696e74656e745f6964204953204e4f54204e554c4c29204e4f542056414c49443b0d0a454e4420242400000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260216220000_cleanup_duplicate_triggers.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Cleanup Duplicate Triggers and Redundant Functions\r\n-- This migration removes redundant \"updated_at\" triggers identified during drift analysis.\r\n\r\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 1. Orders Cleanup: Remote has both trigger_orders_updated_at and update_orders_updated_at\r\n-- We keep trigger_orders_updated_at for consistency.\r\nDROP TRIGGER IF EXISTS \"update_orders_updated_at\" ON \"public\".\"orders\"","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP TRIGGER IF EXISTS \"trigger_update_orders_updated_at\" ON \"public\".\"orders\"","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Products Cleanup: Remote has both set_updated_at_products and update_products_updated_at\r\nDROP TRIGGER IF EXISTS \"update_products_updated_at\" ON \"public\".\"products\"","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. Email Templates Cleanup: Remote has both set_updated_at_templates and set_updated_at_email_templates\r\nDROP TRIGGER IF EXISTS \"set_updated_at_templates\" ON \"public\".\"email_templates\"","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"trigger \"update_orders_updated_at\" for relation \"public.orders\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
NOTICE (00000): trigger "update_orders_updated_at" for relation "public.orders" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"trigger \"trigger_update_orders_updated_at\" for relation \"public.orders\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
NOTICE (00000): trigger "trigger_update_orders_updated_at" for relation "public.orders" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"trigger \"update_products_updated_at\" for relation \"public.products\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
NOTICE (00000): trigger "update_products_updated_at" for relation "public.products" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 4. Function Cleanup: Remove unused update functions\r\n-- These were likely created by different migration paths or manual experimentation.\r\nDROP FUNCTION IF EXISTS public.update_updated_at_column()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260216220000"},{"text":"cleanup_duplicate_triggers"},{"binary":"00000001000000000000001900000007000000010000009b2d2d20436c65616e7570204475706c696361746520547269676765727320616e6420526564756e64616e742046756e6374696f6e730d0a2d2d2054686973206d6967726174696f6e2072656d6f76657320726564756e64616e742022757064617465645f617422207472696767657273206964656e74696669656420647572696e6720647269667420616e616c797369732e0d0a0d0a424547494e000000db2d2d20312e204f726465727320436c65616e75703a2052656d6f74652068617320626f746820747269676765725f6f72646572735f757064617465645f617420616e64207570646174655f6f72646572735f757064617465645f61740d0a2d2d205765206b65657020747269676765725f6f72646572735f757064617465645f617420666f7220636f6e73697374656e63792e0d0a44524f5020545249474745522049462045584953545320227570646174655f6f72646572735f757064617465645f617422204f4e20227075626c6963222e226f7264657273220000004e44524f502054524947474552204946204558495354532022747269676765725f7570646174655f6f72646572735f757064617465645f617422204f4e20227075626c6963222e226f726465727322000000aa2d2d20322e2050726f647563747320436c65616e75703a2052656d6f74652068617320626f7468207365745f757064617465645f61745f70726f647563747320616e64207570646174655f70726f64756374735f757064617465645f61740d0a44524f5020545249474745522049462045584953545320227570646174655f70726f64756374735f757064617465645f617422204f4e20227075626c6963222e2270726f647563747322000000bb2d2d20332e20456d61696c2054656d706c6174657320436c65616e75703a2052656d6f74652068617320626f7468207365745f757064617465645f61745f74656d706c6174657320616e64207365745f757064617465645f61745f656d61696c5f74656d706c617465730d0a44524f5020545249474745522049462045584953545320227365745f757064617465645f61745f74656d706c6174657322204f4e20227075626c6963222e22656d61696c5f74656d706c6174657322000000c72d2d20342e2046756e6374696f6e20436c65616e75703a2052656d6f766520756e75736564207570646174652066756e6374696f6e730d0a2d2d2054686573652077657265206c696b656c79206372656174656420627920646966666572656e74206d6967726174696f6e207061746873206f72206d616e75616c206578706572696d656e746174696f6e2e0d0a44524f502046554e4354494f4e20494620455849535453207075626c69632e7570646174655f757064617465645f61745f636f6c756d6e282900000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP TRIGGER"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260216230000_extension_alignment.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Align Extensions with Production\r\n-- This ensures that local and CI environments have the same extensions as production.\r\n\r\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Ensure \"extensions\" and \"graphql\" schemas exist if not managed by Supabase\r\nCREATE SCHEMA IF NOT EXISTS \"extensions\"","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE SCHEMA IF NOT EXISTS \"graphql\"","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Enable extensions in their respective schemas\r\nCREATE EXTENSION IF NOT EXISTS \"pgcrypto\" WITH SCHEMA \"extensions\"","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42P06","Message":"schema \"extensions\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"schemacmds.c","Line":132,"Routine":"CreateSchemaCommand","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE SCHEMA"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE EXTENSION IF NOT EXISTS \"uuid-ossp\" WITH SCHEMA \"extensions\"","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42P06","Message":"schema \"graphql\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"schemacmds.c","Line":132,"Routine":"CreateSchemaCommand","UnknownFields":null}
NOTICE (42P06): schema "extensions" already exists, skipping
NOTICE (42P06): schema "graphql" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE EXTENSION IF NOT EXISTS \"pg_stat_statements\" WITH SCHEMA \"extensions\"","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE SCHEMA"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- pg_net is critical for edge function background triggering from DB\r\nCREATE EXTENSION IF NOT EXISTS \"pg_net\" WITH SCHEMA \"extensions\"","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42710","Message":"extension \"pgcrypto\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"extension.c","Line":1791,"Routine":"CreateExtension","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE EXTENSION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
NOTICE (42710): extension "pgcrypto" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42710","Message":"extension \"uuid-ossp\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"extension.c","Line":1791,"Routine":"CreateExtension","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
NOTICE (42710): extension "uuid-ossp" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE EXTENSION IF NOT EXISTS \"pg_graphql\" WITH SCHEMA \"graphql\"","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE EXTENSION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42710","Message":"extension \"pg_stat_statements\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"extension.c","Line":1791,"Routine":"CreateExtension","UnknownFields":null}
NOTICE (42710): extension "pg_stat_statements" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE EXTENSION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42710","Message":"extension \"pg_net\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"extension.c","Line":1791,"Routine":"CreateExtension","UnknownFields":null}
NOTICE (42710): extension "pg_net" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260216230000"},{"text":"extension_alignment"},{"binary":"0000000100000000000000190000000900000001000000842d2d20416c69676e20457874656e73696f6e7320776974682050726f64756374696f6e0d0a2d2d205468697320656e73757265732074686174206c6f63616c20616e6420434920656e7669726f6e6d656e74732068617665207468652073616d6520657874656e73696f6e732061732070726f64756374696f6e2e0d0a0d0a424547494e000000772d2d20456e737572652022657874656e73696f6e732220616e6420226772617068716c2220736368656d6173206578697374206966206e6f74206d616e616765642062792053757061626173650d0a43524541544520534348454d41204946204e4f54204558495354532022657874656e73696f6e73220000002543524541544520534348454d41204946204e4f542045584953545320226772617068716c22000000742d2d20456e61626c6520657874656e73696f6e7320696e207468656972207265737065637469766520736368656d61730d0a43524541544520455854454e53494f4e204946204e4f54204558495354532022706763727970746f22205749544820534348454d412022657874656e73696f6e73220000004343524541544520455854454e53494f4e204946204e4f54204558495354532022757569642d6f73737022205749544820534348454d412022657874656e73696f6e73220000004c43524541544520455854454e53494f4e204946204e4f5420455849535453202270675f737461745f73746174656d656e747322205749544820534348454d412022657874656e73696f6e7322000000872d2d2070675f6e657420697320637269746963616c20666f7220656467652066756e6374696f6e206261636b67726f756e642074726967676572696e672066726f6d2044420d0a43524541544520455854454e53494f4e204946204e4f5420455849535453202270675f6e657422205749544820534348454d412022657874656e73696f6e73220000004143524541544520455854454e53494f4e204946204e4f5420455849535453202270675f6772617068716c22205749544820534348454d4120226772617068716c2200000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE EXTENSION"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42710","Message":"extension \"pg_graphql\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"extension.c","Line":1791,"Routine":"CreateExtension","UnknownFields":null}
NOTICE (42710): extension "pg_graphql" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE EXTENSION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260216240000_drift_capture_final.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Final Schema Reconciliation to capture all manual changes and resolve persistent CI drift.\r\n-- This migration ensures that every column and constraint found in production is properly documented in the migration history.\r\n\r\n-- 1. Profiles Table Alignment\r\nALTER TABLE public.profiles \r\n    ADD COLUMN IF NOT EXISTS company_name character varying(255)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Addresses Table Alignment\r\nALTER TABLE public.addresses \r\n    ADD COLUMN IF NOT EXISTS address_type character varying(20) DEFAULT 'home' NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. Products Table Alignment\r\nALTER TABLE public.products \r\n    ADD COLUMN IF NOT EXISTS max_quantity_per_order INTEGER DEFAULT 10 NOT NULL,\r\n    ADD COLUMN IF NOT EXISTS reserved_stock INTEGER DEFAULT 0,\r\n    ADD COLUMN IF NOT EXISTS original_price NUMERIC","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 4. Orders Table Alignment\r\nALTER TABLE public.orders \r\n    ADD COLUMN IF NOT EXISTS cancellation_reason TEXT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"company_name\" of relation \"profiles\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
NOTICE (42701): column "company_name" of relation "profiles" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 5. Final Audit: Ensure all expected extensions are strictly enabled\r\n-- These are already in 20260216230000, but we re-verify here for documentation.\r\nCREATE EXTENSION IF NOT EXISTS \"uuid-ossp\"","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"address_type\" of relation \"addresses\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
NOTICE (42701): column "address_type" of relation "addresses" already exists, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"reserved_stock\" of relation \"products\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"original_price\" of relation \"products\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
NOTICE (42701): column "reserved_stock" of relation "products" already exists, skipping
NOTICE (42701): column "original_price" of relation "products" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE EXTENSION IF NOT EXISTS \"pgcrypto\"","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE EXTENSION IF NOT EXISTS \"pg_net\"","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 6. Trigger Consistency (Documentation/Precaution)\r\n-- Ensure updated_at triggers use handle_updated_at() everywhere.\r\nDO $$\r\nBEGIN\r\n    -- profiles\r\n    IF NOT EXISTS (SELECT 1 FROM pg_trigger WHERE tgname = 'set_updated_at_profiles') THEN\r\n        CREATE TRIGGER set_updated_at_profiles BEFORE UPDATE ON public.profiles FOR EACH ROW EXECUTE PROCEDURE public.handle_updated_at();\r\n    END IF;\r\n    -- products\r\n    IF NOT EXISTS (SELECT 1 FROM pg_trigger WHERE tgname = 'set_updated_at_products') THEN\r\n        CREATE TRIGGER set_updated_at_products BEFORE UPDATE ON public.products FOR EACH ROW EXECUTE PROCEDURE public.handle_updated_at();\r\n    END IF;\r\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260216240000"},{"text":"drift_capture_final"},{"binary":"0000000100000000000000190000000800000001000001602d2d2046696e616c20536368656d61205265636f6e63696c696174696f6e20746f206361707475726520616c6c206d616e75616c206368616e67657320616e64207265736f6c76652070657273697374656e742043492064726966742e0d0a2d2d2054686973206d6967726174696f6e20656e7375726573207468617420657665727920636f6c756d6e20616e6420636f6e73747261696e7420666f756e6420696e2070726f64756374696f6e2069732070726f7065726c7920646f63756d656e74656420696e20746865206d6967726174696f6e20686973746f72792e0d0a0d0a2d2d20312e2050726f66696c6573205461626c6520416c69676e6d656e740d0a414c544552205441424c45207075626c69632e70726f66696c6573200d0a2020202041444420434f4c554d4e204946204e4f542045584953545320636f6d70616e795f6e616d65206368617261637465722076617279696e672832353529000000972d2d20322e20416464726573736573205461626c6520416c69676e6d656e740d0a414c544552205441424c45207075626c69632e616464726573736573200d0a2020202041444420434f4c554d4e204946204e4f542045584953545320616464726573735f74797065206368617261637465722076617279696e67283230292044454641554c542027686f6d6527204e4f54204e554c4c000001032d2d20332e2050726f6475637473205461626c6520416c69676e6d656e740d0a414c544552205441424c45207075626c69632e70726f6475637473200d0a2020202041444420434f4c554d4e204946204e4f5420455849535453206d61785f7175616e746974795f7065725f6f7264657220494e54454745522044454641554c54203130204e4f54204e554c4c2c0d0a2020202041444420434f4c554d4e204946204e4f54204558495354532072657365727665645f73746f636b20494e54454745522044454641554c5420302c0d0a2020202041444420434f4c554d4e204946204e4f5420455849535453206f726967696e616c5f7072696365204e554d455249430000006f2d2d20342e204f7264657273205461626c6520416c69676e6d656e740d0a414c544552205441424c45207075626c69632e6f7264657273200d0a2020202041444420434f4c554d4e204946204e4f54204558495354532063616e63656c6c6174696f6e5f726561736f6e2054455854000000c42d2d20352e2046696e616c2041756469743a20456e7375726520616c6c20657870656374656420657874656e73696f6e7320617265207374726963746c7920656e61626c65640d0a2d2d2054686573652061726520616c726561647920696e2032303236303231363233303030302c206275742077652072652d766572696679206865726520666f7220646f63756d656e746174696f6e2e0d0a43524541544520455854454e53494f4e204946204e4f54204558495354532022757569642d6f737370220000002943524541544520455854454e53494f4e204946204e4f54204558495354532022706763727970746f220000002743524541544520455854454e53494f4e204946204e4f5420455849535453202270675f6e657422000002992d2d20362e205472696767657220436f6e73697374656e63792028446f63756d656e746174696f6e2f50726563617574696f6e290d0a2d2d20456e7375726520757064617465645f6174207472696767657273207573652068616e646c655f757064617465645f6174282920657665727977686572652e0d0a444f2024240d0a424547494e0d0a202020202d2d2070726f66696c65730d0a202020204946204e4f5420455849535453202853454c45435420312046524f4d2070675f747269676765722057484552452074676e616d65203d20277365745f757064617465645f61745f70726f66696c65732729205448454e0d0a20202020202020204352454154452054524947474552207365745f757064617465645f61745f70726f66696c6573204245464f524520555044415445204f4e207075626c69632e70726f66696c657320464f52204541434820524f5720455845435554452050524f434544555245207075626c69632e68616e646c655f757064617465645f617428293b0d0a20202020454e442049463b0d0a202020202d2d2070726f64756374730d0a202020204946204e4f5420455849535453202853454c45435420312046524f4d2070675f747269676765722057484552452074676e616d65203d20277365745f757064617465645f61745f70726f64756374732729205448454e0d0a20202020202020204352454154452054524947474552207365745f757064617465645f61745f70726f6475637473204245464f524520555044415445204f4e207075626c69632e70726f647563747320464f52204541434820524f5720455845435554452050524f434544555245207075626c69632e68616e646c655f757064617465645f617428293b0d0a20202020454e442049463b0d0a454e44202424"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42710","Message":"extension \"uuid-ossp\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"extension.c","Line":1791,"Routine":"CreateExtension","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE EXTENSION"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42710","Message":"extension \"pgcrypto\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"extension.c","Line":1791,"Routine":"CreateExtension","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE EXTENSION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
NOTICE (42710): extension "uuid-ossp" already exists, skipping
NOTICE (42710): extension "pgcrypto" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42710","Message":"extension \"pg_net\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"extension.c","Line":1791,"Routine":"CreateExtension","UnknownFields":null}
NOTICE (42710): extension "pg_net" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE EXTENSION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260216250000_resolve_remaining_drift.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Final remaining drift resolution based on deep dive into production schema.\r\n-- This handles foreign key delete rules, complex check constraints, and index refinements.\r\n\r\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 1. Profiles Check Constraints Alignment\r\n-- Production has specific logic for company vs individual profile requirements.\r\nALTER TABLE public.profiles DROP CONSTRAINT IF EXISTS profiles_company_name_required_check","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.profiles ADD CONSTRAINT profiles_company_name_required_check \r\n    CHECK (user_type \u003c\u003e 'company' OR (company_name IS NOT NULL AND length(TRIM(company_name)) \u003e= 1))","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.profiles DROP CONSTRAINT IF EXISTS profiles_full_name_min_length_check","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.profiles ADD CONSTRAINT profiles_full_name_min_length_check \r\n    CHECK (user_type = 'company' OR full_name IS NULL OR length(TRIM(full_name)) \u003e= 2)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Foreign Key \"ON DELETE CASCADE\" Alignment\r\n-- production matches: orders -\u003e profiles should cascade delete.\r\nALTER TABLE public.orders DROP CONSTRAINT IF EXISTS orders_user_id_fkey","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.orders ADD CONSTRAINT orders_user_id_fkey \r\n    FOREIGN KEY (user_id) REFERENCES public.profiles(id) ON DELETE CASCADE","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- production matches: profiles -\u003e auth.users should cascade delete.\r\nALTER TABLE public.profiles DROP CONSTRAINT IF EXISTS profiles_id_fkey","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.profiles ADD CONSTRAINT profiles_id_fkey \r\n    FOREIGN KEY (id) REFERENCES auth.users(id) ON DELETE CASCADE","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. Data Type Refinement (Syncing to TIMESTAMPTZ)\r\nALTER TABLE public.profiles ALTER COLUMN phone_verified_at SET DATA TYPE TIMESTAMPTZ","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 4. Email Templates Missing Column\r\nALTER TABLE public.email_templates ADD COLUMN IF NOT EXISTS unresolved_policy TEXT DEFAULT 'block'::text","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 5. Audit \u0026 Email Log Index Refinement\r\nCREATE INDEX IF NOT EXISTS idx_email_logs_mode_blocked ON public.email_logs (mode, blocked)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_email_logs_sent_at ON public.email_logs (sent_at)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_email_logs_template_slug_sent_at ON public.email_logs (template_slug, sent_at)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 5. Alignment for Products defaults\r\nALTER TABLE public.products \r\n    ALTER COLUMN stock SET DEFAULT 0,\r\n    ALTER COLUMN max_quantity_per_order SET DEFAULT 10,\r\n    ALTER COLUMN reserved_stock SET DEFAULT 0","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260216250000"},{"text":"resolve_remaining_drift"},{"binary":"0000000100000000000000190000001000000001000000b42d2d2046696e616c2072656d61696e696e67206472696674207265736f6c7574696f6e206261736564206f6e2064656570206469766520696e746f2070726f64756374696f6e20736368656d612e0d0a2d2d20546869732068616e646c657320666f726569676e206b65792064656c6574652072756c65732c20636f6d706c657820636865636b20636f6e73747261696e74732c20616e6420696e64657820726566696e656d656e74732e0d0a0d0a424547494e000000d82d2d20312e2050726f66696c657320436865636b20436f6e73747261696e747320416c69676e6d656e740d0a2d2d2050726f64756374696f6e20686173207370656369666963206c6f67696320666f7220636f6d70616e7920767320696e646976696475616c2070726f66696c6520726571756972656d656e74732e0d0a414c544552205441424c45207075626c69632e70726f66696c65732044524f5020434f4e53545241494e54204946204558495354532070726f66696c65735f636f6d70616e795f6e616d655f72657175697265645f636865636b000000b6414c544552205441424c45207075626c69632e70726f66696c65732041444420434f4e53545241494e542070726f66696c65735f636f6d70616e795f6e616d655f72657175697265645f636865636b200d0a20202020434845434b2028757365725f74797065203c3e2027636f6d70616e7927204f522028636f6d70616e795f6e616d65204953204e4f54204e554c4c20414e44206c656e677468285452494d28636f6d70616e795f6e616d652929203e3d2031292900000059414c544552205441424c45207075626c69632e70726f66696c65732044524f5020434f4e53545241494e54204946204558495354532070726f66696c65735f66756c6c5f6e616d655f6d696e5f6c656e6774685f636865636b000000a7414c544552205441424c45207075626c69632e70726f66696c65732041444420434f4e53545241494e542070726f66696c65735f66756c6c5f6e616d655f6d696e5f6c656e6774685f636865636b200d0a20202020434845434b2028757365725f74797065203d2027636f6d70616e7927204f522066756c6c5f6e616d65204953204e554c4c204f52206c656e677468285452494d2866756c6c5f6e616d652929203e3d203229000000ba2d2d20322e20466f726569676e204b657920224f4e2044454c45544520434153434144452220416c69676e6d656e740d0a2d2d2070726f64756374696f6e206d6174636865733a206f7264657273202d3e2070726f66696c65732073686f756c6420636173636164652064656c6574652e0d0a414c544552205441424c45207075626c69632e6f72646572732044524f5020434f4e53545241494e5420494620455849535453206f72646572735f757365725f69645f666b657900000089414c544552205441424c45207075626c69632e6f72646572732041444420434f4e53545241494e54206f72646572735f757365725f69645f666b6579200d0a20202020464f524549474e204b45592028757365725f696429205245464552454e434553207075626c69632e70726f66696c657328696429204f4e2044454c45544520434153434144450000008c2d2d2070726f64756374696f6e206d6174636865733a2070726f66696c6573202d3e20617574682e75736572732073686f756c6420636173636164652064656c6574652e0d0a414c544552205441424c45207075626c69632e70726f66696c65732044524f5020434f4e53545241494e54204946204558495354532070726f66696c65735f69645f666b65790000007e414c544552205441424c45207075626c69632e70726f66696c65732041444420434f4e53545241494e542070726f66696c65735f69645f666b6579200d0a20202020464f524549474e204b45592028696429205245464552454e43455320617574682e757365727328696429204f4e2044454c4554452043415343414445000000892d2d20332e2044617461205479706520526566696e656d656e74202853796e63696e6720746f2054494d455354414d50545a290d0a414c544552205441424c45207075626c69632e70726f66696c657320414c54455220434f4c554d4e2070686f6e655f76657269666965645f617420534554204441544120545950452054494d455354414d50545a0000008e2d2d20342e20456d61696c2054656d706c61746573204d697373696e6720436f6c756d6e0d0a414c544552205441424c45207075626c69632e656d61696c5f74656d706c617465732041444420434f4c554d4e204946204e4f542045584953545320756e7265736f6c7665645f706f6c69637920544558542044454641554c542027626c6f636b273a3a74657874000000852d2d20352e204175646974202620456d61696c204c6f6720496e64657820526566696e656d656e740d0a43524541544520494e444558204946204e4f5420455849535453206964785f656d61696c5f6c6f67735f6d6f64655f626c6f636b6564204f4e207075626c69632e656d61696c5f6c6f677320286d6f64652c20626c6f636b6564290000005043524541544520494e444558204946204e4f5420455849535453206964785f656d61696c5f6c6f67735f73656e745f6174204f4e207075626c69632e656d61696c5f6c6f6773202873656e745f6174290000006d43524541544520494e444558204946204e4f5420455849535453206964785f656d61696c5f6c6f67735f74656d706c6174655f736c75675f73656e745f6174204f4e207075626c69632e656d61696c5f6c6f6773202874656d706c6174655f736c75672c2073656e745f617429000000d22d2d20352e20416c69676e6d656e7420666f722050726f64756374732064656661756c74730d0a414c544552205441424c45207075626c69632e70726f6475637473200d0a20202020414c54455220434f4c554d4e2073746f636b205345542044454641554c5420302c0d0a20202020414c54455220434f4c554d4e206d61785f7175616e746974795f7065725f6f72646572205345542044454641554c542031302c0d0a20202020414c54455220434f4c554d4e2072657365727665645f73746f636b205345542044454641554c54203000000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"unresolved_policy\" of relation \"email_templates\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42P07","Message":"relation \"idx_email_logs_mode_blocked\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"index.c","Line":889,"Routine":"index_create","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42P07","Message":"relation \"idx_email_logs_sent_at\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"index.c","Line":889,"Routine":"index_create","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42P07","Message":"relation \"idx_email_logs_template_slug_sent_at\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"index.c","Line":889,"Routine":"index_create","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
NOTICE (42701): column "unresolved_policy" of relation "email_templates" already exists, skipping
NOTICE (42P07): relation "idx_email_logs_mode_blocked" already exists, skipping
NOTICE (42P07): relation "idx_email_logs_sent_at" already exists, skipping
NOTICE (42P07): relation "idx_email_logs_template_slug_sent_at" already exists, skipping
Applying migration 20260216260000_final_schema_alignment.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Final schema alignment to resolve remaining drift found in CI.\r\n-- Specifically addresses missing column in email_templates.\r\n\r\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 1. Email Templates Column Alignment\r\n-- Production has unresolved_policy column which was missing in migrations.\r\nALTER TABLE public.email_templates ADD COLUMN IF NOT EXISTS unresolved_policy TEXT DEFAULT 'block'::text","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Cleanup double triggers or inconsistent naming if any\r\n-- (We already did some in 20260216220000_cleanup_duplicate_triggers.sql)\r\n\r\n-- 3. Ensure consistent check constraints\r\nALTER TABLE public.email_templates DROP CONSTRAINT IF EXISTS email_templates_unresolved_policy_check","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_templates ADD CONSTRAINT email_templates_unresolved_policy_check \r\n    CHECK (unresolved_policy = ANY (ARRAY['block'::text, 'warn'::text, 'allowlist_fallback'::text]))","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260216260000"},{"text":"final_schema_alignment"},{"binary":"0000000100000000000000190000000500000001000000882d2d2046696e616c20736368656d6120616c69676e6d656e7420746f207265736f6c76652072656d61696e696e6720647269667420666f756e6420696e2043492e0d0a2d2d205370656369666963616c6c7920616464726573736573206d697373696e6720636f6c756d6e20696e20656d61696c5f74656d706c617465732e0d0a0d0a424547494e000000dd2d2d20312e20456d61696c2054656d706c6174657320436f6c756d6e20416c69676e6d656e740d0a2d2d2050726f64756374696f6e2068617320756e7265736f6c7665645f706f6c69637920636f6c756d6e20776869636820776173206d697373696e6720696e206d6967726174696f6e732e0d0a414c544552205441424c45207075626c69632e656d61696c5f74656d706c617465732041444420434f4c554d4e204946204e4f542045584953545320756e7265736f6c7665645f706f6c69637920544558542044454641554c542027626c6f636b273a3a74657874000001192d2d20322e20436c65616e757020646f75626c65207472696767657273206f7220696e636f6e73697374656e74206e616d696e6720696620616e790d0a2d2d2028576520616c72656164792064696420736f6d6520696e2032303236303231363232303030305f636c65616e75705f6475706c69636174655f74726967676572732e73716c290d0a0d0a2d2d20332e20456e7375726520636f6e73697374656e7420636865636b20636f6e73747261696e74730d0a414c544552205441424c45207075626c69632e656d61696c5f74656d706c617465732044524f5020434f4e53545241494e542049462045584953545320656d61696c5f74656d706c617465735f756e7265736f6c7665645f706f6c6963795f636865636b000000c0414c544552205441424c45207075626c69632e656d61696c5f74656d706c617465732041444420434f4e53545241494e5420656d61696c5f74656d706c617465735f756e7265736f6c7665645f706f6c6963795f636865636b200d0a20202020434845434b2028756e7265736f6c7665645f706f6c696379203d20414e59202841525241595b27626c6f636b273a3a746578742c20277761726e273a3a746578742c2027616c6c6f776c6973745f66616c6c6261636b273a3a746578745d292900000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"unresolved_policy\" of relation \"email_templates\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
NOTICE (42701): column "unresolved_policy" of relation "email_templates" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260216270000_comprehensive_drift_fix.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Final comprehensive drift resolution based on deep dive into production schema.\r\n-- This aligns all remaining discrepancies in columns, defaults, and triggers.\r\n\r\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 1. email_templates: Missing columns found in production\r\nALTER TABLE public.email_templates ADD COLUMN IF NOT EXISTS allow_raw_html BOOLEAN DEFAULT false","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_templates ADD COLUMN IF NOT EXISTS is_auth_critical BOOLEAN DEFAULT false","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_templates ADD COLUMN IF NOT EXISTS allowlist_fallback_keys TEXT[] DEFAULT ARRAY[]::text[]","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_templates ADD COLUMN IF NOT EXISTS normalization_version INTEGER DEFAULT 1","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"allow_raw_html\" of relation \"email_templates\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"is_auth_critical\" of relation \"email_templates\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_templates ADD COLUMN IF NOT EXISTS editor_schema JSONB DEFAULT '{}'::jsonb","ParameterOIDs":null}
NOTICE (42701): column "allow_raw_html" of relation "email_templates" already exists, skipping
NOTICE (42701): column "is_auth_critical" of relation "email_templates" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Ensure NOT NULL where appropriate\r\nALTER TABLE public.email_templates ALTER COLUMN is_auth_critical SET NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"allowlist_fallback_keys\" of relation \"email_templates\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
NOTICE (42701): column "allowlist_fallback_keys" of relation "email_templates" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_templates ALTER COLUMN allowlist_fallback_keys SET NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_templates ALTER COLUMN normalization_version SET NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"normalization_version\" of relation \"email_templates\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"editor_schema\" of relation \"email_templates\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
NOTICE (42701): column "normalization_version" of relation "email_templates" already exists, skipping
NOTICE (42701): column "editor_schema" of relation "email_templates" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_templates ALTER COLUMN editor_schema SET NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. admin_audit_log: Align defaults and nullability\r\n-- Production uses uuid_generate_v4() and enforces admin_user_id\r\nALTER TABLE public.admin_audit_log ALTER COLUMN id SET DEFAULT uuid_generate_v4()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.admin_audit_log ALTER COLUMN admin_user_id SET NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. Missing updated_at triggers\r\n-- email_variable_registry\r\nDO $$\r\nBEGIN\r\n    IF NOT EXISTS (SELECT 1 FROM pg_trigger WHERE tgname = 'set_updated_at_email_variable_registry') THEN\r\n        CREATE TRIGGER set_updated_at_email_variable_registry \r\n        BEFORE UPDATE ON public.email_variable_registry \r\n        FOR EACH ROW EXECUTE FUNCTION public.handle_updated_at();\r\n    END IF;\r\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- email_template_variables\r\nDO $$\r\nBEGIN\r\n    IF NOT EXISTS (SELECT 1 FROM pg_trigger WHERE tgname = 'set_updated_at_email_template_variables') THEN\r\n        CREATE TRIGGER set_updated_at_email_template_variables \r\n        BEFORE UPDATE ON public.email_template_variables \r\n        FOR EACH ROW EXECUTE FUNCTION public.handle_updated_at();\r\n    END IF;\r\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 4. Ensure handle_updated_at is using timezone('utc'::text, now()) globally\r\nCREATE OR REPLACE FUNCTION public.handle_updated_at()\r\n RETURNS trigger\r\n LANGUAGE plpgsql\r\n SECURITY DEFINER\r\nAS $function$\r\nBEGIN\r\n    NEW.updated_at = timezone('utc'::text, now());\r\n    RETURN NEW;\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 5. Additional column alignment for email_logs (ensure all possible columns are present)\r\n-- (Checked earlier, but ensuring robustness)\r\nALTER TABLE public.email_logs ADD COLUMN IF NOT EXISTS recipient_email TEXT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_logs ADD COLUMN IF NOT EXISTS template_version INTEGER","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"recipient_email\" of relation \"email_logs\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"42701","Message":"column \"template_version\" of relation \"email_logs\" already exists, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":7471,"Routine":"check_for_column_name_collision","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260216270000"},{"text":"comprehensive_drift_fix"},{"binary":"0000000100000000000000190000001200000001000000ab2d2d2046696e616c20636f6d70726568656e73697665206472696674207265736f6c7574696f6e206261736564206f6e2064656570206469766520696e746f2070726f64756374696f6e20736368656d612e0d0a2d2d205468697320616c69676e7320616c6c2072656d61696e696e672064697363726570616e6369657320696e20636f6c756d6e732c2064656661756c74732c20616e642074726967676572732e0d0a0d0a424547494e0000009c2d2d20312e20656d61696c5f74656d706c617465733a204d697373696e6720636f6c756d6e7320666f756e6420696e2070726f64756374696f6e0d0a414c544552205441424c45207075626c69632e656d61696c5f74656d706c617465732041444420434f4c554d4e204946204e4f542045584953545320616c6c6f775f7261775f68746d6c20424f4f4c45414e2044454641554c542066616c736500000062414c544552205441424c45207075626c69632e656d61696c5f74656d706c617465732041444420434f4c554d4e204946204e4f54204558495354532069735f617574685f637269746963616c20424f4f4c45414e2044454641554c542066616c736500000072414c544552205441424c45207075626c69632e656d61696c5f74656d706c617465732041444420434f4c554d4e204946204e4f542045584953545320616c6c6f776c6973745f66616c6c6261636b5f6b65797320544558545b5d2044454641554c542041525241595b5d3a3a746578745b5d00000063414c544552205441424c45207075626c69632e656d61696c5f74656d706c617465732041444420434f4c554d4e204946204e4f5420455849535453206e6f726d616c697a6174696f6e5f76657273696f6e20494e54454745522044454641554c54203100000063414c544552205441424c45207075626c69632e656d61696c5f74656d706c617465732041444420434f4c554d4e204946204e4f542045584953545320656469746f725f736368656d61204a534f4e422044454641554c5420277b7d273a3a6a736f6e62000000732d2d20456e73757265204e4f54204e554c4c20776865726520617070726f7072696174650d0a414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174657320414c54455220434f4c554d4e2069735f617574685f637269746963616c20534554204e4f54204e554c4c00000054414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174657320414c54455220434f4c554d4e20616c6c6f776c6973745f66616c6c6261636b5f6b65797320534554204e4f54204e554c4c00000052414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174657320414c54455220434f4c554d4e206e6f726d616c697a6174696f6e5f76657273696f6e20534554204e4f54204e554c4c0000004a414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174657320414c54455220434f4c554d4e20656469746f725f736368656d6120534554204e4f54204e554c4c000000ca2d2d20322e2061646d696e5f61756469745f6c6f673a20416c69676e2064656661756c747320616e64206e756c6c6162696c6974790d0a2d2d2050726f64756374696f6e207573657320757569645f67656e65726174655f7634282920616e6420656e666f726365732061646d696e5f757365725f69640d0a414c544552205441424c45207075626c69632e61646d696e5f61756469745f6c6f6720414c54455220434f4c554d4e206964205345542044454641554c5420757569645f67656e65726174655f763428290000004a414c544552205441424c45207075626c69632e61646d696e5f61756469745f6c6f6720414c54455220434f4c554d4e2061646d696e5f757365725f696420534554204e4f54204e554c4c000001882d2d20332e204d697373696e6720757064617465645f61742074726967676572730d0a2d2d20656d61696c5f7661726961626c655f72656769737472790d0a444f2024240d0a424547494e0d0a202020204946204e4f5420455849535453202853454c45435420312046524f4d2070675f747269676765722057484552452074676e616d65203d20277365745f757064617465645f61745f656d61696c5f7661726961626c655f72656769737472792729205448454e0d0a20202020202020204352454154452054524947474552207365745f757064617465645f61745f656d61696c5f7661726961626c655f7265676973747279200d0a20202020202020204245464f524520555044415445204f4e207075626c69632e656d61696c5f7661726961626c655f7265676973747279200d0a2020202020202020464f52204541434820524f5720455845435554452046554e4354494f4e207075626c69632e68616e646c655f757064617465645f617428293b0d0a20202020454e442049463b0d0a454e44202424000001692d2d20656d61696c5f74656d706c6174655f7661726961626c65730d0a444f2024240d0a424547494e0d0a202020204946204e4f5420455849535453202853454c45435420312046524f4d2070675f747269676765722057484552452074676e616d65203d20277365745f757064617465645f61745f656d61696c5f74656d706c6174655f7661726961626c65732729205448454e0d0a20202020202020204352454154452054524947474552207365745f757064617465645f61745f656d61696c5f74656d706c6174655f7661726961626c6573200d0a20202020202020204245464f524520555044415445204f4e207075626c69632e656d61696c5f74656d706c6174655f7661726961626c6573200d0a2020202020202020464f52204541434820524f5720455845435554452046554e4354494f4e207075626c69632e68616e646c655f757064617465645f617428293b0d0a20202020454e442049463b0d0a454e44202424000001292d2d20342e20456e737572652068616e646c655f757064617465645f6174206973207573696e672074696d657a6f6e652827757463273a3a746578742c206e6f7728292920676c6f62616c6c790d0a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e68616e646c655f757064617465645f617428290d0a2052455455524e5320747269676765720d0a204c414e475541474520706c706773716c0d0a20534543555249545920444546494e45520d0a4153202466756e6374696f6e240d0a424547494e0d0a202020204e45572e757064617465645f6174203d2074696d657a6f6e652827757463273a3a746578742c206e6f772829293b0d0a2020202052455455524e204e45573b0d0a454e443b0d0a2466756e6374696f6e24000000d62d2d20352e204164646974696f6e616c20636f6c756d6e20616c69676e6d656e7420666f7220656d61696c5f6c6f67732028656e7375726520616c6c20706f737369626c6520636f6c756d6e73206172652070726573656e74290d0a2d2d2028436865636b6564206561726c6965722c2062757420656e737572696e6720726f627573746e657373290d0a414c544552205441424c45207075626c69632e656d61696c5f6c6f67732041444420434f4c554d4e204946204e4f542045584953545320726563697069656e745f656d61696c20544558540000004f414c544552205441424c45207075626c69632e656d61696c5f6c6f67732041444420434f4c554d4e204946204e4f54204558495354532074656d706c6174655f76657273696f6e20494e544547455200000006434f4d4d4954"}],"ResultFormatCodes":[]}
NOTICE (42701): column "recipient_email" of relation "email_logs" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
NOTICE (42701): column "template_version" of relation "email_logs" already exists, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260216280000_storage_and_realtime_drift.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Resolve database drift for storage and realtime settings.\r\n-- Add missing storage bucket and realtime publication configurations.\r\n\r\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 1. Ensure 'public-assets' bucket exists\r\nINSERT INTO storage.buckets (id, name, public, avif_autodetection, file_size_limit, allowed_mime_types)\r\nVALUES ('public-assets', 'public-assets', true, false, null, null)\r\nON CONFLICT (id) DO NOTHING","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Add 'orders' table to supabase_realtime publication\r\n-- This enables realtime subscription for updates on orders table.\r\nDO $$\r\nBEGIN\r\n  IF NOT EXISTS (\r\n    SELECT 1\r\n    FROM pg_publication_tables\r\n    WHERE pubname = 'supabase_realtime'\r\n    AND tablename = 'orders'\r\n    AND schemaname = 'public'\r\n  ) THEN\r\n    ALTER PUBLICATION supabase_realtime ADD TABLE public.orders;\r\n  END IF;\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260216280000"},{"text":"storage_and_realtime_drift"},{"binary":"00000001000000000000001900000004000000010000008d2d2d205265736f6c766520646174616261736520647269667420666f722073746f7261676520616e64207265616c74696d652073657474696e67732e0d0a2d2d20416464206d697373696e672073746f72616765206275636b657420616e64207265616c74696d65207075626c69636174696f6e20636f6e66696775726174696f6e732e0d0a0d0a424547494e000000f42d2d20312e20456e7375726520277075626c69632d61737365747327206275636b6574206578697374730d0a494e5345525420494e544f2073746f726167652e6275636b657473202869642c206e616d652c207075626c69632c20617669665f6175746f646574656374696f6e2c2066696c655f73697a655f6c696d69742c20616c6c6f7765645f6d696d655f7479706573290d0a56414c5545532028277075626c69632d617373657473272c20277075626c69632d617373657473272c20747275652c2066616c73652c206e756c6c2c206e756c6c290d0a4f4e20434f4e464c494354202869642920444f204e4f5448494e47000001932d2d20322e2041646420276f726465727327207461626c6520746f2073757061626173655f7265616c74696d65207075626c69636174696f6e0d0a2d2d205468697320656e61626c6573207265616c74696d6520737562736372697074696f6e20666f722075706461746573206f6e206f7264657273207461626c652e0d0a444f2024240d0a424547494e0d0a20204946204e4f542045584953545320280d0a2020202053454c45435420310d0a2020202046524f4d2070675f7075626c69636174696f6e5f7461626c65730d0a202020205748455245207075626e616d65203d202773757061626173655f7265616c74696d65270d0a20202020414e44207461626c656e616d65203d20276f7264657273270d0a20202020414e4420736368656d616e616d65203d20277075626c6963270d0a202029205448454e0d0a20202020414c544552205055424c49434154494f4e2073757061626173655f7265616c74696d6520414444205441424c45207075626c69632e6f72646572733b0d0a2020454e442049463b0d0a454e443b0d0a242400000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260217064147_fix_rls_performance_warnings.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Fix multiple permissive policies performance warning\r\n-- We need to separate policies by role (anon vs authenticated) and action (select vs modification)\r\n-- to ensure only ONE policy applies per role/action combination.\r\n-- Note: PostgreSQL CREATE POLICY supports only ONE action or ALL. We must split commands.\r\n\r\n-- =========================================================================\r\n-- 1. PRODUCTS\r\n-- =========================================================================\r\n\r\n-- Drop existing policies completely to start fresh\r\nDROP POLICY IF EXISTS \"Public read active products\" ON public.products","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins manage products\" ON public.products","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins view all products\" ON public.products","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Policy A: Anon (Unauthenticated) READ\r\nCREATE POLICY \"Anon read active products\"\r\nON public.products FOR SELECT\r\nTO anon\r\nUSING (is_active = true)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Policy B: Authenticated READ (Merged logic: Active OR Admin)\r\n-- This covers both regular authenticated users (who see active) and admins (who see all)\r\nCREATE POLICY \"Authenticated read products\"\r\nON public.products FOR SELECT\r\nTO authenticated\r\nUSING (is_active = true OR public.is_admin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Policy C: Admins WRITE (INSERT)\r\nCREATE POLICY \"Admins insert products\"\r\nON public.products FOR INSERT\r\nTO authenticated\r\nWITH CHECK (public.is_admin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Policy D: Admins WRITE (UPDATE)\r\nCREATE POLICY \"Admins update products\"\r\nON public.products FOR UPDATE\r\nTO authenticated\r\nUSING (public.is_admin_user())\r\nWITH CHECK (public.is_admin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Policy E: Admins WRITE (DELETE)\r\nCREATE POLICY \"Admins delete products\"\r\nON public.products FOR DELETE\r\nTO authenticated\r\nUSING (public.is_admin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- =========================================================================\r\n-- 2. PROMO CODES\r\n-- =========================================================================\r\n\r\n-- Drop existing policies completely\r\nDROP POLICY IF EXISTS \"Public read active promo codes\" ON public.promo_codes","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins manage promo codes\" ON public.promo_codes","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins view all promo codes\" ON public.promo_codes","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Policy A: Anon (Unauthenticated) READ\r\nCREATE POLICY \"Anon read active promo codes\"\r\nON public.promo_codes FOR SELECT\r\nTO anon\r\nUSING (is_active = true)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Policy B: Authenticated READ (Merged logic: Active OR Admin)\r\nCREATE POLICY \"Authenticated read promo codes\"\r\nON public.promo_codes FOR SELECT\r\nTO authenticated\r\nUSING (is_active = true OR public.is_admin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Policy C: Admins WRITE (INSERT)\r\nCREATE POLICY \"Admins insert promo codes\"\r\nON public.promo_codes FOR INSERT\r\nTO authenticated\r\nWITH CHECK (public.is_admin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Policy D: Admins WRITE (UPDATE)\r\nCREATE POLICY \"Admins update promo codes\"\r\nON public.promo_codes FOR UPDATE\r\nTO authenticated\r\nUSING (public.is_admin_user())\r\nWITH CHECK (public.is_admin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Policy E: Admins WRITE (DELETE)\r\nCREATE POLICY \"Admins delete promo codes\"\r\nON public.promo_codes FOR DELETE\r\nTO authenticated\r\nUSING (public.is_admin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260217064147"},{"text":"fix_rls_performance_warnings"},{"binary":"0000000100000000000000190000001000000001000002682d2d20466978206d756c7469706c65207065726d69737369766520706f6c696369657320706572666f726d616e6365207761726e696e670d0a2d2d205765206e65656420746f20736570617261746520706f6c696369657320627920726f6c652028616e6f6e2076732061757468656e746963617465642920616e6420616374696f6e202873656c656374207673206d6f64696669636174696f6e290d0a2d2d20746f20656e73757265206f6e6c79204f4e4520706f6c696379206170706c6965732070657220726f6c652f616374696f6e20636f6d62696e6174696f6e2e0d0a2d2d204e6f74653a20506f737467726553514c2043524541544520504f4c49435920737570706f727473206f6e6c79204f4e4520616374696f6e206f7220414c4c2e205765206d7573742073706c697420636f6d6d616e64732e0d0a0d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20312e2050524f44554354530d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d2044726f70206578697374696e6720706f6c696369657320636f6d706c6574656c7920746f2073746172742066726573680d0a44524f5020504f4c4943592049462045584953545320225075626c69632072656164206163746976652070726f647563747322204f4e207075626c69632e70726f64756374730000004144524f5020504f4c49435920494620455849535453202241646d696e73206d616e6167652070726f647563747322204f4e207075626c69632e70726f64756374730000004344524f5020504f4c49435920494620455849535453202241646d696e73207669657720616c6c2070726f647563747322204f4e207075626c69632e70726f6475637473000000952d2d20506f6c69637920413a20416e6f6e2028556e61757468656e746963617465642920524541440d0a43524541544520504f4c4943592022416e6f6e2072656164206163746976652070726f6475637473220d0a4f4e207075626c69632e70726f647563747320464f522053454c4543540d0a544f20616e6f6e0d0a5553494e47202869735f616374697665203d2074727565290000012c2d2d20506f6c69637920423a2041757468656e74696361746564205245414420284d6572676564206c6f6769633a20416374697665204f522041646d696e290d0a2d2d205468697320636f7665727320626f746820726567756c61722061757468656e74696361746564207573657273202877686f20736565206163746976652920616e642061646d696e73202877686f2073656520616c6c290d0a43524541544520504f4c494359202241757468656e7469636174656420726561642070726f6475637473220d0a4f4e207075626c69632e70726f647563747320464f522053454c4543540d0a544f2061757468656e746963617465640d0a5553494e47202869735f616374697665203d2074727565204f52207075626c69632e69735f61646d696e5f75736572282929000000a02d2d20506f6c69637920433a2041646d696e732057524954452028494e53455254290d0a43524541544520504f4c494359202241646d696e7320696e736572742070726f6475637473220d0a4f4e207075626c69632e70726f647563747320464f5220494e534552540d0a544f2061757468656e746963617465640d0a5749544820434845434b20287075626c69632e69735f61646d696e5f75736572282929000000c02d2d20506f6c69637920443a2041646d696e732057524954452028555044415445290d0a43524541544520504f4c494359202241646d696e73207570646174652070726f6475637473220d0a4f4e207075626c69632e70726f647563747320464f52205550444154450d0a544f2061757468656e746963617465640d0a5553494e4720287075626c69632e69735f61646d696e5f757365722829290d0a5749544820434845434b20287075626c69632e69735f61646d696e5f757365722829290000009b2d2d20506f6c69637920453a2041646d696e73205752495445202844454c455445290d0a43524541544520504f4c494359202241646d696e732064656c6574652070726f6475637473220d0a4f4e207075626c69632e70726f647563747320464f522044454c4554450d0a544f2061757468656e746963617465640d0a5553494e4720287075626c69632e69735f61646d696e5f75736572282929000001232d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20322e2050524f4d4f20434f4445530d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d2044726f70206578697374696e6720706f6c696369657320636f6d706c6574656c790d0a44524f5020504f4c4943592049462045584953545320225075626c69632072656164206163746976652070726f6d6f20636f64657322204f4e207075626c69632e70726f6d6f5f636f6465730000004744524f5020504f4c49435920494620455849535453202241646d696e73206d616e6167652070726f6d6f20636f64657322204f4e207075626c69632e70726f6d6f5f636f6465730000004944524f5020504f4c49435920494620455849535453202241646d696e73207669657720616c6c2070726f6d6f20636f64657322204f4e207075626c69632e70726f6d6f5f636f6465730000009b2d2d20506f6c69637920413a20416e6f6e2028556e61757468656e746963617465642920524541440d0a43524541544520504f4c4943592022416e6f6e2072656164206163746976652070726f6d6f20636f646573220d0a4f4e207075626c69632e70726f6d6f5f636f64657320464f522053454c4543540d0a544f20616e6f6e0d0a5553494e47202869735f616374697665203d207472756529000000d72d2d20506f6c69637920423a2041757468656e74696361746564205245414420284d6572676564206c6f6769633a20416374697665204f522041646d696e290d0a43524541544520504f4c494359202241757468656e7469636174656420726561642070726f6d6f20636f646573220d0a4f4e207075626c69632e70726f6d6f5f636f64657320464f522053454c4543540d0a544f2061757468656e746963617465640d0a5553494e47202869735f616374697665203d2074727565204f52207075626c69632e69735f61646d696e5f75736572282929000000a62d2d20506f6c69637920433a2041646d696e732057524954452028494e53455254290d0a43524541544520504f4c494359202241646d696e7320696e736572742070726f6d6f20636f646573220d0a4f4e207075626c69632e70726f6d6f5f636f64657320464f5220494e534552540d0a544f2061757468656e746963617465640d0a5749544820434845434b20287075626c69632e69735f61646d696e5f75736572282929000000c62d2d20506f6c69637920443a2041646d696e732057524954452028555044415445290d0a43524541544520504f4c494359202241646d696e73207570646174652070726f6d6f20636f646573220d0a4f4e207075626c69632e70726f6d6f5f636f64657320464f52205550444154450d0a544f2061757468656e746963617465640d0a5553494e4720287075626c69632e69735f61646d696e5f757365722829290d0a5749544820434845434b20287075626c69632e69735f61646d696e5f75736572282929000000a12d2d20506f6c69637920453a2041646d696e73205752495445202844454c455445290d0a43524541544520504f4c494359202241646d696e732064656c6574652070726f6d6f20636f646573220d0a4f4e207075626c69632e70726f6d6f5f636f64657320464f522044454c4554450d0a544f2061757468656e746963617465640d0a5553494e4720287075626c69632e69735f61646d696e5f75736572282929"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260217064405_fix_rls_no_policy.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Fix RLS Enabled No Policy warnings\r\n-- 1. payment_manual_review_queue\r\n-- 2. payment_webhook_events\r\n\r\n-- =========================================================================\r\n-- 1. payment_manual_review_queue\r\n-- =========================================================================\r\n\r\n-- Admins should be able to view and manage the review queue\r\nDROP POLICY IF EXISTS \"Admins can manage payment reviews\" ON public.payment_manual_review_queue","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins can manage payment reviews\"\r\nON public.payment_manual_review_queue\r\nFOR ALL\r\nTO authenticated\r\nUSING (public.is_admin_user())\r\nWITH CHECK (public.is_admin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- =========================================================================\r\n-- 2. payment_webhook_events\r\n-- =========================================================================\r\n\r\n-- Admins should be able to view webhook logs for debugging\r\nDROP POLICY IF EXISTS \"Admins can view webhook events\" ON public.payment_webhook_events","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins can view webhook events\"\r\nON public.payment_webhook_events\r\nFOR SELECT\r\nTO authenticated\r\nUSING (public.is_admin_user())","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- No public access or client-side insert allowed for standard users.\r\n-- Service role (Edge Functions) bypasses RLS, so webhook ingestion will still work.","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins can manage payment reviews\" for relation \"public.payment_manual_review_queue\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Admins can manage payment reviews" for relation "public.payment_manual_review_queue" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260217064405"},{"text":"fix_rls_no_policy"},{"binary":"0000000100000000000000190000000500000001000001c82d2d2046697820524c5320456e61626c6564204e6f20506f6c696379207761726e696e67730d0a2d2d20312e207061796d656e745f6d616e75616c5f7265766965775f71756575650d0a2d2d20322e207061796d656e745f776562686f6f6b5f6576656e74730d0a0d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20312e207061796d656e745f6d616e75616c5f7265766965775f71756575650d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d2041646d696e732073686f756c642062652061626c6520746f207669657720616e64206d616e61676520746865207265766965772071756575650d0a44524f5020504f4c49435920494620455849535453202241646d696e732063616e206d616e616765207061796d656e74207265766965777322204f4e207075626c69632e7061796d656e745f6d616e75616c5f7265766965775f7175657565000000b843524541544520504f4c494359202241646d696e732063616e206d616e616765207061796d656e742072657669657773220d0a4f4e207075626c69632e7061796d656e745f6d616e75616c5f7265766965775f71756575650d0a464f5220414c4c0d0a544f2061757468656e746963617465640d0a5553494e4720287075626c69632e69735f61646d696e5f757365722829290d0a5749544820434845434b20287075626c69632e69735f61646d696e5f75736572282929000001502d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a2d2d20322e207061796d656e745f776562686f6f6b5f6576656e74730d0a2d2d203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0d0a0d0a2d2d2041646d696e732073686f756c642062652061626c6520746f207669657720776562686f6f6b206c6f677320666f7220646562756767696e670d0a44524f5020504f4c49435920494620455849535453202241646d696e732063616e207669657720776562686f6f6b206576656e747322204f4e207075626c69632e7061796d656e745f776562686f6f6b5f6576656e74730000008e43524541544520504f4c494359202241646d696e732063616e207669657720776562686f6f6b206576656e7473220d0a4f4e207075626c69632e7061796d656e745f776562686f6f6b5f6576656e74730d0a464f522053454c4543540d0a544f2061757468656e746963617465640d0a5553494e4720287075626c69632e69735f61646d696e5f757365722829290000009b2d2d204e6f207075626c696320616363657373206f7220636c69656e742d7369646520696e7365727420616c6c6f77656420666f72207374616e646172642075736572732e0d0a2d2d205365727669636520726f6c652028456467652046756e6374696f6e732920627970617373657320524c532c20736f20776562686f6f6b20696e67657374696f6e2077696c6c207374696c6c20776f726b2e"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"EmptyQueryResponse"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260217085618_resolve_public_schema_drift.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Reconcile remaining public schema drift detected by security-gate\r\n-- Source: artifacts/drift-22090547121.sql\r\n-- Goal: make local migration state converge with linked project schema (idempotent-safe)\r\n\r\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- ---------------------------------------------------------------------------\r\n-- 1) Policy alignment: remove policies that exist in local shadow but not linked\r\n-- ---------------------------------------------------------------------------\r\nDROP POLICY IF EXISTS \"Admins can insert status history\" ON public.order_status_history","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users can view order status history\" ON public.order_status_history","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can update orders\" ON public.orders","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can view review queue\" ON public.payment_manual_review_queue","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Allow admin insert access\" ON public.products","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Allow admin update access\" ON public.products","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Allow public read access\" ON public.products","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Profiles updatable by owners and admins\" ON public.profiles","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Viewable by admins or public if active\" ON public.promo_codes","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admin update access\" ON public.site_settings","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Public read access\" ON public.site_settings","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins can perform all actions on tickets\" ON public.support_tickets","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Anyone can insert tickets\" ON public.support_tickets","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users can view own tickets\" ON public.support_tickets","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"support_tickets_admin_update\" ON public.support_tickets","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users read own payment intents\" ON public.payment_intents","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Authenticated users can insert promo code attempts\" ON public.promo_code_attempts","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- ---------------------------------------------------------------------------\r\n-- 2) Constraint / index / function cleanup\r\n-- ---------------------------------------------------------------------------\r\nALTER TABLE public.email_template_variables DROP CONSTRAINT IF EXISTS email_template_variables_insertion_order_check","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_variable_registry DROP CONSTRAINT IF EXISTS email_variable_registry_key_format","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_variable_registry DROP CONSTRAINT IF EXISTS email_variable_registry_render_policy_check","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_variable_registry DROP CONSTRAINT IF EXISTS email_variable_registry_value_type_check","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_template_variables DROP CONSTRAINT IF EXISTS email_template_variables_variable_key_fkey","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.orders DROP CONSTRAINT IF EXISTS orders_currency_tl_only","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP FUNCTION IF EXISTS public.deduct_stock_on_order()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP FUNCTION IF EXISTS public.manage_stock_on_status_change()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_variable_registry DROP CONSTRAINT IF EXISTS email_variable_registry_pkey","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP INDEX IF EXISTS public.email_variable_registry_pkey","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- ---------------------------------------------------------------------------\r\n-- 3) Column defaults / nullability / type alignment\r\n-- ---------------------------------------------------------------------------\r\nALTER TABLE public.email_logs ADD COLUMN IF NOT EXISTS metadata jsonb DEFAULT '{}'::jsonb","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_logs ALTER COLUMN metadata SET DEFAULT '{}'::jsonb","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_template_variables ALTER COLUMN created_at SET DEFAULT now()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_template_variables ALTER COLUMN created_at DROP NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_template_variables ALTER COLUMN insertion_order DROP NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_template_variables ALTER COLUMN is_enabled DROP NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_template_variables ALTER COLUMN is_required SET DEFAULT true","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_template_variables ALTER COLUMN is_required DROP NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_template_variables ALTER COLUMN updated_at SET DEFAULT now()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_template_variables ALTER COLUMN updated_at DROP NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP FUNCTION"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"index \"email_variable_registry_pkey\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"tablecmds.c","Line":1427,"Routine":"DropErrorMsgNonExistent","UnknownFields":null}
NOTICE (00000): index "email_variable_registry_pkey" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_templates ALTER COLUMN unresolved_policy DROP NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_variable_registry ADD COLUMN IF NOT EXISTS category text DEFAULT 'general'::text","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_variable_registry ALTER COLUMN category SET DEFAULT 'general'::text","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_variable_registry ADD COLUMN IF NOT EXISTS id uuid NOT NULL DEFAULT gen_random_uuid()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_variable_registry ALTER COLUMN id SET DEFAULT gen_random_uuid()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_variable_registry ALTER COLUMN created_at SET DEFAULT now()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_variable_registry ALTER COLUMN created_at DROP NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_variable_registry ALTER COLUMN is_active DROP NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_variable_registry ALTER COLUMN is_sensitive DROP NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_variable_registry ALTER COLUMN label DROP NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_variable_registry ALTER COLUMN render_policy DROP NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_variable_registry ALTER COLUMN updated_at SET DEFAULT now()","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_variable_registry ALTER COLUMN updated_at DROP NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.email_variable_registry ALTER COLUMN value_type DROP NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.order_status_history ALTER COLUMN order_id SET NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.order_status_history ALTER COLUMN status TYPE character varying(50) USING status::character varying(50)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.products ALTER COLUMN price TYPE numeric(10,2) USING price::numeric(10,2)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.products ALTER COLUMN stock SET NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.profiles ALTER COLUMN user_type SET NOT NULL","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.promo_codes ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.site_settings DROP COLUMN IF EXISTS created_at","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- ---------------------------------------------------------------------------\r\n-- 4) Recreate constraints/indexes expected by linked schema\r\n-- ---------------------------------------------------------------------------\r\nCREATE UNIQUE INDEX IF NOT EXISTS email_variable_registry_key_key ON public.email_variable_registry USING btree (key)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE UNIQUE INDEX IF NOT EXISTS email_variable_registry_pkey ON public.email_variable_registry USING btree (id)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DO $$\r\nBEGIN\r\n  IF NOT EXISTS (\r\n    SELECT 1\r\n    FROM pg_constraint\r\n    WHERE conname = 'email_variable_registry_pkey'\r\n      AND conrelid = 'public.email_variable_registry'::regclass\r\n  ) THEN\r\n    ALTER TABLE public.email_variable_registry\r\n      ADD CONSTRAINT email_variable_registry_pkey PRIMARY KEY USING INDEX email_variable_registry_pkey;\r\n  END IF;\r\nEND\r\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DO $$\r\nBEGIN\r\n  IF NOT EXISTS (\r\n    SELECT 1\r\n    FROM pg_constraint\r\n    WHERE conname = 'email_variable_registry_key_key'\r\n      AND conrelid = 'public.email_variable_registry'::regclass\r\n  ) THEN\r\n    ALTER TABLE public.email_variable_registry\r\n      ADD CONSTRAINT email_variable_registry_key_key UNIQUE USING INDEX email_variable_registry_key_key;\r\n  END IF;\r\nEND\r\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DO $$\r\nBEGIN\r\n  IF NOT EXISTS (\r\n    SELECT 1\r\n    FROM pg_constraint\r\n    WHERE conname = 'email_template_variables_variable_key_fkey'\r\n      AND conrelid = 'public.email_template_variables'::regclass\r\n  ) THEN\r\n    ALTER TABLE public.email_template_variables\r\n      ADD CONSTRAINT email_template_variables_variable_key_fkey\r\n      FOREIGN KEY (variable_key)\r\n      REFERENCES public.email_variable_registry(key)\r\n      ON DELETE CASCADE\r\n      NOT VALID;\r\n  END IF;\r\n\r\n  IF EXISTS (\r\n    SELECT 1\r\n    FROM pg_constraint\r\n    WHERE conname = 'email_template_variables_variable_key_fkey'\r\n      AND conrelid = 'public.email_template_variables'::regclass\r\n      AND NOT convalidated\r\n  ) THEN\r\n    ALTER TABLE public.email_template_variables\r\n      VALIDATE CONSTRAINT email_template_variables_variable_key_fkey;\r\n  END IF;\r\nEND\r\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DO $$\r\nBEGIN\r\n  IF NOT EXISTS (\r\n    SELECT 1\r\n    FROM pg_constraint\r\n    WHERE conname = 'orders_currency_tl_only'\r\n      AND conrelid = 'public.orders'::regclass\r\n  ) THEN\r\n    ALTER TABLE public.orders\r\n      ADD CONSTRAINT orders_currency_tl_only CHECK ((currency = 'TL'::text)) NOT VALID;\r\n  END IF;\r\n\r\n  IF EXISTS (\r\n    SELECT 1\r\n    FROM pg_constraint\r\n    WHERE conname = 'orders_currency_tl_only'\r\n      AND conrelid = 'public.orders'::regclass\r\n      AND NOT convalidated\r\n  ) THEN\r\n    ALTER TABLE public.orders\r\n      VALIDATE CONSTRAINT orders_currency_tl_only;\r\n  END IF;\r\nEND\r\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- ---------------------------------------------------------------------------\r\n-- 5) Function definition alignment\r\n-- ---------------------------------------------------------------------------\r\nSET check_function_bodies = off","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.prune_expired_otp_codes()\r\n RETURNS void\r\n LANGUAGE plpgsql\r\n SET search_path TO 'public'\r\nAS $function$\r\nBEGIN\r\n    DELETE FROM public.otp_codes WHERE expires_at \u003c now();\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.validate_checkout(p_product_slug text, p_quantity integer, p_promo_code text DEFAULT NULL::text)\r\n RETURNS json\r\n LANGUAGE plpgsql\r\n SECURITY DEFINER\r\n SET search_path TO 'public', 'pg_catalog'\r\nAS $function$\r\nDECLARE\r\n    v_user_id UUID;\r\n    v_profile_complete BOOLEAN;\r\n    v_product RECORD;\r\n    v_subtotal DECIMAL(10, 2);\r\n    v_vat_rate DECIMAL(5, 4) := 0.20;\r\n    v_vat_amount DECIMAL(10, 2);\r\n    v_total DECIMAL(10, 2);\r\n    v_order_id UUID;\r\nBEGIN\r\n    -- 1. Kullanc dorulama\r\n    v_user_id := auth.uid();\r\n\r\n    IF v_user_id IS NULL THEN\r\n        RETURN json_build_object(\r\n            'success', false,\r\n            'error', 'UNAUTHORIZED',\r\n            'message', 'Oturum amanz gerekiyor'\r\n        );\r\n    END IF;\r\n\r\n    -- 2. Profil tamamlanm m kontrol et\r\n    SELECT profile_complete INTO v_profile_complete\r\n    FROM profiles\r\n    WHERE id = v_user_id;\r\n\r\n    IF v_profile_complete IS NULL OR v_profile_complete = false THEN\r\n        RETURN json_build_object(\r\n            'success', false,\r\n            'error', 'PROFILE_INCOMPLETE',\r\n            'message', 'Sipari vermek iin profilinizi tamamlamanz gerekiyor'\r\n        );\r\n    END IF;\r\n\r\n    -- 3. rn bilgilerini al ve dorula\r\n    SELECT * INTO v_product\r\n    FROM products\r\n    WHERE slug = p_product_slug AND is_active = true;\r\n\r\n    IF v_product IS NULL THEN\r\n        RETURN json_build_object(\r\n            'success', false,\r\n            'error', 'PRODUCT_NOT_FOUND',\r\n            'message', 'rn bulunamad veya satta deil'\r\n        );\r\n    END IF;\r\n\r\n    -- 4. Miktar kontrol\r\n    IF p_quantity \u003c 1 OR p_quantity \u003e 10 THEN\r\n        RETURN json_build_object(\r\n            'success', false,\r\n            'error', 'INVALID_QUANTITY',\r\n            'message', 'Geersiz miktar (1-10 aras olmal)'\r\n        );\r\n    END IF;\r\n\r\n    -- 5. Stok kontrol\r\n    IF v_product.stock \u003c p_quantity THEN\r\n        RETURN json_build_object(\r\n            'success', false,\r\n            'error', 'INSUFFICIENT_STOCK',\r\n            'message', 'Yeterli stok yok. Mevcut stok: ' || v_product.stock\r\n        );\r\n    END IF;\r\n\r\n    -- 6. Fiyat hesaplama (SUNUCU TARAFINDA!)\r\n    v_subtotal := v_product.price * p_quantity;\r\n    v_vat_amount := v_subtotal * v_vat_rate;\r\n    v_total := v_subtotal + v_vat_amount;\r\n\r\n    -- 7. Sipari olutur\r\n    INSERT INTO orders (\r\n        user_id,\r\n        product_id,\r\n        quantity,\r\n        unit_price,\r\n        subtotal,\r\n        vat_amount,\r\n        total,\r\n        status,\r\n        promo_code\r\n    ) VALUES (\r\n        v_user_id,\r\n        v_product.id,\r\n        p_quantity,\r\n        v_product.price,\r\n        v_subtotal,\r\n        v_vat_amount,\r\n        v_total,\r\n        'pending',\r\n        p_promo_code\r\n    )\r\n    RETURNING id INTO v_order_id;\r\n\r\n    -- 8. Stok gncelle\r\n    UPDATE products\r\n    SET stock = stock - p_quantity\r\n    WHERE id = v_product.id;\r\n\r\n    -- 9. Baarl yant\r\n    RETURN json_build_object(\r\n        'success', true,\r\n        'order_id', v_order_id,\r\n        'product_name', v_product.name,\r\n        'quantity', p_quantity,\r\n        'unit_price', v_product.price,\r\n        'subtotal', v_subtotal,\r\n        'vat_amount', v_vat_amount,\r\n        'total', v_total,\r\n        'message', 'Sipari baaryla oluturuldu'\r\n    );\r\n\r\nEXCEPTION\r\n    WHEN OTHERS THEN\r\n        -- Don't expose SQL error details - return generic message\r\n        RETURN json_build_object(\r\n            'success', false,\r\n            'error', 'SERVER_ERROR',\r\n            'message', 'lem srasnda bir hata olutu. Ltfen tekrar deneyin.'\r\n        );\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.admin_update_order_status(p_order_id uuid, p_new_status text, p_note text DEFAULT NULL::text)\r\n RETURNS boolean\r\n LANGUAGE plpgsql\r\n SECURITY DEFINER\r\n SET search_path TO 'public', 'pg_catalog'\r\nAS $function$\r\nDECLARE\r\n    v_old_status TEXT;\r\n    v_order_details JSONB;\r\n    v_payment_status TEXT;\r\n    v_payment_method TEXT;\r\n    v_payment_intent_id UUID;\r\n    v_item RECORD;\r\nBEGIN\r\n    -- 1. Admin check (Assumes function exists or falls back to role check)\r\n    IF (SELECT count(*) FROM public.profiles WHERE id = auth.uid() AND is_admin = true) = 0 THEN\r\n        RAISE EXCEPTION 'Unauthorized: Admin permission required';\r\n    END IF;\r\n\r\n    -- 2. Fetch current order data\r\n    SELECT status, order_details, payment_status, payment_method, payment_intent_id\r\n    INTO v_old_status, v_order_details, v_payment_status, v_payment_method, v_payment_intent_id\r\n    FROM public.orders\r\n    WHERE id = p_order_id;\r\n\r\n    IF NOT FOUND THEN\r\n        RAISE EXCEPTION 'Order not found';\r\n    END IF;\r\n\r\n    -- 3. Transition validation\r\n    IF v_old_status = 'cancelled' THEN\r\n        RAISE EXCEPTION 'Cancelled orders cannot be updated';\r\n    END IF;\r\n\r\n    IF p_new_status NOT IN ('pending', 'processing', 'preparing', 'shipped', 'delivered', 'cancelled') THEN\r\n        RAISE EXCEPTION 'Invalid status: %', p_new_status;\r\n    END IF;\r\n\r\n    -- 4. Cancellation Logic (Stock Restore)\r\n    IF p_new_status = 'cancelled' THEN\r\n        -- Financial status is intent-driven for card payments.\r\n        IF v_payment_status = 'paid' THEN\r\n            IF v_payment_method = 'credit_card' AND v_payment_intent_id IS NOT NULL THEN\r\n                NULL; -- Do nothing, refund via payment intent API\r\n            ELSE\r\n                UPDATE public.orders SET payment_status = 'refunded' WHERE id = p_order_id;\r\n            END IF;\r\n        END IF;\r\n\r\n        -- Restore stock for items\r\n        FOR v_item IN\r\n            SELECT *\r\n            FROM jsonb_to_recordset(v_order_details-\u003e'items') AS x(product_id UUID, quantity INTEGER)\r\n        LOOP\r\n            IF v_item.product_id IS NOT NULL THEN\r\n                UPDATE public.products\r\n                SET stock = stock + v_item.quantity,\r\n                    updated_at = NOW()\r\n                WHERE id = v_item.product_id;\r\n            END IF;\r\n        END LOOP;\r\n\r\n        -- Update reason\r\n        UPDATE public.orders SET cancellation_reason = p_note WHERE id = p_order_id;\r\n    END IF;\r\n\r\n    -- 5. Update Order\r\n    UPDATE public.orders\r\n    SET status = p_new_status, updated_at = NOW()\r\n    WHERE id = p_order_id;\r\n\r\n    -- 6. Insert into Order Status History\r\n    INSERT INTO public.order_status_history (order_id, status, note, created_by)\r\n    VALUES (p_order_id, p_new_status, p_note, auth.uid());\r\n\r\n    -- 7. Insert into Admin Audit Log (if table exists)\r\n    IF EXISTS (SELECT FROM information_schema.tables WHERE table_name = 'admin_audit_log') THEN\r\n        INSERT INTO public.admin_audit_log (admin_user_id, action, target_table, target_id, details)\r\n        VALUES (\r\n            auth.uid(),\r\n            'update_order_status',\r\n            'orders',\r\n            p_order_id,\r\n            jsonb_build_object(\r\n                'old_status', v_old_status,\r\n                'new_status', p_new_status,\r\n                'note', p_note\r\n            )\r\n        );\r\n    END IF;\r\n\r\n    RETURN FOUND;\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.get_dashboard_stats(start_date timestamp with time zone, end_date timestamp with time zone)\r\n RETURNS json\r\n LANGUAGE plpgsql\r\n SECURITY DEFINER\r\n SET search_path TO 'public'\r\nAS $function$\r\nDECLARE\r\n    total_revenue numeric;\r\n    order_count int;\r\n    cancelled_count int;\r\n    daily_sales json;\r\n    is_admin_user boolean;\r\nBEGIN\r\n    -- Check if user is admin\r\n    SELECT is_admin INTO is_admin_user FROM profiles WHERE id = auth.uid();\r\n\r\n    IF is_admin_user IS NOT TRUE THEN\r\n        RAISE EXCEPTION 'Unauthorized access';\r\n    END IF;\r\n\r\n    -- Calculate aggregate stats (active orders)\r\n    SELECT\r\n        COALESCE(SUM((order_details-\u003e\u003e'total')::numeric), 0),\r\n        COUNT(*)\r\n    INTO total_revenue, order_count\r\n    FROM orders\r\n    WHERE created_at \u003e= start_date AND created_at \u003c= end_date\r\n    AND status != 'cancelled';\r\n\r\n    -- Calculate cancelled count\r\n    SELECT COUNT(*)\r\n    INTO cancelled_count\r\n    FROM orders\r\n    WHERE created_at \u003e= start_date AND created_at \u003c= end_date\r\n    AND status = 'cancelled';\r\n\r\n    -- Calculate daily sales breakdown (excluding cancelled)\r\n    SELECT json_agg(t) INTO daily_sales\r\n    FROM (\r\n        SELECT\r\n            date_trunc('day', created_at) as date,\r\n            COUNT(*) as count,\r\n            SUM((order_details-\u003e\u003e'total')::numeric) as revenue\r\n        FROM orders\r\n        WHERE created_at \u003e= start_date AND created_at \u003c= end_date\r\n        AND status != 'cancelled'\r\n        GROUP BY 1\r\n        ORDER BY 1\r\n    ) t;\r\n\r\n    RETURN json_build_object(\r\n        'total_revenue', total_revenue,\r\n        'order_count', order_count,\r\n        'cancelled_count', cancelled_count,\r\n        'daily_sales', COALESCE(daily_sales, '[]'::json)\r\n    );\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.handle_new_order_promo()\r\n RETURNS trigger\r\n LANGUAGE plpgsql\r\n SECURITY DEFINER\r\n SET search_path TO 'public', 'pg_catalog'\r\nAS $function$\r\nDECLARE\r\n  v_code text;\r\n  v_discount numeric;\r\n  v_promo_id uuid;\r\n  v_current_usage int;\r\n  v_limit int;\r\nBEGIN\r\n  -- Extract promo code from JSONB\r\n  v_code := NEW.order_details-\u003e\u003e'promo_code';\r\n  v_discount := (NEW.order_details-\u003e\u003e'discount')::numeric;\r\n\r\n  -- If no code, exit\r\n  IF v_code IS NULL OR v_code = '' THEN\r\n    RETURN NEW;\r\n  END IF;\r\n\r\n  -- Find promo code (Locking)\r\n  SELECT id, usage_count, usage_limit INTO v_promo_id, v_current_usage, v_limit\r\n  FROM promo_codes\r\n  WHERE code ILIKE v_code\r\n  FOR UPDATE;\r\n\r\n  IF v_promo_id IS NOT NULL THEN\r\n    -- Increment usage\r\n    UPDATE promo_codes\r\n    SET usage_count = COALESCE(usage_count, 0) + 1\r\n    WHERE id = v_promo_id;\r\n\r\n    -- Insert log\r\n    INSERT INTO promo_logs (promo_code_id, order_id, user_id, discount_amount)\r\n    VALUES (v_promo_id, NEW.id, NEW.user_id, v_discount);\r\n  END IF;\r\n\r\n  RETURN NEW;\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.handle_updated_at()\r\n RETURNS trigger\r\n LANGUAGE plpgsql\r\n SECURITY DEFINER\r\n SET search_path TO ''\r\nAS $function$\r\nBEGIN\r\n    NEW.updated_at = timezone('utc'::text, now());\r\n    RETURN NEW;\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.is_admin_user(user_id uuid)\r\n RETURNS boolean\r\n LANGUAGE plpgsql\r\n STABLE SECURITY DEFINER\r\n SET search_path TO 'public'\r\nAS $function$\r\nDECLARE\r\n  admin_status boolean;\r\nBEGIN\r\n  -- Direct column access without triggering policy checks\r\n  SELECT is_admin INTO admin_status\r\n  FROM public.profiles\r\n  WHERE id = user_id\r\n  LIMIT 1;\r\n\r\n  RETURN COALESCE(admin_status, false);\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- ---------------------------------------------------------------------------\r\n-- 6) Policies present in linked schema but missing from local shadow\r\n-- ---------------------------------------------------------------------------\r\nDROP POLICY IF EXISTS \"Anyone can read settings\" ON public.site_settings","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Anyone can read settings\"\r\nON public.site_settings\r\nAS PERMISSIVE\r\nFOR SELECT\r\nTO public\r\nUSING (true)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Admins manage stock reservations\" ON public.stock_reservations","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Admins manage stock reservations\"\r\nON public.stock_reservations\r\nAS PERMISSIVE\r\nFOR ALL\r\nTO authenticated\r\nUSING ((SELECT public.is_admin_user() AS is_admin_user))","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"support_tickets_update\" ON public.support_tickets","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"support_tickets_update\"\r\nON public.support_tickets\r\nAS PERMISSIVE\r\nFOR UPDATE\r\nTO authenticated\r\nUSING (((user_id = (SELECT auth.uid() AS uid)) OR (SELECT public.is_admin_user() AS is_admin_user)))\r\nWITH CHECK (((user_id = (SELECT auth.uid() AS uid)) OR (SELECT public.is_admin_user() AS is_admin_user)))","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users read own payment intents\" ON public.payment_intents","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Users read own payment intents\"\r\nON public.payment_intents\r\nAS PERMISSIVE\r\nFOR SELECT\r\nTO authenticated\r\nUSING (((SELECT auth.uid() AS uid) = user_id))","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Authenticated users can insert promo code attempts\" ON public.promo_code_attempts","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Authenticated users can insert promo code attempts\"\r\nON public.promo_code_attempts\r\nAS PERMISSIVE\r\nFOR INSERT\r\nTO authenticated\r\nWITH CHECK ((user_id = (SELECT auth.uid() AS uid)))","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260217085618"},{"text":"resolve_public_schema_drift"},{"binary":"0000000100000000000000190000005400000001000000d42d2d205265636f6e63696c652072656d61696e696e67207075626c696320736368656d612064726966742064657465637465642062792073656375726974792d676174650d0a2d2d20536f757263653a206172746966616374732f64726966742d32323039303534373132312e73716c0d0a2d2d20476f616c3a206d616b65206c6f63616c206d6967726174696f6e20737461746520636f6e76657267652077697468206c696e6b65642070726f6a65637420736368656d6120286964656d706f74656e742d73616665290d0a0d0a424547494e0000014a2d2d202d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d0d0a2d2d20312920506f6c69637920616c69676e6d656e743a2072656d6f766520706f6c6963696573207468617420657869737420696e206c6f63616c20736861646f7720627574206e6f74206c696e6b65640d0a2d2d202d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d0d0a44524f5020504f4c49435920494620455849535453202241646d696e732063616e20696e736572742073746174757320686973746f727922204f4e207075626c69632e6f726465725f7374617475735f686973746f72790000005a44524f5020504f4c49435920494620455849535453202255736572732063616e2076696577206f726465722073746174757320686973746f727922204f4e207075626c69632e6f726465725f7374617475735f686973746f72790000004144524f5020504f4c49435920494620455849535453202241646d696e732063616e20757064617465206f726465727322204f4e207075626c69632e6f72646572730000005a44524f5020504f4c49435920494620455849535453202241646d696e732063616e20766965772072657669657720717565756522204f4e207075626c69632e7061796d656e745f6d616e75616c5f7265766965775f71756575650000004444524f5020504f4c494359204946204558495354532022416c6c6f772061646d696e20696e736572742061636365737322204f4e207075626c69632e70726f64756374730000004444524f5020504f4c494359204946204558495354532022416c6c6f772061646d696e207570646174652061636365737322204f4e207075626c69632e70726f64756374730000004344524f5020504f4c494359204946204558495354532022416c6c6f77207075626c696320726561642061636365737322204f4e207075626c69632e70726f64756374730000005244524f5020504f4c49435920494620455849535453202250726f66696c657320757064617461626c65206279206f776e65727320616e642061646d696e7322204f4e207075626c69632e70726f66696c65730000005444524f5020504f4c4943592049462045584953545320225669657761626c652062792061646d696e73206f72207075626c69632069662061637469766522204f4e207075626c69632e70726f6d6f5f636f6465730000004344524f5020504f4c49435920494620455849535453202241646d696e207570646174652061636365737322204f4e207075626c69632e736974655f73657474696e67730000004244524f5020504f4c4943592049462045584953545320225075626c696320726561642061636365737322204f4e207075626c69632e736974655f73657474696e67730000005b44524f5020504f4c49435920494620455849535453202241646d696e732063616e20706572666f726d20616c6c20616374696f6e73206f6e207469636b65747322204f4e207075626c69632e737570706f72745f7469636b6574730000004b44524f5020504f4c494359204946204558495354532022416e796f6e652063616e20696e73657274207469636b65747322204f4e207075626c69632e737570706f72745f7469636b6574730000004c44524f5020504f4c49435920494620455849535453202255736572732063616e2076696577206f776e207469636b65747322204f4e207075626c69632e737570706f72745f7469636b6574730000004e44524f5020504f4c494359204946204558495354532022737570706f72745f7469636b6574735f61646d696e5f75706461746522204f4e207075626c69632e737570706f72745f7469636b6574730000005044524f5020504f4c49435920494620455849535453202255736572732072656164206f776e207061796d656e7420696e74656e747322204f4e207075626c69632e7061796d656e745f696e74656e74730000006844524f5020504f4c49435920494620455849535453202241757468656e746963617465642075736572732063616e20696e736572742070726f6d6f20636f646520617474656d70747322204f4e207075626c69632e70726f6d6f5f636f64655f617474656d707473000001412d2d202d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d0d0a2d2d20322920436f6e73747261696e74202f20696e646578202f2066756e6374696f6e20636c65616e75700d0a2d2d202d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d0d0a414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174655f7661726961626c65732044524f5020434f4e53545241494e542049462045584953545320656d61696c5f74656d706c6174655f7661726961626c65735f696e73657274696f6e5f6f726465725f636865636b00000067414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f72656769737472792044524f5020434f4e53545241494e542049462045584953545320656d61696c5f7661726961626c655f72656769737472795f6b65795f666f726d617400000070414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f72656769737472792044524f5020434f4e53545241494e542049462045584953545320656d61696c5f7661726961626c655f72656769737472795f72656e6465725f706f6c6963795f636865636b0000006d414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f72656769737472792044524f5020434f4e53545241494e542049462045584953545320656d61696c5f7661726961626c655f72656769737472795f76616c75655f747970655f636865636b00000070414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174655f7661726961626c65732044524f5020434f4e53545241494e542049462045584953545320656d61696c5f74656d706c6174655f7661726961626c65735f7661726961626c655f6b65795f666b65790000004b414c544552205441424c45207075626c69632e6f72646572732044524f5020434f4e53545241494e5420494620455849535453206f72646572735f63757272656e63795f746c5f6f6e6c790000003644524f502046554e4354494f4e20494620455849535453207075626c69632e6465647563745f73746f636b5f6f6e5f6f7264657228290000003e44524f502046554e4354494f4e20494620455849535453207075626c69632e6d616e6167655f73746f636b5f6f6e5f7374617475735f6368616e6765282900000061414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f72656769737472792044524f5020434f4e53545241494e542049462045584953545320656d61696c5f7661726961626c655f72656769737472795f706b65790000003844524f5020494e44455820494620455849535453207075626c69632e656d61696c5f7661726961626c655f72656769737472795f706b65790000012f2d2d202d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d0d0a2d2d20332920436f6c756d6e2064656661756c7473202f206e756c6c6162696c697479202f207479706520616c69676e6d656e740d0a2d2d202d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d0d0a414c544552205441424c45207075626c69632e656d61696c5f6c6f67732041444420434f4c554d4e204946204e4f5420455849535453206d65746164617461206a736f6e622044454641554c5420277b7d273a3a6a736f6e620000004b414c544552205441424c45207075626c69632e656d61696c5f6c6f677320414c54455220434f4c554d4e206d65746164617461205345542044454641554c5420277b7d273a3a6a736f6e6200000055414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174655f7661726961626c657320414c54455220434f4c554d4e20637265617465645f6174205345542044454641554c54206e6f77282900000051414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174655f7661726961626c657320414c54455220434f4c554d4e20637265617465645f61742044524f50204e4f54204e554c4c00000056414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174655f7661726961626c657320414c54455220434f4c554d4e20696e73657274696f6e5f6f726465722044524f50204e4f54204e554c4c00000051414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174655f7661726961626c657320414c54455220434f4c554d4e2069735f656e61626c65642044524f50204e4f54204e554c4c00000055414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174655f7661726961626c657320414c54455220434f4c554d4e2069735f7265717569726564205345542044454641554c54207472756500000052414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174655f7661726961626c657320414c54455220434f4c554d4e2069735f72657175697265642044524f50204e4f54204e554c4c00000055414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174655f7661726961626c657320414c54455220434f4c554d4e20757064617465645f6174205345542044454641554c54206e6f77282900000051414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174655f7661726961626c657320414c54455220434f4c554d4e20757064617465645f61742044524f50204e4f54204e554c4c0000004f414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174657320414c54455220434f4c554d4e20756e7265736f6c7665645f706f6c6963792044524f50204e4f54204e554c4c00000069414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f72656769737472792041444420434f4c554d4e204946204e4f54204558495354532063617465676f727920746578742044454641554c54202767656e6572616c273a3a746578740000005c414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f726567697374727920414c54455220434f4c554d4e2063617465676f7279205345542044454641554c54202767656e6572616c273a3a746578740000006e414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f72656769737472792041444420434f4c554d4e204946204e4f54204558495354532069642075756964204e4f54204e554c4c2044454641554c542067656e5f72616e646f6d5f75756964282900000058414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f726567697374727920414c54455220434f4c554d4e206964205345542044454641554c542067656e5f72616e646f6d5f75756964282900000054414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f726567697374727920414c54455220434f4c554d4e20637265617465645f6174205345542044454641554c54206e6f77282900000050414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f726567697374727920414c54455220434f4c554d4e20637265617465645f61742044524f50204e4f54204e554c4c0000004f414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f726567697374727920414c54455220434f4c554d4e2069735f6163746976652044524f50204e4f54204e554c4c00000052414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f726567697374727920414c54455220434f4c554d4e2069735f73656e7369746976652044524f50204e4f54204e554c4c0000004b414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f726567697374727920414c54455220434f4c554d4e206c6162656c2044524f50204e4f54204e554c4c00000053414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f726567697374727920414c54455220434f4c554d4e2072656e6465725f706f6c6963792044524f50204e4f54204e554c4c00000054414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f726567697374727920414c54455220434f4c554d4e20757064617465645f6174205345542044454641554c54206e6f77282900000050414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f726567697374727920414c54455220434f4c554d4e20757064617465645f61742044524f50204e4f54204e554c4c00000050414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f726567697374727920414c54455220434f4c554d4e2076616c75655f747970652044524f50204e4f54204e554c4c0000004a414c544552205441424c45207075626c69632e6f726465725f7374617475735f686973746f727920414c54455220434f4c554d4e206f726465725f696420534554204e4f54204e554c4c0000007a414c544552205441424c45207075626c69632e6f726465725f7374617475735f686973746f727920414c54455220434f4c554d4e207374617475732054595045206368617261637465722076617279696e6728353029205553494e47207374617475733a3a6368617261637465722076617279696e67283530290000005c414c544552205441424c45207075626c69632e70726f647563747320414c54455220434f4c554d4e2070726963652054595045206e756d657269632831302c3229205553494e472070726963653a3a6e756d657269632831302c32290000003b414c544552205441424c45207075626c69632e70726f647563747320414c54455220434f4c554d4e2073746f636b20534554204e4f54204e554c4c0000003f414c544552205441424c45207075626c69632e70726f66696c657320414c54455220434f4c554d4e20757365725f7479706520534554204e4f54204e554c4c00000038414c544552205441424c45207075626c69632e70726f6d6f5f636f64657320454e41424c4520524f57204c4556454c20534543555249545900000041414c544552205441424c45207075626c69632e736974655f73657474696e67732044524f5020434f4c554d4e2049462045584953545320637265617465645f6174000001532d2d202d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d0d0a2d2d20342920526563726561746520636f6e73747261696e74732f696e6465786573206578706563746564206279206c696e6b656420736368656d610d0a2d2d202d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d0d0a43524541544520554e4951554520494e444558204946204e4f542045584953545320656d61696c5f7661726961626c655f72656769737472795f6b65795f6b6579204f4e207075626c69632e656d61696c5f7661726961626c655f7265676973747279205553494e4720627472656520286b6579290000007143524541544520554e4951554520494e444558204946204e4f542045584953545320656d61696c5f7661726961626c655f72656769737472795f706b6579204f4e207075626c69632e656d61696c5f7661726961626c655f7265676973747279205553494e47206274726565202869642900000171444f2024240d0a424547494e0d0a20204946204e4f542045584953545320280d0a2020202053454c45435420310d0a2020202046524f4d2070675f636f6e73747261696e740d0a20202020574845524520636f6e6e616d65203d2027656d61696c5f7661726961626c655f72656769737472795f706b6579270d0a202020202020414e4420636f6e72656c6964203d20277075626c69632e656d61696c5f7661726961626c655f7265676973747279273a3a726567636c6173730d0a202029205448454e0d0a20202020414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f72656769737472790d0a20202020202041444420434f4e53545241494e5420656d61696c5f7661726961626c655f72656769737472795f706b6579205052494d415259204b4559205553494e4720494e44455820656d61696c5f7661726961626c655f72656769737472795f706b65793b0d0a2020454e442049463b0d0a454e440d0a242400000175444f2024240d0a424547494e0d0a20204946204e4f542045584953545320280d0a2020202053454c45435420310d0a2020202046524f4d2070675f636f6e73747261696e740d0a20202020574845524520636f6e6e616d65203d2027656d61696c5f7661726961626c655f72656769737472795f6b65795f6b6579270d0a202020202020414e4420636f6e72656c6964203d20277075626c69632e656d61696c5f7661726961626c655f7265676973747279273a3a726567636c6173730d0a202029205448454e0d0a20202020414c544552205441424c45207075626c69632e656d61696c5f7661726961626c655f72656769737472790d0a20202020202041444420434f4e53545241494e5420656d61696c5f7661726961626c655f72656769737472795f6b65795f6b657920554e49515545205553494e4720494e44455820656d61696c5f7661726961626c655f72656769737472795f6b65795f6b65793b0d0a2020454e442049463b0d0a454e440d0a242400000340444f2024240d0a424547494e0d0a20204946204e4f542045584953545320280d0a2020202053454c45435420310d0a2020202046524f4d2070675f636f6e73747261696e740d0a20202020574845524520636f6e6e616d65203d2027656d61696c5f74656d706c6174655f7661726961626c65735f7661726961626c655f6b65795f666b6579270d0a202020202020414e4420636f6e72656c6964203d20277075626c69632e656d61696c5f74656d706c6174655f7661726961626c6573273a3a726567636c6173730d0a202029205448454e0d0a20202020414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174655f7661726961626c65730d0a20202020202041444420434f4e53545241494e5420656d61696c5f74656d706c6174655f7661726961626c65735f7661726961626c655f6b65795f666b65790d0a202020202020464f524549474e204b455920287661726961626c655f6b6579290d0a2020202020205245464552454e434553207075626c69632e656d61696c5f7661726961626c655f7265676973747279286b6579290d0a2020202020204f4e2044454c45544520434153434144450d0a2020202020204e4f542056414c49443b0d0a2020454e442049463b0d0a0d0a202049462045584953545320280d0a2020202053454c45435420310d0a2020202046524f4d2070675f636f6e73747261696e740d0a20202020574845524520636f6e6e616d65203d2027656d61696c5f74656d706c6174655f7661726961626c65735f7661726961626c655f6b65795f666b6579270d0a202020202020414e4420636f6e72656c6964203d20277075626c69632e656d61696c5f74656d706c6174655f7661726961626c6573273a3a726567636c6173730d0a202020202020414e44204e4f5420636f6e76616c6964617465640d0a202029205448454e0d0a20202020414c544552205441424c45207075626c69632e656d61696c5f74656d706c6174655f7661726961626c65730d0a20202020202056414c494441544520434f4e53545241494e5420656d61696c5f74656d706c6174655f7661726961626c65735f7661726961626c655f6b65795f666b65793b0d0a2020454e442049463b0d0a454e440d0a242400000254444f2024240d0a424547494e0d0a20204946204e4f542045584953545320280d0a2020202053454c45435420310d0a2020202046524f4d2070675f636f6e73747261696e740d0a20202020574845524520636f6e6e616d65203d20276f72646572735f63757272656e63795f746c5f6f6e6c79270d0a202020202020414e4420636f6e72656c6964203d20277075626c69632e6f7264657273273a3a726567636c6173730d0a202029205448454e0d0a20202020414c544552205441424c45207075626c69632e6f72646572730d0a20202020202041444420434f4e53545241494e54206f72646572735f63757272656e63795f746c5f6f6e6c7920434845434b20282863757272656e6379203d2027544c273a3a746578742929204e4f542056414c49443b0d0a2020454e442049463b0d0a0d0a202049462045584953545320280d0a2020202053454c45435420310d0a2020202046524f4d2070675f636f6e73747261696e740d0a20202020574845524520636f6e6e616d65203d20276f72646572735f63757272656e63795f746c5f6f6e6c79270d0a202020202020414e4420636f6e72656c6964203d20277075626c69632e6f7264657273273a3a726567636c6173730d0a202020202020414e44204e4f5420636f6e76616c6964617465640d0a202029205448454e0d0a20202020414c544552205441424c45207075626c69632e6f72646572730d0a20202020202056414c494441544520434f4e53545241494e54206f72646572735f63757272656e63795f746c5f6f6e6c793b0d0a2020454e442049463b0d0a454e440d0a2424000000e42d2d202d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d0d0a2d2d2035292046756e6374696f6e20646566696e6974696f6e20616c69676e6d656e740d0a2d2d202d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d0d0a53455420636865636b5f66756e6374696f6e5f626f64696573203d206f6666000000df435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e7072756e655f657870697265645f6f74705f636f64657328290d0a2052455455524e5320766f69640d0a204c414e475541474520706c706773716c0d0a20534554207365617263685f7061746820544f20277075626c6963270d0a4153202466756e6374696f6e240d0a424547494e0d0a2020202044454c4554452046524f4d207075626c69632e6f74705f636f64657320574845524520657870697265735f6174203c206e6f7728293b0d0a454e443b0d0a2466756e6374696f6e2400000e47435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e76616c69646174655f636865636b6f757428705f70726f647563745f736c756720746578742c20705f7175616e7469747920696e74656765722c20705f70726f6d6f5f636f646520746578742044454641554c54204e554c4c3a3a74657874290d0a2052455455524e53206a736f6e0d0a204c414e475541474520706c706773716c0d0a20534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f20277075626c6963272c202770675f636174616c6f67270d0a4153202466756e6374696f6e240d0a4445434c4152450d0a20202020765f757365725f696420555549443b0d0a20202020765f70726f66696c655f636f6d706c65746520424f4f4c45414e3b0d0a20202020765f70726f64756374205245434f52443b0d0a20202020765f737562746f74616c20444543494d414c2831302c2032293b0d0a20202020765f7661745f7261746520444543494d414c28352c203429203a3d20302e32303b0d0a20202020765f7661745f616d6f756e7420444543494d414c2831302c2032293b0d0a20202020765f746f74616c20444543494d414c2831302c2032293b0d0a20202020765f6f726465725f696420555549443b0d0a424547494e0d0a202020202d2d20312e204b756c6c616ec4b163c4b120646fc49f72756c616d610d0a20202020765f757365725f6964203a3d20617574682e75696428293b0d0a0d0a20202020494620765f757365725f6964204953204e554c4c205448454e0d0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280d0a2020202020202020202020202773756363657373272c2066616c73652c0d0a202020202020202020202020276572726f72272c2027554e415554484f52495a4544272c0d0a202020202020202020202020276d657373616765272c20274f747572756d2061c3a76d616ec4b17a20676572656b69796f72270d0a2020202020202020293b0d0a20202020454e442049463b0d0a0d0a202020202d2d20322e2050726f66696c2074616d616d6c616e6dc4b1c59f206dc4b1206b6f6e74726f6c2065740d0a2020202053454c4543542070726f66696c655f636f6d706c65746520494e544f20765f70726f66696c655f636f6d706c6574650d0a2020202046524f4d2070726f66696c65730d0a202020205748455245206964203d20765f757365725f69643b0d0a0d0a20202020494620765f70726f66696c655f636f6d706c657465204953204e554c4c204f5220765f70726f66696c655f636f6d706c657465203d2066616c7365205448454e0d0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280d0a2020202020202020202020202773756363657373272c2066616c73652c0d0a202020202020202020202020276572726f72272c202750524f46494c455f494e434f4d504c455445272c0d0a202020202020202020202020276d657373616765272c2027536970617269c59f207665726d656b2069c3a7696e2070726f66696c696e697a692074616d616d6c616d616ec4b17a20676572656b69796f72270d0a2020202020202020293b0d0a20202020454e442049463b0d0a0d0a202020202d2d20332e20c39c72c3bc6e2062696c67696c6572696e6920616c20766520646fc49f72756c610d0a2020202053454c454354202a20494e544f20765f70726f647563740d0a2020202046524f4d2070726f64756374730d0a20202020574845524520736c7567203d20705f70726f647563745f736c756720414e442069735f616374697665203d20747275653b0d0a0d0a20202020494620765f70726f64756374204953204e554c4c205448454e0d0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280d0a2020202020202020202020202773756363657373272c2066616c73652c0d0a202020202020202020202020276572726f72272c202750524f445543545f4e4f545f464f554e44272c0d0a202020202020202020202020276d657373616765272c2027c39c72c3bc6e2062756c756e616d6164c4b1207665796120736174c4b1c59f7461206465c49f696c270d0a2020202020202020293b0d0a20202020454e442049463b0d0a0d0a202020202d2d20342e204d696b746172206b6f6e74726f6cc3bc0d0a20202020494620705f7175616e74697479203c2031204f5220705f7175616e74697479203e203130205448454e0d0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280d0a2020202020202020202020202773756363657373272c2066616c73652c0d0a202020202020202020202020276572726f72272c2027494e56414c49445f5155414e54495459272c0d0a202020202020202020202020276d657373616765272c20274765c3a7657273697a206d696b7461722028312d31302061726173c4b1206f6c6d616cc4b129270d0a2020202020202020293b0d0a20202020454e442049463b0d0a0d0a202020202d2d20352e2053746f6b206b6f6e74726f6cc3bc0d0a20202020494620765f70726f647563742e73746f636b203c20705f7175616e74697479205448454e0d0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280d0a2020202020202020202020202773756363657373272c2066616c73652c0d0a202020202020202020202020276572726f72272c2027494e53554646494349454e545f53544f434b272c0d0a202020202020202020202020276d657373616765272c202759657465726c692073746f6b20796f6b2e204d65766375742073746f6b3a2027207c7c20765f70726f647563742e73746f636b0d0a2020202020202020293b0d0a20202020454e442049463b0d0a0d0a202020202d2d20362e2046697961742068657361706c616d61202853554e554355205441524146494e444121290d0a20202020765f737562746f74616c203a3d20765f70726f647563742e7072696365202a20705f7175616e746974793b0d0a20202020765f7661745f616d6f756e74203a3d20765f737562746f74616c202a20765f7661745f726174653b0d0a20202020765f746f74616c203a3d20765f737562746f74616c202b20765f7661745f616d6f756e743b0d0a0d0a202020202d2d20372e20536970617269c59f206f6c75c59f7475720d0a20202020494e5345525420494e544f206f726465727320280d0a2020202020202020757365725f69642c0d0a202020202020202070726f647563745f69642c0d0a20202020202020207175616e746974792c0d0a2020202020202020756e69745f70726963652c0d0a2020202020202020737562746f74616c2c0d0a20202020202020207661745f616d6f756e742c0d0a2020202020202020746f74616c2c0d0a20202020202020207374617475732c0d0a202020202020202070726f6d6f5f636f64650d0a20202020292056414c55455320280d0a2020202020202020765f757365725f69642c0d0a2020202020202020765f70726f647563742e69642c0d0a2020202020202020705f7175616e746974792c0d0a2020202020202020765f70726f647563742e70726963652c0d0a2020202020202020765f737562746f74616c2c0d0a2020202020202020765f7661745f616d6f756e742c0d0a2020202020202020765f746f74616c2c0d0a20202020202020202770656e64696e67272c0d0a2020202020202020705f70726f6d6f5f636f64650d0a20202020290d0a2020202052455455524e494e4720696420494e544f20765f6f726465725f69643b0d0a0d0a202020202d2d20382e2053746f6b2067c3bc6e63656c6c650d0a202020205550444154452070726f64756374730d0a202020205345542073746f636b203d2073746f636b202d20705f7175616e746974790d0a202020205748455245206964203d20765f70726f647563742e69643b0d0a0d0a202020202d2d20392e204261c59f6172c4b16cc4b12079616ec4b1740d0a2020202052455455524e206a736f6e5f6275696c645f6f626a656374280d0a20202020202020202773756363657373272c20747275652c0d0a2020202020202020276f726465725f6964272c20765f6f726465725f69642c0d0a20202020202020202770726f647563745f6e616d65272c20765f70726f647563742e6e616d652c0d0a2020202020202020277175616e74697479272c20705f7175616e746974792c0d0a202020202020202027756e69745f7072696365272c20765f70726f647563742e70726963652c0d0a202020202020202027737562746f74616c272c20765f737562746f74616c2c0d0a2020202020202020277661745f616d6f756e74272c20765f7661745f616d6f756e742c0d0a202020202020202027746f74616c272c20765f746f74616c2c0d0a2020202020202020276d657373616765272c2027536970617269c59f206261c59f6172c4b1796c61206f6c75c59f747572756c6475270d0a20202020293b0d0a0d0a455843455054494f4e0d0a202020205748454e204f5448455253205448454e0d0a20202020202020202d2d20446f6e2774206578706f73652053514c206572726f722064657461696c73202d2072657475726e2067656e65726963206d6573736167650d0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280d0a2020202020202020202020202773756363657373272c2066616c73652c0d0a202020202020202020202020276572726f72272c20275345525645525f4552524f52272c0d0a202020202020202020202020276d657373616765272c2027c4b0c59f6c656d2073c4b1726173c4b16e6461206269722068617461206f6c75c59f74752e204cc3bc7466656e2074656b7261722064656e6579696e2e270d0a2020202020202020293b0d0a454e443b0d0a2466756e6374696f6e2400000d4a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e61646d696e5f7570646174655f6f726465725f73746174757328705f6f726465725f696420757569642c20705f6e65775f73746174757320746578742c20705f6e6f746520746578742044454641554c54204e554c4c3a3a74657874290d0a2052455455524e5320626f6f6c65616e0d0a204c414e475541474520706c706773716c0d0a20534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f20277075626c6963272c202770675f636174616c6f67270d0a4153202466756e6374696f6e240d0a4445434c4152450d0a20202020765f6f6c645f73746174757320544558543b0d0a20202020765f6f726465725f64657461696c73204a534f4e423b0d0a20202020765f7061796d656e745f73746174757320544558543b0d0a20202020765f7061796d656e745f6d6574686f6420544558543b0d0a20202020765f7061796d656e745f696e74656e745f696420555549443b0d0a20202020765f6974656d205245434f52443b0d0a424547494e0d0a202020202d2d20312e2041646d696e20636865636b2028417373756d65732066756e6374696f6e20657869737473206f722066616c6c73206261636b20746f20726f6c6520636865636b290d0a202020204946202853454c45435420636f756e74282a292046524f4d207075626c69632e70726f66696c6573205748455245206964203d20617574682e756964282920414e442069735f61646d696e203d207472756529203d2030205448454e0d0a2020202020202020524149534520455843455054494f4e2027556e617574686f72697a65643a2041646d696e207065726d697373696f6e207265717569726564273b0d0a20202020454e442049463b0d0a0d0a202020202d2d20322e2046657463682063757272656e74206f7264657220646174610d0a2020202053454c454354207374617475732c206f726465725f64657461696c732c207061796d656e745f7374617475732c207061796d656e745f6d6574686f642c207061796d656e745f696e74656e745f69640d0a20202020494e544f20765f6f6c645f7374617475732c20765f6f726465725f64657461696c732c20765f7061796d656e745f7374617475732c20765f7061796d656e745f6d6574686f642c20765f7061796d656e745f696e74656e745f69640d0a2020202046524f4d207075626c69632e6f72646572730d0a202020205748455245206964203d20705f6f726465725f69643b0d0a0d0a202020204946204e4f5420464f554e44205448454e0d0a2020202020202020524149534520455843455054494f4e20274f72646572206e6f7420666f756e64273b0d0a20202020454e442049463b0d0a0d0a202020202d2d20332e205472616e736974696f6e2076616c69646174696f6e0d0a20202020494620765f6f6c645f737461747573203d202763616e63656c6c656427205448454e0d0a2020202020202020524149534520455843455054494f4e202743616e63656c6c6564206f72646572732063616e6e6f742062652075706461746564273b0d0a20202020454e442049463b0d0a0d0a20202020494620705f6e65775f737461747573204e4f5420494e20282770656e64696e67272c202770726f63657373696e67272c2027707265706172696e67272c202773686970706564272c202764656c697665726564272c202763616e63656c6c65642729205448454e0d0a2020202020202020524149534520455843455054494f4e2027496e76616c6964207374617475733a2025272c20705f6e65775f7374617475733b0d0a20202020454e442049463b0d0a0d0a202020202d2d20342e2043616e63656c6c6174696f6e204c6f676963202853746f636b20526573746f7265290d0a20202020494620705f6e65775f737461747573203d202763616e63656c6c656427205448454e0d0a20202020202020202d2d2046696e616e6369616c2073746174757320697320696e74656e742d64726976656e20666f722063617264207061796d656e74732e0d0a2020202020202020494620765f7061796d656e745f737461747573203d20277061696427205448454e0d0a202020202020202020202020494620765f7061796d656e745f6d6574686f64203d20276372656469745f636172642720414e4420765f7061796d656e745f696e74656e745f6964204953204e4f54204e554c4c205448454e0d0a202020202020202020202020202020204e554c4c3b202d2d20446f206e6f7468696e672c20726566756e6420766961207061796d656e7420696e74656e74204150490d0a202020202020202020202020454c53450d0a20202020202020202020202020202020555044415445207075626c69632e6f726465727320534554207061796d656e745f737461747573203d2027726566756e64656427205748455245206964203d20705f6f726465725f69643b0d0a202020202020202020202020454e442049463b0d0a2020202020202020454e442049463b0d0a0d0a20202020202020202d2d20526573746f72652073746f636b20666f72206974656d730d0a2020202020202020464f5220765f6974656d20494e0d0a20202020202020202020202053454c454354202a0d0a20202020202020202020202046524f4d206a736f6e625f746f5f7265636f726473657428765f6f726465725f64657461696c732d3e276974656d73272920415320782870726f647563745f696420555549442c207175616e7469747920494e5445474552290d0a20202020202020204c4f4f500d0a202020202020202020202020494620765f6974656d2e70726f647563745f6964204953204e4f54204e554c4c205448454e0d0a20202020202020202020202020202020555044415445207075626c69632e70726f64756374730d0a202020202020202020202020202020205345542073746f636b203d2073746f636b202b20765f6974656d2e7175616e746974792c0d0a2020202020202020202020202020202020202020757064617465645f6174203d204e4f5728290d0a202020202020202020202020202020205748455245206964203d20765f6974656d2e70726f647563745f69643b0d0a202020202020202020202020454e442049463b0d0a2020202020202020454e44204c4f4f503b0d0a0d0a20202020202020202d2d2055706461746520726561736f6e0d0a2020202020202020555044415445207075626c69632e6f7264657273205345542063616e63656c6c6174696f6e5f726561736f6e203d20705f6e6f7465205748455245206964203d20705f6f726465725f69643b0d0a20202020454e442049463b0d0a0d0a202020202d2d20352e20557064617465204f726465720d0a20202020555044415445207075626c69632e6f72646572730d0a2020202053455420737461747573203d20705f6e65775f7374617475732c20757064617465645f6174203d204e4f5728290d0a202020205748455245206964203d20705f6f726465725f69643b0d0a0d0a202020202d2d20362e20496e7365727420696e746f204f726465722053746174757320486973746f72790d0a20202020494e5345525420494e544f207075626c69632e6f726465725f7374617475735f686973746f727920286f726465725f69642c207374617475732c206e6f74652c20637265617465645f6279290d0a2020202056414c5545532028705f6f726465725f69642c20705f6e65775f7374617475732c20705f6e6f74652c20617574682e7569642829293b0d0a0d0a202020202d2d20372e20496e7365727420696e746f2041646d696e204175646974204c6f6720286966207461626c6520657869737473290d0a20202020494620455849535453202853454c4543542046524f4d20696e666f726d6174696f6e5f736368656d612e7461626c6573205748455245207461626c655f6e616d65203d202761646d696e5f61756469745f6c6f672729205448454e0d0a2020202020202020494e5345525420494e544f207075626c69632e61646d696e5f61756469745f6c6f67202861646d696e5f757365725f69642c20616374696f6e2c207461726765745f7461626c652c207461726765745f69642c2064657461696c73290d0a202020202020202056414c55455320280d0a202020202020202020202020617574682e75696428292c0d0a202020202020202020202020277570646174655f6f726465725f737461747573272c0d0a202020202020202020202020276f7264657273272c0d0a202020202020202020202020705f6f726465725f69642c0d0a2020202020202020202020206a736f6e625f6275696c645f6f626a656374280d0a20202020202020202020202020202020276f6c645f737461747573272c20765f6f6c645f7374617475732c0d0a20202020202020202020202020202020276e65775f737461747573272c20705f6e65775f7374617475732c0d0a20202020202020202020202020202020276e6f7465272c20705f6e6f74650d0a202020202020202020202020290d0a2020202020202020293b0d0a20202020454e442049463b0d0a0d0a2020202052455455524e20464f554e443b0d0a454e443b0d0a2466756e6374696f6e24000006de435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e6765745f64617368626f6172645f73746174732873746172745f646174652074696d657374616d7020776974682074696d65207a6f6e652c20656e645f646174652074696d657374616d7020776974682074696d65207a6f6e65290d0a2052455455524e53206a736f6e0d0a204c414e475541474520706c706773716c0d0a20534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f20277075626c6963270d0a4153202466756e6374696f6e240d0a4445434c4152450d0a20202020746f74616c5f726576656e7565206e756d657269633b0d0a202020206f726465725f636f756e7420696e743b0d0a2020202063616e63656c6c65645f636f756e7420696e743b0d0a202020206461696c795f73616c6573206a736f6e3b0d0a2020202069735f61646d696e5f7573657220626f6f6c65616e3b0d0a424547494e0d0a202020202d2d20436865636b20696620757365722069732061646d696e0d0a2020202053454c4543542069735f61646d696e20494e544f2069735f61646d696e5f757365722046524f4d2070726f66696c6573205748455245206964203d20617574682e75696428293b0d0a0d0a2020202049462069735f61646d696e5f75736572204953204e4f542054525545205448454e0d0a2020202020202020524149534520455843455054494f4e2027556e617574686f72697a656420616363657373273b0d0a20202020454e442049463b0d0a0d0a202020202d2d2043616c63756c617465206167677265676174652073746174732028616374697665206f7264657273290d0a2020202053454c4543540d0a2020202020202020434f414c455343452853554d28286f726465725f64657461696c732d3e3e27746f74616c27293a3a6e756d65726963292c2030292c0d0a2020202020202020434f554e54282a290d0a20202020494e544f20746f74616c5f726576656e75652c206f726465725f636f756e740d0a2020202046524f4d206f72646572730d0a20202020574845524520637265617465645f6174203e3d2073746172745f6461746520414e4420637265617465645f6174203c3d20656e645f646174650d0a20202020414e442073746174757320213d202763616e63656c6c6564273b0d0a0d0a202020202d2d2043616c63756c6174652063616e63656c6c656420636f756e740d0a2020202053454c45435420434f554e54282a290d0a20202020494e544f2063616e63656c6c65645f636f756e740d0a2020202046524f4d206f72646572730d0a20202020574845524520637265617465645f6174203e3d2073746172745f6461746520414e4420637265617465645f6174203c3d20656e645f646174650d0a20202020414e4420737461747573203d202763616e63656c6c6564273b0d0a0d0a202020202d2d2043616c63756c617465206461696c792073616c657320627265616b646f776e20286578636c7564696e672063616e63656c6c6564290d0a2020202053454c454354206a736f6e5f61676728742920494e544f206461696c795f73616c65730d0a2020202046524f4d20280d0a202020202020202053454c4543540d0a202020202020202020202020646174655f7472756e632827646179272c20637265617465645f61742920617320646174652c0d0a202020202020202020202020434f554e54282a2920617320636f756e742c0d0a20202020202020202020202053554d28286f726465725f64657461696c732d3e3e27746f74616c27293a3a6e756d657269632920617320726576656e75650d0a202020202020202046524f4d206f72646572730d0a2020202020202020574845524520637265617465645f6174203e3d2073746172745f6461746520414e4420637265617465645f6174203c3d20656e645f646174650d0a2020202020202020414e442073746174757320213d202763616e63656c6c6564270d0a202020202020202047524f555020425920310d0a20202020202020204f5244455220425920310d0a202020202920743b0d0a0d0a2020202052455455524e206a736f6e5f6275696c645f6f626a656374280d0a202020202020202027746f74616c5f726576656e7565272c20746f74616c5f726576656e75652c0d0a2020202020202020276f726465725f636f756e74272c206f726465725f636f756e742c0d0a20202020202020202763616e63656c6c65645f636f756e74272c2063616e63656c6c65645f636f756e742c0d0a2020202020202020276461696c795f73616c6573272c20434f414c45534345286461696c795f73616c65732c20275b5d273a3a6a736f6e290d0a20202020293b0d0a454e443b0d0a2466756e6374696f6e2400000430435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e68616e646c655f6e65775f6f726465725f70726f6d6f28290d0a2052455455524e5320747269676765720d0a204c414e475541474520706c706773716c0d0a20534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f20277075626c6963272c202770675f636174616c6f67270d0a4153202466756e6374696f6e240d0a4445434c4152450d0a2020765f636f646520746578743b0d0a2020765f646973636f756e74206e756d657269633b0d0a2020765f70726f6d6f5f696420757569643b0d0a2020765f63757272656e745f757361676520696e743b0d0a2020765f6c696d697420696e743b0d0a424547494e0d0a20202d2d20457874726163742070726f6d6f20636f64652066726f6d204a534f4e420d0a2020765f636f6465203a3d204e45572e6f726465725f64657461696c732d3e3e2770726f6d6f5f636f6465273b0d0a2020765f646973636f756e74203a3d20284e45572e6f726465725f64657461696c732d3e3e27646973636f756e7427293a3a6e756d657269633b0d0a0d0a20202d2d204966206e6f20636f64652c20657869740d0a2020494620765f636f6465204953204e554c4c204f5220765f636f6465203d202727205448454e0d0a2020202052455455524e204e45573b0d0a2020454e442049463b0d0a0d0a20202d2d2046696e642070726f6d6f20636f646520284c6f636b696e67290d0a202053454c4543542069642c2075736167655f636f756e742c2075736167655f6c696d697420494e544f20765f70726f6d6f5f69642c20765f63757272656e745f75736167652c20765f6c696d69740d0a202046524f4d2070726f6d6f5f636f6465730d0a2020574845524520636f646520494c494b4520765f636f64650d0a2020464f52205550444154453b0d0a0d0a2020494620765f70726f6d6f5f6964204953204e4f54204e554c4c205448454e0d0a202020202d2d20496e6372656d656e742075736167650d0a202020205550444154452070726f6d6f5f636f6465730d0a202020205345542075736167655f636f756e74203d20434f414c455343452875736167655f636f756e742c203029202b20310d0a202020205748455245206964203d20765f70726f6d6f5f69643b0d0a0d0a202020202d2d20496e73657274206c6f670d0a20202020494e5345525420494e544f2070726f6d6f5f6c6f6773202870726f6d6f5f636f64655f69642c206f726465725f69642c20757365725f69642c20646973636f756e745f616d6f756e74290d0a2020202056414c5545532028765f70726f6d6f5f69642c204e45572e69642c204e45572e757365725f69642c20765f646973636f756e74293b0d0a2020454e442049463b0d0a0d0a202052455455524e204e45573b0d0a454e443b0d0a2466756e6374696f6e24000000f2435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e68616e646c655f757064617465645f617428290d0a2052455455524e5320747269676765720d0a204c414e475541474520706c706773716c0d0a20534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f2027270d0a4153202466756e6374696f6e240d0a424547494e0d0a202020204e45572e757064617465645f6174203d2074696d657a6f6e652827757463273a3a746578742c206e6f772829293b0d0a2020202052455455524e204e45573b0d0a454e443b0d0a2466756e6374696f6e24000001aa435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e69735f61646d696e5f7573657228757365725f69642075756964290d0a2052455455524e5320626f6f6c65616e0d0a204c414e475541474520706c706773716c0d0a20535441424c4520534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f20277075626c6963270d0a4153202466756e6374696f6e240d0a4445434c4152450d0a202061646d696e5f73746174757320626f6f6c65616e3b0d0a424547494e0d0a20202d2d2044697265637420636f6c756d6e2061636365737320776974686f75742074726967676572696e6720706f6c69637920636865636b730d0a202053454c4543542069735f61646d696e20494e544f2061646d696e5f7374617475730d0a202046524f4d207075626c69632e70726f66696c65730d0a20205748455245206964203d20757365725f69640d0a20204c494d495420313b0d0a0d0a202052455455524e20434f414c455343452861646d696e5f7374617475732c2066616c7365293b0d0a454e443b0d0a2466756e6374696f6e240000012f2d2d202d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d0d0a2d2d20362920506f6c69636965732070726573656e7420696e206c696e6b656420736368656d6120627574206d697373696e672066726f6d206c6f63616c20736861646f770d0a2d2d202d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d2d0d0a44524f5020504f4c494359204946204558495354532022416e796f6e652063616e20726561642073657474696e677322204f4e207075626c69632e736974655f73657474696e67730000007543524541544520504f4c4943592022416e796f6e652063616e20726561642073657474696e6773220d0a4f4e207075626c69632e736974655f73657474696e67730d0a4153205045524d4953534956450d0a464f522053454c4543540d0a544f207075626c69630d0a5553494e47202874727565290000005544524f5020504f4c49435920494620455849535453202241646d696e73206d616e6167652073746f636b207265736572766174696f6e7322204f4e207075626c69632e73746f636b5f7265736572766174696f6e73000000b243524541544520504f4c494359202241646d696e73206d616e6167652073746f636b207265736572766174696f6e73220d0a4f4e207075626c69632e73746f636b5f7265736572766174696f6e730d0a4153205045524d4953534956450d0a464f5220414c4c0d0a544f2061757468656e746963617465640d0a5553494e4720282853454c454354207075626c69632e69735f61646d696e5f7573657228292041532069735f61646d696e5f7573657229290000004844524f5020504f4c494359204946204558495354532022737570706f72745f7469636b6574735f75706461746522204f4e207075626c69632e737570706f72745f7469636b6574730000013f43524541544520504f4c4943592022737570706f72745f7469636b6574735f757064617465220d0a4f4e207075626c69632e737570706f72745f7469636b6574730d0a4153205045524d4953534956450d0a464f52205550444154450d0a544f2061757468656e746963617465640d0a5553494e4720282828757365725f6964203d202853454c45435420617574682e7569642829204153207569642929204f52202853454c454354207075626c69632e69735f61646d696e5f7573657228292041532069735f61646d696e5f757365722929290d0a5749544820434845434b20282828757365725f6964203d202853454c45435420617574682e7569642829204153207569642929204f52202853454c454354207075626c69632e69735f61646d696e5f7573657228292041532069735f61646d696e5f757365722929290000005044524f5020504f4c49435920494620455849535453202255736572732072656164206f776e207061796d656e7420696e74656e747322204f4e207075626c69632e7061796d656e745f696e74656e7473000000a643524541544520504f4c494359202255736572732072656164206f776e207061796d656e7420696e74656e7473220d0a4f4e207075626c69632e7061796d656e745f696e74656e74730d0a4153205045524d4953534956450d0a464f522053454c4543540d0a544f2061757468656e746963617465640d0a5553494e472028282853454c45435420617574682e75696428292041532075696429203d20757365725f696429290000006844524f5020504f4c49435920494620455849535453202241757468656e746963617465642075736572732063616e20696e736572742070726f6d6f20636f646520617474656d70747322204f4e207075626c69632e70726f6d6f5f636f64655f617474656d707473000000c343524541544520504f4c494359202241757468656e746963617465642075736572732063616e20696e736572742070726f6d6f20636f646520617474656d707473220d0a4f4e207075626c69632e70726f6d6f5f636f64655f617474656d7074730d0a4153205045524d4953534956450d0a464f5220494e534552540d0a544f2061757468656e746963617465640d0a5749544820434845434b202828757365725f6964203d202853454c45435420617574682e75696428292041532075696429292900000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"SET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Anyone can read settings\" for relation \"public.site_settings\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
NOTICE (00000): policy "Anyone can read settings" for relation "public.site_settings" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins manage stock reservations\" for relation \"public.stock_reservations\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
NOTICE (00000): policy "Admins manage stock reservations" for relation "public.stock_reservations" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"support_tickets_update\" for relation \"public.support_tickets\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
NOTICE (00000): policy "support_tickets_update" for relation "public.support_tickets" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Users read own payment intents\" for relation \"public.payment_intents\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Authenticated users can insert promo code attempts\" for relation \"public.promo_code_attempts\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Users read own payment intents" for relation "public.payment_intents" does not exist, skipping
NOTICE (00000): policy "Authenticated users can insert promo code attempts" for relation "public.promo_code_attempts" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260217094000_fix_linter_warnings.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Fix linter warnings\r\n\r\n-- 1. Function search path mutable\r\n-- Fixes: Function `public.handle_updated_at` has a role mutable search_path\r\nALTER FUNCTION public.handle_updated_at() SET search_path = ''","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 2. Products multiple permissive policies\r\n-- Warns: Table `public.products` has multiple permissive policies for role `authenticated` for action `SELECT`.\r\n-- \"Admins manage products\" is defined FOR ALL, which matches SELECT.\r\n-- \"Admins view all products\" is defined FOR SELECT.\r\n-- Both checks are identical (public.is_admin_user()).\r\n-- We only need the one that covers ALL operations.\r\nDROP POLICY IF EXISTS \"Admins view all products\" ON public.products","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- 3. Promo Codes multiple permissive policies\r\n-- Warns: Table `public.promo_codes` has multiple permissive policies for role `authenticated` for action `SELECT`.\r\n-- Similar redundancy as products.\r\nDROP POLICY IF EXISTS \"Admins view all promo codes\" ON public.promo_codes","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260217094000"},{"text":"fix_linter_warnings"},{"binary":"0000000100000000000000190000000300000001000000ca2d2d20466978206c696e746572207761726e696e67730d0a0d0a2d2d20312e2046756e6374696f6e207365617263682070617468206d757461626c650d0a2d2d2046697865733a2046756e6374696f6e20607075626c69632e68616e646c655f757064617465645f61746020686173206120726f6c65206d757461626c65207365617263685f706174680d0a414c5445522046554e4354494f4e207075626c69632e68616e646c655f757064617465645f6174282920534554207365617263685f70617468203d202727000001cc2d2d20322e2050726f6475637473206d756c7469706c65207065726d69737369766520706f6c69636965730d0a2d2d205761726e733a205461626c6520607075626c69632e70726f64756374736020686173206d756c7469706c65207065726d69737369766520706f6c696369657320666f7220726f6c65206061757468656e746963617465646020666f7220616374696f6e206053454c454354602e0d0a2d2d202241646d696e73206d616e6167652070726f64756374732220697320646566696e656420464f5220414c4c2c207768696368206d6174636865732053454c4543542e0d0a2d2d202241646d696e73207669657720616c6c2070726f64756374732220697320646566696e656420464f522053454c4543542e0d0a2d2d20426f746820636865636b7320617265206964656e746963616c20287075626c69632e69735f61646d696e5f757365722829292e0d0a2d2d205765206f6e6c79206e65656420746865206f6e65207468617420636f7665727320414c4c206f7065726174696f6e732e0d0a44524f5020504f4c49435920494620455849535453202241646d696e73207669657720616c6c2070726f647563747322204f4e207075626c69632e70726f6475637473000001122d2d20332e2050726f6d6f20436f646573206d756c7469706c65207065726d69737369766520706f6c69636965730d0a2d2d205761726e733a205461626c6520607075626c69632e70726f6d6f5f636f6465736020686173206d756c7469706c65207065726d69737369766520706f6c696369657320666f7220726f6c65206061757468656e746963617465646020666f7220616374696f6e206053454c454354602e0d0a2d2d2053696d696c617220726564756e64616e63792061732070726f64756374732e0d0a44524f5020504f4c49435920494620455849535453202241646d696e73207669657720616c6c2070726f6d6f20636f64657322204f4e207075626c69632e70726f6d6f5f636f646573"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins view all products\" for relation \"public.products\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
NOTICE (00000): policy "Admins view all products" for relation "public.products" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Admins view all promo codes\" for relation \"public.promo_codes\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Admins view all promo codes" for relation "public.promo_codes" does not exist, skipping
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260218094000_fix_shipping_cost_and_vat.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Migration: Fix shipping cost calculation and VAT rate logic\r\n-- Created: 2026-02-18 09:40:00\r\n\r\n-- Update create_order function with dynamic settings and improved calculation order\r\nCREATE OR REPLACE FUNCTION create_order(\r\n    p_items JSONB,\r\n    p_shipping_address_id UUID,\r\n    p_payment_method TEXT,\r\n    p_promo_code TEXT DEFAULT NULL\r\n)\r\nRETURNS JSONB\r\nLANGUAGE plpgsql\r\nSECURITY DEFINER\r\nAS $$\r\nDECLARE\r\n    v_user_id UUID;\r\n    v_item JSONB;\r\n    v_product_id UUID;\r\n    v_product_name TEXT;\r\n    v_product_price DECIMAL(10,2);\r\n    v_product_stock INT;\r\n    v_qty INT;\r\n    v_item_subtotal DECIMAL(10,2);\r\n    v_total_subtotal DECIMAL(10,2) := 0;\r\n    v_total_vat DECIMAL(10,2) := 0;\r\n    v_shipping_cost DECIMAL(10,2);\r\n    v_vat_rate DECIMAL(10,4);\r\n    v_shipping_threshold DECIMAL(12,2);\r\n\r\n    v_final_total DECIMAL(10,2);\r\n    v_discount DECIMAL(10,2) := 0;\r\n    v_order_id UUID;\r\n    v_valid_items JSONB := '[]'::JSONB;\r\n    v_item_detail JSONB;\r\n    v_order_details JSONB;\r\n    v_bank_ref TEXT := NULL;\r\n    v_address_owner UUID;\r\n    v_promo_result JSON;\r\n    v_item_total_cents BIGINT := 0;\r\n    v_vat_total_cents BIGINT := 0;\r\n    v_shipping_total_cents BIGINT := 0;\r\n    v_discount_total_cents BIGINT := 0;\r\n    v_paid_total_cents BIGINT := 0;\r\nBEGIN\r\n    -- Card flow must use payment_intent + 3D finalize path\r\n    IF p_payment_method \u003c\u003e 'bank_transfer' THEN\r\n        RETURN jsonb_build_object(\r\n            'success', false,\r\n            'message', 'Kart odemeleri yeni 3D akisi ile alinmaktadir. Lutfen kart odeme endpointini kullanin.'\r\n        );\r\n    END IF;\r\n\r\n    -- 1. Get User ID\r\n    v_user_id := auth.uid();\r\n    IF v_user_id IS NULL THEN\r\n        RETURN jsonb_build_object('success', false, 'message', 'Oturum amanz gerekiyor');\r\n    END IF;\r\n\r\n    -- 2. Address Ownership Check (IDOR Security Fix)\r\n    SELECT user_id INTO v_address_owner FROM addresses WHERE id = p_shipping_address_id;\r\n    IF v_address_owner IS NULL OR v_address_owner != v_user_id THEN\r\n         RETURN jsonb_build_object('success', false, 'message', 'Geersiz adres seimi: Adres size ait deil.');\r\n    END IF;\r\n\r\n    -- 3. Iterate input items\r\n    FOR v_item IN SELECT * FROM jsonb_array_elements(p_items)\r\n    LOOP\r\n        v_product_id := (v_item-\u003e\u003e'product_id')::UUID;\r\n        v_qty := (v_item-\u003e\u003e'quantity')::INT;\r\n\r\n        -- Negative Quantity Check (Logic Security Fix)\r\n        IF v_qty \u003c= 0 THEN\r\n             RETURN jsonb_build_object('success', false, 'message', 'Geersiz rn miktar: 0 veya negatif olamaz.');\r\n        END IF;\r\n\r\n        -- Get product from DB WITH LOCK (Race Condition Fix)\r\n        SELECT id, name, price, stock \r\n        INTO v_product_id, v_product_name, v_product_price, v_product_stock\r\n        FROM products \r\n        WHERE id = v_product_id\r\n        FOR UPDATE; -- Critical: Locks the row\r\n        \r\n        IF NOT FOUND THEN\r\n             RETURN jsonb_build_object('success', false, 'message', 'rn bulunamad: ID ' || v_product_id);\r\n        END IF;\r\n\r\n        -- Check stock validity\r\n        IF v_product_stock \u003c v_qty THEN\r\n             RETURN jsonb_build_object('success', false, 'message', 'Yetersiz stok: ' || v_product_name);\r\n        END IF;\r\n\r\n        -- Calculate item totals using DB price\r\n        v_item_subtotal := v_product_price * v_qty;\r\n        v_total_subtotal := v_total_subtotal + v_item_subtotal;\r\n        \r\n        -- Build item detail\r\n        v_item_detail := jsonb_build_object(\r\n            'product_id', v_product_id,\r\n            'product_name', v_product_name,\r\n            'quantity', v_qty,\r\n            'unit_price', v_product_price,\r\n            'subtotal', v_item_subtotal\r\n        );\r\n        \r\n        v_valid_items := v_valid_items || v_item_detail;\r\n        \r\n    END LOOP;\r\n\r\n    -- 4. VAT \u0026 Shipping Settings\r\n    SELECT \r\n        COALESCE(vat_rate, 0.20),\r\n        COALESCE(shipping_cost, 49.90),\r\n        COALESCE(free_shipping_threshold, 1500.0)\r\n    INTO v_vat_rate, v_shipping_cost, v_shipping_threshold\r\n    FROM public.site_settings\r\n    WHERE id = 1;\r\n\r\n    -- 5. VAT calculation\r\n    v_total_vat := v_total_subtotal * v_vat_rate;\r\n\r\n    -- 6. Promo Code (Backend Logic using verify_promo_code)\r\n    v_discount := 0; \r\n    IF p_promo_code IS NOT NULL AND length(p_promo_code) \u003e 0 THEN\r\n        BEGIN\r\n            -- Attempt to call verify_promo_code\r\n            SELECT verify_promo_code(p_promo_code) INTO v_promo_result;\r\n            \r\n            IF (v_promo_result-\u003e\u003e'valid')::boolean = true THEN\r\n                -- Check min order amount logic if applicable\r\n                 IF (v_promo_result-\u003e\u003e'discount_type') = 'percentage' THEN\r\n                     v_discount := (v_total_subtotal + v_total_vat) * ((v_promo_result-\u003e\u003e'discount_value')::decimal / 100);\r\n                     -- Max discount check\r\n                     IF (v_promo_result-\u003e\u003e'max_discount_amount') IS NOT NULL AND v_discount \u003e (v_promo_result-\u003e\u003e'max_discount_amount')::decimal THEN\r\n                         v_discount := (v_promo_result-\u003e\u003e'max_discount_amount')::decimal;\r\n                     END IF;\r\n                 ELSE\r\n                     v_discount := (v_promo_result-\u003e\u003e'discount_value')::decimal;\r\n                 END IF;\r\n            END IF;\r\n        EXCEPTION WHEN OTHERS THEN\r\n            v_discount := 0;\r\n        END;\r\n    END IF;\r\n\r\n    -- 7. Shipping calculation\r\n    IF (v_total_subtotal + v_total_vat - v_discount) \u003e= v_shipping_threshold THEN\r\n        v_shipping_cost := 0;\r\n    END IF;\r\n\r\n    -- 8. Final Total\r\n    v_final_total := v_total_subtotal + v_total_vat + v_shipping_cost - v_discount;\r\n    IF v_final_total \u003c 0 THEN v_final_total := 0; END IF;\r\n\r\n    v_item_total_cents := ROUND(v_total_subtotal * 100)::bigint;\r\n    v_vat_total_cents := ROUND(v_total_vat * 100)::bigint;\r\n    v_shipping_total_cents := ROUND(v_shipping_cost * 100)::bigint;\r\n    v_discount_total_cents := ROUND(v_discount * 100)::bigint;\r\n    v_paid_total_cents := ROUND(v_final_total * 100)::bigint;\r\n\r\n    -- Bank Reference\r\n    v_bank_ref := 'BRV-' || to_char(NOW(), 'YYMMDD') || '-' || upper(substring(md5(random()::text) from 1 for 4));\r\n\r\n    -- 9. Construct final order_details JSON\r\n    v_order_details := jsonb_build_object(\r\n        'items', v_valid_items,\r\n        'subtotal', v_total_subtotal,\r\n        'vat_rate', v_vat_rate,\r\n        'vat_amount', v_total_vat,\r\n        'shipping_cost', v_shipping_cost,\r\n        'total', v_final_total,\r\n        'promo_code', p_promo_code,\r\n        'discount', v_discount,\r\n        'bank_reference', v_bank_ref\r\n    );\r\n\r\n    -- 10. Insert Order\r\n    INSERT INTO orders (\r\n        user_id,\r\n        shipping_address_id,\r\n        payment_method,\r\n        status,\r\n        payment_status,\r\n        order_details,\r\n        currency,\r\n        installment_number,\r\n        item_total_cents,\r\n        vat_total_cents,\r\n        shipping_total_cents,\r\n        discount_total_cents,\r\n        commission_amount_cents,\r\n        paid_total_cents\r\n    ) VALUES (\r\n        v_user_id,\r\n        p_shipping_address_id,\r\n        'bank_transfer',\r\n        'pending', \r\n        'pending',\r\n        v_order_details,\r\n        'TL',\r\n        1,\r\n        v_item_total_cents,\r\n        v_vat_total_cents,\r\n        v_shipping_total_cents,\r\n        v_discount_total_cents,\r\n        0,\r\n        v_paid_total_cents\r\n    ) RETURNING id INTO v_order_id;\r\n    \r\n    -- 11. Insert Status History\r\n    BEGIN\r\n        INSERT INTO order_status_history (order_id, status, note, created_at)\r\n        VALUES (\r\n            v_order_id,\r\n            'pending',\r\n            'Sipari alnd (Havale/EFT Bekleniyor)',\r\n            NOW()\r\n        );\r\n    EXCEPTION WHEN OTHERS THEN\r\n        NULL;\r\n    END;\r\n\r\n    -- 12. Return Success\r\n    RETURN jsonb_build_object(\r\n        'success', true, \r\n        'order_id', v_order_id,\r\n        'total', v_final_total,\r\n        'shipping_cost', v_shipping_cost,\r\n        'bank_reference', v_bank_ref,\r\n        'message', 'Sipari baaryla oluturuldu'\r\n    );\r\n\r\nEXCEPTION WHEN OTHERS THEN\r\n    RAISE LOG 'create_order failed for user %, payment_method %, error %',\r\n        COALESCE(v_user_id::text, 'anonymous'),\r\n        COALESCE(p_payment_method, 'unknown'),\r\n        SQLERRM;\r\n    RETURN jsonb_build_object(\r\n        'success', false, \r\n        'message', 'Sipari oluturulurken beklenmeyen bir hata olutu. Ltfen tekrar deneyiniz.'\r\n    );\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260218094000"},{"text":"fix_shipping_cost_and_vat"},{"binary":"0000000100000000000000190000000100000001000020da2d2d204d6967726174696f6e3a20466978207368697070696e6720636f73742063616c63756c6174696f6e20616e64205641542072617465206c6f6769630d0a2d2d20437265617465643a20323032362d30322d31382030393a34303a30300d0a0d0a2d2d20557064617465206372656174655f6f726465722066756e6374696f6e20776974682064796e616d69632073657474696e677320616e6420696d70726f7665642063616c63756c6174696f6e206f726465720d0a435245415445204f52205245504c4143452046554e4354494f4e206372656174655f6f72646572280d0a20202020705f6974656d73204a534f4e422c0d0a20202020705f7368697070696e675f616464726573735f696420555549442c0d0a20202020705f7061796d656e745f6d6574686f6420544558542c0d0a20202020705f70726f6d6f5f636f646520544558542044454641554c54204e554c4c0d0a290d0a52455455524e53204a534f4e420d0a4c414e475541474520706c706773716c0d0a534543555249545920444546494e45520d0a41532024240d0a4445434c4152450d0a20202020765f757365725f696420555549443b0d0a20202020765f6974656d204a534f4e423b0d0a20202020765f70726f647563745f696420555549443b0d0a20202020765f70726f647563745f6e616d6520544558543b0d0a20202020765f70726f647563745f707269636520444543494d414c2831302c32293b0d0a20202020765f70726f647563745f73746f636b20494e543b0d0a20202020765f71747920494e543b0d0a20202020765f6974656d5f737562746f74616c20444543494d414c2831302c32293b0d0a20202020765f746f74616c5f737562746f74616c20444543494d414c2831302c3229203a3d20303b0d0a20202020765f746f74616c5f76617420444543494d414c2831302c3229203a3d20303b0d0a20202020765f7368697070696e675f636f737420444543494d414c2831302c32293b0d0a20202020765f7661745f7261746520444543494d414c2831302c34293b0d0a20202020765f7368697070696e675f7468726573686f6c6420444543494d414c2831322c32293b0d0a0d0a20202020765f66696e616c5f746f74616c20444543494d414c2831302c32293b0d0a20202020765f646973636f756e7420444543494d414c2831302c3229203a3d20303b0d0a20202020765f6f726465725f696420555549443b0d0a20202020765f76616c69645f6974656d73204a534f4e42203a3d20275b5d273a3a4a534f4e423b0d0a20202020765f6974656d5f64657461696c204a534f4e423b0d0a20202020765f6f726465725f64657461696c73204a534f4e423b0d0a20202020765f62616e6b5f7265662054455854203a3d204e554c4c3b0d0a20202020765f616464726573735f6f776e657220555549443b0d0a20202020765f70726f6d6f5f726573756c74204a534f4e3b0d0a20202020765f6974656d5f746f74616c5f63656e747320424947494e54203a3d20303b0d0a20202020765f7661745f746f74616c5f63656e747320424947494e54203a3d20303b0d0a20202020765f7368697070696e675f746f74616c5f63656e747320424947494e54203a3d20303b0d0a20202020765f646973636f756e745f746f74616c5f63656e747320424947494e54203a3d20303b0d0a20202020765f706169645f746f74616c5f63656e747320424947494e54203a3d20303b0d0a424547494e0d0a202020202d2d204361726420666c6f77206d75737420757365207061796d656e745f696e74656e74202b2033442066696e616c697a6520706174680d0a20202020494620705f7061796d656e745f6d6574686f64203c3e202762616e6b5f7472616e7366657227205448454e0d0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280d0a2020202020202020202020202773756363657373272c2066616c73652c0d0a202020202020202020202020276d657373616765272c20274b617274206f64656d656c6572692079656e6920334420616b69736920696c6520616c696e6d616b74616469722e204c757466656e206b617274206f64656d6520656e64706f696e74696e69206b756c6c616e696e2e270d0a2020202020202020293b0d0a20202020454e442049463b0d0a0d0a202020202d2d20312e2047657420557365722049440d0a20202020765f757365725f6964203a3d20617574682e75696428293b0d0a20202020494620765f757365725f6964204953204e554c4c205448454e0d0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274f747572756d2061c3a76d616ec4b17a20676572656b69796f7227293b0d0a20202020454e442049463b0d0a0d0a202020202d2d20322e2041646472657373204f776e65727368697020436865636b202849444f5220536563757269747920466978290d0a2020202053454c45435420757365725f696420494e544f20765f616464726573735f6f776e65722046524f4d20616464726573736573205748455245206964203d20705f7368697070696e675f616464726573735f69643b0d0a20202020494620765f616464726573735f6f776e6572204953204e554c4c204f5220765f616464726573735f6f776e657220213d20765f757365725f6964205448454e0d0a20202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274765c3a7657273697a206164726573207365c3a7696d693a2041647265732073697a6520616974206465c49f696c2e27293b0d0a20202020454e442049463b0d0a0d0a202020202d2d20332e204974657261746520696e707574206974656d730d0a20202020464f5220765f6974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e747328705f6974656d73290d0a202020204c4f4f500d0a2020202020202020765f70726f647563745f6964203a3d2028765f6974656d2d3e3e2770726f647563745f696427293a3a555549443b0d0a2020202020202020765f717479203a3d2028765f6974656d2d3e3e277175616e7469747927293a3a494e543b0d0a0d0a20202020202020202d2d204e65676174697665205175616e7469747920436865636b20284c6f67696320536563757269747920466978290d0a2020202020202020494620765f717479203c3d2030205448454e0d0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274765c3a7657273697a20c3bc72c3bc6e206d696b746172c4b13a20302076657961206e656761746966206f6c616d617a2e27293b0d0a2020202020202020454e442049463b0d0a0d0a20202020202020202d2d204765742070726f647563742066726f6d2044422057495448204c4f434b20285261636520436f6e646974696f6e20466978290d0a202020202020202053454c4543542069642c206e616d652c2070726963652c2073746f636b200d0a2020202020202020494e544f20765f70726f647563745f69642c20765f70726f647563745f6e616d652c20765f70726f647563745f70726963652c20765f70726f647563745f73746f636b0d0a202020202020202046524f4d2070726f6475637473200d0a20202020202020205748455245206964203d20765f70726f647563745f69640d0a2020202020202020464f52205550444154453b202d2d20437269746963616c3a204c6f636b732074686520726f770d0a20202020202020200d0a20202020202020204946204e4f5420464f554e44205448454e0d0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c2027c39c72c3bc6e2062756c756e616d6164c4b13a2049442027207c7c20765f70726f647563745f6964293b0d0a2020202020202020454e442049463b0d0a0d0a20202020202020202d2d20436865636b2073746f636b2076616c69646974790d0a2020202020202020494620765f70726f647563745f73746f636b203c20765f717479205448454e0d0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c2027596574657273697a2073746f6b3a2027207c7c20765f70726f647563745f6e616d65293b0d0a2020202020202020454e442049463b0d0a0d0a20202020202020202d2d2043616c63756c617465206974656d20746f74616c73207573696e672044422070726963650d0a2020202020202020765f6974656d5f737562746f74616c203a3d20765f70726f647563745f7072696365202a20765f7174793b0d0a2020202020202020765f746f74616c5f737562746f74616c203a3d20765f746f74616c5f737562746f74616c202b20765f6974656d5f737562746f74616c3b0d0a20202020202020200d0a20202020202020202d2d204275696c64206974656d2064657461696c0d0a2020202020202020765f6974656d5f64657461696c203a3d206a736f6e625f6275696c645f6f626a656374280d0a2020202020202020202020202770726f647563745f6964272c20765f70726f647563745f69642c0d0a2020202020202020202020202770726f647563745f6e616d65272c20765f70726f647563745f6e616d652c0d0a202020202020202020202020277175616e74697479272c20765f7174792c0d0a20202020202020202020202027756e69745f7072696365272c20765f70726f647563745f70726963652c0d0a20202020202020202020202027737562746f74616c272c20765f6974656d5f737562746f74616c0d0a2020202020202020293b0d0a20202020202020200d0a2020202020202020765f76616c69645f6974656d73203a3d20765f76616c69645f6974656d73207c7c20765f6974656d5f64657461696c3b0d0a20202020202020200d0a20202020454e44204c4f4f503b0d0a0d0a202020202d2d20342e205641542026205368697070696e672053657474696e67730d0a2020202053454c454354200d0a2020202020202020434f414c45534345287661745f726174652c20302e3230292c0d0a2020202020202020434f414c45534345287368697070696e675f636f73742c2034392e3930292c0d0a2020202020202020434f414c4553434528667265655f7368697070696e675f7468726573686f6c642c20313530302e30290d0a20202020494e544f20765f7661745f726174652c20765f7368697070696e675f636f73742c20765f7368697070696e675f7468726573686f6c640d0a2020202046524f4d207075626c69632e736974655f73657474696e67730d0a202020205748455245206964203d20313b0d0a0d0a202020202d2d20352e205641542063616c63756c6174696f6e0d0a20202020765f746f74616c5f766174203a3d20765f746f74616c5f737562746f74616c202a20765f7661745f726174653b0d0a0d0a202020202d2d20362e2050726f6d6f20436f646520284261636b656e64204c6f676963207573696e67207665726966795f70726f6d6f5f636f6465290d0a20202020765f646973636f756e74203a3d20303b200d0a20202020494620705f70726f6d6f5f636f6465204953204e4f54204e554c4c20414e44206c656e67746828705f70726f6d6f5f636f646529203e2030205448454e0d0a2020202020202020424547494e0d0a2020202020202020202020202d2d20417474656d707420746f2063616c6c207665726966795f70726f6d6f5f636f64650d0a20202020202020202020202053454c454354207665726966795f70726f6d6f5f636f646528705f70726f6d6f5f636f64652920494e544f20765f70726f6d6f5f726573756c743b0d0a2020202020202020202020200d0a20202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e2776616c696427293a3a626f6f6c65616e203d2074727565205448454e0d0a202020202020202020202020202020202d2d20436865636b206d696e206f7264657220616d6f756e74206c6f676963206966206170706c696361626c650d0a202020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f747970652729203d202770657263656e7461676527205448454e0d0a202020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f746f74616c5f737562746f74616c202b20765f746f74616c5f76617429202a202828765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a646563696d616c202f20313030293b0d0a2020202020202020202020202020202020202020202d2d204d617820646973636f756e7420636865636b0d0a20202020202020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e742729204953204e4f54204e554c4c20414e4420765f646973636f756e74203e2028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e7427293a3a646563696d616c205448454e0d0a20202020202020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e7427293a3a646563696d616c3b0d0a202020202020202020202020202020202020202020454e442049463b0d0a2020202020202020202020202020202020454c53450d0a202020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a646563696d616c3b0d0a2020202020202020202020202020202020454e442049463b0d0a202020202020202020202020454e442049463b0d0a2020202020202020455843455054494f4e205748454e204f5448455253205448454e0d0a202020202020202020202020765f646973636f756e74203a3d20303b0d0a2020202020202020454e443b0d0a20202020454e442049463b0d0a0d0a202020202d2d20372e205368697070696e672063616c63756c6174696f6e0d0a2020202049462028765f746f74616c5f737562746f74616c202b20765f746f74616c5f766174202d20765f646973636f756e7429203e3d20765f7368697070696e675f7468726573686f6c64205448454e0d0a2020202020202020765f7368697070696e675f636f7374203a3d20303b0d0a20202020454e442049463b0d0a0d0a202020202d2d20382e2046696e616c20546f74616c0d0a20202020765f66696e616c5f746f74616c203a3d20765f746f74616c5f737562746f74616c202b20765f746f74616c5f766174202b20765f7368697070696e675f636f7374202d20765f646973636f756e743b0d0a20202020494620765f66696e616c5f746f74616c203c2030205448454e20765f66696e616c5f746f74616c203a3d20303b20454e442049463b0d0a0d0a20202020765f6974656d5f746f74616c5f63656e7473203a3d20524f554e4428765f746f74616c5f737562746f74616c202a20313030293a3a626967696e743b0d0a20202020765f7661745f746f74616c5f63656e7473203a3d20524f554e4428765f746f74616c5f766174202a20313030293a3a626967696e743b0d0a20202020765f7368697070696e675f746f74616c5f63656e7473203a3d20524f554e4428765f7368697070696e675f636f7374202a20313030293a3a626967696e743b0d0a20202020765f646973636f756e745f746f74616c5f63656e7473203a3d20524f554e4428765f646973636f756e74202a20313030293a3a626967696e743b0d0a20202020765f706169645f746f74616c5f63656e7473203a3d20524f554e4428765f66696e616c5f746f74616c202a20313030293a3a626967696e743b0d0a0d0a202020202d2d2042616e6b205265666572656e63650d0a20202020765f62616e6b5f726566203a3d20274252562d27207c7c20746f5f63686172284e4f5728292c202759594d4d44442729207c7c20272d27207c7c20757070657228737562737472696e67286d64352872616e646f6d28293a3a74657874292066726f6d203120666f72203429293b0d0a0d0a202020202d2d20392e20436f6e7374727563742066696e616c206f726465725f64657461696c73204a534f4e0d0a20202020765f6f726465725f64657461696c73203a3d206a736f6e625f6275696c645f6f626a656374280d0a2020202020202020276974656d73272c20765f76616c69645f6974656d732c0d0a202020202020202027737562746f74616c272c20765f746f74616c5f737562746f74616c2c0d0a2020202020202020277661745f72617465272c20765f7661745f726174652c0d0a2020202020202020277661745f616d6f756e74272c20765f746f74616c5f7661742c0d0a2020202020202020277368697070696e675f636f7374272c20765f7368697070696e675f636f73742c0d0a202020202020202027746f74616c272c20765f66696e616c5f746f74616c2c0d0a20202020202020202770726f6d6f5f636f6465272c20705f70726f6d6f5f636f64652c0d0a202020202020202027646973636f756e74272c20765f646973636f756e742c0d0a20202020202020202762616e6b5f7265666572656e6365272c20765f62616e6b5f7265660d0a20202020293b0d0a0d0a202020202d2d2031302e20496e73657274204f726465720d0a20202020494e5345525420494e544f206f726465727320280d0a2020202020202020757365725f69642c0d0a20202020202020207368697070696e675f616464726573735f69642c0d0a20202020202020207061796d656e745f6d6574686f642c0d0a20202020202020207374617475732c0d0a20202020202020207061796d656e745f7374617475732c0d0a20202020202020206f726465725f64657461696c732c0d0a202020202020202063757272656e63792c0d0a2020202020202020696e7374616c6c6d656e745f6e756d6265722c0d0a20202020202020206974656d5f746f74616c5f63656e74732c0d0a20202020202020207661745f746f74616c5f63656e74732c0d0a20202020202020207368697070696e675f746f74616c5f63656e74732c0d0a2020202020202020646973636f756e745f746f74616c5f63656e74732c0d0a2020202020202020636f6d6d697373696f6e5f616d6f756e745f63656e74732c0d0a2020202020202020706169645f746f74616c5f63656e74730d0a20202020292056414c55455320280d0a2020202020202020765f757365725f69642c0d0a2020202020202020705f7368697070696e675f616464726573735f69642c0d0a20202020202020202762616e6b5f7472616e73666572272c0d0a20202020202020202770656e64696e67272c200d0a20202020202020202770656e64696e67272c0d0a2020202020202020765f6f726465725f64657461696c732c0d0a202020202020202027544c272c0d0a2020202020202020312c0d0a2020202020202020765f6974656d5f746f74616c5f63656e74732c0d0a2020202020202020765f7661745f746f74616c5f63656e74732c0d0a2020202020202020765f7368697070696e675f746f74616c5f63656e74732c0d0a2020202020202020765f646973636f756e745f746f74616c5f63656e74732c0d0a2020202020202020302c0d0a2020202020202020765f706169645f746f74616c5f63656e74730d0a20202020292052455455524e494e4720696420494e544f20765f6f726465725f69643b0d0a202020200d0a202020202d2d2031312e20496e736572742053746174757320486973746f72790d0a20202020424547494e0d0a2020202020202020494e5345525420494e544f206f726465725f7374617475735f686973746f727920286f726465725f69642c207374617475732c206e6f74652c20637265617465645f6174290d0a202020202020202056414c55455320280d0a202020202020202020202020765f6f726465725f69642c0d0a2020202020202020202020202770656e64696e67272c0d0a20202020202020202020202027536970617269c59f20616cc4b16e64c4b12028486176616c652f4546542042656b6c656e69796f7229272c0d0a2020202020202020202020204e4f5728290d0a2020202020202020293b0d0a20202020455843455054494f4e205748454e204f5448455253205448454e0d0a20202020202020204e554c4c3b0d0a20202020454e443b0d0a0d0a202020202d2d2031322e2052657475726e20537563636573730d0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280d0a20202020202020202773756363657373272c20747275652c200d0a2020202020202020276f726465725f6964272c20765f6f726465725f69642c0d0a202020202020202027746f74616c272c20765f66696e616c5f746f74616c2c0d0a2020202020202020277368697070696e675f636f7374272c20765f7368697070696e675f636f73742c0d0a20202020202020202762616e6b5f7265666572656e6365272c20765f62616e6b5f7265662c0d0a2020202020202020276d657373616765272c2027536970617269c59f206261c59f6172c4b1796c61206f6c75c59f747572756c6475270d0a20202020293b0d0a0d0a455843455054494f4e205748454e204f5448455253205448454e0d0a202020205241495345204c4f4720276372656174655f6f72646572206661696c656420666f72207573657220252c207061796d656e745f6d6574686f6420252c206572726f722025272c0d0a2020202020202020434f414c4553434528765f757365725f69643a3a746578742c2027616e6f6e796d6f757327292c0d0a2020202020202020434f414c4553434528705f7061796d656e745f6d6574686f642c2027756e6b6e6f776e27292c0d0a202020202020202053514c4552524d3b0d0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280d0a20202020202020202773756363657373272c2066616c73652c200d0a2020202020202020276d657373616765272c2027536970617269c59f206f6c75c59f747572756c75726b656e2062656b6c656e6d6579656e206269722068617461206f6c75c59f74752e204cc3bc7466656e2074656b7261722064656e6579696e697a2e270d0a20202020293b0d0a454e443b0d0a2424"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260218100000_fix_create_order_search_path.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Migration: Fix create_order function search_path security\r\n-- Created: 2026-02-18 10:00:00\r\n\r\n-- Detects functions where the search_path parameter is not set.\r\n-- Function `public.create_order` has a role mutable search_path\r\nALTER FUNCTION public.create_order(JSONB, UUID, TEXT, TEXT) SET search_path = ''","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260218100000"},{"text":"fix_create_order_search_path"},{"binary":"0000000100000000000000190000000100000001000001352d2d204d6967726174696f6e3a20466978206372656174655f6f726465722066756e6374696f6e207365617263685f706174682073656375726974790d0a2d2d20437265617465643a20323032362d30322d31382031303a30303a30300d0a0d0a2d2d20446574656374732066756e6374696f6e7320776865726520746865207365617263685f7061746820706172616d65746572206973206e6f74207365742e0d0a2d2d2046756e6374696f6e20607075626c69632e6372656174655f6f726465726020686173206120726f6c65206d757461626c65207365617263685f706174680d0a414c5445522046554e4354494f4e207075626c69632e6372656174655f6f72646572284a534f4e422c20555549442c20544558542c20544558542920534554207365617263685f70617468203d202727"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260218110000_fix_database_drift_orders_alignment.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Migration: Align orders table with drift expectations and legacy function support\r\n-- Created: 2026-02-18 10:30:00\r\n\r\nBEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Add missing columns to orders table for drift alignment and legacy function support\r\nALTER TABLE public.orders ADD COLUMN IF NOT EXISTS promo_code TEXT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.orders ADD COLUMN IF NOT EXISTS bank_reference TEXT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.orders ADD COLUMN IF NOT EXISTS product_id UUID REFERENCES public.products(id)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.orders ADD COLUMN IF NOT EXISTS quantity INT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.orders ADD COLUMN IF NOT EXISTS unit_price DECIMAL(10,2)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.orders ADD COLUMN IF NOT EXISTS subtotal DECIMAL(10,2)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.orders ADD COLUMN IF NOT EXISTS vat_amount DECIMAL(10,2)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.orders ADD COLUMN IF NOT EXISTS total DECIMAL(10,2)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Update create_order function to populate new columns\r\nCREATE OR REPLACE FUNCTION public.create_order(\r\n    p_items JSONB,\r\n    p_shipping_address_id UUID,\r\n    p_payment_method TEXT,\r\n    p_promo_code TEXT DEFAULT NULL\r\n)\r\nRETURNS JSONB\r\nLANGUAGE plpgsql\r\nSECURITY DEFINER\r\nSET search_path = ''\r\nAS $$\r\nDECLARE\r\n    v_user_id UUID;\r\n    v_item JSONB;\r\n    v_product_id UUID;\r\n    v_product_name TEXT;\r\n    v_product_price DECIMAL(10,2);\r\n    v_product_stock INT;\r\n    v_qty INT;\r\n    v_item_subtotal DECIMAL(10,2);\r\n    v_total_subtotal DECIMAL(10,2) := 0;\r\n    v_total_vat DECIMAL(10,2) := 0;\r\n    v_shipping_cost DECIMAL(10,2);\r\n    v_vat_rate DECIMAL(10,4);\r\n    v_shipping_threshold DECIMAL(12,2);\r\n\r\n    v_final_total DECIMAL(10,2);\r\n    v_discount DECIMAL(10,2) := 0;\r\n    v_order_id UUID;\r\n    v_valid_items JSONB := '[]'::JSONB;\r\n    v_item_detail JSONB;\r\n    v_order_details JSONB;\r\n    v_bank_ref TEXT := NULL;\r\n    v_address_owner UUID;\r\n    v_promo_result JSON;\r\n    v_item_total_cents BIGINT := 0;\r\n    v_vat_total_cents BIGINT := 0;\r\n    v_shipping_total_cents BIGINT := 0;\r\n    v_discount_total_cents BIGINT := 0;\r\n    v_paid_total_cents BIGINT := 0;\r\nBEGIN\r\n    -- Card flow must use payment_intent + 3D finalize path\r\n    IF p_payment_method \u003c\u003e 'bank_transfer' THEN\r\n        RETURN jsonb_build_object(\r\n            'success', false,\r\n            'message', 'Kart odemeleri yeni 3D akisi ile alinmaktadir. Lutfen kart odeme endpointini kullanin.'\r\n        );\r\n    END IF;\r\n\r\n    -- 1. Get User ID\r\n    v_user_id := auth.uid();\r\n    IF v_user_id IS NULL THEN\r\n        RETURN jsonb_build_object('success', false, 'message', 'Oturum amanz gerekiyor');\r\n    END IF;\r\n\r\n    -- 2. Address Ownership Check (IDOR Security Fix)\r\n    SELECT user_id INTO v_address_owner FROM public.addresses WHERE id = p_shipping_address_id;\r\n    IF v_address_owner IS NULL OR v_address_owner != v_user_id THEN\r\n         RETURN jsonb_build_object('success', false, 'message', 'Geersiz adres seimi: Adres size ait deil.');\r\n    END IF;\r\n\r\n    -- 3. Iterate input items\r\n    FOR v_item IN SELECT * FROM jsonb_array_elements(p_items)\r\n    LOOP\r\n        v_product_id := (v_item-\u003e\u003e'product_id')::UUID;\r\n        v_qty := (v_item-\u003e\u003e'quantity')::INT;\r\n\r\n        -- Negative Quantity Check (Logic Security Fix)\r\n        IF v_qty \u003c= 0 THEN\r\n             RETURN jsonb_build_object('success', false, 'message', 'Geersiz rn miktar: 0 veya negatif olamaz.');\r\n        END IF;\r\n\r\n        -- Get product from DB WITH LOCK (Race Condition Fix)\r\n        SELECT id, name, price, stock \r\n        INTO v_product_id, v_product_name, v_product_price, v_product_stock\r\n        FROM public.products \r\n        WHERE id = v_product_id\r\n        FOR UPDATE; -- Critical: Locks the row\r\n        \r\n        IF NOT FOUND THEN\r\n             RETURN jsonb_build_object('success', false, 'message', 'rn bulunamad: ID ' || v_product_id);\r\n        END IF;\r\n\r\n        -- Check stock validity\r\n        IF v_product_stock \u003c v_qty THEN\r\n             RETURN jsonb_build_object('success', false, 'message', 'Yetersiz stok: ' || v_product_name);\r\n        END IF;\r\n\r\n        -- Calculate item totals using DB price\r\n        v_item_subtotal := v_product_price * v_qty;\r\n        v_total_subtotal := v_total_subtotal + v_item_subtotal;\r\n        \r\n        -- Build item detail\r\n        v_item_detail := jsonb_build_object(\r\n            'product_id', v_product_id,\r\n            'product_name', v_product_name,\r\n            'quantity', v_qty,\r\n            'unit_price', v_product_price,\r\n            'subtotal', v_item_subtotal\r\n        );\r\n        \r\n        v_valid_items := v_valid_items || v_item_detail;\r\n        \r\n    END LOOP;\r\n\r\n    -- 4. VAT \u0026 Shipping Settings\r\n    SELECT \r\n        COALESCE(vat_rate, 0.20),\r\n        COALESCE(shipping_cost, 49.90),\r\n        COALESCE(free_shipping_threshold, 1500.0)\r\n    INTO v_vat_rate, v_shipping_cost, v_shipping_threshold\r\n    FROM public.site_settings\r\n    WHERE id = 1;\r\n\r\n    -- 5. VAT calculation\r\n    v_total_vat := v_total_subtotal * v_vat_rate;\r\n\r\n    -- 6. Promo Code (Backend Logic using verify_promo_code)\r\n    v_discount := 0; \r\n    IF p_promo_code IS NOT NULL AND length(p_promo_code) \u003e 0 THEN\r\n        BEGIN\r\n            -- Attempt to call verify_promo_code\r\n            SELECT public.verify_promo_code(p_promo_code) INTO v_promo_result;\r\n            \r\n            IF (v_promo_result-\u003e\u003e'valid')::boolean = true THEN\r\n                -- Check min order amount logic if applicable\r\n                 IF (v_promo_result-\u003e\u003e'discount_type') = 'percentage' THEN\r\n                     v_discount := (v_total_subtotal + v_total_vat) * ((v_promo_result-\u003e\u003e'discount_value')::decimal / 100);\r\n                     -- Max discount check\r\n                     IF (v_promo_result-\u003e\u003e'max_discount_amount') IS NOT NULL AND v_discount \u003e (v_promo_result-\u003e\u003e'max_discount_amount')::decimal THEN\r\n                         v_discount := (v_promo_result-\u003e\u003e'max_discount_amount')::decimal;\r\n                     END IF;\r\n                 ELSE\r\n                     v_discount := (v_promo_result-\u003e\u003e'discount_value')::decimal;\r\n                 END IF;\r\n            END IF;\r\n        EXCEPTION WHEN OTHERS THEN\r\n            v_discount := 0;\r\n        END;\r\n    END IF;\r\n\r\n    -- 7. Shipping calculation\r\n    IF (v_total_subtotal + v_total_vat - v_discount) \u003e= v_shipping_threshold THEN\r\n        v_shipping_cost := 0;\r\n    END IF;\r\n\r\n    -- 8. Final Total\r\n    v_final_total := v_total_subtotal + v_total_vat + v_shipping_cost - v_discount;\r\n    IF v_final_total \u003c 0 THEN v_final_total := 0; END IF;\r\n\r\n    v_item_total_cents := ROUND(v_total_subtotal * 100)::bigint;\r\n    v_vat_total_cents := ROUND(v_total_vat * 100)::bigint;\r\n    v_shipping_total_cents := ROUND(v_shipping_cost * 100)::bigint;\r\n    v_discount_total_cents := ROUND(v_discount * 100)::bigint;\r\n    v_paid_total_cents := ROUND(v_final_total * 100)::bigint;\r\n\r\n    -- Bank Reference\r\n    v_bank_ref := 'BRV-' || to_char(public.now(), 'YYMMDD') || '-' || upper(substring(md5(random()::text) from 1 for 4));\r\n\r\n    -- 9. Construct final order_details JSON\r\n    v_order_details := jsonb_build_object(\r\n        'items', v_valid_items,\r\n        'subtotal', v_total_subtotal,\r\n        'vat_rate', v_vat_rate,\r\n        'vat_amount', v_total_vat,\r\n        'shipping_cost', v_shipping_cost,\r\n        'total', v_final_total,\r\n        'promo_code', p_promo_code,\r\n        'discount', v_discount,\r\n        'bank_reference', v_bank_ref\r\n    );\r\n\r\n    -- 10. Insert Order\r\n    INSERT INTO public.orders (\r\n        user_id,\r\n        shipping_address_id,\r\n        payment_method,\r\n        status,\r\n        payment_status,\r\n        order_details,\r\n        currency,\r\n        installment_number,\r\n        item_total_cents,\r\n        vat_total_cents,\r\n        shipping_total_cents,\r\n        discount_total_cents,\r\n        commission_amount_cents,\r\n        paid_total_cents,\r\n        promo_code,\r\n        bank_reference\r\n    ) VALUES (\r\n        v_user_id,\r\n        p_shipping_address_id,\r\n        'bank_transfer',\r\n        'pending', \r\n        'pending',\r\n        v_order_details,\r\n        'TL',\r\n        1,\r\n        v_item_total_cents,\r\n        v_vat_total_cents,\r\n        v_shipping_total_cents,\r\n        v_discount_total_cents,\r\n        0,\r\n        v_paid_total_cents,\r\n        p_promo_code,\r\n        v_bank_ref\r\n    ) RETURNING id INTO v_order_id;\r\n    \r\n    -- 11. Insert Status History\r\n    BEGIN\r\n        INSERT INTO public.order_status_history (order_id, status, note, created_at)\r\n        VALUES (\r\n            v_order_id,\r\n            'pending',\r\n            'Sipari alnd (Havale/EFT Bekleniyor)',\r\n            public.now()\r\n        );\r\n    EXCEPTION WHEN OTHERS THEN\r\n        NULL;\r\n    END;\r\n\r\n    -- 12. Return Success\r\n    RETURN jsonb_build_object(\r\n        'success', true, \r\n        'order_id', v_order_id,\r\n        'total', v_final_total,\r\n        'shipping_cost', v_shipping_cost,\r\n        'bank_reference', v_bank_ref,\r\n        'message', 'Sipari baaryla oluturuldu'\r\n    );\r\n\r\nEXCEPTION WHEN OTHERS THEN\r\n    RAISE LOG 'create_order failed for user %, payment_method %, error %',\r\n        COALESCE(v_user_id::text, 'anonymous'),\r\n        COALESCE(p_payment_method, 'unknown'),\r\n        SQLERRM;\r\n    RETURN jsonb_build_object(\r\n        'success', false, \r\n        'message', 'Sipari oluturulurken beklenmeyen bir hata olutu. Ltfen tekrar deneyiniz.'\r\n    );\r\nEND;\r\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260218110000"},{"text":"fix_database_drift_orders_alignment"},{"binary":"0000000100000000000000190000000b000000010000007e2d2d204d6967726174696f6e3a20416c69676e206f7264657273207461626c652077697468206472696674206578706563746174696f6e7320616e64206c65676163792066756e6374696f6e20737570706f72740d0a2d2d20437265617465643a20323032362d30322d31382031303a33303a30300d0a0d0a424547494e0000009a2d2d20416464206d697373696e6720636f6c756d6e7320746f206f7264657273207461626c6520666f7220647269667420616c69676e6d656e7420616e64206c65676163792066756e6374696f6e20737570706f72740d0a414c544552205441424c45207075626c69632e6f72646572732041444420434f4c554d4e204946204e4f54204558495354532070726f6d6f5f636f6465205445585400000046414c544552205441424c45207075626c69632e6f72646572732041444420434f4c554d4e204946204e4f54204558495354532062616e6b5f7265666572656e6365205445585400000061414c544552205441424c45207075626c69632e6f72646572732041444420434f4c554d4e204946204e4f54204558495354532070726f647563745f69642055554944205245464552454e434553207075626c69632e70726f6475637473286964290000003f414c544552205441424c45207075626c69632e6f72646572732041444420434f4c554d4e204946204e4f5420455849535453207175616e7469747920494e540000004b414c544552205441424c45207075626c69632e6f72646572732041444420434f4c554d4e204946204e4f542045584953545320756e69745f707269636520444543494d414c2831302c322900000049414c544552205441424c45207075626c69632e6f72646572732041444420434f4c554d4e204946204e4f542045584953545320737562746f74616c20444543494d414c2831302c32290000004b414c544552205441424c45207075626c69632e6f72646572732041444420434f4c554d4e204946204e4f5420455849535453207661745f616d6f756e7420444543494d414c2831302c322900000046414c544552205441424c45207075626c69632e6f72646572732041444420434f4c554d4e204946204e4f542045584953545320746f74616c20444543494d414c2831302c3229000021022d2d20557064617465206372656174655f6f726465722066756e6374696f6e20746f20706f70756c617465206e657720636f6c756d6e730d0a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e6372656174655f6f72646572280d0a20202020705f6974656d73204a534f4e422c0d0a20202020705f7368697070696e675f616464726573735f696420555549442c0d0a20202020705f7061796d656e745f6d6574686f6420544558542c0d0a20202020705f70726f6d6f5f636f646520544558542044454641554c54204e554c4c0d0a290d0a52455455524e53204a534f4e420d0a4c414e475541474520706c706773716c0d0a534543555249545920444546494e45520d0a534554207365617263685f70617468203d2027270d0a41532024240d0a4445434c4152450d0a20202020765f757365725f696420555549443b0d0a20202020765f6974656d204a534f4e423b0d0a20202020765f70726f647563745f696420555549443b0d0a20202020765f70726f647563745f6e616d6520544558543b0d0a20202020765f70726f647563745f707269636520444543494d414c2831302c32293b0d0a20202020765f70726f647563745f73746f636b20494e543b0d0a20202020765f71747920494e543b0d0a20202020765f6974656d5f737562746f74616c20444543494d414c2831302c32293b0d0a20202020765f746f74616c5f737562746f74616c20444543494d414c2831302c3229203a3d20303b0d0a20202020765f746f74616c5f76617420444543494d414c2831302c3229203a3d20303b0d0a20202020765f7368697070696e675f636f737420444543494d414c2831302c32293b0d0a20202020765f7661745f7261746520444543494d414c2831302c34293b0d0a20202020765f7368697070696e675f7468726573686f6c6420444543494d414c2831322c32293b0d0a0d0a20202020765f66696e616c5f746f74616c20444543494d414c2831302c32293b0d0a20202020765f646973636f756e7420444543494d414c2831302c3229203a3d20303b0d0a20202020765f6f726465725f696420555549443b0d0a20202020765f76616c69645f6974656d73204a534f4e42203a3d20275b5d273a3a4a534f4e423b0d0a20202020765f6974656d5f64657461696c204a534f4e423b0d0a20202020765f6f726465725f64657461696c73204a534f4e423b0d0a20202020765f62616e6b5f7265662054455854203a3d204e554c4c3b0d0a20202020765f616464726573735f6f776e657220555549443b0d0a20202020765f70726f6d6f5f726573756c74204a534f4e3b0d0a20202020765f6974656d5f746f74616c5f63656e747320424947494e54203a3d20303b0d0a20202020765f7661745f746f74616c5f63656e747320424947494e54203a3d20303b0d0a20202020765f7368697070696e675f746f74616c5f63656e747320424947494e54203a3d20303b0d0a20202020765f646973636f756e745f746f74616c5f63656e747320424947494e54203a3d20303b0d0a20202020765f706169645f746f74616c5f63656e747320424947494e54203a3d20303b0d0a424547494e0d0a202020202d2d204361726420666c6f77206d75737420757365207061796d656e745f696e74656e74202b2033442066696e616c697a6520706174680d0a20202020494620705f7061796d656e745f6d6574686f64203c3e202762616e6b5f7472616e7366657227205448454e0d0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280d0a2020202020202020202020202773756363657373272c2066616c73652c0d0a202020202020202020202020276d657373616765272c20274b617274206f64656d656c6572692079656e6920334420616b69736920696c6520616c696e6d616b74616469722e204c757466656e206b617274206f64656d6520656e64706f696e74696e69206b756c6c616e696e2e270d0a2020202020202020293b0d0a20202020454e442049463b0d0a0d0a202020202d2d20312e2047657420557365722049440d0a20202020765f757365725f6964203a3d20617574682e75696428293b0d0a20202020494620765f757365725f6964204953204e554c4c205448454e0d0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274f747572756d2061c3a76d616ec4b17a20676572656b69796f7227293b0d0a20202020454e442049463b0d0a0d0a202020202d2d20322e2041646472657373204f776e65727368697020436865636b202849444f5220536563757269747920466978290d0a2020202053454c45435420757365725f696420494e544f20765f616464726573735f6f776e65722046524f4d207075626c69632e616464726573736573205748455245206964203d20705f7368697070696e675f616464726573735f69643b0d0a20202020494620765f616464726573735f6f776e6572204953204e554c4c204f5220765f616464726573735f6f776e657220213d20765f757365725f6964205448454e0d0a20202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274765c3a7657273697a206164726573207365c3a7696d693a2041647265732073697a6520616974206465c49f696c2e27293b0d0a20202020454e442049463b0d0a0d0a202020202d2d20332e204974657261746520696e707574206974656d730d0a20202020464f5220765f6974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e747328705f6974656d73290d0a202020204c4f4f500d0a2020202020202020765f70726f647563745f6964203a3d2028765f6974656d2d3e3e2770726f647563745f696427293a3a555549443b0d0a2020202020202020765f717479203a3d2028765f6974656d2d3e3e277175616e7469747927293a3a494e543b0d0a0d0a20202020202020202d2d204e65676174697665205175616e7469747920436865636b20284c6f67696320536563757269747920466978290d0a2020202020202020494620765f717479203c3d2030205448454e0d0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274765c3a7657273697a20c3bc72c3bc6e206d696b746172c4b13a20302076657961206e656761746966206f6c616d617a2e27293b0d0a2020202020202020454e442049463b0d0a0d0a20202020202020202d2d204765742070726f647563742066726f6d2044422057495448204c4f434b20285261636520436f6e646974696f6e20466978290d0a202020202020202053454c4543542069642c206e616d652c2070726963652c2073746f636b200d0a2020202020202020494e544f20765f70726f647563745f69642c20765f70726f647563745f6e616d652c20765f70726f647563745f70726963652c20765f70726f647563745f73746f636b0d0a202020202020202046524f4d207075626c69632e70726f6475637473200d0a20202020202020205748455245206964203d20765f70726f647563745f69640d0a2020202020202020464f52205550444154453b202d2d20437269746963616c3a204c6f636b732074686520726f770d0a20202020202020200d0a20202020202020204946204e4f5420464f554e44205448454e0d0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c2027c39c72c3bc6e2062756c756e616d6164c4b13a2049442027207c7c20765f70726f647563745f6964293b0d0a2020202020202020454e442049463b0d0a0d0a20202020202020202d2d20436865636b2073746f636b2076616c69646974790d0a2020202020202020494620765f70726f647563745f73746f636b203c20765f717479205448454e0d0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c2027596574657273697a2073746f6b3a2027207c7c20765f70726f647563745f6e616d65293b0d0a2020202020202020454e442049463b0d0a0d0a20202020202020202d2d2043616c63756c617465206974656d20746f74616c73207573696e672044422070726963650d0a2020202020202020765f6974656d5f737562746f74616c203a3d20765f70726f647563745f7072696365202a20765f7174793b0d0a2020202020202020765f746f74616c5f737562746f74616c203a3d20765f746f74616c5f737562746f74616c202b20765f6974656d5f737562746f74616c3b0d0a20202020202020200d0a20202020202020202d2d204275696c64206974656d2064657461696c0d0a2020202020202020765f6974656d5f64657461696c203a3d206a736f6e625f6275696c645f6f626a656374280d0a2020202020202020202020202770726f647563745f6964272c20765f70726f647563745f69642c0d0a2020202020202020202020202770726f647563745f6e616d65272c20765f70726f647563745f6e616d652c0d0a202020202020202020202020277175616e74697479272c20765f7174792c0d0a20202020202020202020202027756e69745f7072696365272c20765f70726f647563745f70726963652c0d0a20202020202020202020202027737562746f74616c272c20765f6974656d5f737562746f74616c0d0a2020202020202020293b0d0a20202020202020200d0a2020202020202020765f76616c69645f6974656d73203a3d20765f76616c69645f6974656d73207c7c20765f6974656d5f64657461696c3b0d0a20202020202020200d0a20202020454e44204c4f4f503b0d0a0d0a202020202d2d20342e205641542026205368697070696e672053657474696e67730d0a2020202053454c454354200d0a2020202020202020434f414c45534345287661745f726174652c20302e3230292c0d0a2020202020202020434f414c45534345287368697070696e675f636f73742c2034392e3930292c0d0a2020202020202020434f414c4553434528667265655f7368697070696e675f7468726573686f6c642c20313530302e30290d0a20202020494e544f20765f7661745f726174652c20765f7368697070696e675f636f73742c20765f7368697070696e675f7468726573686f6c640d0a2020202046524f4d207075626c69632e736974655f73657474696e67730d0a202020205748455245206964203d20313b0d0a0d0a202020202d2d20352e205641542063616c63756c6174696f6e0d0a20202020765f746f74616c5f766174203a3d20765f746f74616c5f737562746f74616c202a20765f7661745f726174653b0d0a0d0a202020202d2d20362e2050726f6d6f20436f646520284261636b656e64204c6f676963207573696e67207665726966795f70726f6d6f5f636f6465290d0a20202020765f646973636f756e74203a3d20303b200d0a20202020494620705f70726f6d6f5f636f6465204953204e4f54204e554c4c20414e44206c656e67746828705f70726f6d6f5f636f646529203e2030205448454e0d0a2020202020202020424547494e0d0a2020202020202020202020202d2d20417474656d707420746f2063616c6c207665726966795f70726f6d6f5f636f64650d0a20202020202020202020202053454c454354207075626c69632e7665726966795f70726f6d6f5f636f646528705f70726f6d6f5f636f64652920494e544f20765f70726f6d6f5f726573756c743b0d0a2020202020202020202020200d0a20202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e2776616c696427293a3a626f6f6c65616e203d2074727565205448454e0d0a202020202020202020202020202020202d2d20436865636b206d696e206f7264657220616d6f756e74206c6f676963206966206170706c696361626c650d0a202020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f747970652729203d202770657263656e7461676527205448454e0d0a202020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f746f74616c5f737562746f74616c202b20765f746f74616c5f76617429202a202828765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a646563696d616c202f20313030293b0d0a2020202020202020202020202020202020202020202d2d204d617820646973636f756e7420636865636b0d0a20202020202020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e742729204953204e4f54204e554c4c20414e4420765f646973636f756e74203e2028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e7427293a3a646563696d616c205448454e0d0a20202020202020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e7427293a3a646563696d616c3b0d0a202020202020202020202020202020202020202020454e442049463b0d0a2020202020202020202020202020202020454c53450d0a202020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a646563696d616c3b0d0a2020202020202020202020202020202020454e442049463b0d0a202020202020202020202020454e442049463b0d0a2020202020202020455843455054494f4e205748454e204f5448455253205448454e0d0a202020202020202020202020765f646973636f756e74203a3d20303b0d0a2020202020202020454e443b0d0a20202020454e442049463b0d0a0d0a202020202d2d20372e205368697070696e672063616c63756c6174696f6e0d0a2020202049462028765f746f74616c5f737562746f74616c202b20765f746f74616c5f766174202d20765f646973636f756e7429203e3d20765f7368697070696e675f7468726573686f6c64205448454e0d0a2020202020202020765f7368697070696e675f636f7374203a3d20303b0d0a20202020454e442049463b0d0a0d0a202020202d2d20382e2046696e616c20546f74616c0d0a20202020765f66696e616c5f746f74616c203a3d20765f746f74616c5f737562746f74616c202b20765f746f74616c5f766174202b20765f7368697070696e675f636f7374202d20765f646973636f756e743b0d0a20202020494620765f66696e616c5f746f74616c203c2030205448454e20765f66696e616c5f746f74616c203a3d20303b20454e442049463b0d0a0d0a20202020765f6974656d5f746f74616c5f63656e7473203a3d20524f554e4428765f746f74616c5f737562746f74616c202a20313030293a3a626967696e743b0d0a20202020765f7661745f746f74616c5f63656e7473203a3d20524f554e4428765f746f74616c5f766174202a20313030293a3a626967696e743b0d0a20202020765f7368697070696e675f746f74616c5f63656e7473203a3d20524f554e4428765f7368697070696e675f636f7374202a20313030293a3a626967696e743b0d0a20202020765f646973636f756e745f746f74616c5f63656e7473203a3d20524f554e4428765f646973636f756e74202a20313030293a3a626967696e743b0d0a20202020765f706169645f746f74616c5f63656e7473203a3d20524f554e4428765f66696e616c5f746f74616c202a20313030293a3a626967696e743b0d0a0d0a202020202d2d2042616e6b205265666572656e63650d0a20202020765f62616e6b5f726566203a3d20274252562d27207c7c20746f5f63686172287075626c69632e6e6f7728292c202759594d4d44442729207c7c20272d27207c7c20757070657228737562737472696e67286d64352872616e646f6d28293a3a74657874292066726f6d203120666f72203429293b0d0a0d0a202020202d2d20392e20436f6e7374727563742066696e616c206f726465725f64657461696c73204a534f4e0d0a20202020765f6f726465725f64657461696c73203a3d206a736f6e625f6275696c645f6f626a656374280d0a2020202020202020276974656d73272c20765f76616c69645f6974656d732c0d0a202020202020202027737562746f74616c272c20765f746f74616c5f737562746f74616c2c0d0a2020202020202020277661745f72617465272c20765f7661745f726174652c0d0a2020202020202020277661745f616d6f756e74272c20765f746f74616c5f7661742c0d0a2020202020202020277368697070696e675f636f7374272c20765f7368697070696e675f636f73742c0d0a202020202020202027746f74616c272c20765f66696e616c5f746f74616c2c0d0a20202020202020202770726f6d6f5f636f6465272c20705f70726f6d6f5f636f64652c0d0a202020202020202027646973636f756e74272c20765f646973636f756e742c0d0a20202020202020202762616e6b5f7265666572656e6365272c20765f62616e6b5f7265660d0a20202020293b0d0a0d0a202020202d2d2031302e20496e73657274204f726465720d0a20202020494e5345525420494e544f207075626c69632e6f726465727320280d0a2020202020202020757365725f69642c0d0a20202020202020207368697070696e675f616464726573735f69642c0d0a20202020202020207061796d656e745f6d6574686f642c0d0a20202020202020207374617475732c0d0a20202020202020207061796d656e745f7374617475732c0d0a20202020202020206f726465725f64657461696c732c0d0a202020202020202063757272656e63792c0d0a2020202020202020696e7374616c6c6d656e745f6e756d6265722c0d0a20202020202020206974656d5f746f74616c5f63656e74732c0d0a20202020202020207661745f746f74616c5f63656e74732c0d0a20202020202020207368697070696e675f746f74616c5f63656e74732c0d0a2020202020202020646973636f756e745f746f74616c5f63656e74732c0d0a2020202020202020636f6d6d697373696f6e5f616d6f756e745f63656e74732c0d0a2020202020202020706169645f746f74616c5f63656e74732c0d0a202020202020202070726f6d6f5f636f64652c0d0a202020202020202062616e6b5f7265666572656e63650d0a20202020292056414c55455320280d0a2020202020202020765f757365725f69642c0d0a2020202020202020705f7368697070696e675f616464726573735f69642c0d0a20202020202020202762616e6b5f7472616e73666572272c0d0a20202020202020202770656e64696e67272c200d0a20202020202020202770656e64696e67272c0d0a2020202020202020765f6f726465725f64657461696c732c0d0a202020202020202027544c272c0d0a2020202020202020312c0d0a2020202020202020765f6974656d5f746f74616c5f63656e74732c0d0a2020202020202020765f7661745f746f74616c5f63656e74732c0d0a2020202020202020765f7368697070696e675f746f74616c5f63656e74732c0d0a2020202020202020765f646973636f756e745f746f74616c5f63656e74732c0d0a2020202020202020302c0d0a2020202020202020765f706169645f746f74616c5f63656e74732c0d0a2020202020202020705f70726f6d6f5f636f64652c0d0a2020202020202020765f62616e6b5f7265660d0a20202020292052455455524e494e4720696420494e544f20765f6f726465725f69643b0d0a202020200d0a202020202d2d2031312e20496e736572742053746174757320486973746f72790d0a20202020424547494e0d0a2020202020202020494e5345525420494e544f207075626c69632e6f726465725f7374617475735f686973746f727920286f726465725f69642c207374617475732c206e6f74652c20637265617465645f6174290d0a202020202020202056414c55455320280d0a202020202020202020202020765f6f726465725f69642c0d0a2020202020202020202020202770656e64696e67272c0d0a20202020202020202020202027536970617269c59f20616cc4b16e64c4b12028486176616c652f4546542042656b6c656e69796f7229272c0d0a2020202020202020202020207075626c69632e6e6f7728290d0a2020202020202020293b0d0a20202020455843455054494f4e205748454e204f5448455253205448454e0d0a20202020202020204e554c4c3b0d0a20202020454e443b0d0a0d0a202020202d2d2031322e2052657475726e20537563636573730d0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280d0a20202020202020202773756363657373272c20747275652c200d0a2020202020202020276f726465725f6964272c20765f6f726465725f69642c0d0a202020202020202027746f74616c272c20765f66696e616c5f746f74616c2c0d0a2020202020202020277368697070696e675f636f7374272c20765f7368697070696e675f636f73742c0d0a20202020202020202762616e6b5f7265666572656e6365272c20765f62616e6b5f7265662c0d0a2020202020202020276d657373616765272c2027536970617269c59f206261c59f6172c4b1796c61206f6c75c59f747572756c6475270d0a20202020293b0d0a0d0a455843455054494f4e205748454e204f5448455253205448454e0d0a202020205241495345204c4f4720276372656174655f6f72646572206661696c656420666f72207573657220252c207061796d656e745f6d6574686f6420252c206572726f722025272c0d0a2020202020202020434f414c4553434528765f757365725f69643a3a746578742c2027616e6f6e796d6f757327292c0d0a2020202020202020434f414c4553434528705f7061796d656e745f6d6574686f642c2027756e6b6e6f776e27292c0d0a202020202020202053514c4552524d3b0d0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280d0a20202020202020202773756363657373272c2066616c73652c200d0a2020202020202020276d657373616765272c2027536970617269c59f206f6c75c59f747572756c75726b656e2062656b6c656e6d6579656e206269722068617461206f6c75c59f74752e204cc3bc7466656e2074656b7261722064656e6579696e697a2e270d0a20202020293b0d0a454e443b0d0a242400000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260218113000_reconcile_create_order_drift.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Reconcile CI drift for public.create_order detected by security-gate\r\n-- Source: GitHub Actions drift output (public schema diff)\r\n\r\nSET check_function_bodies = off","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.create_order(p_items jsonb, p_shipping_address_id uuid, p_payment_method text, p_promo_code text DEFAULT NULL::text)\r\n RETURNS jsonb\r\n LANGUAGE plpgsql\r\n SECURITY DEFINER\r\n SET search_path TO ''\r\nAS $function$\r\nDECLARE\r\n    v_user_id UUID;\r\n    v_item JSONB;\r\n    v_product_id UUID;\r\n    v_product_name TEXT;\r\n    v_product_price DECIMAL(10,2);\r\n    v_product_stock INT;\r\n    v_qty INT;\r\n    v_item_subtotal DECIMAL(10,2);\r\n    v_total_subtotal DECIMAL(10,2) := 0;\r\n    v_total_vat DECIMAL(10,2) := 0;\r\n    v_shipping_cost DECIMAL(10,2);\r\n    v_vat_rate DECIMAL(10,4);\r\n    v_shipping_threshold DECIMAL(12,2);\r\n    v_final_total DECIMAL(10,2);\r\n    v_discount DECIMAL(10,2) := 0;\r\n    v_order_id UUID;\r\n    v_valid_items JSONB := '[]'::JSONB;\r\n    v_item_detail JSONB;\r\n    v_order_details JSONB;\r\n    v_bank_ref TEXT := NULL;\r\n    v_address_owner UUID;\r\n    v_promo_result JSON;\r\n    v_item_total_cents BIGINT := 0;\r\n    v_vat_total_cents BIGINT := 0;\r\n    v_shipping_total_cents BIGINT := 0;\r\n    v_discount_total_cents BIGINT := 0;\r\n    v_paid_total_cents BIGINT := 0;\r\nBEGIN\r\n    -- Card flow must use payment_intent + 3D finalize path\r\n    IF p_payment_method \u003c\u003e 'bank_transfer' THEN\r\n        RETURN jsonb_build_object(\r\n            'success', false,\r\n            'message', 'Kart odemeleri yeni 3D akisi ile alinmaktadir. Lutfen kart odeme endpointini kullanin.'\r\n        );\r\n    END IF;\r\n    -- 1. Get User ID\r\n    v_user_id := auth.uid();\r\n    IF v_user_id IS NULL THEN\r\n        RETURN jsonb_build_object('success', false, 'message', 'Oturum amanz gerekiyor');\r\n    END IF;\r\n    -- 2. Address Ownership Check (IDOR Security Fix)\r\n    SELECT user_id INTO v_address_owner FROM public.addresses WHERE id = p_shipping_address_id;\r\n    IF v_address_owner IS NULL OR v_address_owner != v_user_id THEN\r\n         RETURN jsonb_build_object('success', false, 'message', 'Geersiz adres seimi: Adres size ait deil.');\r\n    END IF;\r\n    -- 3. Iterate input items\r\n    FOR v_item IN SELECT * FROM jsonb_array_elements(p_items)\r\n    LOOP\r\n        v_product_id := (v_item-\u003e\u003e'product_id')::UUID;\r\n        v_qty := (v_item-\u003e\u003e'quantity')::INT;\r\n        -- Negative Quantity Check (Logic Security Fix)\r\n        IF v_qty \u003c= 0 THEN\r\n             RETURN jsonb_build_object('success', false, 'message', 'Geersiz rn miktar: 0 veya negatif olamaz.');\r\n        END IF;\r\n        -- Get product from DB WITH LOCK (Race Condition Fix)\r\n        SELECT id, name, price, stock \r\n        INTO v_product_id, v_product_name, v_product_price, v_product_stock\r\n        FROM public.products \r\n        WHERE id = v_product_id\r\n        FOR UPDATE; -- Critical: Locks the row\r\n        \r\n        IF NOT FOUND THEN\r\n             RETURN jsonb_build_object('success', false, 'message', 'rn bulunamad: ID ' || v_product_id);\r\n        END IF;\r\n        -- Check stock validity\r\n        IF v_product_stock \u003c v_qty THEN\r\n             RETURN jsonb_build_object('success', false, 'message', 'Yetersiz stok: ' || v_product_name);\r\n        END IF;\r\n        -- Calculate item totals using DB price\r\n        v_item_subtotal := v_product_price * v_qty;\r\n        v_total_subtotal := v_total_subtotal + v_item_subtotal;\r\n        \r\n        -- Build item detail\r\n        v_item_detail := jsonb_build_object(\r\n            'product_id', v_product_id,\r\n            'product_name', v_product_name,\r\n            'quantity', v_qty,\r\n            'unit_price', v_product_price,\r\n            'subtotal', v_item_subtotal\r\n        );\r\n        \r\n        v_valid_items := v_valid_items || v_item_detail;\r\n        \r\n    END LOOP;\r\n    -- 4. VAT \u0026 Shipping Settings\r\n    SELECT \r\n        COALESCE(vat_rate, 0.20),\r\n        COALESCE(shipping_cost, 49.90),\r\n        COALESCE(free_shipping_threshold, 1500.0)\r\n    INTO v_vat_rate, v_shipping_cost, v_shipping_threshold\r\n    FROM public.site_settings\r\n    WHERE id = 1;\r\n    -- 5. VAT calculation\r\n    v_total_vat := v_total_subtotal * v_vat_rate;\r\n    -- 6. Promo Code (Backend Logic using verify_promo_code)\r\n    v_discount := 0; \r\n    IF p_promo_code IS NOT NULL AND length(p_promo_code) \u003e 0 THEN\r\n        BEGIN\r\n            -- Attempt to call verify_promo_code\r\n            SELECT public.verify_promo_code(p_promo_code) INTO v_promo_result;\r\n            \r\n            IF (v_promo_result-\u003e\u003e'valid')::boolean = true THEN\r\n                -- Check min order amount logic if applicable\r\n                 IF (v_promo_result-\u003e\u003e'discount_type') = 'percentage' THEN\r\n                     v_discount := (v_total_subtotal + v_total_vat) * ((v_promo_result-\u003e\u003e'discount_value')::decimal / 100);\r\n                     -- Max discount check\r\n                     IF (v_promo_result-\u003e\u003e'max_discount_amount') IS NOT NULL AND v_discount \u003e (v_promo_result-\u003e\u003e'max_discount_amount')::decimal THEN\r\n                         v_discount := (v_promo_result-\u003e\u003e'max_discount_amount')::decimal;\r\n                     END IF;\r\n                 ELSE\r\n                     v_discount := (v_promo_result-\u003e\u003e'discount_value')::decimal;\r\n                 END IF;\r\n            END IF;\r\n        EXCEPTION WHEN OTHERS THEN\r\n            v_discount := 0;\r\n        END;\r\n    END IF;\r\n    -- 7. Shipping calculation\r\n    IF (v_total_subtotal + v_total_vat - v_discount) \u003e= v_shipping_threshold THEN\r\n        v_shipping_cost := 0;\r\n    END IF;\r\n    -- 8. Final Total\r\n    v_final_total := v_total_subtotal + v_total_vat + v_shipping_cost - v_discount;\r\n    IF v_final_total \u003c 0 THEN v_final_total := 0; END IF;\r\n    v_item_total_cents := ROUND(v_total_subtotal * 100)::bigint;\r\n    v_vat_total_cents := ROUND(v_total_vat * 100)::bigint;\r\n    v_shipping_total_cents := ROUND(v_shipping_cost * 100)::bigint;\r\n    v_discount_total_cents := ROUND(v_discount * 100)::bigint;\r\n    v_paid_total_cents := ROUND(v_final_total * 100)::bigint;\r\n    -- Bank Reference\r\n    v_bank_ref := 'BRV-' || to_char(public.now(), 'YYMMDD') || '-' || upper(substring(md5(random()::text) from 1 for 4));\r\n    -- 9. Construct final order_details JSON\r\n    v_order_details := jsonb_build_object(\r\n        'items', v_valid_items,\r\n        'subtotal', v_total_subtotal,\r\n        'vat_rate', v_vat_rate,\r\n        'vat_amount', v_total_vat,\r\n        'shipping_cost', v_shipping_cost,\r\n        'total', v_final_total,\r\n        'promo_code', p_promo_code,\r\n        'discount', v_discount,\r\n        'bank_reference', v_bank_ref\r\n    );\r\n    -- 10. Insert Order\r\n    INSERT INTO public.orders (\r\n        user_id,\r\n        shipping_address_id,\r\n        payment_method,\r\n        status,\r\n        payment_status,\r\n        order_details,\r\n        currency,\r\n        installment_number,\r\n        item_total_cents,\r\n        vat_total_cents,\r\n        shipping_total_cents,\r\n        discount_total_cents,\r\n        commission_amount_cents,\r\n        paid_total_cents,\r\n        promo_code,\r\n        bank_reference\r\n    ) VALUES (\r\n        v_user_id,\r\n        p_shipping_address_id,\r\n        'bank_transfer',\r\n        'pending', \r\n        'pending',\r\n        v_order_details,\r\n        'TL',\r\n        1,\r\n        v_item_total_cents,\r\n        v_vat_total_cents,\r\n        v_shipping_total_cents,\r\n        v_discount_total_cents,\r\n        0,\r\n        v_paid_total_cents,\r\n        p_promo_code,\r\n        v_bank_ref\r\n    ) RETURNING id INTO v_order_id;\r\n    \r\n    -- 11. Insert Status History\r\n    BEGIN\r\n        INSERT INTO public.order_status_history (order_id, status, note, created_at)\r\n        VALUES (\r\n            v_order_id,\r\n            'pending',\r\n            'Sipari alnd (Havale/EFT Bekleniyor)',\r\n            public.now()\r\n        );\r\n    EXCEPTION WHEN OTHERS THEN\r\n        NULL;\r\n    END;\r\n    -- 12. Return Success\r\n    RETURN jsonb_build_object(\r\n        'success', true, \r\n        'order_id', v_order_id,\r\n        'total', v_final_total,\r\n        'shipping_cost', v_shipping_cost,\r\n        'bank_reference', v_bank_ref,\r\n        'message', 'Sipari baaryla oluturuldu'\r\n    );\r\nEXCEPTION WHEN OTHERS THEN\r\n    RAISE LOG 'create_order failed for user %, payment_method %, error %',\r\n        COALESCE(v_user_id::text, 'anonymous'),\r\n        COALESCE(p_payment_method, 'unknown'),\r\n        SQLERRM;\r\n    RETURN jsonb_build_object(\r\n        'success', false, \r\n        'message', 'Sipari oluturulurken beklenmeyen bir hata olutu. Ltfen tekrar deneyiniz.'\r\n    );\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260218113000"},{"text":"reconcile_create_order_drift"},{"binary":"0000000100000000000000190000000200000001000000a72d2d205265636f6e63696c6520434920647269667420666f72207075626c69632e6372656174655f6f726465722064657465637465642062792073656375726974792d676174650d0a2d2d20536f757263653a2047697448756220416374696f6e73206472696674206f757470757420287075626c696320736368656d612064696666290d0a0d0a53455420636865636b5f66756e6374696f6e5f626f64696573203d206f6666000020a7435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e6372656174655f6f7264657228705f6974656d73206a736f6e622c20705f7368697070696e675f616464726573735f696420757569642c20705f7061796d656e745f6d6574686f6420746578742c20705f70726f6d6f5f636f646520746578742044454641554c54204e554c4c3a3a74657874290d0a2052455455524e53206a736f6e620d0a204c414e475541474520706c706773716c0d0a20534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f2027270d0a4153202466756e6374696f6e240d0a4445434c4152450d0a20202020765f757365725f696420555549443b0d0a20202020765f6974656d204a534f4e423b0d0a20202020765f70726f647563745f696420555549443b0d0a20202020765f70726f647563745f6e616d6520544558543b0d0a20202020765f70726f647563745f707269636520444543494d414c2831302c32293b0d0a20202020765f70726f647563745f73746f636b20494e543b0d0a20202020765f71747920494e543b0d0a20202020765f6974656d5f737562746f74616c20444543494d414c2831302c32293b0d0a20202020765f746f74616c5f737562746f74616c20444543494d414c2831302c3229203a3d20303b0d0a20202020765f746f74616c5f76617420444543494d414c2831302c3229203a3d20303b0d0a20202020765f7368697070696e675f636f737420444543494d414c2831302c32293b0d0a20202020765f7661745f7261746520444543494d414c2831302c34293b0d0a20202020765f7368697070696e675f7468726573686f6c6420444543494d414c2831322c32293b0d0a20202020765f66696e616c5f746f74616c20444543494d414c2831302c32293b0d0a20202020765f646973636f756e7420444543494d414c2831302c3229203a3d20303b0d0a20202020765f6f726465725f696420555549443b0d0a20202020765f76616c69645f6974656d73204a534f4e42203a3d20275b5d273a3a4a534f4e423b0d0a20202020765f6974656d5f64657461696c204a534f4e423b0d0a20202020765f6f726465725f64657461696c73204a534f4e423b0d0a20202020765f62616e6b5f7265662054455854203a3d204e554c4c3b0d0a20202020765f616464726573735f6f776e657220555549443b0d0a20202020765f70726f6d6f5f726573756c74204a534f4e3b0d0a20202020765f6974656d5f746f74616c5f63656e747320424947494e54203a3d20303b0d0a20202020765f7661745f746f74616c5f63656e747320424947494e54203a3d20303b0d0a20202020765f7368697070696e675f746f74616c5f63656e747320424947494e54203a3d20303b0d0a20202020765f646973636f756e745f746f74616c5f63656e747320424947494e54203a3d20303b0d0a20202020765f706169645f746f74616c5f63656e747320424947494e54203a3d20303b0d0a424547494e0d0a202020202d2d204361726420666c6f77206d75737420757365207061796d656e745f696e74656e74202b2033442066696e616c697a6520706174680d0a20202020494620705f7061796d656e745f6d6574686f64203c3e202762616e6b5f7472616e7366657227205448454e0d0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280d0a2020202020202020202020202773756363657373272c2066616c73652c0d0a202020202020202020202020276d657373616765272c20274b617274206f64656d656c6572692079656e6920334420616b69736920696c6520616c696e6d616b74616469722e204c757466656e206b617274206f64656d6520656e64706f696e74696e69206b756c6c616e696e2e270d0a2020202020202020293b0d0a20202020454e442049463b0d0a202020202d2d20312e2047657420557365722049440d0a20202020765f757365725f6964203a3d20617574682e75696428293b0d0a20202020494620765f757365725f6964204953204e554c4c205448454e0d0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274f747572756d2061c3a76d616ec4b17a20676572656b69796f7227293b0d0a20202020454e442049463b0d0a202020202d2d20322e2041646472657373204f776e65727368697020436865636b202849444f5220536563757269747920466978290d0a2020202053454c45435420757365725f696420494e544f20765f616464726573735f6f776e65722046524f4d207075626c69632e616464726573736573205748455245206964203d20705f7368697070696e675f616464726573735f69643b0d0a20202020494620765f616464726573735f6f776e6572204953204e554c4c204f5220765f616464726573735f6f776e657220213d20765f757365725f6964205448454e0d0a20202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274765c3a7657273697a206164726573207365c3a7696d693a2041647265732073697a6520616974206465c49f696c2e27293b0d0a20202020454e442049463b0d0a202020202d2d20332e204974657261746520696e707574206974656d730d0a20202020464f5220765f6974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e747328705f6974656d73290d0a202020204c4f4f500d0a2020202020202020765f70726f647563745f6964203a3d2028765f6974656d2d3e3e2770726f647563745f696427293a3a555549443b0d0a2020202020202020765f717479203a3d2028765f6974656d2d3e3e277175616e7469747927293a3a494e543b0d0a20202020202020202d2d204e65676174697665205175616e7469747920436865636b20284c6f67696320536563757269747920466978290d0a2020202020202020494620765f717479203c3d2030205448454e0d0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274765c3a7657273697a20c3bc72c3bc6e206d696b746172c4b13a20302076657961206e656761746966206f6c616d617a2e27293b0d0a2020202020202020454e442049463b0d0a20202020202020202d2d204765742070726f647563742066726f6d2044422057495448204c4f434b20285261636520436f6e646974696f6e20466978290d0a202020202020202053454c4543542069642c206e616d652c2070726963652c2073746f636b200d0a2020202020202020494e544f20765f70726f647563745f69642c20765f70726f647563745f6e616d652c20765f70726f647563745f70726963652c20765f70726f647563745f73746f636b0d0a202020202020202046524f4d207075626c69632e70726f6475637473200d0a20202020202020205748455245206964203d20765f70726f647563745f69640d0a2020202020202020464f52205550444154453b202d2d20437269746963616c3a204c6f636b732074686520726f770d0a20202020202020200d0a20202020202020204946204e4f5420464f554e44205448454e0d0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c2027c39c72c3bc6e2062756c756e616d6164c4b13a2049442027207c7c20765f70726f647563745f6964293b0d0a2020202020202020454e442049463b0d0a20202020202020202d2d20436865636b2073746f636b2076616c69646974790d0a2020202020202020494620765f70726f647563745f73746f636b203c20765f717479205448454e0d0a2020202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c2027596574657273697a2073746f6b3a2027207c7c20765f70726f647563745f6e616d65293b0d0a2020202020202020454e442049463b0d0a20202020202020202d2d2043616c63756c617465206974656d20746f74616c73207573696e672044422070726963650d0a2020202020202020765f6974656d5f737562746f74616c203a3d20765f70726f647563745f7072696365202a20765f7174793b0d0a2020202020202020765f746f74616c5f737562746f74616c203a3d20765f746f74616c5f737562746f74616c202b20765f6974656d5f737562746f74616c3b0d0a20202020202020200d0a20202020202020202d2d204275696c64206974656d2064657461696c0d0a2020202020202020765f6974656d5f64657461696c203a3d206a736f6e625f6275696c645f6f626a656374280d0a2020202020202020202020202770726f647563745f6964272c20765f70726f647563745f69642c0d0a2020202020202020202020202770726f647563745f6e616d65272c20765f70726f647563745f6e616d652c0d0a202020202020202020202020277175616e74697479272c20765f7174792c0d0a20202020202020202020202027756e69745f7072696365272c20765f70726f647563745f70726963652c0d0a20202020202020202020202027737562746f74616c272c20765f6974656d5f737562746f74616c0d0a2020202020202020293b0d0a20202020202020200d0a2020202020202020765f76616c69645f6974656d73203a3d20765f76616c69645f6974656d73207c7c20765f6974656d5f64657461696c3b0d0a20202020202020200d0a20202020454e44204c4f4f503b0d0a202020202d2d20342e205641542026205368697070696e672053657474696e67730d0a2020202053454c454354200d0a2020202020202020434f414c45534345287661745f726174652c20302e3230292c0d0a2020202020202020434f414c45534345287368697070696e675f636f73742c2034392e3930292c0d0a2020202020202020434f414c4553434528667265655f7368697070696e675f7468726573686f6c642c20313530302e30290d0a20202020494e544f20765f7661745f726174652c20765f7368697070696e675f636f73742c20765f7368697070696e675f7468726573686f6c640d0a2020202046524f4d207075626c69632e736974655f73657474696e67730d0a202020205748455245206964203d20313b0d0a202020202d2d20352e205641542063616c63756c6174696f6e0d0a20202020765f746f74616c5f766174203a3d20765f746f74616c5f737562746f74616c202a20765f7661745f726174653b0d0a202020202d2d20362e2050726f6d6f20436f646520284261636b656e64204c6f676963207573696e67207665726966795f70726f6d6f5f636f6465290d0a20202020765f646973636f756e74203a3d20303b200d0a20202020494620705f70726f6d6f5f636f6465204953204e4f54204e554c4c20414e44206c656e67746828705f70726f6d6f5f636f646529203e2030205448454e0d0a2020202020202020424547494e0d0a2020202020202020202020202d2d20417474656d707420746f2063616c6c207665726966795f70726f6d6f5f636f64650d0a20202020202020202020202053454c454354207075626c69632e7665726966795f70726f6d6f5f636f646528705f70726f6d6f5f636f64652920494e544f20765f70726f6d6f5f726573756c743b0d0a2020202020202020202020200d0a20202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e2776616c696427293a3a626f6f6c65616e203d2074727565205448454e0d0a202020202020202020202020202020202d2d20436865636b206d696e206f7264657220616d6f756e74206c6f676963206966206170706c696361626c650d0a202020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f747970652729203d202770657263656e7461676527205448454e0d0a202020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f746f74616c5f737562746f74616c202b20765f746f74616c5f76617429202a202828765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a646563696d616c202f20313030293b0d0a2020202020202020202020202020202020202020202d2d204d617820646973636f756e7420636865636b0d0a20202020202020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e742729204953204e4f54204e554c4c20414e4420765f646973636f756e74203e2028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e7427293a3a646563696d616c205448454e0d0a20202020202020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e7427293a3a646563696d616c3b0d0a202020202020202020202020202020202020202020454e442049463b0d0a2020202020202020202020202020202020454c53450d0a202020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a646563696d616c3b0d0a2020202020202020202020202020202020454e442049463b0d0a202020202020202020202020454e442049463b0d0a2020202020202020455843455054494f4e205748454e204f5448455253205448454e0d0a202020202020202020202020765f646973636f756e74203a3d20303b0d0a2020202020202020454e443b0d0a20202020454e442049463b0d0a202020202d2d20372e205368697070696e672063616c63756c6174696f6e0d0a2020202049462028765f746f74616c5f737562746f74616c202b20765f746f74616c5f766174202d20765f646973636f756e7429203e3d20765f7368697070696e675f7468726573686f6c64205448454e0d0a2020202020202020765f7368697070696e675f636f7374203a3d20303b0d0a20202020454e442049463b0d0a202020202d2d20382e2046696e616c20546f74616c0d0a20202020765f66696e616c5f746f74616c203a3d20765f746f74616c5f737562746f74616c202b20765f746f74616c5f766174202b20765f7368697070696e675f636f7374202d20765f646973636f756e743b0d0a20202020494620765f66696e616c5f746f74616c203c2030205448454e20765f66696e616c5f746f74616c203a3d20303b20454e442049463b0d0a20202020765f6974656d5f746f74616c5f63656e7473203a3d20524f554e4428765f746f74616c5f737562746f74616c202a20313030293a3a626967696e743b0d0a20202020765f7661745f746f74616c5f63656e7473203a3d20524f554e4428765f746f74616c5f766174202a20313030293a3a626967696e743b0d0a20202020765f7368697070696e675f746f74616c5f63656e7473203a3d20524f554e4428765f7368697070696e675f636f7374202a20313030293a3a626967696e743b0d0a20202020765f646973636f756e745f746f74616c5f63656e7473203a3d20524f554e4428765f646973636f756e74202a20313030293a3a626967696e743b0d0a20202020765f706169645f746f74616c5f63656e7473203a3d20524f554e4428765f66696e616c5f746f74616c202a20313030293a3a626967696e743b0d0a202020202d2d2042616e6b205265666572656e63650d0a20202020765f62616e6b5f726566203a3d20274252562d27207c7c20746f5f63686172287075626c69632e6e6f7728292c202759594d4d44442729207c7c20272d27207c7c20757070657228737562737472696e67286d64352872616e646f6d28293a3a74657874292066726f6d203120666f72203429293b0d0a202020202d2d20392e20436f6e7374727563742066696e616c206f726465725f64657461696c73204a534f4e0d0a20202020765f6f726465725f64657461696c73203a3d206a736f6e625f6275696c645f6f626a656374280d0a2020202020202020276974656d73272c20765f76616c69645f6974656d732c0d0a202020202020202027737562746f74616c272c20765f746f74616c5f737562746f74616c2c0d0a2020202020202020277661745f72617465272c20765f7661745f726174652c0d0a2020202020202020277661745f616d6f756e74272c20765f746f74616c5f7661742c0d0a2020202020202020277368697070696e675f636f7374272c20765f7368697070696e675f636f73742c0d0a202020202020202027746f74616c272c20765f66696e616c5f746f74616c2c0d0a20202020202020202770726f6d6f5f636f6465272c20705f70726f6d6f5f636f64652c0d0a202020202020202027646973636f756e74272c20765f646973636f756e742c0d0a20202020202020202762616e6b5f7265666572656e6365272c20765f62616e6b5f7265660d0a20202020293b0d0a202020202d2d2031302e20496e73657274204f726465720d0a20202020494e5345525420494e544f207075626c69632e6f726465727320280d0a2020202020202020757365725f69642c0d0a20202020202020207368697070696e675f616464726573735f69642c0d0a20202020202020207061796d656e745f6d6574686f642c0d0a20202020202020207374617475732c0d0a20202020202020207061796d656e745f7374617475732c0d0a20202020202020206f726465725f64657461696c732c0d0a202020202020202063757272656e63792c0d0a2020202020202020696e7374616c6c6d656e745f6e756d6265722c0d0a20202020202020206974656d5f746f74616c5f63656e74732c0d0a20202020202020207661745f746f74616c5f63656e74732c0d0a20202020202020207368697070696e675f746f74616c5f63656e74732c0d0a2020202020202020646973636f756e745f746f74616c5f63656e74732c0d0a2020202020202020636f6d6d697373696f6e5f616d6f756e745f63656e74732c0d0a2020202020202020706169645f746f74616c5f63656e74732c0d0a202020202020202070726f6d6f5f636f64652c0d0a202020202020202062616e6b5f7265666572656e63650d0a20202020292056414c55455320280d0a2020202020202020765f757365725f69642c0d0a2020202020202020705f7368697070696e675f616464726573735f69642c0d0a20202020202020202762616e6b5f7472616e73666572272c0d0a20202020202020202770656e64696e67272c200d0a20202020202020202770656e64696e67272c0d0a2020202020202020765f6f726465725f64657461696c732c0d0a202020202020202027544c272c0d0a2020202020202020312c0d0a2020202020202020765f6974656d5f746f74616c5f63656e74732c0d0a2020202020202020765f7661745f746f74616c5f63656e74732c0d0a2020202020202020765f7368697070696e675f746f74616c5f63656e74732c0d0a2020202020202020765f646973636f756e745f746f74616c5f63656e74732c0d0a2020202020202020302c0d0a2020202020202020765f706169645f746f74616c5f63656e74732c0d0a2020202020202020705f70726f6d6f5f636f64652c0d0a2020202020202020765f62616e6b5f7265660d0a20202020292052455455524e494e4720696420494e544f20765f6f726465725f69643b0d0a202020200d0a202020202d2d2031312e20496e736572742053746174757320486973746f72790d0a20202020424547494e0d0a2020202020202020494e5345525420494e544f207075626c69632e6f726465725f7374617475735f686973746f727920286f726465725f69642c207374617475732c206e6f74652c20637265617465645f6174290d0a202020202020202056414c55455320280d0a202020202020202020202020765f6f726465725f69642c0d0a2020202020202020202020202770656e64696e67272c0d0a20202020202020202020202027536970617269c59f20616cc4b16e64c4b12028486176616c652f4546542042656b6c656e69796f7229272c0d0a2020202020202020202020207075626c69632e6e6f7728290d0a2020202020202020293b0d0a20202020455843455054494f4e205748454e204f5448455253205448454e0d0a20202020202020204e554c4c3b0d0a20202020454e443b0d0a202020202d2d2031322e2052657475726e20537563636573730d0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280d0a20202020202020202773756363657373272c20747275652c200d0a2020202020202020276f726465725f6964272c20765f6f726465725f69642c0d0a202020202020202027746f74616c272c20765f66696e616c5f746f74616c2c0d0a2020202020202020277368697070696e675f636f7374272c20765f7368697070696e675f636f73742c0d0a20202020202020202762616e6b5f7265666572656e6365272c20765f62616e6b5f7265662c0d0a2020202020202020276d657373616765272c2027536970617269c59f206261c59f6172c4b1796c61206f6c75c59f747572756c6475270d0a20202020293b0d0a455843455054494f4e205748454e204f5448455253205448454e0d0a202020205241495345204c4f4720276372656174655f6f72646572206661696c656420666f72207573657220252c207061796d656e745f6d6574686f6420252c206572726f722025272c0d0a2020202020202020434f414c4553434528765f757365725f69643a3a746578742c2027616e6f6e796d6f757327292c0d0a2020202020202020434f414c4553434528705f7061796d656e745f6d6574686f642c2027756e6b6e6f776e27292c0d0a202020202020202053514c4552524d3b0d0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280d0a20202020202020202773756363657373272c2066616c73652c200d0a2020202020202020276d657373616765272c2027536970617269c59f206f6c75c59f747572756c75726b656e2062656b6c656e6d6579656e206269722068617461206f6c75c59f74752e204cc3bc7466656e2074656b7261722064656e6579696e697a2e270d0a20202020293b0d0a454e443b0d0a2466756e6374696f6e24"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"SET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260218193700_normalize_create_order_line_endings.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Normalize CRLF/LF drift for public.create_order detected by CI db diff.\r\n-- This migration rewrites the function using pg_get_functiondef output after\r\n-- replacing CRLF/CR with LF to stabilize cross-platform drift checks.\r\n\r\nDO $$\r\nDECLARE\r\n    v_reg regprocedure := to_regprocedure('public.create_order(jsonb, uuid, text, text)');\r\n    v_def text;\r\nBEGIN\r\n    IF v_reg IS NULL THEN\r\n        RAISE NOTICE 'public.create_order(jsonb, uuid, text, text) not found, skipping normalization';\r\n        RETURN;\r\n    END IF;\r\n\r\n    SELECT pg_get_functiondef(v_reg) INTO v_def;\r\n\r\n    IF position(E'\\r' in v_def) \u003e 0 THEN\r\n        v_def := replace(v_def, E'\\r\\n', E'\\n');\r\n        v_def := replace(v_def, E'\\r', E'\\n');\r\n        EXECUTE v_def;\r\n        RAISE NOTICE 'Normalized line endings for public.create_order';\r\n    ELSE\r\n        RAISE NOTICE 'public.create_order already LF-normalized';\r\n    END IF;\r\nEND\r\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260218193700"},{"text":"normalize_create_order_line_endings"},{"binary":"00000001000000000000001900000001000000010000038e2d2d204e6f726d616c697a652043524c462f4c4620647269667420666f72207075626c69632e6372656174655f6f7264657220646574656374656420627920434920646220646966662e0d0a2d2d2054686973206d6967726174696f6e207265777269746573207468652066756e6374696f6e207573696e672070675f6765745f66756e6374696f6e646566206f75747075742061667465720d0a2d2d207265706c6163696e672043524c462f43522077697468204c4620746f2073746162696c697a652063726f73732d706c6174666f726d20647269667420636865636b732e0d0a0d0a444f2024240d0a4445434c4152450d0a20202020765f7265672072656770726f636564757265203a3d20746f5f72656770726f63656475726528277075626c69632e6372656174655f6f72646572286a736f6e622c20757569642c20746578742c20746578742927293b0d0a20202020765f64656620746578743b0d0a424547494e0d0a20202020494620765f726567204953204e554c4c205448454e0d0a20202020202020205241495345204e4f5449434520277075626c69632e6372656174655f6f72646572286a736f6e622c20757569642c20746578742c207465787429206e6f7420666f756e642c20736b697070696e67206e6f726d616c697a6174696f6e273b0d0a202020202020202052455455524e3b0d0a20202020454e442049463b0d0a0d0a2020202053454c4543542070675f6765745f66756e6374696f6e64656628765f7265672920494e544f20765f6465663b0d0a0d0a20202020494620706f736974696f6e2845275c722720696e20765f64656629203e2030205448454e0d0a2020202020202020765f646566203a3d207265706c61636528765f6465662c2045275c725c6e272c2045275c6e27293b0d0a2020202020202020765f646566203a3d207265706c61636528765f6465662c2045275c72272c2045275c6e27293b0d0a20202020202020204558454355544520765f6465663b0d0a20202020202020205241495345204e4f5449434520274e6f726d616c697a6564206c696e6520656e64696e677320666f72207075626c69632e6372656174655f6f72646572273b0d0a20202020454c53450d0a20202020202020205241495345204e4f5449434520277075626c69632e6372656174655f6f7264657220616c7265616479204c462d6e6f726d616c697a6564273b0d0a20202020454e442049463b0d0a454e440d0a2424"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"Normalized line endings for public.create_order","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"PL/pgSQL function inline_code_block line 17 at RAISE","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"pl_exec.c","Line":3911,"Routine":"exec_stmt_raise","UnknownFields":null}
NOTICE (00000): Normalized line endings for public.create_order
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260218201825_add_diagnostic_logs_create_order.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.create_order(p_items jsonb, p_shipping_address_id uuid, p_payment_method text, p_promo_code text DEFAULT NULL::text)\nRETURNS jsonb\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path TO ''\nAS $function$\nDECLARE\n    v_user_id UUID;\n    v_item JSONB;\n    v_product_id UUID;\n    v_product_name TEXT;\n    v_product_price DECIMAL(10,2);\n    v_product_stock INT;\n    v_qty INT;\n    v_item_subtotal DECIMAL(10,2);\n    v_total_subtotal DECIMAL(10,2) := 0;\n    v_total_vat DECIMAL(10,2) := 0;\n    v_shipping_cost DECIMAL(10,2);\n    v_vat_rate DECIMAL(10,4);\n    v_shipping_threshold DECIMAL(12,2);\n    v_final_total DECIMAL(10,2);\n    v_discount DECIMAL(10,2) := 0;\n    v_order_id UUID;\n    v_valid_items JSONB := '[]'::JSONB;\n    v_item_detail JSONB;\n    v_order_details JSONB;\n    v_bank_ref TEXT := NULL;\n    v_address_owner UUID;\n    v_promo_result JSON;\n    v_item_total_cents BIGINT := 0;\n    v_vat_total_cents BIGINT := 0;\n    v_shipping_total_cents BIGINT := 0;\n    v_discount_total_cents BIGINT := 0;\n    v_paid_total_cents BIGINT := 0;\n    v_item_index INT := 0;\n    v_items_count INT := 0;\n    v_sqlstate TEXT;\n    v_errmsg TEXT;\n    v_errdetail TEXT;\n    v_errhint TEXT;\n    v_errcontext TEXT;\nBEGIN\n    v_items_count := CASE\n        WHEN p_items IS NULL THEN 0\n        WHEN jsonb_typeof(p_items) = 'array' THEN jsonb_array_length(p_items)\n        ELSE 0\n    END;\n\n    RAISE LOG 'create_order start payment_method=%, shipping_address_id=%, promo_code=%, items_count=%',\n        COALESCE(p_payment_method, 'null'),\n        COALESCE(p_shipping_address_id::text, 'null'),\n        COALESCE(p_promo_code, 'null'),\n        v_items_count;\n\n    -- Card flow must use payment_intent + 3D finalize path\n    IF p_payment_method \u003c\u003e 'bank_transfer' THEN\n        RAISE LOG 'create_order rejected_non_bank_transfer payment_method=%', COALESCE(p_payment_method, 'null');\n        RETURN jsonb_build_object(\n            'success', false,\n            'message', 'Kart odemeleri yeni 3D akisi ile alinmaktadir. Lutfen kart odeme endpointini kullanin.'\n        );\n    END IF;\n\n    -- 1. Get User ID\n    v_user_id := auth.uid();\n    IF v_user_id IS NULL THEN\n        RAISE LOG 'create_order missing_auth_user';\n        RETURN jsonb_build_object('success', false, 'message', 'Oturum amanz gerekiyor');\n    END IF;\n\n    RAISE LOG 'create_order auth_user_id=%', v_user_id;\n\n    -- 2. Address Ownership Check (IDOR Security Fix)\n    SELECT user_id INTO v_address_owner FROM public.addresses WHERE id = p_shipping_address_id;\n    IF v_address_owner IS NULL OR v_address_owner != v_user_id THEN\n        RAISE LOG 'create_order invalid_address owner=% requester=% address_id=%',\n            COALESCE(v_address_owner::text, 'null'),\n            COALESCE(v_user_id::text, 'null'),\n            COALESCE(p_shipping_address_id::text, 'null');\n        RETURN jsonb_build_object('success', false, 'message', 'Geersiz adres seimi: Adres size ait deil.');\n    END IF;\n\n    -- 3. Iterate input items\n    FOR v_item IN SELECT * FROM jsonb_array_elements(p_items)\n    LOOP\n        v_item_index := v_item_index + 1;\n        RAISE LOG 'create_order item[%] raw product_id=%, quantity=%',\n            v_item_index,\n            COALESCE(v_item-\u003e\u003e'product_id', 'null'),\n            COALESCE(v_item-\u003e\u003e'quantity', 'null');\n\n        v_product_id := (v_item-\u003e\u003e'product_id')::UUID;\n        v_qty := (v_item-\u003e\u003e'quantity')::INT;\n\n        -- Negative Quantity Check (Logic Security Fix)\n        IF v_qty \u003c= 0 THEN\n            RAISE LOG 'create_order item[%] invalid_quantity=%', v_item_index, v_qty;\n            RETURN jsonb_build_object('success', false, 'message', 'Geersiz rn miktar: 0 veya negatif olamaz.');\n        END IF;\n\n        -- Get product from DB WITH LOCK (Race Condition Fix)\n        SELECT id, name, price, stock\n        INTO v_product_id, v_product_name, v_product_price, v_product_stock\n        FROM public.products\n        WHERE id = v_product_id\n        FOR UPDATE;\n\n        IF NOT FOUND THEN\n            RAISE LOG 'create_order item[%] product_not_found product_id=%', v_item_index, COALESCE(v_product_id::text, 'null');\n            RETURN jsonb_build_object('success', false, 'message', 'rn bulunamad: ID ' || v_product_id);\n        END IF;\n\n        -- Check stock validity\n        IF v_product_stock \u003c v_qty THEN\n            RAISE LOG 'create_order item[%] insufficient_stock product_id=% stock=% requested_qty=%',\n                v_item_index,\n                COALESCE(v_product_id::text, 'null'),\n                v_product_stock,\n                v_qty;\n            RETURN jsonb_build_object('success', false, 'message', 'Yetersiz stok: ' || v_product_name);\n        END IF;\n\n        RAISE LOG 'create_order item[%] resolved product_id=% name=% unit_price=% stock=% qty=%',\n            v_item_index,\n            v_product_id,\n            COALESCE(v_product_name, 'null'),\n            v_product_price,\n            v_product_stock,\n            v_qty;\n\n        -- Calculate item totals using DB price\n        v_item_subtotal := v_product_price * v_qty;\n        v_total_subtotal := v_total_subtotal + v_item_subtotal;\n\n        -- Build item detail\n        v_item_detail := jsonb_build_object(\n            'product_id', v_product_id,\n            'product_name', v_product_name,\n            'quantity', v_qty,\n            'unit_price', v_product_price,\n            'subtotal', v_item_subtotal\n        );\n\n        v_valid_items := v_valid_items || v_item_detail;\n    END LOOP;\n\n    -- 4. VAT \u0026 Shipping Settings\n    SELECT\n        COALESCE(vat_rate, 0.20),\n        COALESCE(shipping_cost, 49.90),\n        COALESCE(free_shipping_threshold, 1500.0)\n    INTO v_vat_rate, v_shipping_cost, v_shipping_threshold\n    FROM public.site_settings\n    WHERE id = 1;\n\n    -- 5. VAT calculation\n    v_total_vat := v_total_subtotal * v_vat_rate;\n\n    -- 6. Promo Code (Backend Logic using verify_promo_code)\n    v_discount := 0;\n    IF p_promo_code IS NOT NULL AND length(p_promo_code) \u003e 0 THEN\n        BEGIN\n            SELECT public.verify_promo_code(p_promo_code) INTO v_promo_result;\n\n            IF (v_promo_result-\u003e\u003e'valid')::boolean = true THEN\n                IF (v_promo_result-\u003e\u003e'discount_type') = 'percentage' THEN\n                    v_discount := (v_total_subtotal + v_total_vat) * ((v_promo_result-\u003e\u003e'discount_value')::decimal / 100);\n                    IF (v_promo_result-\u003e\u003e'max_discount_amount') IS NOT NULL AND v_discount \u003e (v_promo_result-\u003e\u003e'max_discount_amount')::decimal THEN\n                        v_discount := (v_promo_result-\u003e\u003e'max_discount_amount')::decimal;\n                    END IF;\n                ELSE\n                    v_discount := (v_promo_result-\u003e\u003e'discount_value')::decimal;\n                END IF;\n            END IF;\n        EXCEPTION WHEN OTHERS THEN\n            RAISE LOG 'create_order promo_eval_failed code=% error=%', COALESCE(p_promo_code, 'null'), SQLERRM;\n            v_discount := 0;\n        END;\n    END IF;\n\n    -- 7. Shipping calculation\n    IF (v_total_subtotal + v_total_vat - v_discount) \u003e= v_shipping_threshold THEN\n        v_shipping_cost := 0;\n    END IF;\n\n    -- 8. Final Total\n    v_final_total := v_total_subtotal + v_total_vat + v_shipping_cost - v_discount;\n    IF v_final_total \u003c 0 THEN\n        v_final_total := 0;\n    END IF;\n\n    v_item_total_cents := ROUND(v_total_subtotal * 100)::bigint;\n    v_vat_total_cents := ROUND(v_total_vat * 100)::bigint;\n    v_shipping_total_cents := ROUND(v_shipping_cost * 100)::bigint;\n    v_discount_total_cents := ROUND(v_discount * 100)::bigint;\n    v_paid_total_cents := ROUND(v_final_total * 100)::bigint;\n\n    RAISE LOG 'create_order totals subtotal=%, vat=%, shipping=%, discount=%, final_total=%',\n        v_total_subtotal,\n        v_total_vat,\n        v_shipping_cost,\n        v_discount,\n        v_final_total;\n\n    -- Bank Reference\n    RAISE LOG 'create_order about_to_generate_bank_ref using public.now()';\n    v_bank_ref := 'BRV-' || to_char(public.now(), 'YYMMDD') || '-' || upper(substring(md5(random()::text) from 1 for 4));\n    RAISE LOG 'create_order bank_ref_generated=%', v_bank_ref;\n\n    -- 9. Construct final order_details JSON\n    v_order_details := jsonb_build_object(\n        'items', v_valid_items,\n        'subtotal', v_total_subtotal,\n        'vat_rate', v_vat_rate,\n        'vat_amount', v_total_vat,\n        'shipping_cost', v_shipping_cost,\n        'total', v_final_total,\n        'promo_code', p_promo_code,\n        'discount', v_discount,\n        'bank_reference', v_bank_ref\n    );\n\n    -- 10. Insert Order\n    RAISE LOG 'create_order inserting_order user_id=%, paid_total_cents=%, bank_ref=%',\n        COALESCE(v_user_id::text, 'null'),\n        v_paid_total_cents,\n        COALESCE(v_bank_ref, 'null');\n\n    INSERT INTO public.orders (\n        user_id,\n        shipping_address_id,\n        payment_method,\n        status,\n        payment_status,\n        order_details,\n        currency,\n        installment_number,\n        item_total_cents,\n        vat_total_cents,\n        shipping_total_cents,\n        discount_total_cents,\n        commission_amount_cents,\n        paid_total_cents,\n        promo_code,\n        bank_reference\n    ) VALUES (\n        v_user_id,\n        p_shipping_address_id,\n        'bank_transfer',\n        'pending',\n        'pending',\n        v_order_details,\n        'TL',\n        1,\n        v_item_total_cents,\n        v_vat_total_cents,\n        v_shipping_total_cents,\n        v_discount_total_cents,\n        0,\n        v_paid_total_cents,\n        p_promo_code,\n        v_bank_ref\n    ) RETURNING id INTO v_order_id;\n\n    -- 11. Insert Status History\n    BEGIN\n        INSERT INTO public.order_status_history (order_id, status, note, created_at)\n        VALUES (\n            v_order_id,\n            'pending',\n            'Sipari alnd (Havale/EFT Bekleniyor)',\n            public.now()\n        );\n    EXCEPTION WHEN OTHERS THEN\n        RAISE LOG 'create_order status_history_insert_failed order_id=% error=%', COALESCE(v_order_id::text, 'null'), SQLERRM;\n        NULL;\n    END;\n\n    RAISE LOG 'create_order success order_id=% bank_ref=%', COALESCE(v_order_id::text, 'null'), COALESCE(v_bank_ref, 'null');\n\n    -- 12. Return Success\n    RETURN jsonb_build_object(\n        'success', true,\n        'order_id', v_order_id,\n        'total', v_final_total,\n        'shipping_cost', v_shipping_cost,\n        'bank_reference', v_bank_ref,\n        'message', 'Sipari baaryla oluturuldu'\n    );\nEXCEPTION WHEN OTHERS THEN\n    GET STACKED DIAGNOSTICS\n        v_sqlstate = RETURNED_SQLSTATE,\n        v_errmsg = MESSAGE_TEXT,\n        v_errdetail = PG_EXCEPTION_DETAIL,\n        v_errhint = PG_EXCEPTION_HINT,\n        v_errcontext = PG_EXCEPTION_CONTEXT;\n\n    RAISE LOG 'create_order failed user=%, payment_method=%, sqlstate=%, errmsg=%, detail=%, hint=%, context=%',\n        COALESCE(v_user_id::text, 'anonymous'),\n        COALESCE(p_payment_method, 'unknown'),\n        COALESCE(v_sqlstate, 'null'),\n        COALESCE(v_errmsg, 'null'),\n        COALESCE(v_errdetail, 'null'),\n        COALESCE(v_errhint, 'null'),\n        COALESCE(v_errcontext, 'null');\n\n    RETURN jsonb_build_object(\n        'success', false,\n        'message', 'Sipari oluturulurken beklenmeyen bir hata olutu. Ltfen tekrar deneyiniz.'\n    );\nEND;\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260218201825"},{"text":"add_diagnostic_logs_create_order"},{"binary":"000000010000000000000019000000010000000100002c28435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e6372656174655f6f7264657228705f6974656d73206a736f6e622c20705f7368697070696e675f616464726573735f696420757569642c20705f7061796d656e745f6d6574686f6420746578742c20705f70726f6d6f5f636f646520746578742044454641554c54204e554c4c3a3a74657874290a52455455524e53206a736f6e620a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f7061746820544f2027270a4153202466756e6374696f6e240a4445434c4152450a20202020765f757365725f696420555549443b0a20202020765f6974656d204a534f4e423b0a20202020765f70726f647563745f696420555549443b0a20202020765f70726f647563745f6e616d6520544558543b0a20202020765f70726f647563745f707269636520444543494d414c2831302c32293b0a20202020765f70726f647563745f73746f636b20494e543b0a20202020765f71747920494e543b0a20202020765f6974656d5f737562746f74616c20444543494d414c2831302c32293b0a20202020765f746f74616c5f737562746f74616c20444543494d414c2831302c3229203a3d20303b0a20202020765f746f74616c5f76617420444543494d414c2831302c3229203a3d20303b0a20202020765f7368697070696e675f636f737420444543494d414c2831302c32293b0a20202020765f7661745f7261746520444543494d414c2831302c34293b0a20202020765f7368697070696e675f7468726573686f6c6420444543494d414c2831322c32293b0a20202020765f66696e616c5f746f74616c20444543494d414c2831302c32293b0a20202020765f646973636f756e7420444543494d414c2831302c3229203a3d20303b0a20202020765f6f726465725f696420555549443b0a20202020765f76616c69645f6974656d73204a534f4e42203a3d20275b5d273a3a4a534f4e423b0a20202020765f6974656d5f64657461696c204a534f4e423b0a20202020765f6f726465725f64657461696c73204a534f4e423b0a20202020765f62616e6b5f7265662054455854203a3d204e554c4c3b0a20202020765f616464726573735f6f776e657220555549443b0a20202020765f70726f6d6f5f726573756c74204a534f4e3b0a20202020765f6974656d5f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f7661745f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f7368697070696e675f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f646973636f756e745f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f706169645f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f6974656d5f696e64657820494e54203a3d20303b0a20202020765f6974656d735f636f756e7420494e54203a3d20303b0a20202020765f73716c737461746520544558543b0a20202020765f6572726d736720544558543b0a20202020765f65727264657461696c20544558543b0a20202020765f65727268696e7420544558543b0a20202020765f657272636f6e7465787420544558543b0a424547494e0a20202020765f6974656d735f636f756e74203a3d20434153450a20202020202020205748454e20705f6974656d73204953204e554c4c205448454e20300a20202020202020205748454e206a736f6e625f747970656f6628705f6974656d7329203d2027617272617927205448454e206a736f6e625f61727261795f6c656e67746828705f6974656d73290a2020202020202020454c534520300a20202020454e443b0a0a202020205241495345204c4f4720276372656174655f6f72646572207374617274207061796d656e745f6d6574686f643d252c207368697070696e675f616464726573735f69643d252c2070726f6d6f5f636f64653d252c206974656d735f636f756e743d25272c0a2020202020202020434f414c4553434528705f7061796d656e745f6d6574686f642c20276e756c6c27292c0a2020202020202020434f414c4553434528705f7368697070696e675f616464726573735f69643a3a746578742c20276e756c6c27292c0a2020202020202020434f414c4553434528705f70726f6d6f5f636f64652c20276e756c6c27292c0a2020202020202020765f6974656d735f636f756e743b0a0a202020202d2d204361726420666c6f77206d75737420757365207061796d656e745f696e74656e74202b2033442066696e616c697a6520706174680a20202020494620705f7061796d656e745f6d6574686f64203c3e202762616e6b5f7472616e7366657227205448454e0a20202020202020205241495345204c4f4720276372656174655f6f726465722072656a65637465645f6e6f6e5f62616e6b5f7472616e73666572207061796d656e745f6d6574686f643d25272c20434f414c4553434528705f7061796d656e745f6d6574686f642c20276e756c6c27293b0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276d657373616765272c20274b617274206f64656d656c6572692079656e6920334420616b69736920696c6520616c696e6d616b74616469722e204c757466656e206b617274206f64656d6520656e64706f696e74696e69206b756c6c616e696e2e270a2020202020202020293b0a20202020454e442049463b0a0a202020202d2d20312e2047657420557365722049440a20202020765f757365725f6964203a3d20617574682e75696428293b0a20202020494620765f757365725f6964204953204e554c4c205448454e0a20202020202020205241495345204c4f4720276372656174655f6f72646572206d697373696e675f617574685f75736572273b0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274f747572756d2061c3a76d616ec4b17a20676572656b69796f7227293b0a20202020454e442049463b0a0a202020205241495345204c4f4720276372656174655f6f7264657220617574685f757365725f69643d25272c20765f757365725f69643b0a0a202020202d2d20322e2041646472657373204f776e65727368697020436865636b202849444f5220536563757269747920466978290a2020202053454c45435420757365725f696420494e544f20765f616464726573735f6f776e65722046524f4d207075626c69632e616464726573736573205748455245206964203d20705f7368697070696e675f616464726573735f69643b0a20202020494620765f616464726573735f6f776e6572204953204e554c4c204f5220765f616464726573735f6f776e657220213d20765f757365725f6964205448454e0a20202020202020205241495345204c4f4720276372656174655f6f7264657220696e76616c69645f61646472657373206f776e65723d25207265717565737465723d2520616464726573735f69643d25272c0a202020202020202020202020434f414c4553434528765f616464726573735f6f776e65723a3a746578742c20276e756c6c27292c0a202020202020202020202020434f414c4553434528765f757365725f69643a3a746578742c20276e756c6c27292c0a202020202020202020202020434f414c4553434528705f7368697070696e675f616464726573735f69643a3a746578742c20276e756c6c27293b0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274765c3a7657273697a206164726573207365c3a7696d693a2041647265732073697a6520616974206465c49f696c2e27293b0a20202020454e442049463b0a0a202020202d2d20332e204974657261746520696e707574206974656d730a20202020464f5220765f6974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e747328705f6974656d73290a202020204c4f4f500a2020202020202020765f6974656d5f696e646578203a3d20765f6974656d5f696e646578202b20313b0a20202020202020205241495345204c4f4720276372656174655f6f72646572206974656d5b255d207261772070726f647563745f69643d252c207175616e746974793d25272c0a202020202020202020202020765f6974656d5f696e6465782c0a202020202020202020202020434f414c4553434528765f6974656d2d3e3e2770726f647563745f6964272c20276e756c6c27292c0a202020202020202020202020434f414c4553434528765f6974656d2d3e3e277175616e74697479272c20276e756c6c27293b0a0a2020202020202020765f70726f647563745f6964203a3d2028765f6974656d2d3e3e2770726f647563745f696427293a3a555549443b0a2020202020202020765f717479203a3d2028765f6974656d2d3e3e277175616e7469747927293a3a494e543b0a0a20202020202020202d2d204e65676174697665205175616e7469747920436865636b20284c6f67696320536563757269747920466978290a2020202020202020494620765f717479203c3d2030205448454e0a2020202020202020202020205241495345204c4f4720276372656174655f6f72646572206974656d5b255d20696e76616c69645f7175616e746974793d25272c20765f6974656d5f696e6465782c20765f7174793b0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c20274765c3a7657273697a20c3bc72c3bc6e206d696b746172c4b13a20302076657961206e656761746966206f6c616d617a2e27293b0a2020202020202020454e442049463b0a0a20202020202020202d2d204765742070726f647563742066726f6d2044422057495448204c4f434b20285261636520436f6e646974696f6e20466978290a202020202020202053454c4543542069642c206e616d652c2070726963652c2073746f636b0a2020202020202020494e544f20765f70726f647563745f69642c20765f70726f647563745f6e616d652c20765f70726f647563745f70726963652c20765f70726f647563745f73746f636b0a202020202020202046524f4d207075626c69632e70726f64756374730a20202020202020205748455245206964203d20765f70726f647563745f69640a2020202020202020464f52205550444154453b0a0a20202020202020204946204e4f5420464f554e44205448454e0a2020202020202020202020205241495345204c4f4720276372656174655f6f72646572206974656d5b255d2070726f647563745f6e6f745f666f756e642070726f647563745f69643d25272c20765f6974656d5f696e6465782c20434f414c4553434528765f70726f647563745f69643a3a746578742c20276e756c6c27293b0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c2027c39c72c3bc6e2062756c756e616d6164c4b13a2049442027207c7c20765f70726f647563745f6964293b0a2020202020202020454e442049463b0a0a20202020202020202d2d20436865636b2073746f636b2076616c69646974790a2020202020202020494620765f70726f647563745f73746f636b203c20765f717479205448454e0a2020202020202020202020205241495345204c4f4720276372656174655f6f72646572206974656d5b255d20696e73756666696369656e745f73746f636b2070726f647563745f69643d252073746f636b3d25207265717565737465645f7174793d25272c0a20202020202020202020202020202020765f6974656d5f696e6465782c0a20202020202020202020202020202020434f414c4553434528765f70726f647563745f69643a3a746578742c20276e756c6c27292c0a20202020202020202020202020202020765f70726f647563745f73746f636b2c0a20202020202020202020202020202020765f7174793b0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374282773756363657373272c2066616c73652c20276d657373616765272c2027596574657273697a2073746f6b3a2027207c7c20765f70726f647563745f6e616d65293b0a2020202020202020454e442049463b0a0a20202020202020205241495345204c4f4720276372656174655f6f72646572206974656d5b255d207265736f6c7665642070726f647563745f69643d25206e616d653d2520756e69745f70726963653d252073746f636b3d25207174793d25272c0a202020202020202020202020765f6974656d5f696e6465782c0a202020202020202020202020765f70726f647563745f69642c0a202020202020202020202020434f414c4553434528765f70726f647563745f6e616d652c20276e756c6c27292c0a202020202020202020202020765f70726f647563745f70726963652c0a202020202020202020202020765f70726f647563745f73746f636b2c0a202020202020202020202020765f7174793b0a0a20202020202020202d2d2043616c63756c617465206974656d20746f74616c73207573696e672044422070726963650a2020202020202020765f6974656d5f737562746f74616c203a3d20765f70726f647563745f7072696365202a20765f7174793b0a2020202020202020765f746f74616c5f737562746f74616c203a3d20765f746f74616c5f737562746f74616c202b20765f6974656d5f737562746f74616c3b0a0a20202020202020202d2d204275696c64206974656d2064657461696c0a2020202020202020765f6974656d5f64657461696c203a3d206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202770726f647563745f6964272c20765f70726f647563745f69642c0a2020202020202020202020202770726f647563745f6e616d65272c20765f70726f647563745f6e616d652c0a202020202020202020202020277175616e74697479272c20765f7174792c0a20202020202020202020202027756e69745f7072696365272c20765f70726f647563745f70726963652c0a20202020202020202020202027737562746f74616c272c20765f6974656d5f737562746f74616c0a2020202020202020293b0a0a2020202020202020765f76616c69645f6974656d73203a3d20765f76616c69645f6974656d73207c7c20765f6974656d5f64657461696c3b0a20202020454e44204c4f4f503b0a0a202020202d2d20342e205641542026205368697070696e672053657474696e67730a2020202053454c4543540a2020202020202020434f414c45534345287661745f726174652c20302e3230292c0a2020202020202020434f414c45534345287368697070696e675f636f73742c2034392e3930292c0a2020202020202020434f414c4553434528667265655f7368697070696e675f7468726573686f6c642c20313530302e30290a20202020494e544f20765f7661745f726174652c20765f7368697070696e675f636f73742c20765f7368697070696e675f7468726573686f6c640a2020202046524f4d207075626c69632e736974655f73657474696e67730a202020205748455245206964203d20313b0a0a202020202d2d20352e205641542063616c63756c6174696f6e0a20202020765f746f74616c5f766174203a3d20765f746f74616c5f737562746f74616c202a20765f7661745f726174653b0a0a202020202d2d20362e2050726f6d6f20436f646520284261636b656e64204c6f676963207573696e67207665726966795f70726f6d6f5f636f6465290a20202020765f646973636f756e74203a3d20303b0a20202020494620705f70726f6d6f5f636f6465204953204e4f54204e554c4c20414e44206c656e67746828705f70726f6d6f5f636f646529203e2030205448454e0a2020202020202020424547494e0a20202020202020202020202053454c454354207075626c69632e7665726966795f70726f6d6f5f636f646528705f70726f6d6f5f636f64652920494e544f20765f70726f6d6f5f726573756c743b0a0a20202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e2776616c696427293a3a626f6f6c65616e203d2074727565205448454e0a2020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f747970652729203d202770657263656e7461676527205448454e0a2020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f746f74616c5f737562746f74616c202b20765f746f74616c5f76617429202a202828765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a646563696d616c202f20313030293b0a202020202020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e742729204953204e4f54204e554c4c20414e4420765f646973636f756e74203e2028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e7427293a3a646563696d616c205448454e0a202020202020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e7427293a3a646563696d616c3b0a2020202020202020202020202020202020202020454e442049463b0a20202020202020202020202020202020454c53450a2020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a646563696d616c3b0a20202020202020202020202020202020454e442049463b0a202020202020202020202020454e442049463b0a2020202020202020455843455054494f4e205748454e204f5448455253205448454e0a2020202020202020202020205241495345204c4f4720276372656174655f6f726465722070726f6d6f5f6576616c5f6661696c656420636f64653d25206572726f723d25272c20434f414c4553434528705f70726f6d6f5f636f64652c20276e756c6c27292c2053514c4552524d3b0a202020202020202020202020765f646973636f756e74203a3d20303b0a2020202020202020454e443b0a20202020454e442049463b0a0a202020202d2d20372e205368697070696e672063616c63756c6174696f6e0a2020202049462028765f746f74616c5f737562746f74616c202b20765f746f74616c5f766174202d20765f646973636f756e7429203e3d20765f7368697070696e675f7468726573686f6c64205448454e0a2020202020202020765f7368697070696e675f636f7374203a3d20303b0a20202020454e442049463b0a0a202020202d2d20382e2046696e616c20546f74616c0a20202020765f66696e616c5f746f74616c203a3d20765f746f74616c5f737562746f74616c202b20765f746f74616c5f766174202b20765f7368697070696e675f636f7374202d20765f646973636f756e743b0a20202020494620765f66696e616c5f746f74616c203c2030205448454e0a2020202020202020765f66696e616c5f746f74616c203a3d20303b0a20202020454e442049463b0a0a20202020765f6974656d5f746f74616c5f63656e7473203a3d20524f554e4428765f746f74616c5f737562746f74616c202a20313030293a3a626967696e743b0a20202020765f7661745f746f74616c5f63656e7473203a3d20524f554e4428765f746f74616c5f766174202a20313030293a3a626967696e743b0a20202020765f7368697070696e675f746f74616c5f63656e7473203a3d20524f554e4428765f7368697070696e675f636f7374202a20313030293a3a626967696e743b0a20202020765f646973636f756e745f746f74616c5f63656e7473203a3d20524f554e4428765f646973636f756e74202a20313030293a3a626967696e743b0a20202020765f706169645f746f74616c5f63656e7473203a3d20524f554e4428765f66696e616c5f746f74616c202a20313030293a3a626967696e743b0a0a202020205241495345204c4f4720276372656174655f6f7264657220746f74616c7320737562746f74616c3d252c207661743d252c207368697070696e673d252c20646973636f756e743d252c2066696e616c5f746f74616c3d25272c0a2020202020202020765f746f74616c5f737562746f74616c2c0a2020202020202020765f746f74616c5f7661742c0a2020202020202020765f7368697070696e675f636f73742c0a2020202020202020765f646973636f756e742c0a2020202020202020765f66696e616c5f746f74616c3b0a0a202020202d2d2042616e6b205265666572656e63650a202020205241495345204c4f4720276372656174655f6f726465722061626f75745f746f5f67656e65726174655f62616e6b5f726566207573696e67207075626c69632e6e6f772829273b0a20202020765f62616e6b5f726566203a3d20274252562d27207c7c20746f5f63686172287075626c69632e6e6f7728292c202759594d4d44442729207c7c20272d27207c7c20757070657228737562737472696e67286d64352872616e646f6d28293a3a74657874292066726f6d203120666f72203429293b0a202020205241495345204c4f4720276372656174655f6f726465722062616e6b5f7265665f67656e6572617465643d25272c20765f62616e6b5f7265663b0a0a202020202d2d20392e20436f6e7374727563742066696e616c206f726465725f64657461696c73204a534f4e0a20202020765f6f726465725f64657461696c73203a3d206a736f6e625f6275696c645f6f626a656374280a2020202020202020276974656d73272c20765f76616c69645f6974656d732c0a202020202020202027737562746f74616c272c20765f746f74616c5f737562746f74616c2c0a2020202020202020277661745f72617465272c20765f7661745f726174652c0a2020202020202020277661745f616d6f756e74272c20765f746f74616c5f7661742c0a2020202020202020277368697070696e675f636f7374272c20765f7368697070696e675f636f73742c0a202020202020202027746f74616c272c20765f66696e616c5f746f74616c2c0a20202020202020202770726f6d6f5f636f6465272c20705f70726f6d6f5f636f64652c0a202020202020202027646973636f756e74272c20765f646973636f756e742c0a20202020202020202762616e6b5f7265666572656e6365272c20765f62616e6b5f7265660a20202020293b0a0a202020202d2d2031302e20496e73657274204f726465720a202020205241495345204c4f4720276372656174655f6f7264657220696e73657274696e675f6f7264657220757365725f69643d252c20706169645f746f74616c5f63656e74733d252c2062616e6b5f7265663d25272c0a2020202020202020434f414c4553434528765f757365725f69643a3a746578742c20276e756c6c27292c0a2020202020202020765f706169645f746f74616c5f63656e74732c0a2020202020202020434f414c4553434528765f62616e6b5f7265662c20276e756c6c27293b0a0a20202020494e5345525420494e544f207075626c69632e6f726465727320280a2020202020202020757365725f69642c0a20202020202020207368697070696e675f616464726573735f69642c0a20202020202020207061796d656e745f6d6574686f642c0a20202020202020207374617475732c0a20202020202020207061796d656e745f7374617475732c0a20202020202020206f726465725f64657461696c732c0a202020202020202063757272656e63792c0a2020202020202020696e7374616c6c6d656e745f6e756d6265722c0a20202020202020206974656d5f746f74616c5f63656e74732c0a20202020202020207661745f746f74616c5f63656e74732c0a20202020202020207368697070696e675f746f74616c5f63656e74732c0a2020202020202020646973636f756e745f746f74616c5f63656e74732c0a2020202020202020636f6d6d697373696f6e5f616d6f756e745f63656e74732c0a2020202020202020706169645f746f74616c5f63656e74732c0a202020202020202070726f6d6f5f636f64652c0a202020202020202062616e6b5f7265666572656e63650a20202020292056414c55455320280a2020202020202020765f757365725f69642c0a2020202020202020705f7368697070696e675f616464726573735f69642c0a20202020202020202762616e6b5f7472616e73666572272c0a20202020202020202770656e64696e67272c0a20202020202020202770656e64696e67272c0a2020202020202020765f6f726465725f64657461696c732c0a202020202020202027544c272c0a2020202020202020312c0a2020202020202020765f6974656d5f746f74616c5f63656e74732c0a2020202020202020765f7661745f746f74616c5f63656e74732c0a2020202020202020765f7368697070696e675f746f74616c5f63656e74732c0a2020202020202020765f646973636f756e745f746f74616c5f63656e74732c0a2020202020202020302c0a2020202020202020765f706169645f746f74616c5f63656e74732c0a2020202020202020705f70726f6d6f5f636f64652c0a2020202020202020765f62616e6b5f7265660a20202020292052455455524e494e4720696420494e544f20765f6f726465725f69643b0a0a202020202d2d2031312e20496e736572742053746174757320486973746f72790a20202020424547494e0a2020202020202020494e5345525420494e544f207075626c69632e6f726465725f7374617475735f686973746f727920286f726465725f69642c207374617475732c206e6f74652c20637265617465645f6174290a202020202020202056414c55455320280a202020202020202020202020765f6f726465725f69642c0a2020202020202020202020202770656e64696e67272c0a20202020202020202020202027536970617269c59f20616cc4b16e64c4b12028486176616c652f4546542042656b6c656e69796f7229272c0a2020202020202020202020207075626c69632e6e6f7728290a2020202020202020293b0a20202020455843455054494f4e205748454e204f5448455253205448454e0a20202020202020205241495345204c4f4720276372656174655f6f72646572207374617475735f686973746f72795f696e736572745f6661696c6564206f726465725f69643d25206572726f723d25272c20434f414c4553434528765f6f726465725f69643a3a746578742c20276e756c6c27292c2053514c4552524d3b0a20202020202020204e554c4c3b0a20202020454e443b0a0a202020205241495345204c4f4720276372656174655f6f726465722073756363657373206f726465725f69643d252062616e6b5f7265663d25272c20434f414c4553434528765f6f726465725f69643a3a746578742c20276e756c6c27292c20434f414c4553434528765f62616e6b5f7265662c20276e756c6c27293b0a0a202020202d2d2031322e2052657475726e20537563636573730a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20747275652c0a2020202020202020276f726465725f6964272c20765f6f726465725f69642c0a202020202020202027746f74616c272c20765f66696e616c5f746f74616c2c0a2020202020202020277368697070696e675f636f7374272c20765f7368697070696e675f636f73742c0a20202020202020202762616e6b5f7265666572656e6365272c20765f62616e6b5f7265662c0a2020202020202020276d657373616765272c2027536970617269c59f206261c59f6172c4b1796c61206f6c75c59f747572756c6475270a20202020293b0a455843455054494f4e205748454e204f5448455253205448454e0a2020202047455420535441434b454420444941474e4f53544943530a2020202020202020765f73716c7374617465203d2052455455524e45445f53514c53544154452c0a2020202020202020765f6572726d7367203d204d4553534147455f544558542c0a2020202020202020765f65727264657461696c203d2050475f455843455054494f4e5f44455441494c2c0a2020202020202020765f65727268696e74203d2050475f455843455054494f4e5f48494e542c0a2020202020202020765f657272636f6e74657874203d2050475f455843455054494f4e5f434f4e544558543b0a0a202020205241495345204c4f4720276372656174655f6f72646572206661696c656420757365723d252c207061796d656e745f6d6574686f643d252c2073716c73746174653d252c206572726d73673d252c2064657461696c3d252c2068696e743d252c20636f6e746578743d25272c0a2020202020202020434f414c4553434528765f757365725f69643a3a746578742c2027616e6f6e796d6f757327292c0a2020202020202020434f414c4553434528705f7061796d656e745f6d6574686f642c2027756e6b6e6f776e27292c0a2020202020202020434f414c4553434528765f73716c73746174652c20276e756c6c27292c0a2020202020202020434f414c4553434528765f6572726d73672c20276e756c6c27292c0a2020202020202020434f414c4553434528765f65727264657461696c2c20276e756c6c27292c0a2020202020202020434f414c4553434528765f65727268696e742c20276e756c6c27292c0a2020202020202020434f414c4553434528765f657272636f6e746578742c20276e756c6c27293b0a0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c2066616c73652c0a2020202020202020276d657373616765272c2027536970617269c59f206f6c75c59f747572756c75726b656e2062656b6c656e6d6579656e206269722068617461206f6c75c59f74752e204cc3bc7466656e2074656b7261722064656e6579696e697a2e270a20202020293b0a454e443b0a2466756e6374696f6e24"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260218202131_fix_create_order_now_schema_reference.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DO $$\nDECLARE\n    v_def text;\nBEGIN\n    v_def := pg_get_functiondef('public.create_order(jsonb, uuid, text, text)'::regprocedure);\n\n    IF position('public.now()' in v_def) \u003e 0 THEN\n        v_def := replace(v_def, 'public.now()', 'pg_catalog.now()');\n        EXECUTE v_def;\n    END IF;\nEND $$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260218202131"},{"text":"fix_create_order_now_schema_reference"},{"binary":"000000010000000000000019000000010000000100000124444f2024240a4445434c4152450a20202020765f64656620746578743b0a424547494e0a20202020765f646566203a3d2070675f6765745f66756e6374696f6e64656628277075626c69632e6372656174655f6f72646572286a736f6e622c20757569642c20746578742c207465787429273a3a72656770726f636564757265293b0a0a20202020494620706f736974696f6e28277075626c69632e6e6f7728292720696e20765f64656629203e2030205448454e0a2020202020202020765f646566203a3d207265706c61636528765f6465662c20277075626c69632e6e6f772829272c202770675f636174616c6f672e6e6f77282927293b0a20202020202020204558454355544520765f6465663b0a20202020454e442049463b0a454e44202424"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260219120000_create_auth_template_sync_idempotency.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"BEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE TABLE IF NOT EXISTS public.auth_template_sync_idempotency (\r\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\r\n    actor_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,\r\n    idempotency_key TEXT NOT NULL,\r\n    payload_hash TEXT NOT NULL,\r\n    request_summary JSONB NOT NULL DEFAULT '{}'::jsonb,\r\n    response_status INTEGER NOT NULL DEFAULT 102 CHECK (response_status BETWEEN 100 AND 599),\r\n    response_body JSONB NOT NULL DEFAULT '{}'::jsonb,\r\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\r\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\r\n)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE UNIQUE INDEX IF NOT EXISTS idx_auth_template_sync_idempotency_actor_key\r\nON public.auth_template_sync_idempotency (actor_id, idempotency_key)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_auth_template_sync_idempotency_actor_created\r\nON public.auth_template_sync_idempotency (actor_id, created_at DESC)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE INDEX IF NOT EXISTS idx_auth_template_sync_idempotency_created\r\nON public.auth_template_sync_idempotency (created_at DESC)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.auth_template_sync_idempotency ENABLE ROW LEVEL SECURITY","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"System can insert auth template sync idempotency\" ON public.auth_template_sync_idempotency","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"System can insert auth template sync idempotency\"\r\nON public.auth_template_sync_idempotency\r\nFOR INSERT\r\nTO service_role\r\nWITH CHECK (TRUE)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"System can read auth template sync idempotency\" ON public.auth_template_sync_idempotency","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE INDEX"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"System can insert auth template sync idempotency\" for relation \"public.auth_template_sync_idempotency\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"System can read auth template sync idempotency\"\r\nON public.auth_template_sync_idempotency\r\nFOR SELECT\r\nTO service_role\r\nUSING (TRUE)","ParameterOIDs":null}
NOTICE (00000): policy "System can insert auth template sync idempotency" for relation "public.auth_template_sync_idempotency" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"System can update auth template sync idempotency\" ON public.auth_template_sync_idempotency","ParameterOIDs":null}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"System can read auth template sync idempotency\" for relation \"public.auth_template_sync_idempotency\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
NOTICE (00000): policy "System can read auth template sync idempotency" for relation "public.auth_template_sync_idempotency" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"System can update auth template sync idempotency\"\r\nON public.auth_template_sync_idempotency\r\nFOR UPDATE\r\nTO service_role\r\nUSING (TRUE)\r\nWITH CHECK (TRUE)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DO $$\r\nBEGIN\r\n    IF to_regprocedure('public.handle_updated_at()') IS NOT NULL THEN\r\n        IF NOT EXISTS (\r\n            SELECT 1\r\n            FROM pg_trigger\r\n            WHERE tgname = 'set_updated_at_auth_template_sync_idempotency'\r\n              AND tgrelid = 'public.auth_template_sync_idempotency'::regclass\r\n        ) THEN\r\n            CREATE TRIGGER set_updated_at_auth_template_sync_idempotency\r\n            BEFORE UPDATE ON public.auth_template_sync_idempotency\r\n            FOR EACH ROW\r\n            EXECUTE FUNCTION public.handle_updated_at();\r\n        END IF;\r\n    END IF;\r\nEND\r\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"System can update auth template sync idempotency\" for relation \"public.auth_template_sync_idempotency\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "System can update auth template sync idempotency" for relation "public.auth_template_sync_idempotency" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260219120000"},{"text":"create_auth_template_sync_idempotency"},{"binary":"0000000100000000000000190000000e0000000100000005424547494e0000023d435245415445205441424c45204946204e4f5420455849535453207075626c69632e617574685f74656d706c6174655f73796e635f6964656d706f74656e637920280d0a2020202069642055554944205052494d415259204b45592044454641554c542067656e5f72616e646f6d5f7575696428292c0d0a202020206163746f725f69642055554944204e4f54204e554c4c205245464552454e43455320617574682e757365727328696429204f4e2044454c45544520434153434144452c0d0a202020206964656d706f74656e63795f6b65792054455854204e4f54204e554c4c2c0d0a202020207061796c6f61645f686173682054455854204e4f54204e554c4c2c0d0a20202020726571756573745f73756d6d617279204a534f4e42204e4f54204e554c4c2044454641554c5420277b7d273a3a6a736f6e622c0d0a20202020726573706f6e73655f73746174757320494e5445474552204e4f54204e554c4c2044454641554c542031303220434845434b2028726573706f6e73655f737461747573204245545745454e2031303020414e4420353939292c0d0a20202020726573706f6e73655f626f6479204a534f4e42204e4f54204e554c4c2044454641554c5420277b7d273a3a6a736f6e622c0d0a20202020637265617465645f61742054494d455354414d50545a204e4f54204e554c4c2044454641554c54204e4f5728292c0d0a20202020757064617465645f61742054494d455354414d50545a204e4f54204e554c4c2044454641554c54204e4f5728290d0a290000009443524541544520554e4951554520494e444558204946204e4f5420455849535453206964785f617574685f74656d706c6174655f73796e635f6964656d706f74656e63795f6163746f725f6b65790d0a4f4e207075626c69632e617574685f74656d706c6174655f73796e635f6964656d706f74656e637920286163746f725f69642c206964656d706f74656e63795f6b6579290000009143524541544520494e444558204946204e4f5420455849535453206964785f617574685f74656d706c6174655f73796e635f6964656d706f74656e63795f6163746f725f637265617465640d0a4f4e207075626c69632e617574685f74656d706c6174655f73796e635f6964656d706f74656e637920286163746f725f69642c20637265617465645f61742044455343290000008143524541544520494e444558204946204e4f5420455849535453206964785f617574685f74656d706c6174655f73796e635f6964656d706f74656e63795f637265617465640d0a4f4e207075626c69632e617574685f74656d706c6174655f73796e635f6964656d706f74656e63792028637265617465645f61742044455343290000004b414c544552205441424c45207075626c69632e617574685f74656d706c6174655f73796e635f6964656d706f74656e637920454e41424c4520524f57204c4556454c2053454355524954590000007144524f5020504f4c49435920494620455849535453202253797374656d2063616e20696e7365727420617574682074656d706c6174652073796e63206964656d706f74656e637922204f4e207075626c69632e617574685f74656d706c6174655f73796e635f6964656d706f74656e63790000009a43524541544520504f4c494359202253797374656d2063616e20696e7365727420617574682074656d706c6174652073796e63206964656d706f74656e6379220d0a4f4e207075626c69632e617574685f74656d706c6174655f73796e635f6964656d706f74656e63790d0a464f5220494e534552540d0a544f20736572766963655f726f6c650d0a5749544820434845434b202854525545290000006f44524f5020504f4c49435920494620455849535453202253797374656d2063616e207265616420617574682074656d706c6174652073796e63206964656d706f74656e637922204f4e207075626c69632e617574685f74656d706c6174655f73796e635f6964656d706f74656e63790000009343524541544520504f4c494359202253797374656d2063616e207265616420617574682074656d706c6174652073796e63206964656d706f74656e6379220d0a4f4e207075626c69632e617574685f74656d706c6174655f73796e635f6964656d706f74656e63790d0a464f522053454c4543540d0a544f20736572766963655f726f6c650d0a5553494e47202854525545290000007144524f5020504f4c49435920494620455849535453202253797374656d2063616e2075706461746520617574682074656d706c6174652073796e63206964656d706f74656e637922204f4e207075626c69632e617574685f74656d706c6174655f73796e635f6964656d706f74656e6379000000a843524541544520504f4c494359202253797374656d2063616e2075706461746520617574682074656d706c6174652073796e63206964656d706f74656e6379220d0a4f4e207075626c69632e617574685f74656d706c6174655f73796e635f6964656d706f74656e63790d0a464f52205550444154450d0a544f20736572766963655f726f6c650d0a5553494e47202854525545290d0a5749544820434845434b2028545255452900000253444f2024240d0a424547494e0d0a20202020494620746f5f72656770726f63656475726528277075626c69632e68616e646c655f757064617465645f617428292729204953204e4f54204e554c4c205448454e0d0a20202020202020204946204e4f542045584953545320280d0a20202020202020202020202053454c45435420310d0a20202020202020202020202046524f4d2070675f747269676765720d0a20202020202020202020202057484552452074676e616d65203d20277365745f757064617465645f61745f617574685f74656d706c6174655f73796e635f6964656d706f74656e6379270d0a2020202020202020202020202020414e4420746772656c6964203d20277075626c69632e617574685f74656d706c6174655f73796e635f6964656d706f74656e6379273a3a726567636c6173730d0a202020202020202029205448454e0d0a2020202020202020202020204352454154452054524947474552207365745f757064617465645f61745f617574685f74656d706c6174655f73796e635f6964656d706f74656e63790d0a2020202020202020202020204245464f524520555044415445204f4e207075626c69632e617574685f74656d706c6174655f73796e635f6964656d706f74656e63790d0a202020202020202020202020464f52204541434820524f570d0a202020202020202020202020455845435554452046554e4354494f4e207075626c69632e68616e646c655f757064617465645f617428293b0d0a2020202020202020454e442049463b0d0a20202020454e442049463b0d0a454e440d0a242400000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260221185300_reconcile_remaining_function_drift.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"set check_function_bodies = off","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.admin_update_order_status(p_order_id uuid, p_new_status text, p_note text DEFAULT NULL::text)\r\n RETURNS boolean\r\n LANGUAGE plpgsql\r\n SECURITY DEFINER\r\n SET search_path TO 'public', 'pg_catalog'\r\nAS $function$\r\nDECLARE\r\n    v_old_status TEXT;\r\n    v_order_details JSONB;\r\n    v_payment_status TEXT;\r\n    v_payment_method TEXT;\r\n    v_payment_intent_id UUID;\r\n    v_item RECORD;\r\nBEGIN\r\n    -- 1. Admin check (Assumes function exists or falls back to role check)\r\n    IF (SELECT count(*) FROM public.profiles WHERE id = auth.uid() AND is_admin = true) = 0 THEN\r\n        RAISE EXCEPTION 'Unauthorized: Admin permission required';\r\n    END IF;\r\n\r\n    -- 2. Fetch current order data\r\n    SELECT status, order_details, payment_status, payment_method, payment_intent_id\r\n    INTO v_old_status, v_order_details, v_payment_status, v_payment_method, v_payment_intent_id\r\n    FROM public.orders\r\n    WHERE id = p_order_id;\r\n\r\n    IF NOT FOUND THEN\r\n        RAISE EXCEPTION 'Order not found';\r\n    END IF;\r\n\r\n    -- 3. Transition validation\r\n    IF v_old_status = 'cancelled' THEN\r\n        RAISE EXCEPTION 'Cancelled orders cannot be updated';\r\n    END IF;\r\n\r\n    IF p_new_status NOT IN ('pending', 'processing', 'preparing', 'shipped', 'delivered', 'cancelled') THEN\r\n        RAISE EXCEPTION 'Invalid status: %', p_new_status;\r\n    END IF;\r\n\r\n    -- 4. Cancellation Logic (Stock Restore)\r\n    IF p_new_status = 'cancelled' THEN\r\n        -- Financial status is intent-driven for card payments.\r\n        IF v_payment_status = 'paid' THEN\r\n            IF v_payment_method = 'credit_card' AND v_payment_intent_id IS NOT NULL THEN\r\n                NULL; -- Do nothing, refund via payment intent API\r\n            ELSE\r\n                UPDATE public.orders SET payment_status = 'refunded' WHERE id = p_order_id;\r\n            END IF;\r\n        END IF;\r\n\r\n        -- Restore stock for items\r\n        FOR v_item IN\r\n            SELECT *\r\n            FROM jsonb_to_recordset(v_order_details-\u003e'items') AS x(product_id UUID, quantity INTEGER)\r\n        LOOP\r\n            IF v_item.product_id IS NOT NULL THEN\r\n                UPDATE public.products\r\n                SET stock = stock + v_item.quantity,\r\n                    updated_at = NOW()\r\n                WHERE id = v_item.product_id;\r\n            END IF;\r\n        END LOOP;\r\n\r\n        -- Update reason\r\n        UPDATE public.orders SET cancellation_reason = p_note WHERE id = p_order_id;\r\n    END IF;\r\n\r\n    -- 5. Update Order\r\n    UPDATE public.orders\r\n    SET status = p_new_status, updated_at = NOW()\r\n    WHERE id = p_order_id;\r\n\r\n    -- 6. Insert into Order Status History\r\n    INSERT INTO public.order_status_history (order_id, status, note, created_by)\r\n    VALUES (p_order_id, p_new_status, p_note, auth.uid());\r\n\r\n    -- 7. Insert into Admin Audit Log (if table exists)\r\n    IF EXISTS (SELECT FROM information_schema.tables WHERE table_name = 'admin_audit_log') THEN\r\n        INSERT INTO public.admin_audit_log (admin_user_id, action, target_table, target_id, details)\r\n        VALUES (\r\n            auth.uid(),\r\n            'update_order_status',\r\n            'orders',\r\n            p_order_id,\r\n            jsonb_build_object(\r\n                'old_status', v_old_status,\r\n                'new_status', p_new_status,\r\n                'note', p_note\r\n            )\r\n        );\r\n    END IF;\r\n\r\n    RETURN FOUND;\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.get_dashboard_stats(start_date timestamp with time zone, end_date timestamp with time zone)\r\n RETURNS json\r\n LANGUAGE plpgsql\r\n SECURITY DEFINER\r\n SET search_path TO 'public'\r\nAS $function$\r\nDECLARE\r\n    total_revenue numeric;\r\n    order_count int;\r\n    cancelled_count int;\r\n    daily_sales json;\r\n    is_admin_user boolean;\r\nBEGIN\r\n    -- Check if user is admin\r\n    SELECT is_admin INTO is_admin_user FROM profiles WHERE id = auth.uid();\r\n\r\n    IF is_admin_user IS NOT TRUE THEN\r\n        RAISE EXCEPTION 'Unauthorized access';\r\n    END IF;\r\n\r\n    -- Calculate aggregate stats (active orders)\r\n    SELECT\r\n        COALESCE(SUM((order_details-\u003e\u003e'total')::numeric), 0),\r\n        COUNT(*)\r\n    INTO total_revenue, order_count\r\n    FROM orders\r\n    WHERE created_at \u003e= start_date AND created_at \u003c= end_date\r\n    AND status != 'cancelled';\r\n\r\n    -- Calculate cancelled count\r\n    SELECT COUNT(*)\r\n    INTO cancelled_count\r\n    FROM orders\r\n    WHERE created_at \u003e= start_date AND created_at \u003c= end_date\r\n    AND status = 'cancelled';\r\n\r\n    -- Calculate daily sales breakdown (excluding cancelled)\r\n    SELECT json_agg(t) INTO daily_sales\r\n    FROM (\r\n        SELECT\r\n            date_trunc('day', created_at) as date,\r\n            COUNT(*) as count,\r\n            SUM((order_details-\u003e\u003e'total')::numeric) as revenue\r\n        FROM orders\r\n        WHERE created_at \u003e= start_date AND created_at \u003c= end_date\r\n        AND status != 'cancelled'\r\n        GROUP BY 1\r\n        ORDER BY 1\r\n    ) t;\r\n\r\n    RETURN json_build_object(\r\n        'total_revenue', total_revenue,\r\n        'order_count', order_count,\r\n        'cancelled_count', cancelled_count,\r\n        'daily_sales', COALESCE(daily_sales, '[]'::json)\r\n    );\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.handle_new_order_promo()\r\n RETURNS trigger\r\n LANGUAGE plpgsql\r\n SECURITY DEFINER\r\n SET search_path TO 'public', 'pg_catalog'\r\nAS $function$\r\nDECLARE\r\n  v_code text;\r\n  v_discount numeric;\r\n  v_promo_id uuid;\r\n  v_current_usage int;\r\n  v_limit int;\r\nBEGIN\r\n  -- Extract promo code from JSONB\r\n  v_code := NEW.order_details-\u003e\u003e'promo_code';\r\n  v_discount := (NEW.order_details-\u003e\u003e'discount')::numeric;\r\n\r\n  -- If no code, exit\r\n  IF v_code IS NULL OR v_code = '' THEN\r\n    RETURN NEW;\r\n  END IF;\r\n\r\n  -- Find promo code (Locking)\r\n  SELECT id, usage_count, usage_limit INTO v_promo_id, v_current_usage, v_limit\r\n  FROM promo_codes\r\n  WHERE code ILIKE v_code\r\n  FOR UPDATE;\r\n\r\n  IF v_promo_id IS NOT NULL THEN\r\n    -- Increment usage\r\n    UPDATE promo_codes\r\n    SET usage_count = COALESCE(usage_count, 0) + 1\r\n    WHERE id = v_promo_id;\r\n\r\n    -- Insert log\r\n    INSERT INTO promo_logs (promo_code_id, order_id, user_id, discount_amount)\r\n    VALUES (v_promo_id, NEW.id, NEW.user_id, v_discount);\r\n  END IF;\r\n\r\n  RETURN NEW;\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.handle_updated_at()\r\n RETURNS trigger\r\n LANGUAGE plpgsql\r\n SECURITY DEFINER\r\n SET search_path TO ''\r\nAS $function$\r\nBEGIN\r\n    NEW.updated_at = timezone('utc'::text, now());\r\n    RETURN NEW;\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.is_admin_user()\r\n RETURNS boolean\r\n LANGUAGE plpgsql\r\n SECURITY DEFINER\r\n SET search_path TO 'public', 'pg_catalog'\r\nAS $function$\r\nBEGIN\r\n    RETURN EXISTS (\r\n        SELECT 1 FROM public.profiles \r\n        WHERE id = (SELECT auth.uid()) AND (is_admin = true OR is_superadmin = true)\r\n    );\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.is_admin_user(user_id uuid)\r\n RETURNS boolean\r\n LANGUAGE plpgsql\r\n STABLE SECURITY DEFINER\r\n SET search_path TO 'public'\r\nAS $function$\r\nDECLARE\r\n  admin_status boolean;\r\nBEGIN\r\n  -- Direct column access without triggering policy checks\r\n  SELECT is_admin INTO admin_status\r\n  FROM public.profiles\r\n  WHERE id = user_id\r\n  LIMIT 1;\r\n\r\n  RETURN COALESCE(admin_status, false);\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.is_superadmin_user()\r\n RETURNS boolean\r\n LANGUAGE sql\r\n SECURITY DEFINER\r\n SET search_path TO 'public'\r\nAS $function$\r\n  SELECT EXISTS (\r\n    SELECT 1\r\n    FROM profiles\r\n    WHERE id = auth.uid()\r\n      AND is_superadmin = true\r\n  );\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.prune_expired_otp_codes()\r\n RETURNS void\r\n LANGUAGE plpgsql\r\n SET search_path TO 'public'\r\nAS $function$\r\nBEGIN\r\n    DELETE FROM public.otp_codes WHERE expires_at \u003c now();\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.validate_checkout(p_product_slug text, p_quantity integer, p_promo_code text DEFAULT NULL::text)\r\n RETURNS json\r\n LANGUAGE plpgsql\r\n SECURITY DEFINER\r\n SET search_path TO 'public', 'pg_catalog'\r\nAS $function$\r\nDECLARE\r\n    v_user_id UUID;\r\n    v_profile_complete BOOLEAN;\r\n    v_product RECORD;\r\n    v_subtotal DECIMAL(10, 2);\r\n    v_vat_rate DECIMAL(5, 4) := 0.20;\r\n    v_vat_amount DECIMAL(10, 2);\r\n    v_total DECIMAL(10, 2);\r\n    v_order_id UUID;\r\nBEGIN\r\n    -- 1. Kullanc dorulama\r\n    v_user_id := auth.uid();\r\n\r\n    IF v_user_id IS NULL THEN\r\n        RETURN json_build_object(\r\n            'success', false,\r\n            'error', 'UNAUTHORIZED',\r\n            'message', 'Oturum amanz gerekiyor'\r\n        );\r\n    END IF;\r\n\r\n    -- 2. Profil tamamlanm m kontrol et\r\n    SELECT profile_complete INTO v_profile_complete\r\n    FROM profiles\r\n    WHERE id = v_user_id;\r\n\r\n    IF v_profile_complete IS NULL OR v_profile_complete = false THEN\r\n        RETURN json_build_object(\r\n            'success', false,\r\n            'error', 'PROFILE_INCOMPLETE',\r\n            'message', 'Sipari vermek iin profilinizi tamamlamanz gerekiyor'\r\n        );\r\n    END IF;\r\n\r\n    -- 3. rn bilgilerini al ve dorula\r\n    SELECT * INTO v_product\r\n    FROM products\r\n    WHERE slug = p_product_slug AND is_active = true;\r\n\r\n    IF v_product IS NULL THEN\r\n        RETURN json_build_object(\r\n            'success', false,\r\n            'error', 'PRODUCT_NOT_FOUND',\r\n            'message', 'rn bulunamad veya satta deil'\r\n        );\r\n    END IF;\r\n\r\n    -- 4. Miktar kontrol\r\n    IF p_quantity \u003c 1 OR p_quantity \u003e 10 THEN\r\n        RETURN json_build_object(\r\n            'success', false,\r\n            'error', 'INVALID_QUANTITY',\r\n            'message', 'Geersiz miktar (1-10 aras olmal)'\r\n        );\r\n    END IF;\r\n\r\n    -- 5. Stok kontrol\r\n    IF v_product.stock \u003c p_quantity THEN\r\n        RETURN json_build_object(\r\n            'success', false,\r\n            'error', 'INSUFFICIENT_STOCK',\r\n            'message', 'Yeterli stok yok. Mevcut stok: ' || v_product.stock\r\n        );\r\n    END IF;\r\n\r\n    -- 6. Fiyat hesaplama (SUNUCU TARAFINDA!)\r\n    v_subtotal := v_product.price * p_quantity;\r\n    v_vat_amount := v_subtotal * v_vat_rate;\r\n    v_total := v_subtotal + v_vat_amount;\r\n\r\n    -- 7. Sipari olutur\r\n    INSERT INTO orders (\r\n        user_id,\r\n        product_id,\r\n        quantity,\r\n        unit_price,\r\n        subtotal,\r\n        vat_amount,\r\n        total,\r\n        status,\r\n        promo_code\r\n    ) VALUES (\r\n        v_user_id,\r\n        v_product.id,\r\n        p_quantity,\r\n        v_product.price,\r\n        v_subtotal,\r\n        v_vat_amount,\r\n        v_total,\r\n        'pending',\r\n        p_promo_code\r\n    )\r\n    RETURNING id INTO v_order_id;\r\n\r\n    -- 8. Stok gncelle\r\n    UPDATE products\r\n    SET stock = stock - p_quantity\r\n    WHERE id = v_product.id;\r\n\r\n    -- 9. Baarl yant\r\n    RETURN json_build_object(\r\n        'success', true,\r\n        'order_id', v_order_id,\r\n        'product_name', v_product.name,\r\n        'quantity', p_quantity,\r\n        'unit_price', v_product.price,\r\n        'subtotal', v_subtotal,\r\n        'vat_amount', v_vat_amount,\r\n        'total', v_total,\r\n        'message', 'Sipari baaryla oluturuldu'\r\n    );\r\n\r\nEXCEPTION\r\n    WHEN OTHERS THEN\r\n        -- Don't expose SQL error details - return generic message\r\n        RETURN json_build_object(\r\n            'success', false,\r\n            'error', 'SERVER_ERROR',\r\n            'message', 'lem srasnda bir hata olutu. Ltfen tekrar deneyin.'\r\n        );\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260221185300"},{"text":"reconcile_remaining_function_drift"},{"binary":"0000000100000000000000190000000a000000010000001f73657420636865636b5f66756e6374696f6e5f626f64696573203d206f666600000d4a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e61646d696e5f7570646174655f6f726465725f73746174757328705f6f726465725f696420757569642c20705f6e65775f73746174757320746578742c20705f6e6f746520746578742044454641554c54204e554c4c3a3a74657874290d0a2052455455524e5320626f6f6c65616e0d0a204c414e475541474520706c706773716c0d0a20534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f20277075626c6963272c202770675f636174616c6f67270d0a4153202466756e6374696f6e240d0a4445434c4152450d0a20202020765f6f6c645f73746174757320544558543b0d0a20202020765f6f726465725f64657461696c73204a534f4e423b0d0a20202020765f7061796d656e745f73746174757320544558543b0d0a20202020765f7061796d656e745f6d6574686f6420544558543b0d0a20202020765f7061796d656e745f696e74656e745f696420555549443b0d0a20202020765f6974656d205245434f52443b0d0a424547494e0d0a202020202d2d20312e2041646d696e20636865636b2028417373756d65732066756e6374696f6e20657869737473206f722066616c6c73206261636b20746f20726f6c6520636865636b290d0a202020204946202853454c45435420636f756e74282a292046524f4d207075626c69632e70726f66696c6573205748455245206964203d20617574682e756964282920414e442069735f61646d696e203d207472756529203d2030205448454e0d0a2020202020202020524149534520455843455054494f4e2027556e617574686f72697a65643a2041646d696e207065726d697373696f6e207265717569726564273b0d0a20202020454e442049463b0d0a0d0a202020202d2d20322e2046657463682063757272656e74206f7264657220646174610d0a2020202053454c454354207374617475732c206f726465725f64657461696c732c207061796d656e745f7374617475732c207061796d656e745f6d6574686f642c207061796d656e745f696e74656e745f69640d0a20202020494e544f20765f6f6c645f7374617475732c20765f6f726465725f64657461696c732c20765f7061796d656e745f7374617475732c20765f7061796d656e745f6d6574686f642c20765f7061796d656e745f696e74656e745f69640d0a2020202046524f4d207075626c69632e6f72646572730d0a202020205748455245206964203d20705f6f726465725f69643b0d0a0d0a202020204946204e4f5420464f554e44205448454e0d0a2020202020202020524149534520455843455054494f4e20274f72646572206e6f7420666f756e64273b0d0a20202020454e442049463b0d0a0d0a202020202d2d20332e205472616e736974696f6e2076616c69646174696f6e0d0a20202020494620765f6f6c645f737461747573203d202763616e63656c6c656427205448454e0d0a2020202020202020524149534520455843455054494f4e202743616e63656c6c6564206f72646572732063616e6e6f742062652075706461746564273b0d0a20202020454e442049463b0d0a0d0a20202020494620705f6e65775f737461747573204e4f5420494e20282770656e64696e67272c202770726f63657373696e67272c2027707265706172696e67272c202773686970706564272c202764656c697665726564272c202763616e63656c6c65642729205448454e0d0a2020202020202020524149534520455843455054494f4e2027496e76616c6964207374617475733a2025272c20705f6e65775f7374617475733b0d0a20202020454e442049463b0d0a0d0a202020202d2d20342e2043616e63656c6c6174696f6e204c6f676963202853746f636b20526573746f7265290d0a20202020494620705f6e65775f737461747573203d202763616e63656c6c656427205448454e0d0a20202020202020202d2d2046696e616e6369616c2073746174757320697320696e74656e742d64726976656e20666f722063617264207061796d656e74732e0d0a2020202020202020494620765f7061796d656e745f737461747573203d20277061696427205448454e0d0a202020202020202020202020494620765f7061796d656e745f6d6574686f64203d20276372656469745f636172642720414e4420765f7061796d656e745f696e74656e745f6964204953204e4f54204e554c4c205448454e0d0a202020202020202020202020202020204e554c4c3b202d2d20446f206e6f7468696e672c20726566756e6420766961207061796d656e7420696e74656e74204150490d0a202020202020202020202020454c53450d0a20202020202020202020202020202020555044415445207075626c69632e6f726465727320534554207061796d656e745f737461747573203d2027726566756e64656427205748455245206964203d20705f6f726465725f69643b0d0a202020202020202020202020454e442049463b0d0a2020202020202020454e442049463b0d0a0d0a20202020202020202d2d20526573746f72652073746f636b20666f72206974656d730d0a2020202020202020464f5220765f6974656d20494e0d0a20202020202020202020202053454c454354202a0d0a20202020202020202020202046524f4d206a736f6e625f746f5f7265636f726473657428765f6f726465725f64657461696c732d3e276974656d73272920415320782870726f647563745f696420555549442c207175616e7469747920494e5445474552290d0a20202020202020204c4f4f500d0a202020202020202020202020494620765f6974656d2e70726f647563745f6964204953204e4f54204e554c4c205448454e0d0a20202020202020202020202020202020555044415445207075626c69632e70726f64756374730d0a202020202020202020202020202020205345542073746f636b203d2073746f636b202b20765f6974656d2e7175616e746974792c0d0a2020202020202020202020202020202020202020757064617465645f6174203d204e4f5728290d0a202020202020202020202020202020205748455245206964203d20765f6974656d2e70726f647563745f69643b0d0a202020202020202020202020454e442049463b0d0a2020202020202020454e44204c4f4f503b0d0a0d0a20202020202020202d2d2055706461746520726561736f6e0d0a2020202020202020555044415445207075626c69632e6f7264657273205345542063616e63656c6c6174696f6e5f726561736f6e203d20705f6e6f7465205748455245206964203d20705f6f726465725f69643b0d0a20202020454e442049463b0d0a0d0a202020202d2d20352e20557064617465204f726465720d0a20202020555044415445207075626c69632e6f72646572730d0a2020202053455420737461747573203d20705f6e65775f7374617475732c20757064617465645f6174203d204e4f5728290d0a202020205748455245206964203d20705f6f726465725f69643b0d0a0d0a202020202d2d20362e20496e7365727420696e746f204f726465722053746174757320486973746f72790d0a20202020494e5345525420494e544f207075626c69632e6f726465725f7374617475735f686973746f727920286f726465725f69642c207374617475732c206e6f74652c20637265617465645f6279290d0a2020202056414c5545532028705f6f726465725f69642c20705f6e65775f7374617475732c20705f6e6f74652c20617574682e7569642829293b0d0a0d0a202020202d2d20372e20496e7365727420696e746f2041646d696e204175646974204c6f6720286966207461626c6520657869737473290d0a20202020494620455849535453202853454c4543542046524f4d20696e666f726d6174696f6e5f736368656d612e7461626c6573205748455245207461626c655f6e616d65203d202761646d696e5f61756469745f6c6f672729205448454e0d0a2020202020202020494e5345525420494e544f207075626c69632e61646d696e5f61756469745f6c6f67202861646d696e5f757365725f69642c20616374696f6e2c207461726765745f7461626c652c207461726765745f69642c2064657461696c73290d0a202020202020202056414c55455320280d0a202020202020202020202020617574682e75696428292c0d0a202020202020202020202020277570646174655f6f726465725f737461747573272c0d0a202020202020202020202020276f7264657273272c0d0a202020202020202020202020705f6f726465725f69642c0d0a2020202020202020202020206a736f6e625f6275696c645f6f626a656374280d0a20202020202020202020202020202020276f6c645f737461747573272c20765f6f6c645f7374617475732c0d0a20202020202020202020202020202020276e65775f737461747573272c20705f6e65775f7374617475732c0d0a20202020202020202020202020202020276e6f7465272c20705f6e6f74650d0a202020202020202020202020290d0a2020202020202020293b0d0a20202020454e442049463b0d0a0d0a2020202052455455524e20464f554e443b0d0a454e443b0d0a2466756e6374696f6e24000006de435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e6765745f64617368626f6172645f73746174732873746172745f646174652074696d657374616d7020776974682074696d65207a6f6e652c20656e645f646174652074696d657374616d7020776974682074696d65207a6f6e65290d0a2052455455524e53206a736f6e0d0a204c414e475541474520706c706773716c0d0a20534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f20277075626c6963270d0a4153202466756e6374696f6e240d0a4445434c4152450d0a20202020746f74616c5f726576656e7565206e756d657269633b0d0a202020206f726465725f636f756e7420696e743b0d0a2020202063616e63656c6c65645f636f756e7420696e743b0d0a202020206461696c795f73616c6573206a736f6e3b0d0a2020202069735f61646d696e5f7573657220626f6f6c65616e3b0d0a424547494e0d0a202020202d2d20436865636b20696620757365722069732061646d696e0d0a2020202053454c4543542069735f61646d696e20494e544f2069735f61646d696e5f757365722046524f4d2070726f66696c6573205748455245206964203d20617574682e75696428293b0d0a0d0a2020202049462069735f61646d696e5f75736572204953204e4f542054525545205448454e0d0a2020202020202020524149534520455843455054494f4e2027556e617574686f72697a656420616363657373273b0d0a20202020454e442049463b0d0a0d0a202020202d2d2043616c63756c617465206167677265676174652073746174732028616374697665206f7264657273290d0a2020202053454c4543540d0a2020202020202020434f414c455343452853554d28286f726465725f64657461696c732d3e3e27746f74616c27293a3a6e756d65726963292c2030292c0d0a2020202020202020434f554e54282a290d0a20202020494e544f20746f74616c5f726576656e75652c206f726465725f636f756e740d0a2020202046524f4d206f72646572730d0a20202020574845524520637265617465645f6174203e3d2073746172745f6461746520414e4420637265617465645f6174203c3d20656e645f646174650d0a20202020414e442073746174757320213d202763616e63656c6c6564273b0d0a0d0a202020202d2d2043616c63756c6174652063616e63656c6c656420636f756e740d0a2020202053454c45435420434f554e54282a290d0a20202020494e544f2063616e63656c6c65645f636f756e740d0a2020202046524f4d206f72646572730d0a20202020574845524520637265617465645f6174203e3d2073746172745f6461746520414e4420637265617465645f6174203c3d20656e645f646174650d0a20202020414e4420737461747573203d202763616e63656c6c6564273b0d0a0d0a202020202d2d2043616c63756c617465206461696c792073616c657320627265616b646f776e20286578636c7564696e672063616e63656c6c6564290d0a2020202053454c454354206a736f6e5f61676728742920494e544f206461696c795f73616c65730d0a2020202046524f4d20280d0a202020202020202053454c4543540d0a202020202020202020202020646174655f7472756e632827646179272c20637265617465645f61742920617320646174652c0d0a202020202020202020202020434f554e54282a2920617320636f756e742c0d0a20202020202020202020202053554d28286f726465725f64657461696c732d3e3e27746f74616c27293a3a6e756d657269632920617320726576656e75650d0a202020202020202046524f4d206f72646572730d0a2020202020202020574845524520637265617465645f6174203e3d2073746172745f6461746520414e4420637265617465645f6174203c3d20656e645f646174650d0a2020202020202020414e442073746174757320213d202763616e63656c6c6564270d0a202020202020202047524f555020425920310d0a20202020202020204f5244455220425920310d0a202020202920743b0d0a0d0a2020202052455455524e206a736f6e5f6275696c645f6f626a656374280d0a202020202020202027746f74616c5f726576656e7565272c20746f74616c5f726576656e75652c0d0a2020202020202020276f726465725f636f756e74272c206f726465725f636f756e742c0d0a20202020202020202763616e63656c6c65645f636f756e74272c2063616e63656c6c65645f636f756e742c0d0a2020202020202020276461696c795f73616c6573272c20434f414c45534345286461696c795f73616c65732c20275b5d273a3a6a736f6e290d0a20202020293b0d0a454e443b0d0a2466756e6374696f6e2400000430435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e68616e646c655f6e65775f6f726465725f70726f6d6f28290d0a2052455455524e5320747269676765720d0a204c414e475541474520706c706773716c0d0a20534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f20277075626c6963272c202770675f636174616c6f67270d0a4153202466756e6374696f6e240d0a4445434c4152450d0a2020765f636f646520746578743b0d0a2020765f646973636f756e74206e756d657269633b0d0a2020765f70726f6d6f5f696420757569643b0d0a2020765f63757272656e745f757361676520696e743b0d0a2020765f6c696d697420696e743b0d0a424547494e0d0a20202d2d20457874726163742070726f6d6f20636f64652066726f6d204a534f4e420d0a2020765f636f6465203a3d204e45572e6f726465725f64657461696c732d3e3e2770726f6d6f5f636f6465273b0d0a2020765f646973636f756e74203a3d20284e45572e6f726465725f64657461696c732d3e3e27646973636f756e7427293a3a6e756d657269633b0d0a0d0a20202d2d204966206e6f20636f64652c20657869740d0a2020494620765f636f6465204953204e554c4c204f5220765f636f6465203d202727205448454e0d0a2020202052455455524e204e45573b0d0a2020454e442049463b0d0a0d0a20202d2d2046696e642070726f6d6f20636f646520284c6f636b696e67290d0a202053454c4543542069642c2075736167655f636f756e742c2075736167655f6c696d697420494e544f20765f70726f6d6f5f69642c20765f63757272656e745f75736167652c20765f6c696d69740d0a202046524f4d2070726f6d6f5f636f6465730d0a2020574845524520636f646520494c494b4520765f636f64650d0a2020464f52205550444154453b0d0a0d0a2020494620765f70726f6d6f5f6964204953204e4f54204e554c4c205448454e0d0a202020202d2d20496e6372656d656e742075736167650d0a202020205550444154452070726f6d6f5f636f6465730d0a202020205345542075736167655f636f756e74203d20434f414c455343452875736167655f636f756e742c203029202b20310d0a202020205748455245206964203d20765f70726f6d6f5f69643b0d0a0d0a202020202d2d20496e73657274206c6f670d0a20202020494e5345525420494e544f2070726f6d6f5f6c6f6773202870726f6d6f5f636f64655f69642c206f726465725f69642c20757365725f69642c20646973636f756e745f616d6f756e74290d0a2020202056414c5545532028765f70726f6d6f5f69642c204e45572e69642c204e45572e757365725f69642c20765f646973636f756e74293b0d0a2020454e442049463b0d0a0d0a202052455455524e204e45573b0d0a454e443b0d0a2466756e6374696f6e24000000f2435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e68616e646c655f757064617465645f617428290d0a2052455455524e5320747269676765720d0a204c414e475541474520706c706773716c0d0a20534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f2027270d0a4153202466756e6374696f6e240d0a424547494e0d0a202020204e45572e757064617465645f6174203d2074696d657a6f6e652827757463273a3a746578742c206e6f772829293b0d0a2020202052455455524e204e45573b0d0a454e443b0d0a2466756e6374696f6e2400000158435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e69735f61646d696e5f7573657228290d0a2052455455524e5320626f6f6c65616e0d0a204c414e475541474520706c706773716c0d0a20534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f20277075626c6963272c202770675f636174616c6f67270d0a4153202466756e6374696f6e240d0a424547494e0d0a2020202052455455524e2045584953545320280d0a202020202020202053454c45435420312046524f4d207075626c69632e70726f66696c6573200d0a20202020202020205748455245206964203d202853454c45435420617574682e75696428292920414e44202869735f61646d696e203d2074727565204f522069735f737570657261646d696e203d2074727565290d0a20202020293b0d0a454e443b0d0a2466756e6374696f6e24000001aa435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e69735f61646d696e5f7573657228757365725f69642075756964290d0a2052455455524e5320626f6f6c65616e0d0a204c414e475541474520706c706773716c0d0a20535441424c4520534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f20277075626c6963270d0a4153202466756e6374696f6e240d0a4445434c4152450d0a202061646d696e5f73746174757320626f6f6c65616e3b0d0a424547494e0d0a20202d2d2044697265637420636f6c756d6e2061636365737320776974686f75742074726967676572696e6720706f6c69637920636865636b730d0a202053454c4543542069735f61646d696e20494e544f2061646d696e5f7374617475730d0a202046524f4d207075626c69632e70726f66696c65730d0a20205748455245206964203d20757365725f69640d0a20204c494d495420313b0d0a0d0a202052455455524e20434f414c455343452861646d696e5f7374617475732c2066616c7365293b0d0a454e443b0d0a2466756e6374696f6e2400000118435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e69735f737570657261646d696e5f7573657228290d0a2052455455524e5320626f6f6c65616e0d0a204c414e47554147452073716c0d0a20534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f20277075626c6963270d0a4153202466756e6374696f6e240d0a202053454c4543542045584953545320280d0a2020202053454c45435420310d0a2020202046524f4d2070726f66696c65730d0a202020205748455245206964203d20617574682e75696428290d0a202020202020414e442069735f737570657261646d696e203d20747275650d0a2020293b0d0a2466756e6374696f6e24000000df435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e7072756e655f657870697265645f6f74705f636f64657328290d0a2052455455524e5320766f69640d0a204c414e475541474520706c706773716c0d0a20534554207365617263685f7061746820544f20277075626c6963270d0a4153202466756e6374696f6e240d0a424547494e0d0a2020202044454c4554452046524f4d207075626c69632e6f74705f636f64657320574845524520657870697265735f6174203c206e6f7728293b0d0a454e443b0d0a2466756e6374696f6e2400000e47435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e76616c69646174655f636865636b6f757428705f70726f647563745f736c756720746578742c20705f7175616e7469747920696e74656765722c20705f70726f6d6f5f636f646520746578742044454641554c54204e554c4c3a3a74657874290d0a2052455455524e53206a736f6e0d0a204c414e475541474520706c706773716c0d0a20534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f20277075626c6963272c202770675f636174616c6f67270d0a4153202466756e6374696f6e240d0a4445434c4152450d0a20202020765f757365725f696420555549443b0d0a20202020765f70726f66696c655f636f6d706c65746520424f4f4c45414e3b0d0a20202020765f70726f64756374205245434f52443b0d0a20202020765f737562746f74616c20444543494d414c2831302c2032293b0d0a20202020765f7661745f7261746520444543494d414c28352c203429203a3d20302e32303b0d0a20202020765f7661745f616d6f756e7420444543494d414c2831302c2032293b0d0a20202020765f746f74616c20444543494d414c2831302c2032293b0d0a20202020765f6f726465725f696420555549443b0d0a424547494e0d0a202020202d2d20312e204b756c6c616ec4b163c4b120646fc49f72756c616d610d0a20202020765f757365725f6964203a3d20617574682e75696428293b0d0a0d0a20202020494620765f757365725f6964204953204e554c4c205448454e0d0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280d0a2020202020202020202020202773756363657373272c2066616c73652c0d0a202020202020202020202020276572726f72272c2027554e415554484f52495a4544272c0d0a202020202020202020202020276d657373616765272c20274f747572756d2061c3a76d616ec4b17a20676572656b69796f72270d0a2020202020202020293b0d0a20202020454e442049463b0d0a0d0a202020202d2d20322e2050726f66696c2074616d616d6c616e6dc4b1c59f206dc4b1206b6f6e74726f6c2065740d0a2020202053454c4543542070726f66696c655f636f6d706c65746520494e544f20765f70726f66696c655f636f6d706c6574650d0a2020202046524f4d2070726f66696c65730d0a202020205748455245206964203d20765f757365725f69643b0d0a0d0a20202020494620765f70726f66696c655f636f6d706c657465204953204e554c4c204f5220765f70726f66696c655f636f6d706c657465203d2066616c7365205448454e0d0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280d0a2020202020202020202020202773756363657373272c2066616c73652c0d0a202020202020202020202020276572726f72272c202750524f46494c455f494e434f4d504c455445272c0d0a202020202020202020202020276d657373616765272c2027536970617269c59f207665726d656b2069c3a7696e2070726f66696c696e697a692074616d616d6c616d616ec4b17a20676572656b69796f72270d0a2020202020202020293b0d0a20202020454e442049463b0d0a0d0a202020202d2d20332e20c39c72c3bc6e2062696c67696c6572696e6920616c20766520646fc49f72756c610d0a2020202053454c454354202a20494e544f20765f70726f647563740d0a2020202046524f4d2070726f64756374730d0a20202020574845524520736c7567203d20705f70726f647563745f736c756720414e442069735f616374697665203d20747275653b0d0a0d0a20202020494620765f70726f64756374204953204e554c4c205448454e0d0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280d0a2020202020202020202020202773756363657373272c2066616c73652c0d0a202020202020202020202020276572726f72272c202750524f445543545f4e4f545f464f554e44272c0d0a202020202020202020202020276d657373616765272c2027c39c72c3bc6e2062756c756e616d6164c4b1207665796120736174c4b1c59f7461206465c49f696c270d0a2020202020202020293b0d0a20202020454e442049463b0d0a0d0a202020202d2d20342e204d696b746172206b6f6e74726f6cc3bc0d0a20202020494620705f7175616e74697479203c2031204f5220705f7175616e74697479203e203130205448454e0d0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280d0a2020202020202020202020202773756363657373272c2066616c73652c0d0a202020202020202020202020276572726f72272c2027494e56414c49445f5155414e54495459272c0d0a202020202020202020202020276d657373616765272c20274765c3a7657273697a206d696b7461722028312d31302061726173c4b1206f6c6d616cc4b129270d0a2020202020202020293b0d0a20202020454e442049463b0d0a0d0a202020202d2d20352e2053746f6b206b6f6e74726f6cc3bc0d0a20202020494620765f70726f647563742e73746f636b203c20705f7175616e74697479205448454e0d0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280d0a2020202020202020202020202773756363657373272c2066616c73652c0d0a202020202020202020202020276572726f72272c2027494e53554646494349454e545f53544f434b272c0d0a202020202020202020202020276d657373616765272c202759657465726c692073746f6b20796f6b2e204d65766375742073746f6b3a2027207c7c20765f70726f647563742e73746f636b0d0a2020202020202020293b0d0a20202020454e442049463b0d0a0d0a202020202d2d20362e2046697961742068657361706c616d61202853554e554355205441524146494e444121290d0a20202020765f737562746f74616c203a3d20765f70726f647563742e7072696365202a20705f7175616e746974793b0d0a20202020765f7661745f616d6f756e74203a3d20765f737562746f74616c202a20765f7661745f726174653b0d0a20202020765f746f74616c203a3d20765f737562746f74616c202b20765f7661745f616d6f756e743b0d0a0d0a202020202d2d20372e20536970617269c59f206f6c75c59f7475720d0a20202020494e5345525420494e544f206f726465727320280d0a2020202020202020757365725f69642c0d0a202020202020202070726f647563745f69642c0d0a20202020202020207175616e746974792c0d0a2020202020202020756e69745f70726963652c0d0a2020202020202020737562746f74616c2c0d0a20202020202020207661745f616d6f756e742c0d0a2020202020202020746f74616c2c0d0a20202020202020207374617475732c0d0a202020202020202070726f6d6f5f636f64650d0a20202020292056414c55455320280d0a2020202020202020765f757365725f69642c0d0a2020202020202020765f70726f647563742e69642c0d0a2020202020202020705f7175616e746974792c0d0a2020202020202020765f70726f647563742e70726963652c0d0a2020202020202020765f737562746f74616c2c0d0a2020202020202020765f7661745f616d6f756e742c0d0a2020202020202020765f746f74616c2c0d0a20202020202020202770656e64696e67272c0d0a2020202020202020705f70726f6d6f5f636f64650d0a20202020290d0a2020202052455455524e494e4720696420494e544f20765f6f726465725f69643b0d0a0d0a202020202d2d20382e2053746f6b2067c3bc6e63656c6c650d0a202020205550444154452070726f64756374730d0a202020205345542073746f636b203d2073746f636b202d20705f7175616e746974790d0a202020205748455245206964203d20765f70726f647563742e69643b0d0a0d0a202020202d2d20392e204261c59f6172c4b16cc4b12079616ec4b1740d0a2020202052455455524e206a736f6e5f6275696c645f6f626a656374280d0a20202020202020202773756363657373272c20747275652c0d0a2020202020202020276f726465725f6964272c20765f6f726465725f69642c0d0a20202020202020202770726f647563745f6e616d65272c20765f70726f647563742e6e616d652c0d0a2020202020202020277175616e74697479272c20705f7175616e746974792c0d0a202020202020202027756e69745f7072696365272c20765f70726f647563742e70726963652c0d0a202020202020202027737562746f74616c272c20765f737562746f74616c2c0d0a2020202020202020277661745f616d6f756e74272c20765f7661745f616d6f756e742c0d0a202020202020202027746f74616c272c20765f746f74616c2c0d0a2020202020202020276d657373616765272c2027536970617269c59f206261c59f6172c4b1796c61206f6c75c59f747572756c6475270d0a20202020293b0d0a0d0a455843455054494f4e0d0a202020205748454e204f5448455253205448454e0d0a20202020202020202d2d20446f6e2774206578706f73652053514c206572726f722064657461696c73202d2072657475726e2067656e65726963206d6573736167650d0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280d0a2020202020202020202020202773756363657373272c2066616c73652c0d0a202020202020202020202020276572726f72272c20275345525645525f4552524f52272c0d0a202020202020202020202020276d657373616765272c2027c4b0c59f6c656d2073c4b1726173c4b16e6461206269722068617461206f6c75c59f74752e204cc3bc7466656e2074656b7261722064656e6579696e2e270d0a2020202020202020293b0d0a454e443b0d0a2466756e6374696f6e24"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"SET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260223193056_fix_installment_rates_multiple_policies.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Enable read access for all users\" ON public.installment_rates","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DROP POLICY IF EXISTS \"Users read installment rates\" ON public.installment_rates","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE POLICY \"Allow public read access to installment rates\"\nON public.installment_rates\nFOR SELECT\nTO public\nUSING (true)","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260223193056"},{"text":"fix_installment_rates_multiple_policies"},{"binary":"00000001000000000000001900000003000000010000005444524f5020504f4c494359204946204558495354532022456e61626c6520726561642061636365737320666f7220616c6c20757365727322204f4e207075626c69632e696e7374616c6c6d656e745f72617465730000005044524f5020504f4c4943592049462045584953545320225573657273207265616420696e7374616c6c6d656e7420726174657322204f4e207075626c69632e696e7374616c6c6d656e745f72617465730000007b43524541544520504f4c4943592022416c6c6f77207075626c696320726561642061636365737320746f20696e7374616c6c6d656e74207261746573220a4f4e207075626c69632e696e7374616c6c6d656e745f72617465730a464f522053454c4543540a544f207075626c69630a5553494e4720287472756529"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Severity":"NOTICE","SeverityUnlocalized":"NOTICE","Code":"00000","Message":"policy \"Enable read access for all users\" for relation \"public.installment_rates\" does not exist, skipping","Detail":"","Hint":"","Position":0,"InternalPosition":0,"InternalQuery":"","Where":"","SchemaName":"","TableName":"","ColumnName":"","DataTypeName":"","ConstraintName":"","File":"dropcmds.c","Line":523,"Routine":"does_not_exist_skipping","UnknownFields":null}
NOTICE (00000): policy "Enable read access for all users" for relation "public.installment_rates" does not exist, skipping
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DROP POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE POLICY"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260224075127_enforce_profile_phone_gate_order_rpcs.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"BEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.create_order(\n    p_items jsonb,\n    p_shipping_address_id uuid,\n    p_payment_method text,\n    p_promo_code text DEFAULT NULL::text\n)\nRETURNS jsonb\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path = public, pg_catalog\nAS $$\nDECLARE\n    v_user_id UUID;\n    v_profile_complete BOOLEAN;\n    v_phone TEXT;\n    v_item JSONB;\n    v_product_id UUID;\n    v_product_name TEXT;\n    v_product_price DECIMAL(10,2);\n    v_product_stock INT;\n    v_qty INT;\n    v_item_subtotal DECIMAL(10,2);\n    v_total_subtotal DECIMAL(10,2) := 0;\n    v_total_vat DECIMAL(10,2) := 0;\n    v_shipping_cost DECIMAL(10,2);\n    v_vat_rate DECIMAL(10,4);\n    v_shipping_threshold DECIMAL(12,2);\n    v_final_total DECIMAL(10,2);\n    v_discount DECIMAL(10,2) := 0;\n    v_order_id UUID;\n    v_valid_items JSONB := '[]'::JSONB;\n    v_item_detail JSONB;\n    v_order_details JSONB;\n    v_bank_ref TEXT := NULL;\n    v_address_owner UUID;\n    v_promo_result JSON;\n    v_item_total_cents BIGINT := 0;\n    v_vat_total_cents BIGINT := 0;\n    v_shipping_total_cents BIGINT := 0;\n    v_discount_total_cents BIGINT := 0;\n    v_paid_total_cents BIGINT := 0;\nBEGIN\n    IF p_payment_method \u003c\u003e 'bank_transfer' THEN\n        RETURN jsonb_build_object(\n            'success', false,\n            'error', 'INVALID_PAYMENT_METHOD',\n            'message', 'Kart odemeleri yeni 3D akisi ile alinmaktadir. Lutfen kart odeme endpointini kullanin.'\n        );\n    END IF;\n\n    v_user_id := auth.uid();\n    IF v_user_id IS NULL THEN\n        RETURN jsonb_build_object(\n            'success', false,\n            'error', 'UNAUTHORIZED',\n            'message', 'Oturum amanz gerekiyor'\n        );\n    END IF;\n\n    SELECT profile_complete, phone\n    INTO v_profile_complete, v_phone\n    FROM public.profiles\n    WHERE id = v_user_id;\n\n    IF v_profile_complete IS NULL OR v_profile_complete = false THEN\n        RETURN jsonb_build_object(\n            'success', false,\n            'error', 'PROFILE_INCOMPLETE',\n            'message', 'Sipari vermek iin profilinizi tamamlamanz gerekiyor'\n        );\n    END IF;\n\n    IF v_phone IS NULL OR length(regexp_replace(v_phone, '\\\\D', '', 'g')) \u003c 10 THEN\n        RETURN jsonb_build_object(\n            'success', false,\n            'error', 'PHONE_REQUIRED',\n            'message', 'Sipari vermek iin geerli bir telefon numaras gereklidir'\n        );\n    END IF;\n\n    SELECT user_id INTO v_address_owner\n    FROM public.addresses\n    WHERE id = p_shipping_address_id;\n\n    IF v_address_owner IS NULL OR v_address_owner \u003c\u003e v_user_id THEN\n        RETURN jsonb_build_object(\n            'success', false,\n            'error', 'INVALID_ADDRESS',\n            'message', 'Geersiz adres seimi: Adres size ait deil.'\n        );\n    END IF;\n\n    FOR v_item IN SELECT * FROM jsonb_array_elements(p_items)\n    LOOP\n        v_product_id := (v_item-\u003e\u003e'product_id')::UUID;\n        v_qty := (v_item-\u003e\u003e'quantity')::INT;\n\n        IF v_qty \u003c= 0 THEN\n            RETURN jsonb_build_object(\n                'success', false,\n                'error', 'INVALID_QUANTITY',\n                'message', 'Geersiz rn miktar: 0 veya negatif olamaz.'\n            );\n        END IF;\n\n        SELECT id, name, price, stock\n        INTO v_product_id, v_product_name, v_product_price, v_product_stock\n        FROM public.products\n        WHERE id = v_product_id\n        FOR UPDATE;\n\n        IF NOT FOUND THEN\n            RETURN jsonb_build_object(\n                'success', false,\n                'error', 'PRODUCT_NOT_FOUND',\n                'message', 'rn bulunamad: ID ' || v_product_id\n            );\n        END IF;\n\n        IF v_product_stock \u003c v_qty THEN\n            RETURN jsonb_build_object(\n                'success', false,\n                'error', 'INSUFFICIENT_STOCK',\n                'message', 'Yetersiz stok: ' || v_product_name\n            );\n        END IF;\n\n        v_item_subtotal := v_product_price * v_qty;\n        v_total_subtotal := v_total_subtotal + v_item_subtotal;\n\n        v_item_detail := jsonb_build_object(\n            'product_id', v_product_id,\n            'product_name', v_product_name,\n            'quantity', v_qty,\n            'unit_price', v_product_price,\n            'subtotal', v_item_subtotal\n        );\n\n        v_valid_items := v_valid_items || v_item_detail;\n    END LOOP;\n\n    SELECT\n        COALESCE(vat_rate, 0.20),\n        COALESCE(shipping_cost, 49.90),\n        COALESCE(free_shipping_threshold, 1500.0)\n    INTO v_vat_rate, v_shipping_cost, v_shipping_threshold\n    FROM public.site_settings\n    WHERE id = 1;\n\n    v_total_vat := v_total_subtotal * v_vat_rate;\n\n    IF p_promo_code IS NOT NULL AND length(p_promo_code) \u003e 0 THEN\n        BEGIN\n            SELECT public.verify_promo_code(p_promo_code) INTO v_promo_result;\n\n            IF (v_promo_result-\u003e\u003e'valid')::boolean = true THEN\n                IF (v_promo_result-\u003e\u003e'discount_type') = 'percentage' THEN\n                    v_discount := (v_total_subtotal + v_total_vat) * ((v_promo_result-\u003e\u003e'discount_value')::decimal / 100);\n                    IF (v_promo_result-\u003e\u003e'max_discount_amount') IS NOT NULL\n                        AND v_discount \u003e (v_promo_result-\u003e\u003e'max_discount_amount')::decimal\n                    THEN\n                        v_discount := (v_promo_result-\u003e\u003e'max_discount_amount')::decimal;\n                    END IF;\n                ELSE\n                    v_discount := (v_promo_result-\u003e\u003e'discount_value')::decimal;\n                END IF;\n            END IF;\n        EXCEPTION WHEN OTHERS THEN\n            v_discount := 0;\n        END;\n    END IF;\n\n    IF (v_total_subtotal + v_total_vat - v_discount) \u003e= v_shipping_threshold THEN\n        v_shipping_cost := 0;\n    END IF;\n\n    v_final_total := v_total_subtotal + v_total_vat + v_shipping_cost - v_discount;\n    IF v_final_total \u003c 0 THEN\n        v_final_total := 0;\n    END IF;\n\n    v_item_total_cents := ROUND(v_total_subtotal * 100)::bigint;\n    v_vat_total_cents := ROUND(v_total_vat * 100)::bigint;\n    v_shipping_total_cents := ROUND(v_shipping_cost * 100)::bigint;\n    v_discount_total_cents := ROUND(v_discount * 100)::bigint;\n    v_paid_total_cents := ROUND(v_final_total * 100)::bigint;\n\n    v_bank_ref := 'BRV-' || to_char(public.now(), 'YYMMDD') || '-' || upper(substring(md5(random()::text) from 1 for 4));\n\n    v_order_details := jsonb_build_object(\n        'items', v_valid_items,\n        'subtotal', v_total_subtotal,\n        'vat_rate', v_vat_rate,\n        'vat_amount', v_total_vat,\n        'shipping_cost', v_shipping_cost,\n        'total', v_final_total,\n        'promo_code', p_promo_code,\n        'discount', v_discount,\n        'bank_reference', v_bank_ref\n    );\n\n    INSERT INTO public.orders (\n        user_id,\n        shipping_address_id,\n        payment_method,\n        status,\n        payment_status,\n        order_details,\n        currency,\n        installment_number,\n        item_total_cents,\n        vat_total_cents,\n        shipping_total_cents,\n        discount_total_cents,\n        commission_amount_cents,\n        paid_total_cents,\n        promo_code,\n        bank_reference\n    ) VALUES (\n        v_user_id,\n        p_shipping_address_id,\n        'bank_transfer',\n        'pending',\n        'pending',\n        v_order_details,\n        'TL',\n        1,\n        v_item_total_cents,\n        v_vat_total_cents,\n        v_shipping_total_cents,\n        v_discount_total_cents,\n        0,\n        v_paid_total_cents,\n        p_promo_code,\n        v_bank_ref\n    ) RETURNING id INTO v_order_id;\n\n    BEGIN\n        INSERT INTO public.order_status_history (order_id, status, note, created_at)\n        VALUES (\n            v_order_id,\n            'pending',\n            'Sipari alnd (Havale/EFT Bekleniyor)',\n            public.now()\n        );\n    EXCEPTION WHEN OTHERS THEN\n        NULL;\n    END;\n\n    RETURN jsonb_build_object(\n        'success', true,\n        'order_id', v_order_id,\n        'total', v_final_total,\n        'shipping_cost', v_shipping_cost,\n        'bank_reference', v_bank_ref,\n        'message', 'Sipari baaryla oluturuldu'\n    );\nEXCEPTION WHEN OTHERS THEN\n    RETURN jsonb_build_object(\n        'success', false,\n        'error', 'SERVER_ERROR',\n        'message', 'Sipari oluturulurken beklenmeyen bir hata olutu. Ltfen tekrar deneyiniz.'\n    );\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.validate_checkout(\n    p_product_slug text,\n    p_quantity integer,\n    p_promo_code text DEFAULT NULL::text\n)\nRETURNS json\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path TO 'public', 'pg_catalog'\nAS $function$\nDECLARE\n    v_user_id UUID;\n    v_profile_complete BOOLEAN;\n    v_phone TEXT;\n    v_product RECORD;\n    v_subtotal DECIMAL(10, 2);\n    v_vat_rate DECIMAL(5, 4) := 0.20;\n    v_vat_amount DECIMAL(10, 2);\n    v_total DECIMAL(10, 2);\n    v_order_id UUID;\nBEGIN\n    v_user_id := auth.uid();\n\n    IF v_user_id IS NULL THEN\n        RETURN json_build_object(\n            'success', false,\n            'error', 'UNAUTHORIZED',\n            'message', 'Oturum amanz gerekiyor'\n        );\n    END IF;\n\n    SELECT profile_complete, phone\n    INTO v_profile_complete, v_phone\n    FROM public.profiles\n    WHERE id = v_user_id;\n\n    IF v_profile_complete IS NULL OR v_profile_complete = false THEN\n        RETURN json_build_object(\n            'success', false,\n            'error', 'PROFILE_INCOMPLETE',\n            'message', 'Sipari vermek iin profilinizi tamamlamanz gerekiyor'\n        );\n    END IF;\n\n    IF v_phone IS NULL OR length(regexp_replace(v_phone, '\\\\D', '', 'g')) \u003c 10 THEN\n        RETURN json_build_object(\n            'success', false,\n            'error', 'PHONE_REQUIRED',\n            'message', 'Sipari vermek iin geerli bir telefon numaras gereklidir'\n        );\n    END IF;\n\n    SELECT * INTO v_product\n    FROM products\n    WHERE slug = p_product_slug AND is_active = true;\n\n    IF v_product IS NULL THEN\n        RETURN json_build_object(\n            'success', false,\n            'error', 'PRODUCT_NOT_FOUND',\n            'message', 'rn bulunamad veya satta deil'\n        );\n    END IF;\n\n    IF p_quantity \u003c 1 OR p_quantity \u003e 10 THEN\n        RETURN json_build_object(\n            'success', false,\n            'error', 'INVALID_QUANTITY',\n            'message', 'Geersiz miktar (1-10 aras olmal)'\n        );\n    END IF;\n\n    IF v_product.stock \u003c p_quantity THEN\n        RETURN json_build_object(\n            'success', false,\n            'error', 'INSUFFICIENT_STOCK',\n            'message', 'Yeterli stok yok. Mevcut stok: ' || v_product.stock\n        );\n    END IF;\n\n    v_subtotal := v_product.price * p_quantity;\n    v_vat_amount := v_subtotal * v_vat_rate;\n    v_total := v_subtotal + v_vat_amount;\n\n    INSERT INTO orders (\n        user_id,\n        product_id,\n        quantity,\n        unit_price,\n        subtotal,\n        vat_amount,\n        total,\n        status,\n        promo_code\n    ) VALUES (\n        v_user_id,\n        v_product.id,\n        p_quantity,\n        v_product.price,\n        v_subtotal,\n        v_vat_amount,\n        v_total,\n        'pending',\n        p_promo_code\n    )\n    RETURNING id INTO v_order_id;\n\n    UPDATE products\n    SET stock = stock - p_quantity\n    WHERE id = v_product.id;\n\n    RETURN json_build_object(\n        'success', true,\n        'order_id', v_order_id,\n        'product_name', v_product.name,\n        'quantity', p_quantity,\n        'unit_price', v_product.price,\n        'subtotal', v_subtotal,\n        'vat_amount', v_vat_amount,\n        'total', v_total,\n        'message', 'Sipari baaryla oluturuldu'\n    );\nEXCEPTION\n    WHEN OTHERS THEN\n        RETURN json_build_object(\n            'success', false,\n            'error', 'SERVER_ERROR',\n            'message', 'lem srasnda bir hata olutu. Ltfen tekrar deneyin.'\n        );\nEND;\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.calculate_order_quote_v1(\n    p_user_id UUID,\n    p_items JSONB,\n    p_shipping_address_id UUID,\n    p_payment_method TEXT DEFAULT 'credit_card',\n    p_installment_number INTEGER DEFAULT 1,\n    p_promo_code TEXT DEFAULT NULL\n)\nRETURNS JSONB\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path = public, pg_catalog\nAS $$\nDECLARE\n    v_role TEXT;\n    v_user_id UUID;\n    v_profile_complete BOOLEAN;\n    v_phone TEXT;\n    v_address_owner UUID;\n    v_item JSONB;\n    v_product_id UUID;\n    v_product_name TEXT;\n    v_product_price NUMERIC(12,2);\n    v_product_stock INTEGER;\n    v_reserved_stock INTEGER;\n    v_available_stock INTEGER;\n    v_qty INTEGER;\n    v_item_unit_cents BIGINT;\n    v_item_line_cents BIGINT;\n    v_item_total_cents BIGINT := 0;\n    v_vat_rate NUMERIC(10,4) := 0.20;\n    v_shipping_cost NUMERIC(10,2) := 49.90;\n    v_shipping_threshold NUMERIC(12,2) := 1500.00;\n    v_vat_total_cents BIGINT := 0;\n    v_shipping_total_cents BIGINT := 0;\n    v_discount_total_cents BIGINT := 0;\n    v_pre_shipping_total_cents BIGINT := 0;\n    v_base_total_cents BIGINT := 0;\n    v_commission_rate NUMERIC(5,2) := 0;\n    v_commission_amount_cents BIGINT := 0;\n    v_paid_total_cents BIGINT := 0;\n    v_rate_updated_at TIMESTAMPTZ;\n    v_promo_result JSON;\n    v_cart_snapshot JSONB := '[]'::jsonb;\nBEGIN\n    v_role := COALESCE(NULLIF(current_setting('request.jwt.claim.role', TRUE), ''), auth.role(), 'service_role');\n    IF v_role = 'service_role' THEN\n        v_user_id := p_user_id;\n    ELSE\n        v_user_id := auth.uid();\n    END IF;\n\n    IF v_user_id IS NULL THEN\n        RETURN jsonb_build_object(\n            'success', FALSE,\n            'error', 'UNAUTHORIZED',\n            'message', 'Oturum gerekli'\n        );\n    END IF;\n\n    SELECT profile_complete, phone\n    INTO v_profile_complete, v_phone\n    FROM public.profiles\n    WHERE id = v_user_id;\n\n    IF v_profile_complete IS NULL OR v_profile_complete = false THEN\n        RETURN jsonb_build_object(\n            'success', FALSE,\n            'error', 'PROFILE_INCOMPLETE',\n            'message', 'Sipari vermek iin profilinizi tamamlamanz gerekiyor'\n        );\n    END IF;\n\n    IF v_phone IS NULL OR length(regexp_replace(v_phone, '\\\\D', '', 'g')) \u003c 10 THEN\n        RETURN jsonb_build_object(\n            'success', FALSE,\n            'error', 'PHONE_REQUIRED',\n            'message', 'Sipari vermek iin geerli bir telefon numaras gereklidir'\n        );\n    END IF;\n\n    IF p_items IS NULL OR jsonb_typeof(p_items) \u003c\u003e 'array' OR jsonb_array_length(p_items) = 0 THEN\n        RETURN jsonb_build_object(\n            'success', FALSE,\n            'error', 'EMPTY_CART',\n            'message', 'Sepet bos olamaz'\n        );\n    END IF;\n\n    SELECT user_id\n    INTO v_address_owner\n    FROM public.addresses\n    WHERE id = p_shipping_address_id;\n\n    IF v_address_owner IS NULL OR v_address_owner \u003c\u003e v_user_id THEN\n        RETURN jsonb_build_object(\n            'success', FALSE,\n            'error', 'INVALID_ADDRESS',\n            'message', 'Gecersiz adres secimi'\n        );\n    END IF;\n\n    IF p_payment_method NOT IN ('credit_card', 'bank_transfer') THEN\n        RETURN jsonb_build_object(\n            'success', FALSE,\n            'error', 'INVALID_PAYMENT_METHOD',\n            'message', 'Gecersiz odeme yontemi'\n        );\n    END IF;\n\n    IF p_payment_method = 'credit_card' AND (p_installment_number \u003c 1 OR p_installment_number \u003e 12) THEN\n        RETURN jsonb_build_object(\n            'success', FALSE,\n            'error', 'INVALID_INSTALLMENT',\n            'message', 'Gecersiz taksit sayisi'\n        );\n    END IF;\n\n    SELECT\n        COALESCE(vat_rate, 0.20),\n        COALESCE(shipping_cost, 49.90),\n        COALESCE(free_shipping_threshold, 1500.00)\n    INTO v_vat_rate, v_shipping_cost, v_shipping_threshold\n    FROM public.site_settings\n    WHERE id = 1;\n\n    FOR v_item IN SELECT * FROM jsonb_array_elements(p_items)\n    LOOP\n        v_product_id := (v_item-\u003e\u003e'product_id')::uuid;\n        v_qty := COALESCE((v_item-\u003e\u003e'quantity')::integer, 0);\n\n        IF v_product_id IS NULL OR v_qty \u003c= 0 THEN\n            RETURN jsonb_build_object(\n                'success', FALSE,\n                'error', 'INVALID_CART_ITEM',\n                'message', 'Sepet ogesi gecersiz'\n            );\n        END IF;\n\n        SELECT\n            p.name,\n            p.price,\n            p.stock,\n            COALESCE(p.reserved_stock, 0)\n        INTO\n            v_product_name,\n            v_product_price,\n            v_product_stock,\n            v_reserved_stock\n        FROM public.products p\n        WHERE p.id = v_product_id;\n\n        IF NOT FOUND THEN\n            RETURN jsonb_build_object(\n                'success', FALSE,\n                'error', 'PRODUCT_NOT_FOUND',\n                'message', 'Urun bulunamadi'\n            );\n        END IF;\n\n        v_available_stock := v_product_stock - v_reserved_stock;\n        IF v_available_stock \u003c v_qty THEN\n            RETURN jsonb_build_object(\n                'success', FALSE,\n                'error', 'INSUFFICIENT_STOCK',\n                'message', 'Yetersiz stok',\n                'product_id', v_product_id\n            );\n        END IF;\n\n        v_item_unit_cents := ROUND(v_product_price * 100)::bigint;\n        v_item_line_cents := v_item_unit_cents * v_qty;\n        v_item_total_cents := v_item_total_cents + v_item_line_cents;\n\n        v_cart_snapshot := v_cart_snapshot || jsonb_build_array(\n            jsonb_build_object(\n                'product_id', v_product_id,\n                'product_name', v_product_name,\n                'quantity', v_qty,\n                'unit_price_cents', v_item_unit_cents,\n                'unit_price', ROUND(v_item_unit_cents::numeric / 100, 2),\n                'subtotal_cents', v_item_line_cents,\n                'subtotal', ROUND(v_item_line_cents::numeric / 100, 2),\n                'line_total_cents', v_item_line_cents,\n                'line_total', ROUND(v_item_line_cents::numeric / 100, 2)\n            )\n        );\n    END LOOP;\n\n    v_vat_total_cents := ROUND(v_item_total_cents * v_vat_rate)::bigint;\n\n    IF p_promo_code IS NOT NULL AND LENGTH(TRIM(p_promo_code)) \u003e 0 THEN\n        BEGIN\n            SELECT verify_promo_code(p_promo_code) INTO v_promo_result;\n            IF COALESCE((v_promo_result-\u003e\u003e'valid')::boolean, FALSE) THEN\n                IF (v_promo_result-\u003e\u003e'discount_type') = 'percentage' THEN\n                    v_discount_total_cents := ROUND(\n                        (v_item_total_cents + v_vat_total_cents) *\n                        (COALESCE((v_promo_result-\u003e\u003e'discount_value')::numeric, 0) / 100.0)\n                    )::bigint;\n                ELSE\n                    v_discount_total_cents := ROUND(\n                        COALESCE((v_promo_result-\u003e\u003e'discount_value')::numeric, 0) * 100\n                    )::bigint;\n                END IF;\n\n                IF (v_promo_result-\u003e\u003e'max_discount_amount') IS NOT NULL THEN\n                    v_discount_total_cents := LEAST(\n                        v_discount_total_cents,\n                        ROUND((v_promo_result-\u003e\u003e'max_discount_amount')::numeric * 100)::bigint\n                    );\n                END IF;\n            END IF;\n        EXCEPTION WHEN OTHERS THEN\n            v_discount_total_cents := 0;\n        END;\n    END IF;\n\n    v_pre_shipping_total_cents := GREATEST(v_item_total_cents + v_vat_total_cents - v_discount_total_cents, 0);\n    IF v_pre_shipping_total_cents \u003e= ROUND(v_shipping_threshold * 100)::bigint THEN\n        v_shipping_total_cents := 0;\n    ELSE\n        v_shipping_total_cents := ROUND(v_shipping_cost * 100)::bigint;\n    END IF;\n\n    v_base_total_cents := v_pre_shipping_total_cents + v_shipping_total_cents;\n\n    IF p_payment_method = 'credit_card' THEN\n        SELECT commission_rate, updated_at\n        INTO v_commission_rate, v_rate_updated_at\n        FROM public.installment_rates\n        WHERE installment_number = p_installment_number\n          AND is_active = TRUE\n        LIMIT 1;\n\n        IF NOT FOUND THEN\n            RETURN jsonb_build_object(\n                'success', FALSE,\n                'error', 'INSTALLMENT_NOT_ACTIVE',\n                'message', 'Secilen taksit aktif degil'\n            );\n        END IF;\n\n        v_commission_amount_cents := ROUND(v_base_total_cents * (v_commission_rate / 100.0))::bigint;\n    ELSE\n        v_commission_rate := 0;\n        v_rate_updated_at := NOW();\n        v_commission_amount_cents := 0;\n    END IF;\n\n    v_paid_total_cents := v_base_total_cents + v_commission_amount_cents;\n\n    RETURN jsonb_build_object(\n        'success', TRUE,\n        'message', 'Quote olusturuldu',\n        'payment_method', p_payment_method,\n        'shipping_address_id', p_shipping_address_id,\n        'installment_number', CASE WHEN p_payment_method = 'credit_card' THEN p_installment_number ELSE 1 END,\n        'item_total_cents', v_item_total_cents,\n        'vat_total_cents', v_vat_total_cents,\n        'shipping_total_cents', v_shipping_total_cents,\n        'discount_total_cents', v_discount_total_cents,\n        'base_total_cents', v_base_total_cents,\n        'commission_rate', v_commission_rate,\n        'commission_amount_cents', v_commission_amount_cents,\n        'paid_total_cents', v_paid_total_cents,\n        'currency', 'TL',\n        'rate_version', 'v1',\n        'effective_from', v_rate_updated_at,\n        'cart_snapshot', v_cart_snapshot\n    );\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.finalize_intent_create_order_v1(\n    p_intent_id UUID,\n    p_gateway_result JSONB DEFAULT '{}'::jsonb\n)\nRETURNS JSONB\nLANGUAGE plpgsql\nSECURITY DEFINER\nSET search_path = public, pg_catalog\nAS $$\nDECLARE\n    v_role TEXT;\n    v_intent RECORD;\n    v_profile_complete BOOLEAN;\n    v_phone TEXT;\n    v_existing_order_id UUID;\n    v_reservation RECORD;\n    v_product RECORD;\n    v_order_id UUID;\n    v_gateway_status TEXT;\n    v_gateway_trx_code TEXT;\n    v_order_details JSONB;\n    v_history_note TEXT;\n    v_active_reservation_count INTEGER := 0;\nBEGIN\n    v_role := COALESCE(NULLIF(current_setting('request.jwt.claim.role', TRUE), ''), auth.role(), 'service_role');\n    IF v_role \u003c\u003e 'service_role' THEN\n        RAISE EXCEPTION 'forbidden';\n    END IF;\n\n    SELECT *\n    INTO v_intent\n    FROM public.payment_intents\n    WHERE id = p_intent_id\n    FOR UPDATE;\n\n    IF NOT FOUND THEN\n        RAISE EXCEPTION 'intent_not_found';\n    END IF;\n\n    IF v_intent.status = 'paid' THEN\n        SELECT id\n        INTO v_existing_order_id\n        FROM public.orders\n        WHERE payment_intent_id = p_intent_id\n        LIMIT 1;\n\n        RETURN jsonb_build_object(\n            'success', TRUE,\n            'order_id', v_existing_order_id,\n            'already_paid', TRUE\n        );\n    END IF;\n\n    SELECT profile_complete, phone\n    INTO v_profile_complete, v_phone\n    FROM public.profiles\n    WHERE id = v_intent.user_id;\n\n    IF v_profile_complete IS NULL OR v_profile_complete = false THEN\n        RETURN jsonb_build_object(\n            'success', FALSE,\n            'error', 'PROFILE_INCOMPLETE',\n            'message', 'Sipari vermek iin profilinizi tamamlamanz gerekiyor'\n        );\n    END IF;\n\n    IF v_phone IS NULL OR length(regexp_replace(v_phone, '\\\\D', '', 'g')) \u003c 10 THEN\n        RETURN jsonb_build_object(\n            'success', FALSE,\n            'error', 'PHONE_REQUIRED',\n            'message', 'Sipari vermek iin geerli bir telefon numaras gereklidir'\n        );\n    END IF;\n\n    IF v_intent.status NOT IN ('pending', 'awaiting_3d') THEN\n        RAISE EXCEPTION 'intent_status_invalid';\n    END IF;\n\n    IF v_intent.currency \u003c\u003e 'TL' THEN\n        RAISE EXCEPTION 'currency_mismatch';\n    END IF;\n\n    SELECT COUNT(*)\n    INTO v_active_reservation_count\n    FROM public.stock_reservations\n    WHERE intent_id = p_intent_id\n      AND released_at IS NULL;\n\n    IF v_active_reservation_count = 0 THEN\n        RAISE EXCEPTION 'no_active_reservations';\n    END IF;\n\n    FOR v_reservation IN\n        SELECT id, product_id, qty\n        FROM public.stock_reservations\n        WHERE intent_id = p_intent_id\n          AND released_at IS NULL\n        FOR UPDATE\n    LOOP\n        SELECT id, stock, COALESCE(reserved_stock, 0) AS reserved_stock\n        INTO v_product\n        FROM public.products\n        WHERE id = v_reservation.product_id\n        FOR UPDATE;\n\n        IF NOT FOUND THEN\n            RAISE EXCEPTION 'product_not_found';\n        END IF;\n\n        IF v_product.reserved_stock \u003c v_reservation.qty OR v_product.stock \u003c v_reservation.qty THEN\n            RAISE EXCEPTION 'reservation_state_invalid';\n        END IF;\n\n        UPDATE public.products\n        SET\n            stock = stock - v_reservation.qty,\n            reserved_stock = GREATEST(COALESCE(reserved_stock, 0) - v_reservation.qty, 0)\n        WHERE id = v_reservation.product_id;\n    END LOOP;\n\n    v_order_details := jsonb_build_object(\n        'items', v_intent.cart_snapshot,\n        'subtotal', ROUND(v_intent.item_total_cents::numeric / 100, 2),\n        'vat_amount', ROUND(v_intent.vat_total_cents::numeric / 100, 2),\n        'shipping_cost', ROUND(v_intent.shipping_total_cents::numeric / 100, 2),\n        'discount', ROUND(v_intent.discount_total_cents::numeric / 100, 2),\n        'commission_amount', ROUND(v_intent.commission_amount_cents::numeric / 100, 2),\n        'total', ROUND(v_intent.paid_total_cents::numeric / 100, 2),\n        'currency', 'TL',\n        'installment_number', v_intent.installment_number\n    );\n\n    INSERT INTO public.orders (\n        user_id,\n        shipping_address_id,\n        payment_method,\n        payment_status,\n        status,\n        order_details,\n        payment_intent_id,\n        currency,\n        installment_number,\n        item_total_cents,\n        vat_total_cents,\n        shipping_total_cents,\n        discount_total_cents,\n        commission_amount_cents,\n        paid_total_cents\n    )\n    VALUES (\n        v_intent.user_id,\n        v_intent.shipping_address_id,\n        'credit_card',\n        'paid',\n        'processing',\n        v_order_details,\n        v_intent.id,\n        'TL',\n        v_intent.installment_number,\n        v_intent.item_total_cents,\n        v_intent.vat_total_cents,\n        v_intent.shipping_total_cents,\n        v_intent.discount_total_cents,\n        v_intent.commission_amount_cents,\n        v_intent.paid_total_cents\n    )\n    RETURNING id INTO v_order_id;\n\n    v_history_note := 'Kart odemesi onaylandi ve siparis olusturuldu';\n    INSERT INTO public.order_status_history (order_id, status, note, created_at)\n    VALUES (v_order_id, 'processing', v_history_note, NOW());\n\n    UPDATE public.stock_reservations\n    SET released_at = NOW()\n    WHERE intent_id = p_intent_id\n      AND released_at IS NULL;\n\n    v_gateway_status := COALESCE(\n        p_gateway_result-\u003e\u003e'gateway_status',\n        p_gateway_result-\u003e\u003e'resultCode',\n        p_gateway_result-\u003e\u003e'result_code',\n        'success'\n    );\n    v_gateway_trx_code := COALESCE(\n        p_gateway_result-\u003e\u003e'gateway_trx_code',\n        p_gateway_result-\u003e\u003e'trxCode',\n        p_gateway_result-\u003e\u003e'trx_code',\n        v_intent.gateway_trx_code\n    );\n\n    UPDATE public.payment_intents\n    SET\n        status = 'paid',\n        gateway_status = v_gateway_status,\n        gateway_trx_code = v_gateway_trx_code,\n        updated_at = NOW()\n    WHERE id = p_intent_id;\n\n    RETURN jsonb_build_object(\n        'success', TRUE,\n        'order_id', v_order_id,\n        'already_paid', FALSE\n    );\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260224075127"},{"text":"enforce_profile_phone_gate_order_rpcs"},{"binary":"000000010000000000000019000000060000000100000005424547494e00002082435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e6372656174655f6f72646572280a20202020705f6974656d73206a736f6e622c0a20202020705f7368697070696e675f616464726573735f696420757569642c0a20202020705f7061796d656e745f6d6574686f6420746578742c0a20202020705f70726f6d6f5f636f646520746578742044454641554c54204e554c4c3a3a746578740a290a52455455524e53206a736f6e620a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670a41532024240a4445434c4152450a20202020765f757365725f696420555549443b0a20202020765f70726f66696c655f636f6d706c65746520424f4f4c45414e3b0a20202020765f70686f6e6520544558543b0a20202020765f6974656d204a534f4e423b0a20202020765f70726f647563745f696420555549443b0a20202020765f70726f647563745f6e616d6520544558543b0a20202020765f70726f647563745f707269636520444543494d414c2831302c32293b0a20202020765f70726f647563745f73746f636b20494e543b0a20202020765f71747920494e543b0a20202020765f6974656d5f737562746f74616c20444543494d414c2831302c32293b0a20202020765f746f74616c5f737562746f74616c20444543494d414c2831302c3229203a3d20303b0a20202020765f746f74616c5f76617420444543494d414c2831302c3229203a3d20303b0a20202020765f7368697070696e675f636f737420444543494d414c2831302c32293b0a20202020765f7661745f7261746520444543494d414c2831302c34293b0a20202020765f7368697070696e675f7468726573686f6c6420444543494d414c2831322c32293b0a20202020765f66696e616c5f746f74616c20444543494d414c2831302c32293b0a20202020765f646973636f756e7420444543494d414c2831302c3229203a3d20303b0a20202020765f6f726465725f696420555549443b0a20202020765f76616c69645f6974656d73204a534f4e42203a3d20275b5d273a3a4a534f4e423b0a20202020765f6974656d5f64657461696c204a534f4e423b0a20202020765f6f726465725f64657461696c73204a534f4e423b0a20202020765f62616e6b5f7265662054455854203a3d204e554c4c3b0a20202020765f616464726573735f6f776e657220555549443b0a20202020765f70726f6d6f5f726573756c74204a534f4e3b0a20202020765f6974656d5f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f7661745f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f7368697070696e675f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f646973636f756e745f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f706169645f746f74616c5f63656e747320424947494e54203a3d20303b0a424547494e0a20202020494620705f7061796d656e745f6d6574686f64203c3e202762616e6b5f7472616e7366657227205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c2027494e56414c49445f5041594d454e545f4d4554484f44272c0a202020202020202020202020276d657373616765272c20274b617274206f64656d656c6572692079656e6920334420616b69736920696c6520616c696e6d616b74616469722e204c757466656e206b617274206f64656d6520656e64706f696e74696e69206b756c6c616e696e2e270a2020202020202020293b0a20202020454e442049463b0a0a20202020765f757365725f6964203a3d20617574682e75696428293b0a20202020494620765f757365725f6964204953204e554c4c205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c2027554e415554484f52495a4544272c0a202020202020202020202020276d657373616765272c20274f747572756d2061c3a76d616ec4b17a20676572656b69796f72270a2020202020202020293b0a20202020454e442049463b0a0a2020202053454c4543542070726f66696c655f636f6d706c6574652c2070686f6e650a20202020494e544f20765f70726f66696c655f636f6d706c6574652c20765f70686f6e650a2020202046524f4d207075626c69632e70726f66696c65730a202020205748455245206964203d20765f757365725f69643b0a0a20202020494620765f70726f66696c655f636f6d706c657465204953204e554c4c204f5220765f70726f66696c655f636f6d706c657465203d2066616c7365205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c202750524f46494c455f494e434f4d504c455445272c0a202020202020202020202020276d657373616765272c2027536970617269c59f207665726d656b2069c3a7696e2070726f66696c696e697a692074616d616d6c616d616ec4b17a20676572656b69796f72270a2020202020202020293b0a20202020454e442049463b0a0a20202020494620765f70686f6e65204953204e554c4c204f52206c656e677468287265676578705f7265706c61636528765f70686f6e652c20275c5c44272c2027272c202767272929203c203130205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c202750484f4e455f5245515549524544272c0a202020202020202020202020276d657373616765272c2027536970617269c59f207665726d656b2069c3a7696e206765c3a765726c69206269722074656c65666f6e206e756d61726173c4b120676572656b6c69646972270a2020202020202020293b0a20202020454e442049463b0a0a2020202053454c45435420757365725f696420494e544f20765f616464726573735f6f776e65720a2020202046524f4d207075626c69632e6164647265737365730a202020205748455245206964203d20705f7368697070696e675f616464726573735f69643b0a0a20202020494620765f616464726573735f6f776e6572204953204e554c4c204f5220765f616464726573735f6f776e6572203c3e20765f757365725f6964205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c2027494e56414c49445f41444452455353272c0a202020202020202020202020276d657373616765272c20274765c3a7657273697a206164726573207365c3a7696d693a2041647265732073697a6520616974206465c49f696c2e270a2020202020202020293b0a20202020454e442049463b0a0a20202020464f5220765f6974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e747328705f6974656d73290a202020204c4f4f500a2020202020202020765f70726f647563745f6964203a3d2028765f6974656d2d3e3e2770726f647563745f696427293a3a555549443b0a2020202020202020765f717479203a3d2028765f6974656d2d3e3e277175616e7469747927293a3a494e543b0a0a2020202020202020494620765f717479203c3d2030205448454e0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a202020202020202020202020202020202773756363657373272c2066616c73652c0a20202020202020202020202020202020276572726f72272c2027494e56414c49445f5155414e54495459272c0a20202020202020202020202020202020276d657373616765272c20274765c3a7657273697a20c3bc72c3bc6e206d696b746172c4b13a20302076657961206e656761746966206f6c616d617a2e270a202020202020202020202020293b0a2020202020202020454e442049463b0a0a202020202020202053454c4543542069642c206e616d652c2070726963652c2073746f636b0a2020202020202020494e544f20765f70726f647563745f69642c20765f70726f647563745f6e616d652c20765f70726f647563745f70726963652c20765f70726f647563745f73746f636b0a202020202020202046524f4d207075626c69632e70726f64756374730a20202020202020205748455245206964203d20765f70726f647563745f69640a2020202020202020464f52205550444154453b0a0a20202020202020204946204e4f5420464f554e44205448454e0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a202020202020202020202020202020202773756363657373272c2066616c73652c0a20202020202020202020202020202020276572726f72272c202750524f445543545f4e4f545f464f554e44272c0a20202020202020202020202020202020276d657373616765272c2027c39c72c3bc6e2062756c756e616d6164c4b13a2049442027207c7c20765f70726f647563745f69640a202020202020202020202020293b0a2020202020202020454e442049463b0a0a2020202020202020494620765f70726f647563745f73746f636b203c20765f717479205448454e0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a202020202020202020202020202020202773756363657373272c2066616c73652c0a20202020202020202020202020202020276572726f72272c2027494e53554646494349454e545f53544f434b272c0a20202020202020202020202020202020276d657373616765272c2027596574657273697a2073746f6b3a2027207c7c20765f70726f647563745f6e616d650a202020202020202020202020293b0a2020202020202020454e442049463b0a0a2020202020202020765f6974656d5f737562746f74616c203a3d20765f70726f647563745f7072696365202a20765f7174793b0a2020202020202020765f746f74616c5f737562746f74616c203a3d20765f746f74616c5f737562746f74616c202b20765f6974656d5f737562746f74616c3b0a0a2020202020202020765f6974656d5f64657461696c203a3d206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202770726f647563745f6964272c20765f70726f647563745f69642c0a2020202020202020202020202770726f647563745f6e616d65272c20765f70726f647563745f6e616d652c0a202020202020202020202020277175616e74697479272c20765f7174792c0a20202020202020202020202027756e69745f7072696365272c20765f70726f647563745f70726963652c0a20202020202020202020202027737562746f74616c272c20765f6974656d5f737562746f74616c0a2020202020202020293b0a0a2020202020202020765f76616c69645f6974656d73203a3d20765f76616c69645f6974656d73207c7c20765f6974656d5f64657461696c3b0a20202020454e44204c4f4f503b0a0a2020202053454c4543540a2020202020202020434f414c45534345287661745f726174652c20302e3230292c0a2020202020202020434f414c45534345287368697070696e675f636f73742c2034392e3930292c0a2020202020202020434f414c4553434528667265655f7368697070696e675f7468726573686f6c642c20313530302e30290a20202020494e544f20765f7661745f726174652c20765f7368697070696e675f636f73742c20765f7368697070696e675f7468726573686f6c640a2020202046524f4d207075626c69632e736974655f73657474696e67730a202020205748455245206964203d20313b0a0a20202020765f746f74616c5f766174203a3d20765f746f74616c5f737562746f74616c202a20765f7661745f726174653b0a0a20202020494620705f70726f6d6f5f636f6465204953204e4f54204e554c4c20414e44206c656e67746828705f70726f6d6f5f636f646529203e2030205448454e0a2020202020202020424547494e0a20202020202020202020202053454c454354207075626c69632e7665726966795f70726f6d6f5f636f646528705f70726f6d6f5f636f64652920494e544f20765f70726f6d6f5f726573756c743b0a0a20202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e2776616c696427293a3a626f6f6c65616e203d2074727565205448454e0a2020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f747970652729203d202770657263656e7461676527205448454e0a2020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f746f74616c5f737562746f74616c202b20765f746f74616c5f76617429202a202828765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a646563696d616c202f20313030293b0a202020202020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e742729204953204e4f54204e554c4c0a202020202020202020202020202020202020202020202020414e4420765f646973636f756e74203e2028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e7427293a3a646563696d616c0a20202020202020202020202020202020202020205448454e0a202020202020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e7427293a3a646563696d616c3b0a2020202020202020202020202020202020202020454e442049463b0a20202020202020202020202020202020454c53450a2020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a646563696d616c3b0a20202020202020202020202020202020454e442049463b0a202020202020202020202020454e442049463b0a2020202020202020455843455054494f4e205748454e204f5448455253205448454e0a202020202020202020202020765f646973636f756e74203a3d20303b0a2020202020202020454e443b0a20202020454e442049463b0a0a2020202049462028765f746f74616c5f737562746f74616c202b20765f746f74616c5f766174202d20765f646973636f756e7429203e3d20765f7368697070696e675f7468726573686f6c64205448454e0a2020202020202020765f7368697070696e675f636f7374203a3d20303b0a20202020454e442049463b0a0a20202020765f66696e616c5f746f74616c203a3d20765f746f74616c5f737562746f74616c202b20765f746f74616c5f766174202b20765f7368697070696e675f636f7374202d20765f646973636f756e743b0a20202020494620765f66696e616c5f746f74616c203c2030205448454e0a2020202020202020765f66696e616c5f746f74616c203a3d20303b0a20202020454e442049463b0a0a20202020765f6974656d5f746f74616c5f63656e7473203a3d20524f554e4428765f746f74616c5f737562746f74616c202a20313030293a3a626967696e743b0a20202020765f7661745f746f74616c5f63656e7473203a3d20524f554e4428765f746f74616c5f766174202a20313030293a3a626967696e743b0a20202020765f7368697070696e675f746f74616c5f63656e7473203a3d20524f554e4428765f7368697070696e675f636f7374202a20313030293a3a626967696e743b0a20202020765f646973636f756e745f746f74616c5f63656e7473203a3d20524f554e4428765f646973636f756e74202a20313030293a3a626967696e743b0a20202020765f706169645f746f74616c5f63656e7473203a3d20524f554e4428765f66696e616c5f746f74616c202a20313030293a3a626967696e743b0a0a20202020765f62616e6b5f726566203a3d20274252562d27207c7c20746f5f63686172287075626c69632e6e6f7728292c202759594d4d44442729207c7c20272d27207c7c20757070657228737562737472696e67286d64352872616e646f6d28293a3a74657874292066726f6d203120666f72203429293b0a0a20202020765f6f726465725f64657461696c73203a3d206a736f6e625f6275696c645f6f626a656374280a2020202020202020276974656d73272c20765f76616c69645f6974656d732c0a202020202020202027737562746f74616c272c20765f746f74616c5f737562746f74616c2c0a2020202020202020277661745f72617465272c20765f7661745f726174652c0a2020202020202020277661745f616d6f756e74272c20765f746f74616c5f7661742c0a2020202020202020277368697070696e675f636f7374272c20765f7368697070696e675f636f73742c0a202020202020202027746f74616c272c20765f66696e616c5f746f74616c2c0a20202020202020202770726f6d6f5f636f6465272c20705f70726f6d6f5f636f64652c0a202020202020202027646973636f756e74272c20765f646973636f756e742c0a20202020202020202762616e6b5f7265666572656e6365272c20765f62616e6b5f7265660a20202020293b0a0a20202020494e5345525420494e544f207075626c69632e6f726465727320280a2020202020202020757365725f69642c0a20202020202020207368697070696e675f616464726573735f69642c0a20202020202020207061796d656e745f6d6574686f642c0a20202020202020207374617475732c0a20202020202020207061796d656e745f7374617475732c0a20202020202020206f726465725f64657461696c732c0a202020202020202063757272656e63792c0a2020202020202020696e7374616c6c6d656e745f6e756d6265722c0a20202020202020206974656d5f746f74616c5f63656e74732c0a20202020202020207661745f746f74616c5f63656e74732c0a20202020202020207368697070696e675f746f74616c5f63656e74732c0a2020202020202020646973636f756e745f746f74616c5f63656e74732c0a2020202020202020636f6d6d697373696f6e5f616d6f756e745f63656e74732c0a2020202020202020706169645f746f74616c5f63656e74732c0a202020202020202070726f6d6f5f636f64652c0a202020202020202062616e6b5f7265666572656e63650a20202020292056414c55455320280a2020202020202020765f757365725f69642c0a2020202020202020705f7368697070696e675f616464726573735f69642c0a20202020202020202762616e6b5f7472616e73666572272c0a20202020202020202770656e64696e67272c0a20202020202020202770656e64696e67272c0a2020202020202020765f6f726465725f64657461696c732c0a202020202020202027544c272c0a2020202020202020312c0a2020202020202020765f6974656d5f746f74616c5f63656e74732c0a2020202020202020765f7661745f746f74616c5f63656e74732c0a2020202020202020765f7368697070696e675f746f74616c5f63656e74732c0a2020202020202020765f646973636f756e745f746f74616c5f63656e74732c0a2020202020202020302c0a2020202020202020765f706169645f746f74616c5f63656e74732c0a2020202020202020705f70726f6d6f5f636f64652c0a2020202020202020765f62616e6b5f7265660a20202020292052455455524e494e4720696420494e544f20765f6f726465725f69643b0a0a20202020424547494e0a2020202020202020494e5345525420494e544f207075626c69632e6f726465725f7374617475735f686973746f727920286f726465725f69642c207374617475732c206e6f74652c20637265617465645f6174290a202020202020202056414c55455320280a202020202020202020202020765f6f726465725f69642c0a2020202020202020202020202770656e64696e67272c0a20202020202020202020202027536970617269c59f20616cc4b16e64c4b12028486176616c652f4546542042656b6c656e69796f7229272c0a2020202020202020202020207075626c69632e6e6f7728290a2020202020202020293b0a20202020455843455054494f4e205748454e204f5448455253205448454e0a20202020202020204e554c4c3b0a20202020454e443b0a0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20747275652c0a2020202020202020276f726465725f6964272c20765f6f726465725f69642c0a202020202020202027746f74616c272c20765f66696e616c5f746f74616c2c0a2020202020202020277368697070696e675f636f7374272c20765f7368697070696e675f636f73742c0a20202020202020202762616e6b5f7265666572656e6365272c20765f62616e6b5f7265662c0a2020202020202020276d657373616765272c2027536970617269c59f206261c59f6172c4b1796c61206f6c75c59f747572756c6475270a20202020293b0a455843455054494f4e205748454e204f5448455253205448454e0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c2066616c73652c0a2020202020202020276572726f72272c20275345525645525f4552524f52272c0a2020202020202020276d657373616765272c2027536970617269c59f206f6c75c59f747572756c75726b656e2062656b6c656e6d6579656e206269722068617461206f6c75c59f74752e204cc3bc7466656e2074656b7261722064656e6579696e697a2e270a20202020293b0a454e443b0a242400000db8435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e76616c69646174655f636865636b6f7574280a20202020705f70726f647563745f736c756720746578742c0a20202020705f7175616e7469747920696e74656765722c0a20202020705f70726f6d6f5f636f646520746578742044454641554c54204e554c4c3a3a746578740a290a52455455524e53206a736f6e0a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f7061746820544f20277075626c6963272c202770675f636174616c6f67270a4153202466756e6374696f6e240a4445434c4152450a20202020765f757365725f696420555549443b0a20202020765f70726f66696c655f636f6d706c65746520424f4f4c45414e3b0a20202020765f70686f6e6520544558543b0a20202020765f70726f64756374205245434f52443b0a20202020765f737562746f74616c20444543494d414c2831302c2032293b0a20202020765f7661745f7261746520444543494d414c28352c203429203a3d20302e32303b0a20202020765f7661745f616d6f756e7420444543494d414c2831302c2032293b0a20202020765f746f74616c20444543494d414c2831302c2032293b0a20202020765f6f726465725f696420555549443b0a424547494e0a20202020765f757365725f6964203a3d20617574682e75696428293b0a0a20202020494620765f757365725f6964204953204e554c4c205448454e0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c2027554e415554484f52495a4544272c0a202020202020202020202020276d657373616765272c20274f747572756d2061c3a76d616ec4b17a20676572656b69796f72270a2020202020202020293b0a20202020454e442049463b0a0a2020202053454c4543542070726f66696c655f636f6d706c6574652c2070686f6e650a20202020494e544f20765f70726f66696c655f636f6d706c6574652c20765f70686f6e650a2020202046524f4d207075626c69632e70726f66696c65730a202020205748455245206964203d20765f757365725f69643b0a0a20202020494620765f70726f66696c655f636f6d706c657465204953204e554c4c204f5220765f70726f66696c655f636f6d706c657465203d2066616c7365205448454e0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c202750524f46494c455f494e434f4d504c455445272c0a202020202020202020202020276d657373616765272c2027536970617269c59f207665726d656b2069c3a7696e2070726f66696c696e697a692074616d616d6c616d616ec4b17a20676572656b69796f72270a2020202020202020293b0a20202020454e442049463b0a0a20202020494620765f70686f6e65204953204e554c4c204f52206c656e677468287265676578705f7265706c61636528765f70686f6e652c20275c5c44272c2027272c202767272929203c203130205448454e0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c202750484f4e455f5245515549524544272c0a202020202020202020202020276d657373616765272c2027536970617269c59f207665726d656b2069c3a7696e206765c3a765726c69206269722074656c65666f6e206e756d61726173c4b120676572656b6c69646972270a2020202020202020293b0a20202020454e442049463b0a0a2020202053454c454354202a20494e544f20765f70726f647563740a2020202046524f4d2070726f64756374730a20202020574845524520736c7567203d20705f70726f647563745f736c756720414e442069735f616374697665203d20747275653b0a0a20202020494620765f70726f64756374204953204e554c4c205448454e0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c202750524f445543545f4e4f545f464f554e44272c0a202020202020202020202020276d657373616765272c2027c39c72c3bc6e2062756c756e616d6164c4b1207665796120736174c4b1c59f7461206465c49f696c270a2020202020202020293b0a20202020454e442049463b0a0a20202020494620705f7175616e74697479203c2031204f5220705f7175616e74697479203e203130205448454e0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c2027494e56414c49445f5155414e54495459272c0a202020202020202020202020276d657373616765272c20274765c3a7657273697a206d696b7461722028312d31302061726173c4b1206f6c6d616cc4b129270a2020202020202020293b0a20202020454e442049463b0a0a20202020494620765f70726f647563742e73746f636b203c20705f7175616e74697479205448454e0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c2027494e53554646494349454e545f53544f434b272c0a202020202020202020202020276d657373616765272c202759657465726c692073746f6b20796f6b2e204d65766375742073746f6b3a2027207c7c20765f70726f647563742e73746f636b0a2020202020202020293b0a20202020454e442049463b0a0a20202020765f737562746f74616c203a3d20765f70726f647563742e7072696365202a20705f7175616e746974793b0a20202020765f7661745f616d6f756e74203a3d20765f737562746f74616c202a20765f7661745f726174653b0a20202020765f746f74616c203a3d20765f737562746f74616c202b20765f7661745f616d6f756e743b0a0a20202020494e5345525420494e544f206f726465727320280a2020202020202020757365725f69642c0a202020202020202070726f647563745f69642c0a20202020202020207175616e746974792c0a2020202020202020756e69745f70726963652c0a2020202020202020737562746f74616c2c0a20202020202020207661745f616d6f756e742c0a2020202020202020746f74616c2c0a20202020202020207374617475732c0a202020202020202070726f6d6f5f636f64650a20202020292056414c55455320280a2020202020202020765f757365725f69642c0a2020202020202020765f70726f647563742e69642c0a2020202020202020705f7175616e746974792c0a2020202020202020765f70726f647563742e70726963652c0a2020202020202020765f737562746f74616c2c0a2020202020202020765f7661745f616d6f756e742c0a2020202020202020765f746f74616c2c0a20202020202020202770656e64696e67272c0a2020202020202020705f70726f6d6f5f636f64650a20202020290a2020202052455455524e494e4720696420494e544f20765f6f726465725f69643b0a0a202020205550444154452070726f64756374730a202020205345542073746f636b203d2073746f636b202d20705f7175616e746974790a202020205748455245206964203d20765f70726f647563742e69643b0a0a2020202052455455524e206a736f6e5f6275696c645f6f626a656374280a20202020202020202773756363657373272c20747275652c0a2020202020202020276f726465725f6964272c20765f6f726465725f69642c0a20202020202020202770726f647563745f6e616d65272c20765f70726f647563742e6e616d652c0a2020202020202020277175616e74697479272c20705f7175616e746974792c0a202020202020202027756e69745f7072696365272c20765f70726f647563742e70726963652c0a202020202020202027737562746f74616c272c20765f737562746f74616c2c0a2020202020202020277661745f616d6f756e74272c20765f7661745f616d6f756e742c0a202020202020202027746f74616c272c20765f746f74616c2c0a2020202020202020276d657373616765272c2027536970617269c59f206261c59f6172c4b1796c61206f6c75c59f747572756c6475270a20202020293b0a455843455054494f4e0a202020205748454e204f5448455253205448454e0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c20275345525645525f4552524f52272c0a202020202020202020202020276d657373616765272c2027c4b0c59f6c656d2073c4b1726173c4b16e6461206269722068617461206f6c75c59f74752e204cc3bc7466656e2074656b7261722064656e6579696e2e270a2020202020202020293b0a454e443b0a2466756e6374696f6e24000024d3435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e63616c63756c6174655f6f726465725f71756f74655f7631280a20202020705f757365725f696420555549442c0a20202020705f6974656d73204a534f4e422c0a20202020705f7368697070696e675f616464726573735f696420555549442c0a20202020705f7061796d656e745f6d6574686f6420544558542044454641554c5420276372656469745f63617264272c0a20202020705f696e7374616c6c6d656e745f6e756d62657220494e54454745522044454641554c5420312c0a20202020705f70726f6d6f5f636f646520544558542044454641554c54204e554c4c0a290a52455455524e53204a534f4e420a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670a41532024240a4445434c4152450a20202020765f726f6c6520544558543b0a20202020765f757365725f696420555549443b0a20202020765f70726f66696c655f636f6d706c65746520424f4f4c45414e3b0a20202020765f70686f6e6520544558543b0a20202020765f616464726573735f6f776e657220555549443b0a20202020765f6974656d204a534f4e423b0a20202020765f70726f647563745f696420555549443b0a20202020765f70726f647563745f6e616d6520544558543b0a20202020765f70726f647563745f7072696365204e554d455249432831322c32293b0a20202020765f70726f647563745f73746f636b20494e54454745523b0a20202020765f72657365727665645f73746f636b20494e54454745523b0a20202020765f617661696c61626c655f73746f636b20494e54454745523b0a20202020765f71747920494e54454745523b0a20202020765f6974656d5f756e69745f63656e747320424947494e543b0a20202020765f6974656d5f6c696e655f63656e747320424947494e543b0a20202020765f6974656d5f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f7661745f72617465204e554d455249432831302c3429203a3d20302e32303b0a20202020765f7368697070696e675f636f7374204e554d455249432831302c3229203a3d2034392e39303b0a20202020765f7368697070696e675f7468726573686f6c64204e554d455249432831322c3229203a3d20313530302e30303b0a20202020765f7661745f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f7368697070696e675f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f646973636f756e745f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f7072655f7368697070696e675f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f626173655f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f636f6d6d697373696f6e5f72617465204e554d4552494328352c3229203a3d20303b0a20202020765f636f6d6d697373696f6e5f616d6f756e745f63656e747320424947494e54203a3d20303b0a20202020765f706169645f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f726174655f757064617465645f61742054494d455354414d50545a3b0a20202020765f70726f6d6f5f726573756c74204a534f4e3b0a20202020765f636172745f736e617073686f74204a534f4e42203a3d20275b5d273a3a6a736f6e623b0a424547494e0a20202020765f726f6c65203a3d20434f414c45534345284e554c4c49462863757272656e745f73657474696e672827726571756573742e6a77742e636c61696d2e726f6c65272c2054525545292c202727292c20617574682e726f6c6528292c2027736572766963655f726f6c6527293b0a20202020494620765f726f6c65203d2027736572766963655f726f6c6527205448454e0a2020202020202020765f757365725f6964203a3d20705f757365725f69643b0a20202020454c53450a2020202020202020765f757365725f6964203a3d20617574682e75696428293b0a20202020454e442049463b0a0a20202020494620765f757365725f6964204953204e554c4c205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2046414c53452c0a202020202020202020202020276572726f72272c2027554e415554484f52495a4544272c0a202020202020202020202020276d657373616765272c20274f747572756d20676572656b6c69270a2020202020202020293b0a20202020454e442049463b0a0a2020202053454c4543542070726f66696c655f636f6d706c6574652c2070686f6e650a20202020494e544f20765f70726f66696c655f636f6d706c6574652c20765f70686f6e650a2020202046524f4d207075626c69632e70726f66696c65730a202020205748455245206964203d20765f757365725f69643b0a0a20202020494620765f70726f66696c655f636f6d706c657465204953204e554c4c204f5220765f70726f66696c655f636f6d706c657465203d2066616c7365205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2046414c53452c0a202020202020202020202020276572726f72272c202750524f46494c455f494e434f4d504c455445272c0a202020202020202020202020276d657373616765272c2027536970617269c59f207665726d656b2069c3a7696e2070726f66696c696e697a692074616d616d6c616d616ec4b17a20676572656b69796f72270a2020202020202020293b0a20202020454e442049463b0a0a20202020494620765f70686f6e65204953204e554c4c204f52206c656e677468287265676578705f7265706c61636528765f70686f6e652c20275c5c44272c2027272c202767272929203c203130205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2046414c53452c0a202020202020202020202020276572726f72272c202750484f4e455f5245515549524544272c0a202020202020202020202020276d657373616765272c2027536970617269c59f207665726d656b2069c3a7696e206765c3a765726c69206269722074656c65666f6e206e756d61726173c4b120676572656b6c69646972270a2020202020202020293b0a20202020454e442049463b0a0a20202020494620705f6974656d73204953204e554c4c204f52206a736f6e625f747970656f6628705f6974656d7329203c3e2027617272617927204f52206a736f6e625f61727261795f6c656e67746828705f6974656d7329203d2030205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2046414c53452c0a202020202020202020202020276572726f72272c2027454d5054595f43415254272c0a202020202020202020202020276d657373616765272c2027536570657420626f73206f6c616d617a270a2020202020202020293b0a20202020454e442049463b0a0a2020202053454c45435420757365725f69640a20202020494e544f20765f616464726573735f6f776e65720a2020202046524f4d207075626c69632e6164647265737365730a202020205748455245206964203d20705f7368697070696e675f616464726573735f69643b0a0a20202020494620765f616464726573735f6f776e6572204953204e554c4c204f5220765f616464726573735f6f776e6572203c3e20765f757365725f6964205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2046414c53452c0a202020202020202020202020276572726f72272c2027494e56414c49445f41444452455353272c0a202020202020202020202020276d657373616765272c2027476563657273697a20616472657320736563696d69270a2020202020202020293b0a20202020454e442049463b0a0a20202020494620705f7061796d656e745f6d6574686f64204e4f5420494e2028276372656469745f63617264272c202762616e6b5f7472616e736665722729205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2046414c53452c0a202020202020202020202020276572726f72272c2027494e56414c49445f5041594d454e545f4d4554484f44272c0a202020202020202020202020276d657373616765272c2027476563657273697a206f64656d6520796f6e74656d69270a2020202020202020293b0a20202020454e442049463b0a0a20202020494620705f7061796d656e745f6d6574686f64203d20276372656469745f636172642720414e442028705f696e7374616c6c6d656e745f6e756d626572203c2031204f5220705f696e7374616c6c6d656e745f6e756d626572203e20313229205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2046414c53452c0a202020202020202020202020276572726f72272c2027494e56414c49445f494e5354414c4c4d454e54272c0a202020202020202020202020276d657373616765272c2027476563657273697a2074616b73697420736179697369270a2020202020202020293b0a20202020454e442049463b0a0a2020202053454c4543540a2020202020202020434f414c45534345287661745f726174652c20302e3230292c0a2020202020202020434f414c45534345287368697070696e675f636f73742c2034392e3930292c0a2020202020202020434f414c4553434528667265655f7368697070696e675f7468726573686f6c642c20313530302e3030290a20202020494e544f20765f7661745f726174652c20765f7368697070696e675f636f73742c20765f7368697070696e675f7468726573686f6c640a2020202046524f4d207075626c69632e736974655f73657474696e67730a202020205748455245206964203d20313b0a0a20202020464f5220765f6974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e747328705f6974656d73290a202020204c4f4f500a2020202020202020765f70726f647563745f6964203a3d2028765f6974656d2d3e3e2770726f647563745f696427293a3a757569643b0a2020202020202020765f717479203a3d20434f414c455343452828765f6974656d2d3e3e277175616e7469747927293a3a696e74656765722c2030293b0a0a2020202020202020494620765f70726f647563745f6964204953204e554c4c204f5220765f717479203c3d2030205448454e0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a202020202020202020202020202020202773756363657373272c2046414c53452c0a20202020202020202020202020202020276572726f72272c2027494e56414c49445f434152545f4954454d272c0a20202020202020202020202020202020276d657373616765272c20275365706574206f6765736920676563657273697a270a202020202020202020202020293b0a2020202020202020454e442049463b0a0a202020202020202053454c4543540a202020202020202020202020702e6e616d652c0a202020202020202020202020702e70726963652c0a202020202020202020202020702e73746f636b2c0a202020202020202020202020434f414c4553434528702e72657365727665645f73746f636b2c2030290a2020202020202020494e544f0a202020202020202020202020765f70726f647563745f6e616d652c0a202020202020202020202020765f70726f647563745f70726963652c0a202020202020202020202020765f70726f647563745f73746f636b2c0a202020202020202020202020765f72657365727665645f73746f636b0a202020202020202046524f4d207075626c69632e70726f647563747320700a2020202020202020574845524520702e6964203d20765f70726f647563745f69643b0a0a20202020202020204946204e4f5420464f554e44205448454e0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a202020202020202020202020202020202773756363657373272c2046414c53452c0a20202020202020202020202020202020276572726f72272c202750524f445543545f4e4f545f464f554e44272c0a20202020202020202020202020202020276d657373616765272c20275572756e2062756c756e616d616469270a202020202020202020202020293b0a2020202020202020454e442049463b0a0a2020202020202020765f617661696c61626c655f73746f636b203a3d20765f70726f647563745f73746f636b202d20765f72657365727665645f73746f636b3b0a2020202020202020494620765f617661696c61626c655f73746f636b203c20765f717479205448454e0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a202020202020202020202020202020202773756363657373272c2046414c53452c0a20202020202020202020202020202020276572726f72272c2027494e53554646494349454e545f53544f434b272c0a20202020202020202020202020202020276d657373616765272c2027596574657273697a2073746f6b272c0a202020202020202020202020202020202770726f647563745f6964272c20765f70726f647563745f69640a202020202020202020202020293b0a2020202020202020454e442049463b0a0a2020202020202020765f6974656d5f756e69745f63656e7473203a3d20524f554e4428765f70726f647563745f7072696365202a20313030293a3a626967696e743b0a2020202020202020765f6974656d5f6c696e655f63656e7473203a3d20765f6974656d5f756e69745f63656e7473202a20765f7174793b0a2020202020202020765f6974656d5f746f74616c5f63656e7473203a3d20765f6974656d5f746f74616c5f63656e7473202b20765f6974656d5f6c696e655f63656e74733b0a0a2020202020202020765f636172745f736e617073686f74203a3d20765f636172745f736e617073686f74207c7c206a736f6e625f6275696c645f6172726179280a2020202020202020202020206a736f6e625f6275696c645f6f626a656374280a202020202020202020202020202020202770726f647563745f6964272c20765f70726f647563745f69642c0a202020202020202020202020202020202770726f647563745f6e616d65272c20765f70726f647563745f6e616d652c0a20202020202020202020202020202020277175616e74697479272c20765f7174792c0a2020202020202020202020202020202027756e69745f70726963655f63656e7473272c20765f6974656d5f756e69745f63656e74732c0a2020202020202020202020202020202027756e69745f7072696365272c20524f554e4428765f6974656d5f756e69745f63656e74733a3a6e756d65726963202f203130302c2032292c0a2020202020202020202020202020202027737562746f74616c5f63656e7473272c20765f6974656d5f6c696e655f63656e74732c0a2020202020202020202020202020202027737562746f74616c272c20524f554e4428765f6974656d5f6c696e655f63656e74733a3a6e756d65726963202f203130302c2032292c0a20202020202020202020202020202020276c696e655f746f74616c5f63656e7473272c20765f6974656d5f6c696e655f63656e74732c0a20202020202020202020202020202020276c696e655f746f74616c272c20524f554e4428765f6974656d5f6c696e655f63656e74733a3a6e756d65726963202f203130302c2032290a202020202020202020202020290a2020202020202020293b0a20202020454e44204c4f4f503b0a0a20202020765f7661745f746f74616c5f63656e7473203a3d20524f554e4428765f6974656d5f746f74616c5f63656e7473202a20765f7661745f72617465293a3a626967696e743b0a0a20202020494620705f70726f6d6f5f636f6465204953204e4f54204e554c4c20414e44204c454e475448285452494d28705f70726f6d6f5f636f64652929203e2030205448454e0a2020202020202020424547494e0a20202020202020202020202053454c454354207665726966795f70726f6d6f5f636f646528705f70726f6d6f5f636f64652920494e544f20765f70726f6d6f5f726573756c743b0a202020202020202020202020494620434f414c455343452828765f70726f6d6f5f726573756c742d3e3e2776616c696427293a3a626f6f6c65616e2c2046414c534529205448454e0a2020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f747970652729203d202770657263656e7461676527205448454e0a2020202020202020202020202020202020202020765f646973636f756e745f746f74616c5f63656e7473203a3d20524f554e44280a20202020202020202020202020202020202020202020202028765f6974656d5f746f74616c5f63656e7473202b20765f7661745f746f74616c5f63656e747329202a0a20202020202020202020202020202020202020202020202028434f414c455343452828765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a6e756d657269632c203029202f203130302e30290a2020202020202020202020202020202020202020293a3a626967696e743b0a20202020202020202020202020202020454c53450a2020202020202020202020202020202020202020765f646973636f756e745f746f74616c5f63656e7473203a3d20524f554e44280a202020202020202020202020202020202020202020202020434f414c455343452828765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a6e756d657269632c203029202a203130300a2020202020202020202020202020202020202020293a3a626967696e743b0a20202020202020202020202020202020454e442049463b0a0a2020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e742729204953204e4f54204e554c4c205448454e0a2020202020202020202020202020202020202020765f646973636f756e745f746f74616c5f63656e7473203a3d204c45415354280a202020202020202020202020202020202020202020202020765f646973636f756e745f746f74616c5f63656e74732c0a202020202020202020202020202020202020202020202020524f554e442828765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e7427293a3a6e756d65726963202a20313030293a3a626967696e740a2020202020202020202020202020202020202020293b0a20202020202020202020202020202020454e442049463b0a202020202020202020202020454e442049463b0a2020202020202020455843455054494f4e205748454e204f5448455253205448454e0a202020202020202020202020765f646973636f756e745f746f74616c5f63656e7473203a3d20303b0a2020202020202020454e443b0a20202020454e442049463b0a0a20202020765f7072655f7368697070696e675f746f74616c5f63656e7473203a3d20475245415445535428765f6974656d5f746f74616c5f63656e7473202b20765f7661745f746f74616c5f63656e7473202d20765f646973636f756e745f746f74616c5f63656e74732c2030293b0a20202020494620765f7072655f7368697070696e675f746f74616c5f63656e7473203e3d20524f554e4428765f7368697070696e675f7468726573686f6c64202a20313030293a3a626967696e74205448454e0a2020202020202020765f7368697070696e675f746f74616c5f63656e7473203a3d20303b0a20202020454c53450a2020202020202020765f7368697070696e675f746f74616c5f63656e7473203a3d20524f554e4428765f7368697070696e675f636f7374202a20313030293a3a626967696e743b0a20202020454e442049463b0a0a20202020765f626173655f746f74616c5f63656e7473203a3d20765f7072655f7368697070696e675f746f74616c5f63656e7473202b20765f7368697070696e675f746f74616c5f63656e74733b0a0a20202020494620705f7061796d656e745f6d6574686f64203d20276372656469745f6361726427205448454e0a202020202020202053454c45435420636f6d6d697373696f6e5f726174652c20757064617465645f61740a2020202020202020494e544f20765f636f6d6d697373696f6e5f726174652c20765f726174655f757064617465645f61740a202020202020202046524f4d207075626c69632e696e7374616c6c6d656e745f72617465730a2020202020202020574845524520696e7374616c6c6d656e745f6e756d626572203d20705f696e7374616c6c6d656e745f6e756d6265720a20202020202020202020414e442069735f616374697665203d20545255450a20202020202020204c494d495420313b0a0a20202020202020204946204e4f5420464f554e44205448454e0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a202020202020202020202020202020202773756363657373272c2046414c53452c0a20202020202020202020202020202020276572726f72272c2027494e5354414c4c4d454e545f4e4f545f414354495645272c0a20202020202020202020202020202020276d657373616765272c2027536563696c656e2074616b73697420616b74696620646567696c270a202020202020202020202020293b0a2020202020202020454e442049463b0a0a2020202020202020765f636f6d6d697373696f6e5f616d6f756e745f63656e7473203a3d20524f554e4428765f626173655f746f74616c5f63656e7473202a2028765f636f6d6d697373696f6e5f72617465202f203130302e3029293a3a626967696e743b0a20202020454c53450a2020202020202020765f636f6d6d697373696f6e5f72617465203a3d20303b0a2020202020202020765f726174655f757064617465645f6174203a3d204e4f5728293b0a2020202020202020765f636f6d6d697373696f6e5f616d6f756e745f63656e7473203a3d20303b0a20202020454e442049463b0a0a20202020765f706169645f746f74616c5f63656e7473203a3d20765f626173655f746f74616c5f63656e7473202b20765f636f6d6d697373696f6e5f616d6f756e745f63656e74733b0a0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20545255452c0a2020202020202020276d657373616765272c202751756f7465206f6c7573747572756c6475272c0a2020202020202020277061796d656e745f6d6574686f64272c20705f7061796d656e745f6d6574686f642c0a2020202020202020277368697070696e675f616464726573735f6964272c20705f7368697070696e675f616464726573735f69642c0a202020202020202027696e7374616c6c6d656e745f6e756d626572272c2043415345205748454e20705f7061796d656e745f6d6574686f64203d20276372656469745f6361726427205448454e20705f696e7374616c6c6d656e745f6e756d62657220454c5345203120454e442c0a2020202020202020276974656d5f746f74616c5f63656e7473272c20765f6974656d5f746f74616c5f63656e74732c0a2020202020202020277661745f746f74616c5f63656e7473272c20765f7661745f746f74616c5f63656e74732c0a2020202020202020277368697070696e675f746f74616c5f63656e7473272c20765f7368697070696e675f746f74616c5f63656e74732c0a202020202020202027646973636f756e745f746f74616c5f63656e7473272c20765f646973636f756e745f746f74616c5f63656e74732c0a202020202020202027626173655f746f74616c5f63656e7473272c20765f626173655f746f74616c5f63656e74732c0a202020202020202027636f6d6d697373696f6e5f72617465272c20765f636f6d6d697373696f6e5f726174652c0a202020202020202027636f6d6d697373696f6e5f616d6f756e745f63656e7473272c20765f636f6d6d697373696f6e5f616d6f756e745f63656e74732c0a202020202020202027706169645f746f74616c5f63656e7473272c20765f706169645f746f74616c5f63656e74732c0a20202020202020202763757272656e6379272c2027544c272c0a202020202020202027726174655f76657273696f6e272c20277631272c0a2020202020202020276566666563746976655f66726f6d272c20765f726174655f757064617465645f61742c0a202020202020202027636172745f736e617073686f74272c20765f636172745f736e617073686f740a20202020293b0a454e443b0a242400001793435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e66696e616c697a655f696e74656e745f6372656174655f6f726465725f7631280a20202020705f696e74656e745f696420555549442c0a20202020705f676174657761795f726573756c74204a534f4e422044454641554c5420277b7d273a3a6a736f6e620a290a52455455524e53204a534f4e420a4c414e475541474520706c706773716c0a534543555249545920444546494e45520a534554207365617263685f70617468203d207075626c69632c2070675f636174616c6f670a41532024240a4445434c4152450a20202020765f726f6c6520544558543b0a20202020765f696e74656e74205245434f52443b0a20202020765f70726f66696c655f636f6d706c65746520424f4f4c45414e3b0a20202020765f70686f6e6520544558543b0a20202020765f6578697374696e675f6f726465725f696420555549443b0a20202020765f7265736572766174696f6e205245434f52443b0a20202020765f70726f64756374205245434f52443b0a20202020765f6f726465725f696420555549443b0a20202020765f676174657761795f73746174757320544558543b0a20202020765f676174657761795f7472785f636f646520544558543b0a20202020765f6f726465725f64657461696c73204a534f4e423b0a20202020765f686973746f72795f6e6f746520544558543b0a20202020765f6163746976655f7265736572766174696f6e5f636f756e7420494e5445474552203a3d20303b0a424547494e0a20202020765f726f6c65203a3d20434f414c45534345284e554c4c49462863757272656e745f73657474696e672827726571756573742e6a77742e636c61696d2e726f6c65272c2054525545292c202727292c20617574682e726f6c6528292c2027736572766963655f726f6c6527293b0a20202020494620765f726f6c65203c3e2027736572766963655f726f6c6527205448454e0a2020202020202020524149534520455843455054494f4e2027666f7262696464656e273b0a20202020454e442049463b0a0a2020202053454c454354202a0a20202020494e544f20765f696e74656e740a2020202046524f4d207075626c69632e7061796d656e745f696e74656e74730a202020205748455245206964203d20705f696e74656e745f69640a20202020464f52205550444154453b0a0a202020204946204e4f5420464f554e44205448454e0a2020202020202020524149534520455843455054494f4e2027696e74656e745f6e6f745f666f756e64273b0a20202020454e442049463b0a0a20202020494620765f696e74656e742e737461747573203d20277061696427205448454e0a202020202020202053454c4543542069640a2020202020202020494e544f20765f6578697374696e675f6f726465725f69640a202020202020202046524f4d207075626c69632e6f72646572730a20202020202020205748455245207061796d656e745f696e74656e745f6964203d20705f696e74656e745f69640a20202020202020204c494d495420313b0a0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c20545255452c0a202020202020202020202020276f726465725f6964272c20765f6578697374696e675f6f726465725f69642c0a20202020202020202020202027616c72656164795f70616964272c20545255450a2020202020202020293b0a20202020454e442049463b0a0a2020202053454c4543542070726f66696c655f636f6d706c6574652c2070686f6e650a20202020494e544f20765f70726f66696c655f636f6d706c6574652c20765f70686f6e650a2020202046524f4d207075626c69632e70726f66696c65730a202020205748455245206964203d20765f696e74656e742e757365725f69643b0a0a20202020494620765f70726f66696c655f636f6d706c657465204953204e554c4c204f5220765f70726f66696c655f636f6d706c657465203d2066616c7365205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2046414c53452c0a202020202020202020202020276572726f72272c202750524f46494c455f494e434f4d504c455445272c0a202020202020202020202020276d657373616765272c2027536970617269c59f207665726d656b2069c3a7696e2070726f66696c696e697a692074616d616d6c616d616ec4b17a20676572656b69796f72270a2020202020202020293b0a20202020454e442049463b0a0a20202020494620765f70686f6e65204953204e554c4c204f52206c656e677468287265676578705f7265706c61636528765f70686f6e652c20275c5c44272c2027272c202767272929203c203130205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2046414c53452c0a202020202020202020202020276572726f72272c202750484f4e455f5245515549524544272c0a202020202020202020202020276d657373616765272c2027536970617269c59f207665726d656b2069c3a7696e206765c3a765726c69206269722074656c65666f6e206e756d61726173c4b120676572656b6c69646972270a2020202020202020293b0a20202020454e442049463b0a0a20202020494620765f696e74656e742e737461747573204e4f5420494e20282770656e64696e67272c20276177616974696e675f33642729205448454e0a2020202020202020524149534520455843455054494f4e2027696e74656e745f7374617475735f696e76616c6964273b0a20202020454e442049463b0a0a20202020494620765f696e74656e742e63757272656e6379203c3e2027544c27205448454e0a2020202020202020524149534520455843455054494f4e202763757272656e63795f6d69736d61746368273b0a20202020454e442049463b0a0a2020202053454c45435420434f554e54282a290a20202020494e544f20765f6163746976655f7265736572766174696f6e5f636f756e740a2020202046524f4d207075626c69632e73746f636b5f7265736572766174696f6e730a20202020574845524520696e74656e745f6964203d20705f696e74656e745f69640a202020202020414e442072656c65617365645f6174204953204e554c4c3b0a0a20202020494620765f6163746976655f7265736572766174696f6e5f636f756e74203d2030205448454e0a2020202020202020524149534520455843455054494f4e20276e6f5f6163746976655f7265736572766174696f6e73273b0a20202020454e442049463b0a0a20202020464f5220765f7265736572766174696f6e20494e0a202020202020202053454c4543542069642c2070726f647563745f69642c207174790a202020202020202046524f4d207075626c69632e73746f636b5f7265736572766174696f6e730a2020202020202020574845524520696e74656e745f6964203d20705f696e74656e745f69640a20202020202020202020414e442072656c65617365645f6174204953204e554c4c0a2020202020202020464f52205550444154450a202020204c4f4f500a202020202020202053454c4543542069642c2073746f636b2c20434f414c455343452872657365727665645f73746f636b2c2030292041532072657365727665645f73746f636b0a2020202020202020494e544f20765f70726f647563740a202020202020202046524f4d207075626c69632e70726f64756374730a20202020202020205748455245206964203d20765f7265736572766174696f6e2e70726f647563745f69640a2020202020202020464f52205550444154453b0a0a20202020202020204946204e4f5420464f554e44205448454e0a202020202020202020202020524149534520455843455054494f4e202770726f647563745f6e6f745f666f756e64273b0a2020202020202020454e442049463b0a0a2020202020202020494620765f70726f647563742e72657365727665645f73746f636b203c20765f7265736572766174696f6e2e717479204f5220765f70726f647563742e73746f636b203c20765f7265736572766174696f6e2e717479205448454e0a202020202020202020202020524149534520455843455054494f4e20277265736572766174696f6e5f73746174655f696e76616c6964273b0a2020202020202020454e442049463b0a0a2020202020202020555044415445207075626c69632e70726f64756374730a20202020202020205345540a20202020202020202020202073746f636b203d2073746f636b202d20765f7265736572766174696f6e2e7174792c0a20202020202020202020202072657365727665645f73746f636b203d20475245415445535428434f414c455343452872657365727665645f73746f636b2c203029202d20765f7265736572766174696f6e2e7174792c2030290a20202020202020205748455245206964203d20765f7265736572766174696f6e2e70726f647563745f69643b0a20202020454e44204c4f4f503b0a0a20202020765f6f726465725f64657461696c73203a3d206a736f6e625f6275696c645f6f626a656374280a2020202020202020276974656d73272c20765f696e74656e742e636172745f736e617073686f742c0a202020202020202027737562746f74616c272c20524f554e4428765f696e74656e742e6974656d5f746f74616c5f63656e74733a3a6e756d65726963202f203130302c2032292c0a2020202020202020277661745f616d6f756e74272c20524f554e4428765f696e74656e742e7661745f746f74616c5f63656e74733a3a6e756d65726963202f203130302c2032292c0a2020202020202020277368697070696e675f636f7374272c20524f554e4428765f696e74656e742e7368697070696e675f746f74616c5f63656e74733a3a6e756d65726963202f203130302c2032292c0a202020202020202027646973636f756e74272c20524f554e4428765f696e74656e742e646973636f756e745f746f74616c5f63656e74733a3a6e756d65726963202f203130302c2032292c0a202020202020202027636f6d6d697373696f6e5f616d6f756e74272c20524f554e4428765f696e74656e742e636f6d6d697373696f6e5f616d6f756e745f63656e74733a3a6e756d65726963202f203130302c2032292c0a202020202020202027746f74616c272c20524f554e4428765f696e74656e742e706169645f746f74616c5f63656e74733a3a6e756d65726963202f203130302c2032292c0a20202020202020202763757272656e6379272c2027544c272c0a202020202020202027696e7374616c6c6d656e745f6e756d626572272c20765f696e74656e742e696e7374616c6c6d656e745f6e756d6265720a20202020293b0a0a20202020494e5345525420494e544f207075626c69632e6f726465727320280a2020202020202020757365725f69642c0a20202020202020207368697070696e675f616464726573735f69642c0a20202020202020207061796d656e745f6d6574686f642c0a20202020202020207061796d656e745f7374617475732c0a20202020202020207374617475732c0a20202020202020206f726465725f64657461696c732c0a20202020202020207061796d656e745f696e74656e745f69642c0a202020202020202063757272656e63792c0a2020202020202020696e7374616c6c6d656e745f6e756d6265722c0a20202020202020206974656d5f746f74616c5f63656e74732c0a20202020202020207661745f746f74616c5f63656e74732c0a20202020202020207368697070696e675f746f74616c5f63656e74732c0a2020202020202020646973636f756e745f746f74616c5f63656e74732c0a2020202020202020636f6d6d697373696f6e5f616d6f756e745f63656e74732c0a2020202020202020706169645f746f74616c5f63656e74730a20202020290a2020202056414c55455320280a2020202020202020765f696e74656e742e757365725f69642c0a2020202020202020765f696e74656e742e7368697070696e675f616464726573735f69642c0a2020202020202020276372656469745f63617264272c0a20202020202020202770616964272c0a20202020202020202770726f63657373696e67272c0a2020202020202020765f6f726465725f64657461696c732c0a2020202020202020765f696e74656e742e69642c0a202020202020202027544c272c0a2020202020202020765f696e74656e742e696e7374616c6c6d656e745f6e756d6265722c0a2020202020202020765f696e74656e742e6974656d5f746f74616c5f63656e74732c0a2020202020202020765f696e74656e742e7661745f746f74616c5f63656e74732c0a2020202020202020765f696e74656e742e7368697070696e675f746f74616c5f63656e74732c0a2020202020202020765f696e74656e742e646973636f756e745f746f74616c5f63656e74732c0a2020202020202020765f696e74656e742e636f6d6d697373696f6e5f616d6f756e745f63656e74732c0a2020202020202020765f696e74656e742e706169645f746f74616c5f63656e74730a20202020290a2020202052455455524e494e4720696420494e544f20765f6f726465725f69643b0a0a20202020765f686973746f72795f6e6f7465203a3d20274b617274206f64656d657369206f6e61796c616e64692076652073697061726973206f6c7573747572756c6475273b0a20202020494e5345525420494e544f207075626c69632e6f726465725f7374617475735f686973746f727920286f726465725f69642c207374617475732c206e6f74652c20637265617465645f6174290a2020202056414c5545532028765f6f726465725f69642c202770726f63657373696e67272c20765f686973746f72795f6e6f74652c204e4f572829293b0a0a20202020555044415445207075626c69632e73746f636b5f7265736572766174696f6e730a202020205345542072656c65617365645f6174203d204e4f5728290a20202020574845524520696e74656e745f6964203d20705f696e74656e745f69640a202020202020414e442072656c65617365645f6174204953204e554c4c3b0a0a20202020765f676174657761795f737461747573203a3d20434f414c45534345280a2020202020202020705f676174657761795f726573756c742d3e3e27676174657761795f737461747573272c0a2020202020202020705f676174657761795f726573756c742d3e3e27726573756c74436f6465272c0a2020202020202020705f676174657761795f726573756c742d3e3e27726573756c745f636f6465272c0a20202020202020202773756363657373270a20202020293b0a20202020765f676174657761795f7472785f636f6465203a3d20434f414c45534345280a2020202020202020705f676174657761795f726573756c742d3e3e27676174657761795f7472785f636f6465272c0a2020202020202020705f676174657761795f726573756c742d3e3e27747278436f6465272c0a2020202020202020705f676174657761795f726573756c742d3e3e277472785f636f6465272c0a2020202020202020765f696e74656e742e676174657761795f7472785f636f64650a20202020293b0a0a20202020555044415445207075626c69632e7061796d656e745f696e74656e74730a202020205345540a2020202020202020737461747573203d202770616964272c0a2020202020202020676174657761795f737461747573203d20765f676174657761795f7374617475732c0a2020202020202020676174657761795f7472785f636f6465203d20765f676174657761795f7472785f636f64652c0a2020202020202020757064617465645f6174203d204e4f5728290a202020205748455245206964203d20705f696e74656e745f69643b0a0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20545255452c0a2020202020202020276f726465725f6964272c20765f6f726465725f69642c0a202020202020202027616c72656164795f70616964272c2046414c53450a20202020293b0a454e443b0a242400000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260224085117_reduce_vat_to_one_percent_runtime.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"BEGIN","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"ALTER TABLE public.site_settings\n    ALTER COLUMN vat_rate SET DEFAULT 0.01","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO public.site_settings (id, vat_rate)\nVALUES (1, 0.01)\nON CONFLICT (id) DO UPDATE\nSET vat_rate = EXCLUDED.vat_rate","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"UPDATE public.site_settings\nSET vat_rate = 0.01\nWHERE vat_rate IS DISTINCT FROM 0.01","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DO $$\nDECLARE\n    v_proc regprocedure;\n    v_sql text;\nBEGIN\n    v_proc := to_regprocedure('public.create_order(jsonb,uuid,text,text)');\n\n    IF v_proc IS NOT NULL THEN\n        SELECT pg_get_functiondef(v_proc) INTO v_sql;\n\n        v_sql := replace(\n            v_sql,\n            'COALESCE(vat_rate, 0.20)',\n            'COALESCE(vat_rate, 0.01)'\n        );\n\n        EXECUTE v_sql;\n    END IF;\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DO $$\nDECLARE\n    v_proc regprocedure;\n    v_sql text;\nBEGIN\n    v_proc := to_regprocedure('public.validate_checkout(text,integer,text)');\n\n    IF v_proc IS NOT NULL THEN\n        SELECT pg_get_functiondef(v_proc) INTO v_sql;\n\n        v_sql := replace(\n            v_sql,\n            'v_vat_rate DECIMAL(5, 4) := 0.20;',\n            'v_vat_rate DECIMAL(5, 4) := 0.01;'\n        );\n\n        EXECUTE v_sql;\n    END IF;\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"DO $$\nDECLARE\n    v_proc regprocedure;\n    v_sql text;\nBEGIN\n    v_proc := to_regprocedure('public.calculate_order_quote_v1(uuid,jsonb,uuid,text,integer,text)');\n\n    IF v_proc IS NOT NULL THEN\n        SELECT pg_get_functiondef(v_proc) INTO v_sql;\n\n        v_sql := replace(\n            v_sql,\n            'v_vat_rate NUMERIC(10,4) := 0.20;',\n            'v_vat_rate NUMERIC(10,4) := 0.01;'\n        );\n\n        v_sql := replace(\n            v_sql,\n            'COALESCE(vat_rate, 0.20)',\n            'COALESCE(vat_rate, 0.01)'\n        );\n\n        EXECUTE v_sql;\n    END IF;\nEND;\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"UPDATE public.email_templates\nSET content_html = REPLACE(content_html, 'KDV (%20)', 'KDV (%1)'),\n    updated_at = NOW()\nWHERE content_html LIKE '%KDV (%20)%'","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"COMMIT","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260224085117"},{"text":"reduce_vat_to_one_percent_runtime"},{"binary":"000000010000000000000019000000090000000100000005424547494e0000004b414c544552205441424c45207075626c69632e736974655f73657474696e67730a20202020414c54455220434f4c554d4e207661745f72617465205345542044454641554c5420302e30310000007c494e5345525420494e544f207075626c69632e736974655f73657474696e6773202869642c207661745f72617465290a56414c5545532028312c20302e3031290a4f4e20434f4e464c494354202869642920444f205550444154450a534554207661745f72617465203d204558434c554445442e7661745f7261746500000054555044415445207075626c69632e736974655f73657474696e67730a534554207661745f72617465203d20302e30310a5748455245207661745f726174652049532044495354494e43542046524f4d20302e303100000192444f2024240a4445434c4152450a20202020765f70726f632072656770726f6365647572653b0a20202020765f73716c20746578743b0a424547494e0a20202020765f70726f63203a3d20746f5f72656770726f63656475726528277075626c69632e6372656174655f6f72646572286a736f6e622c757569642c746578742c746578742927293b0a0a20202020494620765f70726f63204953204e4f54204e554c4c205448454e0a202020202020202053454c4543542070675f6765745f66756e6374696f6e64656628765f70726f632920494e544f20765f73716c3b0a0a2020202020202020765f73716c203a3d207265706c616365280a202020202020202020202020765f73716c2c0a20202020202020202020202027434f414c45534345287661745f726174652c20302e323029272c0a20202020202020202020202027434f414c45534345287661745f726174652c20302e303129270a2020202020202020293b0a0a20202020202020204558454355544520765f73716c3b0a20202020454e442049463b0a454e443b0a2424000001a6444f2024240a4445434c4152450a20202020765f70726f632072656770726f6365647572653b0a20202020765f73716c20746578743b0a424547494e0a20202020765f70726f63203a3d20746f5f72656770726f63656475726528277075626c69632e76616c69646174655f636865636b6f757428746578742c696e74656765722c746578742927293b0a0a20202020494620765f70726f63204953204e4f54204e554c4c205448454e0a202020202020202053454c4543542070675f6765745f66756e6374696f6e64656628765f70726f632920494e544f20765f73716c3b0a0a2020202020202020765f73716c203a3d207265706c616365280a202020202020202020202020765f73716c2c0a20202020202020202020202027765f7661745f7261746520444543494d414c28352c203429203a3d20302e32303b272c0a20202020202020202020202027765f7661745f7261746520444543494d414c28352c203429203a3d20302e30313b270a2020202020202020293b0a0a20202020202020204558454355544520765f73716c3b0a20202020454e442049463b0a454e443b0a242400000245444f2024240a4445434c4152450a20202020765f70726f632072656770726f6365647572653b0a20202020765f73716c20746578743b0a424547494e0a20202020765f70726f63203a3d20746f5f72656770726f63656475726528277075626c69632e63616c63756c6174655f6f726465725f71756f74655f763128757569642c6a736f6e622c757569642c746578742c696e74656765722c746578742927293b0a0a20202020494620765f70726f63204953204e4f54204e554c4c205448454e0a202020202020202053454c4543542070675f6765745f66756e6374696f6e64656628765f70726f632920494e544f20765f73716c3b0a0a2020202020202020765f73716c203a3d207265706c616365280a202020202020202020202020765f73716c2c0a20202020202020202020202027765f7661745f72617465204e554d455249432831302c3429203a3d20302e32303b272c0a20202020202020202020202027765f7661745f72617465204e554d455249432831302c3429203a3d20302e30313b270a2020202020202020293b0a0a2020202020202020765f73716c203a3d207265706c616365280a202020202020202020202020765f73716c2c0a20202020202020202020202027434f414c45534345287661745f726174652c20302e323029272c0a20202020202020202020202027434f414c45534345287661745f726174652c20302e303129270a2020202020202020293b0a0a20202020202020204558454355544520765f73716c3b0a20202020454e442049463b0a454e443b0a24240000009d555044415445207075626c69632e656d61696c5f74656d706c617465730a53455420636f6e74656e745f68746d6c203d205245504c41434528636f6e74656e745f68746d6c2c20274b4456202825323029272c20274b4456202825312927292c0a20202020757064617465645f6174203d204e4f5728290a574845524520636f6e74656e745f68746d6c204c494b452027254b4456202825323029252700000006434f4d4d4954"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"BEGIN"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"ALTER TABLE"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"UPDATE 0"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"UPDATE 0"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"COMMIT"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260224105130_reconcile_installment_rates_policy_and_order_rpcs.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"set check_function_bodies = off","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"do $$\nbegin\n  if exists (\n    select 1\n    from pg_policies\n    where schemaname = 'public'\n      and tablename = 'installment_rates'\n      and policyname = 'Users read installment rates'\n  ) then\n    drop policy \"Users read installment rates\" on public.installment_rates;\n  end if;\nend\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.calculate_order_quote_v1(p_user_id uuid, p_items jsonb, p_shipping_address_id uuid, p_payment_method text DEFAULT 'credit_card'::text, p_installment_number integer DEFAULT 1, p_promo_code text DEFAULT NULL::text)\n RETURNS jsonb\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public', 'pg_catalog'\nAS $function$\nDECLARE\n    v_role TEXT;\n    v_user_id UUID;\n    v_profile_complete BOOLEAN;\n    v_phone TEXT;\n    v_address_owner UUID;\n    v_item JSONB;\n    v_product_id UUID;\n    v_product_name TEXT;\n    v_product_price NUMERIC(12,2);\n    v_product_stock INTEGER;\n    v_reserved_stock INTEGER;\n    v_available_stock INTEGER;\n    v_qty INTEGER;\n    v_item_unit_cents BIGINT;\n    v_item_line_cents BIGINT;\n    v_item_total_cents BIGINT := 0;\n    v_vat_rate NUMERIC(10,4) := 0.01;\n    v_shipping_cost NUMERIC(10,2) := 49.90;\n    v_shipping_threshold NUMERIC(12,2) := 1500.00;\n    v_vat_total_cents BIGINT := 0;\n    v_shipping_total_cents BIGINT := 0;\n    v_discount_total_cents BIGINT := 0;\n    v_pre_shipping_total_cents BIGINT := 0;\n    v_base_total_cents BIGINT := 0;\n    v_commission_rate NUMERIC(5,2) := 0;\n    v_commission_amount_cents BIGINT := 0;\n    v_paid_total_cents BIGINT := 0;\n    v_rate_updated_at TIMESTAMPTZ;\n    v_promo_result JSON;\n    v_cart_snapshot JSONB := '[]'::jsonb;\nBEGIN\n    v_role := COALESCE(NULLIF(current_setting('request.jwt.claim.role', TRUE), ''), auth.role(), 'service_role');\n    IF v_role = 'service_role' THEN\n        v_user_id := p_user_id;\n    ELSE\n        v_user_id := auth.uid();\n    END IF;\n\n    IF v_user_id IS NULL THEN\n        RETURN jsonb_build_object(\n            'success', FALSE,\n            'error', 'UNAUTHORIZED',\n            'message', 'Oturum gerekli'\n        );\n    END IF;\n\n    SELECT profile_complete, phone\n    INTO v_profile_complete, v_phone\n    FROM public.profiles\n    WHERE id = v_user_id;\n\n    IF v_profile_complete IS NULL OR v_profile_complete = false THEN\n        RETURN jsonb_build_object(\n            'success', FALSE,\n            'error', 'PROFILE_INCOMPLETE',\n            'message', 'Sipari vermek iin profilinizi tamamlamanz gerekiyor'\n        );\n    END IF;\n\n    IF v_phone IS NULL OR length(regexp_replace(v_phone, '\\\\D', '', 'g')) \u003c 10 THEN\n        RETURN jsonb_build_object(\n            'success', FALSE,\n            'error', 'PHONE_REQUIRED',\n            'message', 'Sipari vermek iin geerli bir telefon numaras gereklidir'\n        );\n    END IF;\n\n    IF p_items IS NULL OR jsonb_typeof(p_items) \u003c\u003e 'array' OR jsonb_array_length(p_items) = 0 THEN\n        RETURN jsonb_build_object(\n            'success', FALSE,\n            'error', 'EMPTY_CART',\n            'message', 'Sepet bos olamaz'\n        );\n    END IF;\n\n    SELECT user_id\n    INTO v_address_owner\n    FROM public.addresses\n    WHERE id = p_shipping_address_id;\n\n    IF v_address_owner IS NULL OR v_address_owner \u003c\u003e v_user_id THEN\n        RETURN jsonb_build_object(\n            'success', FALSE,\n            'error', 'INVALID_ADDRESS',\n            'message', 'Gecersiz adres secimi'\n        );\n    END IF;\n\n    IF p_payment_method NOT IN ('credit_card', 'bank_transfer') THEN\n        RETURN jsonb_build_object(\n            'success', FALSE,\n            'error', 'INVALID_PAYMENT_METHOD',\n            'message', 'Gecersiz odeme yontemi'\n        );\n    END IF;\n\n    IF p_payment_method = 'credit_card' AND (p_installment_number \u003c 1 OR p_installment_number \u003e 12) THEN\n        RETURN jsonb_build_object(\n            'success', FALSE,\n            'error', 'INVALID_INSTALLMENT',\n            'message', 'Gecersiz taksit sayisi'\n        );\n    END IF;\n\n    SELECT\n        COALESCE(vat_rate, 0.01),\n        COALESCE(shipping_cost, 49.90),\n        COALESCE(free_shipping_threshold, 1500.00)\n    INTO v_vat_rate, v_shipping_cost, v_shipping_threshold\n    FROM public.site_settings\n    WHERE id = 1;\n\n    FOR v_item IN SELECT * FROM jsonb_array_elements(p_items)\n    LOOP\n        v_product_id := (v_item-\u003e\u003e'product_id')::uuid;\n        v_qty := COALESCE((v_item-\u003e\u003e'quantity')::integer, 0);\n\n        IF v_product_id IS NULL OR v_qty \u003c= 0 THEN\n            RETURN jsonb_build_object(\n                'success', FALSE,\n                'error', 'INVALID_CART_ITEM',\n                'message', 'Sepet ogesi gecersiz'\n            );\n        END IF;\n\n        SELECT\n            p.name,\n            p.price,\n            p.stock,\n            COALESCE(p.reserved_stock, 0)\n        INTO\n            v_product_name,\n            v_product_price,\n            v_product_stock,\n            v_reserved_stock\n        FROM public.products p\n        WHERE p.id = v_product_id;\n\n        IF NOT FOUND THEN\n            RETURN jsonb_build_object(\n                'success', FALSE,\n                'error', 'PRODUCT_NOT_FOUND',\n                'message', 'Urun bulunamadi'\n            );\n        END IF;\n\n        v_available_stock := v_product_stock - v_reserved_stock;\n        IF v_available_stock \u003c v_qty THEN\n            RETURN jsonb_build_object(\n                'success', FALSE,\n                'error', 'INSUFFICIENT_STOCK',\n                'message', 'Yetersiz stok',\n                'product_id', v_product_id\n            );\n        END IF;\n\n        v_item_unit_cents := ROUND(v_product_price * 100)::bigint;\n        v_item_line_cents := v_item_unit_cents * v_qty;\n        v_item_total_cents := v_item_total_cents + v_item_line_cents;\n\n        v_cart_snapshot := v_cart_snapshot || jsonb_build_array(\n            jsonb_build_object(\n                'product_id', v_product_id,\n                'product_name', v_product_name,\n                'quantity', v_qty,\n                'unit_price_cents', v_item_unit_cents,\n                'unit_price', ROUND(v_item_unit_cents::numeric / 100, 2),\n                'subtotal_cents', v_item_line_cents,\n                'subtotal', ROUND(v_item_line_cents::numeric / 100, 2),\n                'line_total_cents', v_item_line_cents,\n                'line_total', ROUND(v_item_line_cents::numeric / 100, 2)\n            )\n        );\n    END LOOP;\n\n    v_vat_total_cents := ROUND(v_item_total_cents * v_vat_rate)::bigint;\n\n    IF p_promo_code IS NOT NULL AND LENGTH(TRIM(p_promo_code)) \u003e 0 THEN\n        BEGIN\n            SELECT verify_promo_code(p_promo_code) INTO v_promo_result;\n            IF COALESCE((v_promo_result-\u003e\u003e'valid')::boolean, FALSE) THEN\n                IF (v_promo_result-\u003e\u003e'discount_type') = 'percentage' THEN\n                    v_discount_total_cents := ROUND(\n                        (v_item_total_cents + v_vat_total_cents) *\n                        (COALESCE((v_promo_result-\u003e\u003e'discount_value')::numeric, 0) / 100.0)\n                    )::bigint;\n                ELSE\n                    v_discount_total_cents := ROUND(\n                        COALESCE((v_promo_result-\u003e\u003e'discount_value')::numeric, 0) * 100\n                    )::bigint;\n                END IF;\n\n                IF (v_promo_result-\u003e\u003e'max_discount_amount') IS NOT NULL THEN\n                    v_discount_total_cents := LEAST(\n                        v_discount_total_cents,\n                        ROUND((v_promo_result-\u003e\u003e'max_discount_amount')::numeric * 100)::bigint\n                    );\n                END IF;\n            END IF;\n        EXCEPTION WHEN OTHERS THEN\n            v_discount_total_cents := 0;\n        END;\n    END IF;\n\n    v_pre_shipping_total_cents := GREATEST(v_item_total_cents + v_vat_total_cents - v_discount_total_cents, 0);\n    IF v_pre_shipping_total_cents \u003e= ROUND(v_shipping_threshold * 100)::bigint THEN\n        v_shipping_total_cents := 0;\n    ELSE\n        v_shipping_total_cents := ROUND(v_shipping_cost * 100)::bigint;\n    END IF;\n\n    v_base_total_cents := v_pre_shipping_total_cents + v_shipping_total_cents;\n\n    IF p_payment_method = 'credit_card' THEN\n        SELECT commission_rate, updated_at\n        INTO v_commission_rate, v_rate_updated_at\n        FROM public.installment_rates\n        WHERE installment_number = p_installment_number\n          AND is_active = TRUE\n        LIMIT 1;\n\n        IF NOT FOUND THEN\n            RETURN jsonb_build_object(\n                'success', FALSE,\n                'error', 'INSTALLMENT_NOT_ACTIVE',\n                'message', 'Secilen taksit aktif degil'\n            );\n        END IF;\n\n        v_commission_amount_cents := ROUND(v_base_total_cents * (v_commission_rate / 100.0))::bigint;\n    ELSE\n        v_commission_rate := 0;\n        v_rate_updated_at := NOW();\n        v_commission_amount_cents := 0;\n    END IF;\n\n    v_paid_total_cents := v_base_total_cents + v_commission_amount_cents;\n\n    RETURN jsonb_build_object(\n        'success', TRUE,\n        'message', 'Quote olusturuldu',\n        'payment_method', p_payment_method,\n        'shipping_address_id', p_shipping_address_id,\n        'installment_number', CASE WHEN p_payment_method = 'credit_card' THEN p_installment_number ELSE 1 END,\n        'item_total_cents', v_item_total_cents,\n        'vat_total_cents', v_vat_total_cents,\n        'shipping_total_cents', v_shipping_total_cents,\n        'discount_total_cents', v_discount_total_cents,\n        'base_total_cents', v_base_total_cents,\n        'commission_rate', v_commission_rate,\n        'commission_amount_cents', v_commission_amount_cents,\n        'paid_total_cents', v_paid_total_cents,\n        'currency', 'TL',\n        'rate_version', 'v1',\n        'effective_from', v_rate_updated_at,\n        'cart_snapshot', v_cart_snapshot\n    );\nEND;\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.create_order(p_items jsonb, p_shipping_address_id uuid, p_payment_method text, p_promo_code text DEFAULT NULL::text)\n RETURNS jsonb\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public', 'pg_catalog'\nAS $function$\nDECLARE\n    v_user_id UUID;\n    v_profile_complete BOOLEAN;\n    v_phone TEXT;\n    v_item JSONB;\n    v_product_id UUID;\n    v_product_name TEXT;\n    v_product_price DECIMAL(10,2);\n    v_product_stock INT;\n    v_qty INT;\n    v_item_subtotal DECIMAL(10,2);\n    v_total_subtotal DECIMAL(10,2) := 0;\n    v_total_vat DECIMAL(10,2) := 0;\n    v_shipping_cost DECIMAL(10,2);\n    v_vat_rate DECIMAL(10,4);\n    v_shipping_threshold DECIMAL(12,2);\n    v_final_total DECIMAL(10,2);\n    v_discount DECIMAL(10,2) := 0;\n    v_order_id UUID;\n    v_valid_items JSONB := '[]'::JSONB;\n    v_item_detail JSONB;\n    v_order_details JSONB;\n    v_bank_ref TEXT := NULL;\n    v_address_owner UUID;\n    v_promo_result JSON;\n    v_item_total_cents BIGINT := 0;\n    v_vat_total_cents BIGINT := 0;\n    v_shipping_total_cents BIGINT := 0;\n    v_discount_total_cents BIGINT := 0;\n    v_paid_total_cents BIGINT := 0;\nBEGIN\n    IF p_payment_method \u003c\u003e 'bank_transfer' THEN\n        RETURN jsonb_build_object(\n            'success', false,\n            'error', 'INVALID_PAYMENT_METHOD',\n            'message', 'Kart odemeleri yeni 3D akisi ile alinmaktadir. Lutfen kart odeme endpointini kullanin.'\n        );\n    END IF;\n\n    v_user_id := auth.uid();\n    IF v_user_id IS NULL THEN\n        RETURN jsonb_build_object(\n            'success', false,\n            'error', 'UNAUTHORIZED',\n            'message', 'Oturum amanz gerekiyor'\n        );\n    END IF;\n\n    SELECT profile_complete, phone\n    INTO v_profile_complete, v_phone\n    FROM public.profiles\n    WHERE id = v_user_id;\n\n    IF v_profile_complete IS NULL OR v_profile_complete = false THEN\n        RETURN jsonb_build_object(\n            'success', false,\n            'error', 'PROFILE_INCOMPLETE',\n            'message', 'Sipari vermek iin profilinizi tamamlamanz gerekiyor'\n        );\n    END IF;\n\n    IF v_phone IS NULL OR length(regexp_replace(v_phone, '\\\\D', '', 'g')) \u003c 10 THEN\n        RETURN jsonb_build_object(\n            'success', false,\n            'error', 'PHONE_REQUIRED',\n            'message', 'Sipari vermek iin geerli bir telefon numaras gereklidir'\n        );\n    END IF;\n\n    SELECT user_id INTO v_address_owner\n    FROM public.addresses\n    WHERE id = p_shipping_address_id;\n\n    IF v_address_owner IS NULL OR v_address_owner \u003c\u003e v_user_id THEN\n        RETURN jsonb_build_object(\n            'success', false,\n            'error', 'INVALID_ADDRESS',\n            'message', 'Geersiz adres seimi: Adres size ait deil.'\n        );\n    END IF;\n\n    FOR v_item IN SELECT * FROM jsonb_array_elements(p_items)\n    LOOP\n        v_product_id := (v_item-\u003e\u003e'product_id')::UUID;\n        v_qty := (v_item-\u003e\u003e'quantity')::INT;\n\n        IF v_qty \u003c= 0 THEN\n            RETURN jsonb_build_object(\n                'success', false,\n                'error', 'INVALID_QUANTITY',\n                'message', 'Geersiz rn miktar: 0 veya negatif olamaz.'\n            );\n        END IF;\n\n        SELECT id, name, price, stock\n        INTO v_product_id, v_product_name, v_product_price, v_product_stock\n        FROM public.products\n        WHERE id = v_product_id\n        FOR UPDATE;\n\n        IF NOT FOUND THEN\n            RETURN jsonb_build_object(\n                'success', false,\n                'error', 'PRODUCT_NOT_FOUND',\n                'message', 'rn bulunamad: ID ' || v_product_id\n            );\n        END IF;\n\n        IF v_product_stock \u003c v_qty THEN\n            RETURN jsonb_build_object(\n                'success', false,\n                'error', 'INSUFFICIENT_STOCK',\n                'message', 'Yetersiz stok: ' || v_product_name\n            );\n        END IF;\n\n        v_item_subtotal := v_product_price * v_qty;\n        v_total_subtotal := v_total_subtotal + v_item_subtotal;\n\n        v_item_detail := jsonb_build_object(\n            'product_id', v_product_id,\n            'product_name', v_product_name,\n            'quantity', v_qty,\n            'unit_price', v_product_price,\n            'subtotal', v_item_subtotal\n        );\n\n        v_valid_items := v_valid_items || v_item_detail;\n    END LOOP;\n\n    SELECT\n        COALESCE(vat_rate, 0.01),\n        COALESCE(shipping_cost, 49.90),\n        COALESCE(free_shipping_threshold, 1500.0)\n    INTO v_vat_rate, v_shipping_cost, v_shipping_threshold\n    FROM public.site_settings\n    WHERE id = 1;\n\n    v_total_vat := v_total_subtotal * v_vat_rate;\n\n    IF p_promo_code IS NOT NULL AND length(p_promo_code) \u003e 0 THEN\n        BEGIN\n            SELECT public.verify_promo_code(p_promo_code) INTO v_promo_result;\n\n            IF (v_promo_result-\u003e\u003e'valid')::boolean = true THEN\n                IF (v_promo_result-\u003e\u003e'discount_type') = 'percentage' THEN\n                    v_discount := (v_total_subtotal + v_total_vat) * ((v_promo_result-\u003e\u003e'discount_value')::decimal / 100);\n                    IF (v_promo_result-\u003e\u003e'max_discount_amount') IS NOT NULL\n                        AND v_discount \u003e (v_promo_result-\u003e\u003e'max_discount_amount')::decimal\n                    THEN\n                        v_discount := (v_promo_result-\u003e\u003e'max_discount_amount')::decimal;\n                    END IF;\n                ELSE\n                    v_discount := (v_promo_result-\u003e\u003e'discount_value')::decimal;\n                END IF;\n            END IF;\n        EXCEPTION WHEN OTHERS THEN\n            v_discount := 0;\n        END;\n    END IF;\n\n    IF (v_total_subtotal + v_total_vat - v_discount) \u003e= v_shipping_threshold THEN\n        v_shipping_cost := 0;\n    END IF;\n\n    v_final_total := v_total_subtotal + v_total_vat + v_shipping_cost - v_discount;\n    IF v_final_total \u003c 0 THEN\n        v_final_total := 0;\n    END IF;\n\n    v_item_total_cents := ROUND(v_total_subtotal * 100)::bigint;\n    v_vat_total_cents := ROUND(v_total_vat * 100)::bigint;\n    v_shipping_total_cents := ROUND(v_shipping_cost * 100)::bigint;\n    v_discount_total_cents := ROUND(v_discount * 100)::bigint;\n    v_paid_total_cents := ROUND(v_final_total * 100)::bigint;\n\n    v_bank_ref := 'BRV-' || to_char(public.now(), 'YYMMDD') || '-' || upper(substring(md5(random()::text) from 1 for 4));\n\n    v_order_details := jsonb_build_object(\n        'items', v_valid_items,\n        'subtotal', v_total_subtotal,\n        'vat_rate', v_vat_rate,\n        'vat_amount', v_total_vat,\n        'shipping_cost', v_shipping_cost,\n        'total', v_final_total,\n        'promo_code', p_promo_code,\n        'discount', v_discount,\n        'bank_reference', v_bank_ref\n    );\n\n    INSERT INTO public.orders (\n        user_id,\n        shipping_address_id,\n        payment_method,\n        status,\n        payment_status,\n        order_details,\n        currency,\n        installment_number,\n        item_total_cents,\n        vat_total_cents,\n        shipping_total_cents,\n        discount_total_cents,\n        commission_amount_cents,\n        paid_total_cents,\n        promo_code,\n        bank_reference\n    ) VALUES (\n        v_user_id,\n        p_shipping_address_id,\n        'bank_transfer',\n        'pending',\n        'pending',\n        v_order_details,\n        'TL',\n        1,\n        v_item_total_cents,\n        v_vat_total_cents,\n        v_shipping_total_cents,\n        v_discount_total_cents,\n        0,\n        v_paid_total_cents,\n        p_promo_code,\n        v_bank_ref\n    ) RETURNING id INTO v_order_id;\n\n    BEGIN\n        INSERT INTO public.order_status_history (order_id, status, note, created_at)\n        VALUES (\n            v_order_id,\n            'pending',\n            'Sipari alnd (Havale/EFT Bekleniyor)',\n            public.now()\n        );\n    EXCEPTION WHEN OTHERS THEN\n        NULL;\n    END;\n\n    RETURN jsonb_build_object(\n        'success', true,\n        'order_id', v_order_id,\n        'total', v_final_total,\n        'shipping_cost', v_shipping_cost,\n        'bank_reference', v_bank_ref,\n        'message', 'Sipari baaryla oluturuldu'\n    );\nEXCEPTION WHEN OTHERS THEN\n    RETURN jsonb_build_object(\n        'success', false,\n        'error', 'SERVER_ERROR',\n        'message', 'Sipari oluturulurken beklenmeyen bir hata olutu. Ltfen tekrar deneyiniz.'\n    );\nEND;\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.finalize_intent_create_order_v1(p_intent_id uuid, p_gateway_result jsonb DEFAULT '{}'::jsonb)\n RETURNS jsonb\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public', 'pg_catalog'\nAS $function$\nDECLARE\n    v_role TEXT;\n    v_intent RECORD;\n    v_profile_complete BOOLEAN;\n    v_phone TEXT;\n    v_existing_order_id UUID;\n    v_reservation RECORD;\n    v_product RECORD;\n    v_order_id UUID;\n    v_gateway_status TEXT;\n    v_gateway_trx_code TEXT;\n    v_order_details JSONB;\n    v_history_note TEXT;\n    v_active_reservation_count INTEGER := 0;\nBEGIN\n    v_role := COALESCE(NULLIF(current_setting('request.jwt.claim.role', TRUE), ''), auth.role(), 'service_role');\n    IF v_role \u003c\u003e 'service_role' THEN\n        RAISE EXCEPTION 'forbidden';\n    END IF;\n\n    SELECT *\n    INTO v_intent\n    FROM public.payment_intents\n    WHERE id = p_intent_id\n    FOR UPDATE;\n\n    IF NOT FOUND THEN\n        RAISE EXCEPTION 'intent_not_found';\n    END IF;\n\n    IF v_intent.status = 'paid' THEN\n        SELECT id\n        INTO v_existing_order_id\n        FROM public.orders\n        WHERE payment_intent_id = p_intent_id\n        LIMIT 1;\n\n        RETURN jsonb_build_object(\n            'success', TRUE,\n            'order_id', v_existing_order_id,\n            'already_paid', TRUE\n        );\n    END IF;\n\n    SELECT profile_complete, phone\n    INTO v_profile_complete, v_phone\n    FROM public.profiles\n    WHERE id = v_intent.user_id;\n\n    IF v_profile_complete IS NULL OR v_profile_complete = false THEN\n        RETURN jsonb_build_object(\n            'success', FALSE,\n            'error', 'PROFILE_INCOMPLETE',\n            'message', 'Sipari vermek iin profilinizi tamamlamanz gerekiyor'\n        );\n    END IF;\n\n    IF v_phone IS NULL OR length(regexp_replace(v_phone, '\\\\D', '', 'g')) \u003c 10 THEN\n        RETURN jsonb_build_object(\n            'success', FALSE,\n            'error', 'PHONE_REQUIRED',\n            'message', 'Sipari vermek iin geerli bir telefon numaras gereklidir'\n        );\n    END IF;\n\n    IF v_intent.status NOT IN ('pending', 'awaiting_3d') THEN\n        RAISE EXCEPTION 'intent_status_invalid';\n    END IF;\n\n    IF v_intent.currency \u003c\u003e 'TL' THEN\n        RAISE EXCEPTION 'currency_mismatch';\n    END IF;\n\n    SELECT COUNT(*)\n    INTO v_active_reservation_count\n    FROM public.stock_reservations\n    WHERE intent_id = p_intent_id\n      AND released_at IS NULL;\n\n    IF v_active_reservation_count = 0 THEN\n        RAISE EXCEPTION 'no_active_reservations';\n    END IF;\n\n    FOR v_reservation IN\n        SELECT id, product_id, qty\n        FROM public.stock_reservations\n        WHERE intent_id = p_intent_id\n          AND released_at IS NULL\n        FOR UPDATE\n    LOOP\n        SELECT id, stock, COALESCE(reserved_stock, 0) AS reserved_stock\n        INTO v_product\n        FROM public.products\n        WHERE id = v_reservation.product_id\n        FOR UPDATE;\n\n        IF NOT FOUND THEN\n            RAISE EXCEPTION 'product_not_found';\n        END IF;\n\n        IF v_product.reserved_stock \u003c v_reservation.qty OR v_product.stock \u003c v_reservation.qty THEN\n            RAISE EXCEPTION 'reservation_state_invalid';\n        END IF;\n\n        UPDATE public.products\n        SET\n            stock = stock - v_reservation.qty,\n            reserved_stock = GREATEST(COALESCE(reserved_stock, 0) - v_reservation.qty, 0)\n        WHERE id = v_reservation.product_id;\n    END LOOP;\n\n    v_order_details := jsonb_build_object(\n        'items', v_intent.cart_snapshot,\n        'subtotal', ROUND(v_intent.item_total_cents::numeric / 100, 2),\n        'vat_amount', ROUND(v_intent.vat_total_cents::numeric / 100, 2),\n        'shipping_cost', ROUND(v_intent.shipping_total_cents::numeric / 100, 2),\n        'discount', ROUND(v_intent.discount_total_cents::numeric / 100, 2),\n        'commission_amount', ROUND(v_intent.commission_amount_cents::numeric / 100, 2),\n        'total', ROUND(v_intent.paid_total_cents::numeric / 100, 2),\n        'currency', 'TL',\n        'installment_number', v_intent.installment_number\n    );\n\n    INSERT INTO public.orders (\n        user_id,\n        shipping_address_id,\n        payment_method,\n        payment_status,\n        status,\n        order_details,\n        payment_intent_id,\n        currency,\n        installment_number,\n        item_total_cents,\n        vat_total_cents,\n        shipping_total_cents,\n        discount_total_cents,\n        commission_amount_cents,\n        paid_total_cents\n    )\n    VALUES (\n        v_intent.user_id,\n        v_intent.shipping_address_id,\n        'credit_card',\n        'paid',\n        'processing',\n        v_order_details,\n        v_intent.id,\n        'TL',\n        v_intent.installment_number,\n        v_intent.item_total_cents,\n        v_intent.vat_total_cents,\n        v_intent.shipping_total_cents,\n        v_intent.discount_total_cents,\n        v_intent.commission_amount_cents,\n        v_intent.paid_total_cents\n    )\n    RETURNING id INTO v_order_id;\n\n    v_history_note := 'Kart odemesi onaylandi ve siparis olusturuldu';\n    INSERT INTO public.order_status_history (order_id, status, note, created_at)\n    VALUES (v_order_id, 'processing', v_history_note, NOW());\n\n    UPDATE public.stock_reservations\n    SET released_at = NOW()\n    WHERE intent_id = p_intent_id\n      AND released_at IS NULL;\n\n    v_gateway_status := COALESCE(\n        p_gateway_result-\u003e\u003e'gateway_status',\n        p_gateway_result-\u003e\u003e'resultCode',\n        p_gateway_result-\u003e\u003e'result_code',\n        'success'\n    );\n    v_gateway_trx_code := COALESCE(\n        p_gateway_result-\u003e\u003e'gateway_trx_code',\n        p_gateway_result-\u003e\u003e'trxCode',\n        p_gateway_result-\u003e\u003e'trx_code',\n        v_intent.gateway_trx_code\n    );\n\n    UPDATE public.payment_intents\n    SET\n        status = 'paid',\n        gateway_status = v_gateway_status,\n        gateway_trx_code = v_gateway_trx_code,\n        updated_at = NOW()\n    WHERE id = p_intent_id;\n\n    RETURN jsonb_build_object(\n        'success', TRUE,\n        'order_id', v_order_id,\n        'already_paid', FALSE\n    );\nEND;\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.validate_checkout(p_product_slug text, p_quantity integer, p_promo_code text DEFAULT NULL::text)\n RETURNS json\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public', 'pg_catalog'\nAS $function$\nDECLARE\n    v_user_id UUID;\n    v_profile_complete BOOLEAN;\n    v_phone TEXT;\n    v_product RECORD;\n    v_subtotal DECIMAL(10, 2);\n    v_vat_rate DECIMAL(5, 4) := 0.01;\n    v_vat_amount DECIMAL(10, 2);\n    v_total DECIMAL(10, 2);\n    v_order_id UUID;\nBEGIN\n    v_user_id := auth.uid();\n\n    IF v_user_id IS NULL THEN\n        RETURN json_build_object(\n            'success', false,\n            'error', 'UNAUTHORIZED',\n            'message', 'Oturum amanz gerekiyor'\n        );\n    END IF;\n\n    SELECT profile_complete, phone\n    INTO v_profile_complete, v_phone\n    FROM public.profiles\n    WHERE id = v_user_id;\n\n    IF v_profile_complete IS NULL OR v_profile_complete = false THEN\n        RETURN json_build_object(\n            'success', false,\n            'error', 'PROFILE_INCOMPLETE',\n            'message', 'Sipari vermek iin profilinizi tamamlamanz gerekiyor'\n        );\n    END IF;\n\n    IF v_phone IS NULL OR length(regexp_replace(v_phone, '\\\\D', '', 'g')) \u003c 10 THEN\n        RETURN json_build_object(\n            'success', false,\n            'error', 'PHONE_REQUIRED',\n            'message', 'Sipari vermek iin geerli bir telefon numaras gereklidir'\n        );\n    END IF;\n\n    SELECT * INTO v_product\n    FROM products\n    WHERE slug = p_product_slug AND is_active = true;\n\n    IF v_product IS NULL THEN\n        RETURN json_build_object(\n            'success', false,\n            'error', 'PRODUCT_NOT_FOUND',\n            'message', 'rn bulunamad veya satta deil'\n        );\n    END IF;\n\n    IF p_quantity \u003c 1 OR p_quantity \u003e 10 THEN\n        RETURN json_build_object(\n            'success', false,\n            'error', 'INVALID_QUANTITY',\n            'message', 'Geersiz miktar (1-10 aras olmal)'\n        );\n    END IF;\n\n    IF v_product.stock \u003c p_quantity THEN\n        RETURN json_build_object(\n            'success', false,\n            'error', 'INSUFFICIENT_STOCK',\n            'message', 'Yeterli stok yok. Mevcut stok: ' || v_product.stock\n        );\n    END IF;\n\n    v_subtotal := v_product.price * p_quantity;\n    v_vat_amount := v_subtotal * v_vat_rate;\n    v_total := v_subtotal + v_vat_amount;\n\n    INSERT INTO orders (\n        user_id,\n        product_id,\n        quantity,\n        unit_price,\n        subtotal,\n        vat_amount,\n        total,\n        status,\n        promo_code\n    ) VALUES (\n        v_user_id,\n        v_product.id,\n        p_quantity,\n        v_product.price,\n        v_subtotal,\n        v_vat_amount,\n        v_total,\n        'pending',\n        p_promo_code\n    )\n    RETURNING id INTO v_order_id;\n\n    UPDATE products\n    SET stock = stock - p_quantity\n    WHERE id = v_product.id;\n\n    RETURN json_build_object(\n        'success', true,\n        'order_id', v_order_id,\n        'product_name', v_product.name,\n        'quantity', p_quantity,\n        'unit_price', v_product.price,\n        'subtotal', v_subtotal,\n        'vat_amount', v_vat_amount,\n        'total', v_total,\n        'message', 'Sipari baaryla oluturuldu'\n    );\nEXCEPTION\n    WHEN OTHERS THEN\n        RETURN json_build_object(\n            'success', false,\n            'error', 'SERVER_ERROR',\n            'message', 'lem srasnda bir hata olutu. Ltfen tekrar deneyin.'\n        );\nEND;\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"do $$\nbegin\n  if not exists (\n    select 1\n    from pg_policies\n    where schemaname = 'public'\n      and tablename = 'installment_rates'\n      and policyname = 'Allow public read access to installment rates'\n  ) then\n    create policy \"Allow public read access to installment rates\"\n    on public.installment_rates\n    as permissive\n    for select\n    to public\n    using (true);\n  end if;\nend\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260224105130"},{"text":"reconcile_installment_rates_policy_and_order_rpcs"},{"binary":"00000001000000000000001900000007000000010000001f73657420636865636b5f66756e6374696f6e5f626f64696573203d206f666600000121646f2024240a626567696e0a202069662065786973747320280a2020202073656c65637420310a2020202066726f6d2070675f706f6c69636965730a20202020776865726520736368656d616e616d65203d20277075626c6963270a202020202020616e64207461626c656e616d65203d2027696e7374616c6c6d656e745f7261746573270a202020202020616e6420706f6c6963796e616d65203d20275573657273207265616420696e7374616c6c6d656e74207261746573270a202029207468656e0a2020202064726f7020706f6c69637920225573657273207265616420696e7374616c6c6d656e7420726174657322206f6e207075626c69632e696e7374616c6c6d656e745f72617465733b0a2020656e642069663b0a656e640a2424000024de435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e63616c63756c6174655f6f726465725f71756f74655f763128705f757365725f696420757569642c20705f6974656d73206a736f6e622c20705f7368697070696e675f616464726573735f696420757569642c20705f7061796d656e745f6d6574686f6420746578742044454641554c5420276372656469745f63617264273a3a746578742c20705f696e7374616c6c6d656e745f6e756d62657220696e74656765722044454641554c5420312c20705f70726f6d6f5f636f646520746578742044454641554c54204e554c4c3a3a74657874290a2052455455524e53206a736f6e620a204c414e475541474520706c706773716c0a20534543555249545920444546494e45520a20534554207365617263685f7061746820544f20277075626c6963272c202770675f636174616c6f67270a4153202466756e6374696f6e240a4445434c4152450a20202020765f726f6c6520544558543b0a20202020765f757365725f696420555549443b0a20202020765f70726f66696c655f636f6d706c65746520424f4f4c45414e3b0a20202020765f70686f6e6520544558543b0a20202020765f616464726573735f6f776e657220555549443b0a20202020765f6974656d204a534f4e423b0a20202020765f70726f647563745f696420555549443b0a20202020765f70726f647563745f6e616d6520544558543b0a20202020765f70726f647563745f7072696365204e554d455249432831322c32293b0a20202020765f70726f647563745f73746f636b20494e54454745523b0a20202020765f72657365727665645f73746f636b20494e54454745523b0a20202020765f617661696c61626c655f73746f636b20494e54454745523b0a20202020765f71747920494e54454745523b0a20202020765f6974656d5f756e69745f63656e747320424947494e543b0a20202020765f6974656d5f6c696e655f63656e747320424947494e543b0a20202020765f6974656d5f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f7661745f72617465204e554d455249432831302c3429203a3d20302e30313b0a20202020765f7368697070696e675f636f7374204e554d455249432831302c3229203a3d2034392e39303b0a20202020765f7368697070696e675f7468726573686f6c64204e554d455249432831322c3229203a3d20313530302e30303b0a20202020765f7661745f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f7368697070696e675f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f646973636f756e745f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f7072655f7368697070696e675f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f626173655f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f636f6d6d697373696f6e5f72617465204e554d4552494328352c3229203a3d20303b0a20202020765f636f6d6d697373696f6e5f616d6f756e745f63656e747320424947494e54203a3d20303b0a20202020765f706169645f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f726174655f757064617465645f61742054494d455354414d50545a3b0a20202020765f70726f6d6f5f726573756c74204a534f4e3b0a20202020765f636172745f736e617073686f74204a534f4e42203a3d20275b5d273a3a6a736f6e623b0a424547494e0a20202020765f726f6c65203a3d20434f414c45534345284e554c4c49462863757272656e745f73657474696e672827726571756573742e6a77742e636c61696d2e726f6c65272c2054525545292c202727292c20617574682e726f6c6528292c2027736572766963655f726f6c6527293b0a20202020494620765f726f6c65203d2027736572766963655f726f6c6527205448454e0a2020202020202020765f757365725f6964203a3d20705f757365725f69643b0a20202020454c53450a2020202020202020765f757365725f6964203a3d20617574682e75696428293b0a20202020454e442049463b0a0a20202020494620765f757365725f6964204953204e554c4c205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2046414c53452c0a202020202020202020202020276572726f72272c2027554e415554484f52495a4544272c0a202020202020202020202020276d657373616765272c20274f747572756d20676572656b6c69270a2020202020202020293b0a20202020454e442049463b0a0a2020202053454c4543542070726f66696c655f636f6d706c6574652c2070686f6e650a20202020494e544f20765f70726f66696c655f636f6d706c6574652c20765f70686f6e650a2020202046524f4d207075626c69632e70726f66696c65730a202020205748455245206964203d20765f757365725f69643b0a0a20202020494620765f70726f66696c655f636f6d706c657465204953204e554c4c204f5220765f70726f66696c655f636f6d706c657465203d2066616c7365205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2046414c53452c0a202020202020202020202020276572726f72272c202750524f46494c455f494e434f4d504c455445272c0a202020202020202020202020276d657373616765272c2027536970617269c59f207665726d656b2069c3a7696e2070726f66696c696e697a692074616d616d6c616d616ec4b17a20676572656b69796f72270a2020202020202020293b0a20202020454e442049463b0a0a20202020494620765f70686f6e65204953204e554c4c204f52206c656e677468287265676578705f7265706c61636528765f70686f6e652c20275c5c44272c2027272c202767272929203c203130205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2046414c53452c0a202020202020202020202020276572726f72272c202750484f4e455f5245515549524544272c0a202020202020202020202020276d657373616765272c2027536970617269c59f207665726d656b2069c3a7696e206765c3a765726c69206269722074656c65666f6e206e756d61726173c4b120676572656b6c69646972270a2020202020202020293b0a20202020454e442049463b0a0a20202020494620705f6974656d73204953204e554c4c204f52206a736f6e625f747970656f6628705f6974656d7329203c3e2027617272617927204f52206a736f6e625f61727261795f6c656e67746828705f6974656d7329203d2030205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2046414c53452c0a202020202020202020202020276572726f72272c2027454d5054595f43415254272c0a202020202020202020202020276d657373616765272c2027536570657420626f73206f6c616d617a270a2020202020202020293b0a20202020454e442049463b0a0a2020202053454c45435420757365725f69640a20202020494e544f20765f616464726573735f6f776e65720a2020202046524f4d207075626c69632e6164647265737365730a202020205748455245206964203d20705f7368697070696e675f616464726573735f69643b0a0a20202020494620765f616464726573735f6f776e6572204953204e554c4c204f5220765f616464726573735f6f776e6572203c3e20765f757365725f6964205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2046414c53452c0a202020202020202020202020276572726f72272c2027494e56414c49445f41444452455353272c0a202020202020202020202020276d657373616765272c2027476563657273697a20616472657320736563696d69270a2020202020202020293b0a20202020454e442049463b0a0a20202020494620705f7061796d656e745f6d6574686f64204e4f5420494e2028276372656469745f63617264272c202762616e6b5f7472616e736665722729205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2046414c53452c0a202020202020202020202020276572726f72272c2027494e56414c49445f5041594d454e545f4d4554484f44272c0a202020202020202020202020276d657373616765272c2027476563657273697a206f64656d6520796f6e74656d69270a2020202020202020293b0a20202020454e442049463b0a0a20202020494620705f7061796d656e745f6d6574686f64203d20276372656469745f636172642720414e442028705f696e7374616c6c6d656e745f6e756d626572203c2031204f5220705f696e7374616c6c6d656e745f6e756d626572203e20313229205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2046414c53452c0a202020202020202020202020276572726f72272c2027494e56414c49445f494e5354414c4c4d454e54272c0a202020202020202020202020276d657373616765272c2027476563657273697a2074616b73697420736179697369270a2020202020202020293b0a20202020454e442049463b0a0a2020202053454c4543540a2020202020202020434f414c45534345287661745f726174652c20302e3031292c0a2020202020202020434f414c45534345287368697070696e675f636f73742c2034392e3930292c0a2020202020202020434f414c4553434528667265655f7368697070696e675f7468726573686f6c642c20313530302e3030290a20202020494e544f20765f7661745f726174652c20765f7368697070696e675f636f73742c20765f7368697070696e675f7468726573686f6c640a2020202046524f4d207075626c69632e736974655f73657474696e67730a202020205748455245206964203d20313b0a0a20202020464f5220765f6974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e747328705f6974656d73290a202020204c4f4f500a2020202020202020765f70726f647563745f6964203a3d2028765f6974656d2d3e3e2770726f647563745f696427293a3a757569643b0a2020202020202020765f717479203a3d20434f414c455343452828765f6974656d2d3e3e277175616e7469747927293a3a696e74656765722c2030293b0a0a2020202020202020494620765f70726f647563745f6964204953204e554c4c204f5220765f717479203c3d2030205448454e0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a202020202020202020202020202020202773756363657373272c2046414c53452c0a20202020202020202020202020202020276572726f72272c2027494e56414c49445f434152545f4954454d272c0a20202020202020202020202020202020276d657373616765272c20275365706574206f6765736920676563657273697a270a202020202020202020202020293b0a2020202020202020454e442049463b0a0a202020202020202053454c4543540a202020202020202020202020702e6e616d652c0a202020202020202020202020702e70726963652c0a202020202020202020202020702e73746f636b2c0a202020202020202020202020434f414c4553434528702e72657365727665645f73746f636b2c2030290a2020202020202020494e544f0a202020202020202020202020765f70726f647563745f6e616d652c0a202020202020202020202020765f70726f647563745f70726963652c0a202020202020202020202020765f70726f647563745f73746f636b2c0a202020202020202020202020765f72657365727665645f73746f636b0a202020202020202046524f4d207075626c69632e70726f647563747320700a2020202020202020574845524520702e6964203d20765f70726f647563745f69643b0a0a20202020202020204946204e4f5420464f554e44205448454e0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a202020202020202020202020202020202773756363657373272c2046414c53452c0a20202020202020202020202020202020276572726f72272c202750524f445543545f4e4f545f464f554e44272c0a20202020202020202020202020202020276d657373616765272c20275572756e2062756c756e616d616469270a202020202020202020202020293b0a2020202020202020454e442049463b0a0a2020202020202020765f617661696c61626c655f73746f636b203a3d20765f70726f647563745f73746f636b202d20765f72657365727665645f73746f636b3b0a2020202020202020494620765f617661696c61626c655f73746f636b203c20765f717479205448454e0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a202020202020202020202020202020202773756363657373272c2046414c53452c0a20202020202020202020202020202020276572726f72272c2027494e53554646494349454e545f53544f434b272c0a20202020202020202020202020202020276d657373616765272c2027596574657273697a2073746f6b272c0a202020202020202020202020202020202770726f647563745f6964272c20765f70726f647563745f69640a202020202020202020202020293b0a2020202020202020454e442049463b0a0a2020202020202020765f6974656d5f756e69745f63656e7473203a3d20524f554e4428765f70726f647563745f7072696365202a20313030293a3a626967696e743b0a2020202020202020765f6974656d5f6c696e655f63656e7473203a3d20765f6974656d5f756e69745f63656e7473202a20765f7174793b0a2020202020202020765f6974656d5f746f74616c5f63656e7473203a3d20765f6974656d5f746f74616c5f63656e7473202b20765f6974656d5f6c696e655f63656e74733b0a0a2020202020202020765f636172745f736e617073686f74203a3d20765f636172745f736e617073686f74207c7c206a736f6e625f6275696c645f6172726179280a2020202020202020202020206a736f6e625f6275696c645f6f626a656374280a202020202020202020202020202020202770726f647563745f6964272c20765f70726f647563745f69642c0a202020202020202020202020202020202770726f647563745f6e616d65272c20765f70726f647563745f6e616d652c0a20202020202020202020202020202020277175616e74697479272c20765f7174792c0a2020202020202020202020202020202027756e69745f70726963655f63656e7473272c20765f6974656d5f756e69745f63656e74732c0a2020202020202020202020202020202027756e69745f7072696365272c20524f554e4428765f6974656d5f756e69745f63656e74733a3a6e756d65726963202f203130302c2032292c0a2020202020202020202020202020202027737562746f74616c5f63656e7473272c20765f6974656d5f6c696e655f63656e74732c0a2020202020202020202020202020202027737562746f74616c272c20524f554e4428765f6974656d5f6c696e655f63656e74733a3a6e756d65726963202f203130302c2032292c0a20202020202020202020202020202020276c696e655f746f74616c5f63656e7473272c20765f6974656d5f6c696e655f63656e74732c0a20202020202020202020202020202020276c696e655f746f74616c272c20524f554e4428765f6974656d5f6c696e655f63656e74733a3a6e756d65726963202f203130302c2032290a202020202020202020202020290a2020202020202020293b0a20202020454e44204c4f4f503b0a0a20202020765f7661745f746f74616c5f63656e7473203a3d20524f554e4428765f6974656d5f746f74616c5f63656e7473202a20765f7661745f72617465293a3a626967696e743b0a0a20202020494620705f70726f6d6f5f636f6465204953204e4f54204e554c4c20414e44204c454e475448285452494d28705f70726f6d6f5f636f64652929203e2030205448454e0a2020202020202020424547494e0a20202020202020202020202053454c454354207665726966795f70726f6d6f5f636f646528705f70726f6d6f5f636f64652920494e544f20765f70726f6d6f5f726573756c743b0a202020202020202020202020494620434f414c455343452828765f70726f6d6f5f726573756c742d3e3e2776616c696427293a3a626f6f6c65616e2c2046414c534529205448454e0a2020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f747970652729203d202770657263656e7461676527205448454e0a2020202020202020202020202020202020202020765f646973636f756e745f746f74616c5f63656e7473203a3d20524f554e44280a20202020202020202020202020202020202020202020202028765f6974656d5f746f74616c5f63656e7473202b20765f7661745f746f74616c5f63656e747329202a0a20202020202020202020202020202020202020202020202028434f414c455343452828765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a6e756d657269632c203029202f203130302e30290a2020202020202020202020202020202020202020293a3a626967696e743b0a20202020202020202020202020202020454c53450a2020202020202020202020202020202020202020765f646973636f756e745f746f74616c5f63656e7473203a3d20524f554e44280a202020202020202020202020202020202020202020202020434f414c455343452828765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a6e756d657269632c203029202a203130300a2020202020202020202020202020202020202020293a3a626967696e743b0a20202020202020202020202020202020454e442049463b0a0a2020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e742729204953204e4f54204e554c4c205448454e0a2020202020202020202020202020202020202020765f646973636f756e745f746f74616c5f63656e7473203a3d204c45415354280a202020202020202020202020202020202020202020202020765f646973636f756e745f746f74616c5f63656e74732c0a202020202020202020202020202020202020202020202020524f554e442828765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e7427293a3a6e756d65726963202a20313030293a3a626967696e740a2020202020202020202020202020202020202020293b0a20202020202020202020202020202020454e442049463b0a202020202020202020202020454e442049463b0a2020202020202020455843455054494f4e205748454e204f5448455253205448454e0a202020202020202020202020765f646973636f756e745f746f74616c5f63656e7473203a3d20303b0a2020202020202020454e443b0a20202020454e442049463b0a0a20202020765f7072655f7368697070696e675f746f74616c5f63656e7473203a3d20475245415445535428765f6974656d5f746f74616c5f63656e7473202b20765f7661745f746f74616c5f63656e7473202d20765f646973636f756e745f746f74616c5f63656e74732c2030293b0a20202020494620765f7072655f7368697070696e675f746f74616c5f63656e7473203e3d20524f554e4428765f7368697070696e675f7468726573686f6c64202a20313030293a3a626967696e74205448454e0a2020202020202020765f7368697070696e675f746f74616c5f63656e7473203a3d20303b0a20202020454c53450a2020202020202020765f7368697070696e675f746f74616c5f63656e7473203a3d20524f554e4428765f7368697070696e675f636f7374202a20313030293a3a626967696e743b0a20202020454e442049463b0a0a20202020765f626173655f746f74616c5f63656e7473203a3d20765f7072655f7368697070696e675f746f74616c5f63656e7473202b20765f7368697070696e675f746f74616c5f63656e74733b0a0a20202020494620705f7061796d656e745f6d6574686f64203d20276372656469745f6361726427205448454e0a202020202020202053454c45435420636f6d6d697373696f6e5f726174652c20757064617465645f61740a2020202020202020494e544f20765f636f6d6d697373696f6e5f726174652c20765f726174655f757064617465645f61740a202020202020202046524f4d207075626c69632e696e7374616c6c6d656e745f72617465730a2020202020202020574845524520696e7374616c6c6d656e745f6e756d626572203d20705f696e7374616c6c6d656e745f6e756d6265720a20202020202020202020414e442069735f616374697665203d20545255450a20202020202020204c494d495420313b0a0a20202020202020204946204e4f5420464f554e44205448454e0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a202020202020202020202020202020202773756363657373272c2046414c53452c0a20202020202020202020202020202020276572726f72272c2027494e5354414c4c4d454e545f4e4f545f414354495645272c0a20202020202020202020202020202020276d657373616765272c2027536563696c656e2074616b73697420616b74696620646567696c270a202020202020202020202020293b0a2020202020202020454e442049463b0a0a2020202020202020765f636f6d6d697373696f6e5f616d6f756e745f63656e7473203a3d20524f554e4428765f626173655f746f74616c5f63656e7473202a2028765f636f6d6d697373696f6e5f72617465202f203130302e3029293a3a626967696e743b0a20202020454c53450a2020202020202020765f636f6d6d697373696f6e5f72617465203a3d20303b0a2020202020202020765f726174655f757064617465645f6174203a3d204e4f5728293b0a2020202020202020765f636f6d6d697373696f6e5f616d6f756e745f63656e7473203a3d20303b0a20202020454e442049463b0a0a20202020765f706169645f746f74616c5f63656e7473203a3d20765f626173655f746f74616c5f63656e7473202b20765f636f6d6d697373696f6e5f616d6f756e745f63656e74733b0a0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20545255452c0a2020202020202020276d657373616765272c202751756f7465206f6c7573747572756c6475272c0a2020202020202020277061796d656e745f6d6574686f64272c20705f7061796d656e745f6d6574686f642c0a2020202020202020277368697070696e675f616464726573735f6964272c20705f7368697070696e675f616464726573735f69642c0a202020202020202027696e7374616c6c6d656e745f6e756d626572272c2043415345205748454e20705f7061796d656e745f6d6574686f64203d20276372656469745f6361726427205448454e20705f696e7374616c6c6d656e745f6e756d62657220454c5345203120454e442c0a2020202020202020276974656d5f746f74616c5f63656e7473272c20765f6974656d5f746f74616c5f63656e74732c0a2020202020202020277661745f746f74616c5f63656e7473272c20765f7661745f746f74616c5f63656e74732c0a2020202020202020277368697070696e675f746f74616c5f63656e7473272c20765f7368697070696e675f746f74616c5f63656e74732c0a202020202020202027646973636f756e745f746f74616c5f63656e7473272c20765f646973636f756e745f746f74616c5f63656e74732c0a202020202020202027626173655f746f74616c5f63656e7473272c20765f626173655f746f74616c5f63656e74732c0a202020202020202027636f6d6d697373696f6e5f72617465272c20765f636f6d6d697373696f6e5f726174652c0a202020202020202027636f6d6d697373696f6e5f616d6f756e745f63656e7473272c20765f636f6d6d697373696f6e5f616d6f756e745f63656e74732c0a202020202020202027706169645f746f74616c5f63656e7473272c20765f706169645f746f74616c5f63656e74732c0a20202020202020202763757272656e6379272c2027544c272c0a202020202020202027726174655f76657273696f6e272c20277631272c0a2020202020202020276566666563746976655f66726f6d272c20765f726174655f757064617465645f61742c0a202020202020202027636172745f736e617073686f74272c20765f636172745f736e617073686f740a20202020293b0a454e443b0a2466756e6374696f6e2400002089435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e6372656174655f6f7264657228705f6974656d73206a736f6e622c20705f7368697070696e675f616464726573735f696420757569642c20705f7061796d656e745f6d6574686f6420746578742c20705f70726f6d6f5f636f646520746578742044454641554c54204e554c4c3a3a74657874290a2052455455524e53206a736f6e620a204c414e475541474520706c706773716c0a20534543555249545920444546494e45520a20534554207365617263685f7061746820544f20277075626c6963272c202770675f636174616c6f67270a4153202466756e6374696f6e240a4445434c4152450a20202020765f757365725f696420555549443b0a20202020765f70726f66696c655f636f6d706c65746520424f4f4c45414e3b0a20202020765f70686f6e6520544558543b0a20202020765f6974656d204a534f4e423b0a20202020765f70726f647563745f696420555549443b0a20202020765f70726f647563745f6e616d6520544558543b0a20202020765f70726f647563745f707269636520444543494d414c2831302c32293b0a20202020765f70726f647563745f73746f636b20494e543b0a20202020765f71747920494e543b0a20202020765f6974656d5f737562746f74616c20444543494d414c2831302c32293b0a20202020765f746f74616c5f737562746f74616c20444543494d414c2831302c3229203a3d20303b0a20202020765f746f74616c5f76617420444543494d414c2831302c3229203a3d20303b0a20202020765f7368697070696e675f636f737420444543494d414c2831302c32293b0a20202020765f7661745f7261746520444543494d414c2831302c34293b0a20202020765f7368697070696e675f7468726573686f6c6420444543494d414c2831322c32293b0a20202020765f66696e616c5f746f74616c20444543494d414c2831302c32293b0a20202020765f646973636f756e7420444543494d414c2831302c3229203a3d20303b0a20202020765f6f726465725f696420555549443b0a20202020765f76616c69645f6974656d73204a534f4e42203a3d20275b5d273a3a4a534f4e423b0a20202020765f6974656d5f64657461696c204a534f4e423b0a20202020765f6f726465725f64657461696c73204a534f4e423b0a20202020765f62616e6b5f7265662054455854203a3d204e554c4c3b0a20202020765f616464726573735f6f776e657220555549443b0a20202020765f70726f6d6f5f726573756c74204a534f4e3b0a20202020765f6974656d5f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f7661745f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f7368697070696e675f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f646973636f756e745f746f74616c5f63656e747320424947494e54203a3d20303b0a20202020765f706169645f746f74616c5f63656e747320424947494e54203a3d20303b0a424547494e0a20202020494620705f7061796d656e745f6d6574686f64203c3e202762616e6b5f7472616e7366657227205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c2027494e56414c49445f5041594d454e545f4d4554484f44272c0a202020202020202020202020276d657373616765272c20274b617274206f64656d656c6572692079656e6920334420616b69736920696c6520616c696e6d616b74616469722e204c757466656e206b617274206f64656d6520656e64706f696e74696e69206b756c6c616e696e2e270a2020202020202020293b0a20202020454e442049463b0a0a20202020765f757365725f6964203a3d20617574682e75696428293b0a20202020494620765f757365725f6964204953204e554c4c205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c2027554e415554484f52495a4544272c0a202020202020202020202020276d657373616765272c20274f747572756d2061c3a76d616ec4b17a20676572656b69796f72270a2020202020202020293b0a20202020454e442049463b0a0a2020202053454c4543542070726f66696c655f636f6d706c6574652c2070686f6e650a20202020494e544f20765f70726f66696c655f636f6d706c6574652c20765f70686f6e650a2020202046524f4d207075626c69632e70726f66696c65730a202020205748455245206964203d20765f757365725f69643b0a0a20202020494620765f70726f66696c655f636f6d706c657465204953204e554c4c204f5220765f70726f66696c655f636f6d706c657465203d2066616c7365205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c202750524f46494c455f494e434f4d504c455445272c0a202020202020202020202020276d657373616765272c2027536970617269c59f207665726d656b2069c3a7696e2070726f66696c696e697a692074616d616d6c616d616ec4b17a20676572656b69796f72270a2020202020202020293b0a20202020454e442049463b0a0a20202020494620765f70686f6e65204953204e554c4c204f52206c656e677468287265676578705f7265706c61636528765f70686f6e652c20275c5c44272c2027272c202767272929203c203130205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c202750484f4e455f5245515549524544272c0a202020202020202020202020276d657373616765272c2027536970617269c59f207665726d656b2069c3a7696e206765c3a765726c69206269722074656c65666f6e206e756d61726173c4b120676572656b6c69646972270a2020202020202020293b0a20202020454e442049463b0a0a2020202053454c45435420757365725f696420494e544f20765f616464726573735f6f776e65720a2020202046524f4d207075626c69632e6164647265737365730a202020205748455245206964203d20705f7368697070696e675f616464726573735f69643b0a0a20202020494620765f616464726573735f6f776e6572204953204e554c4c204f5220765f616464726573735f6f776e6572203c3e20765f757365725f6964205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c2027494e56414c49445f41444452455353272c0a202020202020202020202020276d657373616765272c20274765c3a7657273697a206164726573207365c3a7696d693a2041647265732073697a6520616974206465c49f696c2e270a2020202020202020293b0a20202020454e442049463b0a0a20202020464f5220765f6974656d20494e2053454c454354202a2046524f4d206a736f6e625f61727261795f656c656d656e747328705f6974656d73290a202020204c4f4f500a2020202020202020765f70726f647563745f6964203a3d2028765f6974656d2d3e3e2770726f647563745f696427293a3a555549443b0a2020202020202020765f717479203a3d2028765f6974656d2d3e3e277175616e7469747927293a3a494e543b0a0a2020202020202020494620765f717479203c3d2030205448454e0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a202020202020202020202020202020202773756363657373272c2066616c73652c0a20202020202020202020202020202020276572726f72272c2027494e56414c49445f5155414e54495459272c0a20202020202020202020202020202020276d657373616765272c20274765c3a7657273697a20c3bc72c3bc6e206d696b746172c4b13a20302076657961206e656761746966206f6c616d617a2e270a202020202020202020202020293b0a2020202020202020454e442049463b0a0a202020202020202053454c4543542069642c206e616d652c2070726963652c2073746f636b0a2020202020202020494e544f20765f70726f647563745f69642c20765f70726f647563745f6e616d652c20765f70726f647563745f70726963652c20765f70726f647563745f73746f636b0a202020202020202046524f4d207075626c69632e70726f64756374730a20202020202020205748455245206964203d20765f70726f647563745f69640a2020202020202020464f52205550444154453b0a0a20202020202020204946204e4f5420464f554e44205448454e0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a202020202020202020202020202020202773756363657373272c2066616c73652c0a20202020202020202020202020202020276572726f72272c202750524f445543545f4e4f545f464f554e44272c0a20202020202020202020202020202020276d657373616765272c2027c39c72c3bc6e2062756c756e616d6164c4b13a2049442027207c7c20765f70726f647563745f69640a202020202020202020202020293b0a2020202020202020454e442049463b0a0a2020202020202020494620765f70726f647563745f73746f636b203c20765f717479205448454e0a20202020202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a202020202020202020202020202020202773756363657373272c2066616c73652c0a20202020202020202020202020202020276572726f72272c2027494e53554646494349454e545f53544f434b272c0a20202020202020202020202020202020276d657373616765272c2027596574657273697a2073746f6b3a2027207c7c20765f70726f647563745f6e616d650a202020202020202020202020293b0a2020202020202020454e442049463b0a0a2020202020202020765f6974656d5f737562746f74616c203a3d20765f70726f647563745f7072696365202a20765f7174793b0a2020202020202020765f746f74616c5f737562746f74616c203a3d20765f746f74616c5f737562746f74616c202b20765f6974656d5f737562746f74616c3b0a0a2020202020202020765f6974656d5f64657461696c203a3d206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202770726f647563745f6964272c20765f70726f647563745f69642c0a2020202020202020202020202770726f647563745f6e616d65272c20765f70726f647563745f6e616d652c0a202020202020202020202020277175616e74697479272c20765f7174792c0a20202020202020202020202027756e69745f7072696365272c20765f70726f647563745f70726963652c0a20202020202020202020202027737562746f74616c272c20765f6974656d5f737562746f74616c0a2020202020202020293b0a0a2020202020202020765f76616c69645f6974656d73203a3d20765f76616c69645f6974656d73207c7c20765f6974656d5f64657461696c3b0a20202020454e44204c4f4f503b0a0a2020202053454c4543540a2020202020202020434f414c45534345287661745f726174652c20302e3031292c0a2020202020202020434f414c45534345287368697070696e675f636f73742c2034392e3930292c0a2020202020202020434f414c4553434528667265655f7368697070696e675f7468726573686f6c642c20313530302e30290a20202020494e544f20765f7661745f726174652c20765f7368697070696e675f636f73742c20765f7368697070696e675f7468726573686f6c640a2020202046524f4d207075626c69632e736974655f73657474696e67730a202020205748455245206964203d20313b0a0a20202020765f746f74616c5f766174203a3d20765f746f74616c5f737562746f74616c202a20765f7661745f726174653b0a0a20202020494620705f70726f6d6f5f636f6465204953204e4f54204e554c4c20414e44206c656e67746828705f70726f6d6f5f636f646529203e2030205448454e0a2020202020202020424547494e0a20202020202020202020202053454c454354207075626c69632e7665726966795f70726f6d6f5f636f646528705f70726f6d6f5f636f64652920494e544f20765f70726f6d6f5f726573756c743b0a0a20202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e2776616c696427293a3a626f6f6c65616e203d2074727565205448454e0a2020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f747970652729203d202770657263656e7461676527205448454e0a2020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f746f74616c5f737562746f74616c202b20765f746f74616c5f76617429202a202828765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a646563696d616c202f20313030293b0a202020202020202020202020202020202020202049462028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e742729204953204e4f54204e554c4c0a202020202020202020202020202020202020202020202020414e4420765f646973636f756e74203e2028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e7427293a3a646563696d616c0a20202020202020202020202020202020202020205448454e0a202020202020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f70726f6d6f5f726573756c742d3e3e276d61785f646973636f756e745f616d6f756e7427293a3a646563696d616c3b0a2020202020202020202020202020202020202020454e442049463b0a20202020202020202020202020202020454c53450a2020202020202020202020202020202020202020765f646973636f756e74203a3d2028765f70726f6d6f5f726573756c742d3e3e27646973636f756e745f76616c756527293a3a646563696d616c3b0a20202020202020202020202020202020454e442049463b0a202020202020202020202020454e442049463b0a2020202020202020455843455054494f4e205748454e204f5448455253205448454e0a202020202020202020202020765f646973636f756e74203a3d20303b0a2020202020202020454e443b0a20202020454e442049463b0a0a2020202049462028765f746f74616c5f737562746f74616c202b20765f746f74616c5f766174202d20765f646973636f756e7429203e3d20765f7368697070696e675f7468726573686f6c64205448454e0a2020202020202020765f7368697070696e675f636f7374203a3d20303b0a20202020454e442049463b0a0a20202020765f66696e616c5f746f74616c203a3d20765f746f74616c5f737562746f74616c202b20765f746f74616c5f766174202b20765f7368697070696e675f636f7374202d20765f646973636f756e743b0a20202020494620765f66696e616c5f746f74616c203c2030205448454e0a2020202020202020765f66696e616c5f746f74616c203a3d20303b0a20202020454e442049463b0a0a20202020765f6974656d5f746f74616c5f63656e7473203a3d20524f554e4428765f746f74616c5f737562746f74616c202a20313030293a3a626967696e743b0a20202020765f7661745f746f74616c5f63656e7473203a3d20524f554e4428765f746f74616c5f766174202a20313030293a3a626967696e743b0a20202020765f7368697070696e675f746f74616c5f63656e7473203a3d20524f554e4428765f7368697070696e675f636f7374202a20313030293a3a626967696e743b0a20202020765f646973636f756e745f746f74616c5f63656e7473203a3d20524f554e4428765f646973636f756e74202a20313030293a3a626967696e743b0a20202020765f706169645f746f74616c5f63656e7473203a3d20524f554e4428765f66696e616c5f746f74616c202a20313030293a3a626967696e743b0a0a20202020765f62616e6b5f726566203a3d20274252562d27207c7c20746f5f63686172287075626c69632e6e6f7728292c202759594d4d44442729207c7c20272d27207c7c20757070657228737562737472696e67286d64352872616e646f6d28293a3a74657874292066726f6d203120666f72203429293b0a0a20202020765f6f726465725f64657461696c73203a3d206a736f6e625f6275696c645f6f626a656374280a2020202020202020276974656d73272c20765f76616c69645f6974656d732c0a202020202020202027737562746f74616c272c20765f746f74616c5f737562746f74616c2c0a2020202020202020277661745f72617465272c20765f7661745f726174652c0a2020202020202020277661745f616d6f756e74272c20765f746f74616c5f7661742c0a2020202020202020277368697070696e675f636f7374272c20765f7368697070696e675f636f73742c0a202020202020202027746f74616c272c20765f66696e616c5f746f74616c2c0a20202020202020202770726f6d6f5f636f6465272c20705f70726f6d6f5f636f64652c0a202020202020202027646973636f756e74272c20765f646973636f756e742c0a20202020202020202762616e6b5f7265666572656e6365272c20765f62616e6b5f7265660a20202020293b0a0a20202020494e5345525420494e544f207075626c69632e6f726465727320280a2020202020202020757365725f69642c0a20202020202020207368697070696e675f616464726573735f69642c0a20202020202020207061796d656e745f6d6574686f642c0a20202020202020207374617475732c0a20202020202020207061796d656e745f7374617475732c0a20202020202020206f726465725f64657461696c732c0a202020202020202063757272656e63792c0a2020202020202020696e7374616c6c6d656e745f6e756d6265722c0a20202020202020206974656d5f746f74616c5f63656e74732c0a20202020202020207661745f746f74616c5f63656e74732c0a20202020202020207368697070696e675f746f74616c5f63656e74732c0a2020202020202020646973636f756e745f746f74616c5f63656e74732c0a2020202020202020636f6d6d697373696f6e5f616d6f756e745f63656e74732c0a2020202020202020706169645f746f74616c5f63656e74732c0a202020202020202070726f6d6f5f636f64652c0a202020202020202062616e6b5f7265666572656e63650a20202020292056414c55455320280a2020202020202020765f757365725f69642c0a2020202020202020705f7368697070696e675f616464726573735f69642c0a20202020202020202762616e6b5f7472616e73666572272c0a20202020202020202770656e64696e67272c0a20202020202020202770656e64696e67272c0a2020202020202020765f6f726465725f64657461696c732c0a202020202020202027544c272c0a2020202020202020312c0a2020202020202020765f6974656d5f746f74616c5f63656e74732c0a2020202020202020765f7661745f746f74616c5f63656e74732c0a2020202020202020765f7368697070696e675f746f74616c5f63656e74732c0a2020202020202020765f646973636f756e745f746f74616c5f63656e74732c0a2020202020202020302c0a2020202020202020765f706169645f746f74616c5f63656e74732c0a2020202020202020705f70726f6d6f5f636f64652c0a2020202020202020765f62616e6b5f7265660a20202020292052455455524e494e4720696420494e544f20765f6f726465725f69643b0a0a20202020424547494e0a2020202020202020494e5345525420494e544f207075626c69632e6f726465725f7374617475735f686973746f727920286f726465725f69642c207374617475732c206e6f74652c20637265617465645f6174290a202020202020202056414c55455320280a202020202020202020202020765f6f726465725f69642c0a2020202020202020202020202770656e64696e67272c0a20202020202020202020202027536970617269c59f20616cc4b16e64c4b12028486176616c652f4546542042656b6c656e69796f7229272c0a2020202020202020202020207075626c69632e6e6f7728290a2020202020202020293b0a20202020455843455054494f4e205748454e204f5448455253205448454e0a20202020202020204e554c4c3b0a20202020454e443b0a0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20747275652c0a2020202020202020276f726465725f6964272c20765f6f726465725f69642c0a202020202020202027746f74616c272c20765f66696e616c5f746f74616c2c0a2020202020202020277368697070696e675f636f7374272c20765f7368697070696e675f636f73742c0a20202020202020202762616e6b5f7265666572656e6365272c20765f62616e6b5f7265662c0a2020202020202020276d657373616765272c2027536970617269c59f206261c59f6172c4b1796c61206f6c75c59f747572756c6475270a20202020293b0a455843455054494f4e205748454e204f5448455253205448454e0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c2066616c73652c0a2020202020202020276572726f72272c20275345525645525f4552524f52272c0a2020202020202020276d657373616765272c2027536970617269c59f206f6c75c59f747572756c75726b656e2062656b6c656e6d6579656e206269722068617461206f6c75c59f74752e204cc3bc7466656e2074656b7261722064656e6579696e697a2e270a20202020293b0a454e443b0a2466756e6374696f6e24000017a2435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e66696e616c697a655f696e74656e745f6372656174655f6f726465725f763128705f696e74656e745f696420757569642c20705f676174657761795f726573756c74206a736f6e622044454641554c5420277b7d273a3a6a736f6e62290a2052455455524e53206a736f6e620a204c414e475541474520706c706773716c0a20534543555249545920444546494e45520a20534554207365617263685f7061746820544f20277075626c6963272c202770675f636174616c6f67270a4153202466756e6374696f6e240a4445434c4152450a20202020765f726f6c6520544558543b0a20202020765f696e74656e74205245434f52443b0a20202020765f70726f66696c655f636f6d706c65746520424f4f4c45414e3b0a20202020765f70686f6e6520544558543b0a20202020765f6578697374696e675f6f726465725f696420555549443b0a20202020765f7265736572766174696f6e205245434f52443b0a20202020765f70726f64756374205245434f52443b0a20202020765f6f726465725f696420555549443b0a20202020765f676174657761795f73746174757320544558543b0a20202020765f676174657761795f7472785f636f646520544558543b0a20202020765f6f726465725f64657461696c73204a534f4e423b0a20202020765f686973746f72795f6e6f746520544558543b0a20202020765f6163746976655f7265736572766174696f6e5f636f756e7420494e5445474552203a3d20303b0a424547494e0a20202020765f726f6c65203a3d20434f414c45534345284e554c4c49462863757272656e745f73657474696e672827726571756573742e6a77742e636c61696d2e726f6c65272c2054525545292c202727292c20617574682e726f6c6528292c2027736572766963655f726f6c6527293b0a20202020494620765f726f6c65203c3e2027736572766963655f726f6c6527205448454e0a2020202020202020524149534520455843455054494f4e2027666f7262696464656e273b0a20202020454e442049463b0a0a2020202053454c454354202a0a20202020494e544f20765f696e74656e740a2020202046524f4d207075626c69632e7061796d656e745f696e74656e74730a202020205748455245206964203d20705f696e74656e745f69640a20202020464f52205550444154453b0a0a202020204946204e4f5420464f554e44205448454e0a2020202020202020524149534520455843455054494f4e2027696e74656e745f6e6f745f666f756e64273b0a20202020454e442049463b0a0a20202020494620765f696e74656e742e737461747573203d20277061696427205448454e0a202020202020202053454c4543542069640a2020202020202020494e544f20765f6578697374696e675f6f726465725f69640a202020202020202046524f4d207075626c69632e6f72646572730a20202020202020205748455245207061796d656e745f696e74656e745f6964203d20705f696e74656e745f69640a20202020202020204c494d495420313b0a0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c20545255452c0a202020202020202020202020276f726465725f6964272c20765f6578697374696e675f6f726465725f69642c0a20202020202020202020202027616c72656164795f70616964272c20545255450a2020202020202020293b0a20202020454e442049463b0a0a2020202053454c4543542070726f66696c655f636f6d706c6574652c2070686f6e650a20202020494e544f20765f70726f66696c655f636f6d706c6574652c20765f70686f6e650a2020202046524f4d207075626c69632e70726f66696c65730a202020205748455245206964203d20765f696e74656e742e757365725f69643b0a0a20202020494620765f70726f66696c655f636f6d706c657465204953204e554c4c204f5220765f70726f66696c655f636f6d706c657465203d2066616c7365205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2046414c53452c0a202020202020202020202020276572726f72272c202750524f46494c455f494e434f4d504c455445272c0a202020202020202020202020276d657373616765272c2027536970617269c59f207665726d656b2069c3a7696e2070726f66696c696e697a692074616d616d6c616d616ec4b17a20676572656b69796f72270a2020202020202020293b0a20202020454e442049463b0a0a20202020494620765f70686f6e65204953204e554c4c204f52206c656e677468287265676578705f7265706c61636528765f70686f6e652c20275c5c44272c2027272c202767272929203c203130205448454e0a202020202020202052455455524e206a736f6e625f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2046414c53452c0a202020202020202020202020276572726f72272c202750484f4e455f5245515549524544272c0a202020202020202020202020276d657373616765272c2027536970617269c59f207665726d656b2069c3a7696e206765c3a765726c69206269722074656c65666f6e206e756d61726173c4b120676572656b6c69646972270a2020202020202020293b0a20202020454e442049463b0a0a20202020494620765f696e74656e742e737461747573204e4f5420494e20282770656e64696e67272c20276177616974696e675f33642729205448454e0a2020202020202020524149534520455843455054494f4e2027696e74656e745f7374617475735f696e76616c6964273b0a20202020454e442049463b0a0a20202020494620765f696e74656e742e63757272656e6379203c3e2027544c27205448454e0a2020202020202020524149534520455843455054494f4e202763757272656e63795f6d69736d61746368273b0a20202020454e442049463b0a0a2020202053454c45435420434f554e54282a290a20202020494e544f20765f6163746976655f7265736572766174696f6e5f636f756e740a2020202046524f4d207075626c69632e73746f636b5f7265736572766174696f6e730a20202020574845524520696e74656e745f6964203d20705f696e74656e745f69640a202020202020414e442072656c65617365645f6174204953204e554c4c3b0a0a20202020494620765f6163746976655f7265736572766174696f6e5f636f756e74203d2030205448454e0a2020202020202020524149534520455843455054494f4e20276e6f5f6163746976655f7265736572766174696f6e73273b0a20202020454e442049463b0a0a20202020464f5220765f7265736572766174696f6e20494e0a202020202020202053454c4543542069642c2070726f647563745f69642c207174790a202020202020202046524f4d207075626c69632e73746f636b5f7265736572766174696f6e730a2020202020202020574845524520696e74656e745f6964203d20705f696e74656e745f69640a20202020202020202020414e442072656c65617365645f6174204953204e554c4c0a2020202020202020464f52205550444154450a202020204c4f4f500a202020202020202053454c4543542069642c2073746f636b2c20434f414c455343452872657365727665645f73746f636b2c2030292041532072657365727665645f73746f636b0a2020202020202020494e544f20765f70726f647563740a202020202020202046524f4d207075626c69632e70726f64756374730a20202020202020205748455245206964203d20765f7265736572766174696f6e2e70726f647563745f69640a2020202020202020464f52205550444154453b0a0a20202020202020204946204e4f5420464f554e44205448454e0a202020202020202020202020524149534520455843455054494f4e202770726f647563745f6e6f745f666f756e64273b0a2020202020202020454e442049463b0a0a2020202020202020494620765f70726f647563742e72657365727665645f73746f636b203c20765f7265736572766174696f6e2e717479204f5220765f70726f647563742e73746f636b203c20765f7265736572766174696f6e2e717479205448454e0a202020202020202020202020524149534520455843455054494f4e20277265736572766174696f6e5f73746174655f696e76616c6964273b0a2020202020202020454e442049463b0a0a2020202020202020555044415445207075626c69632e70726f64756374730a20202020202020205345540a20202020202020202020202073746f636b203d2073746f636b202d20765f7265736572766174696f6e2e7174792c0a20202020202020202020202072657365727665645f73746f636b203d20475245415445535428434f414c455343452872657365727665645f73746f636b2c203029202d20765f7265736572766174696f6e2e7174792c2030290a20202020202020205748455245206964203d20765f7265736572766174696f6e2e70726f647563745f69643b0a20202020454e44204c4f4f503b0a0a20202020765f6f726465725f64657461696c73203a3d206a736f6e625f6275696c645f6f626a656374280a2020202020202020276974656d73272c20765f696e74656e742e636172745f736e617073686f742c0a202020202020202027737562746f74616c272c20524f554e4428765f696e74656e742e6974656d5f746f74616c5f63656e74733a3a6e756d65726963202f203130302c2032292c0a2020202020202020277661745f616d6f756e74272c20524f554e4428765f696e74656e742e7661745f746f74616c5f63656e74733a3a6e756d65726963202f203130302c2032292c0a2020202020202020277368697070696e675f636f7374272c20524f554e4428765f696e74656e742e7368697070696e675f746f74616c5f63656e74733a3a6e756d65726963202f203130302c2032292c0a202020202020202027646973636f756e74272c20524f554e4428765f696e74656e742e646973636f756e745f746f74616c5f63656e74733a3a6e756d65726963202f203130302c2032292c0a202020202020202027636f6d6d697373696f6e5f616d6f756e74272c20524f554e4428765f696e74656e742e636f6d6d697373696f6e5f616d6f756e745f63656e74733a3a6e756d65726963202f203130302c2032292c0a202020202020202027746f74616c272c20524f554e4428765f696e74656e742e706169645f746f74616c5f63656e74733a3a6e756d65726963202f203130302c2032292c0a20202020202020202763757272656e6379272c2027544c272c0a202020202020202027696e7374616c6c6d656e745f6e756d626572272c20765f696e74656e742e696e7374616c6c6d656e745f6e756d6265720a20202020293b0a0a20202020494e5345525420494e544f207075626c69632e6f726465727320280a2020202020202020757365725f69642c0a20202020202020207368697070696e675f616464726573735f69642c0a20202020202020207061796d656e745f6d6574686f642c0a20202020202020207061796d656e745f7374617475732c0a20202020202020207374617475732c0a20202020202020206f726465725f64657461696c732c0a20202020202020207061796d656e745f696e74656e745f69642c0a202020202020202063757272656e63792c0a2020202020202020696e7374616c6c6d656e745f6e756d6265722c0a20202020202020206974656d5f746f74616c5f63656e74732c0a20202020202020207661745f746f74616c5f63656e74732c0a20202020202020207368697070696e675f746f74616c5f63656e74732c0a2020202020202020646973636f756e745f746f74616c5f63656e74732c0a2020202020202020636f6d6d697373696f6e5f616d6f756e745f63656e74732c0a2020202020202020706169645f746f74616c5f63656e74730a20202020290a2020202056414c55455320280a2020202020202020765f696e74656e742e757365725f69642c0a2020202020202020765f696e74656e742e7368697070696e675f616464726573735f69642c0a2020202020202020276372656469745f63617264272c0a20202020202020202770616964272c0a20202020202020202770726f63657373696e67272c0a2020202020202020765f6f726465725f64657461696c732c0a2020202020202020765f696e74656e742e69642c0a202020202020202027544c272c0a2020202020202020765f696e74656e742e696e7374616c6c6d656e745f6e756d6265722c0a2020202020202020765f696e74656e742e6974656d5f746f74616c5f63656e74732c0a2020202020202020765f696e74656e742e7661745f746f74616c5f63656e74732c0a2020202020202020765f696e74656e742e7368697070696e675f746f74616c5f63656e74732c0a2020202020202020765f696e74656e742e646973636f756e745f746f74616c5f63656e74732c0a2020202020202020765f696e74656e742e636f6d6d697373696f6e5f616d6f756e745f63656e74732c0a2020202020202020765f696e74656e742e706169645f746f74616c5f63656e74730a20202020290a2020202052455455524e494e4720696420494e544f20765f6f726465725f69643b0a0a20202020765f686973746f72795f6e6f7465203a3d20274b617274206f64656d657369206f6e61796c616e64692076652073697061726973206f6c7573747572756c6475273b0a20202020494e5345525420494e544f207075626c69632e6f726465725f7374617475735f686973746f727920286f726465725f69642c207374617475732c206e6f74652c20637265617465645f6174290a2020202056414c5545532028765f6f726465725f69642c202770726f63657373696e67272c20765f686973746f72795f6e6f74652c204e4f572829293b0a0a20202020555044415445207075626c69632e73746f636b5f7265736572766174696f6e730a202020205345542072656c65617365645f6174203d204e4f5728290a20202020574845524520696e74656e745f6964203d20705f696e74656e745f69640a202020202020414e442072656c65617365645f6174204953204e554c4c3b0a0a20202020765f676174657761795f737461747573203a3d20434f414c45534345280a2020202020202020705f676174657761795f726573756c742d3e3e27676174657761795f737461747573272c0a2020202020202020705f676174657761795f726573756c742d3e3e27726573756c74436f6465272c0a2020202020202020705f676174657761795f726573756c742d3e3e27726573756c745f636f6465272c0a20202020202020202773756363657373270a20202020293b0a20202020765f676174657761795f7472785f636f6465203a3d20434f414c45534345280a2020202020202020705f676174657761795f726573756c742d3e3e27676174657761795f7472785f636f6465272c0a2020202020202020705f676174657761795f726573756c742d3e3e27747278436f6465272c0a2020202020202020705f676174657761795f726573756c742d3e3e277472785f636f6465272c0a2020202020202020765f696e74656e742e676174657761795f7472785f636f64650a20202020293b0a0a20202020555044415445207075626c69632e7061796d656e745f696e74656e74730a202020205345540a2020202020202020737461747573203d202770616964272c0a2020202020202020676174657761795f737461747573203d20765f676174657761795f7374617475732c0a2020202020202020676174657761795f7472785f636f6465203d20765f676174657761795f7472785f636f64652c0a2020202020202020757064617465645f6174203d204e4f5728290a202020205748455245206964203d20705f696e74656e745f69643b0a0a2020202052455455524e206a736f6e625f6275696c645f6f626a656374280a20202020202020202773756363657373272c20545255452c0a2020202020202020276f726465725f6964272c20765f6f726465725f69642c0a202020202020202027616c72656164795f70616964272c2046414c53450a20202020293b0a454e443b0a2466756e6374696f6e2400000dae435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e76616c69646174655f636865636b6f757428705f70726f647563745f736c756720746578742c20705f7175616e7469747920696e74656765722c20705f70726f6d6f5f636f646520746578742044454641554c54204e554c4c3a3a74657874290a2052455455524e53206a736f6e0a204c414e475541474520706c706773716c0a20534543555249545920444546494e45520a20534554207365617263685f7061746820544f20277075626c6963272c202770675f636174616c6f67270a4153202466756e6374696f6e240a4445434c4152450a20202020765f757365725f696420555549443b0a20202020765f70726f66696c655f636f6d706c65746520424f4f4c45414e3b0a20202020765f70686f6e6520544558543b0a20202020765f70726f64756374205245434f52443b0a20202020765f737562746f74616c20444543494d414c2831302c2032293b0a20202020765f7661745f7261746520444543494d414c28352c203429203a3d20302e30313b0a20202020765f7661745f616d6f756e7420444543494d414c2831302c2032293b0a20202020765f746f74616c20444543494d414c2831302c2032293b0a20202020765f6f726465725f696420555549443b0a424547494e0a20202020765f757365725f6964203a3d20617574682e75696428293b0a0a20202020494620765f757365725f6964204953204e554c4c205448454e0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c2027554e415554484f52495a4544272c0a202020202020202020202020276d657373616765272c20274f747572756d2061c3a76d616ec4b17a20676572656b69796f72270a2020202020202020293b0a20202020454e442049463b0a0a2020202053454c4543542070726f66696c655f636f6d706c6574652c2070686f6e650a20202020494e544f20765f70726f66696c655f636f6d706c6574652c20765f70686f6e650a2020202046524f4d207075626c69632e70726f66696c65730a202020205748455245206964203d20765f757365725f69643b0a0a20202020494620765f70726f66696c655f636f6d706c657465204953204e554c4c204f5220765f70726f66696c655f636f6d706c657465203d2066616c7365205448454e0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c202750524f46494c455f494e434f4d504c455445272c0a202020202020202020202020276d657373616765272c2027536970617269c59f207665726d656b2069c3a7696e2070726f66696c696e697a692074616d616d6c616d616ec4b17a20676572656b69796f72270a2020202020202020293b0a20202020454e442049463b0a0a20202020494620765f70686f6e65204953204e554c4c204f52206c656e677468287265676578705f7265706c61636528765f70686f6e652c20275c5c44272c2027272c202767272929203c203130205448454e0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c202750484f4e455f5245515549524544272c0a202020202020202020202020276d657373616765272c2027536970617269c59f207665726d656b2069c3a7696e206765c3a765726c69206269722074656c65666f6e206e756d61726173c4b120676572656b6c69646972270a2020202020202020293b0a20202020454e442049463b0a0a2020202053454c454354202a20494e544f20765f70726f647563740a2020202046524f4d2070726f64756374730a20202020574845524520736c7567203d20705f70726f647563745f736c756720414e442069735f616374697665203d20747275653b0a0a20202020494620765f70726f64756374204953204e554c4c205448454e0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c202750524f445543545f4e4f545f464f554e44272c0a202020202020202020202020276d657373616765272c2027c39c72c3bc6e2062756c756e616d6164c4b1207665796120736174c4b1c59f7461206465c49f696c270a2020202020202020293b0a20202020454e442049463b0a0a20202020494620705f7175616e74697479203c2031204f5220705f7175616e74697479203e203130205448454e0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c2027494e56414c49445f5155414e54495459272c0a202020202020202020202020276d657373616765272c20274765c3a7657273697a206d696b7461722028312d31302061726173c4b1206f6c6d616cc4b129270a2020202020202020293b0a20202020454e442049463b0a0a20202020494620765f70726f647563742e73746f636b203c20705f7175616e74697479205448454e0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c2027494e53554646494349454e545f53544f434b272c0a202020202020202020202020276d657373616765272c202759657465726c692073746f6b20796f6b2e204d65766375742073746f6b3a2027207c7c20765f70726f647563742e73746f636b0a2020202020202020293b0a20202020454e442049463b0a0a20202020765f737562746f74616c203a3d20765f70726f647563742e7072696365202a20705f7175616e746974793b0a20202020765f7661745f616d6f756e74203a3d20765f737562746f74616c202a20765f7661745f726174653b0a20202020765f746f74616c203a3d20765f737562746f74616c202b20765f7661745f616d6f756e743b0a0a20202020494e5345525420494e544f206f726465727320280a2020202020202020757365725f69642c0a202020202020202070726f647563745f69642c0a20202020202020207175616e746974792c0a2020202020202020756e69745f70726963652c0a2020202020202020737562746f74616c2c0a20202020202020207661745f616d6f756e742c0a2020202020202020746f74616c2c0a20202020202020207374617475732c0a202020202020202070726f6d6f5f636f64650a20202020292056414c55455320280a2020202020202020765f757365725f69642c0a2020202020202020765f70726f647563742e69642c0a2020202020202020705f7175616e746974792c0a2020202020202020765f70726f647563742e70726963652c0a2020202020202020765f737562746f74616c2c0a2020202020202020765f7661745f616d6f756e742c0a2020202020202020765f746f74616c2c0a20202020202020202770656e64696e67272c0a2020202020202020705f70726f6d6f5f636f64650a20202020290a2020202052455455524e494e4720696420494e544f20765f6f726465725f69643b0a0a202020205550444154452070726f64756374730a202020205345542073746f636b203d2073746f636b202d20705f7175616e746974790a202020205748455245206964203d20765f70726f647563742e69643b0a0a2020202052455455524e206a736f6e5f6275696c645f6f626a656374280a20202020202020202773756363657373272c20747275652c0a2020202020202020276f726465725f6964272c20765f6f726465725f69642c0a20202020202020202770726f647563745f6e616d65272c20765f70726f647563742e6e616d652c0a2020202020202020277175616e74697479272c20705f7175616e746974792c0a202020202020202027756e69745f7072696365272c20765f70726f647563742e70726963652c0a202020202020202027737562746f74616c272c20765f737562746f74616c2c0a2020202020202020277661745f616d6f756e74272c20765f7661745f616d6f756e742c0a202020202020202027746f74616c272c20765f746f74616c2c0a2020202020202020276d657373616765272c2027536970617269c59f206261c59f6172c4b1796c61206f6c75c59f747572756c6475270a20202020293b0a455843455054494f4e0a202020205748454e204f5448455253205448454e0a202020202020202052455455524e206a736f6e5f6275696c645f6f626a656374280a2020202020202020202020202773756363657373272c2066616c73652c0a202020202020202020202020276572726f72272c20275345525645525f4552524f52272c0a202020202020202020202020276d657373616765272c2027c4b0c59f6c656d2073c4b1726173c4b16e6461206269722068617461206f6c75c59f74752e204cc3bc7466656e2074656b7261722064656e6579696e2e270a2020202020202020293b0a454e443b0a2466756e6374696f6e240000018d646f2024240a626567696e0a20206966206e6f742065786973747320280a2020202073656c65637420310a2020202066726f6d2070675f706f6c69636965730a20202020776865726520736368656d616e616d65203d20277075626c6963270a202020202020616e64207461626c656e616d65203d2027696e7374616c6c6d656e745f7261746573270a202020202020616e6420706f6c6963796e616d65203d2027416c6c6f77207075626c696320726561642061636365737320746f20696e7374616c6c6d656e74207261746573270a202029207468656e0a2020202063726561746520706f6c6963792022416c6c6f77207075626c696320726561642061636365737320746f20696e7374616c6c6d656e74207261746573220a202020206f6e207075626c69632e696e7374616c6c6d656e745f72617465730a202020206173207065726d6973736976650a20202020666f722073656c6563740a20202020746f207075626c69630a202020207573696e67202874727565293b0a2020656e642069663b0a656e640a2424"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"SET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260225090735_non_breaking_security_hardening.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"set check_function_bodies = off","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Non-breaking hardening: standardize SECURITY DEFINER search_path\nDO $$\nDECLARE\n  fn_signature text;\nBEGIN\n  FOR fn_signature IN\n    SELECT format('%I.%I(%s)', n.nspname, p.proname, pg_get_function_identity_arguments(p.oid))\n    FROM pg_proc p\n    JOIN pg_namespace n ON n.oid = p.pronamespace\n    WHERE n.nspname = 'public'\n      AND p.prosecdef\n      AND p.proname = ANY (ARRAY[\n        'check_default_address_deletion',\n        'finalize_reservation',\n        'get_dashboard_stats',\n        'handle_updated_at',\n        'increment_promo_usage',\n        'is_admin_user',\n        'is_superadmin_user',\n        'log_admin_action',\n        'reserve_stock',\n        'restore_stock'\n      ])\n  LOOP\n    EXECUTE format(\n      'ALTER FUNCTION %s SET search_path TO public, pg_catalog',\n      fn_signature\n    );\n  END LOOP;\nEND\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"-- Non-breaking RLS hardening: PUBLIC -\u003e authenticated where auth.uid() is already mandatory\nDO $$\nBEGIN\n  IF EXISTS (\n    SELECT 1\n    FROM pg_policies\n    WHERE schemaname = 'public'\n      AND tablename = 'addresses'\n      AND policyname = 'Users can insert own addresses'\n  ) THEN\n    EXECUTE 'ALTER POLICY \"Users can insert own addresses\" ON public.addresses TO authenticated';\n  END IF;\n\n  IF EXISTS (\n    SELECT 1\n    FROM pg_policies\n    WHERE schemaname = 'public'\n      AND tablename = 'addresses'\n      AND policyname = 'Users can update own addresses'\n  ) THEN\n    EXECUTE 'ALTER POLICY \"Users can update own addresses\" ON public.addresses TO authenticated';\n  END IF;\n\n  IF EXISTS (\n    SELECT 1\n    FROM pg_policies\n    WHERE schemaname = 'public'\n      AND tablename = 'addresses'\n      AND policyname = 'Users can delete own addresses'\n  ) THEN\n    EXECUTE 'ALTER POLICY \"Users can delete own addresses\" ON public.addresses TO authenticated';\n  END IF;\n\n  IF EXISTS (\n    SELECT 1\n    FROM pg_policies\n    WHERE schemaname = 'public'\n      AND tablename = 'orders'\n      AND policyname = 'Users can insert own orders'\n  ) THEN\n    EXECUTE 'ALTER POLICY \"Users can insert own orders\" ON public.orders TO authenticated';\n  END IF;\n\n  IF EXISTS (\n    SELECT 1\n    FROM pg_policies\n    WHERE schemaname = 'public'\n      AND tablename = 'profiles'\n      AND policyname = 'Users can insert their own profile'\n  ) THEN\n    EXECUTE 'ALTER POLICY \"Users can insert their own profile\" ON public.profiles TO authenticated';\n  END IF;\nEND\n$$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260225090735"},{"text":"non_breaking_security_hardening"},{"binary":"00000001000000000000001900000003000000010000001f73657420636865636b5f66756e6374696f6e5f626f64696573203d206f66660000033b2d2d204e6f6e2d627265616b696e672068617264656e696e673a207374616e64617264697a6520534543555249545920444546494e4552207365617263685f706174680a444f2024240a4445434c4152450a2020666e5f7369676e617475726520746578743b0a424547494e0a2020464f5220666e5f7369676e617475726520494e0a2020202053454c45435420666f726d6174282725492e254928257329272c206e2e6e73706e616d652c20702e70726f6e616d652c2070675f6765745f66756e6374696f6e5f6964656e746974795f617267756d656e747328702e6f696429290a2020202046524f4d2070675f70726f6320700a202020204a4f494e2070675f6e616d657370616365206e204f4e206e2e6f6964203d20702e70726f6e616d6573706163650a202020205748455245206e2e6e73706e616d65203d20277075626c6963270a202020202020414e4420702e70726f7365636465660a202020202020414e4420702e70726f6e616d65203d20414e59202841525241595b0a202020202020202027636865636b5f64656661756c745f616464726573735f64656c6574696f6e272c0a20202020202020202766696e616c697a655f7265736572766174696f6e272c0a2020202020202020276765745f64617368626f6172645f7374617473272c0a20202020202020202768616e646c655f757064617465645f6174272c0a202020202020202027696e6372656d656e745f70726f6d6f5f7573616765272c0a20202020202020202769735f61646d696e5f75736572272c0a20202020202020202769735f737570657261646d696e5f75736572272c0a2020202020202020276c6f675f61646d696e5f616374696f6e272c0a202020202020202027726573657276655f73746f636b272c0a202020202020202027726573746f72655f73746f636b270a2020202020205d290a20204c4f4f500a202020204558454355544520666f726d6174280a20202020202027414c5445522046554e4354494f4e20257320534554207365617263685f7061746820544f207075626c69632c2070675f636174616c6f67272c0a202020202020666e5f7369676e61747572650a20202020293b0a2020454e44204c4f4f503b0a454e440a2424000006082d2d204e6f6e2d627265616b696e6720524c532068617264656e696e673a205055424c4943202d3e2061757468656e7469636174656420776865726520617574682e756964282920697320616c7265616479206d616e6461746f72790a444f2024240a424547494e0a202049462045584953545320280a2020202053454c45435420310a2020202046524f4d2070675f706f6c69636965730a20202020574845524520736368656d616e616d65203d20277075626c6963270a202020202020414e44207461626c656e616d65203d2027616464726573736573270a202020202020414e4420706f6c6963796e616d65203d202755736572732063616e20696e73657274206f776e20616464726573736573270a202029205448454e0a20202020455845435554452027414c54455220504f4c494359202255736572732063616e20696e73657274206f776e2061646472657373657322204f4e207075626c69632e61646472657373657320544f2061757468656e74696361746564273b0a2020454e442049463b0a0a202049462045584953545320280a2020202053454c45435420310a2020202046524f4d2070675f706f6c69636965730a20202020574845524520736368656d616e616d65203d20277075626c6963270a202020202020414e44207461626c656e616d65203d2027616464726573736573270a202020202020414e4420706f6c6963796e616d65203d202755736572732063616e20757064617465206f776e20616464726573736573270a202029205448454e0a20202020455845435554452027414c54455220504f4c494359202255736572732063616e20757064617465206f776e2061646472657373657322204f4e207075626c69632e61646472657373657320544f2061757468656e74696361746564273b0a2020454e442049463b0a0a202049462045584953545320280a2020202053454c45435420310a2020202046524f4d2070675f706f6c69636965730a20202020574845524520736368656d616e616d65203d20277075626c6963270a202020202020414e44207461626c656e616d65203d2027616464726573736573270a202020202020414e4420706f6c6963796e616d65203d202755736572732063616e2064656c657465206f776e20616464726573736573270a202029205448454e0a20202020455845435554452027414c54455220504f4c494359202255736572732063616e2064656c657465206f776e2061646472657373657322204f4e207075626c69632e61646472657373657320544f2061757468656e74696361746564273b0a2020454e442049463b0a0a202049462045584953545320280a2020202053454c45435420310a2020202046524f4d2070675f706f6c69636965730a20202020574845524520736368656d616e616d65203d20277075626c6963270a202020202020414e44207461626c656e616d65203d20276f7264657273270a202020202020414e4420706f6c6963796e616d65203d202755736572732063616e20696e73657274206f776e206f7264657273270a202029205448454e0a20202020455845435554452027414c54455220504f4c494359202255736572732063616e20696e73657274206f776e206f726465727322204f4e207075626c69632e6f726465727320544f2061757468656e74696361746564273b0a2020454e442049463b0a0a202049462045584953545320280a2020202053454c45435420310a2020202046524f4d2070675f706f6c69636965730a20202020574845524520736368656d616e616d65203d20277075626c6963270a202020202020414e44207461626c656e616d65203d202770726f66696c6573270a202020202020414e4420706f6c6963796e616d65203d202755736572732063616e20696e73657274207468656972206f776e2070726f66696c65270a202029205448454e0a20202020455845435554452027414c54455220504f4c494359202255736572732063616e20696e73657274207468656972206f776e2070726f66696c6522204f4e207075626c69632e70726f66696c657320544f2061757468656e74696361746564273b0a2020454e442049463b0a454e440a2424"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"SET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"DO"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Applying migration 20260225123905_reconcile_function_search_path_drift.sql...
2026/02/25 16:12:57 PG Send: {"Type":"Query","String":"RESET ALL"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"RESET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"set check_function_bodies = off","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.admin_update_order_status(p_order_id uuid, p_new_status text, p_note text DEFAULT NULL::text)\r\n RETURNS boolean\r\n LANGUAGE plpgsql\r\n SECURITY DEFINER\r\n SET search_path TO 'public', 'pg_catalog'\r\nAS $function$\r\nDECLARE\r\n    v_old_status TEXT;\r\n    v_order_details JSONB;\r\n    v_payment_status TEXT;\r\n    v_payment_method TEXT;\r\n    v_payment_intent_id UUID;\r\n    v_item RECORD;\r\nBEGIN\r\n    -- 1. Admin check (Assumes function exists or falls back to role check)\r\n    IF (SELECT count(*) FROM public.profiles WHERE id = auth.uid() AND is_admin = true) = 0 THEN\r\n        RAISE EXCEPTION 'Unauthorized: Admin permission required';\r\n    END IF;\r\n\r\n    -- 2. Fetch current order data\r\n    SELECT status, order_details, payment_status, payment_method, payment_intent_id\r\n    INTO v_old_status, v_order_details, v_payment_status, v_payment_method, v_payment_intent_id\r\n    FROM public.orders\r\n    WHERE id = p_order_id;\r\n\r\n    IF NOT FOUND THEN\r\n        RAISE EXCEPTION 'Order not found';\r\n    END IF;\r\n\r\n    -- 3. Transition validation\r\n    IF v_old_status = 'cancelled' THEN\r\n        RAISE EXCEPTION 'Cancelled orders cannot be updated';\r\n    END IF;\r\n\r\n    IF p_new_status NOT IN ('pending', 'processing', 'preparing', 'shipped', 'delivered', 'cancelled') THEN\r\n        RAISE EXCEPTION 'Invalid status: %', p_new_status;\r\n    END IF;\r\n\r\n    -- 4. Cancellation Logic (Stock Restore)\r\n    IF p_new_status = 'cancelled' THEN\r\n        -- Financial status is intent-driven for card payments.\r\n        IF v_payment_status = 'paid' THEN\r\n            IF v_payment_method = 'credit_card' AND v_payment_intent_id IS NOT NULL THEN\r\n                NULL; -- Do nothing, refund via payment intent API\r\n            ELSE\r\n                UPDATE public.orders SET payment_status = 'refunded' WHERE id = p_order_id;\r\n            END IF;\r\n        END IF;\r\n\r\n        -- Restore stock for items\r\n        FOR v_item IN\r\n            SELECT *\r\n            FROM jsonb_to_recordset(v_order_details-\u003e'items') AS x(product_id UUID, quantity INTEGER)\r\n        LOOP\r\n            IF v_item.product_id IS NOT NULL THEN\r\n                UPDATE public.products\r\n                SET stock = stock + v_item.quantity,\r\n                    updated_at = NOW()\r\n                WHERE id = v_item.product_id;\r\n            END IF;\r\n        END LOOP;\r\n\r\n        -- Update reason\r\n        UPDATE public.orders SET cancellation_reason = p_note WHERE id = p_order_id;\r\n    END IF;\r\n\r\n    -- 5. Update Order\r\n    UPDATE public.orders\r\n    SET status = p_new_status, updated_at = NOW()\r\n    WHERE id = p_order_id;\r\n\r\n    -- 6. Insert into Order Status History\r\n    INSERT INTO public.order_status_history (order_id, status, note, created_by)\r\n    VALUES (p_order_id, p_new_status, p_note, auth.uid());\r\n\r\n    -- 7. Insert into Admin Audit Log (if table exists)\r\n    IF EXISTS (SELECT FROM information_schema.tables WHERE table_name = 'admin_audit_log') THEN\r\n        INSERT INTO public.admin_audit_log (admin_user_id, action, target_table, target_id, details)\r\n        VALUES (\r\n            auth.uid(),\r\n            'update_order_status',\r\n            'orders',\r\n            p_order_id,\r\n            jsonb_build_object(\r\n                'old_status', v_old_status,\r\n                'new_status', p_new_status,\r\n                'note', p_note\r\n            )\r\n        );\r\n    END IF;\r\n\r\n    RETURN FOUND;\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.get_dashboard_stats(start_date timestamp with time zone, end_date timestamp with time zone)\r\n RETURNS json\r\n LANGUAGE plpgsql\r\n SECURITY DEFINER\r\n SET search_path TO 'public', 'pg_catalog'\r\nAS $function$\r\nDECLARE\r\n    total_revenue numeric;\r\n    order_count int;\r\n    cancelled_count int;\r\n    daily_sales json;\r\n    is_admin_user boolean;\r\nBEGIN\r\n    -- Check if user is admin\r\n    SELECT is_admin INTO is_admin_user FROM profiles WHERE id = auth.uid();\r\n\r\n    IF is_admin_user IS NOT TRUE THEN\r\n        RAISE EXCEPTION 'Unauthorized access';\r\n    END IF;\r\n\r\n    -- Calculate aggregate stats (active orders)\r\n    SELECT\r\n        COALESCE(SUM((order_details-\u003e\u003e'total')::numeric), 0),\r\n        COUNT(*)\r\n    INTO total_revenue, order_count\r\n    FROM orders\r\n    WHERE created_at \u003e= start_date AND created_at \u003c= end_date\r\n    AND status != 'cancelled';\r\n\r\n    -- Calculate cancelled count\r\n    SELECT COUNT(*)\r\n    INTO cancelled_count\r\n    FROM orders\r\n    WHERE created_at \u003e= start_date AND created_at \u003c= end_date\r\n    AND status = 'cancelled';\r\n\r\n    -- Calculate daily sales breakdown (excluding cancelled)\r\n    SELECT json_agg(t) INTO daily_sales\r\n    FROM (\r\n        SELECT\r\n            date_trunc('day', created_at) as date,\r\n            COUNT(*) as count,\r\n            SUM((order_details-\u003e\u003e'total')::numeric) as revenue\r\n        FROM orders\r\n        WHERE created_at \u003e= start_date AND created_at \u003c= end_date\r\n        AND status != 'cancelled'\r\n        GROUP BY 1\r\n        ORDER BY 1\r\n    ) t;\r\n\r\n    RETURN json_build_object(\r\n        'total_revenue', total_revenue,\r\n        'order_count', order_count,\r\n        'cancelled_count', cancelled_count,\r\n        'daily_sales', COALESCE(daily_sales, '[]'::json)\r\n    );\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.handle_new_order_promo()\r\n RETURNS trigger\r\n LANGUAGE plpgsql\r\n SECURITY DEFINER\r\n SET search_path TO 'public', 'pg_catalog'\r\nAS $function$\r\nDECLARE\r\n  v_code text;\r\n  v_discount numeric;\r\n  v_promo_id uuid;\r\n  v_current_usage int;\r\n  v_limit int;\r\nBEGIN\r\n  -- Extract promo code from JSONB\r\n  v_code := NEW.order_details-\u003e\u003e'promo_code';\r\n  v_discount := (NEW.order_details-\u003e\u003e'discount')::numeric;\r\n\r\n  -- If no code, exit\r\n  IF v_code IS NULL OR v_code = '' THEN\r\n    RETURN NEW;\r\n  END IF;\r\n\r\n  -- Find promo code (Locking)\r\n  SELECT id, usage_count, usage_limit INTO v_promo_id, v_current_usage, v_limit\r\n  FROM promo_codes\r\n  WHERE code ILIKE v_code\r\n  FOR UPDATE;\r\n\r\n  IF v_promo_id IS NOT NULL THEN\r\n    -- Increment usage\r\n    UPDATE promo_codes\r\n    SET usage_count = COALESCE(usage_count, 0) + 1\r\n    WHERE id = v_promo_id;\r\n\r\n    -- Insert log\r\n    INSERT INTO promo_logs (promo_code_id, order_id, user_id, discount_amount)\r\n    VALUES (v_promo_id, NEW.id, NEW.user_id, v_discount);\r\n  END IF;\r\n\r\n  RETURN NEW;\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.handle_updated_at()\r\n RETURNS trigger\r\n LANGUAGE plpgsql\r\n SECURITY DEFINER\r\n SET search_path TO 'public', 'pg_catalog'\r\nAS $function$\r\nBEGIN\r\n    NEW.updated_at = timezone('utc'::text, now());\r\n    RETURN NEW;\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.is_admin_user()\r\n RETURNS boolean\r\n LANGUAGE plpgsql\r\n SECURITY DEFINER\r\n SET search_path TO 'public', 'pg_catalog'\r\nAS $function$\r\nBEGIN\r\n    RETURN EXISTS (\r\n        SELECT 1 FROM public.profiles \r\n        WHERE id = (SELECT auth.uid()) AND (is_admin = true OR is_superadmin = true)\r\n    );\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.is_admin_user(user_id uuid)\r\n RETURNS boolean\r\n LANGUAGE plpgsql\r\n STABLE SECURITY DEFINER\r\n SET search_path TO 'public', 'pg_catalog'\r\nAS $function$\r\nDECLARE\r\n  admin_status boolean;\r\nBEGIN\r\n  -- Direct column access without triggering policy checks\r\n  SELECT is_admin INTO admin_status\r\n  FROM public.profiles\r\n  WHERE id = user_id\r\n  LIMIT 1;\r\n\r\n  RETURN COALESCE(admin_status, false);\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.is_superadmin_user()\r\n RETURNS boolean\r\n LANGUAGE sql\r\n SECURITY DEFINER\r\n SET search_path TO 'public', 'pg_catalog'\r\nAS $function$\r\n  SELECT EXISTS (\r\n    SELECT 1\r\n    FROM profiles\r\n    WHERE id = auth.uid()\r\n      AND is_superadmin = true\r\n  );\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"CREATE OR REPLACE FUNCTION public.prune_expired_otp_codes()\r\n RETURNS void\r\n LANGUAGE plpgsql\r\n SET search_path TO 'public'\r\nAS $function$\r\nBEGIN\r\n    DELETE FROM public.otp_codes WHERE expires_at \u003c now();\r\nEND;\r\n$function$","ParameterOIDs":null}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":null,"Parameters":[],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Parse","Name":"","Query":"INSERT INTO supabase_migrations.schema_migrations(version, name, statements) VALUES($1, $2, $3)","ParameterOIDs":[25,25,1009]}
2026/02/25 16:12:57 PG Send: {"Type":"Bind","DestinationPortal":"","PreparedStatement":"","ParameterFormatCodes":[0,0,1],"Parameters":[{"text":"20260225123905"},{"text":"reconcile_function_search_path_drift"},{"binary":"00000001000000000000001900000009000000010000001f73657420636865636b5f66756e6374696f6e5f626f64696573203d206f666600000d4a435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e61646d696e5f7570646174655f6f726465725f73746174757328705f6f726465725f696420757569642c20705f6e65775f73746174757320746578742c20705f6e6f746520746578742044454641554c54204e554c4c3a3a74657874290d0a2052455455524e5320626f6f6c65616e0d0a204c414e475541474520706c706773716c0d0a20534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f20277075626c6963272c202770675f636174616c6f67270d0a4153202466756e6374696f6e240d0a4445434c4152450d0a20202020765f6f6c645f73746174757320544558543b0d0a20202020765f6f726465725f64657461696c73204a534f4e423b0d0a20202020765f7061796d656e745f73746174757320544558543b0d0a20202020765f7061796d656e745f6d6574686f6420544558543b0d0a20202020765f7061796d656e745f696e74656e745f696420555549443b0d0a20202020765f6974656d205245434f52443b0d0a424547494e0d0a202020202d2d20312e2041646d696e20636865636b2028417373756d65732066756e6374696f6e20657869737473206f722066616c6c73206261636b20746f20726f6c6520636865636b290d0a202020204946202853454c45435420636f756e74282a292046524f4d207075626c69632e70726f66696c6573205748455245206964203d20617574682e756964282920414e442069735f61646d696e203d207472756529203d2030205448454e0d0a2020202020202020524149534520455843455054494f4e2027556e617574686f72697a65643a2041646d696e207065726d697373696f6e207265717569726564273b0d0a20202020454e442049463b0d0a0d0a202020202d2d20322e2046657463682063757272656e74206f7264657220646174610d0a2020202053454c454354207374617475732c206f726465725f64657461696c732c207061796d656e745f7374617475732c207061796d656e745f6d6574686f642c207061796d656e745f696e74656e745f69640d0a20202020494e544f20765f6f6c645f7374617475732c20765f6f726465725f64657461696c732c20765f7061796d656e745f7374617475732c20765f7061796d656e745f6d6574686f642c20765f7061796d656e745f696e74656e745f69640d0a2020202046524f4d207075626c69632e6f72646572730d0a202020205748455245206964203d20705f6f726465725f69643b0d0a0d0a202020204946204e4f5420464f554e44205448454e0d0a2020202020202020524149534520455843455054494f4e20274f72646572206e6f7420666f756e64273b0d0a20202020454e442049463b0d0a0d0a202020202d2d20332e205472616e736974696f6e2076616c69646174696f6e0d0a20202020494620765f6f6c645f737461747573203d202763616e63656c6c656427205448454e0d0a2020202020202020524149534520455843455054494f4e202743616e63656c6c6564206f72646572732063616e6e6f742062652075706461746564273b0d0a20202020454e442049463b0d0a0d0a20202020494620705f6e65775f737461747573204e4f5420494e20282770656e64696e67272c202770726f63657373696e67272c2027707265706172696e67272c202773686970706564272c202764656c697665726564272c202763616e63656c6c65642729205448454e0d0a2020202020202020524149534520455843455054494f4e2027496e76616c6964207374617475733a2025272c20705f6e65775f7374617475733b0d0a20202020454e442049463b0d0a0d0a202020202d2d20342e2043616e63656c6c6174696f6e204c6f676963202853746f636b20526573746f7265290d0a20202020494620705f6e65775f737461747573203d202763616e63656c6c656427205448454e0d0a20202020202020202d2d2046696e616e6369616c2073746174757320697320696e74656e742d64726976656e20666f722063617264207061796d656e74732e0d0a2020202020202020494620765f7061796d656e745f737461747573203d20277061696427205448454e0d0a202020202020202020202020494620765f7061796d656e745f6d6574686f64203d20276372656469745f636172642720414e4420765f7061796d656e745f696e74656e745f6964204953204e4f54204e554c4c205448454e0d0a202020202020202020202020202020204e554c4c3b202d2d20446f206e6f7468696e672c20726566756e6420766961207061796d656e7420696e74656e74204150490d0a202020202020202020202020454c53450d0a20202020202020202020202020202020555044415445207075626c69632e6f726465727320534554207061796d656e745f737461747573203d2027726566756e64656427205748455245206964203d20705f6f726465725f69643b0d0a202020202020202020202020454e442049463b0d0a2020202020202020454e442049463b0d0a0d0a20202020202020202d2d20526573746f72652073746f636b20666f72206974656d730d0a2020202020202020464f5220765f6974656d20494e0d0a20202020202020202020202053454c454354202a0d0a20202020202020202020202046524f4d206a736f6e625f746f5f7265636f726473657428765f6f726465725f64657461696c732d3e276974656d73272920415320782870726f647563745f696420555549442c207175616e7469747920494e5445474552290d0a20202020202020204c4f4f500d0a202020202020202020202020494620765f6974656d2e70726f647563745f6964204953204e4f54204e554c4c205448454e0d0a20202020202020202020202020202020555044415445207075626c69632e70726f64756374730d0a202020202020202020202020202020205345542073746f636b203d2073746f636b202b20765f6974656d2e7175616e746974792c0d0a2020202020202020202020202020202020202020757064617465645f6174203d204e4f5728290d0a202020202020202020202020202020205748455245206964203d20765f6974656d2e70726f647563745f69643b0d0a202020202020202020202020454e442049463b0d0a2020202020202020454e44204c4f4f503b0d0a0d0a20202020202020202d2d2055706461746520726561736f6e0d0a2020202020202020555044415445207075626c69632e6f7264657273205345542063616e63656c6c6174696f6e5f726561736f6e203d20705f6e6f7465205748455245206964203d20705f6f726465725f69643b0d0a20202020454e442049463b0d0a0d0a202020202d2d20352e20557064617465204f726465720d0a20202020555044415445207075626c69632e6f72646572730d0a2020202053455420737461747573203d20705f6e65775f7374617475732c20757064617465645f6174203d204e4f5728290d0a202020205748455245206964203d20705f6f726465725f69643b0d0a0d0a202020202d2d20362e20496e7365727420696e746f204f726465722053746174757320486973746f72790d0a20202020494e5345525420494e544f207075626c69632e6f726465725f7374617475735f686973746f727920286f726465725f69642c207374617475732c206e6f74652c20637265617465645f6279290d0a2020202056414c5545532028705f6f726465725f69642c20705f6e65775f7374617475732c20705f6e6f74652c20617574682e7569642829293b0d0a0d0a202020202d2d20372e20496e7365727420696e746f2041646d696e204175646974204c6f6720286966207461626c6520657869737473290d0a20202020494620455849535453202853454c4543542046524f4d20696e666f726d6174696f6e5f736368656d612e7461626c6573205748455245207461626c655f6e616d65203d202761646d696e5f61756469745f6c6f672729205448454e0d0a2020202020202020494e5345525420494e544f207075626c69632e61646d696e5f61756469745f6c6f67202861646d696e5f757365725f69642c20616374696f6e2c207461726765745f7461626c652c207461726765745f69642c2064657461696c73290d0a202020202020202056414c55455320280d0a202020202020202020202020617574682e75696428292c0d0a202020202020202020202020277570646174655f6f726465725f737461747573272c0d0a202020202020202020202020276f7264657273272c0d0a202020202020202020202020705f6f726465725f69642c0d0a2020202020202020202020206a736f6e625f6275696c645f6f626a656374280d0a20202020202020202020202020202020276f6c645f737461747573272c20765f6f6c645f7374617475732c0d0a20202020202020202020202020202020276e65775f737461747573272c20705f6e65775f7374617475732c0d0a20202020202020202020202020202020276e6f7465272c20705f6e6f74650d0a202020202020202020202020290d0a2020202020202020293b0d0a20202020454e442049463b0d0a0d0a2020202052455455524e20464f554e443b0d0a454e443b0d0a2466756e6374696f6e24000006ec435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e6765745f64617368626f6172645f73746174732873746172745f646174652074696d657374616d7020776974682074696d65207a6f6e652c20656e645f646174652074696d657374616d7020776974682074696d65207a6f6e65290d0a2052455455524e53206a736f6e0d0a204c414e475541474520706c706773716c0d0a20534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f20277075626c6963272c202770675f636174616c6f67270d0a4153202466756e6374696f6e240d0a4445434c4152450d0a20202020746f74616c5f726576656e7565206e756d657269633b0d0a202020206f726465725f636f756e7420696e743b0d0a2020202063616e63656c6c65645f636f756e7420696e743b0d0a202020206461696c795f73616c6573206a736f6e3b0d0a2020202069735f61646d696e5f7573657220626f6f6c65616e3b0d0a424547494e0d0a202020202d2d20436865636b20696620757365722069732061646d696e0d0a2020202053454c4543542069735f61646d696e20494e544f2069735f61646d696e5f757365722046524f4d2070726f66696c6573205748455245206964203d20617574682e75696428293b0d0a0d0a2020202049462069735f61646d696e5f75736572204953204e4f542054525545205448454e0d0a2020202020202020524149534520455843455054494f4e2027556e617574686f72697a656420616363657373273b0d0a20202020454e442049463b0d0a0d0a202020202d2d2043616c63756c617465206167677265676174652073746174732028616374697665206f7264657273290d0a2020202053454c4543540d0a2020202020202020434f414c455343452853554d28286f726465725f64657461696c732d3e3e27746f74616c27293a3a6e756d65726963292c2030292c0d0a2020202020202020434f554e54282a290d0a20202020494e544f20746f74616c5f726576656e75652c206f726465725f636f756e740d0a2020202046524f4d206f72646572730d0a20202020574845524520637265617465645f6174203e3d2073746172745f6461746520414e4420637265617465645f6174203c3d20656e645f646174650d0a20202020414e442073746174757320213d202763616e63656c6c6564273b0d0a0d0a202020202d2d2043616c63756c6174652063616e63656c6c656420636f756e740d0a2020202053454c45435420434f554e54282a290d0a20202020494e544f2063616e63656c6c65645f636f756e740d0a2020202046524f4d206f72646572730d0a20202020574845524520637265617465645f6174203e3d2073746172745f6461746520414e4420637265617465645f6174203c3d20656e645f646174650d0a20202020414e4420737461747573203d202763616e63656c6c6564273b0d0a0d0a202020202d2d2043616c63756c617465206461696c792073616c657320627265616b646f776e20286578636c7564696e672063616e63656c6c6564290d0a2020202053454c454354206a736f6e5f61676728742920494e544f206461696c795f73616c65730d0a2020202046524f4d20280d0a202020202020202053454c4543540d0a202020202020202020202020646174655f7472756e632827646179272c20637265617465645f61742920617320646174652c0d0a202020202020202020202020434f554e54282a2920617320636f756e742c0d0a20202020202020202020202053554d28286f726465725f64657461696c732d3e3e27746f74616c27293a3a6e756d657269632920617320726576656e75650d0a202020202020202046524f4d206f72646572730d0a2020202020202020574845524520637265617465645f6174203e3d2073746172745f6461746520414e4420637265617465645f6174203c3d20656e645f646174650d0a2020202020202020414e442073746174757320213d202763616e63656c6c6564270d0a202020202020202047524f555020425920310d0a20202020202020204f5244455220425920310d0a202020202920743b0d0a0d0a2020202052455455524e206a736f6e5f6275696c645f6f626a656374280d0a202020202020202027746f74616c5f726576656e7565272c20746f74616c5f726576656e75652c0d0a2020202020202020276f726465725f636f756e74272c206f726465725f636f756e742c0d0a20202020202020202763616e63656c6c65645f636f756e74272c2063616e63656c6c65645f636f756e742c0d0a2020202020202020276461696c795f73616c6573272c20434f414c45534345286461696c795f73616c65732c20275b5d273a3a6a736f6e290d0a20202020293b0d0a454e443b0d0a2466756e6374696f6e2400000430435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e68616e646c655f6e65775f6f726465725f70726f6d6f28290d0a2052455455524e5320747269676765720d0a204c414e475541474520706c706773716c0d0a20534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f20277075626c6963272c202770675f636174616c6f67270d0a4153202466756e6374696f6e240d0a4445434c4152450d0a2020765f636f646520746578743b0d0a2020765f646973636f756e74206e756d657269633b0d0a2020765f70726f6d6f5f696420757569643b0d0a2020765f63757272656e745f757361676520696e743b0d0a2020765f6c696d697420696e743b0d0a424547494e0d0a20202d2d20457874726163742070726f6d6f20636f64652066726f6d204a534f4e420d0a2020765f636f6465203a3d204e45572e6f726465725f64657461696c732d3e3e2770726f6d6f5f636f6465273b0d0a2020765f646973636f756e74203a3d20284e45572e6f726465725f64657461696c732d3e3e27646973636f756e7427293a3a6e756d657269633b0d0a0d0a20202d2d204966206e6f20636f64652c20657869740d0a2020494620765f636f6465204953204e554c4c204f5220765f636f6465203d202727205448454e0d0a2020202052455455524e204e45573b0d0a2020454e442049463b0d0a0d0a20202d2d2046696e642070726f6d6f20636f646520284c6f636b696e67290d0a202053454c4543542069642c2075736167655f636f756e742c2075736167655f6c696d697420494e544f20765f70726f6d6f5f69642c20765f63757272656e745f75736167652c20765f6c696d69740d0a202046524f4d2070726f6d6f5f636f6465730d0a2020574845524520636f646520494c494b4520765f636f64650d0a2020464f52205550444154453b0d0a0d0a2020494620765f70726f6d6f5f6964204953204e4f54204e554c4c205448454e0d0a202020202d2d20496e6372656d656e742075736167650d0a202020205550444154452070726f6d6f5f636f6465730d0a202020205345542075736167655f636f756e74203d20434f414c455343452875736167655f636f756e742c203029202b20310d0a202020205748455245206964203d20765f70726f6d6f5f69643b0d0a0d0a202020202d2d20496e73657274206c6f670d0a20202020494e5345525420494e544f2070726f6d6f5f6c6f6773202870726f6d6f5f636f64655f69642c206f726465725f69642c20757365725f69642c20646973636f756e745f616d6f756e74290d0a2020202056414c5545532028765f70726f6d6f5f69642c204e45572e69642c204e45572e757365725f69642c20765f646973636f756e74293b0d0a2020454e442049463b0d0a0d0a202052455455524e204e45573b0d0a454e443b0d0a2466756e6374696f6e2400000106435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e68616e646c655f757064617465645f617428290d0a2052455455524e5320747269676765720d0a204c414e475541474520706c706773716c0d0a20534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f20277075626c6963272c202770675f636174616c6f67270d0a4153202466756e6374696f6e240d0a424547494e0d0a202020204e45572e757064617465645f6174203d2074696d657a6f6e652827757463273a3a746578742c206e6f772829293b0d0a2020202052455455524e204e45573b0d0a454e443b0d0a2466756e6374696f6e2400000158435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e69735f61646d696e5f7573657228290d0a2052455455524e5320626f6f6c65616e0d0a204c414e475541474520706c706773716c0d0a20534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f20277075626c6963272c202770675f636174616c6f67270d0a4153202466756e6374696f6e240d0a424547494e0d0a2020202052455455524e2045584953545320280d0a202020202020202053454c45435420312046524f4d207075626c69632e70726f66696c6573200d0a20202020202020205748455245206964203d202853454c45435420617574682e75696428292920414e44202869735f61646d696e203d2074727565204f522069735f737570657261646d696e203d2074727565290d0a20202020293b0d0a454e443b0d0a2466756e6374696f6e24000001b8435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e69735f61646d696e5f7573657228757365725f69642075756964290d0a2052455455524e5320626f6f6c65616e0d0a204c414e475541474520706c706773716c0d0a20535441424c4520534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f20277075626c6963272c202770675f636174616c6f67270d0a4153202466756e6374696f6e240d0a4445434c4152450d0a202061646d696e5f73746174757320626f6f6c65616e3b0d0a424547494e0d0a20202d2d2044697265637420636f6c756d6e2061636365737320776974686f75742074726967676572696e6720706f6c69637920636865636b730d0a202053454c4543542069735f61646d696e20494e544f2061646d696e5f7374617475730d0a202046524f4d207075626c69632e70726f66696c65730d0a20205748455245206964203d20757365725f69640d0a20204c494d495420313b0d0a0d0a202052455455524e20434f414c455343452861646d696e5f7374617475732c2066616c7365293b0d0a454e443b0d0a2466756e6374696f6e2400000126435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e69735f737570657261646d696e5f7573657228290d0a2052455455524e5320626f6f6c65616e0d0a204c414e47554147452073716c0d0a20534543555249545920444546494e45520d0a20534554207365617263685f7061746820544f20277075626c6963272c202770675f636174616c6f67270d0a4153202466756e6374696f6e240d0a202053454c4543542045584953545320280d0a2020202053454c45435420310d0a2020202046524f4d2070726f66696c65730d0a202020205748455245206964203d20617574682e75696428290d0a202020202020414e442069735f737570657261646d696e203d20747275650d0a2020293b0d0a2466756e6374696f6e24000000df435245415445204f52205245504c4143452046554e4354494f4e207075626c69632e7072756e655f657870697265645f6f74705f636f64657328290d0a2052455455524e5320766f69640d0a204c414e475541474520706c706773716c0d0a20534554207365617263685f7061746820544f20277075626c6963270d0a4153202466756e6374696f6e240d0a424547494e0d0a2020202044454c4554452046524f4d207075626c69632e6f74705f636f64657320574845524520657870697265735f6174203c206e6f7728293b0d0a454e443b0d0a2466756e6374696f6e24"}],"ResultFormatCodes":[]}
2026/02/25 16:12:57 PG Send: {"Type":"Describe","ObjectType":"P","Name":""}
2026/02/25 16:12:57 PG Send: {"Type":"Execute","Portal":"","MaxRows":0}
2026/02/25 16:12:57 PG Send: {"Type":"Sync"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"SET"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"CREATE FUNCTION"}
2026/02/25 16:12:57 PG Recv: {"Type":"ParseComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"BindComplete"}
2026/02/25 16:12:57 PG Recv: {"Type":"NoData"}
2026/02/25 16:12:57 PG Recv: {"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
2026/02/25 16:12:57 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
Diffing schemas: public
2026/02/25 16:12:57 PG Send: {"Type":"Terminate"}
2026/02/25 16:12:57 PG Send: {"Type":"StartupMessage","ProtocolVersion":196608,"Parameters":{"database":"postgres","user":"postgres.xpmbnznsmsujjuwumfiw"}}
2026/02/25 16:12:58 PG Recv: {"Type":"AuthenticationSASL","AuthMechanisms":["SCRAM-SHA-256"]}
2026/02/25 16:12:58 PG Send: {"Type":"SASLInitialResponse","AuthMechanism":"SCRAM-SHA-256","Data":"n,,n=,r=Yk9haP9FxQERXSqJ34GgNhTW"}
2026/02/25 16:12:58 PG Recv: {"Type":"AuthenticationSASLContinue","Data":"r=Yk9haP9FxQERXSqJ34GgNhTWRUJZVEcvYVJEOWVrdkc3YVZpKzdGM1oyblMxRw==,s=5uC/4gvJxZT0AUcc/nO2GQ==,i=4096"}
2026/02/25 16:12:58 PG Send: {"Type":"SASLResponse","Data":"c=biws,r=Yk9haP9FxQERXSqJ34GgNhTWRUJZVEcvYVJEOWVrdkc3YVZpKzdGM1oyblMxRw==,p=qY3DxqNwCp+/rW9vs5oIPsgiIw99wGLwtrspIaVLTQA="}
2026/02/25 16:12:58 PG Recv: {"Type":"AuthenticationSASLFinal","Data":"v=yKrFCzIu5ZH743z776skKJpHQKx0KH86DXNCkS5xfo8="}
2026/02/25 16:12:58 PG Recv: {"Type":"AuthenticationOK"}
2026/02/25 16:12:58 PG Recv: {"Type":"ParameterStatus","Name":"DateStyle","Value":"ISO, MDY"}
2026/02/25 16:12:58 PG Recv: {"Type":"ParameterStatus","Name":"IntervalStyle","Value":"postgres"}
2026/02/25 16:12:58 PG Recv: {"Type":"ParameterStatus","Name":"TimeZone","Value":"UTC"}
2026/02/25 16:12:58 PG Recv: {"Type":"ParameterStatus","Name":"application_name","Value":"Supavisor"}
2026/02/25 16:12:58 PG Recv: {"Type":"ParameterStatus","Name":"client_encoding","Value":"UTF8"}
2026/02/25 16:12:58 PG Recv: {"Type":"ParameterStatus","Name":"default_transaction_read_only","Value":"off"}
2026/02/25 16:12:58 PG Recv: {"Type":"ParameterStatus","Name":"in_hot_standby","Value":"off"}
2026/02/25 16:12:58 PG Recv: {"Type":"ParameterStatus","Name":"integer_datetimes","Value":"on"}
2026/02/25 16:12:58 PG Recv: {"Type":"ParameterStatus","Name":"is_superuser","Value":"off"}
2026/02/25 16:12:58 PG Recv: {"Type":"ParameterStatus","Name":"scram_iterations","Value":"4096"}
2026/02/25 16:12:58 PG Recv: {"Type":"ParameterStatus","Name":"server_encoding","Value":"UTF8"}
2026/02/25 16:12:58 PG Recv: {"Type":"ParameterStatus","Name":"server_version","Value":"17.6"}
2026/02/25 16:12:58 PG Recv: {"Type":"ParameterStatus","Name":"session_authorization","Value":"postgres"}
2026/02/25 16:12:58 PG Recv: {"Type":"ParameterStatus","Name":"standard_conforming_strings","Value":"on"}
2026/02/25 16:12:58 PG Recv: {"Type":"BackendKeyData","ProcessID":103803644,"SecretKey":3202383738}
2026/02/25 16:12:58 PG Recv: {"Type":"ReadyForQuery","TxStatus":"I"}
2026/02/25 16:12:58 PG Send: {"Type":"Terminate"}
error diffing schema: error running container: exit 1:                                                                                                                                                                               
DEBUG No .npmrc file found                                                                                                                                                                                                           
DEBUG Finished config loading.                                                                                                                                                                                                       
DEBUG Opening cache /root/.cache/deno/dep_analysis_cache_v2...                                                                                                                                                                       
DEBUG Opening cache /root/.cache/deno/node_analysis_cache_v2...                                                                                                                                                                      
DEBUG Opening cache /root/.cache/deno/dep_analysis_cache_v2...                                                                                                                                                                       
DEBUG Opening cache /root/.cache/deno/node_analysis_cache_v2...                                                                                                                                                                      
DEBUG FileFetcher::fetch_no_follow_with_options - specifier: file:///index.ts                                                                                                                                                        
DEBUG Created parent directory for cache db.                                                                                                                                                                                         
DEBUG Running npm resolution.                                                                                                                                                                                                        
DEBUG <package-req> - Resolved @pgkit/client@* to @pgkit/client@0.6.1                                                                                                                                                                
DEBUG <package-req> - Resolved @pgkit/migra@* to @pgkit/migra@0.6.1                                                                                                                                                                  
DEBUG @pgkit/client@0.6.1 - Resolved pg@~8.14.1 to pg@8.14.1                                                                                                                                                                         
DEBUG @pgkit/client@0.6.1 - Resolved pg-promise@^11.5.4 to pg-promise@11.15.0                                                                                                                                                        
DEBUG @pgkit/client@0.6.1 - Resolved pgsql-ast-parser@12.0.1 to pgsql-ast-parser@12.0.1                                                                                                                                              
DEBUG @pgkit/migra@0.6.1 - Resolved @pgkit/client@^0.6.1 to @pgkit/client@0.6.1                                                                                                                                                      
DEBUG @pgkit/migra@0.6.1 - Resolved @pgkit/schemainspect@^0.6.1 to @pgkit/schemainspect@0.6.1                                                                                                                                        
DEBUG @pgkit/migra@0.6.1 - Resolved @trpc/server@^11.0.1 to @trpc/server@11.10.0                                                                                                                                                     
DEBUG @pgkit/migra@0.6.1 - Resolved trpc-cli@^0.10.2 to trpc-cli@0.10.2                                                                                                                                                              
DEBUG @pgkit/migra@0.6.1 - Resolved zod@^3.25.20 to zod@3.25.76                                                                                                                                                                      
DEBUG pg@8.14.1 - Resolved pg-cloudflare@^1.1.1 to pg-cloudflare@1.3.0                                                                                                                                                               
DEBUG pg@8.14.1 - Resolved pg-connection-string@^2.7.0 to pg-connection-string@2.11.0                                                                                                                                                
DEBUG pg@8.14.1 - Resolved pg-pool@^3.8.0 to pg-pool@3.11.0                                                                                                                                                                          
DEBUG pg@8.14.1 - Resolved pg-protocol@^1.8.0 to pg-protocol@1.11.0                                                                                                                                                                  
DEBUG pg@8.14.1 - Resolved pg-types@^2.1.0 to pg-types@2.2.0                                                                                                                                                                         
DEBUG pg@8.14.1 - Resolved pgpass@1.x to pgpass@1.0.5                                                                                                                                                                                
DEBUG pg-promise@11.15.0 - Resolved assert-options@0.8.3 to assert-options@0.8.3                                                                                                                                                     
DEBUG pg-promise@11.15.0 - Resolved pg@8.16.3 to pg@8.16.3                                                                                                                                                                           
DEBUG pg-promise@11.15.0 - Resolved pg-minify@1.8.0 to pg-minify@1.8.0                                                                                                                                                               
DEBUG pg-promise@11.15.0 - Resolved pg-query-stream@4.10.3 to pg-query-stream@4.10.3                                                                                                                                                 
DEBUG Resolved peer dependency for pg-query-stream in pg-promise@11.15.0_pg-query-stream@4.10.3 to pg-query-stream@4.10.3                                                                                                            
DEBUG pg-promise@11.15.0_pg-query-stream@4.10.3 - Resolved spex@3.4.1 to spex@3.4.1                                                                                                                                                  
DEBUG pgsql-ast-parser@12.0.1 - Resolved moo@^0.5.1 to moo@0.5.2                                                                                                                                                                     
DEBUG pgsql-ast-parser@12.0.1 - Resolved nearley@^2.19.5 to nearley@2.20.1                                                                                                                                                           
DEBUG @pgkit/schemainspect@0.6.1 - Resolved @pgkit/client@^0.6.1 to @pgkit/client@0.6.1                                                                                                                                              
DEBUG @trpc/server@11.10.0 - Resolved typescript@>=5.7.2 to typescript@5.9.3                                                                                                                                                         
DEBUG Resolved peer dependency for typescript in @trpc/server@11.10.0_typescript@5.9.3 to typescript@5.9.3                                                                                                                           
DEBUG trpc-cli@0.10.2 - Resolved @trpc/server@^11.1.1 to @trpc/server@11.10.0                                                                                                                                                        
DEBUG trpc-cli@0.10.2 - Resolved @types/omelette@^0.4.4 to @types/omelette@0.4.5                                                                                                                                                     
DEBUG trpc-cli@0.10.2 - Resolved commander@^14.0.0 to commander@14.0.3                                                                                                                                                               
DEBUG trpc-cli@0.10.2 - Resolved picocolors@^1.0.1 to picocolors@1.1.1                                                                                                                                                               
DEBUG trpc-cli@0.10.2 - Resolved zod@^3.25.3 to zod@3.25.76                                                                                                                                                                          
DEBUG trpc-cli@0.10.2 - Resolved zod-to-json-schema@^3.23.0 to zod-to-json-schema@3.25.1                                                                                                                                             
DEBUG Resolved peer dependency for pg in pg-pool@3.11.0_pg@8.14.1 to pg@8.14.1                                                                                                                                                       
DEBUG pg-types@2.2.0 - Resolved pg-int8@1.0.1 to pg-int8@1.0.1                                                                                                                                                                       
DEBUG pg-types@2.2.0 - Resolved postgres-array@~2.0.0 to postgres-array@2.0.0                                                                                                                                                        
DEBUG pg-types@2.2.0 - Resolved postgres-bytea@~1.0.0 to postgres-bytea@1.0.1                                                                                                                                                        
DEBUG pg-types@2.2.0 - Resolved postgres-date@~1.0.4 to postgres-date@1.0.7                                                                                                                                                          
DEBUG pg-types@2.2.0 - Resolved postgres-interval@^1.1.0 to postgres-interval@1.2.0                                                                                                                                                  
DEBUG pgpass@1.0.5 - Resolved split2@^4.1.0 to split2@4.2.0                                                                                                                                                                          
DEBUG pg@8.16.3 - Resolved pg-cloudflare@^1.2.7 to pg-cloudflare@1.3.0                                                                                                                                                               
DEBUG pg@8.16.3 - Resolved pg-connection-string@^2.9.1 to pg-connection-string@2.11.0                                                                                                                                                
DEBUG pg@8.16.3 - Resolved pg-pool@^3.10.1 to pg-pool@3.11.0                                                                                                                                                                         
DEBUG pg@8.16.3 - Resolved pg-protocol@^1.10.3 to pg-protocol@1.11.0                                                                                                                                                                 
DEBUG pg@8.16.3 - Resolved pg-types@2.2.0 to pg-types@2.2.0                                                                                                                                                                          
DEBUG pg@8.16.3 - Resolved pgpass@1.0.5 to pgpass@1.0.5                                                                                                                                                                              
DEBUG Resolved peer dependency for pg in pg-query-stream@4.10.3_pg@8.16.3 to pg@8.16.3                                                                                                                                               
DEBUG pg-query-stream@4.10.3_pg@8.16.3 - Resolved pg-cursor@^2.15.3 to pg-cursor@2.17.0                                                                                                                                              
DEBUG nearley@2.20.1 - Resolved commander@^2.19.0 to commander@2.20.3                                                                                                                                                                
DEBUG nearley@2.20.1 - Resolved moo@^0.5.0 to moo@0.5.2                                                                                                                                                                              
DEBUG nearley@2.20.1 - Resolved railroad-diagrams@^1.0.0 to railroad-diagrams@1.0.0                                                                                                                                                  
DEBUG nearley@2.20.1 - Resolved randexp@0.4.6 to randexp@0.4.6                                                                                                                                                                       
DEBUG pg-promise@11.15.0_pg-query-stream@4.10.3__pg@8.16.3 - Resolved pg-query-stream@4.10.3 to pg-query-stream@4.10.3                                                                                                               
DEBUG Resolved peer dependency for pg-query-stream in pg-promise@11.15.0_pg-query-stream@4.10.3__pg@8.16.3_pg-query-stream@4.10.3 to pg-query-stream@4.10.3                                                                          
DEBUG @trpc/server@11.10.0 - Resolved typescript@>=5.7.2 to typescript@5.9.3                                                                                                                                                         
DEBUG Resolved peer dependency for typescript in @trpc/server@11.10.0_typescript@5.9.3 to typescript@5.9.3                                                                                                                           
DEBUG Resolved peer dependency for zod in zod-to-json-schema@3.25.1_zod@3.25.76 to zod@3.25.76                                                                                                                                       
DEBUG postgres-interval@1.2.0 - Resolved xtend@^4.0.0 to xtend@4.0.2                                                                                                                                                                 
DEBUG Resolved peer dependency for pg in pg-pool@3.11.0_pg@8.16.3 to pg@8.16.3                                                                                                                                                       
DEBUG Resolved peer dependency for pg in pg-cursor@2.17.0_pg@8.16.3 to pg@8.16.3                                                                                                                                                     
DEBUG randexp@0.4.6 - Resolved discontinuous-range@1.0.0 to discontinuous-range@1.0.0                                                                                                                                                
DEBUG randexp@0.4.6 - Resolved ret@~0.1.10 to ret@0.1.15                                                                                                                                                                             
DEBUG Resolved peer dependency for pg in pg-pool@3.11.0_pg@8.14.1 to pg@8.14.1                                                                                                                                                       
DEBUG Resolved peer dependency for pg in pg-query-stream@4.10.3_pg@8.16.3 to pg@8.16.3                                                                                                                                               
DEBUG pg-query-stream@4.10.3_pg@8.16.3 - Resolved pg-cursor@^2.15.3 to pg-cursor@2.17.0                                                                                                                                              
DEBUG pg-promise@11.15.0_pg-query-stream@4.10.3__pg@8.16.3 - Resolved pg-query-stream@4.10.3 to pg-query-stream@4.10.3                                                                                                               
DEBUG Resolved peer dependency for pg-query-stream in pg-promise@11.15.0_pg-query-stream@4.10.3__pg@8.16.3_pg-query-stream@4.10.3 to pg-query-stream@4.10.3                                                                          
DEBUG Resolved peer dependency for pg in pg-pool@3.11.0_pg@8.16.3 to pg@8.16.3                                                                                                                                                       
DEBUG Resolved peer dependency for pg in pg-pool@3.11.0_pg@8.16.3 to pg@8.16.3                                                                                                                                                       
DEBUG Resolved peer dependency for pg in pg-cursor@2.17.0_pg@8.16.3 to pg@8.16.3                                                                                                                                                     
DEBUG Resolved peer dependency for pg in pg-pool@3.11.0_pg@8.14.1 to pg@8.14.1                                                                                                                                                       
DEBUG Resolved peer dependency for pg in pg-query-stream@4.10.3_pg@8.16.3 to pg@8.16.3                                                                                                                                               
DEBUG pg-query-stream@4.10.3_pg@8.16.3 - Resolved pg-cursor@^2.15.3 to pg-cursor@2.17.0                                                                                                                                              
DEBUG Resolved peer dependency for pg in pg-pool@3.11.0_pg@8.16.3 to pg@8.16.3                                                                                                                                                       
DEBUG Resolved peer dependency for pg in pg-pool@3.11.0_pg@8.16.3 to pg@8.16.3                                                                                                                                                       
DEBUG Resolved peer dependency for pg in pg-pool@3.11.0_pg@8.16.3 to pg@8.16.3                                                                                                                                                       
DEBUG Resolved peer dependency for pg in pg-cursor@2.17.0_pg@8.16.3 to pg@8.16.3                                                                                                                                                     
DEBUG Resolved peer dependency for pg in pg-pool@3.11.0_pg@8.16.3 to pg@8.16.3                                                                                                                                                       
DEBUG Resolved peer dependency for pg in pg-pool@3.11.0_pg@8.16.3 to pg@8.16.3                                                                                                                                                       
DEBUG Resolved peer dependency for pg in pg-pool@3.11.0_pg@8.16.3 to pg@8.16.3                                                                                                                                                       
DEBUG Building vfs with root '/root/.cache/deno/npm'                                                                                                                                                                                 
DEBUG Resolved package folder of @pgkit/client@0.6.1 to /root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/readme.md'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/naming.d.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/storage.js.map'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/index.js.map'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/index.js'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/type-parsers.js'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/naming.js'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/storage.d.ts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/types.d.ts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/types.js.map'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/index.d.ts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/errors.js.map'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/types.js'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/type-parsers.d.ts'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/errors.js'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/client.js.map'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/standard-schema.js.map'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/standard-schema'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/standard-schema/contract.js'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/standard-schema'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/standard-schema/contract.js.map'                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/standard-schema'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/standard-schema/utils.js.map'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/standard-schema'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/standard-schema/utils.d.ts'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/standard-schema'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/standard-schema/errors.js.map'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/standard-schema'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/standard-schema/errors.js'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/standard-schema'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/standard-schema/errors.d.ts'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/standard-schema'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/standard-schema/utils.js'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/standard-schema'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/standard-schema/contract.d.ts'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/standard-schema'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/sql.js.map'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/client.d.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/errors.d.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/naming.js.map'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/sql.d.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/standard-schema.js'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/storage.js'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/client.js'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/type-parsers.js.map'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/sql.js'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist/standard-schema.d.ts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/dist'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src/naming.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src/type-parsers.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src/client.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src/types.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src/standard-schema'                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src/standard-schema/contract.ts'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src/standard-schema'                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src/standard-schema/utils.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src/standard-schema'                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src/standard-schema/errors.ts'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src/standard-schema'                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src/index.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src/storage.ts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src/errors.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src/sql.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/src'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/LICENSE'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1/package.json'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/client/0.6.1'                                                                                                                                              
DEBUG Resolved package folder of @pgkit/migra@0.6.1 to /root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/readme.md'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/changes.d.ts.map'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/migra.d.ts.map'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/index.js.map'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/command.js.map'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/util.d.ts.map'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/index.js'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/changes.js.map'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/index.d.ts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/statements.js.map'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/index.d.ts.map'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/changes.js'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/statements.js'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/command.d.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/util.d.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/util.js.map'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/command.d.ts.map'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/changes.d.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/command.js'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/statements.d.ts.map'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/statements.d.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/migra.js'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/util.js'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/migra.d.ts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist/migra.js.map'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/LICENSE'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1/package.json'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/migra/0.6.1'                                                                                                                                               
DEBUG Resolved package folder of @pgkit/schemainspect@0.6.1 to /root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/readme.md'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/inspected.js'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/index.js.map'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/command.js.map'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/util.d.ts.map'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/inspector.js.map'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/index.js'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/isa-asa.d.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/misc.d.ts.map'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/tableformat.d.ts.map'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/auto-this.js'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/tableformat.js'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/inspected.js.map'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/auto-this.js.map'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/types.d.ts'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/graphlib'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/graphlib/index.js.map'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/graphlib'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/graphlib/index.js'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/graphlib'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/graphlib/index.d.ts'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/graphlib'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/graphlib/index.d.ts.map'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/graphlib'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/types.js.map'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/index.d.ts'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/queries.js.map'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/types.js'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/isa-asa.js'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/isa-asa.js.map'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/inspector.d.ts'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/index.d.ts.map'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/queries.d.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/get.js.map'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/command.d.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/inspected.d.ts'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/util.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/inspector.js'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/get.js'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/util.js.map'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/pg'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/pg/index.js.map'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/pg'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/pg/index.js'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/pg'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/pg/obj.js'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/pg'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/pg/index.d.ts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/pg'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/pg/obj.d.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/pg'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/pg/index.d.ts.map'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/pg'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/pg/obj.d.ts.map'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/pg'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/pg/obj.js.map'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/pg'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/misc.js'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/queries.js'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/inspector.d.ts.map'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/command.d.ts.map'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/tableformat.d.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/get.d.ts'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/misc.js.map'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/command.js'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/inspected.d.ts.map'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/tableformat.js.map'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/auto-this.d.ts'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/auto-this.d.ts.map'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/util.js'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/isa-asa.d.ts.map'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/types.d.ts.map'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/get.d.ts.map'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist/misc.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/dist'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/LICENSE'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1/package.json'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@pgkit/schemainspect/0.6.1'                                                                                                                                       
DEBUG Resolved package folder of @trpc/server@11.10.0_typescript@5.9.3 to /root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/http'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/http/package.json'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/http'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/observable'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/observable/package.json'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/observable'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/index.d-rTzuWy5s.d.cts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/unstable-core-do-not-import.d-DEjy79nN.d.cts.map'                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/rpc.d.mts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/shared.d.mts'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/observable-B1Nk6r1H.cjs'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/unstable-core-do-not-import-fsjhEhgh.cjs'                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/parseTRPCMessage-CTow-umk.mjs'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/http.mjs'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/node-http-DtA2iLK9.mjs'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/codes-DagpWZLc.mjs.map'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/shared.d.cts'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/initTRPC-RoZMIBeA.mjs.map'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/rpc.cjs'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/contentTypeParsers-iAFF_pJG.cjs'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/ws-CJgZE7Hg.mjs'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/node-http-DtA2iLK9.mjs.map'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/index.d-vq_QHko2.d.mts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/shared.cjs'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/index.d.cts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/getErrorShape-vC8mUXJD.mjs.map'                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/unstable-core-do-not-import.d.mts'                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/ws-CJgZE7Hg.mjs.map'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/observable'                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/observable/index.d.cts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/observable'                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/observable/index.mjs'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/observable'                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/observable/index.d.mts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/observable'                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/observable/index.cjs'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/observable'                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/index.d-C_zRYGiu.d.mts.map'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/contentTypeParsers-SN4WL9ze.mjs'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/node-http-Cnp9YtdI.cjs'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/aws-lambda'                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/aws-lambda/index.d.mts.map'                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/aws-lambda'                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/aws-lambda/index.d.cts'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/aws-lambda'                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/aws-lambda/index.mjs.map'                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/aws-lambda'                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/aws-lambda/index.mjs'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/aws-lambda'                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/aws-lambda/index.d.cts.map'                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/aws-lambda'                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/aws-lambda/index.d.mts'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/aws-lambda'                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/aws-lambda/index.cjs'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/aws-lambda'                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/standalone.d.mts.map'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/node-http'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/node-http/index.d.cts'                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/node-http'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/node-http/index.mjs'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/node-http'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/node-http/index.d.mts'                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/node-http'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/node-http/index.cjs'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/node-http'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/next-app-dir.d.cts.map'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/next.d.mts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/ws.d.cts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/next-app-dir.d.cts'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/express.mjs.map'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/standalone.cjs'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/ws.cjs'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/ws.d.mts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/express.mjs'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/next.d.cts.map'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/next-app-dir.d.mts'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/standalone.mjs.map'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/next-app-dir.d.mts.map'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/next.mjs.map'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/next.d.cts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fetch'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fetch/index.d.mts.map'                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fetch'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fetch/index.d.cts'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fetch'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fetch/index.mjs.map'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fetch'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fetch/index.mjs'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fetch'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fetch/index.d.cts.map'                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fetch'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fetch/index.d.mts'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fetch'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fetch/index.cjs'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fetch'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/next-app-dir.mjs'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/standalone.d.cts'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/express.d.cts.map'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/next-app-dir.cjs'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/next.cjs'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/ws.d.mts.map'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/standalone.d.mts'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/next.mjs'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/standalone.mjs'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/express.d.cts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/ws.mjs'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/next.d.mts.map'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fastify'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fastify/index.d.mts.map'                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fastify'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fastify/index.d.cts'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fastify'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fastify/index.mjs.map'                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fastify'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fastify/index.mjs'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fastify'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fastify/index.d.cts.map'                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fastify'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fastify/index.d.mts'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fastify'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fastify/index.cjs'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/fastify'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/ws.d.cts.map'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/next-app-dir.mjs.map'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/standalone.d.cts.map'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/express.d.mts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/express.d.mts.map'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters/express.cjs'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/adapters'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/index.d-vq_QHko2.d.mts.map'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/unstable-core-do-not-import-9NNw8uQM.mjs.map'                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/index.mjs'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/observable-CUiPknO-.mjs'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/observable-CUiPknO-.mjs.map'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/index.d-BiUz7kM_.d.cts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/http-DXy3XyhL.cjs'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/codes-DagpWZLc.mjs'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/index.d-C_zRYGiu.d.mts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/codes-BfZsPdy-.cjs'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/index.d-D4qZxQJh.d.mts.map'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/http.d.mts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/observable-BVzLuBs6.cjs'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/http-CWyjOa1l.mjs'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/shared.mjs'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/ws-D7wcL190.cjs'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/parseTRPCMessage-CTow-umk.mjs.map'                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/observable-UMO3vUa_.mjs'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/resolveResponse-BsnbAhRr.cjs'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/unstable-core-do-not-import-9NNw8uQM.mjs'                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/index.d.mts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/parseTRPCMessage-7Ltmq-Fb.cjs'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/getErrorShape-vC8mUXJD.mjs'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/tracked-Bjtgv3wJ.mjs.map'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/unstable-core-do-not-import.d.cts'                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/initTRPC-_LnoxDdS.cjs'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/rpc.d.cts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/unstable-core-do-not-import.d-BxnV2Pug.d.mts.map'                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/resolveResponse-BVDlNZwN.mjs'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/tracked-Bjtgv3wJ.mjs'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/tracked-DX1GMBVX.cjs'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/contentTypeParsers-SN4WL9ze.mjs.map'                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/index.d-D4qZxQJh.d.mts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/http.d.cts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/resolveResponse-BVDlNZwN.mjs.map'                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/index.d-CvZXeEyR.d.cts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/unstable-core-do-not-import.d-DEjy79nN.d.cts'                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/index.d-CvZXeEyR.d.cts.map'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/observable-UMO3vUa_.mjs.map'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/index.d-rTzuWy5s.d.cts.map'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/http.cjs'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/unstable-core-do-not-import.mjs'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/index.d-BiUz7kM_.d.cts.map'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/unstable-core-do-not-import.cjs'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/initTRPC-RoZMIBeA.mjs'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/unstable-core-do-not-import.d-BxnV2Pug.d.mts'                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/getErrorShape-MR4DZeb7.cjs'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/index.cjs'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist/rpc.mjs'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/dist'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/aws-lambda'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/aws-lambda/package.json'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/aws-lambda'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/node-http'                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/node-http/package.json'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/node-http'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/next-app-dir'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/next-app-dir/package.json'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/next-app-dir'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/fetch'                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/fetch/package.json'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/fetch'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/ws'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/ws/package.json'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/ws'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/express'                                                                                                                            
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/express/package.json'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/express'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/next'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/next/package.json'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/next'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/standalone'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/standalone/package.json'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/standalone'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/fastify'                                                                                                                            
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/fastify/package.json'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/adapters/fastify'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/shared'                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/shared/package.json'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/shared'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/rpc'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/rpc/package.json'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/rpc'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/shared.ts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/observable'                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/observable/behaviorSubject.ts'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/observable'                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/observable/types.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/observable'                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/observable/operators.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/observable'                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/observable/observable.ts'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/observable'                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/observable/index.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/observable'                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/http.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/@trpc'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/@trpc/server'                                                                                                                            
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/@trpc/server/http.ts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/@trpc/server'                                                                                                                            
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/@trpc/server/index.ts'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/@trpc/server'                                                                                                                            
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/@trpc/server/rpc.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/@trpc/server'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters'                                                                                                                                
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/ws.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/aws-lambda'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/aws-lambda/getPlanner.ts'                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/aws-lambda'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/aws-lambda/index.ts'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/aws-lambda'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/wsEncoder.ts'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/node-http'                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/node-http/incomingMessageToRequest.ts'                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/node-http'                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/node-http/types.ts'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/node-http'                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/node-http/nodeHTTPRequestHandler.ts'                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/node-http'                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/node-http/index.ts'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/node-http'                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/node-http/writeResponse.ts'                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/node-http'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/next-app-dir'                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/next-app-dir/rethrowNextErrors.ts'                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/next-app-dir'                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/next-app-dir/notFound.ts'                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/next-app-dir'                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/next-app-dir/redirect.ts'                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/next-app-dir'                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/next-app-dir/nextAppDirCaller.ts'                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/next-app-dir'                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/standalone.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters'                                                                                                                                
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/express.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters'                                                                                                                                
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/next-app-dir.ts'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/fetch'                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/fetch/types.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/fetch'                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/fetch/index.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/fetch'                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/fetch/fetchRequestHandler.ts'                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/fetch'                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/next.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/fastify'                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/fastify/fastifyTRPCPlugin.ts'                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/fastify'                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/fastify/index.ts'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/fastify'                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/fastify/fastifyRequestHandler.ts'                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/adapters/fastify'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor/unpromise'                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor/unpromise/types.ts'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor/unpromise'                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor/unpromise/LICENSE'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor/unpromise'                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor/unpromise/ATTRIBUTION.txt'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor/unpromise'                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor/unpromise/index.ts'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor/unpromise'                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor/unpromise/unpromise.ts'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor/unpromise'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor/standard-schema-v1'                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor/standard-schema-v1/spec.ts'                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor/standard-schema-v1'                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor/standard-schema-v1/error.ts'                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor/standard-schema-v1'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor/cookie-es'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor/cookie-es/set-cookie'                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor/cookie-es/set-cookie/split.ts'                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor/cookie-es/set-cookie'                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor/is-plain-object.ts'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/vendor'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/index.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/rpc.ts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import.ts'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import'                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/procedureBuilder.ts'                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import'                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/http'                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/http/contentType.ts'                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/http'                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/http/getHTTPStatusCode.ts'                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/http'                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/http/types.ts'                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/http'                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/http/abortError.ts'                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/http'                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/http/resolveResponse.ts'                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/http'                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/http/contentTypeParsers.ts'                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/http'                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/http/parseConnectionParams.ts'                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/http'                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/http/formDataToObject.ts'                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/http'                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/createProxy.ts'                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import'                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream'                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream/tracked.ts'                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream'                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream/sse.types.ts'                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream'                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream/utils'                                                                                                
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream/utils/createDeferred.ts'                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream/utils'                                                                                                
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream/utils/mergeAsyncIterables.ts'                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream/utils'                                                                                                
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream/utils/timerResource.ts'                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream/utils'                                                                                                
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream/utils/withPing.ts'                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream/utils'                                                                                                
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream/utils/asyncIterable.ts'                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream/utils'                                                                                                
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream/utils/disposable.ts'                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream/utils'                                                                                                
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream/utils/readableStreamFrom.ts'                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream/utils'                                                                                                
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream/jsonl.ts'                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream'                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream/sse.ts'                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/stream'                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/types.ts'                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import'                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/middleware.ts'                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import'                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/rpc'                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/rpc/envelopes.ts'                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/rpc'                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/rpc/codes.ts'                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/rpc'                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/rpc/parseTRPCMessage.ts'                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/rpc'                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/rpc/index.ts'                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/rpc'                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/procedure.ts'                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import'                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/clientish'                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/clientish/inference.ts'                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/clientish'                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/clientish/inferrable.ts'                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/clientish'                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/clientish/serialize.ts'                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/clientish'                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/error'                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/error/getErrorShape.ts'                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/error'                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/error/TRPCError.ts'                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/error'                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/error/formatter.ts'                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/error'                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/router.ts'                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import'                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/transformer.ts'                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import'                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/utils.ts'                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import'                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/initTRPC.ts'                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import'                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/parser.ts'                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import'                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import/rootConfig.ts'                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/src/unstable-core-do-not-import'                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/LICENSE'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/README.md'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/unstable-core-do-not-import'                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/unstable-core-do-not-import/package.json'                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/unstable-core-do-not-import'                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0/package.json'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@trpc/server/11.10.0'                                                                                                                                             
DEBUG Resolved package folder of @types/omelette@0.4.5 to /root/.cache/deno/npm/registry.npmjs.org/@types/omelette/0.4.5                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@types/omelette/0.4.5'                                                                                                                                            
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@types/omelette/0.4.5/index.d.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@types/omelette/0.4.5'                                                                                                                                            
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@types/omelette/0.4.5/LICENSE'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@types/omelette/0.4.5'                                                                                                                                            
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@types/omelette/0.4.5/README.md'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@types/omelette/0.4.5'                                                                                                                                            
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/@types/omelette/0.4.5/package.json'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/@types/omelette/0.4.5'                                                                                                                                            
DEBUG Resolved package folder of assert-options@0.8.3 to /root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3/dist'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3/dist/src'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3/dist/src/index.js'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3/dist/src'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3/dist/src/types.d.ts'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3/dist/src'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3/dist/src/index.d.ts'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3/dist/src'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3/dist/src/types.js'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3/dist/src'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3/dist/src/handler.d.ts'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3/dist/src'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3/dist/src/handler.js'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3/dist/src'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3/dist/src/assert.js'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3/dist/src'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3/dist/src/assert.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3/dist/src'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3/LICENSE'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3/README.md'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3/package.json'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/assert-options/0.8.3'                                                                                                                                             
DEBUG Resolved package folder of commander@2.20.3 to /root/.cache/deno/npm/registry.npmjs.org/commander/2.20.3                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/2.20.3'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/2.20.3/typings'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/commander/2.20.3/typings/index.d.ts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/2.20.3/typings'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/commander/2.20.3/index.js'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/2.20.3'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/commander/2.20.3/CHANGELOG.md'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/2.20.3'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/commander/2.20.3/LICENSE'                                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/2.20.3'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/commander/2.20.3/Readme.md'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/2.20.3'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/commander/2.20.3/package.json'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/2.20.3'                                                                                                                                                 
DEBUG Resolved package folder of commander@14.0.3 to /root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/typings'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/typings/esm.d.mts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/typings'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/typings/index.d.ts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/typings'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/index.js'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/esm.mjs'                                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/LICENSE'                                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/package-support.json'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/lib/option.js'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/lib/help.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/lib/command.js'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/lib/error.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/lib/argument.js'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/lib/suggestSimilar.js'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/Readme.md'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3/package.json'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/commander/14.0.3'                                                                                                                                                 
DEBUG Resolved package folder of discontinuous-range@1.0.0 to /root/.cache/deno/npm/registry.npmjs.org/discontinuous-range/1.0.0                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/discontinuous-range/1.0.0'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/discontinuous-range/1.0.0/index.js'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/discontinuous-range/1.0.0'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/discontinuous-range/1.0.0/LICENSE'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/discontinuous-range/1.0.0'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/discontinuous-range/1.0.0/README.md'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/discontinuous-range/1.0.0'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/discontinuous-range/1.0.0/.npmignore'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/discontinuous-range/1.0.0'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/discontinuous-range/1.0.0/test'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/discontinuous-range/1.0.0/test/main-test.js'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/discontinuous-range/1.0.0/test'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/discontinuous-range/1.0.0/package.json'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/discontinuous-range/1.0.0'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/discontinuous-range/1.0.0/.travis.yml'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/discontinuous-range/1.0.0'                                                                                                                                        
DEBUG Resolved package folder of moo@0.5.2 to /root/.cache/deno/npm/registry.npmjs.org/moo/0.5.2                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/moo/0.5.2'                                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/moo/0.5.2/moo.js'                                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/moo/0.5.2'                                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/moo/0.5.2/LICENSE'                                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/moo/0.5.2'                                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/moo/0.5.2/README.md'                                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/moo/0.5.2'                                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/moo/0.5.2/package.json'                                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/moo/0.5.2'                                                                                                                                                        
DEBUG Resolved package folder of nearley@2.20.1 to /root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/LICENSE.txt'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/README.md'                                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1'                                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/lib'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/lib/nearley-language-bootstrapped.js'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/lib'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/lib/lint.js'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/lib'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/lib/unparse.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/lib'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/lib/compile.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/lib'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/lib/generate.js'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/lib'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/lib/nearley.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/lib'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/lib/nearley-language-bootstrapped.ne'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/lib'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/lib/stream.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/lib'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/builtin'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/builtin/number.ne'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/builtin'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/builtin/postprocessors.ne'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/builtin'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/builtin/cow.ne'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/builtin'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/builtin/whitespace.ne'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/builtin'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/builtin/string.ne'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/builtin'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/package.json'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1'                                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/bin'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/bin/nearley-unparse.js'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/bin'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/bin/nearley-test.js'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/bin'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/bin/nearley-railroad.js'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/bin'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/bin/nearleyc.js'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/nearley/2.20.1/bin'                                                                                                                                               
DEBUG Resolved package folder of pg@8.14.1 to /root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1'                                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/LICENSE'                                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1'                                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/README.md'                                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1'                                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/query.js'                                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/result.js'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/index.js'                                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/connection-parameters.js'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib'                                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/crypto'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/crypto/sasl.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/crypto'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/crypto/cert-signatures.js'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/crypto'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/crypto/utils-legacy.js'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/crypto'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/crypto/utils-webcrypto.js'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/crypto'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/crypto/utils.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/crypto'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/native'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/native/query.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/native'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/native/index.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/native'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/native/client.js'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/native'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/defaults.js'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/client.js'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/connection.js'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/type-overrides.js'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/stream.js'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib/utils.js'                                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/lib'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1/package.json'                                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.14.1'                                                                                                                                                        
DEBUG Resolved package folder of pg@8.16.3 to /root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3'                                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/esm'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/esm/index.mjs'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/esm'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/LICENSE'                                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3'                                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/README.md'                                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3'                                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/query.js'                                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/result.js'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/index.js'                                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/connection-parameters.js'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib'                                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/crypto'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/crypto/sasl.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/crypto'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/crypto/cert-signatures.js'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/crypto'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/crypto/utils-legacy.js'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/crypto'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/crypto/utils-webcrypto.js'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/crypto'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/crypto/utils.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/crypto'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/native'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/native/query.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/native'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/native/index.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/native'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/native/client.js'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/native'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/defaults.js'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/client.js'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/connection.js'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/type-overrides.js'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/stream.js'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib/utils.js'                                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/lib'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3/package.json'                                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg/8.16.3'                                                                                                                                                        
DEBUG Resolved package folder of pg-cloudflare@1.3.0 to /root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/dist/index.js.map'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/dist/index.js'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/dist/index.d.ts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/dist/empty.js'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/dist/empty.d.ts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/dist'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/dist/empty.js.map'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/dist'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/src'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/src/types.d.ts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/src'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/src/empty.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/src'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/src/index.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/src'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/esm'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/esm/index.mjs'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/esm'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/LICENSE'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/README.md'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0/package.json'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cloudflare/1.3.0'                                                                                                                                              
DEBUG Resolved package folder of pg-connection-string@2.11.0 to /root/.cache/deno/npm/registry.npmjs.org/pg-connection-string/2.11.0                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-connection-string/2.11.0'                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-connection-string/2.11.0/index.js'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-connection-string/2.11.0'                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-connection-string/2.11.0/index.d.ts'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-connection-string/2.11.0'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-connection-string/2.11.0/esm'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-connection-string/2.11.0/esm/index.mjs'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-connection-string/2.11.0/esm'                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-connection-string/2.11.0/LICENSE'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-connection-string/2.11.0'                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-connection-string/2.11.0/README.md'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-connection-string/2.11.0'                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-connection-string/2.11.0/package.json'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-connection-string/2.11.0'                                                                                                                                      
DEBUG Resolved package folder of pg-cursor@2.17.0_pg@8.16.3 to /root/.cache/deno/npm/registry.npmjs.org/pg-cursor/2.17.0                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cursor/2.17.0'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-cursor/2.17.0/index.js'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cursor/2.17.0'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cursor/2.17.0/esm'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-cursor/2.17.0/esm/index.mjs'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cursor/2.17.0/esm'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-cursor/2.17.0/LICENSE'                                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cursor/2.17.0'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-cursor/2.17.0/README.md'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cursor/2.17.0'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-cursor/2.17.0/package.json'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-cursor/2.17.0'                                                                                                                                                 
DEBUG Resolved package folder of pg-int8@1.0.1 to /root/.cache/deno/npm/registry.npmjs.org/pg-int8/1.0.1                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-int8/1.0.1'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-int8/1.0.1/index.js'                                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-int8/1.0.1'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-int8/1.0.1/LICENSE'                                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-int8/1.0.1'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-int8/1.0.1/README.md'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-int8/1.0.1'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-int8/1.0.1/package.json'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-int8/1.0.1'                                                                                                                                                    
DEBUG Resolved package folder of pg-minify@1.8.0 to /root/.cache/deno/npm/registry.npmjs.org/pg-minify/1.8.0                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-minify/1.8.0'                                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-minify/1.8.0/typescript'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-minify/1.8.0/typescript/pg-minify.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-minify/1.8.0/typescript'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-minify/1.8.0/typescript/README.md'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-minify/1.8.0/typescript'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-minify/1.8.0/README.md'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-minify/1.8.0'                                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-minify/1.8.0/lib'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-minify/1.8.0/lib/index.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-minify/1.8.0/lib'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-minify/1.8.0/lib/parser.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-minify/1.8.0/lib'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-minify/1.8.0/lib/error.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-minify/1.8.0/lib'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-minify/1.8.0/lib/utils.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-minify/1.8.0/lib'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-minify/1.8.0/package.json'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-minify/1.8.0'                                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-minify/1.8.0/License'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-minify/1.8.0'                                                                                                                                                  
DEBUG Resolved package folder of pg-pool@3.11.0_pg@8.14.1 to /root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0/index.js'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0'                                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0/esm'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0/esm/index.mjs'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0/esm'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0/LICENSE'                                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0/README.md'                                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0/package.json'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0'                                                                                                                                                   
DEBUG Resolved package folder of pg-pool@3.11.0_pg@8.16.3 to /root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0_1                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0_1'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0_1/index.js'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0_1'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0_1/esm'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0_1/esm/index.mjs'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0_1/esm'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0_1/LICENSE'                                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0_1'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0_1/README.md'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0_1'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0_1/package.json'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-pool/3.11.0_1'                                                                                                                                                 
DEBUG Resolved package folder of pg-promise@11.15.0_pg-query-stream@4.10.3__pg@8.16.3_pg@8.16.3 to /root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/typescript'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/typescript/pg-subset.d.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/typescript'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/typescript/tslint.json'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/typescript'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/typescript/pg-promise.d.ts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/typescript'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/typescript/README.md'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/typescript'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/LICENSE'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/README.md'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/query.js'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/database.js'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/index.js'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/connect.js'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/special-query.js'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/query-file.js'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers/index.js'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers/column.js'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers/column-set.js'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers/methods'                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers/methods/update.js'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers/methods'                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers/methods/index.js'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers/methods'                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers/methods/insert.js'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers/methods'                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers/methods/concat.js'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers/methods'                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers/methods/sets.js'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers/methods'                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers/methods/values.js'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers/methods'                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers/README.md'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers/table-name.js'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/helpers'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/promise-adapter.js'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/types'                                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/types/index.js'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/types'                                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/types/server-formatting.js'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/types'                                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/types/prepared-statement.js'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/types'                                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/types/parameterized-query.js'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/types'                                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/main.js'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/formatting.js'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/errors'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/errors/index.js'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/errors'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/errors/query-file-error.js'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/errors'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/errors/parameterized-query-error.js'                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/errors'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/errors/prepared-statement-error.js'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/errors'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/errors/query-result-error.js'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/errors'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/errors/README.md'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/errors'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/assert.js'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/context.js'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/tx-mode.js'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/patterns.js'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/promise-parser.js'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/events.js'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/text.js'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/database-pool.js'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/utils'                                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/utils/index.js'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/utils'                                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/utils/public.js'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/utils'                                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/utils/README.md'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/utils'                                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/utils/color.js'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/utils'                                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/inner-state.js'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/stream.js'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/task.js'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib/query-result.js'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/lib'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0/package.json'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-promise/11.15.0'                                                                                                                                               
DEBUG Resolved package folder of pg-protocol@1.11.0 to /root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/buffer-reader.js.map'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/index.js.map'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/inbound-parser.test.js.map'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/buffer-writer.js.map'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/buffer-reader.js'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/index.js'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/buffer-writer.d.ts'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/outbound-serializer.test.js'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/b.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/serializer.js'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/messages.js.map'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/index.d.ts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/serializer.d.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/b.js.map'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/parser.js'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/messages.d.ts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/inbound-parser.test.js'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/parser.d.ts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/messages.js'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/buffer-writer.js'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/serializer.js.map'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/buffer-reader.d.ts'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/inbound-parser.test.d.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/b.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/parser.js.map'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/outbound-serializer.test.d.ts'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist/outbound-serializer.test.js.map'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/dist'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src/buffer-reader.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src/inbound-parser.test.ts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src/messages.ts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src/b.ts'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src/outbound-serializer.test.ts'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src/buffer-writer.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src/serializer.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src/types'                                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src/types/chunky.d.ts'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src/types'                                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src/index.ts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src/testing'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src/testing/test-buffers.ts'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src/testing'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src/testing/buffer-list.ts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src/testing'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src/parser.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/src'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/esm'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/esm/index.js'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/esm'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/LICENSE'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/README.md'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0/package.json'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-protocol/1.11.0'                                                                                                                                               
DEBUG Resolved package folder of pg-query-stream@4.10.3_pg@8.16.3 to /root/.cache/deno/npm/registry.npmjs.org/pg-query-stream/4.10.3                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-query-stream/4.10.3'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-query-stream/4.10.3/dist'                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-query-stream/4.10.3/dist/index.js.map'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-query-stream/4.10.3/dist'                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-query-stream/4.10.3/dist/index.js'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-query-stream/4.10.3/dist'                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-query-stream/4.10.3/dist/index.d.ts'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-query-stream/4.10.3/dist'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-query-stream/4.10.3/src'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-query-stream/4.10.3/src/index.ts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-query-stream/4.10.3/src'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-query-stream/4.10.3/esm'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-query-stream/4.10.3/esm/index.mjs'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-query-stream/4.10.3/esm'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-query-stream/4.10.3/LICENSE'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-query-stream/4.10.3'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-query-stream/4.10.3/README.md'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-query-stream/4.10.3'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-query-stream/4.10.3/package.json'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-query-stream/4.10.3'                                                                                                                                           
DEBUG Resolved package folder of pg-types@2.2.0 to /root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0/index.js'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0/index.d.ts'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0/README.md'                                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0/index.test-d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0'                                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0/lib'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0/lib/arrayParser.js'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0/lib'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0/lib/binaryParsers.js'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0/lib'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0/lib/builtins.js'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0/lib'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0/lib/textParsers.js'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0/lib'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0/test'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0/test/index.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0/test'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0/test/types.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0/test'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0/package.json'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0/Makefile'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0/.travis.yml'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pg-types/2.2.0'                                                                                                                                                   
DEBUG Resolved package folder of pgpass@1.0.5 to /root/.cache/deno/npm/registry.npmjs.org/pgpass/1.0.5                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgpass/1.0.5'                                                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgpass/1.0.5/README.md'                                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgpass/1.0.5'                                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgpass/1.0.5/lib'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgpass/1.0.5/lib/index.js'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgpass/1.0.5/lib'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgpass/1.0.5/lib/helper.js'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgpass/1.0.5/lib'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgpass/1.0.5/package.json'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgpass/1.0.5'                                                                                                                                                     
DEBUG Resolved package folder of pgsql-ast-parser@12.0.1 to /root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/index.js.map'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/index.js'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/pg-escape.d.ts.map'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/interfaces.d.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/readme.md'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/ast-visitor.d.ts.map'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/index.d.ts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/utils.d.ts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/lexer.d.ts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/ast-mapper.spec.d.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/drop.spec.d.ts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/union.spec.d.ts'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/functions.spec.d.ts.map'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/sequence.spec.d.ts'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/deallocate.spec.d.ts'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/expr.spec.d.ts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/create-table.spec.d.ts'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/insert.spec.d.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/refresh-materialized-view.spec.d.ts'                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/create-index.spec.d.ts'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/create-type.spec.d.ts'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/insert.spec.d.ts.map'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/prepare.spec.d.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/with.spec.d.ts.map'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/functions.spec.d.ts'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/update.spec.d.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/alter-table.spec.d.ts'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/ast.d.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/alter-type.spec.d.ts.map'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/create-extension.spec.d.ts'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/spec-utils.d.ts.map'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/create-table.spec.d.ts.map'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/edge-cases.spec.d.ts.map'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/alter-type.spec.d.ts'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/simple-statements.spec.d.ts.map'                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/deallocate.spec.d.ts.map'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/create-index.spec.d.ts.map'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/main.ne.d.ts.map'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/spec-utils.d.ts'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/simple-statements.spec.d.ts'                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/refresh-materialized-view.spec.d.ts.map'                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/alter-table.spec.d.ts.map'                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/create-type.spec.d.ts.map'                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/select.spec.d.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/edge-cases.spec.d.ts'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/create-extension.spec.d.ts.map'                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/sequence.spec.d.ts.map'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/delete.spec.d.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/with.spec.d.ts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/union.spec.d.ts.map'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/ast.d.ts.map'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/select.spec.d.ts.map'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/create-view.spec.d.ts'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/alter-index.spec.d.ts.map'                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/update.spec.d.ts.map'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/expr.spec.d.ts.map'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/main.ne.d.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/delete.spec.d.ts.map'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/create-view.spec.d.ts.map'                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/prepare.spec.d.ts.map'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/drop.spec.d.ts.map'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax/alter-index.spec.d.ts'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/syntax'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src'                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/ast-mapper.spec.ts'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src'                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/interfaces.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src'                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/lexer.spec.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src'                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/keywords.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/union.spec.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/prepare.spec.ts'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/alter-type.ne'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/with.spec.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/alter-table.ne'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/drop.spec.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/create-type.ne'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/alter-table.spec.ts'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/create-table.spec.ts'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/alter-type.spec.ts'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/sequence.spec.ts'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/expr.spec.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/create-index.spec.ts'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/nearley.d.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/update.ne'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/update.spec.ts'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/ast.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/select.spec.ts'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/delete.spec.ts'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/create-extension.ne'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/create-index.ne'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/alter-index.spec.ts'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/refresh-materialized-view.ne'                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/select.ne'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/create-view.spec.ts'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/create-type.spec.ts'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/insert.ne'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/create-extension.spec.ts'                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/with.ne'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/create-table.ne'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/main.ne'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/union.ne'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/refresh-materialized-view.spec.ts'                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/alter-index.ne'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/sequence.ne'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/simple-statements.spec.ts'                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/deallocate.ne'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/base.ne'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/create-view.ne'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/deallocate.spec.ts'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/spec-utils.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/delete.ne'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/functions.spec.ts'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/simple-statements.ne'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/edge-cases.spec.ts'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/drop.ne'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/insert.spec.ts'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/functions.ne'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/prepare.ne'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax/expr.ne'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/syntax'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes/array.spec.ts'                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes/interval.ne'                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes/geometric-lexer.ts'                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes/geometric.spec.ts'                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes/interval-builder.ts'                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes/interval.spec.ts'                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes/geometric.ne'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes/array-lexer.ts'                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes/interval-lexer.ts'                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes/interval-iso-lexer.ts'                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes/interval-iso.ne'                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes/array.ne'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/literal-syntaxes'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/to-sql.ts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src'                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/ast-visitor.spec.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src'                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/ast-visitor.ts'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src'                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/ast-mapper.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src'                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/to-sql.spec.ts'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src'                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/index.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src'                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/pg-escape.ts'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src'                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/utils.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src'                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/lexer.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src'                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src/parser.ts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/src'                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/interfaces.d.ts.map'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/index.d.ts.map'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/keywords.d.ts.map'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/geometric-lexer.d.ts'                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/interval-lexer.d.ts.map'                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/array.spec.d.ts'                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/interval-builder.d.ts'                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/geometric-lexer.d.ts.map'                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/interval-iso-lexer.d.ts.map'                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/array-lexer.d.ts.map'                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/interval-iso.ne.d.ts'                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/interval.spec.d.ts.map'                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/interval.ne.d.ts.map'                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/interval-lexer.d.ts'                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/geometric.spec.d.ts.map'                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/interval-iso.ne.d.ts.map'                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/array.ne.d.ts'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/geometric.ne.d.ts'                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/array-lexer.d.ts'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/interval.ne.d.ts'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/interval-iso-lexer.d.ts'                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/interval.spec.d.ts'                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/interval-builder.d.ts.map'                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/array.ne.d.ts.map'                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/geometric.spec.d.ts'                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/geometric.ne.d.ts.map'                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes/array.spec.d.ts.map'                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/literal-syntaxes'                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/keywords.d.ts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/utils.d.ts.map'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/to-sql.d.ts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/ast-mapper.d.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/parser.d.ts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/to-sql.spec.d.ts'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/to-sql.d.ts.map'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/ast-visitor.d.ts'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/ast-visitor.spec.d.ts.map'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/package.json'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/ast-mapper.d.ts.map'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/ast-mapper.spec.d.ts.map'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/ast-visitor.spec.d.ts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/parser.d.ts.map'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/lexer.spec.d.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/lexer.d.ts.map'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/to-sql.spec.d.ts.map'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/pg-escape.d.ts'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1/lexer.spec.d.ts.map'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/pgsql-ast-parser/12.0.1'                                                                                                                                          
DEBUG Resolved package folder of picocolors@1.1.1 to /root/.cache/deno/npm/registry.npmjs.org/picocolors/1.1.1                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/picocolors/1.1.1'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/picocolors/1.1.1/picocolors.browser.js'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/picocolors/1.1.1'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/picocolors/1.1.1/types.d.ts'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/picocolors/1.1.1'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/picocolors/1.1.1/LICENSE'                                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/picocolors/1.1.1'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/picocolors/1.1.1/picocolors.d.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/picocolors/1.1.1'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/picocolors/1.1.1/README.md'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/picocolors/1.1.1'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/picocolors/1.1.1/picocolors.js'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/picocolors/1.1.1'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/picocolors/1.1.1/package.json'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/picocolors/1.1.1'                                                                                                                                                 
DEBUG Resolved package folder of postgres-array@2.0.0 to /root/.cache/deno/npm/registry.npmjs.org/postgres-array/2.0.0                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/postgres-array/2.0.0'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/postgres-array/2.0.0/index.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/postgres-array/2.0.0'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/postgres-array/2.0.0/readme.md'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/postgres-array/2.0.0'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/postgres-array/2.0.0/index.d.ts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/postgres-array/2.0.0'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/postgres-array/2.0.0/license'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/postgres-array/2.0.0'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/postgres-array/2.0.0/package.json'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/postgres-array/2.0.0'                                                                                                                                             
DEBUG Resolved package folder of postgres-bytea@1.0.1 to /root/.cache/deno/npm/registry.npmjs.org/postgres-bytea/1.0.1                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/postgres-bytea/1.0.1'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/postgres-bytea/1.0.1/index.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/postgres-bytea/1.0.1'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/postgres-bytea/1.0.1/readme.md'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/postgres-bytea/1.0.1'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/postgres-bytea/1.0.1/license'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/postgres-bytea/1.0.1'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/postgres-bytea/1.0.1/package.json'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/postgres-bytea/1.0.1'                                                                                                                                             
DEBUG Resolved package folder of postgres-date@1.0.7 to /root/.cache/deno/npm/registry.npmjs.org/postgres-date/1.0.7                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/postgres-date/1.0.7'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/postgres-date/1.0.7/index.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/postgres-date/1.0.7'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/postgres-date/1.0.7/readme.md'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/postgres-date/1.0.7'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/postgres-date/1.0.7/license'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/postgres-date/1.0.7'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/postgres-date/1.0.7/package.json'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/postgres-date/1.0.7'                                                                                                                                              
DEBUG Resolved package folder of postgres-interval@1.2.0 to /root/.cache/deno/npm/registry.npmjs.org/postgres-interval/1.2.0                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/postgres-interval/1.2.0'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/postgres-interval/1.2.0/index.js'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/postgres-interval/1.2.0'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/postgres-interval/1.2.0/readme.md'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/postgres-interval/1.2.0'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/postgres-interval/1.2.0/index.d.ts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/postgres-interval/1.2.0'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/postgres-interval/1.2.0/license'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/postgres-interval/1.2.0'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/postgres-interval/1.2.0/package.json'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/postgres-interval/1.2.0'                                                                                                                                          
DEBUG Resolved package folder of railroad-diagrams@1.0.0 to /root/.cache/deno/npm/registry.npmjs.org/railroad-diagrams/1.0.0                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/railroad-diagrams/1.0.0'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/railroad-diagrams/1.0.0/railroad_diagrams.py'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/railroad-diagrams/1.0.0'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/railroad-diagrams/1.0.0/.gitattributes'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/railroad-diagrams/1.0.0'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/railroad-diagrams/1.0.0/generator.html'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/railroad-diagrams/1.0.0'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/railroad-diagrams/1.0.0/example.html'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/railroad-diagrams/1.0.0'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/railroad-diagrams/1.0.0/README.md'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/railroad-diagrams/1.0.0'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/railroad-diagrams/1.0.0/.npmignore'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/railroad-diagrams/1.0.0'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/railroad-diagrams/1.0.0/railroad-diagrams.css'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/railroad-diagrams/1.0.0'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/railroad-diagrams/1.0.0/css-example.py-js'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/railroad-diagrams/1.0.0'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/railroad-diagrams/1.0.0/package.json'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/railroad-diagrams/1.0.0'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/railroad-diagrams/1.0.0/railroad-diagrams.js'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/railroad-diagrams/1.0.0'                                                                                                                                          
DEBUG Resolved package folder of randexp@0.4.6 to /root/.cache/deno/npm/registry.npmjs.org/randexp/0.4.6                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/randexp/0.4.6'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/randexp/0.4.6/LICENSE'                                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/randexp/0.4.6'                                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/randexp/0.4.6/README.md'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/randexp/0.4.6'                                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/randexp/0.4.6/lib'                                                                                                                                                
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/randexp/0.4.6/lib/randexp.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/randexp/0.4.6/lib'                                                                                                                                                
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/randexp/0.4.6/package.json'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/randexp/0.4.6'                                                                                                                                                    
DEBUG Resolved package folder of ret@0.1.15 to /root/.cache/deno/npm/registry.npmjs.org/ret/0.1.15                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/ret/0.1.15'                                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/ret/0.1.15/LICENSE'                                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/ret/0.1.15'                                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/ret/0.1.15/README.md'                                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/ret/0.1.15'                                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/ret/0.1.15/lib'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/ret/0.1.15/lib/positions.js'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/ret/0.1.15/lib'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/ret/0.1.15/lib/index.js'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/ret/0.1.15/lib'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/ret/0.1.15/lib/types.js'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/ret/0.1.15/lib'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/ret/0.1.15/lib/sets.js'                                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/ret/0.1.15/lib'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/ret/0.1.15/lib/util.js'                                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/ret/0.1.15/lib'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/ret/0.1.15/package.json'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/ret/0.1.15'                                                                                                                                                       
DEBUG Resolved package folder of spex@3.4.1 to /root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1'                                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/typescript'                                                                                                                                            
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/typescript/README.md'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/typescript'                                                                                                                                            
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/typescript/spex.d.ts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/typescript'                                                                                                                                            
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/README.md'                                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1'                                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib'                                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/ext'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/ext/stream'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/ext/stream/index.js'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/ext/stream'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/ext/stream/read.js'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/ext/stream'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/ext/batch.js'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/ext'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/ext/sequence.js'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/ext'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/ext/page.js'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/ext'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/index.js'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/adapter.js'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib'                                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/errors'                                                                                                                                            
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/errors/index.js'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/errors'                                                                                                                                            
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/errors/batch.js'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/errors'                                                                                                                                            
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/errors/sequence.js'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/errors'                                                                                                                                            
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/errors/page.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/errors'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/utils'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/utils/index.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/utils'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/utils/static.js'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/lib/utils'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/package.json'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1'                                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1/License'                                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/spex/3.4.1'                                                                                                                                                       
DEBUG Resolved package folder of split2@4.2.0 to /root/.cache/deno/npm/registry.npmjs.org/split2/4.2.0                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/split2/4.2.0'                                                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/split2/4.2.0/index.js'                                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/split2/4.2.0'                                                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/split2/4.2.0/LICENSE'                                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/split2/4.2.0'                                                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/split2/4.2.0/README.md'                                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/split2/4.2.0'                                                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/split2/4.2.0/test.js'                                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/split2/4.2.0'                                                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/split2/4.2.0/bench.js'                                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/split2/4.2.0'                                                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/split2/4.2.0/package.json'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/split2/4.2.0'                                                                                                                                                     
DEBUG Resolved package folder of trpc-cli@0.10.2_zod@3.25.76 to /root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2'                                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/parse-procedure.js'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/json.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/index.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/json-schema.js'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/bin.js'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/trpc-compat.d.ts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/types.d.ts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/index.d.ts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/prompts.js'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/types.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/errors.js'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/ignoreme.js'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/completions.js'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/standard-schema'                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/standard-schema/contract.js'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/standard-schema'                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/standard-schema/utils.d.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/standard-schema'                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/standard-schema/errors.js'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/standard-schema'                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/standard-schema/errors.d.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/standard-schema'                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/standard-schema/utils.js'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/standard-schema'                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/standard-schema/contract.d.ts'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/standard-schema'                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/util.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/trpc-compat.js'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/errors.d.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/parse-procedure.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/json.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/completions.d.ts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/logging.d.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/json-schema.d.ts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/logging.js'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/ignoreme.d.ts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/util.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/prompts.d.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist/bin.d.ts'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/dist'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/LICENSE'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2'                                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/README.md'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2'                                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2/package.json'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/trpc-cli/0.10.2'                                                                                                                                                  
DEBUG Resolved package folder of typescript@5.9.3 to /root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/SECURITY.md'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/LICENSE.txt'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/README.md'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2024.regexp.d.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2019.array.d.ts'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2017.typedarrays.d.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2020.full.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2019.string.d.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/tsserverlibrary.js'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2023.array.d.ts'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2015.proxy.d.ts'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/tsserverlibrary.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/ko'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/ko/diagnosticMessages.generated.json'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/ko'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2023.collection.d.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.esnext.intl.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es5.d.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2017.date.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2021.weakref.d.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/zh-tw'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/zh-tw/diagnosticMessages.generated.json'                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/zh-tw'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.d.ts'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.esnext.error.d.ts'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.esnext.array.d.ts'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2016.d.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.dom.asynciterable.d.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2019.symbol.d.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2017.arraybuffer.d.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2019.intl.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2017.full.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2024.promise.d.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2015.collection.d.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2021.intl.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2020.d.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2015.symbol.wellknown.d.ts'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.webworker.importscripts.d.ts'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.decorators.legacy.d.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2021.d.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/es'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/es/diagnosticMessages.generated.json'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/es'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2015.iterable.d.ts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.scripthost.d.ts'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.esnext.sharedmemory.d.ts'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2018.asyncgenerator.d.ts'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2018.d.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.esnext.disposable.d.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/it'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/it/diagnosticMessages.generated.json'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/it'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.dom.d.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2017.sharedmemory.d.ts'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/_tsserver.js'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2016.full.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2020.bigint.d.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/typescript.d.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2018.asynciterable.d.ts'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2022.full.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2020.sharedmemory.d.ts'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.esnext.full.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/tr'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/tr/diagnosticMessages.generated.json'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/tr'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.esnext.d.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2020.promise.d.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2018.intl.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2024.string.d.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2021.full.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2024.arraybuffer.d.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2019.d.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/de'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/de/diagnosticMessages.generated.json'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/de'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2024.sharedmemory.d.ts'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2020.string.d.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2015.reflect.d.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2016.intl.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2023.d.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2018.full.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.webworker.iterable.d.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2022.string.d.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2024.object.d.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2018.regexp.d.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2017.intl.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/pt-br'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/pt-br/diagnosticMessages.generated.json'                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/pt-br'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/zh-cn'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/zh-cn/diagnosticMessages.generated.json'                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/zh-cn'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2021.string.d.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.webworker.d.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2022.error.d.ts'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2024.d.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2020.symbol.wellknown.d.ts'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/tsserver.js'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2024.full.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/tsc.js'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2022.object.d.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2022.regexp.d.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2021.promise.d.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/_tsc.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.decorators.d.ts'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/fr'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/fr/diagnosticMessages.generated.json'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/fr'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2020.intl.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2016.array.include.d.ts'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2023.full.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es6.d.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2018.promise.d.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.esnext.float16.d.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2023.intl.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2022.array.d.ts'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2015.generator.d.ts'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/typesMap.json'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2022.intl.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.dom.iterable.d.ts'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/_typingsInstaller.js'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2017.d.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2020.date.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/ru'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/ru/diagnosticMessages.generated.json'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/ru'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/typingsInstaller.js'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.esnext.collection.d.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2022.d.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2019.full.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/watchGuard.js'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.webworker.asynciterable.d.ts'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.esnext.promise.d.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2017.object.d.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/cs'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/cs/diagnosticMessages.generated.json'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/cs'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2017.string.d.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/pl'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/pl/diagnosticMessages.generated.json'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/pl'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2015.promise.d.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2015.core.d.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2015.d.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2015.symbol.d.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2019.object.d.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2020.number.d.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.es2024.collection.d.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.esnext.decorators.d.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/lib.esnext.iterator.d.ts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/ja'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/ja/diagnosticMessages.generated.json'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/ja'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib/typescript.js'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/lib'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/package.json'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3'                                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/ThirdPartyNoticeText.txt'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/bin'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/bin/tsserver'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/bin'                                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/bin/tsc'                                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/typescript/5.9.3/bin'                                                                                                                                             
DEBUG Resolved package folder of xtend@4.0.2 to /root/.cache/deno/npm/registry.npmjs.org/xtend/4.0.2                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/xtend/4.0.2'                                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/xtend/4.0.2/LICENSE'                                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/xtend/4.0.2'                                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/xtend/4.0.2/immutable.js'                                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/xtend/4.0.2'                                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/xtend/4.0.2/README.md'                                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/xtend/4.0.2'                                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/xtend/4.0.2/mutable.js'                                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/xtend/4.0.2'                                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/xtend/4.0.2/.jshintrc'                                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/xtend/4.0.2'                                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/xtend/4.0.2/test.js'                                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/xtend/4.0.2'                                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/xtend/4.0.2/package.json'                                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/xtend/4.0.2'                                                                                                                                                      
DEBUG Resolved package folder of zod@3.25.76 to /root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76'                                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4-mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4-mini/index.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4-mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4-mini/index.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4-mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4-mini/index.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4-mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4-mini/index.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4-mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/index.js'                                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76'                                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/index.d.cts'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76'                                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/index.d.ts'                                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76'                                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/ZodError.js'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/external.d.ts'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/standard-schema.cjs'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/ZodError.cjs'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/index.js'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/index.d.cts'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/external.js'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/types.d.ts'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/index.d.ts'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/locales/en.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/locales/en.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/locales/en.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/locales/en.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/external.d.cts'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/types.js'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/parseUtil.d.ts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/errorUtil.cjs'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/parseUtil.cjs'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/util.d.cts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/errorUtil.d.ts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/partialUtil.js'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/errorUtil.d.cts'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/typeAliases.cjs'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/enumUtil.d.cts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/util.d.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/partialUtil.cjs'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/enumUtil.cjs'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/util.cjs'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/typeAliases.d.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/enumUtil.d.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/parseUtil.js'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/typeAliases.d.cts'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/parseUtil.d.cts'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/util.js'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/errorUtil.js'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/partialUtil.d.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/enumUtil.js'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/partialUtil.d.cts'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers/typeAliases.js'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/helpers'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/errors.js'                                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/standard-schema.d.cts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/ZodError.d.cts'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/errors.d.cts'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/external.cjs'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/errors.d.ts'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/types.d.cts'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/types.cjs'                                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/ZodError.d.ts'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/standard-schema.js'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/errors.cjs'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/standard-schema.d.ts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3/index.cjs'                                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v3'                                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4'                                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/external.d.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/parse.d.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/index.js'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/index.d.cts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/external.js'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/coerce.js'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/iso.d.ts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/compat.d.ts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/checks.cjs'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/index.d.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/checks.d.ts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/external.d.cts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/iso.d.cts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/errors.js'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/checks.js'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/errors.d.cts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/external.cjs'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/compat.js'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/errors.d.ts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/schemas.d.ts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/schemas.d.cts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/checks.d.cts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/parse.cjs'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/iso.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/coerce.d.cts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/schemas.js'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/parse.js'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/parse.d.cts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/errors.cjs'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/iso.cjs'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/compat.d.cts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/schemas.cjs'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/compat.cjs'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/coerce.d.ts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/index.cjs'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic/coerce.cjs'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/classic'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/index.js'                                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/index.d.cts'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4'                                                                                                                                                   
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/index.d.ts'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4'                                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/eo.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/be.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/mk.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ru.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/fa.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/fr.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ur.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ta.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/en.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/fr.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/az.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ua.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ta.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/fa.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/fr.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ms.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/fr-CA.cjs'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ja.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/kh.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/zh-CN.js'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/pt.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/pl.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ja.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/index.js'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/es.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/index.d.cts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ps.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/de.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ta.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/az.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/tr.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/sl.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/sv.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/vi.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ms.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/fr-CA.d.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/sv.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ru.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/tr.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/vi.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/fr.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/no.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ko.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/tr.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/it.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/sl.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/index.d.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/it.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/cs.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/id.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/hu.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/zh-TW.cjs'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/de.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ko.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/de.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/be.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/zh-TW.d.cts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/pt.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ps.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/en.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ca.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/mk.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/zh-CN.cjs'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ar.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/id.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/en.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ota.d.ts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ar.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/fi.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/zh-CN.d.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/hu.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ur.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ko.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/zh-CN.d.cts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/he.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/vi.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/id.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/zh-TW.js'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ar.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/he.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ota.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/id.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/mk.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/no.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/nl.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/tr.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/kh.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ar.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ms.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/eo.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/he.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ca.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/sv.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/es.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/sl.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/nl.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ua.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ur.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/sl.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/nl.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/hu.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/az.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ur.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/fa.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/fr-CA.d.cts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ota.d.cts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/pl.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/de.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/es.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/sv.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/cs.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ota.cjs'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/no.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/fi.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/be.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/th.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/pt.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/pl.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/zh-TW.d.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ko.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/kh.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/th.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/eo.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/nl.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/az.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ps.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/hu.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/he.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/th.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/th.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/no.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ru.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/it.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/kh.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/fi.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/es.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/fa.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/eo.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ua.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/fi.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/it.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/pl.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ja.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ca.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ca.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ms.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/cs.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ru.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/pt.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ta.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ps.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/vi.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/mk.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/be.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/index.cjs'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ja.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/ua.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/fr-CA.js'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/cs.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales/en.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/locales'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/core.js'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/versions.js'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/standard-schema.cjs'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/regexes.js'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/util.d.cts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/parse.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/function.d.cts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/index.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/api.js'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/index.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/doc.js'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/json-schema.js'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/checks.cjs'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/regexes.cjs'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/doc.d.cts'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/regexes.d.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/index.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/checks.d.ts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/regexes.d.cts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/errors.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/json-schema.cjs'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/checks.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/standard-schema.d.cts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/versions.d.cts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/errors.d.cts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/util.d.ts'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/registries.cjs'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/errors.d.ts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/schemas.d.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/to-json-schema.js'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/to-json-schema.cjs'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/registries.d.cts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/core.cjs'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/core.d.ts'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/util.cjs'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/schemas.d.cts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/function.d.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/checks.d.cts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/parse.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/registries.d.ts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/versions.cjs'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/core.d.cts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/schemas.js'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/json-schema.d.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/parse.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/json-schema.d.cts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/standard-schema.js'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/api.cjs'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/parse.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/api.d.cts'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/errors.cjs'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/function.cjs'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/to-json-schema.d.cts'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/util.js'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/schemas.cjs'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/api.d.ts'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/doc.d.ts'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/function.js'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/versions.d.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/registries.js'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/doc.cjs'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/standard-schema.d.ts'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/to-json-schema.d.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core/index.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/core'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/external.d.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/parse.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/index.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/index.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/external.js'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/coerce.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/iso.d.ts'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/checks.cjs'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/index.d.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/checks.d.ts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/external.d.cts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/iso.d.cts'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/checks.js'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/external.cjs'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/schemas.d.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/schemas.d.cts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/checks.d.cts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/parse.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/iso.js'                                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/coerce.d.cts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/schemas.js'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/parse.js'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/parse.d.cts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/iso.cjs'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/schemas.cjs'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/coerce.d.ts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/index.cjs'                                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini/coerce.cjs'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/mini'                                                                                                                                              
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4/index.cjs'                                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/v4'                                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src'                                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4-mini'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4-mini/index.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4-mini'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/benchmarks'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/benchmarks/object.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/benchmarks'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/benchmarks/realworld.ts'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/benchmarks'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/benchmarks/primitives.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/benchmarks'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/benchmarks/index.ts'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/benchmarks'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/benchmarks/ipv4.ts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/benchmarks'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/benchmarks/union.ts'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/benchmarks'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/benchmarks/discriminatedUnion.ts'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/benchmarks'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/benchmarks/string.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/benchmarks'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/benchmarks/datetime.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/benchmarks'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/standard-schema.ts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/locales/en.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/types.ts'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/helpers'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/helpers/errorUtil.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/helpers'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/helpers/partialUtil.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/helpers'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/helpers/typeAliases.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/helpers'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/helpers/parseUtil.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/helpers'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/helpers/enumUtil.ts'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/helpers'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/helpers/util.ts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/helpers'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/ZodError.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/pipeline.test.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/firstpartyschematypes.test.ts'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/async-parsing.test.ts'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/partials.test.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/date.test.ts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/catch.test.ts'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/safeparse.test.ts'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/description.test.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/instanceof.test.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/nullable.test.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/language-server.source.ts'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/enum.test.ts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/transformer.test.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/readonly.test.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/all-errors.test.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/deepmasking.test.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/object-in-es5-env.test.ts'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/bigint.test.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/refine.test.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/generics.test.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/tuple.test.ts'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/nativeEnum.test.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/async-refinements.test.ts'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/pickomit.test.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/branded.test.ts'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/default.test.ts'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/parser.test.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/validations.test.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/array.test.ts'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/literal.test.ts'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/Mocker.ts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/intersection.test.ts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/void.test.ts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/string.test.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/language-server.test.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/preprocess.test.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/unions.test.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/function.test.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/number.test.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/masking.test.ts'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/map.test.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/primitive.test.ts'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/nan.test.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/recursive.test.ts'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/parseUtil.test.ts'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/object-augmentation.test.ts'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/standard-schema.test.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/anyunknown.test.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/promise.test.ts'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/set.test.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/mocker.test.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/coerce.test.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/complex.test.ts'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/object.test.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/discriminated-unions.test.ts'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/error.test.ts'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/record.test.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/firstparty.test.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/base.test.ts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/optional.test.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests/custom.test.ts'                                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/tests'                                                                                                                                         
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/index.ts'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/external.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3'                                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3/errors.ts'                                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v3'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/checks.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/brand.test.ts'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/json.test.ts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/continuability.test.ts'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/async-parsing.test.ts'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/date.test.ts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/catch.test.ts'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/description.test.ts'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/instanceof.test.ts'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/nullable.test.ts'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/stringbool.test.ts'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/enum.test.ts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/recursive-types.test.ts'                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/prototypes.test.ts'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/readonly.test.ts'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/prefault.test.ts'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/pipe.test.ts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/template-literal.test.ts'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/bigint.test.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/refine.test.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/generics.test.ts'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/tuple.test.ts'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/async-refinements.test.ts'                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/pickomit.test.ts'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/default.test.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/validations.test.ts'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/array.test.ts'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/nested-refine.test.ts'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/literal.test.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/intersection.test.ts'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/index.test.ts'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/void.test.ts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/to-json-schema.test.ts'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/string.test.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/transform.test.ts'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/nonoptional.test.ts'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/preprocess.test.ts'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/function.test.ts'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/registries.test.ts'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/number.test.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/file.test.ts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/map.test.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/primitive.test.ts'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/nan.test.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/error-utils.test.ts'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/partial.test.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/string-formats.test.ts'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/lazy.test.ts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/standard-schema.test.ts'                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/anyunknown.test.ts'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/promise.test.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/datetime.test.ts'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/set.test.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/coerce.test.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/union.test.ts'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/coalesce.test.ts'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/object.test.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/discriminated-unions.test.ts'                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/error.test.ts'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/record.test.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/firstparty.test.ts'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/base.test.ts'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/optional.test.ts'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/custom.test.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests/assignability.test.ts'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/tests'                                                                                                                                 
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/parse.ts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/index.ts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/external.ts'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/coerce.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/compat.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/schemas.ts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/iso.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic/errors.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/classic'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/ja.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/kh.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/sl.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/be.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/hu.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/mk.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/zh-TW.ts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/nl.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/ru.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/fr-CA.ts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/ar.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/en.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/ko.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/ps.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/id.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/index.ts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/no.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/sv.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/it.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/eo.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/cs.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/fr.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/fi.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/he.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/ota.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/vi.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/fa.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/ua.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/ta.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/zh-CN.ts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/th.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/ur.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/pt.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/ca.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/az.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/tr.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/pl.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/de.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/ms.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales/es.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/locales'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/versions.ts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/config.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/standard-schema.ts'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/checks.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/registries.ts'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/json-schema.ts'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/api.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/tests'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/tests/locales'                                                                                                                            
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/tests/locales/ru.test.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/tests/locales'                                                                                                                            
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/tests/locales/en.test.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/tests/locales'                                                                                                                            
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/tests/locales/tr.test.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/tests/locales'                                                                                                                            
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/tests/locales/be.test.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/tests/locales'                                                                                                                            
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/tests/index.test.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/tests'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/parse.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/regexes.ts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/zsf.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/index.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/doc.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/to-json-schema.ts'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/core.ts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/util.ts'                                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/schemas.ts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/function.ts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core/errors.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/core'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/index.ts'                                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4'                                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/checks.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests/brand.test.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests/functions.test.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests/recursive-types.test.ts'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests/computed.test.ts'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests/prototypes.test.ts'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests/index.test.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests/string.test.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests/number.test.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests/object.test.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests/error.test.ts'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests/checks.test.ts'                                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests/assignability.test.ts'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/tests'                                                                                                                                    
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/parse.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/index.ts'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/external.ts'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/coerce.ts'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/schemas.ts'                                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini/iso.ts'                                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/v4/mini'                                                                                                                                          
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src/index.ts'                                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/src'                                                                                                                                                  
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/LICENSE'                                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76'                                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/README.md'                                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76'                                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/package.json'                                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76'                                                                                                                                                      
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76/index.cjs'                                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod/3.25.76'                                                                                                                                                      
DEBUG Resolved package folder of zod-to-json-schema@3.25.1_zod@3.25.76 to /root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/createIndex.ts'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/postesm.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1'                                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/.github'                                                                                                                                
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/.github/FUNDING.yml'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/.github'                                                                                                                                
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/.github/CR_logotype-full-color.png'                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/.github'                                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist'                                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/zodToJsonSchema.js'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/errorMessages.js'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/index.js'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/selectParser.js'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parseDef.js'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/Refs.js'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/enum.js'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/string.js'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/branded.js'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/never.js'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/undefined.js'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/default.js'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/catch.js'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/union.js'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/object.js'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/array.js'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/tuple.js'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/readonly.js'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/nativeEnum.js'                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/number.js'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/promise.js'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/nullable.js'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/any.js'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/bigint.js'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/date.js'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/pipeline.js'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/literal.js'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/intersection.js'                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/record.js'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/effects.js'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/unknown.js'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/boolean.js'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/optional.js'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/null.js'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/set.js'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers/map.js'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/package.json'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/parseTypes.js'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/Options.js'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs/getRelativePath.js'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/cjs'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types'                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parseTypes.d.ts'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types'                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/selectParser.d.ts'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types'                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parseDef.d.ts'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types'                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/index.d.ts'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types'                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/Options.d.ts'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types'                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/getRelativePath.d.ts'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types'                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/Refs.d.ts'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/undefined.d.ts'                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/default.d.ts'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/any.d.ts'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/date.d.ts'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/nullable.d.ts'                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/object.d.ts'                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/number.d.ts'                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/nativeEnum.d.ts'                                                                                                            
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/optional.d.ts'                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/promise.d.ts'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/unknown.d.ts'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/record.d.ts'                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/pipeline.d.ts'                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/array.d.ts'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/effects.d.ts'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/bigint.d.ts'                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/intersection.d.ts'                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/literal.d.ts'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/branded.d.ts'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/boolean.d.ts'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/union.d.ts'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/never.d.ts'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/tuple.d.ts'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/set.d.ts'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/string.d.ts'                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/catch.d.ts'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/readonly.d.ts'                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/enum.d.ts'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/null.d.ts'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers/map.d.ts'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/parsers'                                                                                                                     
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/errorMessages.d.ts'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types'                                                                                                                             
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types/zodToJsonSchema.d.ts'                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/types'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/zodToJsonSchema.js'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/errorMessages.js'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/index.js'                                                                                                                             
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/selectParser.js'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parseDef.js'                                                                                                                          
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/Refs.js'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/enum.js'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/string.js'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/branded.js'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/never.js'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/undefined.js'                                                                                                                 
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/default.js'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/catch.js'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/union.js'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/object.js'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/array.js'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/tuple.js'                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/readonly.js'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/nativeEnum.js'                                                                                                                
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/number.js'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/promise.js'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/nullable.js'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/any.js'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/bigint.js'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/date.js'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/pipeline.js'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/literal.js'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/intersection.js'                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/record.js'                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/effects.js'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/unknown.js'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/boolean.js'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/optional.js'                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/null.js'                                                                                                                      
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/set.js'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers/map.js'                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parsers'                                                                                                                       
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/package.json'                                                                                                                         
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/parseTypes.js'                                                                                                                        
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/Options.js'                                                                                                                           
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm/getRelativePath.js'                                                                                                                   
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/dist/esm'                                                                                                                               
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/.prettierrc.json'                                                                                                                              
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/postcjs.ts'                                                                                                                                    
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/LICENSE'                                                                                                                                       
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/README.md'                                                                                                                                     
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/package.json'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/contributing.md'                                                                                                                               
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1'                                                                                                                                        
DEBUG Adding file '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1/changelog.md'                                                                                                                                  
DEBUG Ensuring directory '/root/.cache/deno/npm/registry.npmjs.org/zod-to-json-schema/3.25.1'                                                                                                                                        
DEBUG Flattening @pgkit into node_modules                                                                                                                                                                                            
DEBUG Flattening @trpc into node_modules                                                                                                                                                                                             
DEBUG Flattening @types into node_modules                                                                                                                                                                                            
DEBUG Flattening assert-options into node_modules                                                                                                                                                                                    
DEBUG Flattening commander into node_modules                                                                                                                                                                                         
DEBUG Flattening discontinuous-range into node_modules                                                                                                                                                                               
DEBUG Flattening moo into node_modules                                                                                                                                                                                               
DEBUG Flattening nearley into node_modules                                                                                                                                                                                           
DEBUG Flattening pg into node_modules                                                                                                                                                                                                
DEBUG Flattening pg-cloudflare into node_modules                                                                                                                                                                                     
DEBUG Flattening pg-connection-string into node_modules                                                                                                                                                                              
DEBUG Flattening pg-cursor into node_modules                                                                                                                                                                                         
DEBUG Flattening pg-int8 into node_modules                                                                                                                                                                                           
DEBUG Flattening pg-minify into node_modules                                                                                                                                                                                         
DEBUG Flattening pg-pool into node_modules                                                                                                                                                                                           
DEBUG Flattening pg-promise into node_modules                                                                                                                                                                                        
DEBUG Flattening pg-protocol into node_modules                                                                                                                                                                                       
DEBUG Flattening pg-query-stream into node_modules                                                                                                                                                                                   
DEBUG Flattening pg-types into node_modules                                                                                                                                                                                          
DEBUG Flattening pgpass into node_modules                                                                                                                                                                                            
DEBUG Flattening pgsql-ast-parser into node_modules                                                                                                                                                                                  
DEBUG Flattening picocolors into node_modules                                                                                                                                                                                        
DEBUG Flattening postgres-array into node_modules                                                                                                                                                                                    
DEBUG Flattening postgres-bytea into node_modules                                                                                                                                                                                    
DEBUG Flattening postgres-date into node_modules                                                                                                                                                                                     
DEBUG Flattening postgres-interval into node_modules                                                                                                                                                                                 
DEBUG Flattening railroad-diagrams into node_modules                                                                                                                                                                                 
DEBUG Flattening randexp into node_modules                                                                                                                                                                                           
DEBUG Flattening ret into node_modules                                                                                                                                                                                               
DEBUG Flattening spex into node_modules                                                                                                                                                                                              
DEBUG Flattening split2 into node_modules                                                                                                                                                                                            
DEBUG Flattening trpc-cli into node_modules                                                                                                                                                                                          
DEBUG Flattening typescript into node_modules                                                                                                                                                                                        
DEBUG Flattening xtend into node_modules                                                                                                                                                                                             
DEBUG Flattening zod into node_modules                                                                                                                                                                                               
DEBUG Flattening zod-to-json-schema into node_modules                                                                                                                                                                                
DEBUG Opening cache /root/.cache/deno/node_analysis_cache_v2...                                                                                                                                                                      
DEBUG edge-runtime is listening on 0.0.0.0:9000                                                                                                                                                                                      
DEBUG Resolved package folder of @pgkit/client@0.6.1 to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/@pgkit/client/0.6.1                                                                                                  
DEBUG Resolved package folder of @pgkit/migra@0.6.1 to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/@pgkit/migra/0.6.1                                                                                                    
DEBUG Resolved package folder of @pgkit/client@0.6.1 to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/@pgkit/client/0.6.1                                                                                                  
DEBUG Resolved package folder of @pgkit/migra@0.6.1 to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/@pgkit/migra/0.6.1                                                                                                    
DEBUG Resolved pg/lib/type-overrides from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/@pgkit/client/0.6.1/dist/client.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg/8.14.1                     
DEBUG Resolved pg-types from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg/8.14.1/lib/type-overrides.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-types/2.2.0                                
DEBUG Resolved postgres-array from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-types/2.2.0/lib/textParsers.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/postgres-array/2.0.0                  
DEBUG Resolved postgres-date from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-types/2.2.0/lib/textParsers.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/postgres-date/1.0.7                    
DEBUG Resolved postgres-interval from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-types/2.2.0/lib/textParsers.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/postgres-interval/1.2.0            
DEBUG Resolved xtend/mutable from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/postgres-interval/1.2.0/index.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/xtend/4.0.2                             
DEBUG Resolved postgres-bytea from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-types/2.2.0/lib/textParsers.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/postgres-bytea/1.0.1                  
DEBUG Resolved pg-int8 from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-types/2.2.0/lib/binaryParsers.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-int8/1.0.1                              
DEBUG Resolved pg-promise from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/@pgkit/client/0.6.1/dist/client.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-promise/11.15.0                       
DEBUG Resolved assert-options from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-promise/11.15.0/lib/assert.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/assert-options/0.8.3                   
DEBUG Resolved pg-minify from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-promise/11.15.0/lib/errors/query-file-error.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-minify/1.8.0            
DEBUG Resolved pg-minify from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-promise/11.15.0/lib/query-file.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-minify/1.8.0                         
DEBUG Resolved pg/lib/utils from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-promise/11.15.0/lib/formatting.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg/8.16.3                            
DEBUG Resolved pg-types from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg/8.16.3/lib/defaults.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-types/2.2.0                                      
DEBUG Resolved pg from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-promise/11.15.0/lib/main.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg/8.16.3                                            
DEBUG Resolved pg-types from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg/8.16.3/lib/type-overrides.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-types/2.2.0                                
DEBUG Resolved pg-connection-string from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg/8.16.3/lib/connection-parameters.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-connection-string/2.11.0
DEBUG Resolved pg-types from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg/8.16.3/lib/result.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-types/2.2.0                                        
DEBUG Resolved pg-protocol from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg/8.16.3/lib/connection.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-protocol/1.11.0                             
DEBUG Resolved pg-pool from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg/8.16.3/lib/index.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-pool/3.11.0_1                                        
DEBUG Resolved pg-types from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg/8.16.3/lib/index.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-types/2.2.0                                         
DEBUG Resolved pg-minify from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-promise/11.15.0/lib/main.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-minify/1.8.0                               
DEBUG Resolved pgsql-ast-parser from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/@pgkit/client/0.6.1/dist/naming.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/pgsql-ast-parser/12.0.1            
DEBUG Resolved nearley from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/pgsql-ast-parser/12.0.1/index.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/nearley/2.20.1                                
DEBUG Resolved moo from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/pgsql-ast-parser/12.0.1/index.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/moo/0.5.2                                         
DEBUG Resolved spex from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/pg-promise/11.15.0/lib/task.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/spex/3.4.1                                         
DEBUG Resolved @pgkit/schemainspect from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/@pgkit/migra/0.6.1/dist/changes.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/@pgkit/schemainspect/0.6.1     
DEBUG Resolved @pgkit/client from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/@pgkit/schemainspect/0.6.1/dist/pg/obj.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/@pgkit/client/0.6.1            
DEBUG Resolved @pgkit/client from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/@pgkit/migra/0.6.1/dist/command.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/@pgkit/client/0.6.1                   
DEBUG Resolved @trpc/server from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/@pgkit/migra/0.6.1/dist/command.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/@trpc/server/11.10.0                   
DEBUG Resolved trpc-cli from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/@pgkit/migra/0.6.1/dist/command.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/trpc-cli/0.10.2                            
DEBUG Resolved @trpc/server from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/trpc-cli/0.10.2/dist/index.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/@trpc/server/11.10.0                        
DEBUG Resolved commander from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/trpc-cli/0.10.2/dist/index.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/commander/14.0.3                               
DEBUG Resolved zod/v4/core from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/trpc-cli/0.10.2/dist/parse-procedure.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/zod/3.25.76                        
DEBUG Resolved zod-to-json-schema from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/trpc-cli/0.10.2/dist/parse-procedure.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/zod-to-json-schema/3.25.1   
DEBUG Resolved zod/v3 from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/zod-to-json-schema/3.25.1/dist/cjs/selectParser.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/zod/3.25.76                  
DEBUG Resolved zod/v3 from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/zod-to-json-schema/3.25.1/dist/cjs/parsers/array.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/zod/3.25.76                 
DEBUG Resolved zod/v3 from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/zod-to-json-schema/3.25.1/dist/cjs/parsers/record.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/zod/3.25.76                
DEBUG Resolved zod/v4 from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/trpc-cli/0.10.2/dist/index.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/zod/3.25.76                                       
DEBUG Resolved zod from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/trpc-cli/0.10.2/dist/index.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/zod/3.25.76                                          
DEBUG Resolved @trpc/server from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/trpc-cli/0.10.2/dist/index.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/@trpc/server/11.10.0                        
DEBUG Resolved zod from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/@pgkit/migra/0.6.1/dist/command.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/zod/3.25.76                                     
DEBUG Resolved @pgkit/client from file:///var/tmp/sb-compile-edge-runtime/node_modules/localhost/@pgkit/migra/0.6.1/dist/migra.js to /var/tmp/sb-compile-edge-runtime/node_modules/localhost/@pgkit/client/0.6.1                     
main worker has been destroyed                                                                                                                                                                                                       
                                                                                                                                                                                                                                     
